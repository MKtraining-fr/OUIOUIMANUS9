import{a as hb,d as gb,g as xb,r as h,u as Xs,N as Pp,O as bb,e as Sa,f as yb,L as vb,B as jb,h as _b,i as ml,j as so}from"./react-vendor-Dx0eSN0M.js";import{c as Nb}from"./supabase-vendor-CH4nZy4O.js";import{R as Jp,B as wb,C as Sb,X as Cb,Y as kb,T as Wp,L as eh,a as th,P as Tb,b as Eb,c as Mb}from"./chart-vendor-CVAiwELr.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))c(u);new MutationObserver(u=>{for(const f of u)if(f.type==="childList")for(const g of f.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&c(g)}).observe(document,{childList:!0,subtree:!0});function o(u){const f={};return u.integrity&&(f.integrity=u.integrity),u.referrerPolicy&&(f.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?f.credentials="include":u.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function c(u){if(u.ep)return;u.ep=!0;const f=o(u);fetch(u.href,f)}})();var vd={exports:{}},fi={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ah;function Ab(){if(ah)return fi;ah=1;var n=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function o(c,u,f){var g=null;if(f!==void 0&&(g=""+f),u.key!==void 0&&(g=""+u.key),"key"in u){f={};for(var x in u)x!=="key"&&(f[x]=u[x])}else f=u;return u=f.ref,{$$typeof:n,type:c,key:g,ref:u!==void 0?u:null,props:f}}return fi.Fragment=i,fi.jsx=o,fi.jsxs=o,fi}var sh;function zb(){return sh||(sh=1,vd.exports=Ab()),vd.exports}var a=zb(),jd={exports:{}},pi={},_d={exports:{}},Nd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nh;function Ob(){return nh||(nh=1,(function(n){function i(_,T){var A=_.length;_.push(T);e:for(;0<A;){var P=A-1>>>1,Q=_[P];if(0<u(Q,T))_[P]=T,_[A]=Q,A=P;else break e}}function o(_){return _.length===0?null:_[0]}function c(_){if(_.length===0)return null;var T=_[0],A=_.pop();if(A!==T){_[0]=A;e:for(var P=0,Q=_.length,D=Q>>>1;P<D;){var H=2*(P+1)-1,M=_[H],ce=H+1,de=_[ce];if(0>u(M,A))ce<Q&&0>u(de,M)?(_[P]=de,_[ce]=A,P=ce):(_[P]=M,_[H]=A,P=H);else if(ce<Q&&0>u(de,A))_[P]=de,_[ce]=A,P=ce;else break e}}return T}function u(_,T){var A=_.sortIndex-T.sortIndex;return A!==0?A:_.id-T.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;n.unstable_now=function(){return f.now()}}else{var g=Date,x=g.now();n.unstable_now=function(){return g.now()-x}}var p=[],y=[],v=1,N=null,j=3,S=!1,w=!1,E=!1,C=!1,B=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function U(_){for(var T=o(y);T!==null;){if(T.callback===null)c(y);else if(T.startTime<=_)c(y),T.sortIndex=T.expirationTime,i(p,T);else break;T=o(y)}}function G(_){if(E=!1,U(_),!w)if(o(p)!==null)w=!0,se||(se=!0,I());else{var T=o(y);T!==null&&ne(G,T.startTime-_)}}var se=!1,W=-1,K=5,oe=-1;function Y(){return C?!0:!(n.unstable_now()-oe<K)}function Z(){if(C=!1,se){var _=n.unstable_now();oe=_;var T=!0;try{e:{w=!1,E&&(E=!1,L(W),W=-1),S=!0;var A=j;try{t:{for(U(_),N=o(p);N!==null&&!(N.expirationTime>_&&Y());){var P=N.callback;if(typeof P=="function"){N.callback=null,j=N.priorityLevel;var Q=P(N.expirationTime<=_);if(_=n.unstable_now(),typeof Q=="function"){N.callback=Q,U(_),T=!0;break t}N===o(p)&&c(p),U(_)}else c(p);N=o(p)}if(N!==null)T=!0;else{var D=o(y);D!==null&&ne(G,D.startTime-_),T=!1}}break e}finally{N=null,j=A,S=!1}T=void 0}}finally{T?I():se=!1}}}var I;if(typeof $=="function")I=function(){$(Z)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,O=q.port2;q.port1.onmessage=Z,I=function(){O.postMessage(null)}}else I=function(){B(Z,0)};function ne(_,T){W=B(function(){_(n.unstable_now())},T)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(_){_.callback=null},n.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<_?Math.floor(1e3/_):5},n.unstable_getCurrentPriorityLevel=function(){return j},n.unstable_next=function(_){switch(j){case 1:case 2:case 3:var T=3;break;default:T=j}var A=j;j=T;try{return _()}finally{j=A}},n.unstable_requestPaint=function(){C=!0},n.unstable_runWithPriority=function(_,T){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var A=j;j=_;try{return T()}finally{j=A}},n.unstable_scheduleCallback=function(_,T,A){var P=n.unstable_now();switch(typeof A=="object"&&A!==null?(A=A.delay,A=typeof A=="number"&&0<A?P+A:P):A=P,_){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=A+Q,_={id:v++,callback:T,priorityLevel:_,startTime:A,expirationTime:Q,sortIndex:-1},A>P?(_.sortIndex=A,i(y,_),o(p)===null&&_===o(y)&&(E?(L(W),W=-1):E=!0,ne(G,A-P))):(_.sortIndex=Q,i(p,_),w||S||(w=!0,se||(se=!0,I()))),_},n.unstable_shouldYield=Y,n.unstable_wrapCallback=function(_){var T=j;return function(){var A=j;j=T;try{return _.apply(this,arguments)}finally{j=A}}}})(Nd)),Nd}var lh;function Db(){return lh||(lh=1,_d.exports=Ob()),_d.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ih;function Rb(){if(ih)return pi;ih=1;var n=Db(),i=hb(),o=gb();function c(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function g(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function x(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(f(e)!==e)throw Error(c(188))}function y(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(c(188));return t!==e?null:e}for(var s=e,l=t;;){var r=s.return;if(r===null)break;var d=r.alternate;if(d===null){if(l=r.return,l!==null){s=l;continue}break}if(r.child===d.child){for(d=r.child;d;){if(d===s)return p(r),e;if(d===l)return p(r),t;d=d.sibling}throw Error(c(188))}if(s.return!==l.return)s=r,l=d;else{for(var m=!1,b=r.child;b;){if(b===s){m=!0,s=r,l=d;break}if(b===l){m=!0,l=r,s=d;break}b=b.sibling}if(!m){for(b=d.child;b;){if(b===s){m=!0,s=d,l=r;break}if(b===l){m=!0,l=d,s=r;break}b=b.sibling}if(!m)throw Error(c(189))}}if(s.alternate!==l)throw Error(c(190))}if(s.tag!==3)throw Error(c(188));return s.stateNode.current===s?e:t}function v(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=v(e),t!==null)return t;e=e.sibling}return null}var N=Object.assign,j=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),$=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),oe=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function I(e){return e===null||typeof e!="object"?null:(e=Z&&e[Z]||e["@@iterator"],typeof e=="function"?e:null)}var q=Symbol.for("react.client.reference");function O(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===q?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case E:return"Fragment";case B:return"Profiler";case C:return"StrictMode";case G:return"Suspense";case se:return"SuspenseList";case oe:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case w:return"Portal";case $:return e.displayName||"Context";case L:return(e._context.displayName||"Context")+".Consumer";case U:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case W:return t=e.displayName||null,t!==null?t:O(e.type)||"Memo";case K:t=e._payload,e=e._init;try{return O(e(t))}catch{}}return null}var ne=Array.isArray,_=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,T=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,A={pending:!1,data:null,method:null,action:null},P=[],Q=-1;function D(e){return{current:e}}function H(e){0>Q||(e.current=P[Q],P[Q]=null,Q--)}function M(e,t){Q++,P[Q]=e.current,e.current=t}var ce=D(null),de=D(null),be=D(null),te=D(null);function re(e,t){switch(M(be,t),M(de,e),M(ce,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?vp(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=vp(t),e=jp(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}H(ce),M(ce,e)}function xe(){H(ce),H(de),H(be)}function Ne(e){e.memoizedState!==null&&M(te,e);var t=ce.current,s=jp(t,e.type);t!==s&&(M(de,e),M(ce,s))}function ze(e){de.current===e&&(H(ce),H(de)),te.current===e&&(H(te),ci._currentValue=A)}var Ve,Dt;function xt(e){if(Ve===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);Ve=t&&t[1]||"",Dt=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ve+e+Dt}var zt=!1;function ge(e,t){if(!e||zt)return"";zt=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(J){var X=J}Reflect.construct(e,[],le)}else{try{le.call()}catch(J){X=J}e.call(le.prototype)}}else{try{throw Error()}catch(J){X=J}(le=e())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(J){if(J&&X&&typeof J.stack=="string")return[J.stack,X.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),m=d[0],b=d[1];if(m&&b){var k=m.split(`
`),V=b.split(`
`);for(r=l=0;l<k.length&&!k[l].includes("DetermineComponentFrameRoot");)l++;for(;r<V.length&&!V[r].includes("DetermineComponentFrameRoot");)r++;if(l===k.length||r===V.length)for(l=k.length-1,r=V.length-1;1<=l&&0<=r&&k[l]!==V[r];)r--;for(;1<=l&&0<=r;l--,r--)if(k[l]!==V[r]){if(l!==1||r!==1)do if(l--,r--,0>r||k[l]!==V[r]){var ee=`
`+k[l].replace(" at new "," at ");return e.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",e.displayName)),ee}while(1<=l&&0<=r);break}}}finally{zt=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?xt(s):""}function ke(e,t){switch(e.tag){case 26:case 27:case 5:return xt(e.type);case 16:return xt("Lazy");case 13:return e.child!==t&&t!==null?xt("Suspense Fallback"):xt("Suspense");case 19:return xt("SuspenseList");case 0:case 15:return ge(e.type,!1);case 11:return ge(e.type.render,!1);case 1:return ge(e.type,!0);case 31:return xt("Activity");default:return""}}function Ae(e){try{var t="",s=null;do t+=ke(e,s),s=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Me=Object.prototype.hasOwnProperty,Je=n.unstable_scheduleCallback,it=n.unstable_cancelCallback,St=n.unstable_shouldYield,aa=n.unstable_requestPaint,Qe=n.unstable_now,ua=n.unstable_getCurrentPriorityLevel,Ca=n.unstable_ImmediatePriority,ht=n.unstable_UserBlockingPriority,sa=n.unstable_NormalPriority,ue=n.unstable_LowPriority,pe=n.unstable_IdlePriority,we=n.log,$e=n.unstable_setDisableYieldValue,Ge=null,Xe=null;function Ee(e){if(typeof we=="function"&&$e(e),Xe&&typeof Xe.setStrictMode=="function")try{Xe.setStrictMode(Ge,e)}catch{}}var Be=Math.clz32?Math.clz32:qt,yt=Math.log,rt=Math.LN2;function qt(e){return e>>>=0,e===0?32:31-(yt(e)/rt|0)|0}var ka=256,Ua=262144,Qt=4194304;function Yt(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ie(e,t,s){var l=e.pendingLanes;if(l===0)return 0;var r=0,d=e.suspendedLanes,m=e.pingedLanes;e=e.warmLanes;var b=l&134217727;return b!==0?(l=b&~d,l!==0?r=Yt(l):(m&=b,m!==0?r=Yt(m):s||(s=b&~e,s!==0&&(r=Yt(s))))):(b=l&~d,b!==0?r=Yt(b):m!==0?r=Yt(m):s||(s=l&~e,s!==0&&(r=Yt(s)))),r===0?0:t!==0&&t!==r&&(t&d)===0&&(d=r&-r,s=t&-t,d>=s||d===32&&(s&4194048)!==0)?t:r}function Se(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Ke(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function We(){var e=Qt;return Qt<<=1,(Qt&62914560)===0&&(Qt=4194304),e}function et(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function Ct(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ma(e,t,s,l,r,d){var m=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var b=e.entanglements,k=e.expirationTimes,V=e.hiddenUpdates;for(s=m&~s;0<s;){var ee=31-Be(s),le=1<<ee;b[ee]=0,k[ee]=-1;var X=V[ee];if(X!==null)for(V[ee]=null,ee=0;ee<X.length;ee++){var J=X[ee];J!==null&&(J.lane&=-536870913)}s&=~le}l!==0&&Ks(e,l,0),d!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=d&~(m&~t))}function Ks(e,t,s){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-Be(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|s&261930}function je(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var l=31-Be(s),r=1<<l;r&t|e[l]&t&&(e[l]|=t),s&=~r}}function De(e,t){var s=t&-t;return s=(s&42)!==0?1:mt(s),(s&(e.suspendedLanes|t))!==0?0:s}function mt(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Bt(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Nl(){var e=T.p;return e!==0?e:(e=window.event,e===void 0?32:Fp(e.type))}function lu(e,t){var s=T.p;try{return T.p=e,t()}finally{T.p=s}}var xs=Math.random().toString(36).slice(2),It="__reactFiber$"+xs,Xt="__reactProps$"+xs,Tn="__reactContainer$"+xs,uo="__reactEvents$"+xs,nx="__reactListeners$"+xs,lx="__reactHandles$"+xs,iu="__reactResources$"+xs,wl="__reactMarker$"+xs;function mo(e){delete e[It],delete e[Xt],delete e[uo],delete e[nx],delete e[lx]}function En(e){var t=e[It];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Tn]||s[It]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Tp(e);e!==null;){if(s=e[It])return s;e=Tp(e)}return t}e=s,s=e.parentNode}return null}function Mn(e){if(e=e[It]||e[Tn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Sl(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(c(33))}function An(e){var t=e[iu];return t||(t=e[iu]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Rt(e){e[wl]=!0}var ru=new Set,ou={};function Zs(e,t){zn(e,t),zn(e+"Capture",t)}function zn(e,t){for(ou[e]=t,e=0;e<t.length;e++)ru.add(t[e])}var ix=RegExp("^[:A-Z_a-z\À-\Ö\Ø-\ö\ø-\˿\Ͱ-\ͽ\Ϳ-\῿\‌-\‍\⁰-\↏\Ⰰ-\⿯\、-\퟿\豈-\﷏\ﷰ-\�][:A-Z_a-z\À-\Ö\Ø-\ö\ø-\˿\Ͱ-\ͽ\Ϳ-\῿\‌-\‍\⁰-\↏\Ⰰ-\⿯\、-\퟿\豈-\﷏\ﷰ-\�\\-.0-9\·\̀-\ͯ\‿-\⁀]*$"),cu={},du={};function rx(e){return Me.call(du,e)?!0:Me.call(cu,e)?!1:ix.test(e)?du[e]=!0:(cu[e]=!0,!1)}function Mi(e,t,s){if(rx(t))if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+s)}}function Ai(e,t,s){if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+s)}}function Qa(e,t,s,l){if(l===null)e.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(t,s,""+l)}}function fa(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function uu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ox(e,t,s){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var r=l.get,d=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(m){s=""+m,d.call(this,m)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return s},setValue:function(m){s=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function fo(e){if(!e._valueTracker){var t=uu(e)?"checked":"value";e._valueTracker=ox(e,t,""+e[t])}}function mu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),l="";return e&&(l=uu(e)?e.checked?"true":"false":e.value),e=l,e!==s?(t.setValue(e),!0):!1}function zi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var cx=/[\n"\\]/g;function pa(e){return e.replace(cx,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function po(e,t,s,l,r,d,m,b){e.name="",m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.type=m:e.removeAttribute("type"),t!=null?m==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+fa(t)):e.value!==""+fa(t)&&(e.value=""+fa(t)):m!=="submit"&&m!=="reset"||e.removeAttribute("value"),t!=null?ho(e,m,fa(t)):s!=null?ho(e,m,fa(s)):l!=null&&e.removeAttribute("value"),r==null&&d!=null&&(e.defaultChecked=!!d),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.name=""+fa(b):e.removeAttribute("name")}function fu(e,t,s,l,r,d,m,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),t!=null||s!=null){if(!(d!=="submit"&&d!=="reset"||t!=null)){fo(e);return}s=s!=null?""+fa(s):"",t=t!=null?""+fa(t):s,b||t===e.value||(e.value=t),e.defaultValue=t}l=l??r,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=b?e.checked:!!l,e.defaultChecked=!!l,m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.name=m),fo(e)}function ho(e,t,s){t==="number"&&zi(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function On(e,t,s,l){if(e=e.options,t){t={};for(var r=0;r<s.length;r++)t["$"+s[r]]=!0;for(s=0;s<e.length;s++)r=t.hasOwnProperty("$"+e[s].value),e[s].selected!==r&&(e[s].selected=r),r&&l&&(e[s].defaultSelected=!0)}else{for(s=""+fa(s),t=null,r=0;r<e.length;r++){if(e[r].value===s){e[r].selected=!0,l&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function pu(e,t,s){if(t!=null&&(t=""+fa(t),t!==e.value&&(e.value=t),s==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=s!=null?""+fa(s):""}function hu(e,t,s,l){if(t==null){if(l!=null){if(s!=null)throw Error(c(92));if(ne(l)){if(1<l.length)throw Error(c(93));l=l[0]}s=l}s==null&&(s=""),t=s}s=fa(t),e.defaultValue=s,l=e.textContent,l===s&&l!==""&&l!==null&&(e.value=l),fo(e)}function Dn(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var dx=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gu(e,t,s){var l=t.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,s):typeof s!="number"||s===0||dx.has(t)?t==="float"?e.cssFloat=s:e[t]=(""+s).trim():e[t]=s+"px"}function xu(e,t,s){if(t!=null&&typeof t!="object")throw Error(c(62));if(e=e.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var r in t)l=t[r],t.hasOwnProperty(r)&&s[r]!==l&&gu(e,r,l)}else for(var d in t)t.hasOwnProperty(d)&&gu(e,d,t[d])}function go(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ux=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mx=/^[ - ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Oi(e){return mx.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Xa(){}var xo=null;function bo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Rn=null,Un=null;function bu(e){var t=Mn(e);if(t&&(e=t.stateNode)){var s=e[Xt]||null;e:switch(e=t.stateNode,t.type){case"input":if(po(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+pa(""+t)+'"][type="radio"]'),t=0;t<s.length;t++){var l=s[t];if(l!==e&&l.form===e.form){var r=l[Xt]||null;if(!r)throw Error(c(90));po(l,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<s.length;t++)l=s[t],l.form===e.form&&mu(l)}break e;case"textarea":pu(e,s.value,s.defaultValue);break e;case"select":t=s.value,t!=null&&On(e,!!s.multiple,t,!1)}}}var yo=!1;function yu(e,t,s){if(yo)return e(t,s);yo=!0;try{var l=e(t);return l}finally{if(yo=!1,(Rn!==null||Un!==null)&&(vr(),Rn&&(t=Rn,e=Un,Un=Rn=null,bu(t),e)))for(t=0;t<e.length;t++)bu(e[t])}}function Cl(e,t){var s=e.stateNode;if(s===null)return null;var l=s[Xt]||null;if(l===null)return null;s=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(c(231,t,typeof s));return s}var Ka=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vo=!1;if(Ka)try{var kl={};Object.defineProperty(kl,"passive",{get:function(){vo=!0}}),window.addEventListener("test",kl,kl),window.removeEventListener("test",kl,kl)}catch{vo=!1}var bs=null,jo=null,Di=null;function vu(){if(Di)return Di;var e,t=jo,s=t.length,l,r="value"in bs?bs.value:bs.textContent,d=r.length;for(e=0;e<s&&t[e]===r[e];e++);var m=s-e;for(l=1;l<=m&&t[s-l]===r[d-l];l++);return Di=r.slice(e,1<l?1-l:void 0)}function Ri(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ui(){return!0}function ju(){return!1}function Kt(e){function t(s,l,r,d,m){this._reactName=s,this._targetInst=r,this.type=l,this.nativeEvent=d,this.target=m,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(s=e[b],this[b]=s?s(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ui:ju,this.isPropagationStopped=ju,this}return N(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Ui)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Ui)},persist:function(){},isPersistent:Ui}),t}var Ps={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Li=Kt(Ps),Tl=N({},Ps,{view:0,detail:0}),fx=Kt(Tl),_o,No,El,qi=N({},Tl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:So,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==El&&(El&&e.type==="mousemove"?(_o=e.screenX-El.screenX,No=e.screenY-El.screenY):No=_o=0,El=e),_o)},movementY:function(e){return"movementY"in e?e.movementY:No}}),_u=Kt(qi),px=N({},qi,{dataTransfer:0}),hx=Kt(px),gx=N({},Tl,{relatedTarget:0}),wo=Kt(gx),xx=N({},Ps,{animationName:0,elapsedTime:0,pseudoElement:0}),bx=Kt(xx),yx=N({},Ps,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vx=Kt(yx),jx=N({},Ps,{data:0}),Nu=Kt(jx),_x={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=wx[e])?!!t[e]:!1}function So(){return Sx}var Cx=N({},Tl,{key:function(e){if(e.key){var t=_x[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ri(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Nx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:So,charCode:function(e){return e.type==="keypress"?Ri(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ri(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),kx=Kt(Cx),Tx=N({},qi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wu=Kt(Tx),Ex=N({},Tl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:So}),Mx=Kt(Ex),Ax=N({},Ps,{propertyName:0,elapsedTime:0,pseudoElement:0}),zx=Kt(Ax),Ox=N({},qi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dx=Kt(Ox),Rx=N({},Ps,{newState:0,oldState:0}),Ux=Kt(Rx),Lx=[9,13,27,32],Co=Ka&&"CompositionEvent"in window,Ml=null;Ka&&"documentMode"in document&&(Ml=document.documentMode);var qx=Ka&&"TextEvent"in window&&!Ml,Su=Ka&&(!Co||Ml&&8<Ml&&11>=Ml),Cu=" ",ku=!1;function Tu(e,t){switch(e){case"keyup":return Lx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Eu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ln=!1;function Bx(e,t){switch(e){case"compositionend":return Eu(t);case"keypress":return t.which!==32?null:(ku=!0,Cu);case"textInput":return e=t.data,e===Cu&&ku?null:e;default:return null}}function Ix(e,t){if(Ln)return e==="compositionend"||!Co&&Tu(e,t)?(e=vu(),Di=jo=bs=null,Ln=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Su&&t.locale!=="ko"?null:t.data;default:return null}}var Hx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Hx[e.type]:t==="textarea"}function Au(e,t,s,l){Rn?Un?Un.push(l):Un=[l]:Rn=l,t=kr(t,"onChange"),0<t.length&&(s=new Li("onChange","change",null,s,l),e.push({event:s,listeners:t}))}var Al=null,zl=null;function $x(e){pp(e,0)}function Bi(e){var t=Sl(e);if(mu(t))return e}function zu(e,t){if(e==="change")return t}var Ou=!1;if(Ka){var ko;if(Ka){var To="oninput"in document;if(!To){var Du=document.createElement("div");Du.setAttribute("oninput","return;"),To=typeof Du.oninput=="function"}ko=To}else ko=!1;Ou=ko&&(!document.documentMode||9<document.documentMode)}function Ru(){Al&&(Al.detachEvent("onpropertychange",Uu),zl=Al=null)}function Uu(e){if(e.propertyName==="value"&&Bi(zl)){var t=[];Au(t,zl,e,bo(e)),yu($x,t)}}function Gx(e,t,s){e==="focusin"?(Ru(),Al=t,zl=s,Al.attachEvent("onpropertychange",Uu)):e==="focusout"&&Ru()}function Fx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Bi(zl)}function Yx(e,t){if(e==="click")return Bi(t)}function Vx(e,t){if(e==="input"||e==="change")return Bi(t)}function Qx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var na=typeof Object.is=="function"?Object.is:Qx;function Ol(e,t){if(na(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),l=Object.keys(t);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var r=s[l];if(!Me.call(t,r)||!na(e[r],t[r]))return!1}return!0}function Lu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function qu(e,t){var s=Lu(e);e=0;for(var l;s;){if(s.nodeType===3){if(l=e+s.textContent.length,e<=t&&l>=t)return{node:s,offset:t-e};e=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Lu(s)}}function Bu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Bu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Iu(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=zi(e.document);t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=zi(e.document)}return t}function Eo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Xx=Ka&&"documentMode"in document&&11>=document.documentMode,qn=null,Mo=null,Dl=null,Ao=!1;function Hu(e,t,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Ao||qn==null||qn!==zi(l)||(l=qn,"selectionStart"in l&&Eo(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Dl&&Ol(Dl,l)||(Dl=l,l=kr(Mo,"onSelect"),0<l.length&&(t=new Li("onSelect","select",null,t,s),e.push({event:t,listeners:l}),t.target=qn)))}function Js(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Bn={animationend:Js("Animation","AnimationEnd"),animationiteration:Js("Animation","AnimationIteration"),animationstart:Js("Animation","AnimationStart"),transitionrun:Js("Transition","TransitionRun"),transitionstart:Js("Transition","TransitionStart"),transitioncancel:Js("Transition","TransitionCancel"),transitionend:Js("Transition","TransitionEnd")},zo={},$u={};Ka&&($u=document.createElement("div").style,"AnimationEvent"in window||(delete Bn.animationend.animation,delete Bn.animationiteration.animation,delete Bn.animationstart.animation),"TransitionEvent"in window||delete Bn.transitionend.transition);function Ws(e){if(zo[e])return zo[e];if(!Bn[e])return e;var t=Bn[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in $u)return zo[e]=t[s];return e}var Gu=Ws("animationend"),Fu=Ws("animationiteration"),Yu=Ws("animationstart"),Kx=Ws("transitionrun"),Zx=Ws("transitionstart"),Px=Ws("transitioncancel"),Vu=Ws("transitionend"),Qu=new Map,Oo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Oo.push("scrollEnd");function Ta(e,t){Qu.set(e,t),Zs(t,[e])}var Ii=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},ha=[],In=0,Do=0;function Hi(){for(var e=In,t=Do=In=0;t<e;){var s=ha[t];ha[t++]=null;var l=ha[t];ha[t++]=null;var r=ha[t];ha[t++]=null;var d=ha[t];if(ha[t++]=null,l!==null&&r!==null){var m=l.pending;m===null?r.next=r:(r.next=m.next,m.next=r),l.pending=r}d!==0&&Xu(s,r,d)}}function $i(e,t,s,l){ha[In++]=e,ha[In++]=t,ha[In++]=s,ha[In++]=l,Do|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Ro(e,t,s,l){return $i(e,t,s,l),Gi(e)}function en(e,t){return $i(e,null,null,t),Gi(e)}function Xu(e,t,s){e.lanes|=s;var l=e.alternate;l!==null&&(l.lanes|=s);for(var r=!1,d=e.return;d!==null;)d.childLanes|=s,l=d.alternate,l!==null&&(l.childLanes|=s),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(r=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,r&&t!==null&&(r=31-Be(s),e=d.hiddenUpdates,l=e[r],l===null?e[r]=[t]:l.push(t),t.lane=s|536870912),d):null}function Gi(e){if(50<ai)throw ai=0,Fc=null,Error(c(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Hn={};function Jx(e,t,s,l){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function la(e,t,s,l){return new Jx(e,t,s,l)}function Uo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Za(e,t){var s=e.alternate;return s===null?(s=la(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function Ku(e,t){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,t=s.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Fi(e,t,s,l,r,d){var m=0;if(l=e,typeof e=="function")Uo(e)&&(m=1);else if(typeof e=="string")m=sb(e,s,ce.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case oe:return e=la(31,s,t,r),e.elementType=oe,e.lanes=d,e;case E:return tn(s.children,r,d,t);case C:m=8,r|=24;break;case B:return e=la(12,s,t,r|2),e.elementType=B,e.lanes=d,e;case G:return e=la(13,s,t,r),e.elementType=G,e.lanes=d,e;case se:return e=la(19,s,t,r),e.elementType=se,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case $:m=10;break e;case L:m=9;break e;case U:m=11;break e;case W:m=14;break e;case K:m=16,l=null;break e}m=29,s=Error(c(130,e===null?"null":typeof e,"")),l=null}return t=la(m,s,t,r),t.elementType=e,t.type=l,t.lanes=d,t}function tn(e,t,s,l){return e=la(7,e,l,t),e.lanes=s,e}function Lo(e,t,s){return e=la(6,e,null,t),e.lanes=s,e}function Zu(e){var t=la(18,null,null,0);return t.stateNode=e,t}function qo(e,t,s){return t=la(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Pu=new WeakMap;function ga(e,t){if(typeof e=="object"&&e!==null){var s=Pu.get(e);return s!==void 0?s:(t={value:e,source:t,stack:Ae(t)},Pu.set(e,t),t)}return{value:e,source:t,stack:Ae(t)}}var $n=[],Gn=0,Yi=null,Rl=0,xa=[],ba=0,ys=null,La=1,qa="";function Pa(e,t){$n[Gn++]=Rl,$n[Gn++]=Yi,Yi=e,Rl=t}function Ju(e,t,s){xa[ba++]=La,xa[ba++]=qa,xa[ba++]=ys,ys=e;var l=La;e=qa;var r=32-Be(l)-1;l&=~(1<<r),s+=1;var d=32-Be(t)+r;if(30<d){var m=r-r%5;d=(l&(1<<m)-1).toString(32),l>>=m,r-=m,La=1<<32-Be(t)+r|s<<r|l,qa=d+e}else La=1<<d|s<<r|l,qa=e}function Bo(e){e.return!==null&&(Pa(e,1),Ju(e,1,0))}function Io(e){for(;e===Yi;)Yi=$n[--Gn],$n[Gn]=null,Rl=$n[--Gn],$n[Gn]=null;for(;e===ys;)ys=xa[--ba],xa[ba]=null,qa=xa[--ba],xa[ba]=null,La=xa[--ba],xa[ba]=null}function Wu(e,t){xa[ba++]=La,xa[ba++]=qa,xa[ba++]=ys,La=t.id,qa=t.overflow,ys=e}var Ht=null,ft=null,Ze=!1,vs=null,ya=!1,Ho=Error(c(519));function js(e){var t=Error(c(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ul(ga(t,e)),Ho}function em(e){var t=e.stateNode,s=e.type,l=e.memoizedProps;switch(t[It]=e,t[Xt]=l,s){case"dialog":He("cancel",t),He("close",t);break;case"iframe":case"object":case"embed":He("load",t);break;case"video":case"audio":for(s=0;s<ni.length;s++)He(ni[s],t);break;case"source":He("error",t);break;case"img":case"image":case"link":He("error",t),He("load",t);break;case"details":He("toggle",t);break;case"input":He("invalid",t),fu(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":He("invalid",t);break;case"textarea":He("invalid",t),hu(t,l.value,l.defaultValue,l.children)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||t.textContent===""+s||l.suppressHydrationWarning===!0||bp(t.textContent,s)?(l.popover!=null&&(He("beforetoggle",t),He("toggle",t)),l.onScroll!=null&&He("scroll",t),l.onScrollEnd!=null&&He("scrollend",t),l.onClick!=null&&(t.onclick=Xa),t=!0):t=!1,t||js(e,!0)}function tm(e){for(Ht=e.return;Ht;)switch(Ht.tag){case 5:case 31:case 13:ya=!1;return;case 27:case 3:ya=!0;return;default:Ht=Ht.return}}function Fn(e){if(e!==Ht)return!1;if(!Ze)return tm(e),Ze=!0,!1;var t=e.tag,s;if((s=t!==3&&t!==27)&&((s=t===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||ld(e.type,e.memoizedProps)),s=!s),s&&ft&&js(e),tm(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));ft=kp(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));ft=kp(e)}else t===27?(t=ft,Rs(e.type)?(e=dd,dd=null,ft=e):ft=t):ft=Ht?ja(e.stateNode.nextSibling):null;return!0}function an(){ft=Ht=null,Ze=!1}function $o(){var e=vs;return e!==null&&(Wt===null?Wt=e:Wt.push.apply(Wt,e),vs=null),e}function Ul(e){vs===null?vs=[e]:vs.push(e)}var Go=D(null),sn=null,Ja=null;function _s(e,t,s){M(Go,t._currentValue),t._currentValue=s}function Wa(e){e._currentValue=Go.current,H(Go)}function Fo(e,t,s){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===s)break;e=e.return}}function Yo(e,t,s,l){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var d=r.dependencies;if(d!==null){var m=r.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=r;for(var k=0;k<t.length;k++)if(b.context===t[k]){d.lanes|=s,b=d.alternate,b!==null&&(b.lanes|=s),Fo(d.return,s,e),l||(m=null);break e}d=b.next}}else if(r.tag===18){if(m=r.return,m===null)throw Error(c(341));m.lanes|=s,d=m.alternate,d!==null&&(d.lanes|=s),Fo(m,s,e),m=null}else m=r.child;if(m!==null)m.return=r;else for(m=r;m!==null;){if(m===e){m=null;break}if(r=m.sibling,r!==null){r.return=m.return,m=r;break}m=m.return}r=m}}function Yn(e,t,s,l){e=null;for(var r=t,d=!1;r!==null;){if(!d){if((r.flags&524288)!==0)d=!0;else if((r.flags&262144)!==0)break}if(r.tag===10){var m=r.alternate;if(m===null)throw Error(c(387));if(m=m.memoizedProps,m!==null){var b=r.type;na(r.pendingProps.value,m.value)||(e!==null?e.push(b):e=[b])}}else if(r===te.current){if(m=r.alternate,m===null)throw Error(c(387));m.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(ci):e=[ci])}r=r.return}e!==null&&Yo(t,e,s,l),t.flags|=262144}function Vi(e){for(e=e.firstContext;e!==null;){if(!na(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function nn(e){sn=e,Ja=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function $t(e){return am(sn,e)}function Qi(e,t){return sn===null&&nn(e),am(e,t)}function am(e,t){var s=t._currentValue;if(t={context:t,memoizedValue:s,next:null},Ja===null){if(e===null)throw Error(c(308));Ja=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ja=Ja.next=t;return s}var Wx=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(s,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(s){return s()})}},e0=n.unstable_scheduleCallback,t0=n.unstable_NormalPriority,kt={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vo(){return{controller:new Wx,data:new Map,refCount:0}}function Ll(e){e.refCount--,e.refCount===0&&e0(t0,function(){e.controller.abort()})}var ql=null,Qo=0,Vn=0,Qn=null;function a0(e,t){if(ql===null){var s=ql=[];Qo=0,Vn=Zc(),Qn={status:"pending",value:void 0,then:function(l){s.push(l)}}}return Qo++,t.then(sm,sm),t}function sm(){if(--Qo===0&&ql!==null){Qn!==null&&(Qn.status="fulfilled");var e=ql;ql=null,Vn=0,Qn=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function s0(e,t){var s=[],l={status:"pending",value:null,reason:null,then:function(r){s.push(r)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var r=0;r<s.length;r++)(0,s[r])(t)},function(r){for(l.status="rejected",l.reason=r,r=0;r<s.length;r++)(0,s[r])(void 0)}),l}var nm=_.S;_.S=function(e,t){$f=Qe(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&a0(e,t),nm!==null&&nm(e,t)};var ln=D(null);function Xo(){var e=ln.current;return e!==null?e:ut.pooledCache}function Xi(e,t){t===null?M(ln,ln.current):M(ln,t.pool)}function lm(){var e=Xo();return e===null?null:{parent:kt._currentValue,pool:e}}var Xn=Error(c(460)),Ko=Error(c(474)),Ki=Error(c(542)),Zi={then:function(){}};function im(e){return e=e.status,e==="fulfilled"||e==="rejected"}function rm(e,t,s){switch(s=e[s],s===void 0?e.push(t):s!==t&&(t.then(Xa,Xa),t=s),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,cm(e),e;default:if(typeof t.status=="string")t.then(Xa,Xa);else{if(e=ut,e!==null&&100<e.shellSuspendCounter)throw Error(c(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=l}},function(l){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,cm(e),e}throw on=t,Xn}}function rn(e){try{var t=e._init;return t(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(on=s,Xn):s}}var on=null;function om(){if(on===null)throw Error(c(459));var e=on;return on=null,e}function cm(e){if(e===Xn||e===Ki)throw Error(c(483))}var Kn=null,Bl=0;function Pi(e){var t=Bl;return Bl+=1,Kn===null&&(Kn=[]),rm(Kn,e,t)}function Il(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Ji(e,t){throw t.$$typeof===j?Error(c(525)):(e=Object.prototype.toString.call(t),Error(c(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function dm(e){function t(R,z){if(e){var F=R.deletions;F===null?(R.deletions=[z],R.flags|=16):F.push(z)}}function s(R,z){if(!e)return null;for(;z!==null;)t(R,z),z=z.sibling;return null}function l(R){for(var z=new Map;R!==null;)R.key!==null?z.set(R.key,R):z.set(R.index,R),R=R.sibling;return z}function r(R,z){return R=Za(R,z),R.index=0,R.sibling=null,R}function d(R,z,F){return R.index=F,e?(F=R.alternate,F!==null?(F=F.index,F<z?(R.flags|=67108866,z):F):(R.flags|=67108866,z)):(R.flags|=1048576,z)}function m(R){return e&&R.alternate===null&&(R.flags|=67108866),R}function b(R,z,F,ae){return z===null||z.tag!==6?(z=Lo(F,R.mode,ae),z.return=R,z):(z=r(z,F),z.return=R,z)}function k(R,z,F,ae){var Ce=F.type;return Ce===E?ee(R,z,F.props.children,ae,F.key):z!==null&&(z.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===K&&rn(Ce)===z.type)?(z=r(z,F.props),Il(z,F),z.return=R,z):(z=Fi(F.type,F.key,F.props,null,R.mode,ae),Il(z,F),z.return=R,z)}function V(R,z,F,ae){return z===null||z.tag!==4||z.stateNode.containerInfo!==F.containerInfo||z.stateNode.implementation!==F.implementation?(z=qo(F,R.mode,ae),z.return=R,z):(z=r(z,F.children||[]),z.return=R,z)}function ee(R,z,F,ae,Ce){return z===null||z.tag!==7?(z=tn(F,R.mode,ae,Ce),z.return=R,z):(z=r(z,F),z.return=R,z)}function le(R,z,F){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=Lo(""+z,R.mode,F),z.return=R,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case S:return F=Fi(z.type,z.key,z.props,null,R.mode,F),Il(F,z),F.return=R,F;case w:return z=qo(z,R.mode,F),z.return=R,z;case K:return z=rn(z),le(R,z,F)}if(ne(z)||I(z))return z=tn(z,R.mode,F,null),z.return=R,z;if(typeof z.then=="function")return le(R,Pi(z),F);if(z.$$typeof===$)return le(R,Qi(R,z),F);Ji(R,z)}return null}function X(R,z,F,ae){var Ce=z!==null?z.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return Ce!==null?null:b(R,z,""+F,ae);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case S:return F.key===Ce?k(R,z,F,ae):null;case w:return F.key===Ce?V(R,z,F,ae):null;case K:return F=rn(F),X(R,z,F,ae)}if(ne(F)||I(F))return Ce!==null?null:ee(R,z,F,ae,null);if(typeof F.then=="function")return X(R,z,Pi(F),ae);if(F.$$typeof===$)return X(R,z,Qi(R,F),ae);Ji(R,F)}return null}function J(R,z,F,ae,Ce){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return R=R.get(F)||null,b(z,R,""+ae,Ce);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case S:return R=R.get(ae.key===null?F:ae.key)||null,k(z,R,ae,Ce);case w:return R=R.get(ae.key===null?F:ae.key)||null,V(z,R,ae,Ce);case K:return ae=rn(ae),J(R,z,F,ae,Ce)}if(ne(ae)||I(ae))return R=R.get(F)||null,ee(z,R,ae,Ce,null);if(typeof ae.then=="function")return J(R,z,F,Pi(ae),Ce);if(ae.$$typeof===$)return J(R,z,F,Qi(z,ae),Ce);Ji(z,ae)}return null}function ve(R,z,F,ae){for(var Ce=null,tt=null,_e=z,Re=z=0,Ye=null;_e!==null&&Re<F.length;Re++){_e.index>Re?(Ye=_e,_e=null):Ye=_e.sibling;var at=X(R,_e,F[Re],ae);if(at===null){_e===null&&(_e=Ye);break}e&&_e&&at.alternate===null&&t(R,_e),z=d(at,z,Re),tt===null?Ce=at:tt.sibling=at,tt=at,_e=Ye}if(Re===F.length)return s(R,_e),Ze&&Pa(R,Re),Ce;if(_e===null){for(;Re<F.length;Re++)_e=le(R,F[Re],ae),_e!==null&&(z=d(_e,z,Re),tt===null?Ce=_e:tt.sibling=_e,tt=_e);return Ze&&Pa(R,Re),Ce}for(_e=l(_e);Re<F.length;Re++)Ye=J(_e,R,Re,F[Re],ae),Ye!==null&&(e&&Ye.alternate!==null&&_e.delete(Ye.key===null?Re:Ye.key),z=d(Ye,z,Re),tt===null?Ce=Ye:tt.sibling=Ye,tt=Ye);return e&&_e.forEach(function(Is){return t(R,Is)}),Ze&&Pa(R,Re),Ce}function Te(R,z,F,ae){if(F==null)throw Error(c(151));for(var Ce=null,tt=null,_e=z,Re=z=0,Ye=null,at=F.next();_e!==null&&!at.done;Re++,at=F.next()){_e.index>Re?(Ye=_e,_e=null):Ye=_e.sibling;var Is=X(R,_e,at.value,ae);if(Is===null){_e===null&&(_e=Ye);break}e&&_e&&Is.alternate===null&&t(R,_e),z=d(Is,z,Re),tt===null?Ce=Is:tt.sibling=Is,tt=Is,_e=Ye}if(at.done)return s(R,_e),Ze&&Pa(R,Re),Ce;if(_e===null){for(;!at.done;Re++,at=F.next())at=le(R,at.value,ae),at!==null&&(z=d(at,z,Re),tt===null?Ce=at:tt.sibling=at,tt=at);return Ze&&Pa(R,Re),Ce}for(_e=l(_e);!at.done;Re++,at=F.next())at=J(_e,R,Re,at.value,ae),at!==null&&(e&&at.alternate!==null&&_e.delete(at.key===null?Re:at.key),z=d(at,z,Re),tt===null?Ce=at:tt.sibling=at,tt=at);return e&&_e.forEach(function(pb){return t(R,pb)}),Ze&&Pa(R,Re),Ce}function dt(R,z,F,ae){if(typeof F=="object"&&F!==null&&F.type===E&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case S:e:{for(var Ce=F.key;z!==null;){if(z.key===Ce){if(Ce=F.type,Ce===E){if(z.tag===7){s(R,z.sibling),ae=r(z,F.props.children),ae.return=R,R=ae;break e}}else if(z.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===K&&rn(Ce)===z.type){s(R,z.sibling),ae=r(z,F.props),Il(ae,F),ae.return=R,R=ae;break e}s(R,z);break}else t(R,z);z=z.sibling}F.type===E?(ae=tn(F.props.children,R.mode,ae,F.key),ae.return=R,R=ae):(ae=Fi(F.type,F.key,F.props,null,R.mode,ae),Il(ae,F),ae.return=R,R=ae)}return m(R);case w:e:{for(Ce=F.key;z!==null;){if(z.key===Ce)if(z.tag===4&&z.stateNode.containerInfo===F.containerInfo&&z.stateNode.implementation===F.implementation){s(R,z.sibling),ae=r(z,F.children||[]),ae.return=R,R=ae;break e}else{s(R,z);break}else t(R,z);z=z.sibling}ae=qo(F,R.mode,ae),ae.return=R,R=ae}return m(R);case K:return F=rn(F),dt(R,z,F,ae)}if(ne(F))return ve(R,z,F,ae);if(I(F)){if(Ce=I(F),typeof Ce!="function")throw Error(c(150));return F=Ce.call(F),Te(R,z,F,ae)}if(typeof F.then=="function")return dt(R,z,Pi(F),ae);if(F.$$typeof===$)return dt(R,z,Qi(R,F),ae);Ji(R,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,z!==null&&z.tag===6?(s(R,z.sibling),ae=r(z,F),ae.return=R,R=ae):(s(R,z),ae=Lo(F,R.mode,ae),ae.return=R,R=ae),m(R)):s(R,z)}return function(R,z,F,ae){try{Bl=0;var Ce=dt(R,z,F,ae);return Kn=null,Ce}catch(_e){if(_e===Xn||_e===Ki)throw _e;var tt=la(29,_e,null,R.mode);return tt.lanes=ae,tt.return=R,tt}finally{}}}var cn=dm(!0),um=dm(!1),Ns=!1;function Zo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Po(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ws(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ss(e,t,s){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(st&2)!==0){var r=l.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),l.pending=t,t=Gi(e),Xu(e,null,s),t}return $i(e,l,t,s),Gi(e)}function Hl(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,s|=l,t.lanes=s,je(e,s)}}function Jo(e,t){var s=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var r=null,d=null;if(s=s.firstBaseUpdate,s!==null){do{var m={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};d===null?r=d=m:d=d.next=m,s=s.next}while(s!==null);d===null?r=d=t:d=d.next=t}else r=d=t;s={baseState:l.baseState,firstBaseUpdate:r,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}var Wo=!1;function $l(){if(Wo){var e=Qn;if(e!==null)throw e}}function Gl(e,t,s,l){Wo=!1;var r=e.updateQueue;Ns=!1;var d=r.firstBaseUpdate,m=r.lastBaseUpdate,b=r.shared.pending;if(b!==null){r.shared.pending=null;var k=b,V=k.next;k.next=null,m===null?d=V:m.next=V,m=k;var ee=e.alternate;ee!==null&&(ee=ee.updateQueue,b=ee.lastBaseUpdate,b!==m&&(b===null?ee.firstBaseUpdate=V:b.next=V,ee.lastBaseUpdate=k))}if(d!==null){var le=r.baseState;m=0,ee=V=k=null,b=d;do{var X=b.lane&-536870913,J=X!==b.lane;if(J?(Fe&X)===X:(l&X)===X){X!==0&&X===Vn&&(Wo=!0),ee!==null&&(ee=ee.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var ve=e,Te=b;X=t;var dt=s;switch(Te.tag){case 1:if(ve=Te.payload,typeof ve=="function"){le=ve.call(dt,le,X);break e}le=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=Te.payload,X=typeof ve=="function"?ve.call(dt,le,X):ve,X==null)break e;le=N({},le,X);break e;case 2:Ns=!0}}X=b.callback,X!==null&&(e.flags|=64,J&&(e.flags|=8192),J=r.callbacks,J===null?r.callbacks=[X]:J.push(X))}else J={lane:X,tag:b.tag,payload:b.payload,callback:b.callback,next:null},ee===null?(V=ee=J,k=le):ee=ee.next=J,m|=X;if(b=b.next,b===null){if(b=r.shared.pending,b===null)break;J=b,b=J.next,J.next=null,r.lastBaseUpdate=J,r.shared.pending=null}}while(!0);ee===null&&(k=le),r.baseState=k,r.firstBaseUpdate=V,r.lastBaseUpdate=ee,d===null&&(r.shared.lanes=0),Ms|=m,e.lanes=m,e.memoizedState=le}}function mm(e,t){if(typeof e!="function")throw Error(c(191,e));e.call(t)}function fm(e,t){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)mm(s[e],t)}var Zn=D(null),Wi=D(0);function pm(e,t){e=os,M(Wi,e),M(Zn,t),os=e|t.baseLanes}function ec(){M(Wi,os),M(Zn,Zn.current)}function tc(){os=Wi.current,H(Zn),H(Wi)}var ia=D(null),va=null;function Cs(e){var t=e.alternate;M(_t,_t.current&1),M(ia,e),va===null&&(t===null||Zn.current!==null||t.memoizedState!==null)&&(va=e)}function ac(e){M(_t,_t.current),M(ia,e),va===null&&(va=e)}function hm(e){e.tag===22?(M(_t,_t.current),M(ia,e),va===null&&(va=e)):ks()}function ks(){M(_t,_t.current),M(ia,ia.current)}function ra(e){H(ia),va===e&&(va=null),H(_t)}var _t=D(0);function er(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||od(s)||cd(s)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var es=0,Oe=null,ot=null,Tt=null,tr=!1,Pn=!1,dn=!1,ar=0,Fl=0,Jn=null,n0=0;function vt(){throw Error(c(321))}function sc(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!na(e[s],t[s]))return!1;return!0}function nc(e,t,s,l,r,d){return es=d,Oe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_.H=e===null||e.memoizedState===null?Jm:yc,dn=!1,d=s(l,r),dn=!1,Pn&&(d=xm(t,s,l,r)),gm(e),d}function gm(e){_.H=Ql;var t=ot!==null&&ot.next!==null;if(es=0,Tt=ot=Oe=null,tr=!1,Fl=0,Jn=null,t)throw Error(c(300));e===null||Et||(e=e.dependencies,e!==null&&Vi(e)&&(Et=!0))}function xm(e,t,s,l){Oe=e;var r=0;do{if(Pn&&(Jn=null),Fl=0,Pn=!1,25<=r)throw Error(c(301));if(r+=1,Tt=ot=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}_.H=Wm,d=t(s,l)}while(Pn);return d}function l0(){var e=_.H,t=e.useState()[0];return t=typeof t.then=="function"?Yl(t):t,e=e.useState()[0],(ot!==null?ot.memoizedState:null)!==e&&(Oe.flags|=1024),t}function lc(){var e=ar!==0;return ar=0,e}function ic(e,t,s){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s}function rc(e){if(tr){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}tr=!1}es=0,Tt=ot=Oe=null,Pn=!1,Fl=ar=0,Jn=null}function Vt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?Oe.memoizedState=Tt=e:Tt=Tt.next=e,Tt}function Nt(){if(ot===null){var e=Oe.alternate;e=e!==null?e.memoizedState:null}else e=ot.next;var t=Tt===null?Oe.memoizedState:Tt.next;if(t!==null)Tt=t,ot=e;else{if(e===null)throw Oe.alternate===null?Error(c(467)):Error(c(310));ot=e,e={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},Tt===null?Oe.memoizedState=Tt=e:Tt=Tt.next=e}return Tt}function sr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yl(e){var t=Fl;return Fl+=1,Jn===null&&(Jn=[]),e=rm(Jn,e,t),t=Oe,(Tt===null?t.memoizedState:Tt.next)===null&&(t=t.alternate,_.H=t===null||t.memoizedState===null?Jm:yc),e}function nr(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Yl(e);if(e.$$typeof===$)return $t(e)}throw Error(c(438,String(e)))}function oc(e){var t=null,s=Oe.updateQueue;if(s!==null&&(t=s.memoCache),t==null){var l=Oe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),s===null&&(s=sr(),Oe.updateQueue=s),s.memoCache=t,s=t.data[t.index],s===void 0)for(s=t.data[t.index]=Array(e),l=0;l<e;l++)s[l]=Y;return t.index++,s}function ts(e,t){return typeof t=="function"?t(e):t}function lr(e){var t=Nt();return cc(t,ot,e)}function cc(e,t,s){var l=e.queue;if(l===null)throw Error(c(311));l.lastRenderedReducer=s;var r=e.baseQueue,d=l.pending;if(d!==null){if(r!==null){var m=r.next;r.next=d.next,d.next=m}t.baseQueue=r=d,l.pending=null}if(d=e.baseState,r===null)e.memoizedState=d;else{t=r.next;var b=m=null,k=null,V=t,ee=!1;do{var le=V.lane&-536870913;if(le!==V.lane?(Fe&le)===le:(es&le)===le){var X=V.revertLane;if(X===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),le===Vn&&(ee=!0);else if((es&X)===X){V=V.next,X===Vn&&(ee=!0);continue}else le={lane:0,revertLane:V.revertLane,gesture:null,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},k===null?(b=k=le,m=d):k=k.next=le,Oe.lanes|=X,Ms|=X;le=V.action,dn&&s(d,le),d=V.hasEagerState?V.eagerState:s(d,le)}else X={lane:le,revertLane:V.revertLane,gesture:V.gesture,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},k===null?(b=k=X,m=d):k=k.next=X,Oe.lanes|=le,Ms|=le;V=V.next}while(V!==null&&V!==t);if(k===null?m=d:k.next=b,!na(d,e.memoizedState)&&(Et=!0,ee&&(s=Qn,s!==null)))throw s;e.memoizedState=d,e.baseState=m,e.baseQueue=k,l.lastRenderedState=d}return r===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function dc(e){var t=Nt(),s=t.queue;if(s===null)throw Error(c(311));s.lastRenderedReducer=e;var l=s.dispatch,r=s.pending,d=t.memoizedState;if(r!==null){s.pending=null;var m=r=r.next;do d=e(d,m.action),m=m.next;while(m!==r);na(d,t.memoizedState)||(Et=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),s.lastRenderedState=d}return[d,l]}function bm(e,t,s){var l=Oe,r=Nt(),d=Ze;if(d){if(s===void 0)throw Error(c(407));s=s()}else s=t();var m=!na((ot||r).memoizedState,s);if(m&&(r.memoizedState=s,Et=!0),r=r.queue,fc(jm.bind(null,l,r,e),[e]),r.getSnapshot!==t||m||Tt!==null&&Tt.memoizedState.tag&1){if(l.flags|=2048,Wn(9,{destroy:void 0},vm.bind(null,l,r,s,t),null),ut===null)throw Error(c(349));d||(es&127)!==0||ym(l,t,s)}return s}function ym(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Oe.updateQueue,t===null?(t=sr(),Oe.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function vm(e,t,s,l){t.value=s,t.getSnapshot=l,_m(t)&&Nm(e)}function jm(e,t,s){return s(function(){_m(t)&&Nm(e)})}function _m(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!na(e,s)}catch{return!0}}function Nm(e){var t=en(e,2);t!==null&&ea(t,e,2)}function uc(e){var t=Vt();if(typeof e=="function"){var s=e;if(e=s(),dn){Ee(!0);try{s()}finally{Ee(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:e},t}function wm(e,t,s,l){return e.baseState=s,cc(e,ot,typeof l=="function"?l:ts)}function i0(e,t,s,l,r){if(or(e))throw Error(c(485));if(e=t.action,e!==null){var d={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(m){d.listeners.push(m)}};_.T!==null?s(!0):d.isTransition=!1,l(d),s=t.pending,s===null?(d.next=t.pending=d,Sm(t,d)):(d.next=s.next,t.pending=s.next=d)}}function Sm(e,t){var s=t.action,l=t.payload,r=e.state;if(t.isTransition){var d=_.T,m={};_.T=m;try{var b=s(r,l),k=_.S;k!==null&&k(m,b),Cm(e,t,b)}catch(V){mc(e,t,V)}finally{d!==null&&m.types!==null&&(d.types=m.types),_.T=d}}else try{d=s(r,l),Cm(e,t,d)}catch(V){mc(e,t,V)}}function Cm(e,t,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){km(e,t,l)},function(l){return mc(e,t,l)}):km(e,t,s)}function km(e,t,s){t.status="fulfilled",t.value=s,Tm(t),e.state=s,t=e.pending,t!==null&&(s=t.next,s===t?e.pending=null:(s=s.next,t.next=s,Sm(e,s)))}function mc(e,t,s){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=s,Tm(t),t=t.next;while(t!==l)}e.action=null}function Tm(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Em(e,t){return t}function Mm(e,t){if(Ze){var s=ut.formState;if(s!==null){e:{var l=Oe;if(Ze){if(ft){t:{for(var r=ft,d=ya;r.nodeType!==8;){if(!d){r=null;break t}if(r=ja(r.nextSibling),r===null){r=null;break t}}d=r.data,r=d==="F!"||d==="F"?r:null}if(r){ft=ja(r.nextSibling),l=r.data==="F!";break e}}js(l)}l=!1}l&&(t=s[0])}}return s=Vt(),s.memoizedState=s.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Em,lastRenderedState:t},s.queue=l,s=Km.bind(null,Oe,l),l.dispatch=s,l=uc(!1),d=bc.bind(null,Oe,!1,l.queue),l=Vt(),r={state:t,dispatch:null,action:e,pending:null},l.queue=r,s=i0.bind(null,Oe,r,d,s),r.dispatch=s,l.memoizedState=e,[t,s,!1]}function Am(e){var t=Nt();return zm(t,ot,e)}function zm(e,t,s){if(t=cc(e,t,Em)[0],e=lr(ts)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=Yl(t)}catch(m){throw m===Xn?Ki:m}else l=t;t=Nt();var r=t.queue,d=r.dispatch;return s!==t.memoizedState&&(Oe.flags|=2048,Wn(9,{destroy:void 0},r0.bind(null,r,s),null)),[l,d,e]}function r0(e,t){e.action=t}function Om(e){var t=Nt(),s=ot;if(s!==null)return zm(t,s,e);Nt(),t=t.memoizedState,s=Nt();var l=s.queue.dispatch;return s.memoizedState=e,[t,l,!1]}function Wn(e,t,s,l){return e={tag:e,create:s,deps:l,inst:t,next:null},t=Oe.updateQueue,t===null&&(t=sr(),Oe.updateQueue=t),s=t.lastEffect,s===null?t.lastEffect=e.next=e:(l=s.next,s.next=e,e.next=l,t.lastEffect=e),e}function Dm(){return Nt().memoizedState}function ir(e,t,s,l){var r=Vt();Oe.flags|=e,r.memoizedState=Wn(1|t,{destroy:void 0},s,l===void 0?null:l)}function rr(e,t,s,l){var r=Nt();l=l===void 0?null:l;var d=r.memoizedState.inst;ot!==null&&l!==null&&sc(l,ot.memoizedState.deps)?r.memoizedState=Wn(t,d,s,l):(Oe.flags|=e,r.memoizedState=Wn(1|t,d,s,l))}function Rm(e,t){ir(8390656,8,e,t)}function fc(e,t){rr(2048,8,e,t)}function o0(e){Oe.flags|=4;var t=Oe.updateQueue;if(t===null)t=sr(),Oe.updateQueue=t,t.events=[e];else{var s=t.events;s===null?t.events=[e]:s.push(e)}}function Um(e){var t=Nt().memoizedState;return o0({ref:t,nextImpl:e}),function(){if((st&2)!==0)throw Error(c(440));return t.impl.apply(void 0,arguments)}}function Lm(e,t){return rr(4,2,e,t)}function qm(e,t){return rr(4,4,e,t)}function Bm(e,t){if(typeof t=="function"){e=e();var s=t(e);return function(){typeof s=="function"?s():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Im(e,t,s){s=s!=null?s.concat([e]):null,rr(4,4,Bm.bind(null,t,e),s)}function pc(){}function Hm(e,t){var s=Nt();t=t===void 0?null:t;var l=s.memoizedState;return t!==null&&sc(t,l[1])?l[0]:(s.memoizedState=[e,t],e)}function $m(e,t){var s=Nt();t=t===void 0?null:t;var l=s.memoizedState;if(t!==null&&sc(t,l[1]))return l[0];if(l=e(),dn){Ee(!0);try{e()}finally{Ee(!1)}}return s.memoizedState=[l,t],l}function hc(e,t,s){return s===void 0||(es&1073741824)!==0&&(Fe&261930)===0?e.memoizedState=t:(e.memoizedState=s,e=Ff(),Oe.lanes|=e,Ms|=e,s)}function Gm(e,t,s,l){return na(s,t)?s:Zn.current!==null?(e=hc(e,s,l),na(e,t)||(Et=!0),e):(es&42)===0||(es&1073741824)!==0&&(Fe&261930)===0?(Et=!0,e.memoizedState=s):(e=Ff(),Oe.lanes|=e,Ms|=e,t)}function Fm(e,t,s,l,r){var d=T.p;T.p=d!==0&&8>d?d:8;var m=_.T,b={};_.T=b,bc(e,!1,t,s);try{var k=r(),V=_.S;if(V!==null&&V(b,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var ee=s0(k,l);Vl(e,t,ee,da(e))}else Vl(e,t,l,da(e))}catch(le){Vl(e,t,{then:function(){},status:"rejected",reason:le},da())}finally{T.p=d,m!==null&&b.types!==null&&(m.types=b.types),_.T=m}}function c0(){}function gc(e,t,s,l){if(e.tag!==5)throw Error(c(476));var r=Ym(e).queue;Fm(e,r,t,A,s===null?c0:function(){return Vm(e),s(l)})}function Ym(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:A,baseState:A,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:A},next:null};var s={};return t.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:s},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Vm(e){var t=Ym(e);t.next===null&&(t=e.alternate.memoizedState),Vl(e,t.next.queue,{},da())}function xc(){return $t(ci)}function Qm(){return Nt().memoizedState}function Xm(){return Nt().memoizedState}function d0(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var s=da();e=ws(s);var l=Ss(t,e,s);l!==null&&(ea(l,t,s),Hl(l,t,s)),t={cache:Vo()},e.payload=t;return}t=t.return}}function u0(e,t,s){var l=da();s={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},or(e)?Zm(t,s):(s=Ro(e,t,s,l),s!==null&&(ea(s,e,l),Pm(s,t,l)))}function Km(e,t,s){var l=da();Vl(e,t,s,l)}function Vl(e,t,s,l){var r={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(or(e))Zm(t,r);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var m=t.lastRenderedState,b=d(m,s);if(r.hasEagerState=!0,r.eagerState=b,na(b,m))return $i(e,t,r,0),ut===null&&Hi(),!1}catch{}finally{}if(s=Ro(e,t,r,l),s!==null)return ea(s,e,l),Pm(s,t,l),!0}return!1}function bc(e,t,s,l){if(l={lane:2,revertLane:Zc(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},or(e)){if(t)throw Error(c(479))}else t=Ro(e,s,l,2),t!==null&&ea(t,e,2)}function or(e){var t=e.alternate;return e===Oe||t!==null&&t===Oe}function Zm(e,t){Pn=tr=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Pm(e,t,s){if((s&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,s|=l,t.lanes=s,je(e,s)}}var Ql={readContext:$t,use:nr,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useLayoutEffect:vt,useInsertionEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useSyncExternalStore:vt,useId:vt,useHostTransitionStatus:vt,useFormState:vt,useActionState:vt,useOptimistic:vt,useMemoCache:vt,useCacheRefresh:vt};Ql.useEffectEvent=vt;var Jm={readContext:$t,use:nr,useCallback:function(e,t){return Vt().memoizedState=[e,t===void 0?null:t],e},useContext:$t,useEffect:Rm,useImperativeHandle:function(e,t,s){s=s!=null?s.concat([e]):null,ir(4194308,4,Bm.bind(null,t,e),s)},useLayoutEffect:function(e,t){return ir(4194308,4,e,t)},useInsertionEffect:function(e,t){ir(4,2,e,t)},useMemo:function(e,t){var s=Vt();t=t===void 0?null:t;var l=e();if(dn){Ee(!0);try{e()}finally{Ee(!1)}}return s.memoizedState=[l,t],l},useReducer:function(e,t,s){var l=Vt();if(s!==void 0){var r=s(t);if(dn){Ee(!0);try{s(t)}finally{Ee(!1)}}}else r=t;return l.memoizedState=l.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},l.queue=e,e=e.dispatch=u0.bind(null,Oe,e),[l.memoizedState,e]},useRef:function(e){var t=Vt();return e={current:e},t.memoizedState=e},useState:function(e){e=uc(e);var t=e.queue,s=Km.bind(null,Oe,t);return t.dispatch=s,[e.memoizedState,s]},useDebugValue:pc,useDeferredValue:function(e,t){var s=Vt();return hc(s,e,t)},useTransition:function(){var e=uc(!1);return e=Fm.bind(null,Oe,e.queue,!0,!1),Vt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,s){var l=Oe,r=Vt();if(Ze){if(s===void 0)throw Error(c(407));s=s()}else{if(s=t(),ut===null)throw Error(c(349));(Fe&127)!==0||ym(l,t,s)}r.memoizedState=s;var d={value:s,getSnapshot:t};return r.queue=d,Rm(jm.bind(null,l,d,e),[e]),l.flags|=2048,Wn(9,{destroy:void 0},vm.bind(null,l,d,s,t),null),s},useId:function(){var e=Vt(),t=ut.identifierPrefix;if(Ze){var s=qa,l=La;s=(l&~(1<<32-Be(l)-1)).toString(32)+s,t="_"+t+"R_"+s,s=ar++,0<s&&(t+="H"+s.toString(32)),t+="_"}else s=n0++,t="_"+t+"r_"+s.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:xc,useFormState:Mm,useActionState:Mm,useOptimistic:function(e){var t=Vt();t.memoizedState=t.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=s,t=bc.bind(null,Oe,!0,s),s.dispatch=t,[e,t]},useMemoCache:oc,useCacheRefresh:function(){return Vt().memoizedState=d0.bind(null,Oe)},useEffectEvent:function(e){var t=Vt(),s={impl:e};return t.memoizedState=s,function(){if((st&2)!==0)throw Error(c(440));return s.impl.apply(void 0,arguments)}}},yc={readContext:$t,use:nr,useCallback:Hm,useContext:$t,useEffect:fc,useImperativeHandle:Im,useInsertionEffect:Lm,useLayoutEffect:qm,useMemo:$m,useReducer:lr,useRef:Dm,useState:function(){return lr(ts)},useDebugValue:pc,useDeferredValue:function(e,t){var s=Nt();return Gm(s,ot.memoizedState,e,t)},useTransition:function(){var e=lr(ts)[0],t=Nt().memoizedState;return[typeof e=="boolean"?e:Yl(e),t]},useSyncExternalStore:bm,useId:Qm,useHostTransitionStatus:xc,useFormState:Am,useActionState:Am,useOptimistic:function(e,t){var s=Nt();return wm(s,ot,e,t)},useMemoCache:oc,useCacheRefresh:Xm};yc.useEffectEvent=Um;var Wm={readContext:$t,use:nr,useCallback:Hm,useContext:$t,useEffect:fc,useImperativeHandle:Im,useInsertionEffect:Lm,useLayoutEffect:qm,useMemo:$m,useReducer:dc,useRef:Dm,useState:function(){return dc(ts)},useDebugValue:pc,useDeferredValue:function(e,t){var s=Nt();return ot===null?hc(s,e,t):Gm(s,ot.memoizedState,e,t)},useTransition:function(){var e=dc(ts)[0],t=Nt().memoizedState;return[typeof e=="boolean"?e:Yl(e),t]},useSyncExternalStore:bm,useId:Qm,useHostTransitionStatus:xc,useFormState:Om,useActionState:Om,useOptimistic:function(e,t){var s=Nt();return ot!==null?wm(s,ot,e,t):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:oc,useCacheRefresh:Xm};Wm.useEffectEvent=Um;function vc(e,t,s,l){t=e.memoizedState,s=s(l,t),s=s==null?t:N({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var jc={enqueueSetState:function(e,t,s){e=e._reactInternals;var l=da(),r=ws(l);r.payload=t,s!=null&&(r.callback=s),t=Ss(e,r,l),t!==null&&(ea(t,e,l),Hl(t,e,l))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var l=da(),r=ws(l);r.tag=1,r.payload=t,s!=null&&(r.callback=s),t=Ss(e,r,l),t!==null&&(ea(t,e,l),Hl(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=da(),l=ws(s);l.tag=2,t!=null&&(l.callback=t),t=Ss(e,l,s),t!==null&&(ea(t,e,s),Hl(t,e,s))}};function ef(e,t,s,l,r,d,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,m):t.prototype&&t.prototype.isPureReactComponent?!Ol(s,l)||!Ol(r,d):!0}function tf(e,t,s,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,l),t.state!==e&&jc.enqueueReplaceState(t,t.state,null)}function un(e,t){var s=t;if("ref"in t){s={};for(var l in t)l!=="ref"&&(s[l]=t[l])}if(e=e.defaultProps){s===t&&(s=N({},s));for(var r in e)s[r]===void 0&&(s[r]=e[r])}return s}function af(e){Ii(e)}function sf(e){console.error(e)}function nf(e){Ii(e)}function cr(e,t){try{var s=e.onUncaughtError;s(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function lf(e,t,s){try{var l=e.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function _c(e,t,s){return s=ws(s),s.tag=3,s.payload={element:null},s.callback=function(){cr(e,t)},s}function rf(e){return e=ws(e),e.tag=3,e}function of(e,t,s,l){var r=s.type.getDerivedStateFromError;if(typeof r=="function"){var d=l.value;e.payload=function(){return r(d)},e.callback=function(){lf(t,s,l)}}var m=s.stateNode;m!==null&&typeof m.componentDidCatch=="function"&&(e.callback=function(){lf(t,s,l),typeof r!="function"&&(As===null?As=new Set([this]):As.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function m0(e,t,s,l,r){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=s.alternate,t!==null&&Yn(t,s,r,!0),s=ia.current,s!==null){switch(s.tag){case 31:case 13:return va===null?jr():s.alternate===null&&jt===0&&(jt=3),s.flags&=-257,s.flags|=65536,s.lanes=r,l===Zi?s.flags|=16384:(t=s.updateQueue,t===null?s.updateQueue=new Set([l]):t.add(l),Qc(e,l,r)),!1;case 22:return s.flags|=65536,l===Zi?s.flags|=16384:(t=s.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=t):(s=t.retryQueue,s===null?t.retryQueue=new Set([l]):s.add(l)),Qc(e,l,r)),!1}throw Error(c(435,s.tag))}return Qc(e,l,r),jr(),!1}if(Ze)return t=ia.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=r,l!==Ho&&(e=Error(c(422),{cause:l}),Ul(ga(e,s)))):(l!==Ho&&(t=Error(c(423),{cause:l}),Ul(ga(t,s))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,l=ga(l,s),r=_c(e.stateNode,l,r),Jo(e,r),jt!==4&&(jt=2)),!1;var d=Error(c(520),{cause:l});if(d=ga(d,s),ti===null?ti=[d]:ti.push(d),jt!==4&&(jt=2),t===null)return!0;l=ga(l,s),s=t;do{switch(s.tag){case 3:return s.flags|=65536,e=r&-r,s.lanes|=e,e=_c(s.stateNode,l,e),Jo(s,e),!1;case 1:if(t=s.type,d=s.stateNode,(s.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(As===null||!As.has(d))))return s.flags|=65536,r&=-r,s.lanes|=r,r=rf(r),of(r,e,s,l),Jo(s,r),!1}s=s.return}while(s!==null);return!1}var Nc=Error(c(461)),Et=!1;function Gt(e,t,s,l){t.child=e===null?um(t,null,s,l):cn(t,e.child,s,l)}function cf(e,t,s,l,r){s=s.render;var d=t.ref;if("ref"in l){var m={};for(var b in l)b!=="ref"&&(m[b]=l[b])}else m=l;return nn(t),l=nc(e,t,s,m,d,r),b=lc(),e!==null&&!Et?(ic(e,t,r),as(e,t,r)):(Ze&&b&&Bo(t),t.flags|=1,Gt(e,t,l,r),t.child)}function df(e,t,s,l,r){if(e===null){var d=s.type;return typeof d=="function"&&!Uo(d)&&d.defaultProps===void 0&&s.compare===null?(t.tag=15,t.type=d,uf(e,t,d,l,r)):(e=Fi(s.type,null,l,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!Ac(e,r)){var m=d.memoizedProps;if(s=s.compare,s=s!==null?s:Ol,s(m,l)&&e.ref===t.ref)return as(e,t,r)}return t.flags|=1,e=Za(d,l),e.ref=t.ref,e.return=t,t.child=e}function uf(e,t,s,l,r){if(e!==null){var d=e.memoizedProps;if(Ol(d,l)&&e.ref===t.ref)if(Et=!1,t.pendingProps=l=d,Ac(e,r))(e.flags&131072)!==0&&(Et=!0);else return t.lanes=e.lanes,as(e,t,r)}return wc(e,t,s,l,r)}function mf(e,t,s,l){var r=l.children,d=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(d=d!==null?d.baseLanes|s:s,e!==null){for(l=t.child=e.child,r=0;l!==null;)r=r|l.lanes|l.childLanes,l=l.sibling;l=r&~d}else l=0,t.child=null;return ff(e,t,d,s,l)}if((s&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Xi(t,d!==null?d.cachePool:null),d!==null?pm(t,d):ec(),hm(t);else return l=t.lanes=536870912,ff(e,t,d!==null?d.baseLanes|s:s,s,l)}else d!==null?(Xi(t,d.cachePool),pm(t,d),ks(),t.memoizedState=null):(e!==null&&Xi(t,null),ec(),ks());return Gt(e,t,r,s),t.child}function Xl(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function ff(e,t,s,l,r){var d=Xo();return d=d===null?null:{parent:kt._currentValue,pool:d},t.memoizedState={baseLanes:s,cachePool:d},e!==null&&Xi(t,null),ec(),hm(t),e!==null&&Yn(e,t,l,!0),t.childLanes=r,null}function dr(e,t){return t=mr({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function pf(e,t,s){return cn(t,e.child,null,s),e=dr(t,t.pendingProps),e.flags|=2,ra(t),t.memoizedState=null,e}function f0(e,t,s){var l=t.pendingProps,r=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Ze){if(l.mode==="hidden")return e=dr(t,l),t.lanes=536870912,Xl(null,e);if(ac(t),(e=ft)?(e=Cp(e,ya),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ys!==null?{id:La,overflow:qa}:null,retryLane:536870912,hydrationErrors:null},s=Zu(e),s.return=t,t.child=s,Ht=t,ft=null)):e=null,e===null)throw js(t);return t.lanes=536870912,null}return dr(t,l)}var d=e.memoizedState;if(d!==null){var m=d.dehydrated;if(ac(t),r)if(t.flags&256)t.flags&=-257,t=pf(e,t,s);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(c(558));else if(Et||Yn(e,t,s,!1),r=(s&e.childLanes)!==0,Et||r){if(l=ut,l!==null&&(m=De(l,s),m!==0&&m!==d.retryLane))throw d.retryLane=m,en(e,m),ea(l,e,m),Nc;jr(),t=pf(e,t,s)}else e=d.treeContext,ft=ja(m.nextSibling),Ht=t,Ze=!0,vs=null,ya=!1,e!==null&&Wu(t,e),t=dr(t,l),t.flags|=4096;return t}return e=Za(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function ur(e,t){var s=t.ref;if(s===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(c(284));(e===null||e.ref!==s)&&(t.flags|=4194816)}}function wc(e,t,s,l,r){return nn(t),s=nc(e,t,s,l,void 0,r),l=lc(),e!==null&&!Et?(ic(e,t,r),as(e,t,r)):(Ze&&l&&Bo(t),t.flags|=1,Gt(e,t,s,r),t.child)}function hf(e,t,s,l,r,d){return nn(t),t.updateQueue=null,s=xm(t,l,s,r),gm(e),l=lc(),e!==null&&!Et?(ic(e,t,d),as(e,t,d)):(Ze&&l&&Bo(t),t.flags|=1,Gt(e,t,s,d),t.child)}function gf(e,t,s,l,r){if(nn(t),t.stateNode===null){var d=Hn,m=s.contextType;typeof m=="object"&&m!==null&&(d=$t(m)),d=new s(l,d),t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=jc,t.stateNode=d,d._reactInternals=t,d=t.stateNode,d.props=l,d.state=t.memoizedState,d.refs={},Zo(t),m=s.contextType,d.context=typeof m=="object"&&m!==null?$t(m):Hn,d.state=t.memoizedState,m=s.getDerivedStateFromProps,typeof m=="function"&&(vc(t,s,m,l),d.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(m=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),m!==d.state&&jc.enqueueReplaceState(d,d.state,null),Gl(t,l,d,r),$l(),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){d=t.stateNode;var b=t.memoizedProps,k=un(s,b);d.props=k;var V=d.context,ee=s.contextType;m=Hn,typeof ee=="object"&&ee!==null&&(m=$t(ee));var le=s.getDerivedStateFromProps;ee=typeof le=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=t.pendingProps!==b,ee||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||V!==m)&&tf(t,d,l,m),Ns=!1;var X=t.memoizedState;d.state=X,Gl(t,l,d,r),$l(),V=t.memoizedState,b||X!==V||Ns?(typeof le=="function"&&(vc(t,s,le,l),V=t.memoizedState),(k=Ns||ef(t,s,k,l,X,V,m))?(ee||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=V),d.props=l,d.state=V,d.context=m,l=k):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{d=t.stateNode,Po(e,t),m=t.memoizedProps,ee=un(s,m),d.props=ee,le=t.pendingProps,X=d.context,V=s.contextType,k=Hn,typeof V=="object"&&V!==null&&(k=$t(V)),b=s.getDerivedStateFromProps,(V=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(m!==le||X!==k)&&tf(t,d,l,k),Ns=!1,X=t.memoizedState,d.state=X,Gl(t,l,d,r),$l();var J=t.memoizedState;m!==le||X!==J||Ns||e!==null&&e.dependencies!==null&&Vi(e.dependencies)?(typeof b=="function"&&(vc(t,s,b,l),J=t.memoizedState),(ee=Ns||ef(t,s,ee,l,X,J,k)||e!==null&&e.dependencies!==null&&Vi(e.dependencies))?(V||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,J,k),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,J,k)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||m===e.memoizedProps&&X===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&X===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=J),d.props=l,d.state=J,d.context=k,l=ee):(typeof d.componentDidUpdate!="function"||m===e.memoizedProps&&X===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&X===e.memoizedState||(t.flags|=1024),l=!1)}return d=l,ur(e,t),l=(t.flags&128)!==0,d||l?(d=t.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:d.render(),t.flags|=1,e!==null&&l?(t.child=cn(t,e.child,null,r),t.child=cn(t,null,s,r)):Gt(e,t,s,r),t.memoizedState=d.state,e=t.child):e=as(e,t,r),e}function xf(e,t,s,l){return an(),t.flags|=256,Gt(e,t,s,l),t.child}var Sc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cc(e){return{baseLanes:e,cachePool:lm()}}function kc(e,t,s){return e=e!==null?e.childLanes&~s:0,t&&(e|=ca),e}function bf(e,t,s){var l=t.pendingProps,r=!1,d=(t.flags&128)!==0,m;if((m=d)||(m=e!==null&&e.memoizedState===null?!1:(_t.current&2)!==0),m&&(r=!0,t.flags&=-129),m=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ze){if(r?Cs(t):ks(),(e=ft)?(e=Cp(e,ya),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ys!==null?{id:La,overflow:qa}:null,retryLane:536870912,hydrationErrors:null},s=Zu(e),s.return=t,t.child=s,Ht=t,ft=null)):e=null,e===null)throw js(t);return cd(e)?t.lanes=32:t.lanes=536870912,null}var b=l.children;return l=l.fallback,r?(ks(),r=t.mode,b=mr({mode:"hidden",children:b},r),l=tn(l,r,s,null),b.return=t,l.return=t,b.sibling=l,t.child=b,l=t.child,l.memoizedState=Cc(s),l.childLanes=kc(e,m,s),t.memoizedState=Sc,Xl(null,l)):(Cs(t),Tc(t,b))}var k=e.memoizedState;if(k!==null&&(b=k.dehydrated,b!==null)){if(d)t.flags&256?(Cs(t),t.flags&=-257,t=Ec(e,t,s)):t.memoizedState!==null?(ks(),t.child=e.child,t.flags|=128,t=null):(ks(),b=l.fallback,r=t.mode,l=mr({mode:"visible",children:l.children},r),b=tn(b,r,s,null),b.flags|=2,l.return=t,b.return=t,l.sibling=b,t.child=l,cn(t,e.child,null,s),l=t.child,l.memoizedState=Cc(s),l.childLanes=kc(e,m,s),t.memoizedState=Sc,t=Xl(null,l));else if(Cs(t),cd(b)){if(m=b.nextSibling&&b.nextSibling.dataset,m)var V=m.dgst;m=V,l=Error(c(419)),l.stack="",l.digest=m,Ul({value:l,source:null,stack:null}),t=Ec(e,t,s)}else if(Et||Yn(e,t,s,!1),m=(s&e.childLanes)!==0,Et||m){if(m=ut,m!==null&&(l=De(m,s),l!==0&&l!==k.retryLane))throw k.retryLane=l,en(e,l),ea(m,e,l),Nc;od(b)||jr(),t=Ec(e,t,s)}else od(b)?(t.flags|=192,t.child=e.child,t=null):(e=k.treeContext,ft=ja(b.nextSibling),Ht=t,Ze=!0,vs=null,ya=!1,e!==null&&Wu(t,e),t=Tc(t,l.children),t.flags|=4096);return t}return r?(ks(),b=l.fallback,r=t.mode,k=e.child,V=k.sibling,l=Za(k,{mode:"hidden",children:l.children}),l.subtreeFlags=k.subtreeFlags&65011712,V!==null?b=Za(V,b):(b=tn(b,r,s,null),b.flags|=2),b.return=t,l.return=t,l.sibling=b,t.child=l,Xl(null,l),l=t.child,b=e.child.memoizedState,b===null?b=Cc(s):(r=b.cachePool,r!==null?(k=kt._currentValue,r=r.parent!==k?{parent:k,pool:k}:r):r=lm(),b={baseLanes:b.baseLanes|s,cachePool:r}),l.memoizedState=b,l.childLanes=kc(e,m,s),t.memoizedState=Sc,Xl(e.child,l)):(Cs(t),s=e.child,e=s.sibling,s=Za(s,{mode:"visible",children:l.children}),s.return=t,s.sibling=null,e!==null&&(m=t.deletions,m===null?(t.deletions=[e],t.flags|=16):m.push(e)),t.child=s,t.memoizedState=null,s)}function Tc(e,t){return t=mr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function mr(e,t){return e=la(22,e,null,t),e.lanes=0,e}function Ec(e,t,s){return cn(t,e.child,null,s),e=Tc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function yf(e,t,s){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),Fo(e.return,t,s)}function Mc(e,t,s,l,r,d){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:r,treeForkCount:d}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=l,m.tail=s,m.tailMode=r,m.treeForkCount=d)}function vf(e,t,s){var l=t.pendingProps,r=l.revealOrder,d=l.tail;l=l.children;var m=_t.current,b=(m&2)!==0;if(b?(m=m&1|2,t.flags|=128):m&=1,M(_t,m),Gt(e,t,l,s),l=Ze?Rl:0,!b&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&yf(e,s,t);else if(e.tag===19)yf(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(r){case"forwards":for(s=t.child,r=null;s!==null;)e=s.alternate,e!==null&&er(e)===null&&(r=s),s=s.sibling;s=r,s===null?(r=t.child,t.child=null):(r=s.sibling,s.sibling=null),Mc(t,!1,r,s,d,l);break;case"backwards":case"unstable_legacy-backwards":for(s=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&er(e)===null){t.child=r;break}e=r.sibling,r.sibling=s,s=r,r=e}Mc(t,!0,s,null,d,l);break;case"together":Mc(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function as(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Ms|=t.lanes,(s&t.childLanes)===0)if(e!==null){if(Yn(e,t,s,!1),(s&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(c(153));if(t.child!==null){for(e=t.child,s=Za(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=Za(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function Ac(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Vi(e)))}function p0(e,t,s){switch(t.tag){case 3:re(t,t.stateNode.containerInfo),_s(t,kt,e.memoizedState.cache),an();break;case 27:case 5:Ne(t);break;case 4:re(t,t.stateNode.containerInfo);break;case 10:_s(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,ac(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(Cs(t),t.flags|=128,null):(s&t.child.childLanes)!==0?bf(e,t,s):(Cs(t),e=as(e,t,s),e!==null?e.sibling:null);Cs(t);break;case 19:var r=(e.flags&128)!==0;if(l=(s&t.childLanes)!==0,l||(Yn(e,t,s,!1),l=(s&t.childLanes)!==0),r){if(l)return vf(e,t,s);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),M(_t,_t.current),l)break;return null;case 22:return t.lanes=0,mf(e,t,s,t.pendingProps);case 24:_s(t,kt,e.memoizedState.cache)}return as(e,t,s)}function jf(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps)Et=!0;else{if(!Ac(e,s)&&(t.flags&128)===0)return Et=!1,p0(e,t,s);Et=(e.flags&131072)!==0}else Et=!1,Ze&&(t.flags&1048576)!==0&&Ju(t,Rl,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=rn(t.elementType),t.type=e,typeof e=="function")Uo(e)?(l=un(e,l),t.tag=1,t=gf(null,t,e,l,s)):(t.tag=0,t=wc(null,t,e,l,s));else{if(e!=null){var r=e.$$typeof;if(r===U){t.tag=11,t=cf(null,t,e,l,s);break e}else if(r===W){t.tag=14,t=df(null,t,e,l,s);break e}}throw t=O(e)||e,Error(c(306,t,""))}}return t;case 0:return wc(e,t,t.type,t.pendingProps,s);case 1:return l=t.type,r=un(l,t.pendingProps),gf(e,t,l,r,s);case 3:e:{if(re(t,t.stateNode.containerInfo),e===null)throw Error(c(387));l=t.pendingProps;var d=t.memoizedState;r=d.element,Po(e,t),Gl(t,l,null,s);var m=t.memoizedState;if(l=m.cache,_s(t,kt,l),l!==d.cache&&Yo(t,[kt],s,!0),$l(),l=m.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:m.cache},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){t=xf(e,t,l,s);break e}else if(l!==r){r=ga(Error(c(424)),t),Ul(r),t=xf(e,t,l,s);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ft=ja(e.firstChild),Ht=t,Ze=!0,vs=null,ya=!0,s=um(t,null,l,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(an(),l===r){t=as(e,t,s);break e}Gt(e,t,l,s)}t=t.child}return t;case 26:return ur(e,t),e===null?(s=zp(t.type,null,t.pendingProps,null))?t.memoizedState=s:Ze||(s=t.type,e=t.pendingProps,l=Tr(be.current).createElement(s),l[It]=t,l[Xt]=e,Ft(l,s,e),Rt(l),t.stateNode=l):t.memoizedState=zp(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ne(t),e===null&&Ze&&(l=t.stateNode=Ep(t.type,t.pendingProps,be.current),Ht=t,ya=!0,r=ft,Rs(t.type)?(dd=r,ft=ja(l.firstChild)):ft=r),Gt(e,t,t.pendingProps.children,s),ur(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ze&&((r=l=ft)&&(l=F0(l,t.type,t.pendingProps,ya),l!==null?(t.stateNode=l,Ht=t,ft=ja(l.firstChild),ya=!1,r=!0):r=!1),r||js(t)),Ne(t),r=t.type,d=t.pendingProps,m=e!==null?e.memoizedProps:null,l=d.children,ld(r,d)?l=null:m!==null&&ld(r,m)&&(t.flags|=32),t.memoizedState!==null&&(r=nc(e,t,l0,null,null,s),ci._currentValue=r),ur(e,t),Gt(e,t,l,s),t.child;case 6:return e===null&&Ze&&((e=s=ft)&&(s=Y0(s,t.pendingProps,ya),s!==null?(t.stateNode=s,Ht=t,ft=null,e=!0):e=!1),e||js(t)),null;case 13:return bf(e,t,s);case 4:return re(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=cn(t,null,l,s):Gt(e,t,l,s),t.child;case 11:return cf(e,t,t.type,t.pendingProps,s);case 7:return Gt(e,t,t.pendingProps,s),t.child;case 8:return Gt(e,t,t.pendingProps.children,s),t.child;case 12:return Gt(e,t,t.pendingProps.children,s),t.child;case 10:return l=t.pendingProps,_s(t,t.type,l.value),Gt(e,t,l.children,s),t.child;case 9:return r=t.type._context,l=t.pendingProps.children,nn(t),r=$t(r),l=l(r),t.flags|=1,Gt(e,t,l,s),t.child;case 14:return df(e,t,t.type,t.pendingProps,s);case 15:return uf(e,t,t.type,t.pendingProps,s);case 19:return vf(e,t,s);case 31:return f0(e,t,s);case 22:return mf(e,t,s,t.pendingProps);case 24:return nn(t),l=$t(kt),e===null?(r=Xo(),r===null&&(r=ut,d=Vo(),r.pooledCache=d,d.refCount++,d!==null&&(r.pooledCacheLanes|=s),r=d),t.memoizedState={parent:l,cache:r},Zo(t),_s(t,kt,r)):((e.lanes&s)!==0&&(Po(e,t),Gl(t,null,null,s),$l()),r=e.memoizedState,d=t.memoizedState,r.parent!==l?(r={parent:l,cache:l},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),_s(t,kt,l)):(l=d.cache,_s(t,kt,l),l!==r.cache&&Yo(t,[kt],s,!0))),Gt(e,t,t.pendingProps.children,s),t.child;case 29:throw t.pendingProps}throw Error(c(156,t.tag))}function ss(e){e.flags|=4}function zc(e,t,s,l,r){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(r&335544128)===r)if(e.stateNode.complete)e.flags|=8192;else if(Xf())e.flags|=8192;else throw on=Zi,Ko}else e.flags&=-16777217}function _f(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Lp(t))if(Xf())e.flags|=8192;else throw on=Zi,Ko}function fr(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?We():536870912,e.lanes|=t,sl|=t)}function Kl(e,t){if(!Ze)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function pt(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,l=0;if(t)for(var r=e.child;r!==null;)s|=r.lanes|r.childLanes,l|=r.subtreeFlags&65011712,l|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)s|=r.lanes|r.childLanes,l|=r.subtreeFlags,l|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=l,e.childLanes=s,t}function h0(e,t,s){var l=t.pendingProps;switch(Io(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(t),null;case 1:return pt(t),null;case 3:return s=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),Wa(kt),xe(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Fn(t)?ss(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,$o())),pt(t),null;case 26:var r=t.type,d=t.memoizedState;return e===null?(ss(t),d!==null?(pt(t),_f(t,d)):(pt(t),zc(t,r,null,l,s))):d?d!==e.memoizedState?(ss(t),pt(t),_f(t,d)):(pt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&ss(t),pt(t),zc(t,r,e,l,s)),null;case 27:if(ze(t),s=be.current,r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&ss(t);else{if(!l){if(t.stateNode===null)throw Error(c(166));return pt(t),null}e=ce.current,Fn(t)?em(t):(e=Ep(r,l,s),t.stateNode=e,ss(t))}return pt(t),null;case 5:if(ze(t),r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&ss(t);else{if(!l){if(t.stateNode===null)throw Error(c(166));return pt(t),null}if(d=ce.current,Fn(t))em(t);else{var m=Tr(be.current);switch(d){case 1:d=m.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:d=m.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":d=m.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":d=m.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":d=m.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?m.createElement("select",{is:l.is}):m.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?m.createElement(r,{is:l.is}):m.createElement(r)}}d[It]=t,d[Xt]=l;e:for(m=t.child;m!==null;){if(m.tag===5||m.tag===6)d.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}t.stateNode=d;e:switch(Ft(d,r,l),r){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&ss(t)}}return pt(t),zc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,s),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&ss(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(c(166));if(e=be.current,Fn(t)){if(e=t.stateNode,s=t.memoizedProps,l=null,r=Ht,r!==null)switch(r.tag){case 27:case 5:l=r.memoizedProps}e[It]=t,e=!!(e.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||bp(e.nodeValue,s)),e||js(t,!0)}else e=Tr(e).createTextNode(l),e[It]=t,t.stateNode=e}return pt(t),null;case 31:if(s=t.memoizedState,e===null||e.memoizedState!==null){if(l=Fn(t),s!==null){if(e===null){if(!l)throw Error(c(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(557));e[It]=t}else an(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;pt(t),e=!1}else s=$o(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return t.flags&256?(ra(t),t):(ra(t),null);if((t.flags&128)!==0)throw Error(c(558))}return pt(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=Fn(t),l!==null&&l.dehydrated!==null){if(e===null){if(!r)throw Error(c(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(c(317));r[It]=t}else an(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;pt(t),r=!1}else r=$o(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(ra(t),t):(ra(t),null)}return ra(t),(t.flags&128)!==0?(t.lanes=s,t):(s=l!==null,e=e!==null&&e.memoizedState!==null,s&&(l=t.child,r=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(r=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==r&&(l.flags|=2048)),s!==e&&s&&(t.child.flags|=8192),fr(t,t.updateQueue),pt(t),null);case 4:return xe(),e===null&&ed(t.stateNode.containerInfo),pt(t),null;case 10:return Wa(t.type),pt(t),null;case 19:if(H(_t),l=t.memoizedState,l===null)return pt(t),null;if(r=(t.flags&128)!==0,d=l.rendering,d===null)if(r)Kl(l,!1);else{if(jt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(d=er(e),d!==null){for(t.flags|=128,Kl(l,!1),e=d.updateQueue,t.updateQueue=e,fr(t,e),t.subtreeFlags=0,e=s,s=t.child;s!==null;)Ku(s,e),s=s.sibling;return M(_t,_t.current&1|2),Ze&&Pa(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&Qe()>br&&(t.flags|=128,r=!0,Kl(l,!1),t.lanes=4194304)}else{if(!r)if(e=er(d),e!==null){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,fr(t,e),Kl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Ze)return pt(t),null}else 2*Qe()-l.renderingStartTime>br&&s!==536870912&&(t.flags|=128,r=!0,Kl(l,!1),t.lanes=4194304);l.isBackwards?(d.sibling=t.child,t.child=d):(e=l.last,e!==null?e.sibling=d:t.child=d,l.last=d)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Qe(),e.sibling=null,s=_t.current,M(_t,r?s&1|2:s&1),Ze&&Pa(t,l.treeForkCount),e):(pt(t),null);case 22:case 23:return ra(t),tc(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(s&536870912)!==0&&(t.flags&128)===0&&(pt(t),t.subtreeFlags&6&&(t.flags|=8192)):pt(t),s=t.updateQueue,s!==null&&fr(t,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==s&&(t.flags|=2048),e!==null&&H(ln),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),Wa(kt),pt(t),null;case 25:return null;case 30:return null}throw Error(c(156,t.tag))}function g0(e,t){switch(Io(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Wa(kt),xe(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ze(t),null;case 31:if(t.memoizedState!==null){if(ra(t),t.alternate===null)throw Error(c(340));an()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(ra(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(c(340));an()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return H(_t),null;case 4:return xe(),null;case 10:return Wa(t.type),null;case 22:case 23:return ra(t),tc(),e!==null&&H(ln),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Wa(kt),null;case 25:return null;default:return null}}function Nf(e,t){switch(Io(t),t.tag){case 3:Wa(kt),xe();break;case 26:case 27:case 5:ze(t);break;case 4:xe();break;case 31:t.memoizedState!==null&&ra(t);break;case 13:ra(t);break;case 19:H(_t);break;case 10:Wa(t.type);break;case 22:case 23:ra(t),tc(),e!==null&&H(ln);break;case 24:Wa(kt)}}function Zl(e,t){try{var s=t.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var r=l.next;s=r;do{if((s.tag&e)===e){l=void 0;var d=s.create,m=s.inst;l=d(),m.destroy=l}s=s.next}while(s!==r)}}catch(b){lt(t,t.return,b)}}function Ts(e,t,s){try{var l=t.updateQueue,r=l!==null?l.lastEffect:null;if(r!==null){var d=r.next;l=d;do{if((l.tag&e)===e){var m=l.inst,b=m.destroy;if(b!==void 0){m.destroy=void 0,r=t;var k=s,V=b;try{V()}catch(ee){lt(r,k,ee)}}}l=l.next}while(l!==d)}}catch(ee){lt(t,t.return,ee)}}function wf(e){var t=e.updateQueue;if(t!==null){var s=e.stateNode;try{fm(t,s)}catch(l){lt(e,e.return,l)}}}function Sf(e,t,s){s.props=un(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(l){lt(e,t,l)}}function Pl(e,t){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof s=="function"?e.refCleanup=s(l):s.current=l}}catch(r){lt(e,t,r)}}function Ba(e,t){var s=e.ref,l=e.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(r){lt(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(r){lt(e,t,r)}else s.current=null}function Cf(e){var t=e.type,s=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break e;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(r){lt(e,e.return,r)}}function Oc(e,t,s){try{var l=e.stateNode;q0(l,e.type,s,t),l[Xt]=t}catch(r){lt(e,e.return,r)}}function kf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Rs(e.type)||e.tag===4}function Dc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||kf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Rs(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Rc(e,t,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,t):(t=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,t.appendChild(e),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=Xa));else if(l!==4&&(l===27&&Rs(e.type)&&(s=e.stateNode,t=null),e=e.child,e!==null))for(Rc(e,t,s),e=e.sibling;e!==null;)Rc(e,t,s),e=e.sibling}function pr(e,t,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(l!==4&&(l===27&&Rs(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(pr(e,t,s),e=e.sibling;e!==null;)pr(e,t,s),e=e.sibling}function Tf(e){var t=e.stateNode,s=e.memoizedProps;try{for(var l=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Ft(t,l,s),t[It]=e,t[Xt]=s}catch(d){lt(e,e.return,d)}}var ns=!1,Mt=!1,Uc=!1,Ef=typeof WeakSet=="function"?WeakSet:Set,Ut=null;function x0(e,t){if(e=e.containerInfo,sd=Rr,e=Iu(e),Eo(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var r=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{s.nodeType,d.nodeType}catch{s=null;break e}var m=0,b=-1,k=-1,V=0,ee=0,le=e,X=null;t:for(;;){for(var J;le!==s||r!==0&&le.nodeType!==3||(b=m+r),le!==d||l!==0&&le.nodeType!==3||(k=m+l),le.nodeType===3&&(m+=le.nodeValue.length),(J=le.firstChild)!==null;)X=le,le=J;for(;;){if(le===e)break t;if(X===s&&++V===r&&(b=m),X===d&&++ee===l&&(k=m),(J=le.nextSibling)!==null)break;le=X,X=le.parentNode}le=J}s=b===-1||k===-1?null:{start:b,end:k}}else s=null}s=s||{start:0,end:0}}else s=null;for(nd={focusedElem:e,selectionRange:s},Rr=!1,Ut=t;Ut!==null;)if(t=Ut,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ut=e;else for(;Ut!==null;){switch(t=Ut,d=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)r=e[s],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,s=t,r=d.memoizedProps,d=d.memoizedState,l=s.stateNode;try{var ve=un(s.type,r);e=l.getSnapshotBeforeUpdate(ve,d),l.__reactInternalSnapshotBeforeUpdate=e}catch(Te){lt(s,s.return,Te)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,s=e.nodeType,s===9)rd(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":rd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(c(163))}if(e=t.sibling,e!==null){e.return=t.return,Ut=e;break}Ut=t.return}}function Mf(e,t,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:is(e,s),l&4&&Zl(5,s);break;case 1:if(is(e,s),l&4)if(e=s.stateNode,t===null)try{e.componentDidMount()}catch(m){lt(s,s.return,m)}else{var r=un(s.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(m){lt(s,s.return,m)}}l&64&&wf(s),l&512&&Pl(s,s.return);break;case 3:if(is(e,s),l&64&&(e=s.updateQueue,e!==null)){if(t=null,s.child!==null)switch(s.child.tag){case 27:case 5:t=s.child.stateNode;break;case 1:t=s.child.stateNode}try{fm(e,t)}catch(m){lt(s,s.return,m)}}break;case 27:t===null&&l&4&&Tf(s);case 26:case 5:is(e,s),t===null&&l&4&&Cf(s),l&512&&Pl(s,s.return);break;case 12:is(e,s);break;case 31:is(e,s),l&4&&Of(e,s);break;case 13:is(e,s),l&4&&Df(e,s),l&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=C0.bind(null,s),V0(e,s))));break;case 22:if(l=s.memoizedState!==null||ns,!l){t=t!==null&&t.memoizedState!==null||Mt,r=ns;var d=Mt;ns=l,(Mt=t)&&!d?rs(e,s,(s.subtreeFlags&8772)!==0):is(e,s),ns=r,Mt=d}break;case 30:break;default:is(e,s)}}function Af(e){var t=e.alternate;t!==null&&(e.alternate=null,Af(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&mo(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var gt=null,Zt=!1;function ls(e,t,s){for(s=s.child;s!==null;)zf(e,t,s),s=s.sibling}function zf(e,t,s){if(Xe&&typeof Xe.onCommitFiberUnmount=="function")try{Xe.onCommitFiberUnmount(Ge,s)}catch{}switch(s.tag){case 26:Mt||Ba(s,t),ls(e,t,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Mt||Ba(s,t);var l=gt,r=Zt;Rs(s.type)&&(gt=s.stateNode,Zt=!1),ls(e,t,s),ii(s.stateNode),gt=l,Zt=r;break;case 5:Mt||Ba(s,t);case 6:if(l=gt,r=Zt,gt=null,ls(e,t,s),gt=l,Zt=r,gt!==null)if(Zt)try{(gt.nodeType===9?gt.body:gt.nodeName==="HTML"?gt.ownerDocument.body:gt).removeChild(s.stateNode)}catch(d){lt(s,t,d)}else try{gt.removeChild(s.stateNode)}catch(d){lt(s,t,d)}break;case 18:gt!==null&&(Zt?(e=gt,wp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),ul(e)):wp(gt,s.stateNode));break;case 4:l=gt,r=Zt,gt=s.stateNode.containerInfo,Zt=!0,ls(e,t,s),gt=l,Zt=r;break;case 0:case 11:case 14:case 15:Ts(2,s,t),Mt||Ts(4,s,t),ls(e,t,s);break;case 1:Mt||(Ba(s,t),l=s.stateNode,typeof l.componentWillUnmount=="function"&&Sf(s,t,l)),ls(e,t,s);break;case 21:ls(e,t,s);break;case 22:Mt=(l=Mt)||s.memoizedState!==null,ls(e,t,s),Mt=l;break;default:ls(e,t,s)}}function Of(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ul(e)}catch(s){lt(t,t.return,s)}}}function Df(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ul(e)}catch(s){lt(t,t.return,s)}}function b0(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Ef),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Ef),t;default:throw Error(c(435,e.tag))}}function hr(e,t){var s=b0(e);t.forEach(function(l){if(!s.has(l)){s.add(l);var r=k0.bind(null,e,l);l.then(r,r)}})}function Pt(e,t){var s=t.deletions;if(s!==null)for(var l=0;l<s.length;l++){var r=s[l],d=e,m=t,b=m;e:for(;b!==null;){switch(b.tag){case 27:if(Rs(b.type)){gt=b.stateNode,Zt=!1;break e}break;case 5:gt=b.stateNode,Zt=!1;break e;case 3:case 4:gt=b.stateNode.containerInfo,Zt=!0;break e}b=b.return}if(gt===null)throw Error(c(160));zf(d,m,r),gt=null,Zt=!1,d=r.alternate,d!==null&&(d.return=null),r.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Rf(t,e),t=t.sibling}var Ea=null;function Rf(e,t){var s=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Pt(t,e),Jt(e),l&4&&(Ts(3,e,e.return),Zl(3,e),Ts(5,e,e.return));break;case 1:Pt(t,e),Jt(e),l&512&&(Mt||s===null||Ba(s,s.return)),l&64&&ns&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var r=Ea;if(Pt(t,e),Jt(e),l&512&&(Mt||s===null||Ba(s,s.return)),l&4){var d=s!==null?s.memoizedState:null;if(l=e.memoizedState,s===null)if(l===null)if(e.stateNode===null){e:{l=e.type,s=e.memoizedProps,r=r.ownerDocument||r;t:switch(l){case"title":d=r.getElementsByTagName("title")[0],(!d||d[wl]||d[It]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=r.createElement(l),r.head.insertBefore(d,r.querySelector("head > title"))),Ft(d,l,s),d[It]=e,Rt(d),l=d;break e;case"link":var m=Rp("link","href",r).get(l+(s.href||""));if(m){for(var b=0;b<m.length;b++)if(d=m[b],d.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&d.getAttribute("rel")===(s.rel==null?null:s.rel)&&d.getAttribute("title")===(s.title==null?null:s.title)&&d.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){m.splice(b,1);break t}}d=r.createElement(l),Ft(d,l,s),r.head.appendChild(d);break;case"meta":if(m=Rp("meta","content",r).get(l+(s.content||""))){for(b=0;b<m.length;b++)if(d=m[b],d.getAttribute("content")===(s.content==null?null:""+s.content)&&d.getAttribute("name")===(s.name==null?null:s.name)&&d.getAttribute("property")===(s.property==null?null:s.property)&&d.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&d.getAttribute("charset")===(s.charSet==null?null:s.charSet)){m.splice(b,1);break t}}d=r.createElement(l),Ft(d,l,s),r.head.appendChild(d);break;default:throw Error(c(468,l))}d[It]=e,Rt(d),l=d}e.stateNode=l}else Up(r,e.type,e.stateNode);else e.stateNode=Dp(r,l,e.memoizedProps);else d!==l?(d===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):d.count--,l===null?Up(r,e.type,e.stateNode):Dp(r,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Oc(e,e.memoizedProps,s.memoizedProps)}break;case 27:Pt(t,e),Jt(e),l&512&&(Mt||s===null||Ba(s,s.return)),s!==null&&l&4&&Oc(e,e.memoizedProps,s.memoizedProps);break;case 5:if(Pt(t,e),Jt(e),l&512&&(Mt||s===null||Ba(s,s.return)),e.flags&32){r=e.stateNode;try{Dn(r,"")}catch(ve){lt(e,e.return,ve)}}l&4&&e.stateNode!=null&&(r=e.memoizedProps,Oc(e,r,s!==null?s.memoizedProps:r)),l&1024&&(Uc=!0);break;case 6:if(Pt(t,e),Jt(e),l&4){if(e.stateNode===null)throw Error(c(162));l=e.memoizedProps,s=e.stateNode;try{s.nodeValue=l}catch(ve){lt(e,e.return,ve)}}break;case 3:if(Ar=null,r=Ea,Ea=Er(t.containerInfo),Pt(t,e),Ea=r,Jt(e),l&4&&s!==null&&s.memoizedState.isDehydrated)try{ul(t.containerInfo)}catch(ve){lt(e,e.return,ve)}Uc&&(Uc=!1,Uf(e));break;case 4:l=Ea,Ea=Er(e.stateNode.containerInfo),Pt(t,e),Jt(e),Ea=l;break;case 12:Pt(t,e),Jt(e);break;case 31:Pt(t,e),Jt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,hr(e,l)));break;case 13:Pt(t,e),Jt(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(xr=Qe()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,hr(e,l)));break;case 22:r=e.memoizedState!==null;var k=s!==null&&s.memoizedState!==null,V=ns,ee=Mt;if(ns=V||r,Mt=ee||k,Pt(t,e),Mt=ee,ns=V,Jt(e),l&8192)e:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(s===null||k||ns||Mt||mn(e)),s=null,t=e;;){if(t.tag===5||t.tag===26){if(s===null){k=s=t;try{if(d=k.stateNode,r)m=d.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none";else{b=k.stateNode;var le=k.memoizedProps.style,X=le!=null&&le.hasOwnProperty("display")?le.display:null;b.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(ve){lt(k,k.return,ve)}}}else if(t.tag===6){if(s===null){k=t;try{k.stateNode.nodeValue=r?"":k.memoizedProps}catch(ve){lt(k,k.return,ve)}}}else if(t.tag===18){if(s===null){k=t;try{var J=k.stateNode;r?Sp(J,!0):Sp(k.stateNode,!1)}catch(ve){lt(k,k.return,ve)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;s===t&&(s=null),t=t.return}s===t&&(s=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,hr(e,s))));break;case 19:Pt(t,e),Jt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,hr(e,l)));break;case 30:break;case 21:break;default:Pt(t,e),Jt(e)}}function Jt(e){var t=e.flags;if(t&2){try{for(var s,l=e.return;l!==null;){if(kf(l)){s=l;break}l=l.return}if(s==null)throw Error(c(160));switch(s.tag){case 27:var r=s.stateNode,d=Dc(e);pr(e,d,r);break;case 5:var m=s.stateNode;s.flags&32&&(Dn(m,""),s.flags&=-33);var b=Dc(e);pr(e,b,m);break;case 3:case 4:var k=s.stateNode.containerInfo,V=Dc(e);Rc(e,V,k);break;default:throw Error(c(161))}}catch(ee){lt(e,e.return,ee)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Uf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Uf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function is(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Mf(e,t.alternate,t),t=t.sibling}function mn(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ts(4,t,t.return),mn(t);break;case 1:Ba(t,t.return);var s=t.stateNode;typeof s.componentWillUnmount=="function"&&Sf(t,t.return,s),mn(t);break;case 27:ii(t.stateNode);case 26:case 5:Ba(t,t.return),mn(t);break;case 22:t.memoizedState===null&&mn(t);break;case 30:mn(t);break;default:mn(t)}e=e.sibling}}function rs(e,t,s){for(s=s&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,r=e,d=t,m=d.flags;switch(d.tag){case 0:case 11:case 15:rs(r,d,s),Zl(4,d);break;case 1:if(rs(r,d,s),l=d,r=l.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(V){lt(l,l.return,V)}if(l=d,r=l.updateQueue,r!==null){var b=l.stateNode;try{var k=r.shared.hiddenCallbacks;if(k!==null)for(r.shared.hiddenCallbacks=null,r=0;r<k.length;r++)mm(k[r],b)}catch(V){lt(l,l.return,V)}}s&&m&64&&wf(d),Pl(d,d.return);break;case 27:Tf(d);case 26:case 5:rs(r,d,s),s&&l===null&&m&4&&Cf(d),Pl(d,d.return);break;case 12:rs(r,d,s);break;case 31:rs(r,d,s),s&&m&4&&Of(r,d);break;case 13:rs(r,d,s),s&&m&4&&Df(r,d);break;case 22:d.memoizedState===null&&rs(r,d,s),Pl(d,d.return);break;case 30:break;default:rs(r,d,s)}t=t.sibling}}function Lc(e,t){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&Ll(s))}function qc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ll(e))}function Ma(e,t,s,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Lf(e,t,s,l),t=t.sibling}function Lf(e,t,s,l){var r=t.flags;switch(t.tag){case 0:case 11:case 15:Ma(e,t,s,l),r&2048&&Zl(9,t);break;case 1:Ma(e,t,s,l);break;case 3:Ma(e,t,s,l),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ll(e)));break;case 12:if(r&2048){Ma(e,t,s,l),e=t.stateNode;try{var d=t.memoizedProps,m=d.id,b=d.onPostCommit;typeof b=="function"&&b(m,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(k){lt(t,t.return,k)}}else Ma(e,t,s,l);break;case 31:Ma(e,t,s,l);break;case 13:Ma(e,t,s,l);break;case 23:break;case 22:d=t.stateNode,m=t.alternate,t.memoizedState!==null?d._visibility&2?Ma(e,t,s,l):Jl(e,t):d._visibility&2?Ma(e,t,s,l):(d._visibility|=2,el(e,t,s,l,(t.subtreeFlags&10256)!==0||!1)),r&2048&&Lc(m,t);break;case 24:Ma(e,t,s,l),r&2048&&qc(t.alternate,t);break;default:Ma(e,t,s,l)}}function el(e,t,s,l,r){for(r=r&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var d=e,m=t,b=s,k=l,V=m.flags;switch(m.tag){case 0:case 11:case 15:el(d,m,b,k,r),Zl(8,m);break;case 23:break;case 22:var ee=m.stateNode;m.memoizedState!==null?ee._visibility&2?el(d,m,b,k,r):Jl(d,m):(ee._visibility|=2,el(d,m,b,k,r)),r&&V&2048&&Lc(m.alternate,m);break;case 24:el(d,m,b,k,r),r&&V&2048&&qc(m.alternate,m);break;default:el(d,m,b,k,r)}t=t.sibling}}function Jl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var s=e,l=t,r=l.flags;switch(l.tag){case 22:Jl(s,l),r&2048&&Lc(l.alternate,l);break;case 24:Jl(s,l),r&2048&&qc(l.alternate,l);break;default:Jl(s,l)}t=t.sibling}}var Wl=8192;function tl(e,t,s){if(e.subtreeFlags&Wl)for(e=e.child;e!==null;)qf(e,t,s),e=e.sibling}function qf(e,t,s){switch(e.tag){case 26:tl(e,t,s),e.flags&Wl&&e.memoizedState!==null&&nb(s,Ea,e.memoizedState,e.memoizedProps);break;case 5:tl(e,t,s);break;case 3:case 4:var l=Ea;Ea=Er(e.stateNode.containerInfo),tl(e,t,s),Ea=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Wl,Wl=16777216,tl(e,t,s),Wl=l):tl(e,t,s));break;default:tl(e,t,s)}}function Bf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ei(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var l=t[s];Ut=l,Hf(l,e)}Bf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)If(e),e=e.sibling}function If(e){switch(e.tag){case 0:case 11:case 15:ei(e),e.flags&2048&&Ts(9,e,e.return);break;case 3:ei(e);break;case 12:ei(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,gr(e)):ei(e);break;default:ei(e)}}function gr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var l=t[s];Ut=l,Hf(l,e)}Bf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ts(8,t,t.return),gr(t);break;case 22:s=t.stateNode,s._visibility&2&&(s._visibility&=-3,gr(t));break;default:gr(t)}e=e.sibling}}function Hf(e,t){for(;Ut!==null;){var s=Ut;switch(s.tag){case 0:case 11:case 15:Ts(8,s,t);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ll(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,Ut=l;else e:for(s=e;Ut!==null;){l=Ut;var r=l.sibling,d=l.return;if(Af(l),l===s){Ut=null;break e}if(r!==null){r.return=d,Ut=r;break e}Ut=d}}}var y0={getCacheForType:function(e){var t=$t(kt),s=t.data.get(e);return s===void 0&&(s=e(),t.data.set(e,s)),s},cacheSignal:function(){return $t(kt).controller.signal}},v0=typeof WeakMap=="function"?WeakMap:Map,st=0,ut=null,Ie=null,Fe=0,nt=0,oa=null,Es=!1,al=!1,Bc=!1,os=0,jt=0,Ms=0,fn=0,Ic=0,ca=0,sl=0,ti=null,Wt=null,Hc=!1,xr=0,$f=0,br=1/0,yr=null,As=null,Ot=0,zs=null,nl=null,cs=0,$c=0,Gc=null,Gf=null,ai=0,Fc=null;function da(){return(st&2)!==0&&Fe!==0?Fe&-Fe:_.T!==null?Zc():Nl()}function Ff(){if(ca===0)if((Fe&536870912)===0||Ze){var e=Ua;Ua<<=1,(Ua&3932160)===0&&(Ua=262144),ca=e}else ca=536870912;return e=ia.current,e!==null&&(e.flags|=32),ca}function ea(e,t,s){(e===ut&&(nt===2||nt===9)||e.cancelPendingCommit!==null)&&(ll(e,0),Os(e,Fe,ca,!1)),Ct(e,s),((st&2)===0||e!==ut)&&(e===ut&&((st&2)===0&&(fn|=s),jt===4&&Os(e,Fe,ca,!1)),Ia(e))}function Yf(e,t,s){if((st&6)!==0)throw Error(c(327));var l=!s&&(t&127)===0&&(t&e.expiredLanes)===0||Se(e,t),r=l?N0(e,t):Vc(e,t,!0),d=l;do{if(r===0){al&&!l&&Os(e,t,0,!1);break}else{if(s=e.current.alternate,d&&!j0(s)){r=Vc(e,t,!1),d=!1;continue}if(r===2){if(d=t,e.errorRecoveryDisabledLanes&d)var m=0;else m=e.pendingLanes&-536870913,m=m!==0?m:m&536870912?536870912:0;if(m!==0){t=m;e:{var b=e;r=ti;var k=b.current.memoizedState.isDehydrated;if(k&&(ll(b,m).flags|=256),m=Vc(b,m,!1),m!==2){if(Bc&&!k){b.errorRecoveryDisabledLanes|=d,fn|=d,r=4;break e}d=Wt,Wt=r,d!==null&&(Wt===null?Wt=d:Wt.push.apply(Wt,d))}r=m}if(d=!1,r!==2)continue}}if(r===1){ll(e,0),Os(e,t,0,!0);break}e:{switch(l=e,d=r,d){case 0:case 1:throw Error(c(345));case 4:if((t&4194048)!==t)break;case 6:Os(l,t,ca,!Es);break e;case 2:Wt=null;break;case 3:case 5:break;default:throw Error(c(329))}if((t&62914560)===t&&(r=xr+300-Qe(),10<r)){if(Os(l,t,ca,!Es),ie(l,0,!0)!==0)break e;cs=t,l.timeoutHandle=_p(Vf.bind(null,l,s,Wt,yr,Hc,t,ca,fn,sl,Es,d,"Throttled",-0,0),r);break e}Vf(l,s,Wt,yr,Hc,t,ca,fn,sl,Es,d,null,-0,0)}}break}while(!0);Ia(e)}function Vf(e,t,s,l,r,d,m,b,k,V,ee,le,X,J){if(e.timeoutHandle=-1,le=t.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xa},qf(t,d,le);var ve=(d&62914560)===d?xr-Qe():(d&4194048)===d?$f-Qe():0;if(ve=lb(le,ve),ve!==null){cs=d,e.cancelPendingCommit=ve(ep.bind(null,e,t,d,s,l,r,m,b,k,ee,le,null,X,J)),Os(e,d,m,!V);return}}ep(e,t,d,s,l,r,m,b,k)}function j0(e){for(var t=e;;){var s=t.tag;if((s===0||s===11||s===15)&&t.flags&16384&&(s=t.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var r=s[l],d=r.getSnapshot;r=r.value;try{if(!na(d(),r))return!1}catch{return!1}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Os(e,t,s,l){t&=~Ic,t&=~fn,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var r=t;0<r;){var d=31-Be(r),m=1<<d;l[d]=-1,r&=~m}s!==0&&Ks(e,s,t)}function vr(){return(st&6)===0?(si(0),!1):!0}function Yc(){if(Ie!==null){if(nt===0)var e=Ie.return;else e=Ie,Ja=sn=null,rc(e),Kn=null,Bl=0,e=Ie;for(;e!==null;)Nf(e.alternate,e),e=e.return;Ie=null}}function ll(e,t){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,H0(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),cs=0,Yc(),ut=e,Ie=s=Za(e.current,null),Fe=t,nt=0,oa=null,Es=!1,al=Se(e,t),Bc=!1,sl=ca=Ic=fn=Ms=jt=0,Wt=ti=null,Hc=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var r=31-Be(l),d=1<<r;t|=e[r],l&=~d}return os=t,Hi(),s}function Qf(e,t){Oe=null,_.H=Ql,t===Xn||t===Ki?(t=om(),nt=3):t===Ko?(t=om(),nt=4):nt=t===Nc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,oa=t,Ie===null&&(jt=1,cr(e,ga(t,e.current)))}function Xf(){var e=ia.current;return e===null?!0:(Fe&4194048)===Fe?va===null:(Fe&62914560)===Fe||(Fe&536870912)!==0?e===va:!1}function Kf(){var e=_.H;return _.H=Ql,e===null?Ql:e}function Zf(){var e=_.A;return _.A=y0,e}function jr(){jt=4,Es||(Fe&4194048)!==Fe&&ia.current!==null||(al=!0),(Ms&134217727)===0&&(fn&134217727)===0||ut===null||Os(ut,Fe,ca,!1)}function Vc(e,t,s){var l=st;st|=2;var r=Kf(),d=Zf();(ut!==e||Fe!==t)&&(yr=null,ll(e,t)),t=!1;var m=jt;e:do try{if(nt!==0&&Ie!==null){var b=Ie,k=oa;switch(nt){case 8:Yc(),m=6;break e;case 3:case 2:case 9:case 6:ia.current===null&&(t=!0);var V=nt;if(nt=0,oa=null,il(e,b,k,V),s&&al){m=0;break e}break;default:V=nt,nt=0,oa=null,il(e,b,k,V)}}_0(),m=jt;break}catch(ee){Qf(e,ee)}while(!0);return t&&e.shellSuspendCounter++,Ja=sn=null,st=l,_.H=r,_.A=d,Ie===null&&(ut=null,Fe=0,Hi()),m}function _0(){for(;Ie!==null;)Pf(Ie)}function N0(e,t){var s=st;st|=2;var l=Kf(),r=Zf();ut!==e||Fe!==t?(yr=null,br=Qe()+500,ll(e,t)):al=Se(e,t);e:do try{if(nt!==0&&Ie!==null){t=Ie;var d=oa;t:switch(nt){case 1:nt=0,oa=null,il(e,t,d,1);break;case 2:case 9:if(im(d)){nt=0,oa=null,Jf(t);break}t=function(){nt!==2&&nt!==9||ut!==e||(nt=7),Ia(e)},d.then(t,t);break e;case 3:nt=7;break e;case 4:nt=5;break e;case 7:im(d)?(nt=0,oa=null,Jf(t)):(nt=0,oa=null,il(e,t,d,7));break;case 5:var m=null;switch(Ie.tag){case 26:m=Ie.memoizedState;case 5:case 27:var b=Ie;if(m?Lp(m):b.stateNode.complete){nt=0,oa=null;var k=b.sibling;if(k!==null)Ie=k;else{var V=b.return;V!==null?(Ie=V,_r(V)):Ie=null}break t}}nt=0,oa=null,il(e,t,d,5);break;case 6:nt=0,oa=null,il(e,t,d,6);break;case 8:Yc(),jt=6;break e;default:throw Error(c(462))}}w0();break}catch(ee){Qf(e,ee)}while(!0);return Ja=sn=null,_.H=l,_.A=r,st=s,Ie!==null?0:(ut=null,Fe=0,Hi(),jt)}function w0(){for(;Ie!==null&&!St();)Pf(Ie)}function Pf(e){var t=jf(e.alternate,e,os);e.memoizedProps=e.pendingProps,t===null?_r(e):Ie=t}function Jf(e){var t=e,s=t.alternate;switch(t.tag){case 15:case 0:t=hf(s,t,t.pendingProps,t.type,void 0,Fe);break;case 11:t=hf(s,t,t.pendingProps,t.type.render,t.ref,Fe);break;case 5:rc(t);default:Nf(s,t),t=Ie=Ku(t,os),t=jf(s,t,os)}e.memoizedProps=e.pendingProps,t===null?_r(e):Ie=t}function il(e,t,s,l){Ja=sn=null,rc(t),Kn=null,Bl=0;var r=t.return;try{if(m0(e,r,t,s,Fe)){jt=1,cr(e,ga(s,e.current)),Ie=null;return}}catch(d){if(r!==null)throw Ie=r,d;jt=1,cr(e,ga(s,e.current)),Ie=null;return}t.flags&32768?(Ze||l===1?e=!0:al||(Fe&536870912)!==0?e=!1:(Es=e=!0,(l===2||l===9||l===3||l===6)&&(l=ia.current,l!==null&&l.tag===13&&(l.flags|=16384))),Wf(t,e)):_r(t)}function _r(e){var t=e;do{if((t.flags&32768)!==0){Wf(t,Es);return}e=t.return;var s=h0(t.alternate,t,os);if(s!==null){Ie=s;return}if(t=t.sibling,t!==null){Ie=t;return}Ie=t=e}while(t!==null);jt===0&&(jt=5)}function Wf(e,t){do{var s=g0(e.alternate,e);if(s!==null){s.flags&=32767,Ie=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!t&&(e=e.sibling,e!==null)){Ie=e;return}Ie=e=s}while(e!==null);jt=6,Ie=null}function ep(e,t,s,l,r,d,m,b,k){e.cancelPendingCommit=null;do Nr();while(Ot!==0);if((st&6)!==0)throw Error(c(327));if(t!==null){if(t===e.current)throw Error(c(177));if(d=t.lanes|t.childLanes,d|=Do,ma(e,s,d,m,b,k),e===ut&&(Ie=ut=null,Fe=0),nl=t,zs=e,cs=s,$c=d,Gc=r,Gf=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,T0(sa,function(){return lp(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=_.T,_.T=null,r=T.p,T.p=2,m=st,st|=4;try{x0(e,t,s)}finally{st=m,T.p=r,_.T=l}}Ot=1,tp(),ap(),sp()}}function tp(){if(Ot===1){Ot=0;var e=zs,t=nl,s=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||s){s=_.T,_.T=null;var l=T.p;T.p=2;var r=st;st|=4;try{Rf(t,e);var d=nd,m=Iu(e.containerInfo),b=d.focusedElem,k=d.selectionRange;if(m!==b&&b&&b.ownerDocument&&Bu(b.ownerDocument.documentElement,b)){if(k!==null&&Eo(b)){var V=k.start,ee=k.end;if(ee===void 0&&(ee=V),"selectionStart"in b)b.selectionStart=V,b.selectionEnd=Math.min(ee,b.value.length);else{var le=b.ownerDocument||document,X=le&&le.defaultView||window;if(X.getSelection){var J=X.getSelection(),ve=b.textContent.length,Te=Math.min(k.start,ve),dt=k.end===void 0?Te:Math.min(k.end,ve);!J.extend&&Te>dt&&(m=dt,dt=Te,Te=m);var R=qu(b,Te),z=qu(b,dt);if(R&&z&&(J.rangeCount!==1||J.anchorNode!==R.node||J.anchorOffset!==R.offset||J.focusNode!==z.node||J.focusOffset!==z.offset)){var F=le.createRange();F.setStart(R.node,R.offset),J.removeAllRanges(),Te>dt?(J.addRange(F),J.extend(z.node,z.offset)):(F.setEnd(z.node,z.offset),J.addRange(F))}}}}for(le=[],J=b;J=J.parentNode;)J.nodeType===1&&le.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<le.length;b++){var ae=le[b];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Rr=!!sd,nd=sd=null}finally{st=r,T.p=l,_.T=s}}e.current=t,Ot=2}}function ap(){if(Ot===2){Ot=0;var e=zs,t=nl,s=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||s){s=_.T,_.T=null;var l=T.p;T.p=2;var r=st;st|=4;try{Mf(e,t.alternate,t)}finally{st=r,T.p=l,_.T=s}}Ot=3}}function sp(){if(Ot===4||Ot===3){Ot=0,aa();var e=zs,t=nl,s=cs,l=Gf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Ot=5:(Ot=0,nl=zs=null,np(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(As=null),Bt(s),t=t.stateNode,Xe&&typeof Xe.onCommitFiberRoot=="function")try{Xe.onCommitFiberRoot(Ge,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=_.T,r=T.p,T.p=2,_.T=null;try{for(var d=e.onRecoverableError,m=0;m<l.length;m++){var b=l[m];d(b.value,{componentStack:b.stack})}}finally{_.T=t,T.p=r}}(cs&3)!==0&&Nr(),Ia(e),r=e.pendingLanes,(s&261930)!==0&&(r&42)!==0?e===Fc?ai++:(ai=0,Fc=e):ai=0,si(0)}}function np(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Ll(t)))}function Nr(){return tp(),ap(),sp(),lp()}function lp(){if(Ot!==5)return!1;var e=zs,t=$c;$c=0;var s=Bt(cs),l=_.T,r=T.p;try{T.p=32>s?32:s,_.T=null,s=Gc,Gc=null;var d=zs,m=cs;if(Ot=0,nl=zs=null,cs=0,(st&6)!==0)throw Error(c(331));var b=st;if(st|=4,If(d.current),Lf(d,d.current,m,s),st=b,si(0,!1),Xe&&typeof Xe.onPostCommitFiberRoot=="function")try{Xe.onPostCommitFiberRoot(Ge,d)}catch{}return!0}finally{T.p=r,_.T=l,np(e,t)}}function ip(e,t,s){t=ga(s,t),t=_c(e.stateNode,t,2),e=Ss(e,t,2),e!==null&&(Ct(e,2),Ia(e))}function lt(e,t,s){if(e.tag===3)ip(e,e,s);else for(;t!==null;){if(t.tag===3){ip(t,e,s);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(As===null||!As.has(l))){e=ga(s,e),s=rf(2),l=Ss(t,s,2),l!==null&&(of(s,l,t,e),Ct(l,2),Ia(l));break}}t=t.return}}function Qc(e,t,s){var l=e.pingCache;if(l===null){l=e.pingCache=new v0;var r=new Set;l.set(t,r)}else r=l.get(t),r===void 0&&(r=new Set,l.set(t,r));r.has(s)||(Bc=!0,r.add(s),e=S0.bind(null,e,t,s),t.then(e,e))}function S0(e,t,s){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,ut===e&&(Fe&s)===s&&(jt===4||jt===3&&(Fe&62914560)===Fe&&300>Qe()-xr?(st&2)===0&&ll(e,0):Ic|=s,sl===Fe&&(sl=0)),Ia(e)}function rp(e,t){t===0&&(t=We()),e=en(e,t),e!==null&&(Ct(e,t),Ia(e))}function C0(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),rp(e,s)}function k0(e,t){var s=0;switch(e.tag){case 31:case 13:var l=e.stateNode,r=e.memoizedState;r!==null&&(s=r.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(c(314))}l!==null&&l.delete(t),rp(e,s)}function T0(e,t){return Je(e,t)}var wr=null,rl=null,Xc=!1,Sr=!1,Kc=!1,Ds=0;function Ia(e){e!==rl&&e.next===null&&(rl===null?wr=rl=e:rl=rl.next=e),Sr=!0,Xc||(Xc=!0,M0())}function si(e,t){if(!Kc&&Sr){Kc=!0;do for(var s=!1,l=wr;l!==null;){if(e!==0){var r=l.pendingLanes;if(r===0)var d=0;else{var m=l.suspendedLanes,b=l.pingedLanes;d=(1<<31-Be(42|e)+1)-1,d&=r&~(m&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(s=!0,up(l,d))}else d=Fe,d=ie(l,l===ut?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Se(l,d)||(s=!0,up(l,d));l=l.next}while(s);Kc=!1}}function E0(){op()}function op(){Sr=Xc=!1;var e=0;Ds!==0&&I0()&&(e=Ds);for(var t=Qe(),s=null,l=wr;l!==null;){var r=l.next,d=cp(l,t);d===0?(l.next=null,s===null?wr=r:s.next=r,r===null&&(rl=s)):(s=l,(e!==0||(d&3)!==0)&&(Sr=!0)),l=r}Ot!==0&&Ot!==5||si(e),Ds!==0&&(Ds=0)}function cp(e,t){for(var s=e.suspendedLanes,l=e.pingedLanes,r=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var m=31-Be(d),b=1<<m,k=r[m];k===-1?((b&s)===0||(b&l)!==0)&&(r[m]=Ke(b,t)):k<=t&&(e.expiredLanes|=b),d&=~b}if(t=ut,s=Fe,s=ie(e,e===t?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,s===0||e===t&&(nt===2||nt===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&it(l),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||Se(e,s)){if(t=s&-s,t===e.callbackPriority)return t;switch(l!==null&&it(l),Bt(s)){case 2:case 8:s=ht;break;case 32:s=sa;break;case 268435456:s=pe;break;default:s=sa}return l=dp.bind(null,e),s=Je(s,l),e.callbackPriority=t,e.callbackNode=s,t}return l!==null&&l!==null&&it(l),e.callbackPriority=2,e.callbackNode=null,2}function dp(e,t){if(Ot!==0&&Ot!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(Nr()&&e.callbackNode!==s)return null;var l=Fe;return l=ie(e,e===ut?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Yf(e,l,t),cp(e,Qe()),e.callbackNode!=null&&e.callbackNode===s?dp.bind(null,e):null)}function up(e,t){if(Nr())return null;Yf(e,t,!0)}function M0(){$0(function(){(st&6)!==0?Je(Ca,E0):op()})}function Zc(){if(Ds===0){var e=Vn;e===0&&(e=ka,ka<<=1,(ka&261888)===0&&(ka=256)),Ds=e}return Ds}function mp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Oi(""+e)}function fp(e,t){var s=t.ownerDocument.createElement("input");return s.name=t.name,s.value=t.value,e.id&&s.setAttribute("form",e.id),t.parentNode.insertBefore(s,t),e=new FormData(e),s.parentNode.removeChild(s),e}function A0(e,t,s,l,r){if(t==="submit"&&s&&s.stateNode===r){var d=mp((r[Xt]||null).action),m=l.submitter;m&&(t=(t=m[Xt]||null)?mp(t.formAction):m.getAttribute("formAction"),t!==null&&(d=t,m=null));var b=new Li("action","action",null,l,r);e.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ds!==0){var k=m?fp(r,m):new FormData(r);gc(s,{pending:!0,data:k,method:r.method,action:d},null,k)}}else typeof d=="function"&&(b.preventDefault(),k=m?fp(r,m):new FormData(r),gc(s,{pending:!0,data:k,method:r.method,action:d},d,k))},currentTarget:r}]})}}for(var Pc=0;Pc<Oo.length;Pc++){var Jc=Oo[Pc],z0=Jc.toLowerCase(),O0=Jc[0].toUpperCase()+Jc.slice(1);Ta(z0,"on"+O0)}Ta(Gu,"onAnimationEnd"),Ta(Fu,"onAnimationIteration"),Ta(Yu,"onAnimationStart"),Ta("dblclick","onDoubleClick"),Ta("focusin","onFocus"),Ta("focusout","onBlur"),Ta(Kx,"onTransitionRun"),Ta(Zx,"onTransitionStart"),Ta(Px,"onTransitionCancel"),Ta(Vu,"onTransitionEnd"),zn("onMouseEnter",["mouseout","mouseover"]),zn("onMouseLeave",["mouseout","mouseover"]),zn("onPointerEnter",["pointerout","pointerover"]),zn("onPointerLeave",["pointerout","pointerover"]),Zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ni="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),D0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ni));function pp(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var l=e[s],r=l.event;l=l.listeners;e:{var d=void 0;if(t)for(var m=l.length-1;0<=m;m--){var b=l[m],k=b.instance,V=b.currentTarget;if(b=b.listener,k!==d&&r.isPropagationStopped())break e;d=b,r.currentTarget=V;try{d(r)}catch(ee){Ii(ee)}r.currentTarget=null,d=k}else for(m=0;m<l.length;m++){if(b=l[m],k=b.instance,V=b.currentTarget,b=b.listener,k!==d&&r.isPropagationStopped())break e;d=b,r.currentTarget=V;try{d(r)}catch(ee){Ii(ee)}r.currentTarget=null,d=k}}}}function He(e,t){var s=t[uo];s===void 0&&(s=t[uo]=new Set);var l=e+"__bubble";s.has(l)||(hp(t,e,2,!1),s.add(l))}function Wc(e,t,s){var l=0;t&&(l|=4),hp(s,e,l,t)}var Cr="_reactListening"+Math.random().toString(36).slice(2);function ed(e){if(!e[Cr]){e[Cr]=!0,ru.forEach(function(s){s!=="selectionchange"&&(D0.has(s)||Wc(s,!1,e),Wc(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Cr]||(t[Cr]=!0,Wc("selectionchange",!1,t))}}function hp(e,t,s,l){switch(Fp(t)){case 2:var r=ob;break;case 8:r=cb;break;default:r=hd}s=r.bind(null,t,s,e),r=void 0,!vo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),l?r!==void 0?e.addEventListener(t,s,{capture:!0,passive:r}):e.addEventListener(t,s,!0):r!==void 0?e.addEventListener(t,s,{passive:r}):e.addEventListener(t,s,!1)}function td(e,t,s,l,r){var d=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var m=l.tag;if(m===3||m===4){var b=l.stateNode.containerInfo;if(b===r)break;if(m===4)for(m=l.return;m!==null;){var k=m.tag;if((k===3||k===4)&&m.stateNode.containerInfo===r)return;m=m.return}for(;b!==null;){if(m=En(b),m===null)return;if(k=m.tag,k===5||k===6||k===26||k===27){l=d=m;continue e}b=b.parentNode}}l=l.return}yu(function(){var V=d,ee=bo(s),le=[];e:{var X=Qu.get(e);if(X!==void 0){var J=Li,ve=e;switch(e){case"keypress":if(Ri(s)===0)break e;case"keydown":case"keyup":J=kx;break;case"focusin":ve="focus",J=wo;break;case"focusout":ve="blur",J=wo;break;case"beforeblur":case"afterblur":J=wo;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=_u;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=hx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=Mx;break;case Gu:case Fu:case Yu:J=bx;break;case Vu:J=zx;break;case"scroll":case"scrollend":J=fx;break;case"wheel":J=Dx;break;case"copy":case"cut":case"paste":J=vx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=wu;break;case"toggle":case"beforetoggle":J=Ux}var Te=(t&4)!==0,dt=!Te&&(e==="scroll"||e==="scrollend"),R=Te?X!==null?X+"Capture":null:X;Te=[];for(var z=V,F;z!==null;){var ae=z;if(F=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||F===null||R===null||(ae=Cl(z,R),ae!=null&&Te.push(li(z,ae,F))),dt)break;z=z.return}0<Te.length&&(X=new J(X,ve,null,s,ee),le.push({event:X,listeners:Te}))}}if((t&7)===0){e:{if(X=e==="mouseover"||e==="pointerover",J=e==="mouseout"||e==="pointerout",X&&s!==xo&&(ve=s.relatedTarget||s.fromElement)&&(En(ve)||ve[Tn]))break e;if((J||X)&&(X=ee.window===ee?ee:(X=ee.ownerDocument)?X.defaultView||X.parentWindow:window,J?(ve=s.relatedTarget||s.toElement,J=V,ve=ve?En(ve):null,ve!==null&&(dt=f(ve),Te=ve.tag,ve!==dt||Te!==5&&Te!==27&&Te!==6)&&(ve=null)):(J=null,ve=V),J!==ve)){if(Te=_u,ae="onMouseLeave",R="onMouseEnter",z="mouse",(e==="pointerout"||e==="pointerover")&&(Te=wu,ae="onPointerLeave",R="onPointerEnter",z="pointer"),dt=J==null?X:Sl(J),F=ve==null?X:Sl(ve),X=new Te(ae,z+"leave",J,s,ee),X.target=dt,X.relatedTarget=F,ae=null,En(ee)===V&&(Te=new Te(R,z+"enter",ve,s,ee),Te.target=F,Te.relatedTarget=dt,ae=Te),dt=ae,J&&ve)t:{for(Te=R0,R=J,z=ve,F=0,ae=R;ae;ae=Te(ae))F++;ae=0;for(var Ce=z;Ce;Ce=Te(Ce))ae++;for(;0<F-ae;)R=Te(R),F--;for(;0<ae-F;)z=Te(z),ae--;for(;F--;){if(R===z||z!==null&&R===z.alternate){Te=R;break t}R=Te(R),z=Te(z)}Te=null}else Te=null;J!==null&&gp(le,X,J,Te,!1),ve!==null&&dt!==null&&gp(le,dt,ve,Te,!0)}}e:{if(X=V?Sl(V):window,J=X.nodeName&&X.nodeName.toLowerCase(),J==="select"||J==="input"&&X.type==="file")var tt=zu;else if(Mu(X))if(Ou)tt=Vx;else{tt=Fx;var _e=Gx}else J=X.nodeName,!J||J.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?V&&go(V.elementType)&&(tt=zu):tt=Yx;if(tt&&(tt=tt(e,V))){Au(le,tt,s,ee);break e}_e&&_e(e,X,V),e==="focusout"&&V&&X.type==="number"&&V.memoizedProps.value!=null&&ho(X,"number",X.value)}switch(_e=V?Sl(V):window,e){case"focusin":(Mu(_e)||_e.contentEditable==="true")&&(qn=_e,Mo=V,Dl=null);break;case"focusout":Dl=Mo=qn=null;break;case"mousedown":Ao=!0;break;case"contextmenu":case"mouseup":case"dragend":Ao=!1,Hu(le,s,ee);break;case"selectionchange":if(Xx)break;case"keydown":case"keyup":Hu(le,s,ee)}var Re;if(Co)e:{switch(e){case"compositionstart":var Ye="onCompositionStart";break e;case"compositionend":Ye="onCompositionEnd";break e;case"compositionupdate":Ye="onCompositionUpdate";break e}Ye=void 0}else Ln?Tu(e,s)&&(Ye="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Ye="onCompositionStart");Ye&&(Su&&s.locale!=="ko"&&(Ln||Ye!=="onCompositionStart"?Ye==="onCompositionEnd"&&Ln&&(Re=vu()):(bs=ee,jo="value"in bs?bs.value:bs.textContent,Ln=!0)),_e=kr(V,Ye),0<_e.length&&(Ye=new Nu(Ye,e,null,s,ee),le.push({event:Ye,listeners:_e}),Re?Ye.data=Re:(Re=Eu(s),Re!==null&&(Ye.data=Re)))),(Re=qx?Bx(e,s):Ix(e,s))&&(Ye=kr(V,"onBeforeInput"),0<Ye.length&&(_e=new Nu("onBeforeInput","beforeinput",null,s,ee),le.push({event:_e,listeners:Ye}),_e.data=Re)),A0(le,e,V,s,ee)}pp(le,t)})}function li(e,t,s){return{instance:e,listener:t,currentTarget:s}}function kr(e,t){for(var s=t+"Capture",l=[];e!==null;){var r=e,d=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||d===null||(r=Cl(e,s),r!=null&&l.unshift(li(e,r,d)),r=Cl(e,t),r!=null&&l.push(li(e,r,d))),e.tag===3)return l;e=e.return}return[]}function R0(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function gp(e,t,s,l,r){for(var d=t._reactName,m=[];s!==null&&s!==l;){var b=s,k=b.alternate,V=b.stateNode;if(b=b.tag,k!==null&&k===l)break;b!==5&&b!==26&&b!==27||V===null||(k=V,r?(V=Cl(s,d),V!=null&&m.unshift(li(s,V,k))):r||(V=Cl(s,d),V!=null&&m.push(li(s,V,k)))),s=s.return}m.length!==0&&e.push({event:t,listeners:m})}var U0=/\r\n?/g,L0=/ |�/g;function xp(e){return(typeof e=="string"?e:""+e).replace(U0,`
`).replace(L0,"")}function bp(e,t){return t=xp(t),xp(e)===t}function ct(e,t,s,l,r,d){switch(s){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||Dn(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&Dn(e,""+l);break;case"className":Ai(e,"class",l);break;case"tabIndex":Ai(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Ai(e,s,l);break;case"style":xu(e,l,d);break;case"data":if(t!=="object"){Ai(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||s!=="href")){e.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(s);break}l=Oi(""+l),e.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(s==="formAction"?(t!=="input"&&ct(e,t,"name",r.name,r,null),ct(e,t,"formEncType",r.formEncType,r,null),ct(e,t,"formMethod",r.formMethod,r,null),ct(e,t,"formTarget",r.formTarget,r,null)):(ct(e,t,"encType",r.encType,r,null),ct(e,t,"method",r.method,r,null),ct(e,t,"target",r.target,r,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(s);break}l=Oi(""+l),e.setAttribute(s,l);break;case"onClick":l!=null&&(e.onclick=Xa);break;case"onScroll":l!=null&&He("scroll",e);break;case"onScrollEnd":l!=null&&He("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(c(61));if(s=l.__html,s!=null){if(r.children!=null)throw Error(c(60));e.innerHTML=s}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}s=Oi(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,""+l):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":l===!0?e.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,l):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(s,l):e.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(s):e.setAttribute(s,l);break;case"popover":He("beforetoggle",e),He("toggle",e),Mi(e,"popover",l);break;case"xlinkActuate":Qa(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Qa(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Qa(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Qa(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Qa(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Qa(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Qa(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Qa(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Qa(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Mi(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=ux.get(s)||s,Mi(e,s,l))}}function ad(e,t,s,l,r,d){switch(s){case"style":xu(e,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(c(61));if(s=l.__html,s!=null){if(r.children!=null)throw Error(c(60));e.innerHTML=s}}break;case"children":typeof l=="string"?Dn(e,l):(typeof l=="number"||typeof l=="bigint")&&Dn(e,""+l);break;case"onScroll":l!=null&&He("scroll",e);break;case"onScrollEnd":l!=null&&He("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Xa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ou.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(r=s.endsWith("Capture"),t=s.slice(2,r?s.length-7:void 0),d=e[Xt]||null,d=d!=null?d[s]:null,typeof d=="function"&&e.removeEventListener(t,d,r),typeof l=="function")){typeof d!="function"&&d!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(t,l,r);break e}s in e?e[s]=l:l===!0?e.setAttribute(s,""):Mi(e,s,l)}}}function Ft(e,t,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",e),He("load",e);var l=!1,r=!1,d;for(d in s)if(s.hasOwnProperty(d)){var m=s[d];if(m!=null)switch(d){case"src":l=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:ct(e,t,d,m,s,null)}}r&&ct(e,t,"srcSet",s.srcSet,s,null),l&&ct(e,t,"src",s.src,s,null);return;case"input":He("invalid",e);var b=d=m=r=null,k=null,V=null;for(l in s)if(s.hasOwnProperty(l)){var ee=s[l];if(ee!=null)switch(l){case"name":r=ee;break;case"type":m=ee;break;case"checked":k=ee;break;case"defaultChecked":V=ee;break;case"value":d=ee;break;case"defaultValue":b=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(c(137,t));break;default:ct(e,t,l,ee,s,null)}}fu(e,d,b,k,V,m,r,!1);return;case"select":He("invalid",e),l=m=d=null;for(r in s)if(s.hasOwnProperty(r)&&(b=s[r],b!=null))switch(r){case"value":d=b;break;case"defaultValue":m=b;break;case"multiple":l=b;default:ct(e,t,r,b,s,null)}t=d,s=m,e.multiple=!!l,t!=null?On(e,!!l,t,!1):s!=null&&On(e,!!l,s,!0);return;case"textarea":He("invalid",e),d=r=l=null;for(m in s)if(s.hasOwnProperty(m)&&(b=s[m],b!=null))switch(m){case"value":l=b;break;case"defaultValue":r=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(c(91));break;default:ct(e,t,m,b,s,null)}hu(e,l,r,d);return;case"option":for(k in s)if(s.hasOwnProperty(k)&&(l=s[k],l!=null))switch(k){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ct(e,t,k,l,s,null)}return;case"dialog":He("beforetoggle",e),He("toggle",e),He("cancel",e),He("close",e);break;case"iframe":case"object":He("load",e);break;case"video":case"audio":for(l=0;l<ni.length;l++)He(ni[l],e);break;case"image":He("error",e),He("load",e);break;case"details":He("toggle",e);break;case"embed":case"source":case"link":He("error",e),He("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(V in s)if(s.hasOwnProperty(V)&&(l=s[V],l!=null))switch(V){case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:ct(e,t,V,l,s,null)}return;default:if(go(t)){for(ee in s)s.hasOwnProperty(ee)&&(l=s[ee],l!==void 0&&ad(e,t,ee,l,s,void 0));return}}for(b in s)s.hasOwnProperty(b)&&(l=s[b],l!=null&&ct(e,t,b,l,s,null))}function q0(e,t,s,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,d=null,m=null,b=null,k=null,V=null,ee=null;for(J in s){var le=s[J];if(s.hasOwnProperty(J)&&le!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":k=le;default:l.hasOwnProperty(J)||ct(e,t,J,null,l,le)}}for(var X in l){var J=l[X];if(le=s[X],l.hasOwnProperty(X)&&(J!=null||le!=null))switch(X){case"type":d=J;break;case"name":r=J;break;case"checked":V=J;break;case"defaultChecked":ee=J;break;case"value":m=J;break;case"defaultValue":b=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(c(137,t));break;default:J!==le&&ct(e,t,X,J,l,le)}}po(e,m,b,k,V,ee,d,r);return;case"select":J=m=b=X=null;for(d in s)if(k=s[d],s.hasOwnProperty(d)&&k!=null)switch(d){case"value":break;case"multiple":J=k;default:l.hasOwnProperty(d)||ct(e,t,d,null,l,k)}for(r in l)if(d=l[r],k=s[r],l.hasOwnProperty(r)&&(d!=null||k!=null))switch(r){case"value":X=d;break;case"defaultValue":b=d;break;case"multiple":m=d;default:d!==k&&ct(e,t,r,d,l,k)}t=b,s=m,l=J,X!=null?On(e,!!s,X,!1):!!l!=!!s&&(t!=null?On(e,!!s,t,!0):On(e,!!s,s?[]:"",!1));return;case"textarea":J=X=null;for(b in s)if(r=s[b],s.hasOwnProperty(b)&&r!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:ct(e,t,b,null,l,r)}for(m in l)if(r=l[m],d=s[m],l.hasOwnProperty(m)&&(r!=null||d!=null))switch(m){case"value":X=r;break;case"defaultValue":J=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(c(91));break;default:r!==d&&ct(e,t,m,r,l,d)}pu(e,X,J);return;case"option":for(var ve in s)if(X=s[ve],s.hasOwnProperty(ve)&&X!=null&&!l.hasOwnProperty(ve))switch(ve){case"selected":e.selected=!1;break;default:ct(e,t,ve,null,l,X)}for(k in l)if(X=l[k],J=s[k],l.hasOwnProperty(k)&&X!==J&&(X!=null||J!=null))switch(k){case"selected":e.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:ct(e,t,k,X,l,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in s)X=s[Te],s.hasOwnProperty(Te)&&X!=null&&!l.hasOwnProperty(Te)&&ct(e,t,Te,null,l,X);for(V in l)if(X=l[V],J=s[V],l.hasOwnProperty(V)&&X!==J&&(X!=null||J!=null))switch(V){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(c(137,t));break;default:ct(e,t,V,X,l,J)}return;default:if(go(t)){for(var dt in s)X=s[dt],s.hasOwnProperty(dt)&&X!==void 0&&!l.hasOwnProperty(dt)&&ad(e,t,dt,void 0,l,X);for(ee in l)X=l[ee],J=s[ee],!l.hasOwnProperty(ee)||X===J||X===void 0&&J===void 0||ad(e,t,ee,X,l,J);return}}for(var R in s)X=s[R],s.hasOwnProperty(R)&&X!=null&&!l.hasOwnProperty(R)&&ct(e,t,R,null,l,X);for(le in l)X=l[le],J=s[le],!l.hasOwnProperty(le)||X===J||X==null&&J==null||ct(e,t,le,X,l,J)}function yp(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function B0(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,s=performance.getEntriesByType("resource"),l=0;l<s.length;l++){var r=s[l],d=r.transferSize,m=r.initiatorType,b=r.duration;if(d&&b&&yp(m)){for(m=0,b=r.responseEnd,l+=1;l<s.length;l++){var k=s[l],V=k.startTime;if(V>b)break;var ee=k.transferSize,le=k.initiatorType;ee&&yp(le)&&(k=k.responseEnd,m+=ee*(k<b?1:(b-V)/(k-V)))}if(--l,t+=8*(d+m)/(r.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var sd=null,nd=null;function Tr(e){return e.nodeType===9?e:e.ownerDocument}function vp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jp(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function ld(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var id=null;function I0(){var e=window.event;return e&&e.type==="popstate"?e===id?!1:(id=e,!0):(id=null,!1)}var _p=typeof setTimeout=="function"?setTimeout:void 0,H0=typeof clearTimeout=="function"?clearTimeout:void 0,Np=typeof Promise=="function"?Promise:void 0,$0=typeof queueMicrotask=="function"?queueMicrotask:typeof Np<"u"?function(e){return Np.resolve(null).then(e).catch(G0)}:_p;function G0(e){setTimeout(function(){throw e})}function Rs(e){return e==="head"}function wp(e,t){var s=t,l=0;do{var r=s.nextSibling;if(e.removeChild(s),r&&r.nodeType===8)if(s=r.data,s==="/$"||s==="/&"){if(l===0){e.removeChild(r),ul(t);return}l--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")l++;else if(s==="html")ii(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,ii(s);for(var d=s.firstChild;d;){var m=d.nextSibling,b=d.nodeName;d[wl]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&d.rel.toLowerCase()==="stylesheet"||s.removeChild(d),d=m}}else s==="body"&&ii(e.ownerDocument.body);s=r}while(s);ul(t)}function Sp(e,t){var s=e;e=0;do{var l=s.nextSibling;if(s.nodeType===1?t?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(t?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),l&&l.nodeType===8)if(s=l.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=l}while(s)}function rd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var s=t;switch(t=t.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":rd(s),mo(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function F0(e,t,s,l){for(;e.nodeType===1;){var r=s;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[wl])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var d=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=ja(e.nextSibling),e===null)break}return null}function Y0(e,t,s){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=ja(e.nextSibling),e===null))return null;return e}function Cp(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=ja(e.nextSibling),e===null))return null;return e}function od(e){return e.data==="$?"||e.data==="$~"}function cd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function V0(e,t){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||s.readyState!=="loading")t();else{var l=function(){t(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function ja(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var dd=null;function kp(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(t===0)return ja(e.nextSibling);t--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||t++}e=e.nextSibling}return null}function Tp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(t===0)return e;t--}else s!=="/$"&&s!=="/&"||t++}e=e.previousSibling}return null}function Ep(e,t,s){switch(t=Tr(s),e){case"html":if(e=t.documentElement,!e)throw Error(c(452));return e;case"head":if(e=t.head,!e)throw Error(c(453));return e;case"body":if(e=t.body,!e)throw Error(c(454));return e;default:throw Error(c(451))}}function ii(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);mo(e)}var _a=new Map,Mp=new Set;function Er(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ds=T.d;T.d={f:Q0,r:X0,D:K0,C:Z0,L:P0,m:J0,X:eb,S:W0,M:tb};function Q0(){var e=ds.f(),t=vr();return e||t}function X0(e){var t=Mn(e);t!==null&&t.tag===5&&t.type==="form"?Vm(t):ds.r(e)}var ol=typeof document>"u"?null:document;function Ap(e,t,s){var l=ol;if(l&&typeof t=="string"&&t){var r=pa(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof s=="string"&&(r+='[crossorigin="'+s+'"]'),Mp.has(r)||(Mp.add(r),e={rel:e,crossOrigin:s,href:t},l.querySelector(r)===null&&(t=l.createElement("link"),Ft(t,"link",e),Rt(t),l.head.appendChild(t)))}}function K0(e){ds.D(e),Ap("dns-prefetch",e,null)}function Z0(e,t){ds.C(e,t),Ap("preconnect",e,t)}function P0(e,t,s){ds.L(e,t,s);var l=ol;if(l&&e&&t){var r='link[rel="preload"][as="'+pa(t)+'"]';t==="image"&&s&&s.imageSrcSet?(r+='[imagesrcset="'+pa(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(r+='[imagesizes="'+pa(s.imageSizes)+'"]')):r+='[href="'+pa(e)+'"]';var d=r;switch(t){case"style":d=cl(e);break;case"script":d=dl(e)}_a.has(d)||(e=N({rel:"preload",href:t==="image"&&s&&s.imageSrcSet?void 0:e,as:t},s),_a.set(d,e),l.querySelector(r)!==null||t==="style"&&l.querySelector(ri(d))||t==="script"&&l.querySelector(oi(d))||(t=l.createElement("link"),Ft(t,"link",e),Rt(t),l.head.appendChild(t)))}}function J0(e,t){ds.m(e,t);var s=ol;if(s&&e){var l=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+pa(l)+'"][href="'+pa(e)+'"]',d=r;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=dl(e)}if(!_a.has(d)&&(e=N({rel:"modulepreload",href:e},t),_a.set(d,e),s.querySelector(r)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(oi(d)))return}l=s.createElement("link"),Ft(l,"link",e),Rt(l),s.head.appendChild(l)}}}function W0(e,t,s){ds.S(e,t,s);var l=ol;if(l&&e){var r=An(l).hoistableStyles,d=cl(e);t=t||"default";var m=r.get(d);if(!m){var b={loading:0,preload:null};if(m=l.querySelector(ri(d)))b.loading=5;else{e=N({rel:"stylesheet",href:e,"data-precedence":t},s),(s=_a.get(d))&&ud(e,s);var k=m=l.createElement("link");Rt(k),Ft(k,"link",e),k._p=new Promise(function(V,ee){k.onload=V,k.onerror=ee}),k.addEventListener("load",function(){b.loading|=1}),k.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Mr(m,t,l)}m={type:"stylesheet",instance:m,count:1,state:b},r.set(d,m)}}}function eb(e,t){ds.X(e,t);var s=ol;if(s&&e){var l=An(s).hoistableScripts,r=dl(e),d=l.get(r);d||(d=s.querySelector(oi(r)),d||(e=N({src:e,async:!0},t),(t=_a.get(r))&&md(e,t),d=s.createElement("script"),Rt(d),Ft(d,"link",e),s.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(r,d))}}function tb(e,t){ds.M(e,t);var s=ol;if(s&&e){var l=An(s).hoistableScripts,r=dl(e),d=l.get(r);d||(d=s.querySelector(oi(r)),d||(e=N({src:e,async:!0,type:"module"},t),(t=_a.get(r))&&md(e,t),d=s.createElement("script"),Rt(d),Ft(d,"link",e),s.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(r,d))}}function zp(e,t,s,l){var r=(r=be.current)?Er(r):null;if(!r)throw Error(c(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(t=cl(s.href),s=An(r).hoistableStyles,l=s.get(t),l||(l={type:"style",instance:null,count:0,state:null},s.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=cl(s.href);var d=An(r).hoistableStyles,m=d.get(e);if(m||(r=r.ownerDocument||r,m={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,m),(d=r.querySelector(ri(e)))&&!d._p&&(m.instance=d,m.state.loading=5),_a.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},_a.set(e,s),d||ab(r,e,s,m.state))),t&&l===null)throw Error(c(528,""));return m}if(t&&l!==null)throw Error(c(529,""));return null;case"script":return t=s.async,s=s.src,typeof s=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=dl(s),s=An(r).hoistableScripts,l=s.get(t),l||(l={type:"script",instance:null,count:0,state:null},s.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(c(444,e))}}function cl(e){return'href="'+pa(e)+'"'}function ri(e){return'link[rel="stylesheet"]['+e+"]"}function Op(e){return N({},e,{"data-precedence":e.precedence,precedence:null})}function ab(e,t,s,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),Ft(t,"link",s),Rt(t),e.head.appendChild(t))}function dl(e){return'[src="'+pa(e)+'"]'}function oi(e){return"script[async]"+e}function Dp(e,t,s){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+pa(s.href)+'"]');if(l)return t.instance=l,Rt(l),l;var r=N({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Rt(l),Ft(l,"style",r),Mr(l,s.precedence,e),t.instance=l;case"stylesheet":r=cl(s.href);var d=e.querySelector(ri(r));if(d)return t.state.loading|=4,t.instance=d,Rt(d),d;l=Op(s),(r=_a.get(r))&&ud(l,r),d=(e.ownerDocument||e).createElement("link"),Rt(d);var m=d;return m._p=new Promise(function(b,k){m.onload=b,m.onerror=k}),Ft(d,"link",l),t.state.loading|=4,Mr(d,s.precedence,e),t.instance=d;case"script":return d=dl(s.src),(r=e.querySelector(oi(d)))?(t.instance=r,Rt(r),r):(l=s,(r=_a.get(d))&&(l=N({},s),md(l,r)),e=e.ownerDocument||e,r=e.createElement("script"),Rt(r),Ft(r,"link",l),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(c(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,Mr(l,s.precedence,e));return t.instance}function Mr(e,t,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=l.length?l[l.length-1]:null,d=r,m=0;m<l.length;m++){var b=l[m];if(b.dataset.precedence===t)d=b;else if(d!==r)break}d?d.parentNode.insertBefore(e,d.nextSibling):(t=s.nodeType===9?s.head:s,t.insertBefore(e,t.firstChild))}function ud(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function md(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Ar=null;function Rp(e,t,s){if(Ar===null){var l=new Map,r=Ar=new Map;r.set(s,l)}else r=Ar,l=r.get(s),l||(l=new Map,r.set(s,l));if(l.has(e))return l;for(l.set(e,null),s=s.getElementsByTagName(e),r=0;r<s.length;r++){var d=s[r];if(!(d[wl]||d[It]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var m=d.getAttribute(t)||"";m=e+m;var b=l.get(m);b?b.push(d):l.set(m,[d])}}return l}function Up(e,t,s){e=e.ownerDocument||e,e.head.insertBefore(s,t==="title"?e.querySelector("head > title"):null)}function sb(e,t,s){if(s===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Lp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function nb(e,t,s,l){if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var r=cl(l.href),d=t.querySelector(ri(r));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=zr.bind(e),t.then(e,e)),s.state.loading|=4,s.instance=d,Rt(d);return}d=t.ownerDocument||t,l=Op(l),(r=_a.get(r))&&ud(l,r),d=d.createElement("link"),Rt(d);var m=d;m._p=new Promise(function(b,k){m.onload=b,m.onerror=k}),Ft(d,"link",l),s.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,t),(t=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=zr.bind(e),t.addEventListener("load",s),t.addEventListener("error",s))}}var fd=0;function lb(e,t){return e.stylesheets&&e.count===0&&Dr(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var l=setTimeout(function(){if(e.stylesheets&&Dr(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+t);0<e.imgBytes&&fd===0&&(fd=62500*B0());var r=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Dr(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>fd?50:800)+t);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(r)}}:null}function zr(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Dr(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Or=null;function Dr(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Or=new Map,t.forEach(ib,e),Or=null,zr.call(e))}function ib(e,t){if(!(t.state.loading&4)){var s=Or.get(e);if(s)var l=s.get(null);else{s=new Map,Or.set(e,s);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<r.length;d++){var m=r[d];(m.nodeName==="LINK"||m.getAttribute("media")!=="not all")&&(s.set(m.dataset.precedence,m),l=m)}l&&s.set(null,l)}r=t.instance,m=r.getAttribute("data-precedence"),d=s.get(m)||l,d===l&&s.set(null,r),s.set(m,r),this.count++,l=zr.bind(this),r.addEventListener("load",l),r.addEventListener("error",l),d?d.parentNode.insertBefore(r,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var ci={$$typeof:$,Provider:null,Consumer:null,_currentValue:A,_currentValue2:A,_threadCount:0};function rb(e,t,s,l,r,d,m,b,k){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=et(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=et(0),this.hiddenUpdates=et(null),this.identifierPrefix=l,this.onUncaughtError=r,this.onCaughtError=d,this.onRecoverableError=m,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function qp(e,t,s,l,r,d,m,b,k,V,ee,le){return e=new rb(e,t,s,m,k,V,ee,le,b),t=1,d===!0&&(t|=24),d=la(3,null,null,t),e.current=d,d.stateNode=e,t=Vo(),t.refCount++,e.pooledCache=t,t.refCount++,d.memoizedState={element:l,isDehydrated:s,cache:t},Zo(d),e}function Bp(e){return e?(e=Hn,e):Hn}function Ip(e,t,s,l,r,d){r=Bp(r),l.context===null?l.context=r:l.pendingContext=r,l=ws(t),l.payload={element:s},d=d===void 0?null:d,d!==null&&(l.callback=d),s=Ss(e,l,t),s!==null&&(ea(s,e,t),Hl(s,e,t))}function Hp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function pd(e,t){Hp(e,t),(e=e.alternate)&&Hp(e,t)}function $p(e){if(e.tag===13||e.tag===31){var t=en(e,67108864);t!==null&&ea(t,e,67108864),pd(e,67108864)}}function Gp(e){if(e.tag===13||e.tag===31){var t=da();t=mt(t);var s=en(e,t);s!==null&&ea(s,e,t),pd(e,t)}}var Rr=!0;function ob(e,t,s,l){var r=_.T;_.T=null;var d=T.p;try{T.p=2,hd(e,t,s,l)}finally{T.p=d,_.T=r}}function cb(e,t,s,l){var r=_.T;_.T=null;var d=T.p;try{T.p=8,hd(e,t,s,l)}finally{T.p=d,_.T=r}}function hd(e,t,s,l){if(Rr){var r=gd(l);if(r===null)td(e,t,l,Ur,s),Yp(e,l);else if(ub(r,e,t,s,l))l.stopPropagation();else if(Yp(e,l),t&4&&-1<db.indexOf(e)){for(;r!==null;){var d=Mn(r);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var m=Yt(d.pendingLanes);if(m!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;m;){var k=1<<31-Be(m);b.entanglements[1]|=k,m&=~k}Ia(d),(st&6)===0&&(br=Qe()+500,si(0))}}break;case 31:case 13:b=en(d,2),b!==null&&ea(b,d,2),vr(),pd(d,2)}if(d=gd(l),d===null&&td(e,t,l,Ur,s),d===r)break;r=d}r!==null&&l.stopPropagation()}else td(e,t,l,null,s)}}function gd(e){return e=bo(e),xd(e)}var Ur=null;function xd(e){if(Ur=null,e=En(e),e!==null){var t=f(e);if(t===null)e=null;else{var s=t.tag;if(s===13){if(e=g(t),e!==null)return e;e=null}else if(s===31){if(e=x(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ur=e,null}function Fp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ua()){case Ca:return 2;case ht:return 8;case sa:case ue:return 32;case pe:return 268435456;default:return 32}default:return 32}}var bd=!1,Us=null,Ls=null,qs=null,di=new Map,ui=new Map,Bs=[],db="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Yp(e,t){switch(e){case"focusin":case"focusout":Us=null;break;case"dragenter":case"dragleave":Ls=null;break;case"mouseover":case"mouseout":qs=null;break;case"pointerover":case"pointerout":di.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ui.delete(t.pointerId)}}function mi(e,t,s,l,r,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:s,eventSystemFlags:l,nativeEvent:d,targetContainers:[r]},t!==null&&(t=Mn(t),t!==null&&$p(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function ub(e,t,s,l,r){switch(t){case"focusin":return Us=mi(Us,e,t,s,l,r),!0;case"dragenter":return Ls=mi(Ls,e,t,s,l,r),!0;case"mouseover":return qs=mi(qs,e,t,s,l,r),!0;case"pointerover":var d=r.pointerId;return di.set(d,mi(di.get(d)||null,e,t,s,l,r)),!0;case"gotpointercapture":return d=r.pointerId,ui.set(d,mi(ui.get(d)||null,e,t,s,l,r)),!0}return!1}function Vp(e){var t=En(e.target);if(t!==null){var s=f(t);if(s!==null){if(t=s.tag,t===13){if(t=g(s),t!==null){e.blockedOn=t,lu(e.priority,function(){Gp(s)});return}}else if(t===31){if(t=x(s),t!==null){e.blockedOn=t,lu(e.priority,function(){Gp(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Lr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=gd(e.nativeEvent);if(s===null){s=e.nativeEvent;var l=new s.constructor(s.type,s);xo=l,s.target.dispatchEvent(l),xo=null}else return t=Mn(s),t!==null&&$p(t),e.blockedOn=s,!1;t.shift()}return!0}function Qp(e,t,s){Lr(e)&&s.delete(t)}function mb(){bd=!1,Us!==null&&Lr(Us)&&(Us=null),Ls!==null&&Lr(Ls)&&(Ls=null),qs!==null&&Lr(qs)&&(qs=null),di.forEach(Qp),ui.forEach(Qp)}function qr(e,t){e.blockedOn===t&&(e.blockedOn=null,bd||(bd=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,mb)))}var Br=null;function Xp(e){Br!==e&&(Br=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Br===e&&(Br=null);for(var t=0;t<e.length;t+=3){var s=e[t],l=e[t+1],r=e[t+2];if(typeof l!="function"){if(xd(l||s)===null)continue;break}var d=Mn(s);d!==null&&(e.splice(t,3),t-=3,gc(d,{pending:!0,data:r,method:s.method,action:l},l,r))}}))}function ul(e){function t(k){return qr(k,e)}Us!==null&&qr(Us,e),Ls!==null&&qr(Ls,e),qs!==null&&qr(qs,e),di.forEach(t),ui.forEach(t);for(var s=0;s<Bs.length;s++){var l=Bs[s];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Bs.length&&(s=Bs[0],s.blockedOn===null);)Vp(s),s.blockedOn===null&&Bs.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var r=s[l],d=s[l+1],m=r[Xt]||null;if(typeof d=="function")m||Xp(s);else if(m){var b=null;if(d&&d.hasAttribute("formAction")){if(r=d,m=d[Xt]||null)b=m.formAction;else if(xd(r)!==null)continue}else b=m.action;typeof b=="function"?s[l+1]=b:(s.splice(l,3),l-=3),Xp(s)}}}function Kp(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(m){return r=m})},focusReset:"manual",scroll:"manual"})}function t(){r!==null&&(r(),r=null),l||setTimeout(s,20)}function s(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,r=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(s,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),r!==null&&(r(),r=null)}}}function yd(e){this._internalRoot=e}Ir.prototype.render=yd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(c(409));var s=t.current,l=da();Ip(s,l,e,t,null,null)},Ir.prototype.unmount=yd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ip(e.current,2,null,e,null,null),vr(),t[Tn]=null}};function Ir(e){this._internalRoot=e}Ir.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nl();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Bs.length&&t!==0&&t<Bs[s].priority;s++);Bs.splice(s,0,e),s===0&&Vp(e)}};var Zp=i.version;if(Zp!=="19.2.0")throw Error(c(527,Zp,"19.2.0"));T.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(c(188)):(e=Object.keys(e).join(","),Error(c(268,e)));return e=y(t),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var fb={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:_,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hr.isDisabled&&Hr.supportsFiber)try{Ge=Hr.inject(fb),Xe=Hr}catch{}}return pi.createRoot=function(e,t){if(!u(e))throw Error(c(299));var s=!1,l="",r=af,d=sf,m=nf;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(d=t.onCaughtError),t.onRecoverableError!==void 0&&(m=t.onRecoverableError)),t=qp(e,1,!1,null,null,s,l,null,r,d,m,Kp),e[Tn]=t.current,ed(e),new yd(t)},pi.hydrateRoot=function(e,t,s){if(!u(e))throw Error(c(299));var l=!1,r="",d=af,m=sf,b=nf,k=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(r=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError),s.formState!==void 0&&(k=s.formState)),t=qp(e,1,!0,t,s??null,l,r,k,d,m,b,Kp),t.context=Bp(null),s=t.current,l=da(),l=mt(l),r=ws(l),r.callback=null,Ss(s,r,l),s=l,t.current.lanes=s,Ct(t,s),Ia(t),e[Tn]=t.current,ed(e),new Ir(t)},pi.version="19.2.0",pi}var rh;function Ub(){if(rh)return jd.exports;rh=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(i){console.error(i)}}return n(),jd.exports=Rb(),jd.exports}var Lb=Ub();const qb=xb(Lb),Ed="active-customer-order",Md="active-customer-order-id",Vh=1440*60*1e3,Bb=n=>{if(!n)return null;try{const i=JSON.parse(n);if(i&&typeof i.orderId=="string"&&i.orderId.trim().length>0)return i}catch(i){console.error("Failed to parse stored active order",i)}return null},Ni=n=>{if(!(typeof window>"u"))try{if(!n){window.localStorage.removeItem(Ed),window.localStorage.removeItem(Md);return}window.localStorage.setItem(Ed,JSON.stringify(n)),window.localStorage.removeItem(Md)}catch(i){console.error("Failed to persist active order",i)}},no=()=>{if(typeof window>"u")return null;const n=Bb(window.localStorage.getItem(Ed));if(n)return n.expiresAt&&n.expiresAt<=Date.now()?(Ni(null),null):n;const i=window.localStorage.getItem(Md);if(i&&i.trim().length>0){const o={orderId:i};return Ni(o),o}return null},Qh=(n,i)=>{if(!n){Ni(null);return}Ni(i?{orderId:n,expiresAt:i}:{orderId:n})},Xh=()=>{Ni(null)},Kh="Supabase client is not available in this offline build. Install @supabase/supabase-js in production.",Zh=()=>{const n=Promise.reject(new Error(Kh));return new Proxy({},{get(i,o){return o==="then"||o==="catch"||o==="finally"?n[o].bind(n):()=>Zh()}})},Ib=()=>{const n=Zh(),i=async()=>{throw new Error(Kh)};return{from(){return n},functions:{invoke:i},auth:{signInWithPassword:i,signOut:i,getSession:i}}},Hb=n=>{try{const i=new URL(n),o=i.pathname.replace(/\/+$/,"");if(o&&o!=="/"){const c=o===""?"/":o;throw new Error(`VITE_SUPABASE_URL must point to the project root (e.g. https://xxxx.supabase.co). Remove the path "${c}" to avoid cross-origin errors.`)}return i.origin}catch(i){const o=i instanceof Error?` ${i.message}`:"";throw new Error(`Invalid VITE_SUPABASE_URL provided.${o}`.trim())}},$b=()=>Ib();let Ad;try{const n="https://epolcaohkaozcanyexau.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVwb2xjYW9oa2FvemNhbnlleGF1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg3NDk0NDUsImV4cCI6MjA3NDMyNTQ0NX0.xROZsagC9K1aP6XexNoqlYZfeuqGUOC9huGsrJ55x_0",o=Hb(n);Ad=Nb(o,i,{auth:{persistSession:!1}})}catch(n){const i=n instanceof Error?n.message:"Unknown error while creating the Supabase client.";console.warn("Supabase client disabled. Falling back to the offline stub. Operations depending on Supabase will fail until the environment is configured.",i),Ad=$b()}const fe=Ad,Gb={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_CLOUDINARY_CLOUD_NAME:"dmed4shf3",VITE_CLOUDINARY_DEFAULT_PRODUCT_IMAGE:"https://res.cloudinary.com/dmed4shf3/image/upload/v1757751722/main-sample.png",VITE_CLOUDINARY_PRODUCTS_FOLDER:"products",VITE_CLOUDINARY_RECEIPTS_FOLDER:"receipts",VITE_CLOUDINARY_UPLOAD_PRESET:"ml_default",VITE_CLOUDINARY_UPLOAD_PRESET_PRODUCTS:"",VITE_CLOUDINARY_UPLOAD_PRESET_RECEIPTS:"",VITE_CLOUDINARY_URL:"cloudinary://638671212949945:Gex0K0jrKzsXpn-iLglyyxbEi40@dmed4shf3",VITE_FIREBASE_API_KEY:"AIzaSyBU5pHpTKoLp9YSrDYQAfU020MmABXuO2I",VITE_FIREBASE_APP_ID:"1:771027243035:web:b2adab7c31c4438814a8be",VITE_FIREBASE_AUTH_DOMAIN:"steady-service-469913-q4.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"771027243035",VITE_FIREBASE_PROJECT_ID:"steady-service-469913-q4",VITE_FIREBASE_STORAGE_BUCKET:"steady-service-469913-q4.firebasestorage.app",VITE_GEMINI_API_KEY:"AIzaSyAVEshpvhYt7TXSc5IoM9RnbeRQVXErEHg",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVwb2xjYW9oa2FvemNhbnlleGF1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg3NDk0NDUsImV4cCI6MjA3NDMyNTQ0NX0.xROZsagC9K1aP6XexNoqlYZfeuqGUOC9huGsrJ55x_0",VITE_SUPABASE_URL:"https://epolcaohkaozcanyexau.supabase.co"},Fb=Gb,Yb="https://api.cloudinary.com/v1_1",Vb="cloudinary.com",Qb=n=>n.normalize("NFD").replace(/[̀-ͯ]/g,"").normalize("NFC"),$d=n=>Qb(n).toLowerCase().replace(/[^a-z0-9-]+/g,"-").replace(/^-+|-+$/g,""),Ph=()=>Math.random().toString(36).slice(2,10),yi=(n,i)=>n&&$d(n)||i,Ra=n=>{const i=Fb[n];if(typeof i!="string")return;const o=i.trim();return o.length>0?o:void 0},oh=(n,i)=>{const o=Ra(n);if(!o)throw new Error(`Configuration Cloudinary manquante: définissez la variable d'environnement ${n} pour ${i}.`);return o},Gd=async(n,{folder:i,uploadPreset:o,publicId:c,tags:u})=>{var N;const f=oh("VITE_CLOUDINARY_CLOUD_NAME","les téléversements de médias"),g=o??oh("VITE_CLOUDINARY_UPLOAD_PRESET","les téléversements de médias"),x=g,p=new FormData;p.append("file",n),p.append("upload_preset",g),i&&p.append("folder",i),c&&p.append("public_id",c),u!=null&&u.length&&p.append("tags",u.join(","));const y=await fetch(`${Yb}/${f}/auto/upload`,{method:"POST",body:p}),v=await y.json();if(!y.ok||v.error){const j=(N=v.error)==null?void 0:N.message;throw j&&/upload preset/i.test(j)?new Error(`Le preset Cloudinary "${x}" est introuvable ou ne permet pas les téléversements non signés. Vérifiez sa configuration dans votre console Cloudinary (Settings → Upload → Upload presets).`):new Error(j??`Échec du téléversement Cloudinary (statut ${y.status}).`)}if(!v.secure_url&&!v.url)throw new Error("Cloudinary n'a pas renvoyé d'URL sécurisée pour le fichier téléversé.");return v.secure_url??v.url},ps=n=>{const i=n==null?void 0:n.trim();if(!i)return null;try{const o=new URL(i);return o.protocol!=="https:"||!o.hostname.endsWith(Vb)?null:i}catch{return null}},Xb=Ra("VITE_CLOUDINARY_DEFAULT_PRODUCT_IMAGE")??"",ch=Xb,Jh=n=>{const i=ps(n);return i||ch||""},Kb=async(n,i)=>{const o=Ra("VITE_CLOUDINARY_PRODUCTS_FOLDER")??"products",c=Ra("VITE_CLOUDINARY_UPLOAD_PRESET_PRODUCTS")??Ra("VITE_CLOUDINARY_UPLOAD_PRESET"),u=i?$d(i):void 0,f=u?`${u}-${Ph()}`:void 0;return Gd(n,{folder:yi(o,"products"),uploadPreset:c,publicId:f,tags:["product"]})},Zb=()=>yi(Ra("VITE_CLOUDINARY_CUSTOM_FOLDER")??"Custom","Custom"),yl=async(n,i)=>{const o=Zb(),c=Ra("VITE_CLOUDINARY_UPLOAD_PRESET_CUSTOM")??Ra("VITE_CLOUDINARY_UPLOAD_PRESET"),u=(i==null?void 0:i.publicId)??(n instanceof File&&n.name?$d(n.name.replace(/\.[^/.]+$/,"")):void 0),f=u?`${u}-${Ph()}`:void 0,g=Array.from(new Set(["customization","custom-folder",...(i==null?void 0:i.tags)??[]]));return Gd(n,{folder:o,uploadPreset:c,publicId:f,tags:g})},Wh=async(n,i)=>{const o=Ra("VITE_CLOUDINARY_RECEIPTS_FOLDER")??"receipts",c=Ra("VITE_CLOUDINARY_UPLOAD_PRESET_RECEIPTS")??Ra("VITE_CLOUDINARY_UPLOAD_PRESET"),u=[yi(o,"receipts")];return i!=null&&i.orderId?u.push(`order-${yi(i.orderId,"commande")}`):i!=null&&i.customerReference&&u.push(`customer-${yi(i.customerReference,"client")}`),Gd(n,{folder:u.join("/"),uploadPreset:c,tags:["payment","receipt"]})},eg="ouiouipos:role-logins",tg=()=>{if(typeof window>"u"||!window.localStorage)throw new Error("Local storage is not available for role login tracking.");return window.localStorage},Pb=n=>{if(!n)return[];try{const i=JSON.parse(n);return Array.isArray(i)?i.map(o=>{if(!o||typeof o!="object")return null;const{roleId:c,roleName:u,loginAt:f}=o;if(typeof c!="string"||typeof u!="string"||typeof f!="string")return null;const g=Date.parse(f);return Number.isNaN(g)?null:{roleId:c,roleName:u,loginAt:new Date(g).toISOString()}}).filter(o=>!!o).sort((o,c)=>Date.parse(o.loginAt)-Date.parse(c.loginAt)):[]}catch(i){return console.warn("Unable to parse stored role logins, clearing history.",i),[]}},Fd=()=>{const i=tg().getItem(eg);return Pb(i)},ag=n=>{tg().setItem(eg,JSON.stringify(n.slice(-500)))},dh=async(n,i,o)=>{const c=o??new Date().toISOString(),u={roleId:n,roleName:i,loginAt:c};try{const f=Fd();f.push(u),ag(f)}catch(f){console.warn("Unable to persist role login locally.",f)}return u},uh=async n=>{const i=Date.parse(n);if(Number.isNaN(i))throw new Error("Invalid start date provided when fetching role logins.");return Fd().filter(c=>Date.parse(c.loginAt)>=i)},mh=n=>{try{const i=Date.parse(n);if(Number.isNaN(i))return;const o=Fd().filter(c=>Date.parse(c.loginAt)>=i);ag(o)}catch(i){console.warn("Unable to prune stored role logins.",i)}};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jb=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Wb=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(i,o,c)=>c?c.toUpperCase():o.toLowerCase()),fh=n=>{const i=Wb(n);return i.charAt(0).toUpperCase()+i.slice(1)},sg=(...n)=>n.filter((i,o,c)=>!!i&&i.trim()!==""&&c.indexOf(i)===o).join(" ").trim(),ey=n=>{for(const i in n)if(i.startsWith("aria-")||i==="role"||i==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ty={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=h.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:u="",children:f,iconNode:g,...x},p)=>h.createElement("svg",{ref:p,...ty,width:i,height:i,stroke:n,strokeWidth:c?Number(o)*24/Number(i):o,className:sg("lucide",u),...!f&&!ey(x)&&{"aria-hidden":"true"},...x},[...g.map(([y,v])=>h.createElement(y,v)),...Array.isArray(f)?f:[f]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=(n,i)=>{const o=h.forwardRef(({className:c,...u},f)=>h.createElement(ay,{ref:f,iconNode:i,className:sg(`lucide-${Jb(fh(n))}`,`lucide-${n}`,c),...u}));return o.displayName=fh(n),o};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=[["path",{d:"M19 9V6a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v3",key:"irtipd"}],["path",{d:"M3 16a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v1.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V11a2 2 0 0 0-4 0z",key:"1qyhux"}],["path",{d:"M5 18v2",key:"ppbyun"}],["path",{d:"M19 18v2",key:"gy7782"}]],Yd=he("armchair",sy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ng=he("arrow-left",ny);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ly=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],iy=he("bold",ly);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=[["path",{d:"m11 10 3 3",key:"fzmg1i"}],["path",{d:"M6.5 21A3.5 3.5 0 1 0 3 17.5a2.62 2.62 0 0 1-.708 1.792A1 1 0 0 0 3 21z",key:"p4q2r7"}],["path",{d:"M9.969 17.031 21.378 5.624a1 1 0 0 0-3.002-3.002L6.967 14.031",key:"wy6l02"}]],oy=he("brush",ry);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cy=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],dy=he("calendar-days",cy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uy=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],my=he("calendar",uy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 11.207a.5.5 0 0 1 .146-.353l2-2a.5.5 0 0 1 .708 0l3.292 3.292a.5.5 0 0 0 .708 0l4.292-4.292a.5.5 0 0 1 .854.353V16a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1z",key:"q0gr47"}]],py=he("chart-area",fy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hy=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],gy=he("chart-column",hy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xy=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],by=he("check",xy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yy=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],lg=he("chef-hat",yy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ig=he("chevron-down",vy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jy=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],_y=he("chevron-right",jy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],rg=he("chevron-up",Ny);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],jn=he("circle-check-big",wy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sy=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Cy=he("circle-check",Sy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]],Ty=he("circle-minus",ky);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Vd=he("circle-plus",Ey);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ay=he("circle-question-mark",My);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Oy=he("circle-x",zy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],hs=he("clock",Dy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Uy=he("copy",Ry);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],ro=he("dollar-sign",Ly);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],By=he("download",qy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],og=he("ellipsis-vertical",Iy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],$y=he("external-link",Hy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Fy=he("eye-off",Gy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],zd=he("eye",Yy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],cg=he("file-text",Vy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=[["path",{d:"M12.531 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14v6a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341l.427-.473",key:"ol2ft2"}],["path",{d:"m16.5 3.5 5 5",key:"15e6fa"}],["path",{d:"m21.5 3.5-5 5",key:"m0lwru"}]],Xy=he("funnel-x",Qy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],Od=he("gift",Ky);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Py=he("grip-vertical",Zy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=[["path",{d:"M12 3V2",key:"ar7q03"}],["path",{d:"m15.4 17.4 3.2-2.8a2 2 0 1 1 2.8 2.9l-3.6 3.3c-.7.8-1.7 1.2-2.8 1.2h-4c-1.1 0-2.1-.4-2.8-1.2l-1.302-1.464A1 1 0 0 0 6.151 19H5",key:"n2g93r"}],["path",{d:"M2 14h12a2 2 0 0 1 0 4h-2",key:"1o2jem"}],["path",{d:"M4 10h16",key:"img6z1"}],["path",{d:"M5 10a7 7 0 0 1 14 0",key:"1ega1o"}],["path",{d:"M5 14v6a1 1 0 0 1-1 1H2",key:"1hescx"}]],Wy=he("hand-platter",Jy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],tv=he("info",ev);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],sv=he("italic",av);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],ph=he("layers",nv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],iv=he("layout-dashboard",lv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],vl=he("loader-circle",rv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],cv=he("log-in",ov);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],uv=he("log-out",dv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],fv=he("mail",mv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],wn=he("map-pin",pv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],dg=he("menu",hv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],xv=he("message-circle",gv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],ug=he("message-square",bv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=[["path",{d:"M5 12h14",key:"1ays0h"}]],mg=he("minus",yv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]],jv=he("package-check",vv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M19 13v6",key:"85cyf1"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]],Nv=he("package-plus",_v);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Qs=he("package",wv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Cv=he("palette",Sv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Tv=he("pen",kv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Mv=he("pencil",Ev);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],jl=he("percent",Av);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],xl=he("phone",zv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=[["path",{d:"M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z",key:"1piglc"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M2 8v1a2 2 0 0 0 2 2h1",key:"1env43"}]],Dv=he("piggy-bank",Ov);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Si=he("plus",Rv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],Jr=he("receipt",Uv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],qv=he("refresh-cw",Lv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Iv=he("save",Bv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Qd=he("search",Hv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Gv=he("send",$v);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fv=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Yv=he("settings",Fv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Qv=he("shield",Vv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],Xd=he("shopping-bag",Xv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],fg=he("shopping-cart",Kv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=[["path",{d:"M12 21a9 9 0 0 0 9-9H3a9 9 0 0 0 9 9Z",key:"4rw317"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M19.5 12 22 6",key:"shfsr5"}],["path",{d:"M16.25 3c.27.1.8.53.75 1.36-.06.83-.93 1.2-1 2.02-.05.78.34 1.24.73 1.62",key:"rpc6vp"}],["path",{d:"M11.25 3c.27.1.8.53.74 1.36-.05.83-.93 1.2-.98 2.02-.06.78.33 1.24.72 1.62",key:"1lf63m"}],["path",{d:"M6.25 3c.27.1.8.53.75 1.36-.06.83-.93 1.2-1 2.02-.05.78.34 1.24.74 1.62",key:"97tijn"}]],pg=he("soup",Zv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],hg=he("square-pen",Pv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]],Wv=he("strikethrough",Jv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],wi=he("tag",e1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],kn=he("trash-2",t1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],gg=he("trending-up",a1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Da=he("triangle-alert",s1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],xg=he("truck",n1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],_l=he("upload",l1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],r1=he("user-check",i1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],vi=he("user",o1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Dd=he("users",c1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]],u1=he("utensils-crossed",d1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],f1=he("utensils",m1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p1=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],fs=he("x",p1),gs="/site-customizer",ta=[{name:"Dashboard",href:"/dashboard",icon:iv,permissionKey:"/dashboard"},{name:"À Emporter",href:"/para-llevar",icon:Xd,permissionKey:"/para-llevar"},{name:"Plan de Salle",href:"/ventes",icon:Yd,permissionKey:"/ventes"},{name:"Cuisine",href:"/cocina",icon:pg,permissionKey:"/cocina"},{name:"Personnalisation",href:gs,icon:oy,permissionKey:gs},{name:"Produits",href:"/produits",icon:u1,permissionKey:"/produits"},{name:"Ingrédients",href:"/ingredients",icon:Qs,permissionKey:"/ingredients"},{name:"Promotions",href:"/promotions",icon:jl,permissionKey:"/promotions"},{name:"Résumé Ventes",href:"/resume-ventes",icon:py,permissionKey:"/resume-ventes"}],bg={ADMIN:"admin"},Sn="__home_page",h1=n=>{if(n.status!=="active")return!1;const i=new Date,o=n.conditions;if(o.start_date){const c=new Date(o.start_date);if(i<c)return!1}if(o.end_date){const c=new Date(o.end_date);if(i>c)return!1}return!(o.usage_limit&&n.usage_count>=o.usage_limit)},g1=n=>{const i=new Date,o=n.conditions;if(o.days_of_week&&o.days_of_week.length>0){const c=i.getDay();if(!o.days_of_week.includes(c))return!1}if(o.time_range){const c=i.getHours(),u=i.getMinutes(),f=c*60+u,[g,x]=o.time_range.start_time.split(":").map(Number),[p,y]=o.time_range.end_time.split(":").map(Number),v=g*60+x,N=p*60+y;if(f<v||f>N)return!1}return!0},Ci=["review1","review2","review3","review4","review5","review6","review7"],x1=["name","handle","timeAgo","message","highlight","highlightCaption","location","badgeLabel","postImageAlt"],b1=["avatarUrl","highlightImageUrl","postImageUrl"],y1=["navigation.brand","navigation.brandLogo","navigation.staffLogo","navigation.links.home","navigation.links.about","navigation.links.menu","navigation.links.contact","navigation.links.loginCta","navigation.style.background","hero.title","hero.subtitle","hero.ctaLabel","hero.historyTitle","hero.reorderCtaLabel","hero.backgroundImage","about.title","about.description","about.image","about.style.background","menu.title","menu.ctaLabel","menu.loadingLabel","menu.image","menu.style.background","instagramReviews.title","instagramReviews.subtitle","instagramReviews.image","instagramReviews.style.background","findUs.title","findUs.addressLabel","findUs.address","findUs.cityLabel","findUs.city","findUs.hoursLabel","findUs.hours","findUs.mapLabel","findUs.style.background","footer.text","footer.style.background"],v1=[...x1,...b1],j1=Ci.flatMap(n=>v1.map(i=>`instagramReviews.reviews.${n}.${i}`)),ki=[...y1,...j1],_1=ki.filter(n=>!n.endsWith(".style.background")&&!n.endsWith(".image")&&!n.endsWith(".avatarUrl")&&!n.endsWith(".highlightImageUrl")&&!n.endsWith(".postImageUrl")&&n!=="hero.backgroundImage"&&n!=="navigation.brandLogo"&&n!=="navigation.staffLogo"),N1=new Set(["STRONG","EM","S","STRIKE","SPAN","BR","DIV","P","B","I"]),w1=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,S1=/^rgba?\((\s*\d{1,3}\s*,){2}\s*\d{1,3}\s*(,\s*(0|1|0?\.\d+))?\s*\)$/,yg=typeof window<"u"&&typeof document<"u",C1=n=>{const i=n.trim().replace(/"|'/g,"");return w1.test(i)?i.toLowerCase():S1.test(i)?i.replace(/\s+/g,""):null},k1=n=>{const i=n.parentNode;if(!i){n.remove();return}for(;n.firstChild;)i.insertBefore(n.firstChild,n);i.removeChild(n)},T1=n=>{const o={B:"strong",I:"em",STRIKE:"s"}[n.tagName];if(!o)return n;const c=document.createElement(o);for(;n.firstChild;)c.appendChild(n.firstChild);return n.replaceWith(c),c},vg=n=>{if(!N1.has(n.tagName)){k1(n);return}const i=T1(n);if(Array.from(i.attributes).forEach(o=>{o.name!=="style"&&i.removeAttribute(o.name)}),i.hasAttribute("style")){const u=(i.getAttribute("style")??"").split(";").map(f=>f.trim()).filter(Boolean).find(f=>f.toLowerCase().startsWith("color"));if(u){const[,f]=u.split(":"),g=f?C1(f):null;g?i.setAttribute("style",`color: ${g}`):i.removeAttribute("style")}else i.removeAttribute("style")}Array.from(i.childNodes).forEach(o=>{var c;if(o.nodeType===Node.COMMENT_NODE){(c=o.parentNode)==null||c.removeChild(o);return}o.nodeType===Node.ELEMENT_NODE&&vg(o)})},E1=n=>n.replace(/<\/?(?!br\b)[^>]+>/gi,"").replace(/\r\n|\r|\n/g,"<br>").replace(/<script[^>]*>[\s\S]*?<\/script>/gi,""),M1=n=>{const i=n??"";if(i.trim().length===0)return"";if(!yg)return E1(i).trim();const o=document.createElement("template");return o.innerHTML=i,Array.from(o.content.childNodes).forEach(c=>{var u;if(c.nodeType===Node.COMMENT_NODE){(u=c.parentNode)==null||u.removeChild(c);return}c.nodeType===Node.ELEMENT_NODE&&vg(c)}),o.innerHTML.trim()},A1=n=>{if(!yg)return n.replace(/<[^>]+>/g,"");const i=document.createElement("template");return i.innerHTML=n,i.content.textContent??""},hh=n=>n.replace(/[​‌‍﻿]/g,"").replace(/\r\n/g,`
`),Kd=n=>{if(!n)return null;const i=M1(n.html??""),o=hh(n.plainText??""),c=hh(A1(i)),u=o.trim().length>0?o:c;return i.trim().length===0&&u.trim().length===0?null:{html:i,plainText:u}},z1={review1:{name:"Laura Méndez",handle:"@laurita.eats",timeAgo:"hace 2 días",message:"No puedo con la originalidad de estos tacos al pastor: cada mordisco tiene un giro gourmet brutal. La salsa cheddar queda cremosa sin empalagar y el toque crujiente lo es todo.",highlight:"Story « Taco Tuesday »",highlightCaption:"Guardado en Destacadas",location:"Bogotá · Servicio nocturno",badgeLabel:"Instagram",postImageAlt:"Assiette de tacos colorés garnis d'herbes fraîches.",avatarUrl:"https://images.unsplash.com/photo-1544723795-3fb6469f5b39?auto=format&fit=crop&w=320&q=80",highlightImageUrl:"https://images.unsplash.com/photo-1521305916504-4a1121188589?auto=format&fit=crop&w=320&q=80",postImageUrl:"https://images.unsplash.com/photo-1521305916504-4a1121188589?auto=format&fit=crop&w=640&q=80"},review2:{name:"Camila Torres",handle:"@camigoesout",timeAgo:"hace 5 días",message:"Estas arepas son lo más: combinan ingredientes súper frescos con un toque gourmet creativo. La mezcla dulce-salado y esa salsa cheddar para remojar me tuvieron feliz todo el brunch.",highlight:"Reel « Brunch entre amigas »",highlightCaption:"Comentarios llenos de antojos",location:"Medellín · Brunch de domingo",badgeLabel:"Instagram",postImageAlt:"Gros plan sur des arepas dorées et une sauce maison.",avatarUrl:"https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=320&q=80",highlightImageUrl:"https://images.unsplash.com/photo-1478145046317-39f10e56b5e9?auto=format&fit=crop&w=320&q=80",postImageUrl:"https://images.unsplash.com/photo-1478145046317-39f10e56b5e9?auto=format&fit=crop&w=640&q=80"},review3:{name:"Sebastián Ruiz",handle:"@ruizhungry",timeAgo:"hace 1 semana",message:"Armamos un afterwork aquí y fue un hit: combos originales, porciones generosas y un crunch brutal en cada bocado. La salsa cheddar se volvió tema de conversación.",highlight:"Post « Team Afterwork »",highlightCaption:"Reacciones de la oficina",location:"Barranquilla · Terraza privada",badgeLabel:"Instagram",postImageAlt:"Table conviviale avec plusieurs plats mexicains et des boissons fraîches.",avatarUrl:"https://images.unsplash.com/photo-1521572267360-ee0c2909d518?auto=format&fit=crop&w=320&q=80",highlightImageUrl:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?auto=format&fit=crop&w=320&q=80",postImageUrl:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?auto=format&fit=crop&w=640&q=80"},review4:{name:"Valentina Ríos",handle:"@valen.foodnotes",timeAgo:"hace 2 semanas",message:"El menú tiene un mood gourmet sin perder lo reconfortante: masa crocante, cheddar fundido y combinaciones de ingredientes que se sienten pensadas con cariño. Increíble experiencia.",highlight:"Carousel « Night Out »",highlightCaption:"Comentarios fijados",location:"Cali · Cena casual",badgeLabel:"Instagram",postImageAlt:"Pizza gourmande avec fromage coulant et herbes fraîches.",avatarUrl:"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?auto=format&fit=crop&w=320&q=80",highlightImageUrl:"https://images.unsplash.com/photo-1513104890138-7c749659a591?auto=format&fit=crop&w=320&q=80",postImageUrl:"https://images.unsplash.com/photo-1513104890138-7c749659a591?auto=format&fit=crop&w=640&q=80"},review5:{name:"Alejandro Pérez",handle:"@alexlovesfood",timeAgo:"hace 3 semanas",message:"Vine por curiosidad y me quedé por la originalidad del menú: el cheddar baña la burger justo como me gusta y el pan crujiente aguanta toda la salsa. Asociaciones de sabores top.",highlight:"Live « Burger Night »",highlightCaption:"Chat lleno de elogios",location:"Bogotá · Servicio takeout",badgeLabel:"Instagram",postImageAlt:"Burger gourmet avec sauce et frites croustillantes.",avatarUrl:"https://images.unsplash.com/photo-1529665253569-6d01c0eaf7b6?auto=format&fit=crop&w=320&q=80",highlightImageUrl:"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?auto=format&fit=crop&w=320&q=80",postImageUrl:"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?auto=format&fit=crop&w=640&q=80"},review6:{name:"Juliana Gómez",handle:"@julie.foodstories",timeAgo:"hace 1 mes",message:"Pedimos catering para un cumpleaños y fue éxito total: tacos mini, dips calientes y una mesa que se veía divina para fotos. Todo llegó puntual y con instrucciones claras.",highlight:"Story « Fiesta privada »",highlightCaption:"Reseñas con confeti",location:"Cartagena · Evento privado",badgeLabel:"Instagram",postImageAlt:"Buffet coloré avec tacos, dips et accompagnements.",avatarUrl:"https://images.unsplash.com/photo-1517841905240-472988babdf9?auto=format&fit=crop&w=320&q=80",highlightImageUrl:"https://images.unsplash.com/photo-1528715471579-d1bcf0ba5e83?auto=format&fit=crop&w=320&q=80",postImageUrl:"https://images.unsplash.com/photo-1466978913421-dad2ebd01d17?auto=format&fit=crop&w=640&q=80"},review7:{name:"Manuela Herrera",handle:"@manuelatryit",timeAgo:"hace 6 semanas",message:"Amo que tengan opciones veggies sin perder el toque cheddar: las quesadillas con hongos y maíz dulce son mi nueva obsesión. Además, la atención es rapidísima.",highlight:"Reel « Veggie Lovers »",highlightCaption:"Comentarios verdes y felices",location:"Bogotá · Servicio para llevar",badgeLabel:"Instagram",postImageAlt:"Quesadillas dorées servies avec salsa verde.",avatarUrl:"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?auto=format&fit=crop&w=320&q=80",highlightImageUrl:"https://images.unsplash.com/photo-1528712306091-ed0763094c98?auto=format&fit=crop&w=320&q=80",postImageUrl:"https://images.unsplash.com/photo-1528712306091-ed0763094c98?auto=format&fit=crop&w=640&q=80"}},Ue=n=>n.trim(),Zd=n=>typeof n=="string"&&n.trim().length>0,jg=(n,i)=>Zd(n)?n.trim():i,_g=(n,i)=>Zd(n)?n.trim():i,ji=(n,i)=>Zd(n)?n.trim():i,Le=(n,i)=>{if(typeof n!="string")return i;const o=n.trim();return o.length>0?o:i},Ga=(n,i)=>n===void 0?i??null:n===null?null:ps(n)??i??null,Fa=n=>ps(n)??null,Ng=/^([01]\d|2[0-3]):([0-5]\d)$/,gh=(n,i)=>{if(typeof n!="string")return i;const o=n.trim();return Ng.test(o)?o:i},xh=(n,i)=>{if(typeof n!="string")return i;const o=n.trim();return Ng.test(o)?o:i},O1=(n,i)=>{const o={};return Ci.forEach(c=>{const u=i[c],f=(n==null?void 0:n[c])??{};o[c]={name:Le(f==null?void 0:f.name,u.name),handle:Le(f==null?void 0:f.handle,u.handle),timeAgo:Le(f==null?void 0:f.timeAgo,u.timeAgo),message:Le(f==null?void 0:f.message,u.message),highlight:Le(f==null?void 0:f.highlight,u.highlight),highlightCaption:Le(f==null?void 0:f.highlightCaption,u.highlightCaption),location:Le(f==null?void 0:f.location,u.location),badgeLabel:Le(f==null?void 0:f.badgeLabel,u.badgeLabel),postImageAlt:Le(f==null?void 0:f.postImageAlt,u.postImageAlt),avatarUrl:Ga(f==null?void 0:f.avatarUrl,u.avatarUrl),highlightImageUrl:Ga(f==null?void 0:f.highlightImageUrl,u.highlightImageUrl),postImageUrl:Ga(f==null?void 0:f.postImageUrl,u.postImageUrl)}}),o},D1=n=>{const i={};return Ci.forEach(o=>{const c=(n==null?void 0:n[o])??{};i[o]={name:Ue((c==null?void 0:c.name)??""),handle:Ue((c==null?void 0:c.handle)??""),timeAgo:Ue((c==null?void 0:c.timeAgo)??""),message:Ue((c==null?void 0:c.message)??""),highlight:Ue((c==null?void 0:c.highlight)??""),highlightCaption:Ue((c==null?void 0:c.highlightCaption)??""),location:Ue((c==null?void 0:c.location)??""),badgeLabel:Ue((c==null?void 0:c.badgeLabel)??""),postImageAlt:Ue((c==null?void 0:c.postImageAlt)??""),avatarUrl:Fa(c==null?void 0:c.avatarUrl),highlightImageUrl:Fa(c==null?void 0:c.highlightImageUrl),postImageUrl:Fa(c==null?void 0:c.postImageUrl)}}),i},$r=n=>{if(typeof n!="string")return;const i=n.trim();return i.length>0?i:void 0},wg=n=>{if(!n)return null;const i=$r(n.textColor??null),o=$r(n.fontFamily??null),c=$r(n.fontSize??null),u=$r(n.backgroundColor??null),f={};return i&&(f.textColor=i),o&&(f.fontFamily=o),c&&(f.fontSize=c),u&&(f.backgroundColor=u),Object.keys(f).length>0?f:null},R1=(n,i)=>{const o=n??i,c={};return ki.forEach(u=>{const f=wg(o[u]??null);f&&(c[u]=f)}),c},U1=(n,i)=>{const o=n??i,c={};return ki.forEach(u=>{const f=wg(o[u]??null);f&&(c[u]=f)}),c},L1=(n,i)=>{const o=n??i,c={};return ki.forEach(u=>{const f=o[u],g=Kd(f??null);g&&(c[u]=g)}),c},q1=(n,i)=>{const o=n??i,c={};return ki.forEach(u=>{const f=o[u],g=Kd(f??null);g&&(c[u]=g)}),c},B1=["image","video","audio","font","raw"],I1=()=>`asset-${Date.now()}-${Math.random().toString(36).slice(2,10)}`,H1=n=>B1.includes(n)?n:"raw",$1=n=>{if(typeof n=="string"){const i=Date.parse(n);if(!Number.isNaN(i))return new Date(i).toISOString()}return new Date().toISOString()},G1=n=>{const i=typeof n=="number"?n:Number(n);return!Number.isFinite(i)||i<0?0:Math.round(i)},Sg=n=>{if(!n)return null;const i=ps(n.url??void 0);if(!i)return null;const o=typeof n.id=="string"&&n.id.trim().length>0?n.id.trim():I1(),c=typeof n.name=="string"&&n.name.trim().length>0?n.name.trim():o,u=typeof n.format=="string"&&n.format.trim().length>0?n.format.trim():"application/octet-stream",f=H1(n.type),g=G1(n.bytes),x=$1(n.createdAt);return{id:o,name:c,url:i,format:u,bytes:g,type:f,createdAt:x}},F1=(n,i)=>n?{library:Array.isArray(n.library)?n.library.map(c=>Sg(c)).filter(Boolean):i.library}:i,Y1=(n,i)=>{const o=n??i;return{library:Array.isArray(o.library)?o.library.map(u=>Sg(u)).filter(Boolean):i.library}},Cg={background:{type:"color",color:"#0f172a",image:null},fontFamily:"Inter",fontSize:"16px",textColor:"#f1f5f9"},kg={background:{type:"image",color:"#0f172a",image:"https://picsum.photos/seed/tacosbg/1920/1080"},fontFamily:"Inter",fontSize:"18px",textColor:"#f8fafc"},Tg={background:{type:"color",color:"#ffffff",image:null},fontFamily:"Inter",fontSize:"16px",textColor:"#0f172a"},Eg={background:{type:"color",color:"#f8fafc",image:null},fontFamily:"Inter",fontSize:"16px",textColor:"#111827"},Mg={background:{type:"color",color:"#ffffff",image:null},fontFamily:"Inter",fontSize:"16px",textColor:"#111827"},Ag={background:{type:"color",color:"#f8fafc",image:null},fontFamily:"Inter",fontSize:"16px",textColor:"#0f172a"},zg={background:{type:"color",color:"#0f172a",image:null},fontFamily:"Inter",fontSize:"14px",textColor:"#e2e8f0"},Pd={library:[]},Og={},Dg={},pn=(n,i)=>{var f,g,x,p;const o=((f=n==null?void 0:n.background)==null?void 0:f.type)==="image"?"image":"color",c=ji((g=n==null?void 0:n.background)==null?void 0:g.color,i.background.color),u=o==="image"?Ga(((x=n==null?void 0:n.background)==null?void 0:x.image)??void 0,i.background.image):null;return{background:{type:o,color:o==="color"?c:ji((p=n==null?void 0:n.background)==null?void 0:p.color,i.background.color),image:o==="image"?u:null},fontFamily:jg((n==null?void 0:n.fontFamily)??null,i.fontFamily),fontSize:_g((n==null?void 0:n.fontSize)??null,i.fontSize),textColor:ji((n==null?void 0:n.textColor)??null,i.textColor)}},hn=(n,i)=>{var f,g,x;const o=((f=n==null?void 0:n.background)==null?void 0:f.type)==="image"?"image":"color",c=ji(((g=n==null?void 0:n.background)==null?void 0:g.color)??null,i.background.color),u=o==="image"?Fa(((x=n==null?void 0:n.background)==null?void 0:x.image)??null):null;return{background:{type:o,color:c,image:o==="image"?u:null},fontFamily:jg((n==null?void 0:n.fontFamily)??null,i.fontFamily),fontSize:_g((n==null?void 0:n.fontSize)??null,i.fontSize),textColor:ji((n==null?void 0:n.textColor)??null,i.textColor)}},Cn={navigation:{brand:"OUIOUITACOS",brandLogo:"/logo-brand.svg",staffLogo:"/logo-staff.svg",links:{home:"Accueil",about:"À propos",menu:"Menu",contact:"Contact",loginCta:"Staff Login"},style:Cg},hero:{title:"Le Goût Authentique du Mexique",subtitle:"Des tacos préparés avec passion, des ingrédients frais et une touche de tradition pour un voyage gustatif inoubliable.",ctaLabel:"Commander en ligne",backgroundImage:"https://picsum.photos/seed/tacosbg/1920/1080",historyTitle:"Vos dernières commandes",reorderCtaLabel:"Commander à nouveau",style:kg},about:{title:"Notre Histoire",description:"Fondé par des passionnés de la cuisine mexicaine, OUIOUITACOS est né d'un désir simple : partager le goût authentique des tacos faits maison. Chaque recette est un héritage familial, chaque ingrédient est choisi avec soin, et chaque plat est préparé avec le cœur. Venez découvrir une explosion de saveurs qui vous transportera directement dans les rues de Mexico.",image:null,style:Tg},menu:{title:"Nos Best-sellers",ctaLabel:"Voir le menu complet & Commander",loadingLabel:"Chargement du menu...",image:null,style:Eg},instagramReviews:{title:"Ils nous adorent sur Instagram",subtitle:"Des foodies de toute la Colombie partagent leur coup de cœur pour notre cuisine : ambiance solaire, service attentionné et assiettes qui brillent autant que leurs stories.",image:"https://picsum.photos/seed/instagramreviews/600/600",style:Mg,reviews:Ci.reduce((n,i)=>(n[i]={...z1[i]},n),{})},findUs:{title:"Encuéntranos",addressLabel:"Dirección",address:`Cra. 53 #75-98
Barranquilla, Atlántico
Colombie`,cityLabel:"Email",city:"hola@ouiouipos.co",hoursLabel:"Horarios",hours:"Lunes a domingo · 11h00 - 23h00",mapLabel:"Ver en Google Maps",mapUrl:"https://www.google.com/maps?q=OUIOUITACOS%2C%20Cra%2053%20%2375-98%2C%20Barranquilla%2C%20Atl%C3%A1ntico%2C%20Colombie",style:Ag},footer:{text:"Tous droits réservés.",style:zg},onlineOrdering:{schedule:{startTime:"11:00",endTime:"23:00"},closedTitle:"Commandes en ligne indisponibles",closedSubtitle:"Revenez durant nos horaires de service pour commander vos plats préférés."},elementStyles:Og,elementRichText:Dg,assets:Pd},Rd=n=>{var o,c,u,f,g,x,p,y,v,N,j,S,w,E,C,B,L,$,U,G,se,W,K,oe,Y,Z,I,q,O,ne,_,T,A,P,Q,D,H,M,ce,de,be,te,re,xe,Ne,ze,Ve;const i=Cn;return{navigation:{brand:Le((o=n==null?void 0:n.navigation)==null?void 0:o.brand,i.navigation.brand),brandLogo:Ga((c=n==null?void 0:n.navigation)==null?void 0:c.brandLogo,i.navigation.brandLogo),staffLogo:Ga((u=n==null?void 0:n.navigation)==null?void 0:u.staffLogo,i.navigation.staffLogo),links:{home:Le((g=(f=n==null?void 0:n.navigation)==null?void 0:f.links)==null?void 0:g.home,i.navigation.links.home),about:Le((p=(x=n==null?void 0:n.navigation)==null?void 0:x.links)==null?void 0:p.about,i.navigation.links.about),menu:Le((v=(y=n==null?void 0:n.navigation)==null?void 0:y.links)==null?void 0:v.menu,i.navigation.links.menu),contact:Le((j=(N=n==null?void 0:n.navigation)==null?void 0:N.links)==null?void 0:j.contact,i.navigation.links.contact),loginCta:Le((w=(S=n==null?void 0:n.navigation)==null?void 0:S.links)==null?void 0:w.loginCta,i.navigation.links.loginCta)},style:pn((E=n==null?void 0:n.navigation)==null?void 0:E.style,i.navigation.style)},hero:{title:Le((C=n==null?void 0:n.hero)==null?void 0:C.title,i.hero.title),subtitle:Le((B=n==null?void 0:n.hero)==null?void 0:B.subtitle,i.hero.subtitle),ctaLabel:Le((L=n==null?void 0:n.hero)==null?void 0:L.ctaLabel,i.hero.ctaLabel),backgroundImage:Ga(($=n==null?void 0:n.hero)==null?void 0:$.backgroundImage,i.hero.backgroundImage),historyTitle:Le((U=n==null?void 0:n.hero)==null?void 0:U.historyTitle,i.hero.historyTitle),reorderCtaLabel:Le((G=n==null?void 0:n.hero)==null?void 0:G.reorderCtaLabel,i.hero.reorderCtaLabel),style:pn((se=n==null?void 0:n.hero)==null?void 0:se.style,i.hero.style)},about:{title:Le((W=n==null?void 0:n.about)==null?void 0:W.title,i.about.title),description:Le((K=n==null?void 0:n.about)==null?void 0:K.description,i.about.description),image:Ga((oe=n==null?void 0:n.about)==null?void 0:oe.image,i.about.image),style:pn((Y=n==null?void 0:n.about)==null?void 0:Y.style,i.about.style)},menu:{title:Le((Z=n==null?void 0:n.menu)==null?void 0:Z.title,i.menu.title),ctaLabel:Le((I=n==null?void 0:n.menu)==null?void 0:I.ctaLabel,i.menu.ctaLabel),loadingLabel:Le((q=n==null?void 0:n.menu)==null?void 0:q.loadingLabel,i.menu.loadingLabel),image:Ga((O=n==null?void 0:n.menu)==null?void 0:O.image,i.menu.image),style:pn((ne=n==null?void 0:n.menu)==null?void 0:ne.style,i.menu.style)},instagramReviews:{title:Le((_=n==null?void 0:n.instagramReviews)==null?void 0:_.title,i.instagramReviews.title),subtitle:Le((T=n==null?void 0:n.instagramReviews)==null?void 0:T.subtitle,i.instagramReviews.subtitle),image:Ga((A=n==null?void 0:n.instagramReviews)==null?void 0:A.image,i.instagramReviews.image),style:pn((P=n==null?void 0:n.instagramReviews)==null?void 0:P.style,i.instagramReviews.style),reviews:O1(((Q=n==null?void 0:n.instagramReviews)==null?void 0:Q.reviews)??null,i.instagramReviews.reviews)},findUs:{title:Le((D=n==null?void 0:n.findUs)==null?void 0:D.title,i.findUs.title),addressLabel:Le((H=n==null?void 0:n.findUs)==null?void 0:H.addressLabel,i.findUs.addressLabel),address:Le((M=n==null?void 0:n.findUs)==null?void 0:M.address,i.findUs.address),cityLabel:Le((ce=n==null?void 0:n.findUs)==null?void 0:ce.cityLabel,i.findUs.cityLabel),city:Le((de=n==null?void 0:n.findUs)==null?void 0:de.city,i.findUs.city),hoursLabel:Le((be=n==null?void 0:n.findUs)==null?void 0:be.hoursLabel,i.findUs.hoursLabel),hours:Le((te=n==null?void 0:n.findUs)==null?void 0:te.hours,i.findUs.hours),mapLabel:Le((re=n==null?void 0:n.findUs)==null?void 0:re.mapLabel,i.findUs.mapLabel),mapUrl:Le((xe=n==null?void 0:n.findUs)==null?void 0:xe.mapUrl,i.findUs.mapUrl),style:pn((Ne=n==null?void 0:n.findUs)==null?void 0:Ne.style,i.findUs.style)},footer:{text:Le((ze=n==null?void 0:n.footer)==null?void 0:ze.text,i.footer.text),style:pn((Ve=n==null?void 0:n.footer)==null?void 0:Ve.style,i.footer.style)},onlineOrdering:V1(n==null?void 0:n.onlineOrdering,i.onlineOrdering),elementStyles:R1((n==null?void 0:n.elementStyles)??null,i.elementStyles),elementRichText:L1((n==null?void 0:n.elementRichText)??null,i.elementRichText),assets:F1((n==null?void 0:n.assets)??null,Pd)}},V1=(n,i)=>{var o,c;return{schedule:{startTime:gh(((o=n==null?void 0:n.schedule)==null?void 0:o.startTime)??null,i.schedule.startTime),endTime:gh(((c=n==null?void 0:n.schedule)==null?void 0:c.endTime)??null,i.schedule.endTime)},closedTitle:Le((n==null?void 0:n.closedTitle)??null,i.closedTitle),closedSubtitle:Le((n==null?void 0:n.closedSubtitle)??null,i.closedSubtitle)}},Q1=n=>({navigation:{brand:Ue(n.navigation.brand),brandLogo:Fa(n.navigation.brandLogo)??null,staffLogo:Fa(n.navigation.staffLogo)??null,links:{home:Ue(n.navigation.links.home),about:Ue(n.navigation.links.about),menu:Ue(n.navigation.links.menu),contact:Ue(n.navigation.links.contact),loginCta:Ue(n.navigation.links.loginCta)},style:hn(n.navigation.style,Cg)},hero:{title:Ue(n.hero.title),subtitle:Ue(n.hero.subtitle),ctaLabel:Ue(n.hero.ctaLabel),backgroundImage:Fa(n.hero.backgroundImage),historyTitle:Ue(n.hero.historyTitle),reorderCtaLabel:Ue(n.hero.reorderCtaLabel),style:hn(n.hero.style,kg)},about:{title:Ue(n.about.title),description:Ue(n.about.description),image:Fa(n.about.image),style:hn(n.about.style,Tg)},menu:{title:Ue(n.menu.title),ctaLabel:Ue(n.menu.ctaLabel),loadingLabel:Ue(n.menu.loadingLabel),image:Fa(n.menu.image),style:hn(n.menu.style,Eg)},instagramReviews:{title:Ue(n.instagramReviews.title),subtitle:Ue(n.instagramReviews.subtitle),image:Fa(n.instagramReviews.image),style:hn(n.instagramReviews.style,Mg),reviews:D1(n.instagramReviews.reviews??null)},findUs:{title:Ue(n.findUs.title),addressLabel:Ue(n.findUs.addressLabel),address:Ue(n.findUs.address),cityLabel:Ue(n.findUs.cityLabel),city:Ue(n.findUs.city),hoursLabel:Ue(n.findUs.hoursLabel),hours:Ue(n.findUs.hours),mapLabel:Ue(n.findUs.mapLabel),mapUrl:Ue(n.findUs.mapUrl),style:hn(n.findUs.style,Ag)},footer:{text:Ue(n.footer.text),style:hn(n.footer.style,zg)},onlineOrdering:{schedule:{startTime:xh(n.onlineOrdering.schedule.startTime,Cn.onlineOrdering.schedule.startTime),endTime:xh(n.onlineOrdering.schedule.endTime,Cn.onlineOrdering.schedule.endTime)},closedTitle:Ue(n.onlineOrdering.closedTitle),closedSubtitle:Ue(n.onlineOrdering.closedSubtitle)},elementStyles:U1(n.elementStyles,Og),elementRichText:q1(n.elementRichText,Dg),assets:Y1(n.assets,Pd)}),Vs={},Wr=n=>{Vs[n]&&Vs[n].forEach(i=>i())};let bl=null;const bh="site_content",X1="default",K1=()=>{if(!(bl||typeof fe.channel!="function"))try{bl=fe.channel("orders-updates").on("postgres_changes",{event:"*",schema:"public",table:"orders"},()=>Wr("orders_updated")).on("postgres_changes",{event:"*",schema:"public",table:"order_items"},()=>Wr("orders_updated")).on("postgres_changes",{event:"*",schema:"public",table:"restaurant_tables"},()=>Wr("orders_updated")).subscribe(n=>{(n==="CHANNEL_ERROR"||n==="CLOSED"||n==="TIMED_OUT")&&(bl=null)})}catch(n){console.warn("Failed to subscribe to real-time order updates",n)}},qe=n=>{if(n.error)throw new Error(n.error.message);return n.data},_n=n=>{if(n.error&&n.status!==406)throw new Error(n.error.message);return n.data??null},Na=n=>{if(n)return new Date(n).getTime()},Aa=n=>{if(n==null)return;if(typeof n=="number")return n;const i=Number(n);return Number.isFinite(i)?i:void 0},hl=n=>{if(n!==void 0)return n===null?null:new Date(n).toISOString()},lo=(n,i)=>n.reduce((o,c)=>{const u=i.get(c.ingredient_id);if(!u)return o;let f=u.prix_unitaire;return(u.unite==="kg"||u.unite==="L")&&(f=f/1e3),o+f*c.qte_utilisee},0),Z1=n=>{if(!n)return{permissions:{},homePage:void 0};const{[Sn]:i,...o}=n;return{permissions:o,homePage:typeof i=="string"?i:void 0}},yh=(n,i)=>{const o={...n};return i?o[Sn]=i:delete o[Sn],o},P1=n=>{if(!n)return!1;const i=n.trim().toLowerCase();return i===bg.ADMIN||i==="administrateur"},J1=(n,i)=>{const o={...n};return gs in o||(o[gs]=P1(i)?"editor":"none"),o},hi=(n,i)=>{const{permissions:o,homePage:c}=Z1(n.permissions),u=J1(o,n.name),f={id:n.id,name:n.name,homePage:c,permissions:u};return i&&n.pin&&(f.pin=n.pin),f},vh=n=>n!=null&&n.content?Rd(n.content):null,eo=n=>({id:n.id,nom:n.nom,unite:n.unite,stock_minimum:n.stock_minimum,stock_actuel:n.stock_actuel,prix_unitaire:n.prix_unitaire}),Ud=n=>({id:n.id,nom:n.nom}),W1=n=>({ingredient_id:n.ingredient_id,qte_utilisee:n.qte_utilisee}),Fs=(n,i)=>{const o=(n.product_recipes??[]).map(W1),c={id:n.id,nom_produit:n.nom_produit,description:n.description??void 0,prix_vente:n.prix_vente,categoria_id:n.categoria_id,estado:n.estado,image:Jh(n.image),recipe:o,is_best_seller:n.is_best_seller??!1,best_seller_rank:n.best_seller_rank??null};return i&&(c.cout_revient=lo(o,i)),c},xn=n=>!!n&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(n),Rg=n=>({id:n.id,produitRef:n.produit_id,nom_produit:n.nom_produit,prix_unitaire:Aa(n.prix_unitaire)??0,quantite:n.quantite,excluded_ingredients:n.excluded_ingredients??[],commentaire:n.commentaire??"",estado:n.estado,date_envoi:Na(n.date_envoi)}),e2=(n,i)=>n.length!==i.length?!1:n.every((o,c)=>o===i[c]),t2=(n,i)=>{if(n.produitRef!==i.produitRef||n.nom_produit!==i.nom_produit||n.prix_unitaire!==i.prix_unitaire||n.quantite!==i.quantite||n.commentaire!==i.commentaire||n.estado!==i.estado)return!1;const o=[...n.excluded_ingredients].sort(),c=[...i.excluded_ingredients].sort();return e2(o,c)},a2=(n,i)=>{const o=[...i],c=[];return n.forEach(u=>{const f=o.findIndex(g=>t2(g,u));f!==-1&&c.push(o.splice(f,1)[0])}),[...c,...o]},us=n=>{const i=(n.order_items??[]).map(Rg),o=Aa(n.total),c=Aa(n.profit),u={id:n.id,type:n.type,table_id:n.table_id??void 0,table_nom:n.table_nom??void 0,couverts:n.couverts??0,statut:n.statut,estado_cocina:n.estado_cocina,date_creation:Na(n.date_creation)??Date.now(),date_envoi_cuisine:Na(n.date_envoi_cuisine),date_listo_cuisine:Na(n.date_listo_cuisine),date_servido:Na(n.date_servido),payment_status:n.payment_status,items:i,total:o??0,profit:c,payment_method:n.payment_method??void 0,payment_receipt_url:n.payment_receipt_url??void 0,receipt_url:n.receipt_url??void 0};return(n.client_nom||n.client_telephone||n.client_adresse)&&(u.clientInfo={nom:n.client_nom??"",telephone:n.client_telephone??"",adresse:n.client_adresse??void 0}),u.subtotal=Aa(n.subtotal)??0,u.total_discount=Aa(n.total_discount)??0,u.promo_code=n.promo_code??void 0,u.applied_promotions=n.applied_promotions?typeof n.applied_promotions=="string"?JSON.parse(n.applied_promotions):n.applied_promotions:[],u},Ld=n=>{const i=n.items.map(w=>Math.max(0,w.prix_unitaire)*Math.max(0,w.quantite)),o=i.reduce((w,E)=>w+E,0),c=Math.max(n.subtotal??0,0),u=o>0?o:c,f=Math.max(n.total_discount??0,0),g=u>0?Math.min(f,u):0,x=i.map(w=>{if(u<=0||w<=0||g<=0)return 0;const E=w/u*g;return Math.min(w,E)}),p=x.reduce((w,E)=>w+E,0),y=g-p;if(Math.abs(y)>1e-6&&x.length>0){const w=x.length-1,E=i[w],C=Math.min(E,Math.max(0,x[w]+y));x[w]=C}const v=x.map((w,E)=>{const C=i[E]-w;return C>0?C:0}),N=v.reduce((w,E)=>w+E,0),j=typeof n.shipping_cost=="number"?n.shipping_cost:0,S=n.total??Math.max(N+j,0);return{grossPerItem:i,discountPerItem:x,netPerItem:v,subtotalBeforeDiscount:u,totalDiscount:g,netRevenueFromItems:N,totalRevenue:S}},s2=n=>({id:n.id,orderId:n.order_id,productId:n.product_id,productName:n.product_name,categoryId:n.category_id,categoryName:n.category_name,quantity:n.quantity,unitPrice:n.unit_price,totalPrice:n.total_price,unitCost:n.unit_cost,totalCost:n.total_cost,profit:n.profit,paymentMethod:n.payment_method??void 0,saleDate:Na(n.sale_date)??Date.now()}),n2=(n,i)=>{if(!n.commande_id)return"libre";const o=i==null?void 0:i.estado_cocina;return!o||o==="no_enviado"?"libre":o==="listo"?"para_entregar":o==="servido"||o==="entregada"?"para_pagar":n.statut==="para_entregar"||n.statut==="para_pagar"?n.statut:"en_cuisine"},qd=(n,i)=>{const o=n.commande_id?i.get(n.commande_id):void 0,c={id:n.id,nom:n.nom,capacite:n.capacite,statut:n2(n,o),commandeId:n.commande_id??void 0,couverts:n.commande_id?n.couverts??void 0:void 0};return c.commandeId&&o&&(c.estado_cocina=o.estado_cocina,c.date_envoi_cuisine=o.date_envoi_cuisine),c},jh=async n=>{if(!n.commande_id)return qd(n,new Map);const i=await fe.from("orders").select("id, estado_cocina, date_envoi_cuisine").eq("id",n.commande_id).maybeSingle(),o=_n(i),c=o?new Map([[o.id,{estado_cocina:o.estado_cocina,date_envoi_cuisine:Na(o.date_envoi_cuisine)}]]):new Map;return qd(n,c)},Ys=()=>fe.from("orders").select(`
        id,
        type,
        table_id,
        table_nom,
        couverts,
        statut,
        estado_cocina,
        date_creation,
        date_envoi_cuisine,
        date_listo_cuisine,
        date_servido,
        payment_status,
        total,
        profit,
        payment_method,
        payment_receipt_url,
        client_nom,
        client_telephone,
        client_adresse,
        receipt_url,
        order_items (
          id,
          order_id,
          produit_id,
          nom_produit,
          prix_unitaire,
          quantite,
          excluded_ingredients,
          commentaire,
          estado,
          date_envoi
        ),
        subtotal,
        total_discount,
        promo_code,
        applied_promotions
      `).order("date_creation",{ascending:!1}),l2=(n,i)=>`
        id,
        nom_produit,
        description,
        prix_vente,
        categoria_id,
        estado,
        image${n?`,
        is_best_seller,
        best_seller_rank`:""}${i?`,
        product_recipes (
          ingredient_id,
          qte_utilisee
        )`:""}
      `,_h=n=>{const i=(n==null?void 0:n.includeBestSellerColumns)!==!1,o=(n==null?void 0:n.includeRecipes)!==!1;let c=fe.from("products").select(l2(i,o));return n!=null&&n.orderBy?c=c.order(n.orderBy.column,{ascending:n.orderBy.ascending??!0,nullsFirst:n.orderBy.nullsFirst}):c=c.order("nom_produit"),c},i2=n=>{if(!(n!=null&&n.message))return!1;const i=n.message.toLowerCase();return i.includes("does not exist")&&i.includes("column")&&(i.includes("is_best_seller")||i.includes("best_seller_rank"))},Nn=async(n,i)=>{let c=await n(_h({...i,includeBestSellerColumns:!0}),!0);return i2(c.error)&&(c=await n(_h({...i,includeBestSellerColumns:!1}),!1)),c},r2=n=>n==="sur_place"||n==="a_emporter"||n==="pedir_en_linea"?n:"a_emporter",o2=n=>n==="en_cours"||n==="finalisee"||n==="pendiente_validacion"?n:"pendiente_validacion",c2=n=>n==="paid"||n==="unpaid"?n:"unpaid",d2=n=>{if(!n)return null;const i=n.trim().toLowerCase();return i==="tarjeta"||i==="card"||i==="credit_card"||i==="debit_card"||i==="carte"||i==="carte_bancaire"||i==="pago_online"||i==="online"?"tarjeta":i==="efectivo"||i==="cash"||i==="liquide"||i==="contado"?"efectivo":i==="transferencia"||i==="transfer"||i==="bank_transfer"||i==="transfert"?"transferencia":null},At=async n=>{const i=await Ys().eq("id",n).maybeSingle(),o=_n(i);return o?us(o):null},gl=async()=>{const n=await fe.from("ingredients").select("id, nom, unite, stock_minimum, stock_actuel, prix_unitaire").order("nom");return qe(n).map(eo)},u2=n=>n?typeof n=="string"?n.toLowerCase().includes("permission"):n instanceof Error?n.message.toLowerCase().includes("permission"):typeof n=="object"&&"message"in n?String(n.message??"").toLowerCase().includes("permission"):!1:!1,wd=async n=>{try{return await gl()}catch(i){if(u2(i))return console.warn(`[api.${n}] Impossible de récupérer les ingrédients (permissions insuffisantes). Poursuite avec une liste vide.`,i),[];throw i}},to=async()=>{const n=await fe.from("categories").select("id, nom").order("nom");return qe(n).map(Ud)},Nh=async()=>{const n=await fe.from("restaurant_tables").select("id, nom, capacite, statut, commande_id, couverts").order("nom"),i=qe(n),o=i.map(u=>u.commande_id).filter(u=>!!u);let c=new Map;if(o.length>0){const u=await fe.from("orders").select("id, estado_cocina, date_envoi_cuisine").in("id",o),f=qe(u);c=new Map(f.map(g=>[g.id,{estado_cocina:g.estado_cocina,date_envoi_cuisine:Na(g.date_envoi_cuisine)}]))}return i.map(u=>qd(u,c))},_i=(n=new Date)=>{const i=new Date(n);return i.setHours(5,0,0,0),n<i&&i.setDate(i.getDate()-1),i},m2={week:{days:7,label:"7 derniers jours"},month:{days:30,label:"30 derniers jours"}},f2=n=>{const i=m2[n],o=new Date(_i());o.setDate(o.getDate()+1);const c=new Date(o);return c.setDate(c.getDate()-i.days),{config:i,start:c,end:o}},wh=async n=>{if(!n.items.length)return await fe.from("sales").delete().eq("order_id",n.id),await fe.from("orders").update({profit:0}).eq("id",n.id),0;const i=Array.from(new Set(n.items.map(w=>w.produitRef))),o=i.length>0?Nn(w=>w.in("id",i)):Nn(w=>w.limit(0)),[c,u,f]=await Promise.all([to(),gl(),o]),g=new Map(u.map(w=>[w.id,w])),x=new Map(c.map(w=>[w.id,w.nom]));let p=[];i.length>0&&(p=qe(f));const y=new Map(p.map(w=>{const E=Fs(w,g);return[E.id,E]})),v=hl(n.date_servido)??new Date().toISOString(),N=Ld(n),j=n.items.map((w,E)=>({item:w,index:E})).filter(({item:w})=>xn(w.produitRef)).map(({item:w,index:E})=>{const C=y.get(w.produitRef),B=C?lo(C.recipe,g):0,L=(C==null?void 0:C.categoria_id)??"unknown",$=C?x.get(L)??"Sans catégorie":"Sans catégorie",U=N.netPerItem[E]??w.prix_unitaire*w.quantite,G=w.quantite>0?U/w.quantite:0,se=B*w.quantite,W=U-se;return{order_id:n.id,product_id:w.produitRef,product_name:w.nom_produit,category_id:L,category_name:$,quantity:w.quantite,unit_price:G,total_price:U,unit_cost:B,total_cost:se,profit:W,payment_method:n.payment_method??null,sale_date:v}}),S=j.reduce((w,E)=>w+E.profit,0);return await fe.from("sales").delete().eq("order_id",n.id),await fe.from("sales").insert(j),await fe.from("orders").update({profit:S}).eq("id",n.id),S},$a={subscribe:(n,i)=>(Vs[n]||(Vs[n]=[]),Vs[n].push(i),n==="orders_updated"&&K1(),()=>{var o;Vs[n]=(Vs[n]??[]).filter(c=>c!==i),n==="orders_updated"&&((o=Vs[n])==null?void 0:o.length)===0&&bl&&(typeof fe.removeChannel=="function"&&fe.removeChannel(bl),bl=null)}),publish:n=>{Wr(n)}},bt=n=>{(n==null?void 0:n.includeNotifications)!==!1&&$a.publish("notifications_updated"),$a.publish("orders_updated")},ye={notifications:$a,getSiteContent:async()=>{const n=await fe.from(bh).select("id, content, updated_at").order("updated_at",{ascending:!1}).limit(1).maybeSingle(),i=_n(n);return vh(i)},updateSiteContent:async n=>{const i=Q1(n),o=await fe.from(bh).upsert({id:X1,content:i},{onConflict:"id"}).select("id, content, updated_at").single(),c=qe(o),u=vh(c);if(!u)throw new Error("Contenu du site introuvable après la mise à jour.");return u},getRoles:async()=>{const n=await fe.from("roles").select("id, name, pin, permissions").order("name");return qe(n).map(o=>hi(o,!0))},getRoleById:async n=>{const i=await fe.from("roles").select("id, name, permissions").eq("id",n).maybeSingle(),o=_n(i);return o?hi(o,!1):null},createRole:async n=>{const i=await fe.from("roles").insert({name:n.name,pin:n.pin,permissions:yh(n.permissions,n.homePage)}).select("id, name, pin, permissions").single(),o=qe(i);return $a.publish("notifications_updated"),hi(o,!0)},updateRole:async(n,i)=>{const o=await fe.from("roles").update({name:i.name,pin:i.pin,permissions:yh(i.permissions,i.homePage)}).eq("id",n).select("id, name, pin, permissions").single(),c=qe(o);return $a.publish("notifications_updated"),hi(c,!0)},deleteRole:async n=>{const i=await fe.from("roles").delete().eq("id",n);qe(i),$a.publish("notifications_updated")},loginWithPin:async n=>{const i=await fe.from("roles").select("id, name, permissions").eq("pin",n).maybeSingle(),o=_n(i);if(!o)return null;const c=hi(o,!1);try{await dh(c.id,c.name)}catch(u){console.warn("Failed to enregistrer la connexion du rôle",u)}return c},getDashboardStats:async(n="week")=>{var zt;const{config:i,start:o,end:c}=f2(n),u=o.toISOString(),f=c.toISOString(),g=new Date(o);g.setDate(g.getDate()-i.days);const x=g.toISOString(),y=_i().toISOString(),[v,N,j,S,w,E]=await Promise.all([Nh(),gl(),to(),Nn(ge=>ge),Ys().eq("statut","finalisee").gte("date_creation",y),Ys().eq("statut","finalisee").gte("date_creation",x).lt("date_creation",f)]),B=qe(w).map(us),$=qe(E).map(us),U=$.filter(ge=>ge.date_creation>=o.getTime()),G=$.filter(ge=>ge.date_creation<o.getTime()),se=new Map(N.map(ge=>[ge.id,ge])),W=qe(S),K=new Map(W.map(ge=>{const ke=Fs(ge,se);return[ke.id,ke]})),oe=new Map(j.map(ge=>[ge.id,ge.nom])),Y=new Map,Z=ge=>{const ke=Y.get(ge.id);if(ke)return ke;const Ae=Ld(ge);return Y.set(ge.id,Ae),Ae},I=ge=>ge.reduce((ke,Ae)=>{const Me=Z(Ae);return ke+Ae.items.reduce((Je,it,St)=>{const aa=K.get(it.produitRef),Qe=aa?lo(aa.recipe,se):0,ua=Me.netPerItem[St]??it.prix_unitaire*it.quantite;return Je+(ua-Qe*it.quantite)},0)},0),q=hl((zt=B[0])==null?void 0:zt.date_servido)??new Date().toISOString(),O=B.flatMap(ge=>{const ke=Z(ge);return ge.items.map((Ae,Me)=>{const Je=K.get(Ae.produitRef),it=Je?lo(Je.recipe,se):0,St=(Je==null?void 0:Je.categoria_id)??"unknown",aa=Je?oe.get(St)??"Sans catégorie":"Sans catégorie",Qe=ke.netPerItem[Me]??Ae.prix_unitaire*Ae.quantite,ua=Ae.quantite>0?Qe/Ae.quantite:0,Ca=it*Ae.quantite,ht=Qe-Ca;return{order_id:ge.id,product_id:Ae.produitRef,product_name:Ae.nom_produit,category_id:St,category_name:aa,quantity:Ae.quantite,unit_price:ua,total_price:Qe,unit_cost:it,total_cost:Ca,profit:ht,payment_method:ge.payment_method??null,sale_date:q}})}),ne=B.reduce((ge,ke)=>ge+Z(ke).totalRevenue,0);O.reduce((ge,ke)=>ge+ke.profit,0),B.reduce((ge,ke)=>ge+(ke.couverts??0),0),B.length>0&&ne/B.length;const _=U.reduce((ge,ke)=>ge+Z(ke).totalRevenue,0),T=G.reduce((ge,ke)=>ge+Z(ke).totalRevenue,0),A=I(U),P=I(G),Q=U.reduce((ge,ke)=>ge+(ke.couverts??0),0),D=G.reduce((ge,ke)=>ge+(ke.couverts??0),0),H=U.length>0?_/U.length:0,M=U.length,ce=G.length,de=new Map;U.forEach(ge=>{const ke=Z(ge);ge.items.forEach((Ae,Me)=>{const Je=K.get(Ae.produitRef),it=Je?oe.get(Je.categoria_id)??"Sans catégorie":"Sans catégorie",St=ke.netPerItem[Me]??Ae.prix_unitaire*Ae.quantite;de.set(it,(de.get(it)??0)+St)})});const be=Array.from(de.entries()).map(([ge,ke])=>({name:ge,value:ke})),te=[...U].sort((ge,ke)=>ke.date_creation-ge.date_creation).slice(0,5),re=Array.from(K.values()).filter(ge=>ge.is_best_seller).sort((ge,ke)=>{const Ae=ge.best_seller_rank??Number.POSITIVE_INFINITY,Me=ke.best_seller_rank??Number.POSITIVE_INFINITY;return Ae===Me?ge.nom_produit.localeCompare(ke.nom_produit):Ae-Me}).slice(0,6),xe=v.filter(ge=>ge.statut!=="libre").length,Ne=v.reduce((ge,ke)=>ge+(ke.couverts??0),0),ze=B.filter(ge=>ge.estado_cocina==="recibido").length,Ve=N.filter(ge=>ge.stock_actuel<=ge.stock_minimum),Dt=(ge,ke,Ae)=>{const Me=ke.getTime(),Je=Ae.getTime();return ge.reduce((it,St)=>St.date_creation>=Me&&St.date_creation<Je?it+Z(St).totalRevenue:it,0)},xt=Array.from({length:i.days}).map((ge,ke)=>{const Ae=new Date(o);Ae.setDate(Ae.getDate()+ke);const Me=new Date(Ae);Me.setDate(Me.getDate()+1);const Je=new Date(g);Je.setDate(Je.getDate()+ke);const it=new Date(Je);return it.setDate(it.getDate()+1),{name:i.days===7?ke===i.days-1?"Auj":`J-${i.days-1-ke}`:Ae.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit"}),ventes:Dt(U,Ae,Me),ventesPeriodePrecedente:Dt(G,Je,it)}});return{period:n,periodLabel:i.label,periodStart:u,periodEnd:f,ventesPeriode:_,ventesPeriodePrecedente:T,beneficePeriode:A,beneficePeriodePrecedente:P,clientsPeriode:Q,clientsPeriodePrecedente:D,panierMoyen:H,commandesPeriode:M,commandesPeriodePrecedente:ce,tablesOccupees:xe,clientsActuels:Ne,commandesEnCuisine:ze,ingredientsStockBas:Ve,ventesPeriodeSeries:xt,ventesParCategorie:be,recentOrders:te,bestSellerProducts:re}},getSalesByProduct:async n=>{const i=y=>{if(y)return typeof y=="string"?y:y.toISOString()},o=i(n==null?void 0:n.start)??_i().toISOString(),c=i(n==null?void 0:n.end);let u=fe.from("sales").select("product_id, product_name, total_price").gte("sale_date",o);c&&(u=u.lt("sale_date",c));const f=await u,g=qe(f),x=new Map;g.forEach(y=>{const v=x.get(y.product_id)??{name:y.product_name,value:0};v.value+=y.total_price,x.set(y.product_id,v)});const p=Array.from(x.values()).sort((y,v)=>v.value-y.value);if(p.length>6){const y=p.slice(0,6),v=p.slice(6).reduce((N,j)=>N+j.value,0);return[...y,{name:"Autres",value:v}]}return p},getTables:async()=>Nh(),createTable:async n=>{const i=await fe.from("restaurant_tables").insert({nom:n.nom,capacite:n.capacite,couverts:n.couverts??null}).select("id, nom, capacite, statut, commande_id, couverts").single(),o=qe(i);return bt(),jh(o)},updateTable:async(n,i)=>{const o={};i.nom!==void 0&&(o.nom=i.nom),i.capacite!==void 0&&(o.capacite=i.capacite),i.couverts!==void 0&&(o.couverts=i.couverts??null);const c=await fe.from("restaurant_tables").update(o).eq("id",n).select("id, nom, capacite, statut, commande_id, couverts").single(),u=qe(c);return bt(),jh(u)},deleteTable:async n=>{const i=await fe.from("restaurant_tables").delete().eq("id",n);qe(i),bt()},getIngredients:async()=>gl(),getProducts:async()=>{const[n,i]=await Promise.all([Nn(u=>u.neq("estado","archive")),wd("getProducts")]),o=qe(n),c=i.length>0?new Map(i.map(u=>[u.id,u])):void 0;return o.map(u=>Fs(u,c))},getProductById:async n=>{const[i,o]=await Promise.all([Nn(f=>f.eq("id",n).maybeSingle()),wd("getProductById")]),c=_n(i);if(!c)return null;const u=o.length>0?new Map(o.map(f=>[f.id,f])):void 0;return Fs(c,u)},getBestSellerProducts:async()=>{const[n,i]=await Promise.all([Nn((u,f)=>f?u.eq("is_best_seller",!0).order("best_seller_rank",{ascending:!0,nullsFirst:!1}).limit(6):u.limit(0),{includeRecipes:!1}),wd("getBestSellerProducts")]),o=qe(n),c=i.length>0?new Map(i.map(u=>[u.id,u])):void 0;return o.filter(u=>u.estado!=="archive").sort((u,f)=>{const g=u.best_seller_rank??Number.POSITIVE_INFINITY,x=f.best_seller_rank??Number.POSITIVE_INFINITY;return g-x}).map(u=>Fs(u,c)).filter(u=>u.is_best_seller).slice(0,6)},getCategories:async()=>to(),addProduct:async n=>{const i=ps(n.image),o=await fe.from("products").insert({nom_produit:n.nom_produit,description:n.description??null,prix_vente:n.prix_vente,categoria_id:n.categoria_id,estado:n.estado,image:i,is_best_seller:n.is_best_seller??!1,best_seller_rank:n.is_best_seller?n.best_seller_rank:null}).select("id, nom_produit, description, prix_vente, categoria_id, estado, image, is_best_seller, best_seller_rank").single(),c=qe(o);return n.recipe.length>0&&await fe.from("product_recipes").insert(n.recipe.map(u=>({product_id:c.id,ingredient_id:u.ingredient_id,qte_utilisee:u.qte_utilisee}))),bt(),Fs({...c,product_recipes:n.recipe.map(u=>({ingredient_id:u.ingredient_id,qte_utilisee:u.qte_utilisee}))})},createProduct:async(n,i)=>{let o;i&&(o=await fe.storage.from("product-images").upload(`${n.nom_produit}-${Date.now()}`,i).then(f=>{var g;if(f.error)throw f.error;return(g=f.data)==null?void 0:g.path}));const c=await fe.from("products").insert({nom_produit:n.nom_produit,description:n.description??null,prix_vente:n.prix_vente,categoria_id:n.categoria_id,estado:n.estado,image:o??null}).select("id, nom_produit, description, prix_vente, categoria_id, estado, image").single(),u=qe(c);return n.recipe.length>0&&await fe.from("product_recipes").insert(n.recipe.map(f=>({product_id:u.id,ingredient_id:f.ingredient_id,qte_utilisee:f.qte_utilisee}))),bt(),Fs({...u,product_recipes:n.recipe.map(f=>({...f,product_id:u.id}))})},updateProduct:async(n,i,o)=>{let c;o?c=await fe.storage.from("product-images").upload(`${i.nom_produit??n}-${Date.now()}`,o).then(g=>{var x;if(g.error)throw g.error;return(x=g.data)==null?void 0:x.path}):"image"in i&&i.image===null&&(c=null);const u={};i.nom_produit!==void 0&&(u.nom_produit=i.nom_produit),i.description!==void 0&&(u.description=i.description),i.prix_vente!==void 0&&(u.prix_vente=i.prix_vente),i.categoria_id!==void 0&&(u.categoria_id=i.categoria_id),i.estado!==void 0&&(u.estado=i.estado),c!==void 0&&(u.image=c),Object.keys(u).length>0&&await fe.from("products").update(u).eq("id",n),i.recipe&&(await fe.from("product_recipes").delete().eq("product_id",n),i.recipe.length>0&&await fe.from("product_recipes").insert(i.recipe.map(g=>({product_id:n,ingredient_id:g.ingredient_id,qte_utilisee:g.qte_utilisee})))),bt();const f=await ye.getProductById(n);if(!f)throw new Error("Product not found after update");return f},deleteProduct:async n=>{const i=await ye.getProductById(n);if(i!=null&&i.image){const o=i.image.split("/").pop();o&&await fe.storage.from("product-images").remove([o])}await fe.from("product_recipes").delete().eq("product_id",n),await fe.from("products").delete().eq("id",n),bt()},createCategory:async n=>{const i=await fe.from("categories").insert(n).select("id, nom").single(),o=qe(i);return bt(),Ud(o)},updateCategory:async(n,i)=>{const o=await fe.from("categories").update(i).eq("id",n).select("id, nom").single(),c=qe(o);return bt(),Ud(c)},deleteCategory:async n=>{await fe.from("categories").delete().eq("id",n),bt()},createIngredient:async n=>{const i=await fe.from("ingredients").insert({nom:n.nom,unite:n.unite,stock_minimum:n.stock_minimum,stock_actuel:0,prix_unitaire:0}).select("id, nom, unite, stock_minimum, stock_actuel, prix_unitaire").single(),o=qe(i);return $a.publish("notifications_updated"),eo(o)},updateIngredient:async(n,i)=>{const o=await fe.from("ingredients").update(i).eq("id",n).select("id, nom, unite, stock_minimum, stock_actuel, prix_unitaire").single(),c=qe(o);return $a.publish("notifications_updated"),eo(c)},resupplyIngredient:async(n,i,o)=>{if(!Number.isFinite(i)||i<=0)throw new Error("Quantity must be a positive number");if(!Number.isFinite(o)||o<0)throw new Error("Unit price must be a non-negative number");const c=await fe.from("ingredients").select("id, nom, unite, stock_minimum, stock_actuel, prix_unitaire").eq("id",n).single(),u=qe(c),f=Aa(u.stock_actuel)??0,g=Aa(u.prix_unitaire)??0,x=Number(i),p=f+x,y=f*g+x*o,v=p>0?y/p:0,N=await fe.from("ingredients").update({stock_actuel:p,prix_unitaire:v}).eq("id",n).select("id, nom, unite, stock_minimum, stock_actuel, prix_unitaire").single(),j=qe(N),S=await fe.from("purchases").insert({ingredient_id:n,quantite_achetee:x,prix_total:x*o,date_achat:new Date().toISOString()});if(S.error)throw new Error(S.error.message);return $a.publish("notifications_updated"),eo(j)},deleteIngredient:async n=>{const i=await fe.from("product_recipes").select("ingredient_id, product_id, qte_utilisee").eq("ingredient_id",n).limit(1),{data:o}=i;return o&&o.length>0?{success:!1}:(await fe.from("ingredients").delete().eq("id",n),$a.publish("notifications_updated"),{success:!0})},getKitchenOrders:async()=>{const n=await Ys().eq("estado_cocina","recibido"),o=qe(n).map(us),c=[];return o.forEach(u=>{const f=u.items.filter(x=>x.estado==="enviado");if(f.length===0)return;f.reduce((x,p)=>{const y=p.date_envoi??u.date_envoi_cuisine??u.date_creation,v=x.get(y)??[];return v.push(p),x.set(y,v),x},new Map).forEach((x,p)=>{c.push({...u,items:x,date_envoi_cuisine:p,ticketKey:`${u.id}-${p}`})})}),c.sort((u,f)=>{const g=u.date_envoi_cuisine??u.date_creation,x=f.date_envoi_cuisine??f.date_creation;return g-x})},getTakeawayOrders:async()=>{const n=await Ys().in("type",["a_emporter","pedir_en_linea"]),o=qe(n).map(us);return{pending:o.filter(c=>c.statut==="pendiente_validacion"&&c.estado_cocina==="no_enviado"),ready:o.filter(c=>c.estado_cocina==="listo")}},getOrderById:async n=>await At(n)??void 0,createOrGetOrderByTableId:async(n,i)=>{const o=await fe.from("restaurant_tables").select("id, nom, capacite, statut, commande_id, couverts").eq("id",n).maybeSingle(),c=_n(o);if(!c)throw new Error("Table not found");if(c.commande_id){const y=await At(c.commande_id);if(y)return y}const u=(i==null?void 0:i.couverts)??c.couverts??null;if(!Number.isInteger(u)||u<=0)throw new Error("Le nombre de couverts sélectionné est requis pour ouvrir la table.");const f=u,g=new Date().toISOString(),x=await fe.from("orders").insert({type:"sur_place",table_id:c.id,table_nom:c.nom,couverts:f,statut:"en_cours",estado_cocina:"no_enviado",date_creation:g,payment_status:"unpaid",total:0}).select("*").single(),p=qe(x);return await fe.from("restaurant_tables").update({statut:"en_cuisine",commande_id:p.id,couverts:f}).eq("id",n),bt(),us(p)},cancelUnsentTableOrder:async n=>{const i=await At(n);!i||i.estado_cocina!=="no_enviado"||i.items.some(c=>c.estado!=="en_attente")||(await fe.from("order_items").delete().eq("order_id",n),await fe.from("orders").delete().eq("id",n),i.table_id&&await fe.from("restaurant_tables").update({statut:"libre",commande_id:null,couverts:null}).eq("id",i.table_id),bt())},addOrderItems:async(n,i)=>{const o=new Date().toISOString(),c=i.map(f=>({...f,order_id:n,estado:"en_attente",date_envoi:o}));await fe.from("order_items").insert(c),bt();const u=await At(n);if(!u)throw new Error("Order not found after adding items");return u},updateOrderItems:async(n,i)=>{const o=await At(n);if(!o)throw new Error("Order not found");const c=new Set(o.items.map(v=>v.id)),u=new Set(i.map(v=>v.id)),f=i.filter(v=>!c.has(v.id)),g=i.filter(v=>c.has(v.id)),x=o.items.filter(v=>!u.has(v.id)),p=new Date().toISOString();f.length>0&&await fe.from("order_items").insert(f.map(v=>({...v,order_id:n,estado:"en_attente",date_envoi:p}))),g.length>0&&await Promise.all(g.map(v=>fe.from("order_items").update({produit_id:v.produitRef,nom_produit:v.nom_produit,prix_unitaire:v.prix_unitaire,quantite:v.quantite,excluded_ingredients:v.excluded_ingredients??[],commentaire:v.commentaire,estado:v.estado??"en_attente",date_envoi:v.date_envoi?new Date(v.date_envoi).toISOString():p}).eq("id",v.id))),x.length>0&&await fe.from("order_items").delete().in("id",x.map(v=>v.id)),bt();const y=await At(n);if(!y)throw new Error("Order not found after item update");return y},updateOrder:async(n,i,o)=>{const{items:c,clientInfo:u,removedItemIds:f=[],...g}=i;let x=[];if(c){const j=await At(n);if(!j)throw new Error("Order not found");x=j.items;const S=new Set(x.map(C=>C.id)),w=c.filter(C=>!xn(C.id)||!S.has(C.id)),E=c.filter(C=>xn(C.id)&&S.has(C.id));w.length>0&&await fe.from("order_items").insert(w.map(C=>({...xn(C.id)?{id:C.id}:{},order_id:n,produit_id:C.produitRef,nom_produit:C.nom_produit,prix_unitaire:C.prix_unitaire,quantite:C.quantite,excluded_ingredients:C.excluded_ingredients??[],commentaire:C.commentaire??null,estado:C.estado??"en_attente",date_envoi:C.date_envoi?new Date(C.date_envoi).toISOString():null}))),E.length>0&&await Promise.all(E.map(C=>fe.from("order_items").update({produit_id:C.produitRef,nom_produit:C.nom_produit,prix_unitaire:C.prix_unitaire,quantite:C.quantite,excluded_ingredients:C.excluded_ingredients??[],commentaire:C.commentaire??null,estado:C.estado??"en_attente",date_envoi:C.date_envoi?new Date(C.date_envoi).toISOString():null}).eq("id",C.id)))}const p={};g.type&&(p.type=g.type),g.table_id!==void 0&&(p.table_id=g.table_id),g.table_nom!==void 0&&(p.table_nom=g.table_nom),g.couverts!==void 0&&(p.couverts=g.couverts),g.statut&&(p.statut=g.statut),g.estado_cocina&&(p.estado_cocina=g.estado_cocina),g.payment_status&&(p.payment_status=g.payment_status),g.payment_method!==void 0&&(p.payment_method=g.payment_method),g.payment_receipt_url!==void 0&&(p.payment_receipt_url=g.payment_receipt_url),g.receipt_url!==void 0&&(p.receipt_url=g.receipt_url),g.total!==void 0&&(p.total=g.total),g.profit!==void 0&&(p.profit=g.profit),g.date_creation!==void 0&&(p.date_creation=hl(g.date_creation)),g.date_envoi_cuisine!==void 0&&(p.date_envoi_cuisine=hl(g.date_envoi_cuisine)),g.date_listo_cuisine!==void 0&&(p.date_listo_cuisine=hl(g.date_listo_cuisine)),g.date_servido!==void 0&&(p.date_servido=hl(g.date_servido)),c&&(p.total=c.reduce((j,S)=>j+S.prix_unitaire*S.quantite,0));const y=new Set((c??[]).map(j=>j.id)),v=new Set;f.filter(j=>xn(j)).forEach(j=>v.add(j)),x.filter(j=>xn(j.id)&&!y.has(j.id)).forEach(j=>v.add(j.id)),v.size>0&&await fe.from("order_items").delete().in("id",Array.from(v)),u&&(p.client_nom=(u==null?void 0:u.nom)??null,p.client_telephone=(u==null?void 0:u.telephone)??null,p.client_adresse=(u==null?void 0:u.adresse)??null),Object.keys(p).length>0&&await fe.from("orders").update(p).eq("id",n),bt({includeNotifications:(o==null?void 0:o.includeNotifications)??!0});const N=await At(n);if(!N)throw new Error("Order not found after update");return c?{...N,items:a2(c,N.items)}:N},sendOrderToKitchen:async(n,i)=>{const o=await At(n);if(!o)throw new Error("Order not found");const c=o.items.filter(p=>p.estado==="en_attente"),u=(()=>{if(!i||i.length===0)return c;const p=new Set(i);return c.filter(y=>p.has(y.id))})();if(u.length===0)return o;const f=u.filter(p=>xn(p.id)).map(p=>p.id);if(f.length===0)return o;const g=new Date().toISOString();await fe.from("order_items").update({estado:"enviado",date_envoi:g}).in("id",f),await fe.from("orders").update({estado_cocina:"recibido",date_envoi_cuisine:g}).eq("id",n),o.table_id&&await fe.from("restaurant_tables").update({statut:"en_cuisine"}).eq("id",o.table_id),bt();const x=await At(n);if(!x)throw new Error("Order not found after sending to kitchen");return x},markOrderAsReady:async n=>{const i=new Date().toISOString();await fe.from("orders").update({estado_cocina:"listo",date_listo_cuisine:i}).eq("id",n);const o=await At(n);o!=null&&o.table_id&&await fe.from("restaurant_tables").update({statut:"para_entregar"}).eq("id",o.table_id),bt();const c=await At(n);if(!c)throw new Error("Order not found after ready update");return c},markOrderAsServed:async n=>{const i=await At(n);if(!i)throw new Error("Order not found");const o=new Date().toISOString();await fe.from("orders").update({estado_cocina:"servido",date_servido:o}).eq("id",n),i.table_id&&await fe.from("restaurant_tables").update({statut:"para_pagar"}).eq("id",i.table_id),bt();const c=await At(n);if(!c)throw new Error("Order not found after serve update");return c},finalizeOrder:async(n,i,o)=>{const c=await At(n);if(!c)throw new Error("Order not found");const u=new Date().toISOString();await fe.from("orders").update({statut:"finalisee",payment_status:"paid",payment_method:i,payment_receipt_url:o??null,date_servido:u,total:c.total,subtotal:c.subtotal,total_discount:c.total_discount,promo_code:c.promo_code,applied_promotions:c.applied_promotions?JSON.stringify(c.applied_promotions):null}).eq("id",n),c.table_id&&await fe.from("restaurant_tables").update({statut:"libre",commande_id:null,couverts:null}).eq("id",c.table_id),bt();const f=await At(n);if(!f)throw new Error("Order not found after finalization");const g=await wh(f);return{...f,profit:g}},submitCustomerOrder:async n=>{var g,x,p;const o=new Date().toISOString(),c=await fe.from("orders").insert({type:"a_emporter",couverts:1,statut:"pendiente_validacion",estado_cocina:"no_enviado",date_creation:o,payment_status:"unpaid",total:n.total??n.items.reduce((y,v)=>y+v.prix_unitaire*v.quantite,0),client_nom:((g=n.clientInfo)==null?void 0:g.nom)??null,client_telephone:((x=n.clientInfo)==null?void 0:x.telephone)??null,client_adresse:((p=n.clientInfo)==null?void 0:p.adresse)??null,receipt_url:n.receipt_url??null,subtotal:n.subtotal??null,total_discount:n.total_discount??null,promo_code:n.promo_code??null,applied_promotions:n.applied_promotions?JSON.stringify(n.applied_promotions):null}).select("*").single(),u=qe(c);if(n.items.length>0){const y=n.items.map(N=>{const j=N.produitRef&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(N.produitRef);return{order_id:u.id,produit_id:j?N.produitRef:null,nom_produit:N.nom_produit,prix_unitaire:N.prix_unitaire,quantite:N.quantite,excluded_ingredients:N.excluded_ingredients??[],commentaire:N.commentaire,estado:N.estado??"en_attente",date_envoi:N.date_envoi?new Date(N.date_envoi).toISOString():null}}),v=await fe.from("order_items").insert(y);if(v.error)throw console.error("Error inserting order items:",v.error),new Error(`Failed to insert order items: ${v.error.message}`)}bt();const f=await At(u.id);if(!f)throw new Error("Order not found after creation");return f},getCustomerOrderStatus:async n=>At(n),validateTakeawayOrder:async n=>{const i=new Date().toISOString(),o=await fe.from("orders").update({statut:"en_cours",estado_cocina:"recibido",payment_status:"paid",payment_method:"tarjeta",date_envoi_cuisine:i}).eq("id",n);if(o.error)throw console.error("Failed to update takeaway order status",o.error),new Error(`Failed to update takeaway order status: ${o.error.message}`);const c=await fe.from("order_items").update({estado:"enviado",date_envoi:i}).eq("order_id",n);if(c.error)throw console.error("Failed to mark takeaway order items as sent",c.error),new Error(`Failed to mark takeaway order items as sent: ${c.error.message}`);bt();const u=await At(n);if(!u)throw new Error("Order not found after validation");return u},markTakeawayAsDelivered:async n=>{await fe.from("orders").update({statut:"finalisee",estado_cocina:"entregada",payment_method:"transferencia"}).eq("id",n),bt();const i=await At(n);if(!i)throw new Error("Order not found after delivery");const o=await wh(i);return{...i,profit:o}},getNotificationCounts:async()=>{const n=await Ys(),o=qe(n).map(us),c=u=>u.type==="a_emporter"||u.type==="pedir_en_linea";return{pendingTakeaway:o.filter(u=>c(u)&&u.statut==="pendiente_validacion"&&u.estado_cocina==="no_enviado").length,readyTakeaway:o.filter(u=>c(u)&&u.estado_cocina==="listo").length,kitchenOrders:o.filter(u=>u.estado_cocina==="recibido").length,lowStockIngredients:(await gl()).filter(u=>u.stock_actuel<=u.stock_minimum).length,readyForService:o.filter(u=>u.type==="sur_place"&&u.estado_cocina==="listo").length}},generateDailyReport:async()=>{const n=new Date,i=_i(n),o=i.toISOString();mh(o);const[c,u,f,g]=await Promise.all([Ys().eq("statut","finalisee"),to(),gl(),Nn(I=>I)]);let x=[],p=!1;try{x=await uh(o)}catch(I){console.warn("Failed to fetch role logins for daily report",I),p=!0}const v=qe(c).map(us),N=i.getTime(),j=n.getTime(),S=v.filter(I=>{const q=I.date_servido??I.date_listo_cuisine??I.date_creation;return q>=N&&q<=j}),w=new Map,E=I=>{const q=w.get(I.id);if(q)return q;const O=Ld(I);return w.set(I.id,O),O},C=S.reduce((I,q)=>I+(q.type==="sur_place"?Math.max(q.couverts??0,0):0),0),B=S.filter(I=>I.type==="pedir_en_linea").length,L=C+B;let $=0,U=0;const G=new Map(f.map(I=>[I.id,I])),se=qe(g),W=new Map(se.map(I=>{const q=Fs(I,G);return[q.id,q]})),K=new Map(u.map(I=>[I.id,I.nom])),oe=new Map;S.forEach(I=>{const q=E(I);$+=q.totalRevenue,U+=q.totalDiscount,I.items.forEach((O,ne)=>{const _=W.get(O.produitRef),T=_?K.get(_.categoria_id)??"Sans catégorie":"Sans catégorie",A=_?_.categoria_id:"unknown",P=oe.get(A)??{categoryName:T,products:[]},Q=P.products.find(H=>H.id===O.produitRef),D=q.netPerItem[ne]??O.prix_unitaire*O.quantite;Q?(Q.quantity+=O.quantite,Q.totalSales+=D):P.products.push({id:O.produitRef,name:O.nom_produit,quantity:O.quantite,totalSales:D}),oe.set(A,P)})}),oe.forEach(I=>{I.products.sort((q,O)=>O.quantity-q.quantity)});const Y=f.filter(I=>I.stock_actuel<=I.stock_minimum),Z=S.length>0?$/S.length:0;return{generatedAt:n.toISOString(),startDate:i.toISOString(),clientsDuJour:L,clientsSurPlace:C,clientsEnLigne:B,panierMoyen:Z,ventesDuJour:$,totalPromotionsApplied:U,soldProducts:Array.from(oe.values()),lowStockIngredients:Y,roleLogins:x,roleLoginsUnavailable:p}},getSalesHistory:async()=>{const n=await fe.from("sales").select("*").order("sale_date",{ascending:!1});return qe(n).map(s2)},getFinalizedOrders:async()=>{const n=await Ys().eq("statut","finalisee");return qe(n).map(us)},createOrder:async n=>{var v,N,j;const i=r2(n.order_type??n.type),o=o2(n.status??n.statut),c=c2(n.payment_status),u=d2(n.payment_method),f={type:i,statut:o,estado_cocina:"no_enviado",payment_status:c,date_creation:new Date().toISOString(),total:n.total??0,subtotal:n.subtotal??0,total_discount:n.total_discount??0,promo_code:n.promo_code||null,applied_promotions:n.applied_promotions?JSON.stringify(n.applied_promotions):null,payment_method:u,payment_receipt_url:n.receipt_url||null,receipt_url:n.receipt_url||null,client_nom:n.client_name||((v=n.clientInfo)==null?void 0:v.nom)||null,client_telephone:n.client_phone||((N=n.clientInfo)==null?void 0:N.telephone)||null,client_adresse:n.client_address||((j=n.clientInfo)==null?void 0:j.adresse)||null},g=await fe.from("orders").insert(f).select(`
        id,
        type,
        table_id,
        table_nom,
        couverts,
        statut,
        estado_cocina,
        date_creation,
        date_envoi_cuisine,
        date_listo_cuisine,
        date_servido,
        payment_status,
        total,
        profit,
        payment_method,
        payment_receipt_url,
        client_nom,
        client_telephone,
        client_adresse,
        receipt_url,
        subtotal,
        total_discount,
        promo_code,
        applied_promotions
      `).single(),x=qe(g),p=[];if(n.items&&n.items.length>0){const S=n.items.map(C=>({order_id:x.id,produit_id:C.produitRef,nom_produit:C.nom_produit,prix_unitaire:C.prix_unitaire,quantite:C.quantite,excluded_ingredients:C.excluded_ingredients||[],commentaire:C.commentaire||null,estado:"en_attente"})),w=await fe.from("order_items").insert(S).select("*"),E=qe(w);p.push(...E.map(Rg))}const y={id:x.id,type:x.type,table_id:x.table_id??void 0,table_nom:x.table_nom??void 0,couverts:x.couverts??0,statut:x.statut,estado_cocina:x.estado_cocina,date_creation:Na(x.date_creation)??Date.now(),date_envoi_cuisine:Na(x.date_envoi_cuisine),date_listo_cuisine:Na(x.date_listo_cuisine),date_servido:Na(x.date_servido),payment_status:x.payment_status,items:p,total:Aa(x.total)??0,profit:Aa(x.profit),payment_method:x.payment_method??void 0,payment_receipt_url:x.payment_receipt_url??void 0,receipt_url:x.receipt_url??void 0,subtotal:Aa(x.subtotal),total_discount:Aa(x.total_discount),promo_code:x.promo_code??void 0,applied_promotions:x.applied_promotions?typeof x.applied_promotions=="string"?JSON.parse(x.applied_promotions):x.applied_promotions:void 0};return(x.client_nom||x.client_telephone||x.client_adresse)&&(y.clientInfo={nom:x.client_nom??"",telephone:x.client_telephone??"",adresse:x.client_adresse??void 0}),bt({includeNotifications:!0}),y},logins:{fetchSince:uh,clearBefore:mh,log:dh}};let Gr=null;const Ti=()=>{const[n,i]=h.useState(Gr),[o,c]=h.useState(!0),[u,f]=h.useState(null),g=h.useCallback(async()=>{c(!0);try{const p=await ye.getSiteContent(),y=Rd(p??void 0);Gr=y,i(y),f(null)}catch(p){console.error("Failed to fetch site content",p),Gr=Cn,i(Cn),f(p instanceof Error?p.message:"Impossible de charger le contenu du site.")}finally{c(!1)}},[]),x=h.useCallback(async p=>{const y=await ye.updateSiteContent(p),v=Rd(y);return i(v),Gr=v,v},[]);return h.useEffect(()=>{g()},[g]),{content:n,loading:o,error:u,refresh:g,updateContent:x}},Ug=h.createContext(void 0),p2=({children:n})=>{const[i,o]=h.useState(null),[c,u]=h.useState(!0);h.useEffect(()=>{(async()=>{try{const y=localStorage.getItem("oui-oui-tacos-role"),v=localStorage.getItem("oui-oui-tacos-session");if(!y||!v){localStorage.removeItem("oui-oui-tacos-role"),localStorage.removeItem("oui-oui-tacos-session");return}const N=JSON.parse(y),j=JSON.parse(v);if(!(N!=null&&N.id)||j.roleId!==N.id){localStorage.removeItem("oui-oui-tacos-role"),localStorage.removeItem("oui-oui-tacos-session"),o(null);return}const S=await ye.getRoleById(N.id);S?(o(S),localStorage.setItem("oui-oui-tacos-role",JSON.stringify(S)),localStorage.setItem("oui-oui-tacos-session",JSON.stringify({roleId:S.id,authenticatedAt:Date.now()}))):(localStorage.removeItem("oui-oui-tacos-role"),localStorage.removeItem("oui-oui-tacos-session"),o(null))}catch(y){console.error("Failed to restore role:",y),localStorage.removeItem("oui-oui-tacos-role"),localStorage.removeItem("oui-oui-tacos-session"),o(null)}finally{u(!1)}})()},[]);const f=h.useCallback(async p=>{u(!0);try{const y=await ye.loginWithPin(p);if(!y)throw new Error("PIN invalide");return o(y),localStorage.setItem("oui-oui-tacos-role",JSON.stringify(y)),localStorage.setItem("oui-oui-tacos-session",JSON.stringify({roleId:y.id,authenticatedAt:Date.now()})),y}finally{u(!1)}},[]),g=h.useCallback(()=>{o(null),localStorage.removeItem("oui-oui-tacos-role"),localStorage.removeItem("oui-oui-tacos-session")},[]),x=h.useCallback(async()=>{if(i!=null&&i.id)try{const p=await ye.getRoleById(i.id);p?(o(p),localStorage.setItem("oui-oui-tacos-role",JSON.stringify(p)),localStorage.setItem("oui-oui-tacos-session",JSON.stringify({roleId:p.id,authenticatedAt:Date.now()}))):g()}catch(p){console.error("Failed to refresh role:",p)}},[g,i==null?void 0:i.id]);return a.jsx(Ug.Provider,{value:{role:i,loading:c,login:f,logout:g,refreshRole:x},children:n})},Va=()=>{const n=h.useContext(Ug);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n},io=n=>n==="editor"||n==="readonly",Jd=n=>{if(!n)return null;const{homePage:i,permissions:o}=n;if(i&&io(o==null?void 0:o[i]))return i;const c=ta.find(u=>io(o==null?void 0:o[u.permissionKey]));return c?c.href:null},h2=["a[href]","button:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(","),g2=({isOpen:n,onClose:i,notifications:o,onReportClick:c})=>{const{role:u,logout:f}=Va(),g=Xs(),x=h.useRef(null),p=h.useRef(null),y=()=>{f(),g("/")},v=u==null?void 0:u.permissions,N=h.useMemo(()=>ta.filter(E=>{const C=v==null?void 0:v[E.permissionKey];return io(C)}),[v]),j=h.useMemo(()=>N.find(E=>E.permissionKey===gs),[N]),S=h.useMemo(()=>N.filter(E=>E.permissionKey!==gs),[N]);h.useEffect(()=>{var $;if(!n||typeof window<"u"&&window.matchMedia("(min-width: 768px)").matches)return;p.current=document.activeElement;const C=x.current,B=C==null?void 0:C.querySelectorAll(h2);($=B==null?void 0:B[0])==null||$.focus();const L=U=>{if(U.key==="Escape"&&(U.preventDefault(),i()),U.key==="Tab"&&B&&B.length>0){const G=B[0],se=B[B.length-1];U.shiftKey?document.activeElement===G&&(U.preventDefault(),se.focus()):document.activeElement===se&&(U.preventDefault(),G.focus())}};return document.addEventListener("keydown",L),()=>{var U,G;document.removeEventListener("keydown",L),(G=(U=p.current)==null?void 0:U.focus)==null||G.call(U)}},[n,i]);const w=()=>{typeof window<"u"&&window.matchMedia("(min-width: 768px)").matches||i()};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:`fixed inset-0 z-40 bg-black/50 transition-opacity duration-300 md:hidden ${n?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,"aria-hidden":!n,onClick:i}),a.jsxs("aside",{ref:x,className:`app-sidebar fixed inset-y-0 left-0 z-50 flex w-72 flex-col transition-transform duration-300 ease-in-out md:static md:z-auto md:w-64 md:translate-x-0 ${n?"translate-x-0":"-translate-x-full md:translate-x-0"}`,"aria-label":"Navegación principal",children:[a.jsxs("div",{className:"app-sidebar__header",children:[a.jsx("span",{className:"app-sidebar__brand",children:"OUIOUI"}),a.jsx("button",{onClick:i,className:"app-sidebar__close md:hidden","aria-label":"Cerrar el menú",children:a.jsx(fs,{size:20})})]}),a.jsxs("div",{className:"app-sidebar__content",children:[a.jsx("div",{className:"app-sidebar__scroll-region",children:a.jsx("nav",{className:"app-sidebar__nav",children:S.map(E=>{let C=null;return o&&(E.href==="/para-llevar"&&(o.pendingTakeaway>0||o.readyTakeaway>0)?C=a.jsxs("span",{className:"app-sidebar__badge-group",children:[o.pendingTakeaway>0&&a.jsx("span",{className:"app-sidebar__badge app-sidebar__badge--danger",title:`${o.pendingTakeaway} por validar`,children:o.pendingTakeaway}),o.readyTakeaway>0&&a.jsx("span",{className:"app-sidebar__badge app-sidebar__badge--success",title:`${o.readyTakeaway} listo(s)`,children:o.readyTakeaway})]}):E.href==="/ventes"&&o.readyForService>0?C=a.jsx("span",{className:"app-sidebar__badge-group",children:a.jsx("span",{className:"app-sidebar__badge app-sidebar__badge--danger",title:`${o.readyForService} pedido(s) listo(s)`,children:o.readyForService})}):E.href==="/cocina"&&o.kitchenOrders>0?C=a.jsx("span",{className:"app-sidebar__badge-group",children:a.jsx("span",{className:"app-sidebar__badge app-sidebar__badge--danger",children:o.kitchenOrders})}):E.href==="/ingredients"&&o.lowStockIngredients>0&&(C=a.jsx("span",{className:"app-sidebar__badge-group",children:a.jsx("span",{className:"app-sidebar__badge app-sidebar__badge--danger",children:o.lowStockIngredients})}))),a.jsxs(Pp,{to:E.href,onClick:w,className:({isActive:B})=>`app-sidebar__nav-link${B?" is-active":""}`,children:[a.jsx(E.icon,{size:22}),a.jsx("span",{children:E.name}),C]},E.name)})})}),a.jsxs("div",{className:"app-sidebar__section",children:[j&&a.jsxs(Pp,{to:j.href,onClick:w,className:({isActive:E})=>`app-sidebar__action${E?" is-active":""}`,children:[a.jsx(j.icon,{size:22}),a.jsx("span",{className:"font-semibold",children:j.name})]}),a.jsxs("button",{onClick:()=>{c(),w()},className:"app-sidebar__action",children:[a.jsx(cg,{size:22}),a.jsx("span",{className:"font-semibold",children:"Reporte"})]}),a.jsxs("button",{onClick:y,className:"app-sidebar__action app-sidebar__action--logout",children:[a.jsx(uv,{size:22}),a.jsx("span",{className:"font-semibold",children:"Cerrar sesión"})]})]})]})]})]})},Lt=16,wt=({isOpen:n,onClose:i,title:o,children:c,size:u="md",anchor:f=null,boundary:g=null})=>{const x={sm:"max-w-sm",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",half:""},p=h.useId(),y=h.useRef(null),[v,N]=h.useState(null);if(h.useLayoutEffect(()=>{if(!n){N(null);return}const W=()=>{if(!y.current)return;const Y=y.current.getBoundingClientRect(),{innerWidth:Z,innerHeight:I}=window,q=g?{top:Math.max(g.top+Lt,Lt),left:Math.max(g.left+Lt,Lt),right:Math.min(g.right-Lt,Z-Lt),bottom:Math.min(g.bottom-Lt,I-Lt)}:{top:Lt,left:Lt,right:Z-Lt,bottom:I-Lt},O=Math.max(q.right-q.left,0),ne=Math.max(q.bottom-q.top,0),_=Z/2,T=I/2;let A=_-Y.width/2;Y.width>O?A=q.left:A=Math.max(q.left,Math.min(A,q.right-Y.width));let P=T-Y.height/2;Y.height>ne?P=q.top:P=Math.max(q.top,Math.min(P,q.bottom-Y.height)),N({top:P,left:A})};let K=window.requestAnimationFrame(W);const oe=()=>{window.cancelAnimationFrame(K),K=window.requestAnimationFrame(W)};return window.addEventListener("resize",oe),window.addEventListener("scroll",oe,!0),()=>{window.cancelAnimationFrame(K),window.removeEventListener("resize",oe),window.removeEventListener("scroll",oe,!0)}},[f,g,n]),h.useEffect(()=>{if(!n)return;const W=K=>{K.key==="Escape"&&(K.preventDefault(),i())};return window.addEventListener("keydown",W),()=>{window.removeEventListener("keydown",W)}},[n,i]),!n)return null;const j=typeof window<"u"?window.innerWidth:null,S=typeof window<"u"?window.innerHeight:null,w=j!==null?Math.max(j-Lt*2,200):null,E=S!==null?Math.max(S-Lt*2,200):null,C=g!==null?Math.max(g.width-Lt*2,200):null,B=g!==null?Math.max(g.height-Lt*2,200):null,L=C!==null&&w!==null?Math.min(C,w):C??w,$=B!==null&&E!==null?Math.min(B,E):B??E,U=g&&typeof L=="number"?Math.min(Math.max(g.width*.6,320),L):g?Math.max(g.width*.6,320):null,G={position:"fixed",maxHeight:typeof $=="number"?`${Math.max($,200)}px`:`calc(100vh - ${Lt*2}px)`};u==="half"?(G.width="calc(100vw - 32px)",G.maxWidth="calc(100vw - 32px)",G.minWidth="320px"):U!==null?(G.width=`${U}px`,G.maxWidth=`${U}px`):G.maxWidth=typeof L=="number"?`${Math.max(L,260)}px`:`calc(100vw - ${Lt*2}px)`;const se=v?{top:v.top,left:v.left}:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"};return a.jsxs("div",{className:"fixed inset-0 z-50",children:[a.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:i}),a.jsxs("div",{ref:y,role:"dialog","aria-modal":"true","aria-labelledby":p,className:`fixed flex w-full flex-col overflow-hidden rounded-2xl bg-white shadow-2xl ${f&&g?"max-w-none":u==="half"?"lg:!w-[50vw] lg:!max-w-[50vw]":x[u]} sm:max-h-[90vh] focus:outline-none`,style:{...G,...se},onClick:W=>W.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 bg-white/80 px-4 py-3 sm:px-6",children:[a.jsx("h3",{id:p,className:"text-[clamp(1.05rem,2.2vw,1.4rem)] font-semibold leading-snug text-slate-900 break-words text-balance whitespace-normal [hyphens:auto]",children:o}),a.jsx("button",{type:"button",onClick:i,className:"rounded-full p-1.5 text-slate-500 transition-colors hover:bg-slate-100 hover:text-slate-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-500","aria-label":"Fermer la fenêtre modale",children:a.jsx(fs,{size:20})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-5 sm:px-6 sm:py-6",children:c})]})]})},x2=new Intl.NumberFormat("es-CO",{maximumFractionDigits:0}),b2=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0});function Lg(n){return Number.isFinite(n)?Math.round(n):0}function xi(n){return x2.format(Lg(n))}function me(n){return b2.format(Lg(n))}const Sd=({icon:n,label:i,value:o})=>a.jsxs("div",{className:"flex flex-col items-start gap-3 rounded-2xl border border-slate-200 bg-slate-50/80 p-4 shadow-sm sm:flex-row sm:items-center",children:[a.jsx("div",{className:"rounded-full bg-brand-primary/20 p-2 text-brand-primary sm:p-3",children:n}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500 sm:text-sm",children:i}),a.jsx("div",{className:"text-[clamp(1.1rem,2.5vw,1.6rem)] font-bold text-slate-800",children:o})]})]}),y2=({isOpen:n,onClose:i})=>{const[o,c]=h.useState(null),[u,f]=h.useState(!0),[g,x]=h.useState(null);h.useEffect(()=>{n&&(async()=>{f(!0),x(null);try{const S=await ye.generateDailyReport();c(S)}catch(S){console.error("Error al generar el informe diario",S),c(null),x("No fue posible generar el reporte diario. Intenta nuevamente más tarde.")}finally{f(!1)}})()},[n]);const p=j=>{const S=new Map;return j.forEach(w=>{const E=new Date(w.loginAt).toLocaleTimeString("es-CO",{hour:"2-digit",minute:"2-digit"}),C=S.get(w.roleName)??[];C.push(E),S.set(w.roleName,C)}),S},y=j=>{const S=[];S.push("*REPORTE OUIOUITACOS*"),S.push(`Generado el: ${new Date(j.generatedAt).toLocaleString("es-CO")}`),S.push(`Periodo: desde ${new Date(j.startDate).toLocaleString("es-CO")}`),S.push("---"),S.push("*Estadísticas del día*");const w=j.ventesDuJour+(j.totalPromotionsApplied??0);if(S.push(`- Ventas: *${me(j.ventesDuJour)}*`),S.push(`- Total facturado: *${me(w)}*`),S.push(`- Clientes: *${j.clientsDuJour}* (Sala: ${j.clientsSurPlace??0} | En línea: ${j.clientsEnLigne??0})`),S.push(`- Ticket promedio: *${me(j.panierMoyen)}*`),S.push(`- Total promociones aplicadas: *${me(j.totalPromotionsApplied??0)}*`),S.push("---"),S.push("*Productos vendidos*"),j.soldProducts.length===0?S.push("Ningún producto vendido."):j.soldProducts.forEach(E=>{S.push(`
_${E.categoryName}_`),E.products.forEach(C=>{S.push(`  - ${C.quantity}x ${C.name} (${me(C.totalSales)})`)})}),S.push("---"),S.push("*Inicios de sesión desde las 05:00*"),j.roleLoginsUnavailable)S.push("Inicios de sesión no disponibles en este dispositivo.");else{const E=p(j.roleLogins);E.size===0?S.push("No hay inicios de sesión registrados."):E.forEach((C,B)=>{S.push(`- ${B}: ${C.join(", ")}`)})}return S.push("---"),S.push("*Inventario bajo*"),j.lowStockIngredients.length===0?S.push("No hay ingredientes con inventario bajo."):j.lowStockIngredients.forEach(E=>{S.push(`- ${E.nom} (${E.stock_actuel} / ${E.stock_minimum} ${E.unite})`)}),encodeURIComponent(S.join(`
`))},v=()=>{if(!o)return;const S=`https://wa.me/?text=${y(o)}`;window.open(S,"_blank"),i()},N=o?o.ventesDuJour+(o.totalPromotionsApplied??0):0;return a.jsx(wt,{isOpen:n,onClose:i,title:"Reporte diario",size:"half",children:a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"max-h-[60vh] overflow-y-auto",children:[u&&a.jsx("p",{children:"Generando el reporte..."}),!u&&g&&a.jsx("div",{className:"mb-4 rounded-md border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:g}),!u&&!o&&!g&&a.jsx("p",{className:"text-red-500",children:"No fue posible generar el reporte."}),!u&&o&&a.jsxs("div",{className:"space-y-6",children:[o.roleLoginsUnavailable&&a.jsxs("div",{className:"rounded-md border border-yellow-200 bg-yellow-50 p-3 text-sm text-yellow-800 flex items-start gap-2",children:[a.jsx(Da,{className:"mt-0.5 h-4 w-4"}),a.jsx("span",{children:"Los inicios de sesión de los roles no están disponibles en este dispositivo (almacenamiento local inaccesible)."})]}),a.jsxs("div",{className:"text-center border-b pb-4",children:[a.jsx("h2",{className:"font-bold text-brand-secondary text-[clamp(1.5rem,3.5vw,2rem)]",children:"Reporte OUIOUITACOS"}),a.jsxs("p",{className:"text-gray-500 text-sm",children:["Generado el ",new Date(o.generatedAt).toLocaleString("es-CO")]}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Datos desde ",new Date(o.startDate).toLocaleString("es-CO")]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[a.jsx(Sd,{icon:a.jsx(ro,{}),label:"Ventas del día",value:me(o.ventesDuJour)}),a.jsx(Sd,{icon:a.jsx(Dd,{}),label:"Clientes del día",value:a.jsxs(a.Fragment,{children:[o.clientsDuJour,a.jsxs("span",{className:"mt-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:["Salle : ",o.clientsSurPlace??0," • En ligne : ",o.clientsEnLigne??0]})]})}),a.jsx(Sd,{icon:a.jsx(fg,{}),label:"Ticket promedio",value:me(o.panierMoyen)})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2 text-gray-800",children:[a.jsx(Qs,{size:20})," Productos vendidos"]}),a.jsxs("div",{className:"space-y-4",children:[o.soldProducts.map(j=>a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-brand-primary text-sm",children:j.categoryName}),a.jsx("ul",{className:"list-disc list-inside pl-2 text-gray-700 text-sm",children:j.products.map(S=>a.jsxs("li",{children:[S.quantity,"x ",S.name," - ",a.jsx("span",{className:"font-semibold",children:me(S.totalSales)})]},S.id))})]},j.categoryName)),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white px-3 py-2 text-slate-700 shadow-sm",children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide",children:"Total facturado"}),a.jsx("p",{className:"mt-1 text-xl font-bold",children:me(N)})]}),a.jsxs("div",{className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-emerald-700 shadow-sm",children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide",children:"Promotions appliquées"}),a.jsx("p",{className:"mt-1 text-xl font-bold",children:me(o.totalPromotionsApplied??0)})]})]})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2 text-gray-800",children:[a.jsx(cv,{size:20})," Inicios de sesión desde las 05:00"]}),o.roleLoginsUnavailable?a.jsx("p",{className:"text-gray-500 text-sm",children:"Inicios de sesión no disponibles: no es posible acceder al almacenamiento local."}):(()=>{const j=p(o.roleLogins);return j.size===0?a.jsx("p",{className:"text-gray-500 text-sm",children:"No hay inicios de sesión registrados desde las 05:00."}):a.jsx("ul",{className:"space-y-2",children:Array.from(j.entries()).map(([S,w])=>a.jsxs("li",{className:"flex justify-between items-center bg-slate-100 p-2 rounded-md text-sm",children:[a.jsx("span",{className:"font-semibold text-gray-800",children:S}),a.jsx("span",{className:"text-xs text-gray-600",children:w.join(", ")})]},S))})})()]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2 text-gray-800",children:[a.jsx(Da,{className:"text-orange-500",size:20})," Ingredientes con inventario bajo"]}),o.lowStockIngredients.length>0?a.jsx("ul",{className:"space-y-1",children:o.lowStockIngredients.map(j=>a.jsxs("li",{className:"flex justify-between items-center bg-orange-50 p-2 rounded-md text-orange-800 text-sm",children:[a.jsx("span",{children:j.nom}),a.jsxs("span",{className:"font-bold",children:[j.stock_actuel," / ",j.stock_minimum," ",j.unite]})]},j.id))}):a.jsx("p",{className:"text-gray-500 text-sm",children:"No hay ingredientes con inventario bajo."})]})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t mt-4",children:[a.jsx("button",{onClick:i,className:"w-full sm:w-auto bg-gray-200 text-gray-800 font-bold py-2.5 px-4 rounded-lg hover:bg-gray-300 transition text-sm",children:"Cerrar"}),a.jsxs("button",{onClick:v,disabled:u||!o,className:"w-full sm:w-auto bg-green-500 text-white font-bold py-2.5 px-4 rounded-lg hover:bg-green-600 transition flex items-center justify-center gap-2 disabled:bg-gray-400 disabled:cursor-not-allowed text-sm",children:[a.jsx(ug,{size:18})," Enviar por WhatsApp"]})]})]})})},v2=()=>{const[n,i]=h.useState(!1),{role:o}=Va(),[c,u]=h.useState(null),[f,g]=h.useState(!1),x=()=>i(!0),p=()=>i(!1);return h.useEffect(()=>{const y=async()=>{try{const N=await ye.getNotificationCounts();u(N)}catch(N){console.error("Failed to fetch notifications",N)}};y();const v=ye.notifications.subscribe("notifications_updated",y);return()=>{v()}},[]),h.useEffect(()=>{if(typeof window>"u")return;const y=()=>{window.innerWidth>=768&&i(!1)};return window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[]),a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"app-shell",children:[a.jsx(g2,{isOpen:n,onClose:p,notifications:c,onReportClick:()=>g(!0)}),a.jsxs("div",{className:"app-main",children:[a.jsxs("header",{className:"app-header",children:[a.jsx("button",{type:"button",onClick:x,className:"app-header__menu-button md:hidden","aria-label":"Abrir el menú",children:a.jsx(dg,{size:24})}),a.jsxs("h1",{className:"app-header__title",children:["Bienvenido, ",o==null?void 0:o.name]}),a.jsx("div",{className:"app-header__spacer md:hidden","aria-hidden":"true"})]}),a.jsx("main",{className:"app-content",children:a.jsx(bb,{})})]})]}),a.jsx(y2,{isOpen:f,onClose:()=>g(!1)})]})},j2=n=>{try{const i=localStorage.getItem("customer-order-history"),o=i?JSON.parse(i):[],c=o.findIndex(f=>f.id===n.id);c!==-1&&o.splice(c,1),o.unshift(n);const u=o.slice(0,10);localStorage.setItem("customer-order-history",JSON.stringify(u))}catch(i){console.error("Failed to save order to history:",i)}},_2=({orderId:n,onNewOrderClick:i,variant:o="page"})=>{var A,P,Q,D,H;const[c,u]=h.useState(null),[f,g]=h.useState(!0),[x,p]=h.useState(!1),y=[{name:"Enviado",icon:cg,description:"Commande transmise et en attente de validation."},{name:"Validado",icon:jn,description:"La commande est validée par l’équipe."},{name:"En preparacion",icon:lg,description:"La cuisine prépare activement votre commande."},{name:"Listo",icon:jv,description:"La commande est prête pour la remise ou la livraison."}];h.useMemo(()=>[{gradient:"from-brand-primary to-brand-primary-dark",border:"border-brand-primary/40",glow:"shadow-[0_10px_25px_rgba(249,168,38,0.35)]"},{gradient:"from-emerald-500 to-emerald-600",border:"border-emerald-200/70",glow:"shadow-[0_10px_25px_rgba(16,185,129,0.35)]"},{gradient:"from-sky-500 to-indigo-600",border:"border-sky-200/70",glow:"shadow-[0_10px_25px_rgba(56,189,248,0.35)]"},{gradient:"from-rose-500 to-red-600",border:"border-rose-200/70",glow:"shadow-[0_10px_25px_rgba(244,114,182,0.35)]"},{gradient:"from-amber-500 to-orange-600",border:"border-amber-200/70",glow:"shadow-[0_10px_25px_rgba(251,191,36,0.35)]"}],[]);const v=h.useCallback(M=>M?M.statut==="finalisee"||M.estado_cocina==="servido"||M.estado_cocina==="entregada"||M.estado_cocina==="listo"?3:M.estado_cocina==="recibido"||M.statut==="en_cours"?2:M.statut==="pendiente_validacion"||M.estado_cocina==="no_enviado"?1:0:-1,[]),N=h.useMemo(()=>v(c),[c,v]),j=h.useRef(null),S=Math.max(y.length-1,1),w=!!(c&&(c.statut==="finalisee"||c.estado_cocina==="servido"||c.estado_cocina==="entregada"||c.estado_cocina==="listo")),E=Math.max(0,N),C=S>0?Math.min(100,(w?S:E)/S*100):100,B=Math.max(0,Math.min(100,C)),L=`${B}-${w?"complete":"active"}`,$=h.useMemo(()=>({"--tracker-progress-target":`${B}%`}),[B]);h.useEffect(()=>{if(o!=="hero")return;const M=j.current;M&&M.style.setProperty("--tracker-progress-target",`${B}%`)},[o,B]),h.useEffect(()=>{let M=!0,ce=null,de,be=!1;const te=async()=>{if(!be){be=!0;try{const re=await ye.getCustomerOrderStatus(n);if(M){if(u(re),(re==null?void 0:re.statut)==="finalisee"||(re==null?void 0:re.estado_cocina)==="servido"||(re==null?void 0:re.estado_cocina)==="entregada"){ce&&(clearInterval(ce),ce=null),j2(re);const xe=re.date_servido??Date.now();Qh(re.id,xe+Vh)}if(!re){const xe=no();(xe==null?void 0:xe.orderId)===n&&Xh()}}}catch(re){console.error("Failed to fetch order status",re)}finally{M&&g(re=>re&&!1),be=!1}}};return g(!0),u(null),te(),ce=setInterval(te,5e3),de=ye.notifications.subscribe("orders_updated",te),()=>{M=!1,ce&&clearInterval(ce),de&&de()}},[n]);const U=o==="page"?"container mx-auto p-4 lg:p-8":"w-full px-4 pt-0 pb-4 sm:pt-1 sm:pb-5 flex justify-center",G=o==="page"?"bg-white/95 p-6 rounded-xl shadow-2xl max-w-2xl mx-auto":"max-w-4xl mx-auto",se="border-t pt-6 mt-6 space-y-4 relative md:w-1/2 md:mx-auto";if(f)return a.jsx("div",{className:U,children:"Chargement du suivi de commande..."});if(!c)return o==="hero"?null:a.jsx("div",{className:U,children:a.jsxs("div",{className:G,children:[a.jsx("h2",{className:"text-2xl font-bold mb-4 text-red-600",children:"Commande non trouvée"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Nous n'avons pas pu retrouver votre commande."}),a.jsx("button",{onClick:i,className:"bg-brand-primary text-brand-secondary font-bold py-3 px-6 rounded-lg hover:bg-yellow-400 transition",children:"Passer une nouvelle commande"})]})});c.subtotal??c.total;const W=c.total_discount??0,K=(((A=c.applied_promotions)==null?void 0:A.length)??0)>0,oe=c.type==="a_emporter",Y=((P=c.clientInfo)==null?void 0:P.nom)??c.client_name??"",Z=((Q=c.clientInfo)==null?void 0:Q.telephone)??c.client_phone??"",I=((D=c.clientInfo)==null?void 0:D.adresse)??c.client_address??"",q=!!(Y||Z||I),O=M=>M.type==="free_shipping"?a.jsx(xg,{size:16}):M.type==="percentage"?a.jsx(jl,{size:16}):M.type==="buy_x_get_y"?a.jsx(Od,{size:16}):a.jsx(wi,{size:16}),ne=K?c.applied_promotions.map((M,ce)=>{const de=typeof M.config=="object"&&M.config!==null?M.config:void 0;de==null||de.promo_code;const be=M.visuals||null,te=(be==null?void 0:be.badge_bg_color)||"#4CAF50",re=M.discount_amount||0;return a.jsxs("div",{className:"flex items-center rounded-xl shadow-lg transition-transform hover:scale-[1.01] overflow-hidden h-11",style:{backgroundColor:te},"aria-label":`Promotion ${M.name}`,children:[a.jsx("div",{className:"flex items-center justify-center w-11 flex-shrink-0",style:{color:(be==null?void 0:be.badge_color)||"#FFFFFF"},children:O(M)}),a.jsxs("div",{className:"flex-1 px-2.5 flex items-center justify-between min-w-0 gap-2",children:[a.jsx("p",{className:"font-bold text-white text-sm sm:text-base truncate",children:M.name}),a.jsxs("span",{className:"text-sm sm:text-base font-bold text-white whitespace-nowrap shrink-0",children:["-",me(re)]})]})]},`${M.promotion_id}-${M.name}`)}):null,_=ne?a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:`text-sm font-semibold ${o==="hero"?"text-green-300":"text-green-700"}`,children:"Promotions appliquées"}),a.jsx("div",{className:"space-y-3",children:ne})]}):null,T=((H=c.items)==null?void 0:H.length)??0;return o==="hero"?a.jsxs("div",{className:U,children:[a.jsxs("div",{className:"relative w-full max-w-4xl overflow-hidden rounded-3xl border border-white/15 bg-gradient-to-br from-slate-900/90 via-slate-900/75 to-slate-900/60 p-6 text-white shadow-2xl backdrop-blur-xl sm:p-8",children:[a.jsxs("div",{className:"pointer-events-none absolute inset-0 opacity-70",children:[a.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.18),_transparent_65%)]"}),a.jsx("div",{className:"absolute -bottom-32 right-0 h-64 w-64 rounded-full bg-gradient-to-br from-amber-400/30 via-orange-500/20 to-red-500/30 blur-3xl"})]}),a.jsxs("div",{className:"relative flex flex-col gap-6",children:[w&&a.jsx("div",{className:"pointer-events-none absolute -top-6 right-4 sm:right-8",children:a.jsx("div",{className:"relative",style:{transform:"rotate(10deg)"},children:a.jsx("div",{className:"stamp-container scale-75 sm:scale-90",children:a.jsx("div",{className:"stamp-border",children:a.jsxs("div",{className:"stamp-inner",children:[a.jsx("span",{className:"stamp-text",children:"PEDIDO"}),a.jsx("span",{className:"stamp-text stamp-text-large",children:"LISTO"})]})})})})}),a.jsx("div",{className:"flex flex-col items-center gap-2 text-center",children:a.jsxs("h2",{className:"text-3xl font-bold text-center text-white sm:text-4xl",children:["Commande #",c.id.slice(-6)]})}),a.jsx("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-4",children:y.map((M,ce)=>{const de=ce===N,be=ce===y.length-1,te=ce<N||be&&w,re=`tracker-step-card rounded-2xl border p-3 sm:p-4 transition-all ${te?"bg-gradient-to-br from-emerald-400/80 to-emerald-600/80 border-white/35 text-white shadow-lg shadow-emerald-500/25":de?"bg-gradient-to-br from-amber-400/95 via-orange-500/90 to-red-500/95 border-white/30 text-white shadow-xl shadow-orange-500/25 tracker-step-active":"bg-white/10 border-white/10 text-white/70 backdrop-blur-sm hover:bg-white/15 hover:border-white/20"} ${de?"scale-[1.02]":""}`,xe=`tracker-step-icon-wrapper relative flex h-16 w-16 sm:h-20 sm:w-20 items-center justify-center rounded-2xl bg-black/25 ${te||de?"text-white":"text-white/70"}`;return a.jsx("div",{className:re,"aria-current":de?"step":void 0,children:a.jsxs("div",{className:"flex flex-col items-center text-center gap-2 sm:gap-3",children:[a.jsx("p",{className:`text-xs sm:text-sm font-semibold tracking-wide ${te||de?"text-white":"text-white/70"}`,children:M.name}),a.jsxs("div",{className:xe,children:[a.jsx(M.icon,{className:"tracker-step-icon h-10 w-10 sm:h-12 sm:w-12"}),te&&a.jsx(jn,{className:"absolute -top-2 -right-2 h-5 w-5 sm:h-6 sm:w-6 text-white drop-shadow"})]}),a.jsx("p",{className:`text-[11px] sm:text-xs leading-snug ${te||de?"text-white/80":"text-white/60"}`,children:M.description})]})},M.name)})}),a.jsx("style",{children:`
                            .tracker-step-card {
                                position: relative;
                                overflow: hidden;
                                border-radius: 1.25rem;
                            }

                            .tracker-step-card::after {
                                content: '';
                                position: absolute;
                                inset: 0;
                                border-radius: inherit;
                                border: 1px solid rgba(255, 255, 255, 0.18);
                                opacity: 0.35;
                                pointer-events: none;
                            }

                            .tracker-step-active {
                                animation: tracker-step-blink 1.6s ease-in-out infinite;
                            }

                            .tracker-step-active::after {
                                border-color: rgba(255, 255, 255, 0.45);
                                opacity: 0.75;
                            }

                            .tracker-step-icon {
                                transition: transform 0.4s ease;
                            }

                            .tracker-step-active .tracker-step-icon {
                                animation: tracker-step-icon-pulse 1.6s ease-in-out infinite;
                            }

                            @keyframes tracker-step-blink {
                                0%,
                                100% {
                                    transform: translateY(0);
                                    box-shadow: 0 18px 36px rgba(234, 179, 8, 0.35);
                                }
                                50% {
                                    transform: translateY(-2px);
                                    box-shadow: 0 22px 40px rgba(251, 191, 36, 0.45);
                                }
                            }

                            @keyframes tracker-step-icon-pulse {
                                0%,
                                100% {
                                    transform: scale(1);
                                }
                                50% {
                                    transform: scale(1.15);
                                }
                            }

                            .tracker-progress-container {
                                position: relative;
                                height: 10px;
                                border-radius: 9999px;
                                overflow: hidden;
                                background: linear-gradient(90deg, rgba(255, 255, 255, 0.25), rgba(148, 163, 184, 0.18));
                                box-shadow: inset 0 1px 3px rgba(15, 23, 42, 0.35);
                                margin-top: 0.25rem;
                            }

                            .tracker-progress-fill {
                                position: absolute;
                                inset: 0;
                                width: 0;
                                display: flex;
                                align-items: center;
                                justify-content: flex-end;
                                border-radius: inherit;
                                background: linear-gradient(90deg, rgba(249, 168, 38, 0.8), rgba(239, 68, 68, 0.95));
                                animation: tracker-progress-advance 1.2s ease forwards;
                                animation-delay: 0.05s;
                            }

                            .tracker-progress-fill-complete {
                                background: linear-gradient(90deg, rgba(34, 197, 94, 0.85), rgba(56, 189, 248, 0.9));
                            }

                            .tracker-progress-fill-hero {
                                animation: tracker-progress-loop 3s ease-in-out infinite;
                                animation-delay: 0s;
                            }

                            .tracker-progress-fill-hero.tracker-progress-fill-complete {
                                animation: tracker-progress-loop 3s ease-in-out infinite;
                            }

                            .tracker-progress-fill::after {
                                content: '';
                                position: absolute;
                                inset: 0;
                                background: linear-gradient(90deg, rgba(255, 255, 255, 0.25), transparent 55%);
                                mix-blend-mode: screen;
                            }

                            .tracker-progress-glow {
                                position: absolute;
                                right: -14px;
                                top: 50%;
                                width: 28px;
                                height: 28px;
                                transform: translateY(-50%);
                                background: radial-gradient(circle at center, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0));
                                pointer-events: none;
                            }

                            @keyframes tracker-progress-advance {
                                0% {
                                    width: 0;
                                }
                                100% {
                                    width: var(--tracker-progress-target);
                                }
                            }

                            @keyframes tracker-progress-loop {
                                0% {
                                    width: 0;
                                }
                                60% {
                                    width: var(--tracker-progress-target);
                                }
                                75% {
                                    width: var(--tracker-progress-target);
                                }
                                100% {
                                    width: 0;
                                }
                            }
                        `}),a.jsx("div",{className:"tracker-progress-container tracker-progress-hero",children:a.jsx("div",{className:`tracker-progress-fill tracker-progress-fill-hero ${w?"tracker-progress-fill-complete":""}`,ref:j,style:$,children:a.jsx("span",{className:"tracker-progress-glow"})},`hero-progress-${L}`)}),a.jsxs("div",{className:"rounded-2xl bg-black/25 p-4 sm:p-5",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-white/60",children:"Informations"}),c.receipt_url&&a.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-white/70",children:"Comprobante de pago"})]}),a.jsxs("div",{className:"mt-3 flex flex-col gap-4 text-sm sm:flex-row sm:items-start sm:justify-between",children:[a.jsx("div",{className:"space-y-2",children:q?a.jsxs(a.Fragment,{children:[Y&&a.jsxs("div",{className:"flex items-center gap-2 text-white/80",children:[a.jsx(vi,{size:16}),a.jsx("span",{className:"truncate",title:Y,children:Y})]}),Z&&a.jsxs("div",{className:"flex items-center gap-2 text-white/80",children:[a.jsx(xl,{size:16}),a.jsx("span",{className:"truncate",title:Z,children:Z})]}),I&&a.jsxs("div",{className:"flex items-center gap-2 text-white/80",children:[a.jsx(wn,{size:16}),a.jsx("span",{className:"truncate",title:I,children:I})]})]}):a.jsx("p",{className:"text-white/70",children:"Aucune information client requise."})}),a.jsx("div",{className:"flex flex-col items-start gap-3 text-sm sm:min-w-[12rem] sm:items-end sm:text-right",children:c.receipt_url&&a.jsx("div",{className:"flex flex-col items-start gap-2 sm:items-end",children:a.jsx("button",{type:"button",onClick:()=>p(!0),className:"group relative inline-flex focus:outline-none","aria-label":"Ouvrir le justificatif de paiement",children:a.jsxs("div",{className:"relative overflow-hidden rounded-xl border border-white/20 bg-black/40 shadow-lg",children:[a.jsx("img",{src:c.receipt_url,alt:"Aperçu du justificatif",className:"h-20 w-28 object-cover transition duration-500 ease-out group-hover:scale-105 sm:h-24 sm:w-32"}),a.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center bg-black/40 opacity-0 transition duration-300 group-hover:opacity-100",children:a.jsx(Jr,{size:20,className:"text-white"})})]})})})})]})]}),a.jsxs("div",{className:"rounded-2xl bg-black/20 p-4 sm:p-5",children:[a.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between text-xs font-semibold uppercase tracking-wide text-white/60",children:[a.jsx("span",{children:"Résumé"}),a.jsxs("span",{children:["Articles : ",T]})]}),a.jsx("div",{className:"mt-4 space-y-3 pr-1 text-sm",children:c.items&&c.items.length>0?c.items.map(M=>{const de=M.nom_produit==="Domicilio"&&M.prix_unitaire===0,be=(()=>{const te=M.description;return typeof te=="string"&&te.trim().length>0?te.trim():null})();return a.jsx("div",{className:"rounded-xl border border-gray-200 bg-white px-4 py-1 sm:px-5 sm:py-2",children:a.jsx("div",{className:"flex flex-col gap-4 items-center",children:a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-4",children:["                                                            ",a.jsx("span",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-xl bg-gray-200 text-base font-semibold text-black shadow-inner shadow-gray-400 sm:h-10 sm:w-10 sm:text-lg",children:M.quantite}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-base font-semibold text-black sm:text-lg",children:M.nom_produit}),be&&a.jsx("p",{className:"text-xs text-gray-600",children:be}),M.commentaire&&a.jsxs("p",{className:"text-xs italic text-amber-200/80",children:["“",M.commentaire,"”"]})]})]}),a.jsx("div",{className:"flex items-center rounded-full bg-gray-100 px-3 py-1 text-sm font-bold text-gray-800 shadow-sm",children:de?a.jsx("span",{className:"text-emerald-600",children:"GRATUIT"}):me(M.prix_unitaire*M.quantite)})]})})},M.id)}):a.jsx("p",{className:"text-white/70",children:"Aucun article enregistré pour cette commande."})}),ne?a.jsxs("div",{className:"mt-6 space-y-3",children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-white/60",children:"Promotions appliquées"}),a.jsx("div",{className:"space-y-3",children:ne})]}):null,W>0&&a.jsxs("div",{className:"mt-5 flex items-center justify-between rounded-xl bg-black/30 px-3 py-2 text-sm font-semibold text-emerald-300 border border-emerald-500/20 shadow-lg",children:[a.jsx("span",{children:"Réductions totales"}),a.jsxs("span",{children:["- ",me(W)]})]}),a.jsxs("div",{className:"mt-4 flex items-center justify-between border-t border-white/20 pt-4 text-xl font-extrabold text-white",children:[a.jsx("span",{children:"Total de la commande"}),a.jsx("span",{children:me(c.total)})]})]}),a.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[w?a.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-emerald-500/20 px-4 py-2 text-sm font-semibold text-emerald-200",children:[a.jsx(jn,{size:16})," Commande prête"]}):a.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-white/60",children:"Nous préparons votre commande"}),a.jsx("button",{onClick:w?i:void 0,disabled:!w,className:`inline-flex items-center gap-2 rounded-full px-5 py-2 text-sm font-semibold transition ${w?"bg-white text-amber-600 shadow-lg hover:bg-white/90":"cursor-not-allowed bg-white/10 text-white/50"}`,children:"Revenir au menu"})]})]})]}),a.jsx(wt,{isOpen:x,onClose:()=>p(!1),title:"Justificatif de Paiement",children:c.receipt_url?a.jsx("img",{src:c.receipt_url,alt:"Justificatif",className:"h-auto w-full rounded-md"}):a.jsx("p",{children:"Aucun justificatif fourni."})})]}):a.jsxs("div",{className:U,children:[a.jsxs("div",{className:G,children:[a.jsx("h2",{className:`text-3xl font-bold text-center mb-2 ${o==="hero"?"text-white":"text-gray-800"}`,children:"Suivi de votre commande"}),a.jsxs("p",{className:`text-center font-semibold mb-8 ${o==="hero"?"text-gray-300":"text-gray-500"}`,children:["Commande #",c.id.slice(-6)]}),a.jsxs("div",{className:"mb-8",children:[a.jsx("div",{className:"mb-6 tracker-progress-container tracker-progress-default",children:a.jsx("div",{className:`tracker-progress-fill ${w?"tracker-progress-fill-complete":""}`,style:$,children:a.jsx("span",{className:"tracker-progress-glow"})},`page-progress-${L}`)}),a.jsx("div",{className:`flex items-start sm:items-center justify-between gap-3 sm:gap-4 px-2 ${y.length>3?"flex-wrap sm:flex-nowrap":""}`,children:y.map((M,ce)=>{const de=ce===N,be=ce===y.length-1,te=ce<N||be&&w;return a.jsxs("div",{className:"flex flex-1 items-center gap-2 sm:gap-4",children:[a.jsxs("div",{className:"flex flex-col items-center text-center gap-2 sm:gap-3",children:[a.jsx("p",{className:`text-xs sm:text-sm font-semibold ${te||de?"text-gray-900":"text-gray-400"}`,children:M.name}),a.jsxs("div",{className:`relative flex h-14 w-14 sm:h-16 sm:w-16 items-center justify-center rounded-full border-4 transition-all duration-500 ${te?"bg-green-500 border-green-300":de?"bg-blue-600 border-blue-400 animate-pulse":"bg-gray-400 border-gray-300"}`,children:[a.jsx(M.icon,{className:"h-8 w-8 text-white sm:h-9 sm:w-9"}),te&&a.jsx(jn,{className:"absolute -top-2 -right-2 h-5 w-5 text-emerald-100 drop-shadow"})]}),a.jsx("p",{className:`text-[11px] sm:text-xs leading-snug ${te||de?"text-gray-600":"text-gray-400"}`,children:M.description})]}),ce<y.length-1&&a.jsx("div",{className:"flex flex-1 items-center","aria-hidden":!0,children:a.jsxs("div",{className:`tracker-gauge-wrapper ${o==="hero"?"tracker-gauge-hero":"tracker-gauge-default"} ${te?"tracker-gauge-wrapper-complete":""}`,children:[a.jsx("span",{className:`tracker-gauge-fill ${te?"tracker-gauge-fill-complete":de?"tracker-gauge-fill-active":"tracker-gauge-fill-idle"}`}),(de||te)&&a.jsx("span",{className:"tracker-gauge-glow"})]})})]},M.name)})})]}),a.jsx("style",{children:`
                    .tracker-progress-container {
                        position: relative;
                        height: 12px;
                        border-radius: 9999px;
                        overflow: hidden;
                        box-shadow: inset 0 1px 2px rgba(15, 23, 42, 0.12);
                    }

                    .tracker-progress-default {
                        background: linear-gradient(90deg, rgba(229, 231, 235, 0.55), rgba(209, 213, 219, 0.35));
                    }

                    .tracker-progress-hero {
                        background: linear-gradient(90deg, rgba(255, 255, 255, 0.25), rgba(148, 163, 184, 0.15));
                        box-shadow: inset 0 1px 2px rgba(15, 23, 42, 0.25);
                    }

                    .tracker-progress-fill {
                        position: absolute;
                        inset: 0;
                        width: 0;
                        display: flex;
                        align-items: center;
                        justify-content: flex-end;
                        background: linear-gradient(90deg, rgba(249, 168, 38, 0.65), rgba(239, 68, 68, 0.95));
                        border-radius: inherit;
                        animation: tracker-progress-advance 1.2s ease forwards;
                    }

                    .tracker-progress-fill-complete {
                        background: linear-gradient(90deg, rgba(34, 197, 94, 0.75), rgba(56, 189, 248, 0.9));
                    }

                    .tracker-progress-fill::after {
                        content: '';
                        position: absolute;
                        inset: 0;
                        background: linear-gradient(90deg, rgba(255, 255, 255, 0.15), transparent 55%);
                        mix-blend-mode: screen;
                    }

                    .tracker-progress-glow {
                        position: absolute;
                        right: -14px;
                        top: 50%;
                        width: 28px;
                        height: 28px;
                        transform: translateY(-50%);
                        background: radial-gradient(circle at center, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0));
                        pointer-events: none;
                    }

                    @keyframes tracker-progress-advance {
                        0% {
                            width: 0;
                        }
                        100% {
                            width: var(--tracker-progress-target);
                        }
                    }

                    .tracker-gauge-wrapper {
                        position: relative;
                        height: 10px;
                        border-radius: 9999px;
                        overflow: hidden;
                        box-shadow: inset 0 1px 3px rgba(15, 23, 42, 0.12);
                        transition: box-shadow 0.3s ease;
                    }

                    .tracker-gauge-wrapper-complete {
                        box-shadow: inset 0 1px 3px rgba(21, 128, 61, 0.35);
                    }

                    .tracker-gauge-default {
                        background: linear-gradient(90deg, rgba(229, 231, 235, 0.45), rgba(209, 213, 219, 0.25));
                    }

                    .tracker-gauge-hero {
                        background: linear-gradient(90deg, rgba(255, 255, 255, 0.22), rgba(148, 163, 184, 0.12));
                        box-shadow: inset 0 1px 3px rgba(15, 23, 42, 0.4);
                    }

                    .tracker-gauge-fill {
                        position: absolute;
                        inset: 0;
                        transform-origin: left;
                        background-size: 250% 100%;
                        border-radius: inherit;
                    }

                    .tracker-gauge-fill-idle {
                        transform: scaleX(0);
                        background: linear-gradient(90deg, rgba(148, 163, 184, 0.25), rgba(148, 163, 184, 0.15));
                    }

                    .tracker-gauge-fill-active {
                        animation: tracker-gauge-fill-grow 1.2s ease forwards, tracker-gauge-cycle 3.2s linear infinite;
                        background: linear-gradient(90deg, #f97316, #ef4444, #facc15, #f97316);
                    }

                    .tracker-gauge-fill-complete {
                        transform: scaleX(1);
                        animation: tracker-gauge-cycle 4.2s linear infinite;
                        background: linear-gradient(90deg, #22c55e, #0ea5e9, #f97316, #22c55e);
                    }

                    .tracker-gauge-glow {
                        position: absolute;
                        inset: -6px;
                        background: radial-gradient(circle at center, rgba(255, 255, 255, 0.4), rgba(255, 255, 255, 0));
                        animation: tracker-gauge-glow 1.6s ease-in-out infinite;
                        pointer-events: none;
                    }

                    @keyframes tracker-gauge-fill-grow {
                        0% { transform: scaleX(0); }
                        100% { transform: scaleX(1); }
                    }

                    @keyframes tracker-gauge-cycle {
                        0% { background-position: 0% 50%; }
                        100% { background-position: 200% 50%; }
                    }

                    @keyframes tracker-gauge-glow {
                        0%, 100% { opacity: 0.45; }
                        50% { opacity: 0.85; }
                    }

                    .promo-banner {
                        position: relative;
                        isolation: isolate;
                        animation: promo-banner-blink 2.2s ease-in-out infinite;
                    }

                    .promo-banner::before {
                        content: '';
                        position: absolute;
                        inset: 0;
                        background: linear-gradient(120deg, rgba(255, 255, 255, 0.22), rgba(255, 255, 255, 0));
                        opacity: 0.45;
                        pointer-events: none;
                    }

                    .promo-banner > * {
                        position: relative;
                        z-index: 1;
                    }

                    @keyframes promo-banner-blink {
                        0%, 100% {
                            transform: translateY(0) scale(1);
                            filter: brightness(1);
                            opacity: 0.85;
                        }
                        45% {
                            transform: translateY(-2px) scale(1.02);
                            filter: brightness(1.18);
                            opacity: 1;
                        }
                        60% {
                            transform: translateY(0) scale(0.99);
                            filter: brightness(0.92);
                            opacity: 0.55;
                        }
                    }

                    .stamp-container {
                        position: relative;
                        width: 180px;
                        height: 180px;
                        animation: stamp-appear 0.5s ease-out;
                    }
                    
                    @keyframes stamp-appear {
                        0% {
                            transform: scale(0) rotate(-45deg);
                            opacity: 0;
                        }
                        60% {
                            transform: scale(1.1) rotate(0deg);
                        }
                        100% {
                            transform: scale(1) rotate(0deg);
                            opacity: 1;
                        }
                    }
                    
                    .stamp-border {
                        width: 100%;
                        height: 100%;
                        border: 4px solid #dc2626;
                        border-radius: 50%;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        background: rgba(220, 38, 38, 0.05);
                        position: relative;
                        box-shadow: 0 0 0 2px #dc2626;
                    }
                    
                    .stamp-border::before {
                        content: '';
                        position: absolute;
                        top: 0;
                        left: 0;
                        right: 0;
                        bottom: 0;
                        border-radius: 50%;
                        background: repeating-linear-gradient(
                            45deg,
                            transparent,
                            transparent 2px,
                            rgba(220, 38, 38, 0.03) 2px,
                            rgba(220, 38, 38, 0.03) 4px
                        );
                    }
                    
                    .stamp-inner {
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                        text-align: center;
                        z-index: 1;
                    }
                    
                    .stamp-text {
                        font-family: 'Arial Black', 'Arial Bold', sans-serif;
                        font-weight: 900;
                        color: #dc2626;
                        text-transform: uppercase;
                        letter-spacing: 2px;
                        line-height: 1;
                        text-shadow: 
                            1px 1px 0 rgba(220, 38, 38, 0.3),
                            -1px -1px 0 rgba(220, 38, 38, 0.3);
                    }
                    
                    .stamp-text:first-child {
                        font-size: 20px;
                        margin-bottom: 6px;
                    }
                    
                    .stamp-text-large {
                        font-size: 42px;
                        font-weight: 900;
                    }
                    
                    /* Effet de texture grunge */
                    .stamp-border::after {
                        content: '';
                        position: absolute;
                        top: 0;
                        left: 0;
                        right: 0;
                        bottom: 0;
                        border-radius: 50%;
                        background-image: 
                            radial-gradient(circle at 20% 30%, transparent 0%, transparent 2%, rgba(220, 38, 38, 0.1) 2%, transparent 3%),
                            radial-gradient(circle at 80% 70%, transparent 0%, transparent 2%, rgba(220, 38, 38, 0.1) 2%, transparent 3%),
                            radial-gradient(circle at 40% 80%, transparent 0%, transparent 1%, rgba(220, 38, 38, 0.1) 1%, transparent 2%),
                            radial-gradient(circle at 60% 20%, transparent 0%, transparent 1%, rgba(220, 38, 38, 0.1) 1%, transparent 2%);
                        opacity: 0.8;
                    }
                `}),a.jsxs("div",{className:se,children:[w&&a.jsx("div",{className:"absolute top-4 right-4 z-10 pointer-events-none",children:a.jsx("div",{className:"relative",style:{transform:"rotate(15deg)"},children:a.jsx("div",{className:"stamp-container",children:a.jsx("div",{className:"stamp-border",children:a.jsxs("div",{className:"stamp-inner",children:[a.jsx("span",{className:"stamp-text",children:"PEDIDO"}),a.jsx("span",{className:"stamp-text stamp-text-large",children:"LISTO"})]})})})})}),a.jsx("h3",{className:`mt-10 text-xl font-bold ${o==="hero"?"text-white":"text-gray-800"}`,children:"Résumé de la commande"}),oe&&q&&a.jsxs("div",{className:`mt-6 rounded-xl border p-4 ${o==="hero"?"border-white/30 bg-white/10 backdrop-blur text-white":"border-gray-200 bg-gray-50 text-gray-700"}`,children:[a.jsx("p",{className:`mb-3 text-sm font-semibold uppercase tracking-wide ${o==="hero"?"text-gray-100":"text-gray-600"}`,children:"Informations Client"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[Y&&a.jsxs("div",{className:"flex items-center",children:[a.jsx(vi,{size:16,className:`mr-2 ${o==="hero"?"text-white/80":"text-gray-500"}`}),a.jsx("span",{className:"font-medium whitespace-nowrap truncate",title:Y,children:Y})]}),Z&&a.jsxs("div",{className:"flex items-center",children:[a.jsx(xl,{size:16,className:`mr-2 ${o==="hero"?"text-white/80":"text-gray-500"}`}),a.jsx("span",{className:"whitespace-nowrap",title:Z,children:Z})]}),I&&a.jsxs("div",{className:"flex items-center",children:[a.jsx(wn,{size:16,className:`mr-2 ${o==="hero"?"text-white/80":"text-gray-500"}`}),a.jsx("span",{className:"truncate",title:I,children:I})]})]}),c.receipt_url&&a.jsxs("button",{onClick:()=>p(!0),className:`mt-4 inline-flex items-center gap-2 text-sm font-semibold underline-offset-2 hover:underline ${o==="hero"?"text-white":"text-blue-500"}`,children:[a.jsx(Jr,{size:16})," Voir le justificatif"]})]}),a.jsx("div",{className:"space-y-2",children:c.items&&c.items.length>0?c.items.map(M=>{const de=M.nom_produit==="Domicilio"&&M.prix_unitaire===0,be=M.description,te=typeof be=="string"&&be.trim().length>0?be.trim():null,re=typeof M.commentaire=="string"&&M.commentaire.trim().length>0?M.commentaire.trim():null;return a.jsx("div",{className:`flex flex-col gap-2 rounded-lg border-b border-dashed border-gray-200/70 pb-3 pt-2 last:border-b-0 last:pb-0 ${o==="hero"?"text-gray-200":"text-gray-600"}`,children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"text-[clamp(0.95rem,1.8vw,1.1rem)] font-semibold leading-snug text-balance",children:[M.quantite,"x ",M.nom_produit]}),a.jsx("p",{className:`mt-1 text-sm ${o==="hero"?"text-gray-400":"text-gray-500"}`,children:de?"Livraison offerte":`${me(M.prix_unitaire)} /u`}),te&&a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:te}),re&&a.jsxs("p",{className:"mt-1 text-sm italic text-amber-600",children:["“",re,"”"]})]}),a.jsx("div",{className:"whitespace-nowrap text-right text-sm font-semibold",children:de?a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[a.jsx("span",{className:"text-xs text-gray-400 line-through",children:me(8e3)}),a.jsx("span",{className:"text-sm font-bold text-green-600",children:"GRATIS"})]}):a.jsx("span",{children:me(M.prix_unitaire*M.quantite)})})]})},M.id)}):a.jsx("p",{className:`${o==="hero"?"text-gray-300":"text-gray-600"}`,children:"Aucun article enregistré pour cette commande."})}),_,W>0&&a.jsxs("div",{className:`mt-4 flex items-center justify-between rounded-lg border px-3 py-2 text-sm font-semibold ${o==="hero"?"border-emerald-300/30 bg-emerald-500/15 text-emerald-100":"border-emerald-200 bg-emerald-50 text-emerald-700"}`,children:[a.jsx("span",{children:"Réductions totales"}),a.jsxs("span",{children:["-",me(W)]})]}),a.jsxs("div",{className:`flex justify-between font-bold text-lg border-t pt-2 ${o==="hero"?"text-white border-gray-500":"text-gray-800"}`,children:[a.jsx("span",{children:"Total"}),a.jsx("span",{children:me(c.total)})]}),!oe&&q&&a.jsxs("div",{className:`border-t pt-4 space-y-2 ${o==="hero"?"border-gray-500":""}`,children:[a.jsx("h3",{className:`text-xl font-bold ${o==="hero"?"text-white":"text-gray-800"} mb-2`,children:"Informations Client"}),Y&&a.jsxs("div",{className:`flex items-center ${o==="hero"?"text-gray-200":"text-gray-700"}`,children:[a.jsx(vi,{size:16,className:"mr-2"}),a.jsx("span",{className:"whitespace-nowrap truncate",title:Y,children:Y})]}),Z&&a.jsxs("div",{className:`flex items-center ${o==="hero"?"text-gray-200":"text-gray-700"}`,children:[a.jsx(xl,{size:16,className:"mr-2"}),a.jsx("span",{className:"whitespace-nowrap",title:Z,children:Z})]}),I&&a.jsxs("div",{className:`flex items-center ${o==="hero"?"text-gray-200":"text-gray-700"}`,children:[a.jsx(wn,{size:16,className:"mr-2"}),a.jsx("span",{className:"truncate",title:I,children:I})]}),c.receipt_url&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-medium",children:"Comprobante de pago:"}),a.jsxs("button",{onClick:()=>p(!0),className:"flex items-center text-blue-400 hover:underline",children:[a.jsx(Jr,{size:16,className:"mr-2"}),"Voir"]})]})]})]}),a.jsxs("div",{className:"mt-8 text-center space-y-4",children:[w&&a.jsx("div",{className:"flex justify-center",children:a.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-green-100 px-4 py-2 text-sm font-semibold text-green-700",children:[a.jsx(jn,{size:16})," Pedido listo"]})}),a.jsxs("div",{className:"flex flex-col space-y-4",children:[a.jsx("p",{className:`text-sm ${o==="hero"?"text-gray-300":"text-gray-600"}`,children:"Le statut de votre commande est mis à jour automatiquement."}),a.jsx("button",{onClick:w?i:void 0,disabled:!w,className:`font-bold py-3 px-6 rounded-lg transition ${w?`${o==="hero"?"bg-gray-200 text-gray-800 hover:bg-gray-300":"bg-brand-primary text-brand-secondary hover:bg-brand-primary-dark"} cursor-pointer`:"bg-gray-300 text-gray-500 cursor-not-allowed opacity-50"}`,children:"Volver"})]})]})]}),a.jsx(wt,{isOpen:x,onClose:()=>p(!1),title:"Justificatif de Paiement",children:c.receipt_url?a.jsx("img",{src:c.receipt_url,alt:"Justificatif",className:"w-full h-auto rounded-md"}):a.jsx("p",{children:"Aucun justificatif fourni."})})]})},N2={"font/woff2":"woff2","application/font-woff2":"woff2","application/x-font-woff2":"woff2","font/woff":"woff","application/font-woff":"woff","application/x-font-woff":"woff","application/x-font-ttf":"truetype","font/ttf":"truetype","application/x-font-otf":"opentype","font/otf":"opentype","application/vnd.ms-fontobject":"embedded-opentype","application/x-font-eot":"embedded-opentype","image/svg+xml":"svg"},w2={woff2:"woff2",woff:"woff",ttf:"truetype",otf:"opentype",eot:"embedded-opentype",svg:"svg"},Wd=n=>{const i=n.trim();return(i.length>0?i:"Custom Font").replace(/"|'/g,"")},S2=n=>{if(!n)return null;const i=n.toLowerCase();for(const[o,c]of Object.entries(N2))if(i.includes(o))return c;return null},C2=n=>{const o=n.toLowerCase().match(/\.([a-z0-9]+)(?:\?|#|$)/);if(!o)return null;const c=o[1];return w2[c]??null},k2=n=>{const i=S2(n.format);return i||C2(n.url)},T2=n=>{const i=Wd(n.name),o=k2(n),c=o?` format("${o}")`:"",u=`url("${n.url}")${c}`;return`@font-face {
  font-family: "${i}";
  src: ${u};
  font-style: normal;
  font-weight: 400;
  font-display: swap;
}`},E2="data-custom-font-faces",qg=n=>{h.useEffect(()=>{if(typeof document>"u")return;const i=n.filter(f=>f.type==="font");if(i.length===0)return;const o=[],c=new Set;if(i.forEach(f=>{const g=T2(f),x=g.match(/font-family: "([^"]+)";/),p=x?x[1]:f.name;c.has(p)||(c.add(p),o.push(g))}),o.length===0)return;const u=document.createElement("style");return u.setAttribute(E2,"true"),u.textContent=o.join(`
`),document.head.appendChild(u),()=>{u.remove()}},[n])},Bg=n=>{if(!n)return n??void 0;const i=n.trim();return i.length===0||i.includes(",")?i.length===0?void 0:i:/^(['"]).*\1$/.test(i)||!/[^a-zA-Z0-9-]/.test(i)?i:`'${i.replace(/'/g,"\\'")}'`},za=n=>n.background.type==="image"&&n.background.image?{backgroundImage:`url('${n.background.image}')`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundColor:n.background.color}:{backgroundColor:n.background.color},eu=(n,i)=>{const o=za(n);if(n.background.type==="image"){const c=n.background.image??i;return c?{...o,backgroundImage:`url('${c}')`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:o}return i?{...o,backgroundImage:`url('${i}')`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:o},Oa=n=>({color:n.textColor,fontFamily:Bg(n.fontFamily)}),ms=n=>({...Oa(n),fontSize:n.fontSize}),tu=(n,i)=>{const o={color:(i==null?void 0:i.textColor)??n.textColor,fontFamily:Bg((i==null?void 0:i.fontFamily)??n.fontFamily)};return i!=null&&i.backgroundColor&&i.backgroundColor.trim().length>0&&(o.backgroundColor=i.backgroundColor),o},Ig=(n,i)=>({...tu(n,i),fontSize:(i==null?void 0:i.fontSize)??n.fontSize}),Hg=(n,i)=>i!=null&&i.backgroundColor?{backgroundColor:i.backgroundColor}:{},$g=(n,i,o)=>{if(!n)return n;try{const c=new URL(n);return c.searchParams.set(i,o),c.toString()}catch{const u=n.includes("?")?"&":"?",f=encodeURIComponent(i),g=encodeURIComponent(o);return`${n}${u}${f}=${g}`}},Sh="/logo-brand.svg",Ya=n=>{if(n.startsWith("navigation."))return"navigation";if(n.startsWith("hero."))return"hero";if(n.startsWith("about."))return"about";if(n.startsWith("menu."))return"menu";if(n.startsWith("instagramReviews."))return"instagramReviews";if(n.startsWith("findUs."))return"findUs";if(n.startsWith("footer."))return"footer";throw new Error(`Zone introuvable pour l'élément modifiable "${n}"`)},Gg=Sa.createContext(!0),Pe=({id:n,onEdit:i,children:o,label:c,className:u,buttonClassName:f,as:g="div"})=>{const x=["group relative",u].filter(Boolean).join(" "),p=Sa.useContext(Gg),[y,v]=h.useState(!1);if(!p)return a.jsx(g,{className:x,children:o});const N=["customization-edit-button absolute z-30 flex h-8 w-8 items-center justify-center rounded-full bg-blue-500 text-white shadow-lg transition-all duration-200","opacity-0 group-hover:opacity-100 group-focus-within:opacity-100 focus-visible:opacity-100","focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500","hover:scale-110 hover:bg-blue-600 active:scale-95",f??"right-2 top-2"].filter(Boolean).join(" "),j=S=>{S.preventDefault(),S.stopPropagation();const w=Ya(n),E=S.currentTarget.getBoundingClientRect(),C=S.currentTarget.closest(`[data-zone="${w}"]`)??S.currentTarget.parentElement,B=(C==null?void 0:C.getBoundingClientRect())??null,L=S.currentTarget.closest('[data-preview-boundary="true"]'),$=(L==null?void 0:L.getBoundingClientRect())??null;i(n,{zone:w,anchor:E??B,boundary:$})};return a.jsxs(g,{className:x,onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1),children:[a.jsx("button",{type:"button",onClick:j,className:N,"aria-label":c,"data-element-id":n,title:c,children:a.jsx(Tv,{className:"h-4 w-4","aria-hidden":"true"})}),y&&a.jsx("div",{className:"absolute inset-0 pointer-events-none border-2 border-blue-500 border-dashed rounded-lg opacity-50 animate-pulse"}),y&&a.jsxs("div",{className:"absolute z-40 bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded shadow-lg whitespace-nowrap",children:[c,a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]}),o]})},fl=({children:n,className:i,zone:o,activeZone:c})=>{const f=["customization-section-card relative overflow-hidden rounded-3xl border bg-white shadow-sm transition-all",c===o?"active border-brand-primary/70 shadow-brand-primary/20 ring-2 ring-brand-primary/10":"border-gray-200",i].filter(Boolean).join(" ");return a.jsx("div",{className:f,"data-zone":o,children:n})},Ch=({content:n,bestSellerProducts:i,onEdit:o,activeZone:c,showEditButtons:u=!0})=>{const f=za(n.navigation.style),g=Oa(n.navigation.style);ms(n.navigation.style);const x=n.navigation.brandLogo??Sh,p=n.navigation.staffLogo??n.navigation.brandLogo??Sh,y=eu(n.hero.style,n.hero.backgroundImage),v=Oa(n.hero.style),N=ms(n.hero.style),j=za(n.about.style),S=Oa(n.about.style);ms(n.about.style);const w=za(n.menu.style),E=Oa(n.menu.style),C=ms(n.menu.style),B=za(n.findUs.style),L=Oa(n.findUs.style),$=za(n.footer.style),U=ms(n.footer.style);qg(n.assets.library);const G=n.elementStyles??{},se=n.elementRichText??{},W=M=>{var be;const ce=se[M],de=(be=ce==null?void 0:ce.html)==null?void 0:be.trim();return de&&de.length>0?de:null},K=(M,ce,de,be)=>{const te=W(M);return te?Sa.createElement(ce,{...de,dangerouslySetInnerHTML:{__html:te}}):Sa.createElement(ce,de,be)},oe={navigation:n.navigation.style,hero:n.hero.style,about:n.about.style,menu:n.menu.style,instagramReviews:n.instagramReviews.style,findUs:n.findUs.style,footer:n.footer.style},Y=M=>G[M],Z=M=>{const ce=Ya(M);return tu(oe[ce],Y(M))},I=M=>{const ce=Ya(M);return Ig(oe[ce],Y(M))},q=M=>{const ce=Ya(M);return Hg(oe[ce],Y(M))},O=n.findUs.address.trim(),ne=n.findUs.mapUrl,_=typeof ne=="string"?ne.trim():"",T=_.length>0,A=!T&&O.length>0?encodeURIComponent(O):"",P=T?_:A?`https://www.google.com/maps?q=${A}`:"https://www.google.com/maps",Q=T?$g(_,"output","embed"):A?`https://www.google.com/maps?q=${A}&output=embed`:"about:blank",D=T||A.length>0,H=O.length>0?O:n.findUs.title;return a.jsx(Gg.Provider,{value:u,children:a.jsxs("div",{className:"space-y-6 rounded-[2.5rem] border border-gray-200 bg-slate-50 p-6 shadow-inner","data-preview-boundary":"true",children:[a.jsx(fl,{zone:"navigation",activeZone:c,children:a.jsx(Pe,{id:"navigation.style.background",label:"Modifier le fond de la navigation",onEdit:o,className:"block",buttonClassName:"right-4 top-4",children:a.jsx("header",{className:"login-header",style:f,children:a.jsxs("div",{className:"layout-container login-header__inner",style:g,children:[a.jsxs("div",{className:"login-brand",style:g,children:[a.jsx(Pe,{id:"navigation.brandLogo",label:"Modifier le logo principal",onEdit:o,as:"span",className:"inline-flex items-center",children:a.jsx("img",{src:x,alt:`Logo ${n.navigation.brand}`,className:"login-brand__logo"})}),a.jsx(Pe,{id:"navigation.brand",label:"Modifier le nom de la marque",onEdit:o,as:"span",className:"ml-3 inline-flex items-center",buttonClassName:"-right-3 -top-3",children:K("navigation.brand","span",{className:"login-brand__name",style:Z("navigation.brand")},n.navigation.brand)})]}),a.jsxs("nav",{className:"login-nav","aria-label":"Navigation principale",children:[a.jsx(Pe,{id:"navigation.links.home",label:"Modifier le lien Accueil",onEdit:o,as:"span",className:"inline-flex",buttonClassName:"-right-2 -top-2",children:K("navigation.links.home","span",{className:"login-nav__link",style:I("navigation.links.home")},n.navigation.links.home)}),a.jsx(Pe,{id:"navigation.links.about",label:"Modifier le lien À propos",onEdit:o,as:"span",className:"inline-flex",buttonClassName:"-right-2 -top-2",children:K("navigation.links.about","span",{className:"login-nav__link",style:I("navigation.links.about")},n.navigation.links.about)}),a.jsx(Pe,{id:"navigation.links.menu",label:"Modifier le lien Menu",onEdit:o,as:"span",className:"inline-flex",buttonClassName:"-right-2 -top-2",children:K("navigation.links.menu","span",{className:"login-nav__link",style:I("navigation.links.menu")},n.navigation.links.menu)}),a.jsx(Pe,{id:"navigation.links.loginCta",label:"Modifier le bouton personnel",onEdit:o,as:"span",className:"inline-flex",buttonClassName:"-right-2 -top-2",children:a.jsx("div",{className:"login-nav__staff-btn","aria-label":n.navigation.links.loginCta,role:"img",children:a.jsx(Pe,{id:"navigation.staffLogo",label:"Modifier le logo d'accès staff",onEdit:o,as:"span",className:"inline-flex",buttonClassName:"-right-2 -top-2",children:a.jsx("img",{src:p,alt:"",className:"login-brand__logo","aria-hidden":"true"})})})})]})]})})})}),a.jsx(fl,{zone:"hero",activeZone:c,children:a.jsx(Pe,{id:"hero.backgroundImage",label:"Modifier le visuel de fond du hero",onEdit:o,className:"block",buttonClassName:"right-4 top-4",children:a.jsx("section",{className:"section section-hero",style:{...y,...v},children:a.jsx("div",{className:"section-hero__inner",children:a.jsxs("div",{className:"hero-content",style:v,children:[a.jsx(Pe,{id:"hero.title",label:"Modifier le titre du hero",onEdit:o,className:"block",buttonClassName:"right-0 -top-3",children:K("hero.title","h2",{className:"hero-title",style:Z("hero.title")},n.hero.title)}),a.jsx(Pe,{id:"hero.subtitle",label:"Modifier le sous-titre du hero",onEdit:o,className:"mt-4 block",buttonClassName:"right-0 -top-3",children:K("hero.subtitle","p",{className:"hero-subtitle",style:I("hero.subtitle")},n.hero.subtitle)}),a.jsx(Pe,{id:"hero.ctaLabel",label:"Modifier le texte du bouton principal",onEdit:o,className:"mt-6 inline-flex",buttonClassName:"-right-3 -top-3",children:a.jsx("button",{type:"button",className:"ui-btn ui-btn-accent hero-cta",style:{...I("hero.ctaLabel"),...q("hero.ctaLabel")},disabled:!0,children:K("hero.ctaLabel","span",{className:"inline-flex items-center justify-center",style:I("hero.ctaLabel")},n.hero.ctaLabel)})}),a.jsxs("div",{className:"hero-history mt-6",children:[a.jsx(Pe,{id:"hero.historyTitle",label:"Modifier le titre de l'historique",onEdit:o,className:"block",buttonClassName:"right-0 -top-3",children:K("hero.historyTitle","p",{className:"hero-history__title",style:I("hero.historyTitle")},n.hero.historyTitle)}),a.jsx(Pe,{id:"hero.reorderCtaLabel",label:"Modifier le bouton de réassort",onEdit:o,className:"hero-history__list",buttonClassName:"right-2 top-2",children:a.jsx(a.Fragment,{children:[0,1,2].map(M=>a.jsxs("div",{className:"hero-history__item",children:[a.jsxs("div",{className:"hero-history__meta",children:[a.jsx("p",{className:"hero-history__date",style:N,children:"Pedido del 12/03/2024"}),a.jsxs("p",{className:"hero-history__details",style:N,children:["2 article(s) • ",me(32e3)]})]}),a.jsx("button",{type:"button",className:"hero-history__cta",style:{...I("hero.reorderCtaLabel"),...q("hero.reorderCtaLabel")},disabled:!0,children:K("hero.reorderCtaLabel","span",{className:"inline-flex items-center justify-center",style:I("hero.reorderCtaLabel")},n.hero.reorderCtaLabel)})]},M))})})]})]})})})})}),a.jsx(fl,{zone:"about",activeZone:c,children:a.jsx(Pe,{id:"about.style.background",label:"Modifier le fond de la section À propos",onEdit:o,className:"block",buttonClassName:"right-4 top-4",children:a.jsx("section",{className:"section section-surface",style:{...j,...S},children:a.jsxs("div",{className:"section-inner section-inner--center",style:S,children:[a.jsx(Pe,{id:"about.title",label:"Modifier le titre À propos",onEdit:o,className:"block",buttonClassName:"right-0 -top-3",children:K("about.title","h2",{className:"section-title",style:Z("about.title")},n.about.title)}),a.jsx(Pe,{id:"about.description",label:"Modifier la description À propos",onEdit:o,className:"mt-4 block",buttonClassName:"right-0 -top-3",children:K("about.description","p",{className:"section-text section-text--muted",style:I("about.description")},n.about.description)}),n.about.image&&a.jsx(Pe,{id:"about.image",label:"Modifier l'image À propos",onEdit:o,className:"mt-6 block",buttonClassName:"right-4 top-4",children:a.jsx("img",{src:n.about.image,alt:n.about.title,className:"h-64 w-full rounded-xl object-cover shadow-lg"})})]})})})}),a.jsx(fl,{zone:"menu",activeZone:c,children:a.jsx(Pe,{id:"menu.style.background",label:"Modifier le fond de la section Menu",onEdit:o,className:"block",buttonClassName:"right-4 top-4",children:a.jsx("section",{className:"section section-muted",style:{...w,...E},children:a.jsxs("div",{className:"section-inner section-inner--wide section-inner--center",style:E,children:[a.jsx(Pe,{id:"menu.title",label:"Modifier le titre du menu",onEdit:o,className:"block",buttonClassName:"right-0 -top-3",children:K("menu.title","h2",{className:"section-title",style:Z("menu.title")},n.menu.title)}),n.menu.image&&a.jsx(Pe,{id:"menu.image",label:"Modifier l'image du menu",onEdit:o,className:"mb-8 block",buttonClassName:"right-4 top-4",children:a.jsx("img",{src:n.menu.image,alt:n.menu.title,className:"h-64 w-full rounded-xl object-cover shadow-lg"})}),a.jsx("div",{className:"menu-grid",children:i.length>0?i.map(M=>{const ce=!!M.image;return a.jsxs("article",{className:"ui-card menu-card",children:[ce?a.jsx("img",{src:M.image,alt:M.nom_produit,className:"h-40 w-full rounded-t-xl object-cover"}):a.jsx("div",{className:"h-40 w-full rounded-t-xl bg-gradient-to-br from-orange-200 via-amber-100 to-orange-50"}),a.jsxs("div",{className:"menu-card__body",children:[a.jsx("h3",{className:"menu-card__title",style:E,children:M.nom_produit}),M.description&&a.jsx("p",{className:"menu-card__description",style:C,children:M.description}),a.jsx("p",{className:"menu-card__price",style:C,children:me(M.prix_vente)})]})]},M.id)}):a.jsx("div",{className:"col-span-full rounded-2xl border border-dashed border-slate-300 bg-white/70 p-6 text-center",children:a.jsx("p",{className:"text-sm text-slate-500",style:C,children:"Aucun best seller sélectionné pour le moment."})})}),a.jsx(Pe,{id:"menu.ctaLabel",label:"Modifier le bouton de commande",onEdit:o,className:"section-actions mt-8",buttonClassName:"right-2 top-2",children:a.jsxs("div",{className:"section-actions",children:[a.jsx("button",{type:"button",className:"ui-btn ui-btn-primary hero-cta",style:{...I("menu.ctaLabel"),...q("menu.ctaLabel")},disabled:!0,children:K("menu.ctaLabel","span",{className:"inline-flex items-center justify-center",style:I("menu.ctaLabel")},n.menu.ctaLabel)}),a.jsx(Pe,{id:"menu.loadingLabel",label:"Modifier le texte de chargement",onEdit:o,className:"ml-4 inline-flex",buttonClassName:"-right-3 -top-3",as:"span",children:K("menu.loadingLabel","p",{className:"section-text section-text--muted",style:I("menu.loadingLabel")},n.menu.loadingLabel)})]})})]})})})}),a.jsx(fl,{zone:"findUs",activeZone:c,children:a.jsx(Pe,{id:"findUs.style.background",label:"Modifier le fond de la section Encuéntranos",onEdit:o,className:"block",buttonClassName:"right-4 top-4",children:a.jsx("section",{className:"section section-surface",style:{...B,...L},children:a.jsxs("div",{className:"find-us-grid",style:L,children:[a.jsxs("div",{className:"find-us-panel",style:L,children:[a.jsx(Pe,{id:"findUs.title",label:"Modifier le titre Encuéntranos",onEdit:o,className:"block",buttonClassName:"right-0 -top-3",children:K("findUs.title","h2",{className:"section-title",style:Z("findUs.title")},n.findUs.title)}),a.jsxs("div",{className:"find-us-details",children:[a.jsxs("div",{className:"find-us-detail",style:L,children:[a.jsx(wn,{className:"find-us-detail__icon","aria-hidden":"true"}),a.jsxs("div",{children:[a.jsx(Pe,{id:"findUs.addressLabel",label:"Modifier le libellé de l'adresse",onEdit:o,className:"block",buttonClassName:"right-0 -top-3",children:K("findUs.addressLabel","h3",{className:"find-us-detail__title",style:Z("findUs.addressLabel")},n.findUs.addressLabel)}),a.jsx(Pe,{id:"findUs.address",label:"Modifier l'adresse",onEdit:o,className:"mt-1 block",buttonClassName:"right-0 -top-3",children:K("findUs.address","p",{className:"find-us-detail__text",style:I("findUs.address")},n.findUs.address)})]})]}),a.jsxs("div",{className:"find-us-detail",style:L,children:[a.jsx(hs,{className:"find-us-detail__icon","aria-hidden":"true"}),a.jsxs("div",{children:[a.jsx(Pe,{id:"findUs.hoursLabel",label:"Modifier le libellé des horaires",onEdit:o,className:"block",buttonClassName:"right-0 -top-3",children:K("findUs.hoursLabel","h3",{className:"find-us-detail__title",style:Z("findUs.hoursLabel")},n.findUs.hoursLabel)}),a.jsx(Pe,{id:"findUs.hours",label:"Modifier les horaires",onEdit:o,className:"mt-1 block",buttonClassName:"right-0 -top-3",children:K("findUs.hours","p",{className:"find-us-detail__text",style:I("findUs.hours")},n.findUs.hours)})]})]}),a.jsxs("div",{className:"find-us-detail",style:L,children:[a.jsx(fv,{className:"find-us-detail__icon","aria-hidden":"true"}),a.jsxs("div",{children:[a.jsx(Pe,{id:"findUs.cityLabel",label:"Modifier le libellé de l'email",onEdit:o,className:"block",buttonClassName:"right-0 -top-3",children:K("findUs.cityLabel","h3",{className:"find-us-detail__title",style:Z("findUs.cityLabel")},n.findUs.cityLabel)}),a.jsx(Pe,{id:"findUs.city",label:"Modifier l'email",onEdit:o,className:"mt-1 block",buttonClassName:"right-0 -top-3",children:K("findUs.city","p",{className:"find-us-detail__text",style:I("findUs.city")},n.findUs.city)})]})]})]})]}),a.jsx("div",{className:"find-us-map",style:L,children:D?a.jsxs("div",{className:"find-us-map__frame",children:[a.jsx("iframe",{title:`Carte Google Maps pour ${H}`,src:Q,loading:"lazy",allowFullScreen:!0,referrerPolicy:"no-referrer-when-downgrade"}),a.jsx("a",{className:"find-us-map__link",href:P,target:"_blank",rel:"noopener noreferrer",children:a.jsx(Pe,{id:"findUs.mapLabel",label:"Modifier le libellé du lien Google Maps",onEdit:o,className:"inline-flex",buttonClassName:"-right-3 -top-3",as:"span",children:K("findUs.mapLabel","span",{className:"find-us-map__label",style:I("findUs.mapLabel")},n.findUs.mapLabel)})})]}):a.jsx("div",{className:"find-us-map__placeholder",children:a.jsx(Pe,{id:"findUs.mapLabel",label:"Modifier le libellé du lien Google Maps",onEdit:o,className:"inline-flex",buttonClassName:"-right-3 -top-3",as:"span",children:K("findUs.mapLabel","span",{className:"find-us-map__label",style:I("findUs.mapLabel")},n.findUs.mapLabel)})})})]})})})}),a.jsx(fl,{zone:"footer",activeZone:c,children:a.jsx(Pe,{id:"footer.style.background",label:"Modifier le fond du pied de page",onEdit:o,className:"block",buttonClassName:"right-4 top-4",children:a.jsx("footer",{className:"site-footer",style:{...$,...U},children:a.jsx("div",{className:"layout-container site-footer__inner",style:U,children:a.jsx(Pe,{id:"footer.text",label:"Modifier le texte du pied de page",onEdit:o,className:"block",buttonClassName:"right-0 -top-3",children:a.jsxs("p",{style:I("footer.text"),children:["© ",new Date().getFullYear()," ",n.navigation.brand,"."," ",K("footer.text","span",{style:I("footer.text")},n.footer.text)]})})})})})})]})})},wa=n=>{const[i,o]=n.split(":");if(i===void 0||o===void 0)return null;const c=Number.parseInt(i,10),u=Number.parseInt(o,10);return Number.isNaN(c)||Number.isNaN(u)||c<0||c>23||u<0||u>59?null:c*60+u},au=n=>["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][n.getDay()],oo=(n,i=new Date)=>{let o,c;if(n.dailySchedules){const f=au(i),g=n.dailySchedules[f];if(!g||!g.enabled)return!1;o=wa(g.startTime),c=wa(g.endTime)}else o=wa(n.startTime),c=wa(n.endTime);if(o===null||c===null||o===c)return!0;const u=i.getHours()*60+i.getMinutes();return o<c?u>=o&&u<c:u>=o||u<c},su=(n,i="fr-FR",o=new Date)=>{const c=new Intl.DateTimeFormat(i,{hour:"2-digit",minute:"2-digit"}),u=new Date(o),f=new Date(o);let g,x;if(n.dailySchedules){const v=au(o),N=n.dailySchedules[v];if(!N||!N.enabled)return"Fermé";g=wa(N.startTime),x=wa(N.endTime)}else g=wa(n.startTime),x=wa(n.endTime);g!==null&&u.setHours(Math.floor(g/60),g%60,0,0),x!==null&&f.setHours(Math.floor(x/60),x%60,0,0);const p=c.format(u),y=c.format(f);return`${p} – ${y}`},M2=(n,i=new Date)=>{let o,c;if(n.dailySchedules){const x=au(i),p=n.dailySchedules[x];if(!p||!p.enabled)return null;o=wa(p.startTime),c=wa(p.endTime)}else o=wa(n.startTime),c=wa(n.endTime);if(o===null||c===null)return null;const u=i.getHours()*60+i.getMinutes(),f=oo(n,i)?c:o,g=new Date(i);return g.setSeconds(0,0),g.setHours(Math.floor(f/60),f%60,0,0),f<=u&&f===c&&g.setDate(g.getDate()+1),f<=u&&f===o&&o>=c&&g.setDate(g.getDate()+1),g},Fg=(n,i=new Date)=>{const o=M2(n,i);if(!o)return null;const c=o.getTime()-i.getTime();return Math.max(0,Math.round(c/6e4))},kh="/logo-brand.svg",A2=Cn,Yg=Sa.forwardRef(({pin:n,onPinChange:i,pinLength:o,describedBy:c,disabled:u},f)=>{const g=N=>{n.length<o&&!u&&i(n+N)},x=()=>{n.length>0&&!u&&i(n.slice(0,-1))},p=N=>{if(u)return;const j=N.target.value.replace(/\D/g,"").slice(0,o);i(j)},y=N=>{if(/^\d$/.test(N.key)){N.preventDefault(),g(N.key);return}if(N.key==="Backspace"){N.preventDefault(),x();return}N.key==="Escape"&&(N.preventDefault(),i(""))},v=n.length===0?`Aucun chiffre saisi. Vous pouvez entrer ${o} chiffres.`:`${n.length} ${n.length>1?"chiffres saisis":"chiffre saisi"} sur ${o}.`;return a.jsxs("div",{className:"pin-input","aria-label":"Clavier numérique sécurisé",children:[a.jsx("input",{ref:f,id:"staff-pin-field",type:"password",inputMode:"numeric",autoComplete:"one-time-code",className:"pin-input__field",value:n,onChange:p,onKeyDown:y,"aria-describedby":c,"aria-label":`Code PIN à ${o} chiffres`,disabled:u,"aria-disabled":u,"aria-busy":u}),a.jsx("div",{className:"pin-indicator",role:"presentation",children:Array.from({length:o}).map((N,j)=>a.jsx("div",{className:"pin-indicator__slot","aria-hidden":"true",children:n[j]?"•":""},j))}),a.jsx("div",{className:"pin-input__live","aria-live":"polite",children:v}),a.jsxs("div",{className:"pin-pad",children:[[...Array(9)].map((N,j)=>a.jsx("button",{type:"button",onClick:()=>g(String(j+1)),className:"pin-pad__button",disabled:u,children:j+1},j+1)),a.jsx("div",{"aria-hidden":"true"}),a.jsx("button",{type:"button",onClick:()=>g("0"),className:"pin-pad__button",disabled:u,children:"0"}),a.jsx("button",{type:"button",onClick:x,className:"pin-pad__button pin-pad__button--muted",disabled:u,children:"DEL"})]})]})});Yg.displayName="PinInput";const z2=n=>n===1?"menu-grid menu-grid--single":n===2?"menu-grid menu-grid--double":n===3?"menu-grid menu-grid--triple":n>=6?"menu-grid menu-grid--six":n>0?"menu-grid menu-grid--multi":"menu-grid",O2=n=>{const i="ui-card menu-card";return n===1?`${i} menu-card--single`:n===2?`${i} menu-card--double`:n===3?`${i} menu-card--triple`:n>=6?`${i} menu-card--compact`:i},D2=()=>{const[n,i]=h.useState(!1),[o,c]=h.useState(""),[u,f]=h.useState(""),[g,x]=h.useState(!1),p=h.useRef(null),{login:y}=Va(),v=Xs(),{content:N}=Ti(),[j,S]=h.useState(()=>N);h.useEffect(()=>{N&&S(N)},[N]);const w=j??A2;qg(w.assets.library);const{navigation:E,hero:C,about:B,menu:L,findUs:$,footer:U,onlineOrdering:G}=w,se=h.useCallback(je=>je?je.replace(/[,\s]*Colombia\b/gi,"").trim():"",[]),W=h.useMemo(()=>se($.address),[$.address,se]),K=E.brandLogo??kh,oe=E.brandLogo??kh,Y=za(E.style),Z=Oa(E.style),I=eu(C.style,C.backgroundImage),q=Oa(C.style),O=ms(C.style),ne=za(B.style),_=Oa(B.style),T=za(L.style),A=Oa(L.style),P=ms(L.style),Q=za($.style),D=Oa($.style),H=ms($.style),M=za(U.style),ce=ms(U.style),de=w.elementStyles??{},be={navigation:E.style,hero:C.style,about:B.style,menu:L.style,instagramReviews:w.instagramReviews.style,findUs:$.style,footer:U.style},te=je=>de[je],re=je=>{const De=Ya(je);return tu(be[De],te(je))},xe=je=>{const De=Ya(je);return Ig(be[De],te(je))},Ne=je=>{const De=Ya(je);return Hg(be[De],te(je))},ze=w.elementRichText??{},[Ve,Dt]=h.useState(()=>new Date);h.useEffect(()=>{if(typeof window>"u")return;const je=()=>Dt(new Date);je();const De=window.setInterval(je,6e4);return()=>window.clearInterval(De)},[]);const xt=G.schedule;h.useMemo(()=>su(xt,"fr-FR",Ve),[xt.startTime,xt.endTime,xt.dailySchedules,Ve]);const zt=oo(xt,Ve),ge=Fg(xt,Ve),ke=h.useMemo(()=>{if(ge===null)return null;if(ge<1)return"Réouverture imminente";if(ge<60)return`Réouverture dans environ ${ge} min`;const je=Math.floor(ge/60),De=ge%60;return De===0?`Réouverture dans environ ${je} h`:`Réouverture dans environ ${je} h ${De.toString().padStart(2,"0")} min`},[ge]),Ae=je=>{var Bt;const De=ze[je],mt=(Bt=De==null?void 0:De.html)==null?void 0:Bt.trim();return mt&&mt.length>0?mt:null},Me=(je,De,mt,Bt)=>{const Nl=Ae(je);return Nl?Sa.createElement(De,{...mt,dangerouslySetInnerHTML:{__html:Nl}}):Sa.createElement(De,mt,Bt)},[Je,it]=h.useState([]),[St,aa]=h.useState([]),[Qe,ua]=h.useState(!0),[Ca,ht]=h.useState(!1),[sa,ue]=h.useState(()=>no()),pe=h.useCallback(async je=>{x(!0),f("");try{const De=await y(je),mt=Jd(De)??"/dashboard";i(!1),c(""),v(mt)}catch(De){console.error("Failed to authenticate with PIN",De);const mt=De instanceof Error&&De.message?De.message:"PIN invalide";f(mt),c(""),requestAnimationFrame(()=>{var Bt;(Bt=p.current)==null||Bt.focus()})}finally{x(!1)}},[y,v]);h.useEffect(()=>{if(!n)return;const je=window.setTimeout(()=>{var De;(De=p.current)==null||De.focus()},0);return()=>window.clearTimeout(je)},[n]),h.useEffect(()=>{o.length===6&&!g&&pe(o)},[o,g,pe]),h.useEffect(()=>{if(!(typeof window>"u"))try{const je=window.localStorage.getItem("customer-order-history");if(!je)return;const De=JSON.parse(je);Array.isArray(De)&&aa(De)}catch(je){console.error("Could not load order history",je)}},[]),h.useEffect(()=>{let je=!0;return(async()=>{try{const mt=await ye.getBestSellerProducts();je&&it(mt)}catch(mt){console.error("Could not load best seller products",mt)}finally{je&&ua(!1)}})(),()=>{je=!1}},[]);const we=$.address.trim(),$e=$.mapUrl,Ge=typeof $e=="string"?$e.trim():"",Xe=Ge.length>0,Ee=!Xe&&we.length>0?encodeURIComponent(we):"",Be=Xe?Ge:Ee?`https://www.google.com/maps?q=${Ee}`:"https://www.google.com/maps",yt=Xe?$g(Ge,"output","embed"):Ee?`https://www.google.com/maps?q=${Ee}&output=embed`:"about:blank",rt=Xe||Ee.length>0,qt=we.length>0?we:$.title,ka="0681161642",Qt=`https://wa.me/${`33${ka.replace(/^0/,"")}`}`,Yt=(sa==null?void 0:sa.orderId)??null,ie=Je.slice(0,6),Se=ie.length,Ke=z2(Se),We=O2(Se),et=je=>{je.preventDefault(),o.length===6&&!g&&pe(o)},Ct=()=>{Xh(),ue(null)},ma=je=>{localStorage.setItem("customer-order-reorder-id",je),v("/commande-client")},Ks=()=>{zt&&v("/commande-client")};return a.jsxs("div",{className:"login-page",children:[a.jsx("header",{className:"login-header",style:Y,children:a.jsxs("div",{className:"layout-container login-header__inner",style:Z,children:[a.jsxs("div",{className:"login-brand",style:Z,children:[a.jsx("img",{src:K,alt:`Logo ${E.brand}`,className:"login-brand__logo"}),Me("navigation.brand","span",{className:"login-brand__name",style:re("navigation.brand")},E.brand)]}),a.jsxs("nav",{className:"login-nav","aria-label":"Navigation principale",children:[Me("navigation.links.home","a",{href:"#accueil",className:"login-nav__link",style:xe("navigation.links.home")},E.links.home),Me("navigation.links.about","a",{href:"#apropos",className:"login-nav__link",style:xe("navigation.links.about")},E.links.about),Me("navigation.links.menu","a",{href:"#menu",className:"login-nav__link",style:xe("navigation.links.menu")},E.links.menu),a.jsx("button",{type:"button",onClick:()=>i(!0),className:"login-nav__staff-btn","aria-label":E.links.loginCta,children:a.jsx("img",{src:oe,alt:"",className:"login-brand__logo","aria-hidden":"true"})})]}),a.jsx("button",{type:"button",onClick:()=>ht(!0),className:"login-header__menu","aria-label":"Ouvrir le menu",children:a.jsx(dg,{size:24})})]})}),Ca&&a.jsxs("div",{className:"login-menu-overlay",role:"dialog","aria-modal":"true",style:Y,children:[a.jsx("button",{type:"button",onClick:()=>ht(!1),className:"login-menu-overlay__close","aria-label":"Fermer le menu",children:a.jsx(fs,{size:28})}),a.jsxs("nav",{className:"login-menu-overlay__nav","aria-label":"Navigation mobile",style:Z,children:[Me("navigation.links.home","a",{href:"#accueil",onClick:()=>ht(!1),className:"login-menu-overlay__link",style:xe("navigation.links.home")},E.links.home),Me("navigation.links.about","a",{href:"#apropos",onClick:()=>ht(!1),className:"login-menu-overlay__link",style:xe("navigation.links.about")},E.links.about),Me("navigation.links.menu","a",{href:"#menu",onClick:()=>ht(!1),className:"login-menu-overlay__link",style:xe("navigation.links.menu")},E.links.menu),a.jsx("button",{type:"button",onClick:()=>{i(!0),ht(!1)},className:"login-nav__staff-btn login-menu-overlay__staff-btn","aria-label":E.links.loginCta,children:a.jsx("img",{src:oe,alt:"",className:"login-brand__logo","aria-hidden":"true"})})]})]}),a.jsxs("main",{children:[a.jsx("section",{id:"accueil",className:"section section-hero",style:{...I,...q},children:Yt?a.jsx(_2,{orderId:Yt,onNewOrderClick:Ct,variant:"hero"}):a.jsxs("div",{className:"hero-content",style:q,children:[Me("hero.title","h2",{className:"hero-title",style:re("hero.title")},C.title),Me("hero.subtitle","p",{className:"hero-subtitle",style:xe("hero.subtitle")},C.subtitle),a.jsx("button",{onClick:Ks,className:`ui-btn hero-cta ${zt?"ui-btn-accent":"hero-cta--disabled"}`.trim(),style:{...xe("hero.ctaLabel"),...Ne("hero.ctaLabel")},disabled:!zt,"aria-disabled":!zt,children:Me("hero.ctaLabel","span",{className:"inline-flex items-center justify-center",style:xe("hero.ctaLabel")},C.ctaLabel)}),!zt&&a.jsxs("div",{className:"hero-availability",children:[a.jsx("div",{className:"hero-availability__icon",children:a.jsx(hs,{size:28})}),a.jsxs("div",{className:"hero-availability__content",children:[a.jsx("p",{className:"hero-availability__title",children:G.closedTitle}),a.jsx("p",{className:"hero-availability__subtitle",children:G.closedSubtitle||"Consultez nos horaires ci-dessous."}),xt.dailySchedules&&a.jsxs("div",{className:"hero-availability__schedule",children:[a.jsx("p",{className:"hero-availability__schedule-title",children:"Horaires d'ouverture:"}),a.jsx("div",{className:"hero-availability__schedule-list",children:Object.entries(xt.dailySchedules).map(([je,De])=>{const mt={monday:"Lundi",tuesday:"Mardi",wednesday:"Mercredi",thursday:"Jeudi",friday:"Vendredi",saturday:"Samedi",sunday:"Dimanche"};return a.jsxs("div",{className:"hero-availability__schedule-item",children:[a.jsx("span",{className:"hero-availability__schedule-day",children:mt[je]}),a.jsx("span",{className:"hero-availability__schedule-hours",children:De.enabled?`${De.startTime} – ${De.endTime}`:"Fermé"})]},je)})})]}),ke&&a.jsx("p",{className:"hero-availability__countdown",children:ke})]})]}),St.length>0&&a.jsxs("div",{className:"hero-history",children:[Me("hero.historyTitle","p",{className:"hero-history__title",style:xe("hero.historyTitle")},C.historyTitle),a.jsx("div",{className:"hero-history__list",children:St.slice(0,3).map(je=>a.jsxs("div",{className:"hero-history__item",children:[a.jsxs("div",{className:"hero-history__meta",children:[a.jsxs("p",{className:"hero-history__date",style:O,children:["Pedido del ",new Date(je.date_creation).toLocaleDateString()]}),a.jsxs("p",{className:"hero-history__details",style:O,children:[je.items.length," article(s) • ",me(je.total)]})]}),a.jsx("button",{type:"button",onClick:()=>ma(je.id),className:"hero-history__cta",style:{...xe("hero.reorderCtaLabel"),...Ne("hero.reorderCtaLabel")},children:Me("hero.reorderCtaLabel","span",{className:"inline-flex items-center justify-center",style:xe("hero.reorderCtaLabel")},C.reorderCtaLabel)})]},je.id))})]})]})}),a.jsx("section",{id:"apropos",className:"section section-surface",style:{...ne,..._},children:a.jsxs("div",{className:"section-inner section-inner--center",style:_,children:[Me("about.title","h2",{className:"section-title",style:re("about.title")},B.title),Me("about.description","p",{className:"section-text section-text--muted",style:xe("about.description")},B.description),B.image&&a.jsx("img",{src:B.image,alt:B.title,className:"mt-6 h-64 w-full rounded-xl object-cover shadow-lg"})]})}),a.jsx("section",{id:"menu",className:"section section-muted",style:{...T,...A},children:a.jsxs("div",{className:"section-inner section-inner--wide section-inner--center",style:A,children:[Me("menu.title","h2",{className:"section-title",style:re("menu.title")},L.title),L.image&&a.jsx("img",{src:L.image,alt:L.title,className:"mb-8 h-64 w-full rounded-xl object-cover shadow-lg"}),Qe?Me("menu.loadingLabel","p",{className:"section-text section-text--muted",style:xe("menu.loadingLabel")},L.loadingLabel):ie.length>0?a.jsx("div",{className:Ke,children:ie.map(je=>a.jsxs("article",{className:We,children:[a.jsx("img",{src:je.image,alt:je.nom_produit,className:"menu-card__media"}),a.jsxs("div",{className:"menu-card__body",children:[a.jsx("h3",{className:"menu-card__title",style:A,children:je.nom_produit}),a.jsx("p",{className:"menu-card__description",style:P,children:je.description}),a.jsx("p",{className:"menu-card__price",style:P,children:me(je.prix_vente)})]})]},je.id))}):a.jsx("p",{className:"section-text section-text--muted",style:P,children:"Aucun produit best seller n'est disponible pour le moment."}),a.jsx("div",{className:"section-actions",children:a.jsx("button",{onClick:()=>v("/commande-client"),className:"ui-btn ui-btn-primary hero-cta",style:{...xe("menu.ctaLabel"),...Ne("menu.ctaLabel")},children:Me("menu.ctaLabel","span",{className:"inline-flex items-center justify-center",style:xe("menu.ctaLabel")},L.ctaLabel)})})]})}),a.jsx("section",{id:"find-us",className:"section section-surface py-14 sm:py-16",style:{...Q,...D},children:a.jsxs("div",{className:"section-inner section-inner--wide section-inner--center",children:[Me("findUs.title","h2",{className:"section-title text-center",style:re("findUs.title")},$.title),a.jsxs("div",{className:"mx-auto mt-10 grid w-full max-w-6xl gap-8 md:grid-cols-2 lg:grid-cols-[minmax(0,1fr)_minmax(0,1.15fr)]",children:[a.jsxs("div",{className:"grid gap-6",children:[a.jsx("article",{className:"h-full rounded-[24px] border border-white/70 bg-white/75 p-4 shadow-[0_24px_48px_-30px_rgba(15,23,42,0.5)] backdrop-blur",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-2xl bg-orange-500 text-white",children:a.jsx(wn,{className:"h-5 w-5"})}),a.jsxs("div",{className:"flex-1 space-y-2",children:[Me("findUs.addressLabel","h3",{className:"text-xl font-semibold text-gray-900",style:re("findUs.addressLabel")},$.addressLabel),Me("findUs.address","p",{className:"whitespace-pre-line text-base font-medium text-gray-700",style:xe("findUs.address")},W)]})]})}),a.jsx("article",{className:"h-full rounded-[24px] border border-white/70 bg-white/75 p-4 shadow-[0_24px_48px_-30px_rgba(15,23,42,0.5)] backdrop-blur",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-2xl bg-orange-500 text-white",children:a.jsx(hs,{className:"h-5 w-5"})}),a.jsxs("div",{className:"flex-1 space-y-2",children:[Me("findUs.hoursLabel","h3",{className:"text-xl font-semibold text-gray-900",style:re("findUs.hoursLabel")},$.hoursLabel),Me("findUs.hours","p",{className:"whitespace-pre-line text-base font-medium text-gray-700",style:xe("findUs.hours")},$.hours)]})]})}),a.jsx("article",{className:"h-full rounded-[24px] border border-white/70 bg-white/75 p-4 shadow-[0_24px_48px_-30px_rgba(15,23,42,0.5)] backdrop-blur",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-2xl bg-orange-500 text-white",children:a.jsx(xl,{className:"h-5 w-5"})}),a.jsxs("div",{className:"flex-1 space-y-3",children:[Me("findUs.cityLabel","h3",{className:"text-xl font-semibold text-gray-900",style:re("findUs.cityLabel")},$.cityLabel),a.jsx("div",{className:"flex flex-col gap-3 text-base font-medium text-gray-700",style:H,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("a",{href:`tel:${ka}`,className:"inline-flex items-center gap-2 text-base font-semibold text-gray-900 transition hover:text-orange-500",children:[a.jsx(xl,{className:"h-5 w-5 text-orange-500"}),ka]}),a.jsx("a",{href:Qt,target:"_blank",rel:"noopener noreferrer",className:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-green-500 text-white transition hover:bg-green-600","aria-label":"Nous écrire sur WhatsApp",children:a.jsx(xv,{className:"h-4 w-4"})})]})})]})]})})]}),a.jsxs("div",{className:"flex h-full w-full flex-col justify-between rounded-[36px] border border-white/70 bg-white/75 p-6 shadow-[0_28px_70px_-32px_rgba(15,23,42,0.55)] backdrop-blur",children:[a.jsx("div",{className:"relative aspect-[13/8] w-full overflow-hidden rounded-3xl bg-white",children:rt?a.jsx("iframe",{title:`Carte Google Maps pour ${qt}`,src:yt,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",className:"h-full w-full border-0",allowFullScreen:!0}):a.jsx("div",{className:"flex h-full w-full items-center justify-center bg-gray-100 px-8 text-center",children:a.jsx("p",{className:"text-lg text-gray-500",style:H,children:"La localisation de notre restaurant sera bientôt disponible."})})}),a.jsx("div",{className:"mt-6 flex justify-center",children:rt?a.jsxs("a",{href:Be,target:"_blank",rel:"noopener noreferrer",className:"inline-flex w-full items-center justify-center gap-3 rounded-full bg-orange-500 px-6 py-3 text-base font-semibold text-white shadow-lg transition hover:bg-orange-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-500",style:xe("findUs.mapLabel"),children:[a.jsx(wn,{className:"h-6 w-6 text-white"}),Me("findUs.mapLabel","span",{className:"text-base font-semibold"},$.mapLabel)]}):null})]})]})]})})]}),a.jsx("footer",{className:"site-footer",style:{...M,...ce},children:a.jsx("div",{className:"layout-container site-footer__inner",style:ce,children:a.jsxs("p",{style:xe("footer.text"),children:["© ",new Date().getFullYear()," ",E.brand,"."," ",Me("footer.text","span",{style:xe("footer.text")},U.text)]})})}),a.jsx(wt,{isOpen:n,onClose:()=>{i(!1),c(""),f("")},title:"Connexion du personnel",size:"lg",children:a.jsx("div",{className:"login-modal",children:a.jsx("form",{onSubmit:et,className:"login-modal__form","aria-describedby":u?"staff-pin-error":void 0,children:a.jsxs("div",{className:"login-modal__panel",children:[a.jsx(Yg,{ref:p,pin:o,onPinChange:c,pinLength:6,describedBy:u?"staff-pin-error":void 0,disabled:g}),u&&a.jsx("p",{id:"staff-pin-error",className:"login-modal__error",role:"alert","aria-live":"assertive",children:u})]})})})})]})},Th=[{value:"editor",label:"Éditeur",headerDescription:"Gestion complète",helper:"Créer, modifier et valider le contenu.",tooltip:"Autorise toutes les actions, y compris la modification et la validation des données."},{value:"readonly",label:"Lecture seule",headerDescription:"Consultation",helper:"Visualiser les informations sans modifier.",tooltip:"Permet uniquement de consulter les informations sans pouvoir les modifier."},{value:"none",label:"Aucun",headerDescription:"Accès bloqué",helper:"Masquer totalement la section.",tooltip:"Bloque complètement l’accès à la section ou à la fonctionnalité."}],R2=({permissionKeys:n,permissions:i,onChange:o,getPermissionLabel:c,customPermissions:u,onRemoveCustomPermission:f})=>{const g=h.useMemo(()=>{if(n.length===0)return[];const p=ta.map(S=>S.permissionKey),y=new Set(p),v=p.filter(S=>n.includes(S)),N=n.filter(S=>!y.has(S)).sort((S,w)=>c(S).localeCompare(c(w),"fr")),j=[];return v.length>0&&j.push({id:"navigation",title:"Navigation principale",keys:v}),N.length>0&&j.push({id:"custom",title:"Permissions personnalisées",keys:N}),j},[c,n]),x=p=>{n.forEach(y=>{(i[y]??"none")!==p&&o(y,p)})};return n.length===0?a.jsx("div",{className:"rounded-xl border border-dashed border-gray-300 bg-gray-50 px-4 py-6 text-center text-sm font-medium text-gray-900",children:"Aucune permission disponible pour ce rôle pour le moment."}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{type:"button",className:"permission-action-button",onClick:()=>x("editor"),title:"Autoriser toutes les sections en mode édition.",children:"Tout autoriser"}),a.jsx("button",{type:"button",className:"permission-action-button",onClick:()=>x("readonly"),title:"Basculer toutes les sections en lecture seule.",children:"Lecture seule partout"}),a.jsx("button",{type:"button",className:"permission-action-button is-danger",onClick:()=>x("none"),title:"Révoquer toutes les permissions.",children:"Tout bloquer"})]}),a.jsx("div",{className:"overflow-hidden rounded-xl border border-gray-200 bg-white shadow-sm",children:a.jsx("div",{className:"max-h-96 overflow-auto",children:a.jsx("div",{className:"min-w-full",children:a.jsxs("div",{className:"grid grid-cols-[minmax(220px,2fr)_repeat(3,minmax(140px,1fr))]",children:[a.jsx("div",{className:"border-b border-gray-200 bg-gray-50 px-4 py-3 text-sm font-semibold text-gray-900",children:"Section / permission"}),Th.map(p=>a.jsxs("div",{className:"border-b border-l border-gray-200 bg-gray-50 px-4 py-3 text-sm font-semibold text-gray-900",children:[a.jsx("div",{children:p.label}),a.jsx("p",{className:"mt-1 text-xs font-medium text-gray-900",children:p.headerDescription})]},p.value)),g.map(p=>a.jsxs(Sa.Fragment,{children:[a.jsx("div",{className:"col-span-4 border-t border-gray-200 bg-gray-100 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-gray-900",children:p.title}),p.keys.map(y=>{const v=i[y]??"none",N=`permission-${y.replace(/[^a-zA-Z0-9_-]/g,"_")}`,j=y in u;return a.jsxs(Sa.Fragment,{children:[a.jsx("div",{className:"border-t border-gray-100 px-4 py-3",children:a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-900",children:c(y)}),j&&f&&a.jsx("button",{type:"button",onClick:()=>f(y),className:"text-gray-700 transition-colors hover:text-red-600",title:"Supprimer cette permission personnalisée",children:a.jsx(kn,{className:"h-4 w-4"})})]})}),Th.map(S=>{const w=v===S.value;return a.jsx("div",{className:"border-t border-l border-gray-100 px-4 py-3",children:a.jsxs("label",{className:`permission-choice${w?" is-active":""}`,title:S.tooltip,children:[a.jsx("input",{type:"radio",className:"sr-only",name:N,value:S.value,checked:w,onChange:()=>o(y,S.value)}),a.jsx("span",{className:"permission-choice__label",children:S.label}),a.jsx("span",{className:"permission-choice__helper",children:S.helper})]})},S.value)})]},y)})]},p.id))]})})})})]})},U2=({mode:n,formState:i,onSubmit:o,onInputChange:c,onHomePageChange:u,onPermissionChange:f,onAddCustomPermission:g,onRemoveCustomPermission:x,onCancel:p,isSubmitting:y,hasAccessibleHomePage:v,permissionKeys:N,getPermissionLabel:j,isPermissionGranted:S})=>{const[w,E]=h.useState(!1),[C,B]=h.useState(""),[L,$]=h.useState(""),[U,G]=h.useState(null),se=()=>{E(!1),B(""),$(""),G(null)},W=()=>{const K=C.trim(),oe=L.trim();if(!K||!oe){G("La clé technique et le nom affiché sont obligatoires.");return}if(N.includes(K)){G("Cette clé de permission existe déjà.");return}g(K,oe),se()};return a.jsxs("div",{children:[a.jsx("h4",{className:"mb-4 text-lg font-semibold text-gray-900",children:n==="edit"?"Modifier le rôle sélectionné":"Créer un nouveau rôle"}),a.jsxs("form",{onSubmit:o,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"role-name",className:"mb-1 block text-sm font-medium text-gray-900",children:"Nom du rôle"}),a.jsx("input",{id:"role-name",name:"name",value:i.name,onChange:c,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-brand-primary focus:outline-none focus:ring-1 focus:ring-brand-primary",placeholder:"Ex. Manager"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"role-pin",className:"mb-1 block text-sm font-medium text-gray-900",children:"Code PIN d'accès"}),a.jsx("input",{id:"role-pin",name:"pin",value:i.pin,onChange:c,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-brand-primary focus:outline-none focus:ring-1 focus:ring-brand-primary",placeholder:"Ex. 1234"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"role-home-page",className:"mb-1 block text-sm font-medium text-gray-900",children:"Page d'accueil par défaut"}),a.jsx("select",{id:"role-home-page",name:"homePage",value:i.homePage,onChange:K=>u(K.target.value),disabled:!v,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-brand-primary focus:outline-none focus:ring-1 focus:ring-brand-primary disabled:cursor-not-allowed disabled:bg-gray-100",children:ta.map(K=>{const oe=S(i.permissions[K.permissionKey]);return a.jsxs("option",{value:K.permissionKey,disabled:!oe,children:[j(K.permissionKey),oe?"":" (accès requis)"]},K.permissionKey)})}),v?a.jsx("p",{className:"mt-1 text-xs text-gray-900",children:"Les pages sans permission sont désactivées."}):a.jsx("p",{className:"mt-1 text-xs font-medium text-red-700",children:"Accordez au moins une permission pour choisir une page d'accueil."})]}),a.jsxs("div",{children:[a.jsx("p",{className:"mb-2 text-sm font-semibold text-gray-900",children:"Permissions par page"}),a.jsx(R2,{permissionKeys:N,permissions:i.permissions,onChange:f,getPermissionLabel:j,customPermissions:i.customPermissions,onRemoveCustomPermission:x}),a.jsx("div",{className:"mt-4 space-y-3",children:w?a.jsxs("div",{className:"rounded-md border border-dashed border-brand-primary/50 bg-brand-primary/5 p-4",children:[a.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-900",children:"Clé technique"}),a.jsx("input",{type:"text",value:C,onChange:K=>{B(K.target.value),G(null)},className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-brand-primary focus:outline-none focus:ring-1 focus:ring-brand-primary",placeholder:"ex. /rapports"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-900",children:"Nom affiché"}),a.jsx("input",{type:"text",value:L,onChange:K=>{$(K.target.value),G(null)},className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-brand-primary focus:outline-none focus:ring-1 focus:ring-brand-primary",placeholder:"ex. Rapports"})]})]}),U&&a.jsx("p",{className:"mt-2 text-xs font-medium text-red-700",children:U}),a.jsxs("div",{className:"mt-3 flex justify-end space-x-2",children:[a.jsx("button",{type:"button",onClick:se,className:"rounded-md border border-gray-300 px-3 py-1.5 text-xs font-semibold text-gray-900 hover:bg-gray-100",children:"Annuler"}),a.jsx("button",{type:"button",onClick:W,className:"rounded-md bg-brand-primary px-3 py-1.5 text-xs font-semibold text-white hover:bg-brand-primary/90",children:"Ajouter"})]})]}):a.jsx("button",{type:"button",onClick:()=>{E(!0),G(null)},className:"text-sm font-semibold text-brand-primary hover:underline",children:"Ajouter une permission"})})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[n==="edit"&&a.jsx("button",{type:"button",onClick:p,className:"rounded-md border border-gray-300 px-3 py-2 text-sm font-semibold text-gray-900 hover:bg-gray-100",children:"Annuler"}),a.jsxs("button",{type:"submit",disabled:y,className:"inline-flex items-center rounded-md bg-brand-primary px-4 py-2 text-sm font-semibold text-white shadow hover:bg-brand-primary/90 disabled:cursor-not-allowed disabled:opacity-60",children:[a.jsx(Iv,{className:"mr-2 h-4 w-4"}),y?"Enregistrement...":n==="edit"?"Mettre à jour":"Créer"]})]})]})]})},L2=({roles:n,isFetching:i,onCreateRole:o,onSelectRole:c,onDeleteRole:u,selectedRoleId:f,isEditing:g,deletingRoleId:x,getPermissionLabel:p})=>{const y=!i&&n.length===0;return a.jsxs("div",{className:"flex h-full flex-col",children:[a.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Rôles existants"}),a.jsxs("button",{type:"button",onClick:o,className:"inline-flex items-center rounded-md border border-brand-primary px-2 py-1 text-sm font-medium text-brand-primary transition-colors hover:bg-brand-primary/10",children:[a.jsx(Si,{className:"mr-1.5 h-4 w-4"}),"Nouveau rôle"]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto rounded-md border border-gray-200 p-3",children:i?a.jsx("p",{className:"text-sm text-gray-900",children:"Chargement des rôles..."}):y?a.jsx("p",{className:"text-sm text-gray-900",children:"Aucun rôle configuré pour le moment."}):a.jsx("div",{className:"space-y-3",children:n.map(v=>{const N=g&&f===v.id;return a.jsxs("div",{className:`flex items-center justify-between rounded-md border px-3 py-2 transition-colors ${N?"border-brand-primary bg-brand-primary/10":"border-gray-200"}`,children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"font-semibold text-gray-900",children:v.name}),a.jsxs("p",{className:"text-xs font-medium text-gray-900",children:["PIN : ",v.pin??"—"]}),v.homePage&&a.jsxs("p",{className:"text-xs font-medium text-gray-900",children:["Accueil : ",p(v.homePage)]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:()=>c(v),className:"rounded-md border border-gray-300 px-2 py-1 text-xs font-semibold text-gray-900 transition-colors hover:bg-gray-100",children:"Modifier"}),a.jsxs("button",{type:"button",onClick:()=>u(v.id),disabled:x===v.id,className:"inline-flex items-center rounded-md border border-red-300 px-2 py-1 text-xs font-semibold text-red-600 transition-colors hover:bg-red-50 disabled:cursor-not-allowed disabled:opacity-60",children:[a.jsx(kn,{className:"mr-1 h-3 w-3"}),"Supprimer"]})]})]},v.id)})})})]})};var Yh;const q2=((Yh=ta[0])==null?void 0:Yh.permissionKey)??"/dashboard",B2=n=>{if(!n)return!1;const i=n.trim().toLowerCase();return i===bg.ADMIN||i==="administrateur"},bn=(n,i,o={})=>{const c={...n||{}};return delete c[Sn],ta.forEach(u=>{u.permissionKey in c||(u.permissionKey===gs&&B2(i)?c[u.permissionKey]="editor":c[u.permissionKey]="none")}),Object.keys(o).forEach(u=>{u in c||(c[u]="none")}),c},yn=n=>{const i=ta.find(o=>vn(n[o.permissionKey]));return(i==null?void 0:i.permissionKey)??q2},Eh=n=>{const i=bn(void 0,void 0,n);return{name:"",pin:"",permissions:i,homePage:yn(i),customPermissions:{...n}}},vn=n=>n==="editor"||n==="readonly",I2=({isOpen:n,onClose:i})=>{const{refreshRole:o,role:c}=Va(),[u,f]=h.useState([]),[g,x]=h.useState({}),[p,y]=h.useState(()=>Eh({})),[v,N]=h.useState("create"),[j,S]=h.useState(!1),[w,E]=h.useState(!1),[C,B]=h.useState(null),[L,$]=h.useState(null),[U,G]=h.useState(null),se=h.useMemo(()=>{const Q=ta.map(H=>H.permissionKey),D=new Set;return Object.keys(g).forEach(H=>{Q.includes(H)||D.add(H)}),u.forEach(H=>{Object.keys(H.permissions).forEach(M=>{M!==Sn&&(Q.includes(M)||D.add(M))})}),[...Q,...Array.from(D)]},[u,g]),W=h.useMemo(()=>ta.some(Q=>vn(p.permissions[Q.permissionKey])),[p.permissions]),K=h.useCallback(async()=>{S(!0);try{const Q=await ye.getRoles();f(Q),x(D=>{const H={...D};let M=!1;const ce=new Set(ta.map(de=>de.permissionKey));return Q.forEach(de=>{Object.keys(de.permissions).forEach(be=>{be===Sn||ce.has(be)||be in H||(H[be]=be,M=!0)})}),M?H:D}),G(null)}catch(Q){console.error("Failed to load roles:",Q),G("Impossible de charger les rôles.")}finally{S(!1)}},[]),oe=h.useCallback(()=>{N("create"),y(Eh(g))},[g]);h.useEffect(()=>{n&&($(null),G(null),oe(),K())},[n,K,oe]),h.useEffect(()=>{y(Q=>{const D=Q.homePage;if(vn(Q.permissions[D]))return Q;const H=yn(Q.permissions);return H===D?Q:{...Q,homePage:H}})},[p.permissions]),h.useEffect(()=>{y(Q=>{const D=Q.customPermissions,H=g,M=Object.keys(D),ce=Object.keys(H);if(M.length===ce.length&&M.every(te=>H[te]===D[te]))return Q;const de=bn(Q.permissions,Q.name,H),be=vn(de[Q.homePage])?Q.homePage:yn(de);return{...Q,customPermissions:{...H},permissions:de,homePage:be}})},[g]);const Y=h.useCallback(Q=>{const D=ta.find(H=>H.permissionKey===Q);return D?D.name:g[Q]??Q},[g]);return{roles:u,formState:p,mode:v,isFetching:j,isSubmitting:w,deletingRoleId:C,statusMessage:L,errorMessage:U,permissionKeys:se,hasAccessibleHomePage:W,handleInputChange:Q=>{const{name:D,value:H}=Q.target;y(M=>({...M,[D]:H}))},handlePermissionChange:(Q,D)=>{y(H=>({...H,permissions:{...H.permissions,[Q]:D}}))},handleHomePageChange:Q=>{y(D=>({...D,homePage:Q}))},handleSelectRole:Q=>{const D=new Set(ta.map(de=>de.permissionKey)),H={...g};let M=!1;Object.keys(Q.permissions).forEach(de=>{de===Sn||D.has(de)||de in H||(H[de]=de,M=!0)}),M&&x(H);const ce=bn(Q.permissions,Q.name,M?H:g);N("edit"),y({id:Q.id,name:Q.name,pin:Q.pin??"",permissions:ce,homePage:Q.homePage??yn(ce),customPermissions:{...M?H:g}}),$(null),G(null)},handleDeleteRole:async Q=>{if(confirm("Supprimer ce rôle ? Cette action est irréversible.")){B(Q),$(null),G(null);try{await ye.deleteRole(Q),$("Rôle supprimé avec succès."),v==="edit"&&p.id===Q&&oe(),await K(),(c==null?void 0:c.id)===Q&&await o()}catch(D){console.error("Failed to delete role:",D),G("Impossible de supprimer le rôle.")}finally{B(null)}}},handleSubmit:async Q=>{if(Q.preventDefault(),G(null),$(null),!p.name.trim()||!p.pin.trim()){G("Le nom et le code PIN sont obligatoires.");return}E(!0);try{const D=bn(p.permissions,p.name,g),H=vn(D[p.homePage])?p.homePage:yn(D);if(v==="create")await ye.createRole({name:p.name.trim(),pin:p.pin.trim(),permissions:D,homePage:H}),$("Rôle créé avec succès."),await K(),await o(),oe();else if(p.id){const M=await ye.updateRole(p.id,{name:p.name.trim(),pin:p.pin.trim(),permissions:D,homePage:H});$("Rôle mis à jour avec succès.");const ce=bn(M.permissions,M.name,g);y({id:M.id,name:M.name,pin:M.pin??"",permissions:ce,homePage:M.homePage??yn(ce),customPermissions:{...g}}),await K(),(c==null?void 0:c.id)===M.id&&await o()}}catch(D){console.error("Failed to save role:",D),G("Impossible d'enregistrer le rôle.")}finally{E(!1)}},handleClose:()=>{oe(),$(null),G(null),i()},resetForm:oe,getPermissionLabel:Y,isPermissionGranted:vn,handleAddCustomPermission:(Q,D)=>{ta.some(H=>H.permissionKey===Q)||x(H=>{if(H[Q]===D)return H;const M={...H,[Q]:D};return y(ce=>{const de=bn(ce.permissions,ce.name,M);return Q in de||(de[Q]="none"),{...ce,customPermissions:{...M},permissions:de}}),M})},handleRemoveCustomPermission:Q=>{ta.some(D=>D.permissionKey===Q)||x(D=>{if(!(Q in D))return D;const H={...D};return delete H[Q],y(M=>{const{[Q]:ce,...de}=M.customPermissions,be={...M.permissions};delete be[Q];const te=bn(be,M.name,H),re=vn(te[M.homePage])?M.homePage:yn(te);return{...M,customPermissions:{...de},permissions:te,homePage:re}}),H})}}},H2=({isOpen:n,onClose:i})=>{const{roles:o,formState:c,mode:u,isFetching:f,isSubmitting:g,deletingRoleId:x,statusMessage:p,errorMessage:y,permissionKeys:v,hasAccessibleHomePage:N,handleInputChange:j,handlePermissionChange:S,handleHomePageChange:w,handleSelectRole:E,handleDeleteRole:C,handleSubmit:B,handleClose:L,resetForm:$,getPermissionLabel:U,isPermissionGranted:G,handleAddCustomPermission:se,handleRemoveCustomPermission:W}=I2({isOpen:n,onClose:i});return a.jsx(wt,{isOpen:n,onClose:L,title:"Gestion des rôles",size:"xl",children:a.jsxs("div",{className:"flex flex-col gap-6",children:[p&&a.jsx("div",{className:"rounded-md bg-green-100 px-4 py-2 text-sm font-medium text-green-900",children:p}),y&&a.jsx("div",{className:"rounded-md bg-red-100 px-4 py-2 text-sm font-medium text-red-900",children:y}),a.jsxs("div",{className:"flex flex-col gap-6 md:flex-row md:items-start md:gap-8",children:[a.jsx("div",{className:"md:w-[38%] md:flex-shrink-0 lg:w-[35%]",children:a.jsx(L2,{roles:o,isFetching:f,onCreateRole:$,onSelectRole:E,onDeleteRole:C,selectedRoleId:c.id,isEditing:u==="edit",deletingRoleId:x,getPermissionLabel:U})}),a.jsx("div",{className:"flex-1",children:a.jsx(U2,{mode:u,formState:c,onSubmit:B,onInputChange:j,onHomePageChange:w,onPermissionChange:S,onAddCustomPermission:se,onRemoveCustomPermission:W,onCancel:$,isSubmitting:g,hasAccessibleHomePage:N,permissionKeys:v,getPermissionLabel:U,isPermissionGranted:G})})]})]})})},$2=new Intl.NumberFormat("fr-FR",{maximumFractionDigits:1,minimumFractionDigits:0}),bi=n=>$2.format(Number.isFinite(n)?n:0),Hs=(n,i)=>i==null?null:i===0?n===0?0:100:(n-i)/Math.abs(i)*100,$s=({title:n,value:i,icon:o,helper:c,comparison:u,previousValue:f})=>{const g=typeof u=="number"?u:null,x=g!==null,p=x&&g!==0?g>0?"+":"−":"",y=x?bi(Math.abs(g)):null,v=x?g<0?"text-red-600":"text-emerald-600":"text-gray-500",N=f!=null;return a.jsxs("div",{className:"ui-card flex min-w-0 flex-col gap-4 p-5",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"rounded-xl bg-brand-primary/10 p-3 text-brand-primary",children:o}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:n}),a.jsx("p",{className:"mt-2 text-2xl font-bold text-gray-900 sm:text-3xl",children:i}),N?a.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Période précédente : ",a.jsx("span",{className:"font-semibold text-gray-800",children:f}),y?a.jsxs("span",{className:`ml-2 font-semibold ${v}`,children:[p,y,"%"]}):null]}):a.jsxs("p",{className:`mt-1 text-sm font-semibold ${v}`,children:[y?`${p}${y}%`:"N/A",a.jsx("span",{className:"ml-1 text-xs font-medium text-gray-500 sm:text-sm",children:"vs période précédente"})]})]})]}),!N&&c?a.jsx("p",{className:"text-sm text-gray-500",children:c}):null]})},Fr=({title:n,value:i,icon:o,onClick:c})=>a.jsxs("div",{className:`ui-card p-4 flex items-center space-x-3 min-w-0 ${c?"cursor-pointer hover:bg-gray-50":""}`,onClick:c,children:[a.jsx("div",{className:"p-3 bg-gray-100 text-gray-600 rounded-lg",children:o}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500",children:n}),a.jsx("p",{className:"text-lg sm:text-xl xl:text-2xl font-bold text-gray-800 break-words leading-tight",children:i})]})]}),Bd={week:{label:"Últimos 7 días",days:7},month:{label:"Últimos 30 días",days:30}},G2=n=>{const{days:i}=Bd[n],o=new Date(_i());o.setDate(o.getDate()+1);const c=new Date(o);return c.setDate(c.getDate()-i),{start:c,end:o}},F2=()=>{const[n,i]=h.useState(null),[o,c]=h.useState([]),[u,f]=h.useState(!0),[g,x]=h.useState("category"),[p,y]=h.useState(!1),[v,N]=h.useState(!1),[j,S]=h.useState("week"),w=h.useCallback(async()=>{const{start:H,end:M}=G2(j),ce=H.toISOString(),de=M.toISOString();f(!0);try{const[be,te]=await Promise.all([ye.getDashboardStats(j),ye.getSalesByProduct({start:ce,end:de})]);i(be),c(te)}catch(be){console.error("Failed to fetch dashboard stats",be)}finally{f(!1)}},[j]);if(h.useEffect(()=>{w()},[w]),h.useEffect(()=>{const H=ye.notifications.subscribe("orders_updated",()=>{w()});return()=>{H()}},[w]),u)return a.jsx("div",{className:"text-gray-800",children:"Cargando datos del panel..."});if(!n)return a.jsx("div",{className:"text-red-500",children:"No fue posible cargar los datos."});const E=["#0088FE","#00C49F","#FFBB28","#FF8042","#AF19FF","#FF4560","#775DD0"],C=g==="category"?n.ventesParCategorie:o,B=C.length>0,L=Bd[j],$=n.ventesPeriodePrecedente,U=Hs(n.ventesPeriode,n.ventesPeriodePrecedente),G=n.ventesPeriode>0?n.beneficePeriode/n.ventesPeriode*100:null,se=n.ventesPeriodePrecedente>0?n.beneficePeriodePrecedente/n.ventesPeriodePrecedente*100:null,W=n.commandesPeriode,K=L.days>0?n.ventesPeriode/L.days:0,oe=n.clientsPeriode>0?n.ventesPeriode/n.clientsPeriode:0,Y=L.days>0?W/L.days:0,Z=L.days>0?n.clientsPeriode/L.days:0,I=n.commandesPeriodePrecedente>0?n.ventesPeriodePrecedente/n.commandesPeriodePrecedente:0,q=n.clientsPeriodePrecedente>0?n.ventesPeriodePrecedente/n.clientsPeriodePrecedente:0,O=L.days>0?n.ventesPeriodePrecedente/L.days:0,ne=Hs(n.beneficePeriode,n.beneficePeriodePrecedente),_=G!==null?Hs(G,se??null):null,T=Hs(W,n.commandesPeriodePrecedente),A=Hs(n.panierMoyen,I),P=Hs(oe,q),Q=Hs(n.clientsPeriode,n.clientsPeriodePrecedente),D=Hs(K,O);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[a.jsx("div",{className:"inline-flex rounded-lg bg-gray-100 p-1 text-sm font-semibold text-gray-600",children:Object.entries(Bd).map(([H,M])=>{const ce=H,de=j===ce;return a.jsx("button",{onClick:()=>S(ce),className:`px-3 py-1.5 rounded-md transition-colors ${de?"bg-white text-gray-900 shadow":"hover:text-gray-900"}`,children:M.label},ce)})}),a.jsxs("button",{onClick:()=>N(!0),className:"ui-btn-primary",children:[a.jsx(Qv,{className:"mr-2 h-4 w-4"}),"Gestión de roles"]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 xl:grid-cols-4",children:[a.jsx($s,{title:`Chiffre d'affaires (${n.periodLabel})`,value:me(n.ventesPeriode),icon:a.jsx(ro,{size:24}),comparison:U,previousValue:me($)}),a.jsx($s,{title:"Bénéfice net",value:me(n.beneficePeriode),icon:a.jsx(gg,{size:24}),comparison:ne,previousValue:me(n.beneficePeriodePrecedente)}),a.jsx($s,{title:"Marge bénéficiaire",value:G!==null?`${bi(G)}%`:"0%",icon:a.jsx(jl,{size:24}),comparison:se!==null?_:null,previousValue:se!==null?`${bi(se)}%`:"N/A"}),a.jsx($s,{title:"Commandes traitées",value:xi(W),icon:a.jsx(Xd,{size:24}),comparison:T,helper:`≈ ${bi(Y)} commandes / jour`})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 xl:grid-cols-4",children:[a.jsx($s,{title:"Ticket moyen",value:me(n.panierMoyen),icon:a.jsx(Jr,{size:24}),comparison:A,helper:W>0?`Basé sur ${xi(W)} commandes`:"Aucune commande sur la période"}),a.jsx($s,{title:"Revenu par client",value:me(oe),icon:a.jsx(r1,{size:24}),comparison:P,helper:n.clientsPeriode>0?`${xi(n.clientsPeriode)} clients servis`:"Aucun client sur la période"}),a.jsx($s,{title:`Clients (${n.periodLabel})`,value:xi(n.clientsPeriode),icon:a.jsx(Dd,{size:24}),comparison:Q,helper:`≈ ${bi(Z)} clients / jour`}),a.jsx($s,{title:"Revenu moyen quotidien",value:me(K),icon:a.jsx(dy,{size:24}),comparison:D,helper:`Total période : ${me(n.ventesPeriode)}`})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[a.jsx(Fr,{title:"Mesas ocupadas",value:n.tablesOccupees,icon:a.jsx(Yd,{size:24})}),a.jsx(Fr,{title:"Clientes actuales",value:n.clientsActuels,icon:a.jsx(Dd,{size:24})}),a.jsx(Fr,{title:"En cocina",value:n.commandesEnCuisine,icon:a.jsx(pg,{size:24})}),a.jsx(Fr,{title:"Ingredientes bajos",value:n.ingredientsStockBas.length,icon:a.jsx(Da,{size:24,className:n.ingredientsStockBas.length>0?"text-red-500":"text-gray-600"}),onClick:()=>y(!0)})]}),a.jsxs("div",{className:"ui-card p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 text-gray-900",children:["Ventas durante ",n.periodLabel]}),a.jsx(Jp,{width:"100%",height:300,children:a.jsxs(wb,{data:n.ventesPeriodeSeries,children:[a.jsx(Sb,{strokeDasharray:"3 3"}),a.jsx(Cb,{dataKey:"name"}),a.jsx(kb,{}),a.jsx(Wp,{}),a.jsx(eh,{}),a.jsx(th,{dataKey:"ventes",fill:"#8884d8",name:`${n.periodLabel}`}),a.jsx(th,{dataKey:"ventesPeriodePrecedente",fill:"#d8d6f5",name:"Periodo anterior"})]})})]}),a.jsxs("div",{className:"ui-card p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Distribución de ventas (",n.periodLabel,")"]}),a.jsxs("div",{className:"flex p-1 bg-gray-200 rounded-lg",children:[a.jsx("button",{onClick:()=>x("category"),className:`px-3 py-1 text-sm font-semibold rounded-md ${g==="category"?"bg-white shadow":""}`,children:"Por categoría"}),a.jsx("button",{onClick:()=>x("product"),className:`px-3 py-1 text-sm font-semibold rounded-md ${g==="product"?"bg-white shadow":""}`,children:"Por producto"})]})]}),B?a.jsx(Jp,{width:"100%",height:300,children:a.jsxs(Tb,{children:[a.jsx(Eb,{data:C,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:100,fill:"#8884d8",label:!0,children:C.map((H,M)=>a.jsx(Mb,{fill:E[M%E.length]},`cell-${M}`))}),a.jsx(Wp,{formatter:H=>me(H)}),a.jsx(eh,{})]})}):a.jsx("div",{style:{height:300},className:"flex items-center justify-center text-gray-500",children:"No hay datos para el periodo seleccionado."})]}),a.jsx(wt,{isOpen:p,onClose:()=>y(!1),title:"Ingredientes con inventario bajo",children:n.ingredientsStockBas.length>0?a.jsx("ul",{className:"space-y-2",children:n.ingredientsStockBas.map(H=>a.jsxs("li",{className:"flex justify-between items-center bg-red-50 p-3 rounded-lg",children:[a.jsx("span",{className:"font-semibold text-red-800",children:H.nom}),a.jsxs("span",{className:"font-bold text-red-600",children:[H.stock_actuel," / ",H.stock_minimum," ",H.unite]})]},H.id))}):a.jsx("p",{className:"text-gray-600 text-center",children:"No hay ingredientes con inventario bajo por el momento."})}),a.jsx(H2,{isOpen:v,onClose:()=>N(!1)})]})},Y2=n=>{const i=Number.isFinite(n)?Math.max(0,n):0,o=Math.floor(i/1e3),c=Math.floor(o/60),u=o%60;return`${c.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}`},nu=({startTime:n,className:i="",variant:o="default",accentClassName:c,label:u})=>{const[f,g]=h.useState(Date.now()-n);h.useEffect(()=>{const j=setInterval(()=>{g(Date.now()-n)},1e3);return()=>clearInterval(j)},[n]);const x=Math.floor(f/6e4),p=Y2(f),y=u?`${u.trim()} ${p}`:`Tiempo transcurrido ${p}`,N=[o==="chip"?`inline-flex items-center gap-3 rounded-full px-4 py-1.5 text-xs font-semibold uppercase tracking-[0.25em] text-white shadow-lg shadow-slate-900/10 ring-1 ring-inset ring-white/30 ${c??"bg-brand-primary"}`:`flex items-center gap-2 px-3 py-1.5 rounded-full text-lg font-bold border-2 border-white ${x>=20?"bg-red-500 text-white shadow-lg":x>=10?"bg-yellow-400 text-black shadow-md":"bg-brand-primary text-brand-secondary shadow-md ring-1 ring-black/5"}`,i].filter(Boolean).join(" ");return a.jsxs("div",{className:N,role:"timer","aria-live":"polite","aria-label":y,title:y,children:[o==="default"&&a.jsx(hs,{size:20,className:"shrink-0"}),o==="chip"&&u?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-white/70",children:u}),a.jsx("span",{className:"text-lg font-semibold tracking-normal text-white",children:p})]}):a.jsx("span",{className:"text-lg font-semibold tracking-normal text-white",children:p})]})},Mh={nom:"",capacite:"",couverts:""},V2=({isOpen:n,onClose:i,mode:o,initialValues:c,onSubmit:u,showCouvertsField:f=!1})=>{const[g,x]=h.useState(Mh),[p,y]=h.useState({}),[v,N]=h.useState(null),[j,S]=h.useState(!1),w=h.useMemo(()=>o==="create"?"Ajouter une table":"Modifier la table",[o]);h.useEffect(()=>{if(!n){x(Mh),y({}),N(null),S(!1);return}const L={nom:(c==null?void 0:c.nom)??"",capacite:c!=null&&c.capacite?String(c.capacite):"",couverts:f&&(c==null?void 0:c.couverts)!==void 0?String(c.couverts):""};x(L),y({}),N(null)},[c==null?void 0:c.capacite,c==null?void 0:c.couverts,c==null?void 0:c.nom,n,f]);const E=L=>{const{name:$,value:U}=L.target;x(G=>({...G,[$]:U}))},C=()=>{const L={},$=g.nom.trim(),U=g.capacite.trim();$||(L.nom="Le nom est requis.");let G=null;if(!U)L.capacite="La capacité est requise.";else{const se=Number(U);!Number.isInteger(se)||se<=0?L.capacite="La capacité doit être un entier positif.":G=se}if(f){const se=g.couverts.trim();if(!se)L.couverts="Le nombre de couverts est requis.";else{const W=Number(se);!Number.isInteger(W)||W<=0?L.couverts="Les couverts doivent être un entier positif.":G!==null&&W>G&&(L.couverts="Les couverts ne peuvent pas dépasser la capacité.")}}return L},B=async L=>{L.preventDefault(),y({}),N(null);const $=C();if(Object.keys($).length>0){y($);return}const U={nom:g.nom.trim(),capacite:Number(g.capacite.trim())};if(f){const G=g.couverts.trim();G&&(U.couverts=Number(G))}S(!0);try{await u(U)}catch(G){const se=G instanceof Error&&G.message?G.message:"Une erreur est survenue. Veuillez réessayer.";N(se)}finally{S(!1)}};return a.jsx(wt,{isOpen:n,onClose:i,title:w,size:"md",children:a.jsxs("form",{onSubmit:B,className:"space-y-5",children:[v&&a.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:v}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"table-name",className:"block text-sm font-medium text-gray-700",children:"Nom de la table"}),a.jsx("input",{id:"table-name",name:"nom",type:"text",className:"ui-input mt-1",value:g.nom,onChange:E,disabled:j,placeholder:"Ex. Terrasse 1",autoFocus:!0}),p.nom&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.nom})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"table-capacity",className:"block text-sm font-medium text-gray-700",children:"Capacité (nombre de places)"}),a.jsx("input",{id:"table-capacity",name:"capacite",type:"number",min:1,className:"ui-input mt-1",value:g.capacite,onChange:E,disabled:j,placeholder:"Ex. 4"}),p.capacite&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.capacite})]}),f&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"table-couverts",className:"block text-sm font-medium text-gray-700",children:"Couverts (actuels)"}),a.jsx("input",{id:"table-couverts",name:"couverts",type:"number",min:1,className:"ui-input mt-1",value:g.couverts,onChange:E,disabled:j,placeholder:"Ex. 2"}),p.couverts&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.couverts})]}),a.jsxs("div",{className:"flex flex-col gap-3 pt-2 sm:flex-row",children:[a.jsx("button",{type:"button",onClick:i,className:"w-full ui-btn-secondary py-3",disabled:j,children:"Annuler"}),a.jsx("button",{type:"submit",className:"w-full ui-btn-primary py-3 disabled:opacity-60",disabled:j,children:j?"Enregistrement...":"Enregistrer"})]})]})})},Gs={libre:{text:"Libre",statusClass:"status--free",Icon:Yd},en_cuisine:{text:"En cuisine",statusClass:"status--preparing",Icon:f1},para_entregar:{text:"Para entregar",statusClass:"status--ready",Icon:Wy},para_pagar:{text:"Para pagar",statusClass:"status--payment",Icon:ro}},Q2=n=>{const i=n.trim();if(!i)return n;const o=i.split(/\s+/);if(o.length<2)return i;const[c,...u]=o;let f=0;for(;f<u.length&&u[f].toLowerCase()===c.toLowerCase();)f+=1;return[c,...u.slice(f)].join(" ")},X2=n=>{switch(n.statut){case"libre":return Gs.libre;case"en_cuisine":return Gs.en_cuisine;case"para_entregar":return Gs.para_entregar;case"para_pagar":return Gs.para_pagar;default:return n.estado_cocina==="servido"||n.estado_cocina==="entregada"?Gs.para_pagar:n.estado_cocina==="listo"?Gs.para_entregar:n.commandeId?Gs.en_cuisine:Gs.libre}},K2=({table:n,onServe:i,canEdit:o,onEdit:c,onDelete:u,isDeleting:f,onSeatGuests:g})=>{const x=Xs(),{text:p,statusClass:y,Icon:v}=X2(n),[N,j]=h.useState(!1),S=h.useRef(null),w=()=>{if(n.statut==="libre"&&g){g(n);return}n.commandeId?x(`/commande/${n.id}`):o&&c&&c(n)},E=G=>{(G.key==="Enter"||G.key===" ")&&(G.preventDefault(),w())},C=G=>{G.stopPropagation(),n.commandeId&&i(n.commandeId)},B=G=>{G.stopPropagation(),j(se=>!se)};h.useEffect(()=>{if(!N)return;const G=se=>{S.current&&!S.current.contains(se.target)&&j(!1)};return document.addEventListener("mousedown",G),()=>{document.removeEventListener("mousedown",G)}},[N]);const L=G=>{G.stopPropagation(),j(!1),c==null||c(n)},$=async G=>{if(G.stopPropagation(),j(!1),!!u)try{await u(n)}catch(se){console.error("Failed to delete table from card:",se)}},U=Q2(n.nom);return a.jsxs("div",{onClick:w,onKeyDown:E,className:`ui-card status-card ${y} relative h-full`,role:"button",tabIndex:0,children:[n.statut==="para_entregar"&&n.readyOrdersCount&&n.readyOrdersCount>0&&a.jsx("div",{className:"absolute left-3 top-3 z-10",children:a.jsx("span",{className:"table-notification-badge",children:n.readyOrdersCount})}),o&&a.jsxs("div",{className:"absolute right-3 top-3",ref:S,children:[a.jsx("button",{type:"button",onClick:B,className:"flex h-9 w-9 items-center justify-center rounded-full text-gray-500 transition hover:bg-gray-100 hover:text-gray-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 disabled:cursor-not-allowed disabled:opacity-60","aria-haspopup":"menu","aria-expanded":N,"aria-label":"Options de la table",disabled:f,children:a.jsx(og,{size:18})}),N&&a.jsxs("div",{className:"absolute right-0 mt-2 w-44 rounded-md border border-gray-200 bg-white py-1 text-sm shadow-lg",children:[a.jsxs("button",{type:"button",onClick:L,className:"flex w-full items-center gap-2 px-3 py-2 text-left text-gray-700 transition hover:bg-gray-100",children:[a.jsx(Mv,{size:16}),"Modifier"]}),a.jsxs("button",{type:"button",onClick:$,className:"flex w-full items-center gap-2 px-3 py-2 text-left text-red-600 transition hover:bg-red-50 disabled:cursor-not-allowed disabled:opacity-60",disabled:f,children:[a.jsx(kn,{size:16}),f?"Suppression…":"Supprimer"]})]})]}),a.jsxs("div",{className:"status-card__header",children:[a.jsx("h3",{className:"status-card__title",children:U}),n.date_envoi_cuisine&&n.statut!=="libre"&&a.jsx("div",{className:"status-card__timer",children:a.jsx(nu,{startTime:n.date_envoi_cuisine,className:"w-full justify-center"})})]}),a.jsxs("div",{className:"status-card__body",children:[a.jsx(v,{size:56,className:"status-card__icon"}),a.jsx("p",{className:"status-card__state",children:p})]}),(n.estado_cocina==="listo"||n.statut==="para_entregar")&&a.jsx("div",{className:"status-card__footer",children:a.jsx("button",{type:"button",onClick:C,className:"ui-btn ui-btn-accent status-card__cta",children:"ENTREGADA"})})]})},Z2=()=>{var xe;const{role:n}=Va(),i=((xe=n==null?void 0:n.permissions)==null?void 0:xe["/ventes"])==="editor",o=Xs(),[c,u]=h.useState([]),[f,g]=h.useState(!0),[x,p]=h.useState(null),[y,v]=h.useState(null),[N,j]=h.useState(null),[S,w]=h.useState(!1),[E,C]=h.useState("create"),[B,L]=h.useState(null),[$,U]=h.useState(null),[G,se]=h.useState(!1),[W,K]=h.useState(null),[oe,Y]=h.useState(null),[Z,I]=h.useState(null),[q,O]=h.useState(!1),ne=h.useRef(0),_=h.useCallback(async()=>{const Ne=++ne.current;try{const ze=await ye.getTables();Ne===ne.current&&(u(ze),p(null))}catch(ze){console.error("Failed to fetch tables",ze),Ne===ne.current&&p("Impossible de charger le plan de salle. Veuillez réessayer.")}finally{Ne===ne.current&&g(!1)}},[]);h.useEffect(()=>{g(!0),_();const Ne=setInterval(_,1e4),ze=ye.notifications.subscribe("orders_updated",_);return()=>{clearInterval(Ne),ze()}},[_]);const T=h.useCallback(()=>{w(!1),L(null)},[]),A=h.useCallback(()=>{C("create"),L(null),v(null),j(null),w(!0)},[]),P=h.useCallback(Ne=>{C("edit"),L(Ne),v(null),j(null),w(!0)},[]),Q=h.useCallback(Ne=>{K(Ne);const ze=Ne.couverts??null;Y(typeof ze=="number"&&ze>=1&&ze<=10?ze:null),I(null),v(null),j(null),se(!0)},[v,j]),D=h.useCallback(()=>{q||(se(!1),K(null),Y(null),I(null))},[q]),H=h.useCallback(async Ne=>{if(W){if(!Number.isInteger(Ne)||Ne<=0){I("Veuillez sélectionner un nombre de couverts valide.");return}O(!0),I(null),v(null);try{await ye.createOrGetOrderByTableId(W.id,{couverts:Ne}),se(!1),K(null),Y(null),await _(),o(`/commande/${W.id}`)}catch(ze){console.error("Failed to open table with couverts:",ze),v("Impossible d'ouvrir la table. Veuillez réessayer.")}finally{O(!1)}}},[_,o,W]),M=h.useCallback(Ne=>{q||(Y(Ne),I(null),H(Ne))},[H,q]),ce=h.useCallback(async Ne=>{v(null),j(null);try{let ze="";if(E==="create")await ye.createTable(Ne),ze="Table créée avec succès.";else{if(!B){const Ve="Aucune table sélectionnée pour la mise à jour.";throw v(Ve),new Error(Ve)}await ye.updateTable(B.id,Ne),ze="Table mise à jour avec succès."}await _(),T(),j(ze)}catch(ze){console.error("Failed to save table:",ze);const Ve=E==="create"?"Impossible de créer la table. Veuillez réessayer.":"Impossible de mettre à jour la table. Veuillez réessayer.";throw v(Ve),new Error(Ve)}},[_,T,E,B]),de=h.useCallback(async Ne=>{if(confirm("Supprimer cette table ? Cette action est irréversible.")){v(null),j(null),U(Ne.id);try{await ye.deleteTable(Ne.id),await _(),j("Table supprimée avec succès.")}catch(ze){console.error("Failed to delete table:",ze),v("Impossible de supprimer la table. Veuillez réessayer.")}finally{U(null)}}},[_]),be=h.useCallback(async Ne=>{v(null),j(null);const ze=c.find(Ve=>Ve.commandeId===Ne);if(ze){u(Ve=>Ve.map(Dt=>Dt.id===ze.id?{...Dt,statut:"para_pagar",estado_cocina:"servido"}:Dt));try{await ye.markOrderAsServed(Ne),await _()}catch(Ve){console.error("Failed to mark order as served:",Ve),v("Impossible de marquer la commande comme servie. Veuillez réessayer."),await _()}}},[_,c]);if(f)return a.jsx("p",{className:"section-text section-text--muted",children:"Chargement du plan de salle..."});const te=E==="edit"&&B?{nom:B.nom,capacite:B.capacite,couverts:B.couverts}:void 0,re=E==="edit"&&!!(B!=null&&B.commandeId);return a.jsxs("div",{children:[a.jsxs("div",{className:"flex flex-col gap-4",children:[i&&a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{type:"button",onClick:A,className:"ui-btn ui-btn-primary flex items-center gap-2",children:[a.jsx(Si,{size:18}),"Ajouter une table"]})}),x&&a.jsx("div",{className:"rounded-md border border-amber-200 bg-amber-50 p-4 text-sm text-amber-700",children:x}),y&&a.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 p-4 text-sm text-red-700",children:y}),N&&a.jsx("div",{className:"rounded-md border border-emerald-200 bg-emerald-50 p-4 text-sm text-emerald-700",children:N})]}),a.jsx("div",{className:"mt-6 status-grid",children:c.map(Ne=>a.jsx(K2,{table:Ne,onServe:be,canEdit:!!i,onEdit:P,onDelete:de,isDeleting:$===Ne.id,onSeatGuests:Q},Ne.id))}),a.jsx(wt,{isOpen:G,onClose:D,title:"CUBIERTOS",size:"sm",children:a.jsxs("div",{className:"space-y-5 text-left",children:[a.jsx("div",{className:"grid grid-cols-5 gap-3",children:Array.from({length:10},(Ne,ze)=>{const Ve=ze+1,Dt=oe===Ve;return a.jsx("button",{type:"button",onClick:()=>M(Ve),disabled:q,className:`flex h-12 w-12 items-center justify-center rounded-md border text-lg font-semibold transition-colors focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary-500 ${Dt?"border-primary-500 bg-primary-50 text-primary-600":"border-gray-300 bg-white text-gray-900 hover:border-primary-400 hover:text-primary-600"} ${q?"cursor-not-allowed opacity-50":""}`,"aria-pressed":Dt,children:Ve},Ve)})}),Z&&a.jsx("p",{className:"text-sm text-red-600",children:Z}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"button",onClick:D,className:"ui-btn ui-btn-secondary",disabled:q,children:"Annuler"})})]})}),a.jsx(V2,{isOpen:S,onClose:T,mode:E,initialValues:te,onSubmit:ce,showCouvertsField:re})]})},P2=({isOpen:n,onClose:i,order:o,onFinalize:c})=>{const[u,f]=h.useState("efectivo"),[g,x]=h.useState(null),[p,y]=h.useState(!1),v=async N=>{N.preventDefault(),u&&(y(!0),await c(u,g),y(!1),i())};return a.jsx(wt,{isOpen:n,onClose:i,title:`Finalizar el pedido #${o.id.slice(-4)}`,children:a.jsxs("form",{onSubmit:v,className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-gray-600",children:"Total a pagar"}),a.jsx("p",{className:"text-4xl font-extrabold text-gray-900",children:me(o.total)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Método de pago"}),a.jsxs("select",{value:u,onChange:N=>f(N.target.value),className:"mt-1 ui-select",children:[a.jsx("option",{value:"efectivo",children:"Efectivo"}),a.jsx("option",{value:"transferencia",children:"Transferencia"}),a.jsx("option",{value:"tarjeta",children:"Tarjeta"})]})]}),u==="transferencia"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Comprobante (opcional)"}),a.jsxs("label",{htmlFor:"payment-receipt",className:"mt-1 flex w-full cursor-pointer items-center gap-2 rounded-lg border border-gray-300 bg-white p-2 text-gray-500 shadow-sm hover:bg-gray-50",children:[a.jsx(_l,{size:18}),a.jsx("span",{children:g?g.name:"Selecciona un archivo..."})]}),a.jsx("input",{id:"payment-receipt",type:"file",accept:"image/*,.pdf",onChange:N=>x(N.target.files?N.target.files[0]:null),className:"hidden"})]}),a.jsxs("div",{className:"pt-4 flex flex-col sm:flex-row gap-3",children:[a.jsx("button",{type:"button",onClick:i,className:"w-full ui-btn-secondary py-3",children:"Cancelar"}),a.jsx("button",{type:"submit",disabled:p,className:"w-full ui-btn-success py-3 disabled:opacity-60",children:p?"Finalizando...":"Confirmar pago"})]})]})})},J2=n=>n??"",W2=n=>!n||n.length===0?[]:n.slice().sort(),ao=(n=[])=>{const i=new Map;for(const o of n)i.set(o.id,{quantite:o.quantite,commentaire:J2(o.commentaire),excludedIngredients:W2(o.excluded_ingredients)});return{size:n.length,itemsById:i}},Ah=(n,i)=>{if(n===i)return!0;if(n.size!==i.size)return!1;for(const[o,c]of n.itemsById){const u=i.itemsById.get(o);if(!u||c.quantite!==u.quantite||c.commentaire!==u.commentaire||c.excludedIngredients.length!==u.excludedIngredients.length)return!1;for(let f=0;f<c.excludedIngredients.length;f+=1)if(c.excludedIngredients[f]!==u.excludedIngredients[f])return!1}return!0},ej=({filteredProducts:n,quantities:i,onAdd:o,activeCategoryId:c,categories:u,onSelectCategory:f,isProductAvailable:g,handleProductPointerDown:x,handleProductKeyDown:p})=>a.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[a.jsx("div",{className:"border-b border-gray-200/30 p-2",children:a.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",children:[a.jsx("button",{onClick:()=>f("all"),className:`shrink-0 rounded-full px-3 py-1.5 text-sm font-semibold whitespace-nowrap transition ${c==="all"?"bg-brand-primary text-brand-secondary shadow":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Tous"}),u.map(y=>a.jsx("button",{onClick:()=>f(y.id),className:`shrink-0 rounded-full px-3 py-1.5 text-sm font-semibold whitespace-nowrap transition ${c===y.id?"bg-brand-primary text-brand-secondary shadow":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:y.nom},y.id))]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:a.jsx("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2 lg:grid-cols-3",children:n.map(y=>{const v=!g(y),N=i[y.id]||0,j=N>0,S=()=>o(y),w=x(y),E=p(y);return a.jsxs("button",{type:"button",onClick:S,onPointerDown:w,onKeyDown:E,className:`relative flex flex-col items-center rounded-xl p-2 text-center transition-all focus:outline-none focus:ring-2 focus:ring-brand-primary focus:ring-offset-2 focus:ring-offset-gray-900 ${j?"bg-gradient-to-br from-amber-500 via-orange-500 to-red-500 text-white shadow-xl shadow-orange-500/30":"border border-gray-200 bg-white text-black hover:shadow-lg"} ${v&&!j?"border-2 border-yellow-500":""}`,children:[N>0&&a.jsx("div",{className:"absolute left-1 top-1 flex h-5 w-5 items-center justify-center rounded-full bg-brand-accent text-xs font-bold text-white",children:N}),v&&a.jsx("div",{className:`absolute right-1 top-1 rounded-full p-1 ${j?"bg-black/30 text-white":"bg-yellow-500 text-white"}`,title:"Stock bas",children:a.jsx(Da,{size:16})}),a.jsx("img",{src:y.image,alt:y.nom_produit,className:"mb-1.5 aspect-square w-full rounded-md object-cover"}),a.jsx("p",{className:`text-[clamp(0.85rem,1.6vw,0.95rem)] font-semibold leading-tight ${j?"text-white":"text-black"} text-balance text-center break-words whitespace-normal [hyphens:auto]`,style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:y.nom_produit}),a.jsx("p",{className:`mt-0.5 w-full text-[0.7rem] ${j?"text-white/90":"text-black/70"} text-center leading-tight`,style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:y.description}),a.jsx("p",{className:`mt-1.5 font-bold text-sm ${j?"text-white":"text-black"}`,children:me(y.prix_vente)})]},y.id)})})})]}),tj=h.memo(ej),aj=({categorizedItems:n,order:i,total:o,onQuantityChange:c,onCommentChange:u,onPersistComment:f,onStartEditingComment:g,onSendToKitchen:x,onServeOrder:p,onOpenPayment:y,isSending:v,hasPending:N,orderStatus:j,editingCommentId:S,className:w})=>{var C;const E=n.pending.length+n.sent.length;return a.jsxs("div",{className:`ui-card flex flex-col ${w??""}`,children:[a.jsx("div",{className:"p-4 border-b",children:a.jsx("h2",{className:"text-2xl font-semibold text-brand-secondary",children:"Commande"})}),a.jsx("div",{className:"flex-1 space-y-3 overflow-y-auto p-4",children:E===0?a.jsx("p",{className:"text-gray-500",children:"La commande est vide."}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-brand-secondary",children:"Articles à envoyer"}),a.jsx("span",{className:"text-sm text-gray-500",children:n.pending.length})]}),n.pending.length===0?a.jsx("p",{className:"text-sm text-gray-500",children:"Aucun article en attente."}):n.pending.map(({item:B,index:L})=>a.jsxs("div",{className:"p-3 rounded-lg bg-yellow-100",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex flex-1 items-center gap-3",children:[a.jsx("span",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-full bg-yellow-500 text-base font-bold text-white shadow-md",children:B.quantite}),a.jsx("p",{className:"font-bold text-gray-900 text-[clamp(0.95rem,1.9vw,1.2rem)] leading-snug break-words text-balance whitespace-normal [hyphens:auto]",children:B.nom_produit})]}),a.jsx("p",{className:"font-bold text-gray-900 whitespace-nowrap",children:me(B.quantite*B.prix_unitaire)})]}),a.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("p",{className:"text-sm text-gray-700",children:[me(B.prix_unitaire)," /u"]}),a.jsxs("div",{className:"flex items-center gap-2 text-gray-800",children:[a.jsx("button",{onClick:()=>c(L,-1),className:"rounded-full p-1 transition hover:bg-yellow-200",children:a.jsx(Ty,{size:20})}),a.jsx("span",{className:"font-bold w-6 text-center",children:B.quantite}),a.jsx("button",{onClick:()=>c(L,1),className:"rounded-full p-1 transition hover:bg-yellow-200",children:a.jsx(Vd,{size:20})})]})]}),S===B.id||B.commentaire?a.jsx("input",{type:"text",placeholder:"Ajouter un commentaire...",value:B.commentaire??"",onChange:$=>u(L,$.target.value),onBlur:()=>f(L),autoFocus:S===B.id,className:"mt-2 ui-input text-sm"}):a.jsxs("button",{onClick:()=>g(B.id),className:"mt-2 text-xs text-blue-600 hover:underline flex items-center gap-1",children:[a.jsx(ug,{size:12})," Ajouter un commentaire"]})]},B.id))]}),n.sent.length>0&&a.jsxs("div",{className:"space-y-3 border-t border-gray-700 pt-6",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-brand-secondary",children:"Envoyés en cuisine"}),a.jsx("span",{className:"text-sm text-gray-500",children:n.sent.length})]}),n.sent.map(({item:B})=>a.jsxs("div",{className:"p-3 rounded-lg bg-green-100",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex flex-1 items-center gap-3",children:[a.jsx("span",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-full bg-green-600 text-base font-bold text-white shadow-md",children:B.quantite}),a.jsx("p",{className:"font-bold text-gray-900 text-[clamp(0.95rem,1.9vw,1.2rem)] leading-snug break-words text-balance whitespace-normal [hyphens:auto]",children:B.nom_produit})]}),a.jsx("p",{className:"font-bold text-gray-900 whitespace-nowrap",children:me(B.quantite*B.prix_unitaire)})]}),a.jsxs("p",{className:"text-sm text-gray-700 mt-2",children:[me(B.prix_unitaire)," /u"]}),B.commentaire&&a.jsxs("p",{className:"mt-2 text-sm italic text-gray-600 pl-2",children:['"',B.commentaire,'"']})]},B.id))]})]})}),a.jsxs("div",{className:"space-y-4 border-t p-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-gray-700",children:[a.jsx("span",{children:"Sous-total"}),a.jsx("span",{children:me(i.subtotal??0)})]}),i.total_discount&&i.total_discount>0&&a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-green-600",children:[a.jsx("span",{children:"Réduction totale"}),a.jsxs("span",{children:["- ",me(i.total_discount)]})]}),i.shipping_cost!==void 0&&i.shipping_cost>0&&a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-gray-700",children:[a.jsx("span",{children:"Frais de livraison"}),a.jsx("span",{children:me(i.shipping_cost)})]}),i.shipping_cost===0&&((C=i.applied_promotions)==null?void 0:C.some(B=>B.type==="FREE_SHIPPING"))&&a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-green-600",children:[a.jsx("span",{children:"Livraison gratuite"}),a.jsx("span",{children:me(0)})]}),a.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-between gap-2 border-t pt-2 text-2xl font-semibold text-brand-secondary",children:[a.jsx("span",{children:"Total"}),a.jsx("span",{children:me(o)})]})]}),j==="listo"&&a.jsxs("button",{onClick:p,className:"w-full ui-btn-info justify-center py-3",children:[a.jsx(by,{size:20}),a.jsx("span",{children:"Entregada"})]}),a.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("button",{onClick:x,disabled:v||!N,className:"ui-btn-accent flex-1 justify-center py-3 disabled:opacity-60",children:[a.jsx(Gv,{size:20}),a.jsx("span",{children:v?"Synchronisation…":"Envoyer en Cuisine"})]}),a.jsxs("button",{onClick:y,disabled:j!=="servido",className:"ui-btn-success flex-1 justify-center py-3 disabled:opacity-60",children:[a.jsx(ro,{size:20}),a.jsx("span",{children:"Payer"})]})]})]})]})},sj=({isOpen:n,product:i,onClose:o,onSave:c})=>{const[u,f]=h.useState(1),[g,x]=h.useState("");if(h.useEffect(()=>{n&&(f(1),x(""))},[n,i==null?void 0:i.id]),!i)return null;const p=()=>{f(N=>Math.max(1,N-1))},y=()=>{f(N=>N+1)},v=()=>{c({quantity:u,comment:g})};return a.jsx(wt,{isOpen:n,onClose:o,title:i.nom_produit,children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("img",{src:i.image,alt:i.nom_produit,className:"w-full h-48 object-cover rounded-lg"}),i.description&&a.jsx("p",{className:"text-gray-200 text-sm",children:i.description}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-200",children:"Commentaire"}),a.jsx("textarea",{value:g,onChange:N=>x(N.target.value),rows:2,className:"mt-1 block w-full rounded-md border border-gray-600 bg-gray-900/60 py-2 px-3 text-sm text-gray-100 focus:border-brand-primary focus:outline-none focus:ring-2 focus:ring-brand-primary",placeholder:"Allergies, instructions spécifiques…"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"button",onClick:p,className:"p-2 rounded-full bg-gray-800 text-gray-100 hover:bg-gray-700","aria-label":"Diminuer la quantité",children:a.jsx(mg,{size:18})}),a.jsx("span",{className:"w-8 text-center text-lg font-bold text-gray-100",children:u}),a.jsx("button",{type:"button",onClick:y,className:"p-2 rounded-full bg-gray-800 text-gray-100 hover:bg-gray-700","aria-label":"Augmenter la quantité",children:a.jsx(Si,{size:18})})]}),a.jsxs("button",{type:"button",onClick:v,className:"rounded-lg bg-gradient-to-r from-orange-500 via-orange-600 to-red-600 py-2 px-6 font-semibold text-white shadow-md transition-all duration-300 hover:from-orange-600 hover:via-orange-700 hover:to-red-700 focus:outline-none focus:ring-2 focus:ring-orange-400/70 focus:ring-offset-2",children:["Ajouter (",me(i.prix_vente*u),")"]})]})]})})},Cd=n=>!!n&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(n),Ha=n=>JSON.parse(JSON.stringify(n)),zh=(()=>{let n=0;return()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?`tmp-${crypto.randomUUID()}`:(n+=1,`tmp-${Date.now()}-${n}`)})(),Oh=n=>(n??"").trim(),nj=(n=[],i=[])=>{if(n.length!==i.length)return!1;const o=[...n].sort(),c=[...i].sort();return o.every((u,f)=>u===c[f])},lj=(n,i,o,c,u=[])=>{const f=Oh(o.comment),g=f.length===0,x=Number.isFinite(o.quantity)?Math.max(1,Math.floor(o.quantity)):1,p=g?n.findIndex(v=>v.produitRef===i.id&&v.estado==="en_attente"&&Oh(v.commentaire)===""&&nj(v.excluded_ingredients??[],u)):-1;if(p>-1)return n.map((v,N)=>N===p?{...v,quantite:v.quantite+x}:v);const y={id:c(),produitRef:i.id,nom_produit:i.nom_produit,prix_unitaire:i.prix_vente,quantite:x,excluded_ingredients:[...u],commentaire:f,estado:"en_attente"};return[...n,y]},Dh=ao([]),ij=()=>{const{tableId:n}=yb(),i=Xs(),[o,c]=h.useState(null),[u,f]=h.useState(null),[g,x]=h.useState([]),[p,y]=h.useState([]),[v,N]=h.useState([]),[j,S]=h.useState("all"),[w,E]=h.useState(!0),[C,B]=h.useState(!1),[L,$]=h.useState(!1),[U,G]=h.useState(null),[se,W]=h.useState(!1),[K,oe]=h.useState(null),Y=h.useRef(o),Z=h.useRef(u),I=h.useRef(null),q=h.useRef(null),O=h.useRef(null),ne=h.useRef(Promise.resolve()),_=h.useRef(null),T=h.useRef(null),A=h.useRef(new Map),P=h.useCallback((ue,pe,we)=>{if(!pe||pe.length===0)return ue.current=null,Dh;const $e=we??ao(pe);return ue.current={source:pe,snapshot:$e},$e},[]),Q=h.useCallback((ue,pe)=>{if(!ue||ue.length===0)return pe.current=null,Dh;const we=pe.current;return we&&we.source===ue?we.snapshot:P(pe,ue)},[P]);h.useEffect(()=>{Y.current=o},[o]),h.useEffect(()=>{Z.current=u},[u]);const D=h.useCallback(ue=>{const pe=Y.current;if(!pe)return!0;const we=ue??Z.current;if(!we)return!0;const $e=Q(pe.items,_),Ge=ue?ao(we.items):Q(we.items,T);return Ah(Ge,$e)},[Q]),H=h.useCallback(()=>{const ue=q.current;if(!ue)return;const pe=ao(ue.items);I.current=Ha(ue);const we=Y.current;if(we){const Ge=Q(we.items,_);if(Ah(Ge,pe)){q.current=null;return}}q.current=null,Y.current=ue,c(ue),P(_,ue.items,pe);const $e=Ha(ue);Z.current=$e,f($e),P(T,$e.items)},[Q,P]),M=h.useCallback(async(ue=!1)=>{if(n)try{if(ue||E(!0),ue){const Ee=await ye.createOrGetOrderByTableId(n),Be=Ha(Ee);if(I.current=Be,D()){q.current=null,c(Ee),Y.current=Ee,P(_,Ee.items);const rt=Ha(Ee);Z.current=rt,f(rt),P(T,rt.items)}else{const rt=Z.current;rt&&JSON.stringify(rt)===JSON.stringify(Ee)?q.current=null:q.current=Be}return}const[pe,we,$e,Ge]=await Promise.all([ye.createOrGetOrderByTableId(n),ye.getProducts(),ye.getCategories(),ye.getIngredients()]);I.current=Ha(pe),c(pe),Y.current=pe,P(_,pe.items);const Xe=Ha(pe);f(Xe),Z.current=Xe,P(T,Xe.items),x(we),y($e),N(Ge),q.current=null}catch(pe){console.error("Failed to load order data",pe),i("/ventes")}finally{ue||E(!1)}},[D,i,n,P]);h.useEffect(()=>{M()},[M]),h.useEffect(()=>{D()&&H()},[H,D,o,u]),h.useEffect(()=>{const ue=ye.notifications.subscribe("orders_updated",()=>M(!0));return()=>ue()},[M]);const ce=h.useMemo(()=>!D(),[D,o,u]),de=h.useMemo(()=>o?o.items.reduce((ue,pe)=>(pe.estado!=="en_attente"||(ue[pe.produitRef]=(ue[pe.produitRef]||0)+pe.quantite),ue),{}):{},[o]),be=h.useMemo(()=>j==="all"?g:g.filter(ue=>ue.categoria_id===j),[j,g]),te=h.useCallback(ue=>{if(!ue.recipe||ue.recipe.length===0)return!0;for(const pe of ue.recipe){const we=v.find($e=>$e.id===pe.ingredient_id);if(!we||we.stock_actuel<=we.stock_minimum)return!1}return!0},[v]);h.useEffect(()=>()=>{O.current!==null&&(window.clearTimeout(O.current),O.current=null)},[]);const re=h.useCallback(async(ue,pe)=>{const we=Y.current;if(!we)return;const $e=rt=>typeof ue=="function"?ue(rt):ue,Xe=(pe!=null&&pe.isLocalUpdate?we.items:(pe==null?void 0:pe.removalSourceItems)??we.items).map(rt=>({...rt})),Ee=$e(Xe),Be={...we,items:Ee,total:Ee.reduce((rt,qt)=>rt+qt.quantite*qt.prix_unitaire,0)};if(c(Be),Y.current=Be,P(_,Be.items),pe!=null&&pe.isLocalUpdate)return;const yt=async()=>{try{let rt=q.current??I.current??null;if(!rt){const ie=await ye.getOrderById(we.id);ie?(rt=ie,I.current=Ha(ie)):rt=we}if(!rt)return;const qt=Y.current.items.map(ie=>({...ie})),Ua=((pe==null?void 0:pe.removalSourceItems)??we.items).filter(ie=>Cd(ie.id)&&!qt.some(Se=>Se.id===ie.id)).map(ie=>ie.id),Qt=await ye.updateOrder(we.id,{items:qt,removedItemIds:Ua},{includeNotifications:!1});c(Qt),Y.current=Qt,P(_,Qt.items);const Yt=Ha(Qt);f(Yt),Z.current=Yt,P(T,Yt.items),I.current=Ha(Qt),ye.getIngredients().then(N).catch(ie=>{console.error("Failed to refresh ingredients",ie)}),H()}catch(rt){console.error("Failed to update order:",rt),alert("Une erreur est survenue lors de la mise à jour de la commande."),M(!0)}};ne.current=ne.current.then(yt,yt),await ne.current},[H,M,P]),xe=h.useCallback((ue=300)=>{O.current!==null&&window.clearTimeout(O.current);const pe=ue>0?ue:1;O.current=window.setTimeout(async()=>{if(O.current=null,!Y.current)return;const we=Y.current.items.map(Ge=>({...Ge})),$e=I.current?I.current.items.map(Ge=>({...Ge})):we.map(Ge=>({...Ge}));await re(we,{removalSourceItems:$e})},pe)},[re]),Ne=h.useCallback(ue=>{Y.current&&(re(ue,{isLocalUpdate:!0}),xe())},[xe,re]),ze=h.useCallback(ue=>{oe(ue)},[]),Ve=h.useCallback(()=>{oe(null)},[]),Dt=h.useCallback(ue=>{K&&(Ne(pe=>lj(pe,K,ue,zh)),oe(null))},[Ne,K]),xt=h.useCallback((ue,pe)=>{const we=Y.current;if(!we||!we.items[ue])return;const $e=we.items[ue].id,Ge=A.current.get($e);Ge&&clearTimeout(Ge),Ne(Ee=>{const Be=Ee.findIndex(qt=>qt.id===$e);if(Be===-1)return Ee;const yt=Ee[Be].quantite,rt=Math.max(0,yt+pe);return Ee.map(qt=>qt.id===$e?{...qt,quantite:rt}:qt)});const Xe=setTimeout(()=>{Ne(Ee=>{const Be=Ee.find(yt=>yt.id===$e);return Be&&Be.quantite<=0?Ee.filter(yt=>yt.id!==$e):Ee}),A.current.delete($e)},300);A.current.set($e,Xe)},[Ne]),zt=h.useCallback((ue,pe)=>{const we=Y.current;if(!we||!we.items[ue])return;const $e=we.items[ue].id;re(Ge=>{const Xe=Ge.findIndex(yt=>yt.id===$e);if(Xe===-1)return Ge;const Ee=Ge.map(yt=>({...yt})),Be=Ee[Xe];if(Be.quantite>1&&!Be.commentaire&&pe){Be.quantite-=1;const yt={...Be,id:zh(),quantite:1,commentaire:pe};Ee.push(yt),G(yt.id)}else Be.commentaire=pe;return Ee},{isLocalUpdate:!0})},[re]),ge=h.useCallback(ue=>{Y.current&&(re(Y.current.items.map(pe=>({...pe}))),G(null))},[re]),ke=h.useCallback(async()=>{if(Y.current){W(!0);try{let ue=Y.current;for(;ue&&ue.items.some(Ee=>Ee.estado==="en_attente"&&!Cd(Ee.id));)await re(ue.items.map(Ee=>({...Ee}))),ue=Y.current;if(ue=Y.current,!ue)return;const pe=ue.items.filter(Ee=>Ee.estado==="en_attente");if(pe.length===0)return;if(pe.filter(Ee=>!Cd(Ee.id)).length>0){console.warn("Des articles non persistés subsistent après synchronisation, envoi annulé.");return}const $e=pe.map(Ee=>Ee.id),Ge=await ye.sendOrderToKitchen(ue.id,$e);c(Ge),Y.current=Ge,P(_,Ge.items);const Xe=Ha(Ge);f(Xe),Z.current=Xe,P(T,Xe.items),i("/ventes")}catch(ue){console.error("Failed to send order to kitchen",ue),alert("Erreur lors de l'envoi en cuisine.")}finally{W(!1)}}},[i,re,P]),Ae=h.useCallback(async()=>{if(o)try{const ue=await ye.markOrderAsServed(o.id);c(ue),Y.current=ue,P(_,ue.items)}catch(ue){console.error("Failed to mark order as served",ue)}},[o,P]),Me=async(ue,pe)=>{if(o)try{let we=o.payment_receipt_url??void 0;if(pe&&pe instanceof File)try{we=await Wh(pe,{orderId:o.id})}catch($e){console.error("Failed to upload receipt",$e)}await ye.finalizeOrder(o.id,ue,we),i("/ventes")}catch(we){console.error("Failed to finalize order",we),alert("Erreur lors de la finalisation de la commande. Veuillez réessayer.")}},Je=()=>{if(o&&o.estado_cocina==="no_enviado"&&o.items.length>0){$(!0);return}ce?$(!0):i("/ventes")},it=async()=>{try{o&&o.estado_cocina==="no_enviado"?await ye.cancelUnsentTableOrder(o.id):u&&!D(u)&&await re(u.items)}catch(ue){console.error("Failed to cancel unsent order before exiting",ue)}finally{$(!1),i("/ventes")}},St=(o==null?void 0:o.items)??[],aa=h.useMemo(()=>St.reduce((ue,pe,we)=>(pe.estado==="en_attente"?ue.pending.push({item:pe,index:we}):ue.sent.push({item:pe,index:we}),ue),{pending:[],sent:[]}),[St]),Qe=h.useCallback(ue=>pe=>{pe.preventDefault(),pe.currentTarget.focus()},[]),ua=h.useCallback(ue=>pe=>{(pe.key==="Enter"||pe.key===" ")&&(pe.preventDefault(),ze(ue))},[ze]),Ca=h.useCallback(()=>{B(!0)},[]),ht=h.useCallback(ue=>{G(ue)},[]),sa=h.useMemo(()=>aa.pending.length>0,[aa]);return w?a.jsx("div",{className:"text-center p-10 text-gray-800",children:"Chargement de la commande..."}):o?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 gap-2 lg:grid-cols-[minmax(0,2.4fr)_minmax(0,1fr)] lg:items-start min-h-screen",children:[a.jsxs("div",{className:"flex h-full flex-col overflow-hidden",children:[a.jsx("div",{className:"p-2",children:a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a.jsxs("button",{onClick:Je,className:"ui-btn-dark text-sm px-3 py-1.5",title:"Retour au plan de salle",children:[a.jsx(ng,{size:18}),a.jsx("span",{children:"Retour plan de salle"})]}),a.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Table ",o.table_nom]})]})}),a.jsx(tj,{filteredProducts:be,quantities:de,onAdd:ze,activeCategoryId:j,categories:p,onSelectCategory:S,isProductAvailable:te,handleProductPointerDown:Qe,handleProductKeyDown:ua})]}),a.jsx("div",{className:"flex flex-col h-full",children:a.jsx("div",{className:"lg:sticky lg:top-2",children:a.jsx(aj,{className:"lg:h-full w-full",categorizedItems:aa,order:o,total:o.total,onQuantityChange:xt,onCommentChange:zt,onPersistComment:ge,onStartEditingComment:ht,onSendToKitchen:ke,onServeOrder:Ae,onOpenPayment:Ca,isSending:se,hasPending:sa,orderStatus:o.estado_cocina,editingCommentId:U})})})]}),a.jsx(sj,{isOpen:K!==null,product:K,onClose:Ve,onSave:Dt}),a.jsx(P2,{isOpen:C,onClose:()=>B(!1),order:o,onFinalize:Me}),a.jsxs(wt,{isOpen:L,onClose:()=>$(!1),title:"Quitter sans envoyer ?",children:[a.jsx("p",{className:"text-gray-700",children:"Vous avez des articles non envoyés en cuisine. Si vous quittez, ils seront annulés. Voulez-vous continuer ?"}),a.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[a.jsx("button",{onClick:()=>$(!1),className:"ui-btn-secondary",children:"Non, rester"}),a.jsx("button",{onClick:it,className:"ui-btn-danger",children:"Oui, quitter"})]})]})]}):a.jsx("div",{className:"text-center p-10 text-red-500",children:"Commande non trouvée."})},rj={critical:{border:"border-4 border-solid border-red-500",accent:"bg-red-500 urgency-accent-critical",badge:"bg-red-100 text-red-700 ring-1 ring-inset ring-red-300 urgency-badge-critical",icon:"text-red-500 urgency-icon-critical",background:"bg-red-100"},warning:{border:"border-[3px] border-solid border-yellow-400",accent:"bg-yellow-400 urgency-accent-warning",badge:"bg-yellow-100 text-yellow-800 ring-1 ring-inset ring-yellow-300 urgency-badge-warning",icon:"text-yellow-500 urgency-icon-warning",background:"bg-yellow-100"},normal:{border:"border-2 border-solid border-brand-accent",accent:"bg-brand-accent urgency-accent-normal",badge:"bg-blue-100 text-blue-700 ring-1 ring-inset ring-blue-200 urgency-badge-normal",icon:"text-brand-accent urgency-icon-normal",background:"bg-blue-100"}},oj=n=>{if(!n)return"normal";const i=(Date.now()-n)/6e4;return i>=20?"critical":i>=10?"warning":"normal"},Vg=n=>{const i=oj(n),o=rj[i];return{level:i,border:o.border,accent:o.accent,badge:o.badge,icon:o.icon,background:o.background}},cj=({order:n,onReady:i,canMarkReady:o})=>{const c=Vg(n.date_envoi_cuisine||Date.now()),u=h.useMemo(()=>{const x=[],p=new Map;return n.items.forEach(y=>{var w;const v=(w=y.commentaire)==null?void 0:w.trim(),N=v||"no_comment",j=`${y.produitRef}::${N}`;if(v){x.push({key:`${j}::${y.id}`,nom_produit:y.nom_produit,quantite:y.quantite,commentaire:v});return}const S=p.get(j);if(S!==void 0){x[S].quantite+=y.quantite;return}p.set(j,x.length),x.push({key:j,nom_produit:y.nom_produit,quantite:y.quantite})}),x},[n.items]),f=n.table_nom||`Para llevar #${n.id.slice(-4)}`,g=n.date_envoi_cuisine||Date.now();return a.jsxs("div",{className:`relative flex h-full flex-col overflow-hidden rounded-xl border text-gray-900 shadow-md transition-shadow duration-300 hover:shadow-lg ${c.border} ${c.background}`,children:[a.jsx("span",{"aria-hidden":!0,className:`absolute inset-y-0 left-0 w-1 ${c.accent}`}),a.jsx("header",{className:"border-b border-gray-200 px-5 pt-3 pb-2",children:a.jsxs("div",{className:"grid gap-2 sm:grid-cols-[minmax(0,1fr)_auto] sm:items-start",children:[a.jsxs("div",{className:"min-w-0 space-y-0.5",children:[a.jsx("h4",{className:"truncate text-base font-semibold leading-tight text-gray-900 sm:text-lg md:text-xl",children:f}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Pedido enviado ",new Date(g).toLocaleTimeString("es-CO",{hour:"2-digit",minute:"2-digit"})]})]}),a.jsx("div",{className:"flex flex-col items-start gap-1 sm:items-end",children:a.jsx("div",{className:"flex w-full justify-start sm:justify-end",children:a.jsx(nu,{startTime:g,className:" text-sm sm:text-base"})})})]})}),a.jsx("div",{className:"flex-1 overflow-hidden px-5 pt-2 pb-4",children:a.jsx("div",{className:"flex h-full flex-col gap-1",children:a.jsxs("section",{className:"flex flex-col overflow-hidden gap-1",children:[a.jsx("h5",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-gray-500",children:"Artículos"}),a.jsx("div",{className:"flex-1 overflow-y-auto pr-1",children:a.jsx("ul",{className:"space-y-0.5",children:u.map(x=>{var y;const p=(y=x.commentaire)==null?void 0:y.trim();return a.jsxs("li",{className:"flex items-stretch rounded-lg border border-gray-200 bg-gray-50 text-sm text-gray-900 shadow-sm overflow-hidden min-h-[3.5rem]",children:[a.jsx("div",{className:"flex flex-1 items-center justify-between gap-3 pr-3",children:a.jsxs("div",{className:"flex flex-1 items-center",children:[a.jsx("span",{className:`flex self-stretch w-12 shrink-0 items-center justify-center text-xl font-bold text-white shadow-md ${c.accent} rounded-l-lg`,children:x.quantite}),a.jsx("span",{className:"font-semibold text-gray-900 text-[clamp(1.1rem,2.1vw,1.3rem)] leading-snug break-words text-balance whitespace-normal [hyphens:auto] px-3 py-3",children:x.nom_produit})]})}),p&&a.jsx("p",{className:"mt-2 rounded-md border border-dashed border-blue-200 bg-blue-50 px-3 py-2 text-xs font-medium italic text-blue-800 ml-14 mr-3",children:p})]},x.key)})})})]})})}),o&&a.jsx("footer",{className:"border-t border-gray-200 px-5 pb-5 pt-4",children:a.jsxs("button",{onClick:()=>i(n.id,n.date_envoi_cuisine),className:"group inline-flex w-full items-center justify-center gap-3 rounded-lg border-2 border-transparent bg-black px-4 py-3 text-sm font-semibold uppercase tracking-[0.3em] text-white shadow-sm transition hover:bg-neutral-900 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-black/70 focus-visible:ring-offset-2",children:[a.jsx(lg,{size:20,className:"shrink-0"}),a.jsx("span",{children:"LISTO"})]})})]})},dj=()=>{const[n,i]=h.useState([]),[o,c]=h.useState(!0),{role:u}=Va(),f=(u==null?void 0:u.permissions["/cocina"])==="editor",g=h.useCallback(async()=>{try{const p=await ye.getKitchenOrders();i(p)}catch(p){console.error("Failed to fetch kitchen orders",p)}finally{c(!1)}},[]);h.useEffect(()=>{g();const p=setInterval(g,5e3),y=ye.notifications.subscribe("orders_updated",g);return()=>{clearInterval(p),y()}},[g]);const x=async(p,y)=>{try{await ye.markOrderAsReady(p,y),g()}catch(v){console.error("Failed to mark order as ready",v)}};return o?a.jsx("div",{className:"text-gray-700",children:"Cargando pedidos de cocina..."}):a.jsx("div",{className:"flex h-full flex-col",children:n.length===0?a.jsx("div",{className:"mt-6 flex flex-1 items-center justify-center text-2xl text-gray-500",children:"No hay pedidos en preparación."}):a.jsx("div",{className:"mt-6 grid flex-1 grid-cols-1 justify-center gap-4 sm:[grid-template-columns:repeat(auto-fit,minmax(24rem,max-content))] sm:justify-start",children:n.map(p=>a.jsx(cj,{order:p,onReady:x,canMarkReady:f},p.ticketKey))})})},Rh=({order:n,onValidate:i,onDeliver:o,isProcessing:c})=>{var N;const[u,f]=h.useState(!1),g=n.table_nom||`Pedido #${n.id.slice(-6)}`,x=n.date_envoi_cuisine||n.date_creation,p=Vg(x),y=(((N=n.applied_promotions)==null?void 0:N.length)??0)>0,v=y;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:`relative flex h-full flex-col overflow-hidden rounded-xl border text-gray-900 shadow-md transition-shadow duration-300 hover:shadow-lg ${p.border} ${p.background}`,children:[a.jsx("span",{"aria-hidden":!0,className:`absolute inset-y-0 left-0 w-1 ${p.accent}`}),a.jsx("header",{className:"border-b border-gray-200 px-5 pt-3 pb-2",children:a.jsxs("div",{className:"grid gap-2 sm:grid-cols-[minmax(0,1fr)_auto] sm:items-start",children:[a.jsxs("div",{className:"min-w-0 space-y-0.5",children:[a.jsx("h4",{className:"truncate text-base font-semibold leading-tight text-gray-900 sm:text-lg md:text-xl",children:g}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Pedido enviado ",new Date(x).toLocaleTimeString("es-CO",{hour:"2-digit",minute:"2-digit"})]})]}),a.jsx("div",{className:"flex flex-col items-start gap-1 sm:items-end",children:a.jsx("div",{className:"flex w-full justify-start sm:justify-end",children:a.jsx(nu,{startTime:x,className:" text-sm sm:text-base"})})})]})}),a.jsx("div",{className:"flex-1 overflow-hidden px-5 pt-2 pb-4",children:a.jsxs("div",{className:"flex h-full flex-col gap-1",children:[n.clientInfo&&a.jsxs("section",{className:"space-y-2 rounded-lg border border-gray-200 bg-gray-50 p-3 text-sm text-gray-900 shadow-sm",children:[n.clientInfo.nom&&a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-2 text-gray-900",children:[a.jsx(vi,{size:16,className:p.icon}),a.jsx("span",{className:"font-medium",children:n.clientInfo.nom})]}),n.clientInfo.telephone&&a.jsxs("div",{className:"ml-6 flex items-center gap-2 text-xs text-gray-600",children:[a.jsx(xl,{size:14,className:"text-gray-500"}),a.jsx("span",{children:n.clientInfo.telephone})]})]}),n.clientInfo.adresse&&a.jsxs("div",{className:"flex items-start gap-2 text-gray-700",children:[a.jsx(wn,{size:16,className:`mt-0.5 text-gray-500 ${p.icon}`}),a.jsx("span",{className:"text-sm text-gray-700",children:n.clientInfo.adresse})]})]}),a.jsxs("section",{className:"flex flex-col overflow-hidden gap-1",children:[a.jsx("h5",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-gray-500",children:"Artículos"}),a.jsx("div",{className:"flex-1 overflow-y-auto pr-1",children:n.items.length>0?a.jsx("ul",{className:"space-y-0.5",children:n.items.map(j=>{var w;const S=(w=j.commentaire)==null?void 0:w.trim();return a.jsxs("li",{className:"flex items-stretch rounded-lg border border-gray-200 bg-gray-50 text-sm text-gray-900 shadow-sm overflow-hidden min-h-[3.5rem]",children:[a.jsxs("div",{className:"flex flex-1 items-center justify-between gap-3 pr-3",children:[a.jsxs("div",{className:"flex flex-1 items-center",children:[a.jsx("span",{className:`flex self-stretch w-12 shrink-0 items-center justify-center text-xl font-bold text-white shadow-md ${p.accent} rounded-l-lg`,children:j.quantite}),a.jsx("span",{className:"font-semibold text-gray-900 text-[clamp(1.1rem,2.1vw,1.3rem)] leading-snug break-words text-balance whitespace-normal [hyphens:auto] px-3 py-3",children:j.nom_produit})]}),a.jsx("span",{className:"whitespace-nowrap text-sm font-semibold text-gray-900 sm:text-base",children:me(j.prix_unitaire*j.quantite)})]}),S&&a.jsx("p",{className:"mt-2 rounded-md border border-dashed border-blue-200 bg-blue-50 px-3 py-2 text-xs font-medium italic text-blue-800 ml-14 mr-3",children:S})]},j.id)})}):a.jsx("p",{className:"rounded-lg border border-gray-200 bg-gray-50 px-4 py-3 text-xs text-gray-500 shadow-sm",children:"Este pedido aún no tiene artículos registrados."})})]}),v&&a.jsx("section",{className:"space-y-2 rounded-lg border border-emerald-200 bg-emerald-50 bg-emerald-50 px-3 py-2 text-sm text-emerald-900 shadow-sm",children:y&&a.jsx("ul",{className:"space-y-0.5","aria-label":"Promotions",children:n.applied_promotions.map(j=>{const S=typeof j.config=="object"&&j.config!==null?j.config.promo_code:void 0;return a.jsx("li",{className:"rounded-md border border-emerald-200 bg-white/70 px-3 py-2 text-emerald-900 shadow-sm",children:a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("p",{className:"font-medium leading-tight",children:[j.name,S?` (Code: ${S})`:""]}),a.jsxs("p",{className:"text-sm font-semibold text-emerald-700 whitespace-nowrap",children:["-",me(j.discount_amount||0)]})]})},`${j.promotion_id}-${j.name}`)})})}),a.jsxs("div",{className:"mt-auto flex items-center justify-between rounded-lg border border-gray-200 bg-gray-50 px-3 py-2 font-semibold text-gray-900 shadow-sm",children:[a.jsx("span",{children:"Total"}),a.jsx("span",{className:"text-lg sm:text-xl text-gray-900",children:me(n.total)})]})]})}),a.jsx("footer",{className:"border-t border-gray-200 px-5 pb-5 pt-4",children:(i||o)&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("button",{onClick:()=>f(!0),className:"w-full ui-btn ui-btn-secondary",type:"button",children:[a.jsx(zd,{size:16,className:p.icon})," ",n.receipt_url?"Ver comprobante":"Comprobante no disponible"]}),i&&n.statut==="pendiente_validacion"&&a.jsx("button",{onClick:()=>i(n.id),disabled:c,className:"w-full ui-btn ui-btn-info uppercase",type:"button",children:c?"Validando...":"Validar"}),o&&n.estado_cocina==="listo"&&a.jsx("button",{onClick:()=>o(n.id),disabled:c,className:"w-full ui-btn ui-btn-success uppercase",type:"button",children:c?"Procesando...":"Entregar"})]})})]}),a.jsx(wt,{isOpen:u,onClose:()=>f(!1),title:"Comprobante de pago",size:"half",children:n.receipt_url?a.jsx("img",{src:n.receipt_url,alt:"Comprobante",className:"w-full h-auto rounded-md"}):a.jsx("p",{children:"No se proporcionó comprobante."})})]})},uj=()=>{const[n,i]=h.useState([]),[o,c]=h.useState([]),[u,f]=h.useState(!0),[g,x]=h.useState(null),{content:p,updateContent:y,loading:v}=Ti(),[N,j]=h.useState(!1),[S,w]=h.useState(null),[E,C]=h.useState(!1),[B,L]=h.useState(()=>new Date),[$,U]=h.useState({monday:{enabled:!0,startTime:"11:00",endTime:"23:00"},tuesday:{enabled:!0,startTime:"11:00",endTime:"23:00"},wednesday:{enabled:!0,startTime:"11:00",endTime:"23:00"},thursday:{enabled:!0,startTime:"11:00",endTime:"23:00"},friday:{enabled:!0,startTime:"11:00",endTime:"23:00"},saturday:{enabled:!0,startTime:"11:00",endTime:"23:00"},sunday:{enabled:!0,startTime:"11:00",endTime:"23:00"}});h.useEffect(()=>{if(typeof window>"u")return;const q=()=>L(new Date);q();const O=window.setInterval(q,6e4);return()=>window.clearInterval(O)},[]),h.useEffect(()=>{p&&p.onlineOrdering.schedule.dailySchedules&&U(p.onlineOrdering.schedule.dailySchedules)},[p]);const G=h.useMemo(()=>{const q=Object.entries($).find(([O,ne])=>ne.enabled);if(q){const[O,ne]=q;return su({startTime:ne.startTime,endTime:ne.endTime,dailySchedules:$},"fr-FR",B)}return"Aucun horaire configuré"},[$,B]),se=h.useMemo(()=>{const q=/^([01]\d|2[0-3]):([0-5]\d)$/;return Object.values($).every(O=>!O.enabled||q.test(O.startTime)&&q.test(O.endTime))},[$]),W=h.useMemo(()=>{const q=Object.entries($).find(([O,ne])=>ne.enabled);if(q){const[O,ne]=q;return oo({startTime:ne.startTime,endTime:ne.endTime,dailySchedules:$},B)}return!1},[$,B]),K=h.useCallback(async q=>{if(q.preventDefault(),!(!p||!se)){j(!0),w(null);try{const O=Object.entries($).find(([_,T])=>T.enabled),ne=O?{startTime:O[1].startTime,endTime:O[1].endTime}:{startTime:"11:00",endTime:"23:00"};await y({...p,onlineOrdering:{...p.onlineOrdering,schedule:{...ne,dailySchedules:$}}}),w({message:"Horaires mis à jour avec succès.",tone:"success"})}catch(O){console.error("Failed to update online ordering schedule",O);const ne=O instanceof Error?O.message:"Impossible de mettre à jour les horaires.";w({message:ne,tone:"error"})}finally{j(!1)}}},[se,p,y,$]),oe=h.useCallback(async()=>{try{const{pending:q,ready:O}=await ye.getTakeawayOrders();i(q.sort((ne,_)=>ne.date_creation-_.date_creation)),c(O.sort((ne,_)=>(ne.date_listo_cuisine||0)-(_.date_listo_cuisine||0)))}catch(q){console.error("Failed to fetch takeaway orders",q)}finally{f(!1)}},[]);h.useEffect(()=>{f(!0),oe();const q=setInterval(oe,1e4),O=ye.notifications.subscribe("orders_updated",oe);return()=>{clearInterval(q),O()}},[oe]);const Y=async q=>{if(!g){x(q);try{await ye.validateTakeawayOrder(q),await oe()}catch(O){console.error("Failed to validate order:",O),alert(`No se pudo validar el pedido: ${O.message}`)}finally{x(null)}}},Z=async q=>{if(!g){x(q);try{await ye.markTakeawayAsDelivered(q),await oe()}catch(O){console.error("Failed to mark order as delivered:",O),alert("Ocurrió un error al finalizar el pedido.")}finally{x(null)}}};if(u)return a.jsx("div",{className:"text-gray-700",children:"Cargando pedidos para llevar..."});const I={monday:"Lun",tuesday:"Mar",wednesday:"Mer",thursday:"Jeu",friday:"Ven",saturday:"Sam",sunday:"Dim"};return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"rounded-2xl border border-gray-200 bg-white shadow-sm",children:a.jsxs("form",{onSubmit:K,className:"flex flex-col gap-3 p-3",children:[a.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-blue-100 text-blue-600",children:a.jsx(hs,{size:16})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-sm font-semibold text-gray-900",children:"Disponibilité de la commande en ligne"}),a.jsx("p",{className:"text-xs text-gray-500",children:v?"Chargement...":G})]})]}),a.jsxs("span",{className:`inline-flex items-center gap-1.5 rounded-full px-2 py-0.5 text-xs font-semibold uppercase tracking-wider ${W?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700"}`,children:[a.jsx("span",{className:`h-1.5 w-1.5 rounded-full ${W?"bg-emerald-500":"bg-amber-500"}`}),W?"Ouvert":"Fermé"]})]}),a.jsx("button",{type:"button",onClick:()=>C(!0),className:"w-full inline-flex items-center justify-center rounded-lg bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow transition hover:bg-blue-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500",children:"Configurer les horaires par jour"})]})}),S&&a.jsx("div",{className:"px-4 pb-4",children:a.jsx("p",{className:`text-xs font-medium ${S.tone==="success"?"text-emerald-600":"text-red-600"}`,children:S.message})}),a.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-8 md:grid-cols-2",children:[a.jsxs("div",{className:"bg-gray-100 p-4 rounded-xl",children:[a.jsxs("h2",{className:"text-lg sm:text-xl font-bold mb-4 text-center text-blue-700",children:["Pendientes de validación (",n.length,")"]}),a.jsx("div",{className:"space-y-4",children:n.length>0?n.map(q=>a.jsx(Rh,{order:q,onValidate:Y,isProcessing:g===q.id},q.id)):a.jsx("p",{className:"text-center text-gray-500 py-8",children:"No hay pedidos para validar."})})]}),a.jsxs("div",{className:"bg-gray-100 p-4 rounded-xl",children:[a.jsxs("h2",{className:"text-lg sm:text-xl font-bold mb-4 text-center text-green-700",children:["Pedidos listos (",o.length,")"]}),a.jsx("div",{className:"space-y-4",children:o.length>0?o.map(q=>a.jsx(Rh,{order:q,onDeliver:Z,isProcessing:g===q.id},q.id)):a.jsx("p",{className:"text-center text-gray-500 py-8",children:"No hay pedidos listos."})})]})]}),a.jsx(wt,{isOpen:E,onClose:()=>C(!1),title:"Configuration des horaires par jour",size:"half",children:a.jsxs("form",{onSubmit:K,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Horaires par jour"}),a.jsx("div",{className:"grid gap-2",children:Object.keys($).map(q=>a.jsxs("div",{className:"flex items-center gap-2 rounded-lg border border-gray-200 bg-gray-50 p-2",children:[a.jsxs("label",{className:"flex items-center gap-1.5 min-w-[3rem]",children:[a.jsx("input",{type:"checkbox",checked:$[q].enabled,onChange:O=>U({...$,[q]:{...$[q],enabled:O.target.checked}}),className:"h-3.5 w-3.5 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsx("span",{className:"text-xs font-medium text-gray-700",children:I[q]})]}),$[q].enabled&&a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"time",value:$[q].startTime,onChange:O=>U({...$,[q]:{...$[q],startTime:O.target.value}}),className:"flex-1 rounded border border-gray-300 bg-white px-1.5 py-0.5 text-xs text-gray-900 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",required:!0}),a.jsx("span",{className:"text-xs text-gray-400",children:"–"}),a.jsx("input",{type:"time",value:$[q].endTime,onChange:O=>U({...$,[q]:{...$[q],endTime:O.target.value}}),className:"flex-1 rounded border border-gray-300 bg-white px-1.5 py-0.5 text-xs text-gray-900 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",required:!0})]}),!$[q].enabled&&a.jsx("span",{className:"flex-1 text-xs text-gray-400 italic",children:"Fermé"})]},q))})]}),a.jsx("button",{type:"submit",disabled:!se||N||!p,onClick:()=>C(!1),className:"w-full inline-flex items-center justify-center rounded-lg bg-blue-600 px-3 py-1.5 text-sm font-semibold text-white shadow transition hover:bg-blue-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 disabled:cursor-not-allowed disabled:bg-blue-300",children:N?"Enregistrement...":"Enregistrer"}),S&&a.jsx("p",{className:`text-xs font-medium ${S.tone==="success"?"text-emerald-600":"text-red-600"}`,children:S.message})]})})]})},mj=()=>{const{role:n}=Va(),[i,o]=h.useState([]),[c,u]=h.useState(!0),[f,g]=h.useState(null),[x,p]=h.useState(""),[y,v]=h.useState(!1),[N,j]=h.useState(!1),[S,w]=h.useState(!1),[E,C]=h.useState(null),[B,L]=h.useState("add"),$=(n==null?void 0:n.permissions["/ingredients"])==="editor",U=h.useCallback(async()=>{try{const W=await ye.getIngredients();o(W),g(null)}catch(W){g("Impossible de charger les ingrédients."),console.error(W)}finally{u(!1)}},[]);h.useEffect(()=>{u(!0),U()},[U]);const G=h.useMemo(()=>i.filter(W=>W.nom.toLowerCase().includes(x.toLowerCase())),[i,x]),se=(W,K=null)=>{C(K),W==="add"||W==="edit"?(L(W),v(!0)):W==="resupply"?j(!0):W==="delete"&&w(!0)};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"mt-6 flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[a.jsxs("div",{className:"relative w-full md:w-80",children:[a.jsx(Qd,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),a.jsx("input",{type:"text",placeholder:"Rechercher un ingrédient...",value:x,onChange:W=>p(W.target.value),className:"ui-input pl-10 sm:w-64"})]}),$&&a.jsxs("button",{onClick:()=>se("add"),className:"w-full md:w-auto ui-btn-primary",children:[a.jsx(Vd,{size:20}),"Ajouter un ingrédient"]})]}),c?a.jsx("p",{className:"text-gray-800",children:"Chargement..."}):f?a.jsx("p",{className:"text-red-500",children:f}):a.jsx("div",{className:"ui-card p-4 overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"border-b",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-3 text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Nom"}),a.jsx("th",{className:"p-3 text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Stock Actuel"}),a.jsx("th",{className:"p-3 text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Stock Minimum"}),a.jsx("th",{className:"p-3 text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Prix unitaire moyen"}),$&&a.jsx("th",{className:"p-3 text-right text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{children:G.map(W=>{const K=W.stock_actuel<=W.stock_minimum;return a.jsxs("tr",{className:`border-b hover:bg-gray-50 ${K?"bg-red-50":""}`,children:[a.jsx("td",{className:`p-3 font-semibold ${K?"text-red-900":"text-gray-900"}`,children:W.nom}),a.jsxs("td",{className:`p-3 font-bold ${K?"text-red-700":"text-gray-800"}`,children:[W.stock_actuel," ",W.unite]}),a.jsxs("td",{className:`p-3 ${K?"text-red-800":"text-gray-700"}`,children:[W.stock_minimum," ",W.unite]}),a.jsx("td",{className:`p-3 ${K?"text-red-800":"text-gray-700"}`,children:me(W.prix_unitaire)}),$&&a.jsx("td",{className:"p-3 text-right",children:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>se("resupply",W),title:"Réapprovisionner",className:"p-2 text-green-600 hover:bg-green-100 rounded-full",children:a.jsx(Nv,{size:20})}),a.jsx("button",{onClick:()=>se("edit",W),title:"Modifier",className:"p-2 text-blue-600 hover:bg-blue-100 rounded-full",children:a.jsx(hg,{size:20})}),a.jsx("button",{onClick:()=>se("delete",W),title:"Supprimer",className:"p-2 text-red-600 hover:bg-red-100 rounded-full",children:a.jsx(kn,{size:20})})]})})]},W.id)})})]})}),y&&$&&a.jsx(fj,{isOpen:y,onClose:()=>v(!1),onSuccess:U,ingredient:E,mode:B}),N&&$&&E&&a.jsx(pj,{isOpen:N,onClose:()=>j(!1),onSuccess:U,ingredient:E}),S&&$&&E&&a.jsx(hj,{isOpen:S,onClose:()=>w(!1),onSuccess:U,ingredient:E})]})},fj=({isOpen:n,onClose:i,onSuccess:o,ingredient:c,mode:u})=>{const[f,g]=h.useState({nom:(c==null?void 0:c.nom)||"",unite:(c==null?void 0:c.unite)||"g",stock_minimum:(c==null?void 0:c.stock_minimum)||0}),[x,p]=h.useState(!1),y=async v=>{v.preventDefault(),p(!0);try{u==="edit"&&c?await ye.updateIngredient(c.id,f):await ye.createIngredient(f),o(),i()}catch(N){console.error("Failed to save ingredient",N)}finally{p(!1)}};return a.jsx(wt,{isOpen:n,onClose:i,title:u==="add"?"Ajouter un Ingrédient":"Modifier l'Ingrédient",children:a.jsxs("form",{onSubmit:y,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"nom",className:"block text-sm font-medium text-gray-700",children:"Nom"}),a.jsx("input",{type:"text",id:"nom",value:f.nom,onChange:v=>g({...f,nom:v.target.value}),required:!0,className:"mt-1 ui-input"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"unite",className:"block text-sm font-medium text-gray-700",children:"Unité"}),a.jsxs("select",{id:"unite",value:f.unite,onChange:v=>g({...f,unite:v.target.value}),required:!0,className:"mt-1 ui-select",children:[a.jsx("option",{value:"g",children:"Grammes (g)"}),a.jsx("option",{value:"kg",children:"Kilogrammes (kg)"}),a.jsx("option",{value:"ml",children:"Millilitres (ml)"}),a.jsx("option",{value:"L",children:"Litres (L)"}),a.jsx("option",{value:"unite",children:"Unité"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"stock_minimum",className:"block text-sm font-medium text-gray-700",children:"Stock Minimum"}),a.jsx("input",{type:"number",id:"stock_minimum",min:"0",value:f.stock_minimum,onChange:v=>g({...f,stock_minimum:parseFloat(v.target.value)}),required:!0,className:"mt-1 ui-input"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:i,className:"w-full ui-btn-secondary py-3",children:"Annuler"}),a.jsx("button",{type:"submit",disabled:x,className:"w-full ui-btn-primary py-3 disabled:opacity-60",children:x?"Sauvegarde...":"Sauvegarder"})]})]})})},pj=({isOpen:n,onClose:i,onSuccess:o,ingredient:c})=>{const[u,f]=h.useState(0),[g,x]=h.useState(0),[p,y]=h.useState(!1),v=async N=>{if(N.preventDefault(),!(u<=0||g<0)){y(!0);try{await ye.resupplyIngredient(c.id,u,g),o(),i()}catch(j){console.error("Failed to resupply ingredient",j)}finally{y(!1)}}};return a.jsx(wt,{isOpen:n,onClose:i,title:`Réapprovisionner: ${c.nom}`,children:a.jsxs("form",{onSubmit:v,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"quantity",className:"block text-sm font-medium text-gray-700",children:["Quantité Achetée (",c.unite,")"]}),a.jsx("input",{type:"number",id:"quantity",min:"0.01",step:"0.01",value:u,onChange:N=>f(parseFloat(N.target.value)),required:!0,className:"mt-1 ui-input"})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"unitPrice",className:"block text-sm font-medium text-gray-700",children:["Prix par unité (",c.unite,")"]}),a.jsx("input",{type:"number",id:"unitPrice",min:"0",step:"0.01",value:g,onChange:N=>x(parseFloat(N.target.value)),required:!0,className:"mt-1 ui-input"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:i,className:"w-full ui-btn-secondary py-3",children:"Annuler"}),a.jsx("button",{type:"submit",disabled:p,className:"w-full ui-btn-success py-3 disabled:opacity-60",children:p?"Ajout...":"Ajouter au Stock"})]})]})})},hj=({isOpen:n,onClose:i,onSuccess:o,ingredient:c})=>{const[u,f]=h.useState(!1),[g,x]=h.useState(null),p=async()=>{f(!0),x(null);try{await ye.deleteIngredient(c.id),o(),i()}catch(y){console.error("Failed to delete ingredient",y),x("Impossible de supprimer cet ingrédient car il est utilisé dans au moins une recette.")}finally{f(!1)}};return a.jsxs(wt,{isOpen:n,onClose:i,title:"Confirmer la Suppression",children:[a.jsxs("p",{className:"text-gray-700",children:["Êtes-vous sûr de vouloir supprimer l'ingrédient ",a.jsx("strong",{className:"text-gray-900",children:c.nom})," ? Cette action est irréversible."]}),g&&a.jsx("p",{className:"mt-4 text-sm text-red-600",children:g}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-6",children:[a.jsx("button",{type:"button",onClick:i,className:"w-full ui-btn-secondary py-3",children:"Annuler"}),a.jsx("button",{onClick:p,disabled:u,className:"w-full ui-btn-danger py-3 disabled:opacity-60",children:u?"Suppression...":"Supprimer"})]})]})},Uh=[1,2,3,4,5,6],Lh=n=>{switch(n){case"disponible":return{text:"Disponible",color:"bg-green-100 text-green-800",Icon:jn};case"agotado_temporal":return{text:"Rupture (Temp.)",color:"bg-yellow-100 text-yellow-800",Icon:hs};case"agotado_indefinido":return{text:"Indisponible",color:"bg-red-100 text-red-800",Icon:Oy};default:return{text:"Inconnu",color:"bg-gray-100 text-gray-800",Icon:Ay}}},gj=()=>{const{role:n}=Va(),[i,o]=h.useState([]),[c,u]=h.useState([]),[f,g]=h.useState([]),[x,p]=h.useState(!0),[y,v]=h.useState(null),[N,j]=h.useState(""),[S,w]=h.useState("all"),[E,C]=h.useState(!1),[B,L]=h.useState(!1),[$,U]=h.useState(!1),[G,se]=h.useState(null),[W,K]=h.useState("add"),oe=(n==null?void 0:n.permissions["/produits"])==="editor",Y=h.useCallback(async()=>{try{p(!0);const[ne,_,T]=await Promise.all([ye.getProducts(),ye.getCategories(),ye.getIngredients()]);o(ne),u(_),g(T),v(null)}catch(ne){v("Impossible de charger les données des produits."),console.error(ne)}finally{p(!1)}},[]);h.useEffect(()=>{Y()},[Y]);const Z=h.useMemo(()=>i.filter(ne=>ne.nom_produit.toLowerCase().includes(N.toLowerCase())&&(S==="all"||ne.categoria_id===S)),[i,N,S]),I=h.useMemo(()=>{const ne=new Map;return i.forEach(_=>{_.is_best_seller&&_.best_seller_rank!=null&&ne.set(_.best_seller_rank,_)}),ne},[i]),q=(ne,_="add",T=null)=>{ne==="product"?(K(_),se(T),C(!0)):ne==="category"?L(!0):ne==="delete"&&T&&(se(T),U(!0))},O=async(ne,_)=>{try{await ye.updateProduct(ne.id,{estado:_}),Y()}catch(T){console.error("Failed to update status",T);const A=T instanceof Error?T.message:"Une erreur inconnue s'est produite.";alert(`Échec de la mise à jour du statut du produit : ${A}`)}};return x?a.jsx("p",{className:"text-gray-800",children:"Chargement des produits..."}):y?a.jsx("p",{className:"text-red-500",children:y}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"mt-6 ui-card p-4 flex flex-col lg:flex-row justify-between items-center gap-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row gap-4 w-full",children:[a.jsxs("div",{className:"relative flex-grow md:max-w-md",children:[a.jsx(Qd,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),a.jsx("input",{type:"text",placeholder:"Rechercher un produit...",value:N,onChange:ne=>j(ne.target.value),className:"ui-input pl-10"})]}),a.jsxs("select",{value:S,onChange:ne=>w(ne.target.value),className:"ui-select md:w-56",children:[a.jsx("option",{value:"all",children:"Toutes les catégories"}),c.map(ne=>a.jsx("option",{value:ne.id,children:ne.nom},ne.id))]})]}),oe&&a.jsxs("div",{className:"flex gap-2 w-full lg:w-auto",children:[a.jsx("button",{onClick:()=>L(!0),className:"flex-1 lg:flex-initial ui-btn-secondary",children:a.jsx(Yv,{size:20})}),a.jsxs("button",{onClick:()=>q("product","add"),className:"flex-1 lg:flex-initial ui-btn-primary",children:[a.jsx(Vd,{size:20}),"Ajouter Produit"]})]})]}),a.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:Z.map(ne=>a.jsx(xj,{product:ne,category:c.find(_=>_.id===ne.categoria_id),onEdit:()=>q("product","edit",ne),onDelete:()=>q("delete","edit",ne),onStatusChange:O,canEdit:oe},ne.id))}),E&&oe&&a.jsx(bj,{isOpen:E,onClose:()=>C(!1),onSuccess:Y,product:G,mode:W,categories:c,ingredients:f,occupiedPositions:I}),B&&oe&&a.jsx(yj,{isOpen:B,onClose:()=>L(!1),onSuccess:Y,categories:c}),$&&oe&&G&&a.jsx(vj,{isOpen:$,onClose:()=>U(!1),onSuccess:Y,product:G})]})},xj=({product:n,category:i,onEdit:o,onDelete:c,onStatusChange:u,canEdit:f})=>{const{text:g,color:x,Icon:p}=Lh(n.estado),[y,v]=h.useState(!1),N=n.prix_vente-(n.cout_revient||0);return n.prix_vente>0&&N/n.prix_vente*100,a.jsxs("div",{className:"ui-card flex flex-col overflow-hidden",children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:n.image,alt:n.nom_produit,className:"w-full h-40 object-cover"}),n.is_best_seller&&a.jsxs("span",{className:"absolute top-2 left-2 rounded-full bg-brand-primary/90 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-white shadow-md",children:["Best seller",n.best_seller_rank?` #${n.best_seller_rank}`:""]})]}),a.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-black",children:(i==null?void 0:i.nom)||"Sans catégorie"}),a.jsx("h3",{className:"font-bold text-[clamp(1.05rem,2.2vw,1.35rem)] leading-snug text-black break-words text-balance whitespace-normal [hyphens:auto]",children:n.nom_produit})]}),a.jsx("p",{className:"text-xl font-extrabold text-black",children:me(n.prix_vente)})]}),a.jsx("p",{className:"text-xs text-black mt-1 flex-grow",children:n.description}),a.jsxs("div",{className:"flex justify-between items-center mt-4",children:[a.jsxs("span",{className:`px-2 py-1 text-xs font-bold rounded-full flex items-center gap-1 ${x}`,children:[a.jsx(p,{size:14})," ",g]}),f&&a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:()=>v(!y),className:"p-1 text-gray-500 hover:text-gray-800",children:a.jsx(og,{size:20})}),y&&a.jsxs("div",{className:"absolute right-0 bottom-full mb-2 w-48 bg-white rounded-md shadow-lg z-10 border",children:[a.jsx("button",{onClick:()=>{o(),v(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Modifier"}),a.jsx("button",{onClick:()=>{c(),v(!1)},className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100",children:"Supprimer"}),a.jsx("div",{className:"border-t my-1"}),a.jsx("p",{className:"px-4 pt-2 pb-1 text-xs text-gray-500",children:"Changer statut :"}),["disponible","agotado_temporal","agotado_indefinido"].map(j=>a.jsx("button",{onClick:()=>{u(n,j),v(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:Lh(j).text},j))]})]})]})]})]})},bj=({isOpen:n,onClose:i,onSuccess:o,product:c,mode:u,categories:f,ingredients:g,occupiedPositions:x})=>{var oe;const[p,y]=h.useState({nom_produit:(c==null?void 0:c.nom_produit)||"",prix_vente:(c==null?void 0:c.prix_vente)||0,categoria_id:(c==null?void 0:c.categoria_id)||(((oe=f[0])==null?void 0:oe.id)??""),estado:(c==null?void 0:c.estado)||"disponible",image:(c==null?void 0:c.image)??"",description:(c==null?void 0:c.description)||"",recipe:(c==null?void 0:c.recipe)||[],is_best_seller:(c==null?void 0:c.is_best_seller)??!1,best_seller_rank:(c==null?void 0:c.best_seller_rank)??null}),[v,N]=h.useState(null),[j,S]=h.useState(!1);h.useEffect(()=>{var Y;n&&(y({nom_produit:(c==null?void 0:c.nom_produit)||"",prix_vente:(c==null?void 0:c.prix_vente)||0,categoria_id:(c==null?void 0:c.categoria_id)||(((Y=f[0])==null?void 0:Y.id)??""),estado:(c==null?void 0:c.estado)||"disponible",image:(c==null?void 0:c.image)??"",description:(c==null?void 0:c.description)||"",recipe:(c==null?void 0:c.recipe)||[],is_best_seller:(c==null?void 0:c.is_best_seller)??!1,best_seller_rank:(c==null?void 0:c.best_seller_rank)??null}),N(null))},[n,c,f]);const w=h.useCallback(()=>{for(const Y of Uh){const Z=x.get(Y);if(!Z||Z.id===(c==null?void 0:c.id))return Y}return null},[x,c==null?void 0:c.id]),E=h.useCallback(Y=>{y(Z=>{if(Y){const I=Z.best_seller_rank??w();return{...Z,is_best_seller:!0,best_seller_rank:I??null}}return{...Z,is_best_seller:!1,best_seller_rank:null}})},[w]),C=h.useCallback(Y=>{const Z=Y.target.value;y(I=>({...I,best_seller_rank:Z?Number(Z):null}))},[]),B=h.useMemo(()=>new Map(g.map(Y=>[Y.id,Y])),[g]),L=h.useMemo(()=>p.recipe.reduce((Y,Z)=>{const I=B.get(Z.ingredient_id);if(!I)return Y;let q=I.prix_unitaire;return(I.unite==="kg"||I.unite==="L")&&(q=q/1e3),Y+q*Z.qte_utilisee},0),[p.recipe,B]),$=p.prix_vente-L,U=p.prix_vente>0?$/p.prix_vente*100:0,G=(Y,Z,I)=>{const q=[...p.recipe];if(Z==="qte_utilisee"){const{valueAsNumber:O,value:ne}=I.currentTarget,_=Number.isNaN(O)?Number(ne.replace(",",".")):O;q[Y]={...q[Y],[Z]:Number.isNaN(_)?q[Y].qte_utilisee:_}}else q[Y]={...q[Y],[Z]:I.currentTarget.value};y(O=>({...O,recipe:q}))},se=()=>{g.length!==0&&y({...p,recipe:[...p.recipe,{ingredient_id:g[0].id,qte_utilisee:0}]})},W=Y=>{const Z=p.recipe.filter((I,q)=>q!==Y);y({...p,recipe:Z})},K=async Y=>{var Z;if(Y.preventDefault(),p.recipe.length===0){alert("Veuillez ajouter au moins un ingrédient à la recette.");return}if(p.is_best_seller){if(p.best_seller_rank==null){alert("Veuillez sélectionner une position de best seller disponible.");return}const I=x.get(p.best_seller_rank);if(I&&I.id!==(c==null?void 0:c.id)){alert(`La position ${p.best_seller_rank} est déjà occupée par ${I.nom_produit}.`);return}}S(!0);try{let I=((Z=p.image)==null?void 0:Z.trim())??"";v&&(I=await Kb(v,p.nom_produit));const q={...p,image:I,is_best_seller:p.is_best_seller,best_seller_rank:p.is_best_seller?p.best_seller_rank:null};u==="edit"&&c?await ye.updateProduct(c.id,q):await ye.addProduct(q),o(),N(null),i()}catch(I){console.error("Failed to save product",I);const q=I instanceof Error?I.message:"Une erreur inconnue s'est produite.";alert(`Échec du téléversement de l'image du produit : ${q}`)}finally{S(!1)}};return a.jsx(wt,{isOpen:n,onClose:i,title:u==="add"?"Ajouter un Produit":"Modifier le Produit",size:"lg",children:a.jsxs("form",{onSubmit:K,className:"space-y-4",children:[a.jsxs("div",{className:"max-h-[65vh] overflow-y-auto pr-2 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nom"}),a.jsx("input",{type:"text",value:p.nom_produit,onChange:Y=>y({...p,nom_produit:Y.target.value}),required:!0,className:"mt-1 ui-input"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Prix de vente"}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:p.prix_vente,onChange:Y=>{const{valueAsNumber:Z,value:I}=Y.currentTarget,q=Number.isNaN(Z)?Number(I.replace(",",".")):Z;y(O=>({...O,prix_vente:Number.isNaN(q)?O.prix_vente:q}))},required:!0,className:"mt-1 ui-input"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Catégorie"}),a.jsx("select",{value:p.categoria_id,onChange:Y=>y({...p,categoria_id:Y.target.value}),required:!0,className:"mt-1 ui-select",children:f.map(Y=>a.jsx("option",{value:Y.id,children:Y.nom},Y.id))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Statut"}),a.jsxs("select",{value:p.estado,onChange:Y=>y({...p,estado:Y.target.value}),required:!0,className:"mt-1 ui-select",children:[a.jsx("option",{value:"disponible",children:"Disponible"}),a.jsx("option",{value:"agotado_temporal",children:"Rupture (Temp.)"}),a.jsx("option",{value:"agotado_indefinido",children:"Indisponible"})]})]}),a.jsxs("div",{className:"sm:col-span-2 flex items-center gap-2 pt-2",children:[a.jsx("input",{id:"best-seller-toggle",type:"checkbox",checked:p.is_best_seller,onChange:Y=>E(Y.target.checked),className:"h-4 w-4 rounded border-gray-300 text-brand-primary focus:ring-brand-primary"}),a.jsx("label",{htmlFor:"best-seller-toggle",className:"text-sm font-medium text-gray-700",children:"Best seller"})]}),a.jsxs("div",{className:"sm:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",htmlFor:"best-seller-rank",children:"Position dans le classement"}),a.jsxs("select",{id:"best-seller-rank",value:p.best_seller_rank??"",onChange:C,disabled:!p.is_best_seller,className:"mt-1 ui-select",children:[a.jsx("option",{value:"",children:"Sélectionner une position"}),Uh.map(Y=>{const Z=x.get(Y),I=(Z==null?void 0:Z.id)===(c==null?void 0:c.id),q=!!(Z&&!I),O=Z?I?`${Y} – Position actuelle`:`${Y} – Occupé par ${Z.nom_produit}`:`${Y}`;return a.jsx("option",{value:Y,disabled:q,children:O},Y)})]}),p.is_best_seller&&p.best_seller_rank===null&&a.jsx("p",{className:"mt-1 text-xs text-red-600",children:"Sélectionnez une position disponible pour ce best seller."})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 bg-gray-50 border border-gray-200 rounded-lg p-4 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500",children:"Coût de revient"}),a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:me(L)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500",children:"Marge"}),a.jsx("p",{className:`text-lg font-semibold ${$>=0?"text-emerald-600":"text-red-600"}`,children:me($)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500",children:"Marge %"}),a.jsxs("p",{className:`text-lg font-semibold ${U>=0?"text-emerald-600":"text-red-600"}`,children:[Number.isFinite(U)?xi(U):"0","%"]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),a.jsx("textarea",{rows:3,value:p.description,onChange:Y=>y({...p,description:Y.target.value}),className:"mt-1 ui-textarea",placeholder:"Courte description du produit..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Image du produit"}),a.jsxs("div",{className:"mt-1 flex items-center gap-4",children:[a.jsx("img",{src:v?URL.createObjectURL(v):Jh(p.image),alt:"Aperçu",className:"w-20 h-20 object-cover rounded-md bg-gray-100"}),a.jsxs("label",{htmlFor:"product-image-upload",className:"cursor-pointer bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-primary",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_l,{size:16}),a.jsx("span",{children:"Changer l'image"})]}),a.jsx("input",{id:"product-image-upload",type:"file",className:"sr-only",onChange:Y=>N(Y.target.files?Y.target.files[0]:null)})]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-md font-semibold text-gray-800 border-b pb-2 mb-2",children:"Recette"}),p.recipe.length===0&&a.jsx("div",{className:"text-center p-2 my-2 bg-red-50 border border-red-200 rounded-md",children:a.jsx("p",{className:"text-sm text-red-600",children:"Un produit doit contenir au moins un ingrédient."})}),a.jsx("div",{className:"space-y-2",children:p.recipe.map((Y,Z)=>{var I,q;return a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Py,{className:"text-gray-400 cursor-move",size:16}),a.jsx("select",{value:Y.ingredient_id,onChange:O=>G(Z,"ingredient_id",O),className:"ui-select flex-grow",children:g.map(O=>a.jsx("option",{value:O.id,children:O.nom},O.id))}),a.jsx("input",{type:"number",placeholder:"Qté",value:Y.qte_utilisee,onChange:O=>G(Z,"qte_utilisee",O),className:"ui-input w-24"}),a.jsx("span",{className:"text-gray-500 text-sm w-12",children:((I=g.find(O=>O.id===Y.ingredient_id))==null?void 0:I.unite)==="kg"?"g":(q=g.find(O=>O.id===Y.ingredient_id))==null?void 0:q.unite}),a.jsx("button",{type:"button",onClick:()=>W(Z),className:"p-1 text-red-500 hover:bg-red-100 rounded-full",children:a.jsx(kn,{size:16})})]},Z)})}),a.jsx("button",{type:"button",onClick:se,className:"mt-2 text-sm text-blue-600 hover:underline",children:"Ajouter un ingrédient"})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t",children:[a.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto ui-btn-secondary py-3",children:"Annuler"}),a.jsx("button",{type:"submit",disabled:j||p.recipe.length===0,className:"w-full sm:w-auto ui-btn-primary py-3 disabled:opacity-60",children:j?"Sauvegarde...":"Sauvegarder"})]})]})})},yj=({isOpen:n,onClose:i,onSuccess:o,categories:c})=>{const[u,f]=h.useState(""),[g,x]=h.useState(""),p=async()=>{if(u.trim())try{await ye.addCategory(u),f(""),o()}catch(v){console.error(v)}},y=async v=>{x("");try{await ye.deleteCategory(v),o()}catch(N){x(N.message),console.error(N)}};return a.jsx(wt,{isOpen:n,onClose:i,title:"Gérer les Catégories",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:u,onChange:v=>f(v.target.value),placeholder:"Nom de la nouvelle catégorie",className:"ui-input flex-grow"}),a.jsx("button",{onClick:p,className:"ui-btn-primary px-4",children:"Ajouter"})]}),g&&a.jsx("p",{className:"text-red-500 text-sm",children:g}),a.jsx("ul",{className:"space-y-2 max-h-60 overflow-y-auto",children:c.map(v=>a.jsxs("li",{className:"flex justify-between items-center bg-gray-50 p-2 rounded",children:[a.jsx("span",{className:"text-gray-800",children:v.nom}),a.jsx("button",{onClick:()=>y(v.id),className:"p-1 text-red-500 hover:bg-red-100 rounded-full",children:a.jsx(kn,{size:16})})]},v.id))}),a.jsx("div",{className:"pt-4 flex",children:a.jsx("button",{type:"button",onClick:i,className:"w-full ui-btn-secondary py-3",children:"Fermer"})})]})})},vj=({isOpen:n,onClose:i,onSuccess:o,product:c})=>{const[u,f]=h.useState(!1),g=async()=>{f(!0);try{await ye.deleteProduct(c.id),o(),i()}catch(x){console.error("Failed to delete product",x)}finally{f(!1)}};return a.jsxs(wt,{isOpen:n,onClose:i,title:"Confirmer la Suppression",children:[a.jsxs("p",{className:"text-gray-700",children:["Êtes-vous sûr de vouloir supprimer le produit ",a.jsx("strong",{className:"text-gray-900",children:c.nom_produit})," ? Cette action est irréversible."]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-6",children:[a.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto ui-btn-secondary py-3",children:"Annuler"}),a.jsx("button",{onClick:g,disabled:u,className:"w-full sm:w-auto ui-btn-danger py-3",children:u?"Suppression...":"Supprimer"})]})]})},Yr=n=>n.visuals?{...n.visuals,banner_image:n.visuals.banner_image??n.visuals.banner_url}:null,jj=n=>{if(n.status!=="active")return!1;const i=new Date;return!(n.conditions.start_date&&new Date(n.conditions.start_date)>i||n.conditions.end_date&&new Date(n.conditions.end_date)<i||n.conditions.usage_limit&&n.usage_count>=n.conditions.usage_limit)},_j=n=>{const i=new Date;if(n.days_of_week&&!n.days_of_week.includes(i.getDay()))return!1;if(n.time_range){const[o,c]=n.time_range.start_time.split(":").map(Number),[u,f]=n.time_range.end_time.split(":").map(Number),g=i.getHours()*60+i.getMinutes(),x=o*60+c,p=u*60+f;if(g<x||g>p)return!1}return!0},Nj=(n,i)=>{const o=n.subtotal||n.total;if(i.min_order_amount&&o<i.min_order_amount||i.max_order_amount&&o>i.max_order_amount)return!1;const c=n.items.reduce((u,f)=>u+f.quantite,0);return i.min_items_count&&c<i.min_items_count||i.max_items_count&&c>i.max_items_count||i.order_types&&!i.order_types.includes(n.type)?!1:(i.first_order_only,!0)},Vr=(n,i)=>{if(!jj(n)||!_j(n.conditions)||!Nj(i,n.conditions))return!1;if(n.type==="buy_x_get_y"){const o=n.discount.buy_x_get_y_config;return!o||!o.product_ids?!1:i.items.filter(u=>o.product_ids.includes(u.produitRef)).reduce((u,f)=>u+f.quantite,0)>=2}return!0},Qr=(n,i)=>{let o=0;n.subtotal||n.total,i.applies_to==="total"?o=n.total:i.applies_to==="products"&&i.product_ids&&i.product_ids.length>0?o=n.items.filter(u=>{var f;return(f=i.product_ids)==null?void 0:f.includes(u.produitRef)}).reduce((u,f)=>u+f.prix_unitaire*f.quantite,0):i.applies_to==="categories"&&i.category_ids&&i.category_ids.length>0;let c=o*i.discount_value/100;return i.max_discount_amount&&(c=Math.min(c,i.max_discount_amount)),c},Xr=(n,i)=>i.discount_value,wj=(n,i)=>{const o=i.buy_x_get_y_config;if(!o)return 0;let c=0;const u=n.items.reduce((f,g)=>(f[g.produitRef]||(f[g.produitRef]=[]),f[g.produitRef].push(g),f),{});for(const f in u){const g=u[f],x=g.reduce((p,y)=>p+y.quantite,0);if(o.product_ids&&o.product_ids.includes(f)&&x>=2){const p=Math.floor(x/2),y=[...g].sort((v,N)=>v.prix_unitaire-N.prix_unitaire);y.length>0&&(c+=y[0].prix_unitaire*p)}}return c},Sj=n=>n.shipping_cost||0,Kr=(n,i)=>{switch(n.type){case"percentage":return Qr(i,n.discount);case"fixed_amount":return Xr(i,n.discount);case"promo_code":return n.discount.discount_type==="percentage"?Qr(i,n.discount):n.discount.discount_type==="fixed_amount"?Xr(i,n.discount):0;case"buy_x_get_y":return wj(i,n.discount);case"free_shipping":return Sj(i);case"threshold":return n.discount.discount_type==="percentage"?Qr(i,n.discount):n.discount.discount_type==="fixed_amount"?Xr(i,n.discount):0;case"happy_hour":return n.discount.discount_type==="percentage"?Qr(i,n.discount):n.discount.discount_type==="fixed_amount"?Xr(i,n.discount):0;default:return 0}},Cj=async n=>{const i={...n,applied_promotions:[],total_discount:0,subtotal:n.subtotal||n.total},{data:o,error:c}=await fe.from("promotions").select("*").eq("status","active");if(c||!o)return console.error("Error fetching active promotions:",c),n;let u=i.subtotal;const f=o.filter(p=>p.type==="buy_x_get_y"&&Vr(p,i)).sort((p,y)=>y.priority-p.priority);for(const p of f){const y=Kr(p,i);if(y>0){const v=Math.min(y,u);u-=v,i.total_discount+=v,i.applied_promotions.push({promotion_id:p.id,name:p.name,discount_amount:v,config:p.discount.buy_x_get_y_config,visuals:Yr(p)}),i.total=u}}if(n.promo_code){const p=await Kg(n.promo_code);if(p&&Vr(p,i)){const y=Kr(p,i);if(y>0){const v=Math.min(y,u);u-=v,i.total_discount+=v,i.applied_promotions.push({promotion_id:p.id,name:p.name,discount_amount:v,config:{promo_code:p.discount.promo_code},visuals:Yr(p)}),i.total=u}}}const g=o.filter(p=>(p.type==="percentage"||p.type==="fixed_amount"||p.type==="threshold"||p.type==="happy_hour")&&Vr(p,i)).sort((p,y)=>y.priority-p.priority);for(const p of g){const y=Kr(p,i);if(y>0){const v=Math.min(y,u);u-=v,i.total_discount+=v,i.applied_promotions.push({promotion_id:p.id,name:p.name,discount_amount:v,visuals:Yr(p)}),i.total=u}}const x=o.find(p=>p.type==="free_shipping"&&Vr(p,i));if(x){const p=Kr(x,i);p>0&&i.applied_promotions.push({promotion_id:x.id,name:x.name,discount_amount:p,type:"FREE_SHIPPING",visuals:Yr(x)})}return i.total=u,i},kj=async()=>{const{data:n,error:i}=await fe.from("promotions").select("*").order("priority",{ascending:!1});if(i)throw console.error("Error fetching promotions:",i),new Error("Impossible de récupérer les promotions");return n||[]},Qg=async()=>{const{data:n,error:i}=await fe.from("promotions").select("*").eq("status","active").order("priority",{ascending:!1});if(i)throw console.error("Error fetching active promotions:",i),new Error("Impossible de récupérer les promotions actives");return n||[]},Tj=async n=>{const{data:i,error:o}=await fe.from("promotions").insert([{...n,usage_count:0}]).select().single();if(o)throw console.error("Error creating promotion:",o),new Error("Impossible de créer la promotion");return i},Xg=async(n,i)=>{const{data:o,error:c}=await fe.from("promotions").update(i).eq("id",n).select().single();if(c)throw console.error("Error updating promotion:",c),new Error("Impossible de mettre à jour la promotion");return o},Ej=async(n,i)=>Xg(n,{status:i}),Mj=async n=>{const{error:i}=await fe.from("promotions").delete().eq("id",n);if(i)throw console.error("Error deleting promotion:",i),new Error("Impossible de supprimer la promotion")},Kg=async n=>{const{data:i,error:o}=await fe.from("promotions").select("*").eq("type","promo_code").eq("status","active");return o?(console.error("Error fetching promotion by code:",o),null):(i==null?void 0:i.find(u=>{var f;return((f=u.discount)==null?void 0:f.promo_code)===n}))||null},Aj=async n=>{const{data:i,error:o}=await fe.from("promotion_usages").select("*").eq("promotion_id",n).order("applied_at",{ascending:!1});return o?(console.error("Error fetching promotion usages:",o),[]):i||[]},zj=[{value:"percentage",label:"Pourcentage"},{value:"fixed_amount",label:"Montant fixe"},{value:"promo_code",label:"Code promo"},{value:"buy_x_get_y",label:"2x1 / Achetez X, obtenez Y"},{value:"free_product",label:"Produit gratuit"},{value:"free_shipping",label:"Livraison gratuite"},{value:"combo",label:"Combo"},{value:"threshold",label:"Palier"},{value:"happy_hour",label:"Happy hour"}],Oj=[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"scheduled",label:"Programmée"},{value:"expired",label:"Expirée"}],qh=({isOpen:n,onClose:i,onSave:o,promotion:c})=>{var I,q;const[u,f]=h.useState(""),[g,x]=h.useState("percentage"),[p,y]=h.useState("active"),[v,N]=h.useState(0),[j,S]=h.useState({}),[w,E]=h.useState({type:"percentage",value:0,applies_to:"total"}),[C,B]=h.useState({}),[L,$]=h.useState(!1),[U,G]=h.useState(null),[se,W]=h.useState("general"),[K,oe]=h.useState(!1);h.useEffect(()=>{c&&(f(c.name),x(c.type),y(c.status),N(c.priority),S(c.conditions),E(c.discount),B(c.visuals||{}))},[c]);const Y=async O=>{if(O.preventDefault(),$(!0),G(null),g!=="free_shipping"&&(!w.value||w.value<=0)){G("La valeur de la réduction doit être supérieure à 0"),$(!1),W("discount");return}if(!u||u.trim()===""){G("Le nom de la promotion est obligatoire"),$(!1),W("general");return}try{c?await Xg(c.id,{name:u,type:g,status:p,priority:v,conditions:j,discount:w,visuals:C}):await Tj({name:u,type:g,status:p,priority:v,conditions:j,discount:w,visuals:C}),o()}catch(ne){G(ne instanceof Error?ne.message:"Une erreur est survenue")}finally{$(!1)}},Z=async O=>{var _;const ne=(_=O.target.files)==null?void 0:_[0];if(ne){oe(!0);try{const T=await yl(ne);B({...C,banner_image:ps(T)})}catch{G("Erreur lors du téléchargement de l'image")}finally{oe(!1)}}};return n?a.jsx("div",{className:"promotion-modal fixed inset-0 z-50 flex items-center justify-center bg-slate-950/80 px-4 py-6 text-black backdrop-blur-sm",children:a.jsxs("div",{className:"promotion-modal__content flex w-full max-w-5xl flex-col overflow-hidden rounded-2xl border border-slate-200 bg-white text-black shadow-2xl",children:[a.jsxs("div",{className:"flex flex-col gap-3 border-b border-slate-200 bg-white px-6 py-5 text-black sm:flex-row sm:items-center sm:justify-between",children:[a.jsx("h2",{className:"text-xl font-semibold leading-snug sm:text-2xl",children:c?"Modifier la promotion":"Nouvelle promotion"}),a.jsx("button",{onClick:i,className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-transparent text-black transition hover:bg-slate-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-brand-primary","aria-label":"Fermer la fenêtre de promotion",children:a.jsx(fs,{size:22})})]}),U&&a.jsx("div",{className:"mx-6 mt-4 rounded-xl border border-red-200 bg-red-50/90 px-4 py-3 text-sm font-medium text-black shadow-sm",children:U}),a.jsxs("div",{className:"flex flex-wrap gap-2 border-b border-slate-200 bg-slate-50/80 px-4 py-3 sm:px-6",children:[a.jsx("button",{className:`rounded-full px-4 py-2 text-sm font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary ${se==="general"?"border border-brand-primary bg-brand-primary/10 text-black shadow":"border border-transparent text-black hover:bg-slate-100"}`,onClick:()=>W("general"),children:"Général"}),a.jsx("button",{className:`rounded-full px-4 py-2 text-sm font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary ${se==="conditions"?"border border-brand-primary bg-brand-primary/10 text-black shadow":"border border-transparent text-black hover:bg-slate-100"}`,onClick:()=>W("conditions"),children:"Conditions"}),a.jsx("button",{className:`rounded-full px-4 py-2 text-sm font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary ${se==="discount"?"border border-brand-primary bg-brand-primary/10 text-black shadow":"border border-transparent text-black hover:bg-slate-100"}`,onClick:()=>W("discount"),children:"Réduction"}),a.jsx("button",{className:`rounded-full px-4 py-2 text-sm font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary ${se==="visuals"?"border border-brand-primary bg-brand-primary/10 text-black shadow":"border border-transparent text-black hover:bg-slate-100"}`,onClick:()=>W("visuals"),children:"Affichage"})]}),a.jsxs("form",{onSubmit:Y,className:"flex-1 overflow-y-auto bg-white px-4 py-6 text-black sm:px-6",children:[se==="general"&&a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"space-y-4 rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"name",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Nom de la promotion"}),a.jsx("input",{type:"text",id:"name",value:u,onChange:O=>f(O.target.value),className:"ui-input mt-2",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"type",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Type de promotion"}),a.jsx("select",{id:"type",value:g,onChange:O=>x(O.target.value),className:"ui-input mt-2",required:!0,children:zj.map(O=>a.jsx("option",{value:O.value,children:O.label},O.value))})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"status",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Statut"}),a.jsx("select",{id:"status",value:p,onChange:O=>y(O.target.value),className:"ui-input mt-2",required:!0,children:Oj.map(O=>a.jsx("option",{value:O.value,children:O.label},O.value))})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"priority",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Priorité"}),a.jsx("input",{type:"number",id:"priority",value:v,onChange:O=>N(parseInt(O.target.value)||0),className:"ui-input mt-2",min:"0",max:"100"}),a.jsx("p",{className:"mt-2 text-xs text-black",children:"Plus la valeur est élevée, plus la promotion est prioritaire."})]})]})}),se==="conditions"&&a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"space-y-6 rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[g==="promo_code"&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"promo_code",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Code promo"}),a.jsx("input",{type:"text",id:"promo_code",value:j.promo_code||"",onChange:O=>S({...j,promo_code:O.target.value}),className:"ui-input mt-2",required:g==="promo_code"})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"min_order_amount",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Montant minimum de commande"}),a.jsx("input",{type:"number",id:"min_order_amount",value:j.min_order_amount||"",onChange:O=>S({...j,min_order_amount:parseFloat(O.target.value)||void 0}),className:"ui-input mt-2",min:"0",step:"0.01"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"max_order_amount",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Montant maximum de commande"}),a.jsx("input",{type:"number",id:"max_order_amount",value:j.max_order_amount||"",onChange:O=>S({...j,max_order_amount:parseFloat(O.target.value)||void 0}),className:"ui-input mt-2",min:"0",step:"0.01"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"start_date",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Date de début"}),a.jsx("input",{type:"datetime-local",id:"start_date",value:j.start_date?new Date(j.start_date).toISOString().slice(0,16):"",onChange:O=>S({...j,start_date:O.target.value?new Date(O.target.value).toISOString():void 0}),className:"ui-input mt-2"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"end_date",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Date de fin"}),a.jsx("input",{type:"datetime-local",id:"end_date",value:j.end_date?new Date(j.end_date).toISOString().slice(0,16):"",onChange:O=>S({...j,end_date:O.target.value?new Date(O.target.value).toISOString():void 0}),className:"ui-input mt-2"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Jours de la semaine"}),a.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"].map((O,ne)=>{var _;return a.jsxs("label",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white/80 px-3 py-1 text-sm text-black shadow-sm",children:[a.jsx("input",{type:"checkbox",checked:((_=j.days_of_week)==null?void 0:_.includes(ne))||!1,onChange:T=>{const A=j.days_of_week||[];T.target.checked?S({...j,days_of_week:[...A,ne]}):S({...j,days_of_week:A.filter(P=>P!==ne)})},className:"h-4 w-4 rounded border-slate-300 text-black focus:ring-black"}),a.jsx("span",{children:O})]},ne)})})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"hours_start",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Heure de début"}),a.jsx("input",{type:"time",id:"hours_start",value:((I=j.hours_of_day)==null?void 0:I.start)||"",onChange:O=>S({...j,hours_of_day:{...j.hours_of_day||{},start:O.target.value}}),className:"ui-input mt-2"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"hours_end",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Heure de fin"}),a.jsx("input",{type:"time",id:"hours_end",value:((q=j.hours_of_day)==null?void 0:q.end)||"",onChange:O=>S({...j,hours_of_day:{...j.hours_of_day||{},end:O.target.value}}),className:"ui-input mt-2"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"max_uses",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Nombre maximum d'utilisations"}),a.jsx("input",{type:"number",id:"max_uses",value:j.max_uses_total||"",onChange:O=>S({...j,max_uses_total:parseInt(O.target.value)||void 0}),className:"ui-input mt-2",min:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"max_uses_per_customer",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Maximum par client"}),a.jsx("input",{type:"number",id:"max_uses_per_customer",value:j.max_uses_per_customer||"",onChange:O=>S({...j,max_uses_per_customer:parseInt(O.target.value)||void 0}),className:"ui-input mt-2",min:"0"})]})]}),g==="buy_x_get_y"&&a.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"buy_quantity",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Quantité à acheter"}),a.jsx("input",{type:"number",id:"buy_quantity",value:j.buy_quantity||"",onChange:O=>S({...j,buy_quantity:parseInt(O.target.value)||void 0}),className:"ui-input mt-2",min:"1",required:g==="buy_x_get_y"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"get_quantity",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Quantité offerte"}),a.jsx("input",{type:"number",id:"get_quantity",value:j.get_quantity||"",onChange:O=>S({...j,get_quantity:parseInt(O.target.value)||void 0}),className:"ui-input mt-2",min:"1",required:g==="buy_x_get_y"})]})]}),a.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-slate-200 bg-white/80 px-4 py-3 shadow-sm",children:[a.jsx("input",{type:"checkbox",id:"first_order_only",checked:j.first_order_only||!1,onChange:O=>S({...j,first_order_only:O.target.checked}),className:"h-4 w-4 rounded border-slate-300 text-black focus:ring-black"}),a.jsx("label",{htmlFor:"first_order_only",className:"text-sm font-medium text-black",children:"Uniquement pour la première commande"})]})]})}),se==="discount"&&a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"space-y-6 rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[a.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"discount_type",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Type de réduction"}),a.jsxs("select",{id:"discount_type",value:w.type,onChange:O=>E({...w,type:O.target.value}),className:"ui-input mt-2",required:!0,children:[a.jsx("option",{value:"percentage",children:"Pourcentage"}),a.jsx("option",{value:"fixed_amount",children:"Montant fixe"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"discount_value",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Valeur de la réduction"}),a.jsxs("div",{className:"relative mt-2",children:[a.jsx("input",{type:"number",id:"discount_value",value:w.value,onChange:O=>E({...w,value:parseFloat(O.target.value)||0}),className:"ui-input pr-10",min:"0",step:(w.type==="percentage","0.01"),required:!0}),a.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-3 flex items-center text-sm font-semibold text-black",children:w.type==="percentage"?"%":"€"})]})]})]}),w.type==="percentage"&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"max_discount_amount",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Montant maximum de la réduction"}),a.jsxs("div",{className:"relative mt-2",children:[a.jsx("input",{type:"number",id:"max_discount_amount",value:w.max_discount_amount||"",onChange:O=>E({...w,max_discount_amount:parseFloat(O.target.value)||void 0}),className:"ui-input pr-10",min:"0",step:"0.01"}),a.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-3 flex items-center text-sm font-semibold text-black",children:"€"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"applies_to",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Application de la réduction"}),a.jsxs("select",{id:"applies_to",value:w.applies_to,onChange:O=>E({...w,applies_to:O.target.value}),className:"ui-input mt-2",required:!0,children:[a.jsx("option",{value:"total",children:"Total de la commande"}),a.jsx("option",{value:"products",children:"Produits spécifiques"}),a.jsx("option",{value:"shipping",children:"Frais de livraison"})]})]})]})}),se==="visuals"&&a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"space-y-6 rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[a.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"badge_text",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Texte du badge"}),a.jsx("input",{type:"text",id:"badge_text",value:C.badge_text||"",onChange:O=>B({...C,badge_text:O.target.value}),className:"ui-input mt-2",placeholder:"Ex: 2x1, -20%, etc."})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"badge_color",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Couleur du texte du badge"}),a.jsx("input",{type:"color",id:"badge_color",value:C.badge_color||"#FFFFFF",onChange:O=>B({...C,badge_color:O.target.value}),className:"mt-2 h-12 w-full rounded-lg border border-slate-200 bg-white"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"badge_bg_color",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Couleur de fond du badge"}),a.jsx("input",{type:"color",id:"badge_bg_color",value:C.badge_bg_color||"#F9A826",onChange:O=>B({...C,badge_bg_color:O.target.value}),className:"mt-2 h-12 w-full rounded-lg border border-slate-200 bg-white"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"badge_bg_image",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Image de fond du badge (optionnel)"}),a.jsx("p",{className:"mt-1 text-xs text-black",children:"Si vous uploadez une image, elle remplacera la couleur de fond du badge"}),a.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-4",children:[a.jsxs("label",{className:"inline-flex items-center justify-center gap-2 rounded-full border border-slate-200 bg-white px-5 py-2 text-sm font-semibold text-black shadow-sm transition hover:bg-slate-100",children:[a.jsx("input",{type:"file",id:"badge_bg_image",onChange:async O=>{var _;const ne=(_=O.target.files)==null?void 0:_[0];if(ne){oe(!0);try{const T=await yl(ne,{tags:["badge-background"]});B({...C,badge_bg_image:ps(T)})}catch{G("Erreur lors du téléchargement de l'image du badge")}finally{oe(!1)}}},className:"sr-only",accept:"image/*"}),a.jsx("span",{children:K?"Téléchargement...":"Choisir une image"})]}),C.badge_bg_image&&a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:C.badge_bg_image,alt:"Aperçu de l'image de fond du badge",className:"h-16 w-auto rounded-lg object-cover shadow-sm"}),a.jsx("button",{type:"button",onClick:()=>B({...C,badge_bg_image:void 0}),className:"absolute -top-2 -right-2 inline-flex h-7 w-7 items-center justify-center rounded-full border border-red-500 bg-white text-black shadow hover:bg-red-100",children:a.jsx(fs,{size:12})})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"banner_text",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Texte de la bannière"}),a.jsx("input",{type:"text",id:"banner_text",value:C.banner_text||"",onChange:O=>B({...C,banner_text:O.target.value}),className:"ui-input mt-2",placeholder:"Ex: Offre spéciale : 20% de réduction sur tous les tacos !"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"banner_image",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Image de la bannière"}),a.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-4",children:[a.jsxs("label",{className:"inline-flex items-center justify-center gap-2 rounded-full border border-slate-200 bg-white px-5 py-2 text-sm font-semibold text-black shadow-sm transition hover:bg-slate-100",children:[a.jsx("input",{type:"file",id:"banner_image",onChange:Z,className:"sr-only",accept:"image/*"}),a.jsx("span",{children:K?"Téléchargement...":"Choisir une image"})]}),C.banner_image&&a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:C.banner_image,alt:"Aperçu de la bannière",className:"h-20 w-auto rounded-lg object-cover shadow-sm"}),a.jsx("button",{type:"button",onClick:()=>B({...C,banner_image:void 0}),className:"absolute -top-2 -right-2 inline-flex h-7 w-7 items-center justify-center rounded-full border border-red-500 bg-white text-black shadow hover:bg-red-100",children:a.jsx(fs,{size:12})})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"banner_cta",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Texte du bouton d'appel à l'action"}),a.jsx("input",{type:"text",id:"banner_cta",value:C.banner_cta||"",onChange:O=>B({...C,banner_cta:O.target.value}),className:"ui-input mt-2",placeholder:"Ex: En profiter maintenant"})]})]})})]}),a.jsxs("div",{className:"flex flex-col gap-3 border-t border-slate-200 bg-slate-50/80 p-6 sm:flex-row sm:items-center sm:justify-end",children:[a.jsx("button",{type:"button",onClick:i,className:"inline-flex items-center justify-center rounded-full border border-slate-300 px-5 py-2.5 text-sm font-semibold text-black transition hover:bg-slate-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary",disabled:L,children:"Annuler"}),a.jsx("button",{type:"submit",onClick:Y,className:"inline-flex items-center justify-center gap-2 rounded-full border border-brand-primary bg-white px-5 py-2.5 text-sm font-semibold text-black shadow transition hover:bg-brand-primary/10 focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary",disabled:L,children:L?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-black border-t-transparent"}),a.jsx("span",{children:"Enregistrement..."})]}):a.jsx("span",{children:"Enregistrer"})})]})]})}):null},Id=(n,i,o)=>Math.min(Math.max(n,i),o),Dj=n=>{const i=n.replace("#","").trim();if(i.length===3){const o=parseInt(i[0]+i[0],16),c=parseInt(i[1]+i[1],16),u=parseInt(i[2]+i[2],16);return[o,c,u]}if(i.length===4){const o=parseInt(i[0]+i[0],16),c=parseInt(i[1]+i[1],16),u=parseInt(i[2]+i[2],16);return[o,c,u]}if(i.length===6||i.length===8){const o=parseInt(i.slice(0,2),16),c=parseInt(i.slice(2,4),16),u=parseInt(i.slice(4,6),16);return[o,c,u]}return null},Rj=n=>{const i=n.match(/rgba?\(([^)]+)\)/i);if(!i)return null;const[o,c,u]=i[1].split(",").slice(0,3).map(f=>Id(parseFloat(f.trim()),0,255));return[o,c,u].some(f=>Number.isNaN(f))?null:[o,c,u]},Uj=(n,i,o)=>{const c=(n%360+360)%360,u=Id(i,0,1),f=Id(o,0,1);if(u===0){const S=Math.round(f*255);return[S,S,S]}const g=(1-Math.abs(2*f-1))*u,x=g*(1-Math.abs(c/60%2-1)),p=f-g/2;let y=0,v=0,N=0;c<60?(y=g,v=x):c<120?(y=x,v=g):c<180?(v=g,N=x):c<240?(v=x,N=g):c<300?(y=x,N=g):(y=g,N=x);const j=S=>Math.round((S+p)*255);return[j(y),j(v),j(N)]},Lj=n=>{const i=n.match(/hsla?\(([^)]+)\)/i);if(!i)return null;const[o,c,u]=i[1].split(",").slice(0,3).map(p=>p.trim()),f=parseFloat(o),g=parseFloat(c.replace("%",""))/100,x=parseFloat(u.replace("%",""))/100;return[f,g,x].some(p=>Number.isNaN(p))?null:Uj(f,g,x)},qj=n=>{if(!n)return null;const i=n.trim();return i?i.startsWith("#")?Dj(i):i.toLowerCase().startsWith("rgb")?Rj(i):i.toLowerCase().startsWith("hsl")?Lj(i):null:null},Bj=n=>{const i=qj(n);if(!i)return null;const[o,c,u]=i.map(g=>g/255),f=[o,c,u].map(g=>g<=.03928?g/12.92:Math.pow((g+.055)/1.055,2.4));return .2126*f[0]+.7152*f[1]+.0722*f[2]},Ij=(n,i=.55)=>{const o=Bj(n);return o===null?!1:o<i},Zg=(n,{lightColor:i="#FFFFFF",darkColor:o="#000000",threshold:c=.55}={})=>Ij(n,c)?i:o,Hj={percentage:"Pourcentage",fixed_amount:"Montant fixe",promo_code:"Code promo",buy_x_get_y:"2x1 / Achetez X, obtenez Y",free_product:"Produit gratuit",free_shipping:"Livraison gratuite",combo:"Combo",threshold:"Palier",happy_hour:"Happy hour"},$j={active:"Active",inactive:"Inactive",scheduled:"Programmée",expired:"Expirée"},Gj={active:"bg-green-100 text-black",inactive:"bg-gray-100 text-black",scheduled:"bg-blue-100 text-black",expired:"bg-red-100 text-black"},Fj=({isOpen:n,onClose:i,promotion:o})=>{var E;const[c,u]=h.useState([]),[f,g]=h.useState(!1),[x,p]=h.useState(null),[y,v]=h.useState("details");h.useEffect(()=>{n&&o&&N()},[n,o]);const N=async()=>{g(!0),p(null);try{const C=await Aj(o.id);u(C)}catch(C){p("Erreur lors du chargement des utilisations"),console.error(C)}finally{g(!1)}},j=C=>{const B=new Date(C);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(B)},S=((E=o.visuals)==null?void 0:E.badge_bg_color)||"#F9A826",w=Zg(S);return n?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-950/80 px-4 py-6 backdrop-blur-sm",children:a.jsxs("div",{className:"flex w-full max-w-5xl flex-col overflow-hidden rounded-2xl border border-slate-200 bg-white text-black shadow-2xl",children:[a.jsxs("div",{className:"flex flex-col gap-3 border-b border-slate-200 bg-white px-6 py-5 text-black sm:flex-row sm:items-center sm:justify-between",children:[a.jsx("h2",{className:"text-xl font-semibold leading-snug sm:text-2xl",children:"Détails de la promotion"}),a.jsx("button",{onClick:i,className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-transparent text-black transition hover:bg-slate-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-brand-primary","aria-label":"Fermer les détails de la promotion",children:a.jsx(fs,{size:22})})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 border-b border-slate-200 bg-slate-50/80 px-4 py-3 sm:px-6",children:[a.jsx("button",{className:`rounded-full px-4 py-2 text-sm font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary ${y==="details"?"border border-brand-primary bg-brand-primary/10 text-black shadow":"border border-transparent text-black hover:bg-slate-100"}`,onClick:()=>v("details"),children:"Détails"}),a.jsxs("button",{className:`rounded-full px-4 py-2 text-sm font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary ${y==="usages"?"border border-brand-primary bg-brand-primary/10 text-black shadow":"border border-transparent text-black hover:bg-slate-100"}`,onClick:()=>v("usages"),children:["Utilisations (",o.usage_count,")"]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto bg-white px-4 py-6 sm:px-6",children:[y==="details"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:a.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-black",children:o.name}),a.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold ${Gj[o.status]}`,children:$j[o.status]}),a.jsx("span",{className:"text-sm font-medium text-black",children:Hj[o.type]})]})]}),a.jsxs("div",{className:"rounded-full border border-slate-200 bg-white/80 px-4 py-1.5 text-sm font-semibold text-black shadow-sm",children:["Priorité : ",o.priority]})]})}),a.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[a.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[a.jsxs("h4",{className:"mb-3 flex items-center gap-2 text-sm font-semibold uppercase tracking-wide text-black",children:[a.jsx(tv,{size:16}),"Informations générales"]}),a.jsxs("dl",{className:"space-y-2 text-sm text-black",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"ID"}),a.jsx("dd",{className:"rounded bg-white/80 px-2 py-0.5 font-mono text-black shadow-sm",children:o.id})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Créée le"}),a.jsx("dd",{children:j(o.created_at)})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Mise à jour"}),a.jsx("dd",{children:j(o.updated_at)})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Utilisations"}),a.jsx("dd",{children:o.usage_count})]})]})]}),a.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[a.jsxs("h4",{className:"mb-3 flex items-center gap-2 text-sm font-semibold uppercase tracking-wide text-black",children:[a.jsx(jl,{size:16}),"Réduction"]}),a.jsxs("dl",{className:"space-y-2 text-sm text-black",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Type"}),a.jsx("dd",{children:o.discount.type==="percentage"?"Pourcentage":"Montant fixe"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Valeur"}),a.jsxs("dd",{className:"font-semibold text-black",children:[o.discount.value,o.discount.type==="percentage"?"%":"€"]})]}),o.discount.max_discount_amount&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Maximum"}),a.jsxs("dd",{children:[o.discount.max_discount_amount,"€"]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Application"}),a.jsxs("dd",{children:[o.discount.applies_to==="total"&&"Total de la commande",o.discount.applies_to==="products"&&"Produits spécifiques",o.discount.applies_to==="shipping"&&"Frais de livraison"]})]})]})]})]}),a.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[a.jsxs("h4",{className:"mb-3 flex items-center gap-2 text-sm font-semibold uppercase tracking-wide text-black",children:[a.jsx(my,{size:16}),"Conditions"]}),a.jsxs("dl",{className:"grid grid-cols-1 gap-3 text-sm text-black md:grid-cols-2",children:[o.conditions.promo_code&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Code promo"}),a.jsx("dd",{className:"rounded bg-white/80 px-2 py-0.5 font-mono text-black shadow-sm",children:o.conditions.promo_code})]}),o.conditions.min_order_amount&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Montant minimum"}),a.jsxs("dd",{children:[o.conditions.min_order_amount,"€"]})]}),o.conditions.max_order_amount&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Montant maximum"}),a.jsxs("dd",{children:[o.conditions.max_order_amount,"€"]})]}),o.conditions.start_date&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Date de début"}),a.jsx("dd",{children:j(o.conditions.start_date)})]}),o.conditions.end_date&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Date de fin"}),a.jsx("dd",{children:j(o.conditions.end_date)})]}),o.conditions.days_of_week&&o.conditions.days_of_week.length>0&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Jours"}),a.jsx("dd",{children:o.conditions.days_of_week.map(C=>["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"][C]).join(", ")})]}),o.conditions.hours_of_day&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Heures"}),a.jsxs("dd",{children:[o.conditions.hours_of_day.start," - ",o.conditions.hours_of_day.end]})]}),o.conditions.max_uses_total&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Utilisations max."}),a.jsx("dd",{children:o.conditions.max_uses_total})]}),o.conditions.max_uses_per_customer&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Max par client"}),a.jsx("dd",{children:o.conditions.max_uses_per_customer})]}),o.conditions.first_order_only&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Première commande"}),a.jsx("dd",{children:"Oui"})]}),o.type==="buy_x_get_y"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Achetez"}),a.jsx("dd",{children:o.conditions.buy_quantity})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Obtenez"}),a.jsx("dd",{children:o.conditions.get_quantity})]})]})]})]}),o.visuals&&Object.keys(o.visuals).length>0&&a.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[a.jsxs("h4",{className:"mb-3 flex items-center gap-2 text-sm font-semibold uppercase tracking-wide text-black",children:[a.jsx(wi,{size:16}),"Éléments visuels"]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 text-sm text-black md:grid-cols-2",children:[o.visuals.badge_text&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-medium",children:"Badge"}),a.jsx("span",{className:"rounded-full px-3 py-1 text-xs font-semibold",style:{backgroundColor:S,color:w},children:o.visuals.badge_text})]}),o.visuals.banner_text&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-medium",children:"Texte bannière"}),a.jsx("span",{className:"text-right text-black",children:o.visuals.banner_text})]}),o.visuals.banner_cta&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-medium",children:"Bouton"}),a.jsx("span",{className:"text-right text-black",children:o.visuals.banner_cta})]})]}),o.visuals.banner_image&&a.jsxs("div",{className:"mt-4",children:[a.jsx("span",{className:"mb-2 block text-xs font-semibold uppercase tracking-wide text-black",children:"Image de bannière"}),a.jsx("img",{src:o.visuals.banner_image,alt:"Bannière promotionnelle",className:"w-full max-h-40 rounded-xl object-cover shadow-sm"})]})]})]}),y==="usages"&&a.jsxs("div",{className:"space-y-4",children:[x&&a.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50/90 px-4 py-3 text-sm font-medium text-black shadow-sm",children:x}),f?a.jsxs("div",{className:"flex items-center justify-center gap-3 rounded-2xl border border-slate-200 bg-slate-50/80 py-10 text-black shadow-sm",children:[a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-b-2 border-brand-primary"}),a.jsx("span",{children:"Chargement…"})]}):c.length===0?a.jsx("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/80 py-10 text-center text-sm font-medium text-black shadow-sm",children:"Aucune utilisation enregistrée pour cette promotion"}):a.jsx("div",{className:"overflow-hidden rounded-2xl border border-slate-200 shadow-sm",children:a.jsxs("table",{className:"w-full divide-y divide-slate-200 text-sm text-black",children:[a.jsx("thead",{className:"bg-slate-50/90 text-xs font-semibold uppercase tracking-wide text-black",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left",children:"Date"}),a.jsx("th",{className:"px-4 py-3 text-left",children:"Commande"}),a.jsx("th",{className:"px-4 py-3 text-left",children:"Client"}),a.jsx("th",{className:"px-4 py-3 text-right",children:"Montant"})]})}),a.jsx("tbody",{className:"divide-y divide-slate-100",children:c.map(C=>a.jsxs("tr",{className:"bg-white/80 transition hover:bg-brand-accent-soft",children:[a.jsx("td",{className:"px-4 py-3 font-medium text-black",children:j(C.applied_at)}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs("a",{href:"#",className:"inline-flex items-center gap-2 text-black transition hover:underline",onClick:B=>{B.preventDefault()},children:[C.order_id.substring(0,8),"...",a.jsx($y,{size:14})]})}),a.jsx("td",{className:"px-4 py-3",children:C.customer_phone||"—"}),a.jsxs("td",{className:"px-4 py-3 text-right font-semibold text-black",children:[C.discount_amount.toFixed(2),"€"]})]},C.id))})]})})]})]}),a.jsx("div",{className:"flex justify-end border-t border-slate-200 bg-slate-50/80 p-6",children:a.jsx("button",{type:"button",onClick:i,className:"inline-flex items-center justify-center rounded-full border border-slate-300 px-5 py-2.5 text-sm font-semibold text-black transition hover:bg-slate-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary",children:"Fermer"})})]})}):null},Yj=({isOpen:n,onClose:i,onConfirm:o,title:c,message:u,confirmLabel:f="Confirmer",cancelLabel:g="Annuler",confirmButtonClass:x="bg-brand-primary hover:bg-brand-primary-dark"})=>n?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md overflow-hidden",children:[a.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[a.jsx("h2",{className:"text-xl font-semibold",children:c}),a.jsx("button",{onClick:i,className:"text-gray-500 hover:text-gray-700",children:a.jsx(fs,{size:24})})]}),a.jsx("div",{className:"p-6",children:a.jsx("p",{className:"text-gray-700",children:u})}),a.jsxs("div",{className:"flex justify-end items-center gap-3 p-6 border-t",children:[a.jsx("button",{type:"button",onClick:i,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:g}),a.jsx("button",{type:"button",onClick:o,className:`px-4 py-2 text-white rounded-md ${x}`,children:f})]})]})}):null,Vj={active:"Active",inactive:"Inactive",scheduled:"Programmée",expired:"Expirée"},Qj={active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",scheduled:"bg-blue-100 text-blue-800",expired:"bg-red-100 text-red-800"},Xj={percentage:"Pourcentage",fixed_amount:"Montant fixe",promo_code:"Code promo",buy_x_get_y:"2x1 / Achetez X, obtenez Y",free_product:"Produit gratuit",free_shipping:"Livraison gratuite",combo:"Combo",threshold:"Palier",happy_hour:"Happy hour"},Kj={percentage:a.jsx(jl,{size:16}),fixed_amount:a.jsx(wi,{size:16}),promo_code:a.jsx(wi,{size:16}),buy_x_get_y:a.jsx(Qs,{size:16}),free_product:a.jsx(Qs,{size:16}),free_shipping:a.jsx(Qs,{size:16}),combo:a.jsx(Qs,{size:16}),threshold:a.jsx(rg,{size:16}),happy_hour:a.jsx(hs,{size:16})},Zj=()=>{const[n,i]=h.useState([]),[o,c]=h.useState(!0),[u,f]=h.useState(null),[g,x]=h.useState(!1),[p,y]=h.useState(!1),[v,N]=h.useState(!1),[j,S]=h.useState(!1),[w,E]=h.useState(null),[C,B]=h.useState(""),[L,$]=h.useState("all"),[U,G]=h.useState("all"),[se,W]=h.useState("priority"),[K,oe]=h.useState("desc"),Y=async()=>{c(!0),f(null);try{const D=await kj();i(D)}catch(D){f("Erreur lors du chargement des promotions"),console.error(D)}finally{c(!1)}};h.useEffect(()=>{Y()},[]);const Z=()=>{E(null),x(!0)},I=D=>{E(D),y(!0)},q=D=>{E(D),N(!0)},O=D=>{E(D),S(!0)},ne=async D=>{try{const H=D.active?"inactive":"active",M=await Ej(D.id,H);i(n.map(ce=>ce.id===D.id?M:ce))}catch(H){f("Erreur lors de la mise à jour du statut"),console.error(H)}},_=async()=>{if(w)try{await Mj(w.id),i(n.filter(D=>D.id!==w.id)),S(!1)}catch(D){f("Erreur lors de la suppression de la promotion"),console.error(D)}},T=D=>{se===D?oe(K==="asc"?"desc":"asc"):(W(D),oe("desc"))},A=n.filter(D=>{const H=D.name.toLowerCase().includes(C.toLowerCase()),M=L==="all"||D.status===L,ce=U==="all"||D.type===U;return H&&M&&ce}).sort((D,H)=>{let M=0;switch(se){case"name":M=D.name.localeCompare(H.name);break;case"priority":M=D.priority-H.priority;break;case"created_at":M=new Date(D.created_at).getTime()-new Date(H.created_at).getTime();break;case"usage_count":M=D.usage_count-H.usage_count;break}return K==="asc"?M:-M}),P=D=>se!==D?null:K==="asc"?a.jsx(rg,{size:16}):a.jsx(ig,{size:16}),Q=D=>{const H=new Date(D);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(H)};return a.jsxs("div",{className:"promotions-page p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Gestion des promotions"}),a.jsxs("button",{onClick:Z,className:"bg-brand-primary hover:bg-brand-primary-dark text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[a.jsx(Si,{size:20}),"Nouvelle promotion"]})]}),u&&a.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:u}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",placeholder:"Rechercher une promotion...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg",value:C,onChange:D=>B(D.target.value)}),a.jsx(Qd,{className:"absolute left-3 top-2.5 text-gray-400",size:20})]})}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("select",{className:"border border-gray-300 rounded-lg px-3 py-2",value:L,onChange:D=>$(D.target.value),children:[a.jsx("option",{value:"all",children:"Tous les statuts"}),a.jsx("option",{value:"active",children:"Actives"}),a.jsx("option",{value:"inactive",children:"Inactives"}),a.jsx("option",{value:"scheduled",children:"Programmées"}),a.jsx("option",{value:"expired",children:"Expirées"})]}),a.jsxs("select",{className:"border border-gray-300 rounded-lg px-3 py-2",value:U,onChange:D=>G(D.target.value),children:[a.jsx("option",{value:"all",children:"Tous les types"}),a.jsx("option",{value:"percentage",children:"Pourcentage"}),a.jsx("option",{value:"fixed_amount",children:"Montant fixe"}),a.jsx("option",{value:"promo_code",children:"Code promo"}),a.jsx("option",{value:"buy_x_get_y",children:"2x1 / Achetez X, obtenez Y"}),a.jsx("option",{value:"free_product",children:"Produit gratuit"}),a.jsx("option",{value:"free_shipping",children:"Livraison gratuite"}),a.jsx("option",{value:"combo",children:"Combo"}),a.jsx("option",{value:"threshold",children:"Palier"}),a.jsx("option",{value:"happy_hour",children:"Happy hour"})]}),a.jsxs("button",{onClick:Y,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-2 rounded-lg flex items-center gap-2",children:[a.jsx(qv,{size:18}),a.jsx("span",{className:"hidden md:inline",children:"Actualiser"})]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-50 border-b",children:[a.jsx("th",{className:"px-4 py-3 text-left",children:a.jsxs("button",{className:"flex items-center gap-1 font-semibold text-gray-700",onClick:()=>T("name"),children:["Nom ",P("name")]})}),a.jsx("th",{className:"px-4 py-3 text-left",children:"Type"}),a.jsx("th",{className:"px-4 py-3 text-left",children:"Statut"}),a.jsx("th",{className:"px-4 py-3 text-left",children:a.jsxs("button",{className:"flex items-center gap-1 font-semibold text-gray-700",onClick:()=>T("priority"),children:["Priorité ",P("priority")]})}),a.jsx("th",{className:"px-4 py-3 text-left",children:a.jsxs("button",{className:"flex items-center gap-1 font-semibold text-gray-700",onClick:()=>T("created_at"),children:["Créée le ",P("created_at")]})}),a.jsx("th",{className:"px-4 py-3 text-left",children:a.jsxs("button",{className:"flex items-center gap-1 font-semibold text-gray-700",onClick:()=>T("usage_count"),children:["Utilisations ",P("usage_count")]})}),a.jsx("th",{className:"px-4 py-3 text-right",children:"Actions"})]})}),a.jsx("tbody",{children:o?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"px-4 py-8 text-center",children:a.jsxs("div",{className:"flex justify-center items-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-primary"}),a.jsx("span",{className:"ml-2",children:"Chargement..."})]})})}):A.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-gray-500",children:"Aucune promotion trouvée"})}):A.map(D=>a.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[a.jsxs("td",{className:"px-4 py-4",children:[a.jsx("div",{className:"font-medium",children:D.name}),D.type==="promo_code"&&D.conditions.promo_code&&a.jsxs("div",{className:"text-sm text-gray-500",children:["Code: ",a.jsx("span",{className:"font-mono bg-gray-100 px-1 rounded",children:D.conditions.promo_code})]})]}),a.jsx("td",{className:"px-4 py-4",children:a.jsxs("div",{className:"flex items-center gap-1.5",children:[Kj[D.type],a.jsx("span",{children:Xj[D.type]})]})}),a.jsx("td",{className:"px-4 py-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Qj[D.status]}`,children:Vj[D.status]})}),a.jsx("td",{className:"px-4 py-4",children:D.priority}),a.jsx("td",{className:"px-4 py-4",children:Q(D.created_at)}),a.jsx("td",{className:"px-4 py-4",children:D.usage_count}),a.jsx("td",{className:"px-4 py-4 text-right",children:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>ne(D),className:"p-1.5 rounded-md hover:bg-gray-100",title:D.status==="active"?"Désactiver":"Activer",children:D.status==="active"?a.jsx(Fy,{size:18}):a.jsx(zd,{size:18})}),a.jsx("button",{onClick:()=>q(D),className:"p-1.5 rounded-md hover:bg-gray-100",title:"Voir les détails",children:a.jsx(zd,{size:18})}),a.jsx("button",{onClick:()=>I(D),className:"p-1.5 rounded-md hover:bg-gray-100",title:"Modifier",children:a.jsx(hg,{size:18})}),a.jsx("button",{onClick:()=>O(D),className:"p-1.5 rounded-md hover:bg-gray-100 text-red-500",title:"Supprimer",children:a.jsx(kn,{size:18})})]})})]},D.id))})]})})]}),g&&a.jsx(qh,{isOpen:g,onClose:()=>x(!1),onSave:()=>{x(!1),Y()}}),p&&w&&a.jsx(qh,{isOpen:p,onClose:()=>y(!1),onSave:()=>{y(!1),Y()},promotion:w}),v&&w&&a.jsx(Fj,{isOpen:v,onClose:()=>N(!1),promotion:w}),j&&w&&a.jsx(Yj,{isOpen:j,onClose:()=>S(!1),onConfirm:_,title:"Supprimer la promotion",message:`Êtes-vous sûr de vouloir supprimer la promotion "${w.name}" ? Cette action est irréversible.`,confirmLabel:"Supprimer",cancelLabel:"Annuler",confirmButtonClass:"bg-red-600 hover:bg-red-700"})]})},Pj=({promotion:n,className:i=""})=>{const o=n.config,c=o.visuals||{};let u=c.badge_text||"",f=c.description||n.description||"";u||(o.discount_type==="percentage"?(u=`-${o.discount_value}%`,f=f||`${o.discount_value}% de descuento`):o.discount_type==="fixed_amount"?(u=`-$${o.discount_value.toLocaleString()}`,f=f||`$${o.discount_value.toLocaleString()} de descuento`):o.buy_quantity&&o.get_quantity?(u=`${o.buy_quantity}x${o.get_quantity}`,f=f||`Compra ${o.buy_quantity}, lleva ${o.get_quantity}`):o.applies_to==="shipping"?(u="ENVÍO GRATIS",f=f||"Envío gratis en este producto"):(u=n.name||"PROMO",f=f||n.name));const g=c.badge_bg_color||"#E63946",x=c.badge_bg_image,p=x?"#000000":Zg(g);return a.jsx("div",{className:`px-2 py-0.5 rounded-full font-bold text-xs shadow-sm border border-white/50 ${i}`,style:{backgroundColor:x?"transparent":g,backgroundImage:x?`url(${x})`:"none",backgroundSize:"cover",backgroundPosition:"center",color:p,textShadow:x?"0 1px 3px rgba(0,0,0,0.8)":"none"},title:f,children:u})},Jj=n=>{const[i,o]=h.useState([]),[c,u]=h.useState(!0),[f,g]=h.useState(null);h.useEffect(()=>{if(!n){o([]),u(!1);return}(async()=>{try{u(!0);const N=(await Qg().catch(j=>(console.error("[useProductPromotions] Error fetching active promotions from API:",j),[]))).filter(j=>{if(!h1(j)||!g1(j))return!1;const S=j.config||{},w=Array.isArray(j.conditions)?j.conditions:[];return!S.product_ids&&!S.category_ids&&w.length===0?!1:S.product_ids&&Array.isArray(S.product_ids)&&S.product_ids.length>0&&S.product_ids.includes(n.id)||S.category_ids&&Array.isArray(S.category_ids)&&S.category_ids.length>0&&S.category_ids.includes(n.categoria_id)?!0:w.length>0?w.some(C=>C.type==="specific_product"&&Array.isArray(C.value)?C.value.includes(n.id):C.type==="specific_category"&&Array.isArray(C.value)?C.value.includes(n.categoria_id):!1):!1}).sort((j,S)=>(S.priority||0)-(j.priority||0));o(N)}catch(y){console.error("[useProductPromotions] Error during promotion processing:",y),g(y instanceof Error?y:new Error("Une erreur est survenue")),o([])}finally{u(!1)}})()},[n]);const x=i.length>0?i[0]:null;return{promotions:i,bestPromotion:x,loading:c,error:f}},Wj=({product:n,onClick:i})=>{const{promotions:o,loading:c}=Jj(n);return a.jsxs("div",{onClick:()=>n.estado==="disponible"&&i(),className:`relative border rounded-2xl p-6 flex flex-col items-center text-center transition-shadow bg-white/90 shadow-md ${n.estado==="disponible"?"cursor-pointer hover:shadow-xl":"opacity-50"}`,children:[!c&&o.length>0&&n.estado==="disponible"&&a.jsx("div",{className:"absolute top-2 right-2 flex flex-wrap gap-1 max-w-[calc(100%-1rem)] justify-end z-10",children:o.map((u,f)=>a.jsx(Pj,{promotion:u},u.id||f))}),a.jsx("img",{src:n.image,alt:n.nom_produit,className:"w-full h-36 object-cover rounded-xl mb-4 aspect-4/3"}),a.jsx("p",{className:"font-extrabold flex-grow text-black leading-snug text-[clamp(1rem,2.2vw,1.2rem)] break-words text-balance whitespace-normal [hyphens:auto] tracking-tight",children:n.nom_produit}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 px-1 max-h-10 overflow-hidden line-clamp-2",children:n.description}),a.jsx("p",{className:"font-bold text-lg text-gray-800 mt-2",children:me(n.prix_vente)}),n.estado!=="disponible"&&a.jsx("span",{className:"text-xs text-red-500 font-bold mt-1",children:"Agotado"}),n.estado==="disponible"&&a.jsx("button",{onClick:u=>{u.stopPropagation(),i()},className:"mt-4 w-full rounded-lg bg-gradient-to-r from-orange-500 via-orange-600 to-red-600 py-2 font-bold text-white shadow-lg transition-all duration-300 hover:scale-[1.02] hover:from-orange-600 hover:via-orange-700 hover:to-red-700",children:"Agregar"})]})},e_=()=>{const[n,i]=h.useState([]),[o,c]=h.useState(!0);h.useEffect(()=>{(async()=>{try{const p=await Qg();i(p)}catch(p){console.error("Error loading promotions:",p)}finally{c(!1)}})()},[]);const u=n.filter(x=>x.type!=="promo_code");if(o||u.length===0)return null;const f=x=>{var p;return x.type==="free_shipping"?a.jsx(xg,{size:16}):x.type==="percentage"?a.jsx(jl,{size:16}):(p=x.conditions)!=null&&p.time_range?a.jsx(hs,{size:16}):x.type==="buy_x_get_y"?a.jsx(Od,{size:16}):a.jsx(wi,{size:16})},g=x=>{const p=x.discount,y=x.conditions;let v=x.description||x.name;return y!=null&&y.min_order_amount&&(v+=` (Mínimo: ${y.min_order_amount.toLocaleString()})`),y!=null&&y.time_range&&(v+=` (${y.time_range.start_time} - ${y.time_range.end_time})`),x.type==="promo_code"&&(p!=null&&p.promo_code)&&(v+=` (Código: ${p.promo_code})`),v};return a.jsxs("div",{className:"mb-4 space-y-2",children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center drop-shadow-md",children:[a.jsx(Od,{className:"mr-2",size:22}),"Promociones Activas"]}),a.jsx("div",{className:"space-y-2",children:u.map(x=>{var N,j,S,w;const p=((N=x.visuals)==null?void 0:N.badge_bg_color)||"#4CAF50",y=(j=x.visuals)==null?void 0:j.banner_image,v=(S=x.visuals)==null?void 0:S.banner_text;return y?a.jsxs("div",{className:"relative overflow-hidden rounded-lg shadow-md transition-transform hover:scale-[1.02]",children:[a.jsx("img",{src:y,alt:x.name,className:"w-full h-32 object-cover"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent flex items-end p-3",children:a.jsxs("div",{className:"text-white",children:[a.jsx("p",{className:"font-bold text-lg drop-shadow-md",children:x.name}),v&&a.jsx("p",{className:"text-sm drop-shadow-md",children:v})]})})]},x.id):a.jsxs("div",{className:"flex items-center rounded-lg shadow-sm transition-transform hover:scale-[1.01] overflow-hidden",style:{borderLeftColor:p,background:`linear-gradient(to right, ${p}15, white)`},children:[a.jsx("div",{className:"flex items-center justify-center w-10 h-10 flex-shrink-0",style:{backgroundColor:p,color:((w=x.visuals)==null?void 0:w.badge_color)||"#FFFFFF"},children:f(x)}),"              ",a.jsxs("div",{className:"flex-1 px-2 py-1 flex items-center justify-between",children:[a.jsx("p",{className:"font-bold text-gray-900 text-sm",children:x.name}),a.jsx("p",{className:"text-xs text-gray-600 truncate ml-2",children:g(x)})]})]})})})]})},t_=({isOpen:n,order:i,whatsappNumber:o="573238090562"})=>{var g;const c=Xs();if(!n||!i)return null;const u=()=>{var G,se,W,K,oe,Y;const x=i.items.filter(Z=>{var I;return!((I=Z.nom_produit)!=null&&I.toLowerCase().includes("domicilio"))}),p=x.map(Z=>`- ${Z.quantite}x ${Z.nom_produit} (${me(Z.prix_unitaire)})`).join(`
`),y=x.reduce((Z,I)=>Z+(I.quantite??0),0),v=i.subtotal??x.reduce((Z,I)=>Z+(I.quantite??0)*I.prix_unitaire,0),N=typeof i.date_creation=="number"?new Date(i.date_creation):void 0,j=N?new Intl.DateTimeFormat("es-CO",{day:"2-digit",month:"2-digit",year:"numeric"}).format(N):"No disponible",S=N?new Intl.DateTimeFormat("es-CO",{hour:"2-digit",minute:"2-digit"}).format(N):"No disponible",w=((G=i.clientInfo)==null?void 0:G.nom)??i.client_name??"No especificado",E=((se=i.clientInfo)==null?void 0:se.telephone)??i.client_phone??"No especificado",C=((W=i.clientInfo)==null?void 0:W.adresse)??i.client_address,B=i.total_discount??0,L=(((K=i.applied_promotions)==null?void 0:K.length)??0)>0,$=i.payment_method==="transferencia"?"Transferencia":i.payment_method==="tarjeta"?"Tarjeta":"Efectivo",U=[];return U.push("¡Hola! Aquí están los detalles de mi pedido:"),U.push(`Pedido #${i.id.slice(-6)}`),U.push(`Fecha: ${j}`),U.push(`Hora: ${S}`),U.push(""),U.push(`Cliente: ${w}`),U.push(`Teléfono: ${E}`),C&&U.push(`Dirección: ${C}`),U.push(""),U.push(`Número de productos: ${y}`),p&&(U.push("Productos:"),U.push(p)),U.push(""),U.push(`Total antes de promociones: ${me(v)}`),i.shipping_cost!==void 0&&(i.shipping_cost>0?U.push(`Costo de envío: ${me(i.shipping_cost)}`):(oe=i.applied_promotions)!=null&&oe.some(Z=>Z.type==="FREE_SHIPPING")&&U.push("Costo de envío: Gratis")),B>0&&U.push(`Descuento total: -${me(B)}`),L?(U.push("Promociones aplicadas:"),(Y=i.applied_promotions)==null||Y.forEach(Z=>{U.push(`- ${Z.name}: -${me(Z.discount_amount)}`)})):U.push("Promociones aplicadas: Ninguna"),U.push(`Total a pagar: ${me(i.total)}`),U.push(`Método de pago: ${$}`),i.receipt_url&&U.push(`Comprobante: ${i.receipt_url}`),encodeURIComponent(U.join(`
`))},f=()=>{const x=u(),p=`https://wa.me/${o}?text=${x}`;window.open(p,"_blank"),c("/",{replace:!0}),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)};return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-md overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 p-6 text-white",children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx(jn,{size:64,className:"mb-3"}),a.jsx("h2",{className:"text-2xl font-bold text-center",children:"¡Pedido Confirmado!"}),a.jsxs("p",{className:"text-green-100 mt-2",children:["Pedido #",i.id.slice(-6)]})]})}),a.jsxs("div",{className:"p-6 text-center",children:[a.jsxs("div",{className:"p-6 text-left",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Détails de la commande:"}),a.jsxs("div",{className:"space-y-2",children:[i.items.filter(x=>{var p;return!((p=x.nom_produit)!=null&&p.toLowerCase().includes("domicilio"))}).map((x,p)=>a.jsxs("div",{className:"flex justify-between items-center text-gray-700",children:[a.jsxs("span",{children:[x.quantite,"x ",x.nom_produit]}),a.jsx("span",{children:me(x.quantite*x.prix_unitaire)})]},p)),i.subtotal!==void 0&&a.jsxs("div",{className:"flex justify-between items-center text-gray-700 border-t pt-2 mt-2",children:[a.jsx("span",{children:"Sous-total:"}),a.jsx("span",{children:me(i.subtotal)})]}),i.total_discount&&i.total_discount>0&&a.jsxs("div",{className:"flex justify-between items-center text-green-600",children:[a.jsx("span",{children:"Réduction totale:"}),a.jsxs("span",{children:["- ",me(i.total_discount)]})]}),i.applied_promotions&&i.applied_promotions.length>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("p",{className:"text-sm font-semibold text-green-700",children:"Promotions appliquées:"}),i.applied_promotions.map((x,p)=>a.jsxs("div",{className:"flex justify-between items-center text-xs text-green-600 ml-2",children:[a.jsxs("span",{children:["- ",x.name]}),a.jsxs("span",{children:["- ",me(x.discount_amount)]})]},p))]}),i.shipping_cost!==void 0&&i.shipping_cost>0&&a.jsxs("div",{className:"flex justify-between items-center text-gray-700",children:[a.jsx("span",{children:"Frais de livraison:"}),a.jsx("span",{children:me(i.shipping_cost)})]}),i.shipping_cost===0&&((g=i.applied_promotions)==null?void 0:g.some(x=>x.type==="FREE_SHIPPING"))&&a.jsxs("div",{className:"flex justify-between items-center text-green-600",children:[a.jsx("span",{children:"Livraison gratuite:"}),a.jsx("span",{children:me(0)})]}),a.jsxs("div",{className:"flex justify-between items-center text-gray-900 font-bold text-xl border-t pt-2 mt-2",children:[a.jsx("span",{children:"Total:"}),a.jsx("span",{children:me(i.total)})]})]})]}),a.jsxs("button",{onClick:f,className:"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-4 px-6 rounded-lg flex items-center justify-center gap-3 transition-all transform hover:scale-105 shadow-lg",children:[a.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"Enviar por WhatsApp"]}),a.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"Haz clic para enviar tu pedido por WhatsApp y ver el seguimiento"})]})]})})},gi=8e3,Pg="Domicilio",Bh=n=>n.nom_produit===Pg,Ih=n=>(n??"").trim(),a_=(n,i)=>{const o=[...n??[]].sort(),c=[...i??[]].sort();return o.length!==c.length?!1:o.every((u,f)=>u===c[f])},s_=({isOpen:n,onClose:i,selectedProduct:o,onAddToCart:c})=>{var S;const[u,f]=h.useState(1),[g,x]=h.useState(""),[p,y]=h.useState([]);if(h.useEffect(()=>{n&&(f((o==null?void 0:o.quantite)||1),x((o==null?void 0:o.commentaire)||""),y((o==null?void 0:o.excluded_ingredients)||[]))},[n,o]),!n||!o)return null;const v=()=>{const w=o.product;c({id:`oi${Date.now()}`,produitRef:w.id,nom_produit:w.nom_produit,prix_unitaire:w.prix_vente,quantite:u,commentaire:g.trim()||void 0,excluded_ingredients:p.length>0?p:void 0})},N=w=>{p.includes(w)?y(p.filter(E=>E!==w)):y([...p,w])},j=((S=o.product.ingredients)==null?void 0:S.split(",").map(w=>w.trim()).filter(Boolean))||[];return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("h2",{className:"text-[clamp(1.1rem,2.3vw,1.5rem)] font-bold leading-snug text-gray-800 break-words text-balance whitespace-normal [hyphens:auto]",children:o.product.nom_produit}),a.jsx("button",{onClick:i,className:"text-gray-500 hover:text-gray-700",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("img",{src:o.product.image,alt:o.product.nom_produit,className:"w-full h-48 object-cover rounded-lg mb-4"}),a.jsx("p",{className:"text-gray-600 mb-4",children:o.product.description}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("p",{className:"font-bold text-gray-800 mb-2",children:["Precio: ",me(o.product.prix_vente)]}),a.jsxs("div",{className:"flex items-center mt-2",children:[a.jsx("button",{onClick:()=>f(Math.max(1,u-1)),className:"bg-gray-200 text-gray-700 rounded-l-lg px-3 py-1",children:"-"}),a.jsx("span",{className:"bg-gray-100 px-4 py-1",children:u}),a.jsx("button",{onClick:()=>f(u+1),className:"bg-gray-200 text-gray-700 rounded-r-lg px-3 py-1",children:"+"})]})]}),j.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsx("p",{className:"font-bold text-gray-800 mb-2",children:"Ingredientes:"}),a.jsx("div",{className:"space-y-2",children:j.map((w,E)=>a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:`ingredient-${E}`,checked:!p.includes(w),onChange:()=>N(w),className:"mr-2"}),a.jsx("label",{htmlFor:`ingredient-${E}`,className:"text-gray-700",children:w})]},E))})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"comment",className:"block font-bold text-gray-800 mb-2",children:"Comentarios adicionales:"}),a.jsx("textarea",{id:"comment",value:g,onChange:w=>x(w.target.value),className:"w-full border border-gray-300 rounded-lg p-2 text-gray-700",rows:3,placeholder:"Instrucciones especiales, alergias, etc."})]}),a.jsxs("button",{onClick:v,className:"w-full rounded-lg bg-gradient-to-r from-orange-500 via-orange-600 to-red-600 py-3 px-4 font-bold text-white shadow-lg transition-all duration-300 hover:scale-[1.02] hover:from-orange-600 hover:via-orange-700 hover:to-red-700 focus:outline-none focus:ring-2 focus:ring-orange-400/70 focus:ring-offset-2",children:["Agregar al carrito - ",me(o.product.prix_vente*u)]})]})})})},n_=({onOrderSubmitted:n})=>{const i=Xs(),{content:o}=Ti(),c=o??Cn,u=h.useMemo(()=>eu(c.hero.style,c.hero.backgroundImage),[c.hero.backgroundImage,c.hero.style]),[f,g]=h.useState([]),[x,p]=h.useState([]),[y,v]=h.useState(!0),[N,j]=h.useState(null),[S,w]=h.useState("all"),[E,C]=h.useState([]),[B,L]=h.useState(!1),[$,U]=h.useState(null),[G,se]=h.useState(""),[W,K]=h.useState(""),[oe,Y]=h.useState(""),[Z,I]=h.useState("transferencia"),[q,O]=h.useState(null),[ne,_]=h.useState(!1),[T,A]=h.useState(!1),[P,Q]=h.useState(null),[D,H]=h.useState([]),[M,ce]=h.useState(""),[de,be]=h.useState(""),[te,re]=h.useState(""),[xe,Ne]=h.useState(0),[ze,Ve]=h.useState(!1),[Dt,xt]=h.useState(!1),[zt,ge]=h.useState(()=>new Date),ke=h.useRef(new Map);h.useEffect(()=>{if(typeof window>"u")return;const ie=()=>ge(new Date);ie();const Se=window.setInterval(ie,6e4);return()=>window.clearInterval(Se)},[]);const Ae=c.onlineOrdering.schedule;h.useMemo(()=>su(Ae,"fr-FR",zt),[Ae.startTime,Ae.endTime,Ae.dailySchedules,zt]);const Me=oo(Ae,zt),Je=Fg(Ae,zt),it=h.useMemo(()=>{if(Je===null)return null;if(Je<1)return"Réouverture imminente";if(Je<60)return`Réouverture dans environ ${Je} min`;const ie=Math.floor(Je/60),Se=Je%60;return Se===0?`Réouverture dans environ ${ie} h`:`Réouverture dans environ ${ie} h ${Se.toString().padStart(2,"0")} min`},[Je]),[St,aa]=h.useState(8e4),[Qe,ua]=h.useState("pedir_en_linea");h.useEffect(()=>{Z==="efectivo"&&I("transferencia")},[Z]),h.useEffect(()=>{(async()=>{try{const[Se,Ke]=await Promise.all([ye.getProducts(),ye.getCategories()]);g(Se),p(Ke);try{const We=localStorage.getItem("customer-order-history");if(We){const et=JSON.parse(We);H(et.slice(0,3))}}catch(We){console.error("Error fetching order history:",We)}}catch(Se){console.error("Error fetching data:",Se),j("Error al cargar los datos. Por favor, intenta de nuevo más tarde.")}finally{v(!1)}})()},[]);const Ca=h.useMemo(()=>S==="all"?f:f.filter(ie=>ie.categoria_id===S),[f,S]),[ht,sa]=h.useState({subtotal:0,total:0,automaticPromotionsDiscount:0,promoCodeDiscount:0,deliveryFee:0,appliedPromotions:[]}),ue=h.useCallback(async()=>{var De;const ie=E.reduce((mt,Bt)=>mt+Bt.quantite*Bt.prix_unitaire,0);if(E.length===0){sa({subtotal:0,total:0,automaticPromotionsDiscount:0,promoCodeDiscount:0,deliveryFee:0,appliedPromotions:[]}),xt(!1);return}const Ke=await Cj({id:"temp",items:E,subtotal:ie,total:ie,total_discount:0,applied_promotions:[],promo_code:de||void 0,client_name:G,client_phone:W,client_address:oe,shipping_cost:gi}),We=Ke.total_discount||0,et=((De=Ke.applied_promotions.find(mt=>{var Bt;return((Bt=mt.config)==null?void 0:Bt.promo_code)===de}))==null?void 0:De.discount_amount)||0,Ct=We-et;let ma=Qe==="pedir_en_linea"?gi:0;const Ks=Ke.applied_promotions.some(mt=>mt.type==="FREE_SHIPPING");Ks&&(ma=0),xt(Ks);const je=Ke.total+ma;sa({subtotal:ie,total:je,automaticPromotionsDiscount:Ct,promoCodeDiscount:et,deliveryFee:ma,appliedPromotions:Ke.applied_promotions})},[E,de,Qe,G,W,oe,Z,gi]);h.useEffect(()=>{ue()},[ue]);const{total:pe,subtotal:we,promoCodeDiscount:$e,deliveryFee:Ge}=ht,Xe=ie=>{const Se=E.find(Ke=>Ke.produitRef===ie.id);U({product:ie,quantite:1,commentaire:Se==null?void 0:Se.commentaire,excluded_ingredients:Se==null?void 0:Se.excluded_ingredients}),L(!0)},Ee=h.useCallback(ie=>{C(Se=>{const Ke=Se.findIndex(We=>We.produitRef===ie.produitRef&&Ih(We.commentaire)===Ih(ie.commentaire)&&a_(We.excluded_ingredients,ie.excluded_ingredients));if(Ke>-1){const We=[...Se],et=We[Ke];return We[Ke]={...et,quantite:et.quantite+ie.quantite,commentaire:ie.commentaire??et.commentaire,excluded_ingredients:ie.excluded_ingredients??et.excluded_ingredients},We}return[...Se,ie]}),L(!1)},[C,L]);h.useCallback(ie=>{C(Se=>Se.filter(Ke=>Ke.id!==ie))},[C]);const Be=h.useCallback((ie,Se)=>{const Ke=ke.current.get(ie);Ke&&clearTimeout(Ke),C(et=>et.map(Ct=>{if(Ct.id===ie){const ma=Math.max(0,Ct.quantite+Se);return{...Ct,quantite:ma}}return Ct}));const We=setTimeout(()=>{C(et=>et.filter(Ct=>Ct.quantite>0)),ke.current.delete(ie)},300);ke.current.set(ie,We)},[C]),yt=ie=>{const Se=ie.items.filter(Ke=>!Bh(Ke));C(Se)},rt=async()=>{const ie=M.trim().toUpperCase();if(ie){if(de&&de===ie){re("Este código ya está aplicado.");return}ce(ie),re(""),Ve(!0);try{if(!await Kg(ie)){re("Código promocional inválido o expirado.");return}be(ie)}catch(Se){console.error("Error validating promo code:",Se),re("No se pudo validar el código. Intenta nuevamente.")}finally{Ve(!1)}}},qt=()=>{be(""),ce(""),re("")},ka=async ie=>{ie.preventDefault(),_(!0);let Se="";if(Z==="transferencia"&&q)try{Se=await Wh(q)}catch(We){console.error("Error uploading receipt:",We),j("Error al subir el comprobante de pago."),_(!1);return}const Ke={id:`ord_${Date.now()}`,items:E,clientInfo:{nom:G,telephone:W,adresse:oe},shipping_cost:Ge,order_type:Qe,payment_method:Z,receipt_url:Se,subtotal:ht.subtotal,total:ht.total,total_discount:ht.automaticPromotionsDiscount+ht.promoCodeDiscount,promo_code:de||void 0,applied_promotions:ht.appliedPromotions,status:"pending",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};console.log("finalOrder.total avant createOrder:",Ke.total),console.log("orderTotals:",ht);try{const We=await ye.createOrder(Ke);console.log("submitted.total après createOrder:",We.total),Q(We),A(!0),Qh(We.id,Date.now()+Vh),n==null||n(We);try{const et=localStorage.getItem("customer-order-history"),Ct=et?JSON.parse(et):[],ma=[We,...Ct].slice(0,10);localStorage.setItem("customer-order-history",JSON.stringify(ma)),H(ma.slice(0,3))}catch(et){console.error("Error updating order history:",et)}}catch(We){console.error("Error submitting order:",We),j("Error al enviar el pedido. Por favor, intenta de nuevo.")}finally{_(!1)}},Ua=G.trim()===""||W.trim()===""||Qe==="pedir_en_linea"&&oe.trim()===""||Z==="transferencia"&&!q,Qt=ne||E.length===0||Ua,Yt=!ne&&E.length>0&&Ua;return Me?a.jsxs("div",{className:"min-h-screen flex flex-col lg:flex-row",style:u,children:[a.jsxs("div",{class:"flex-1 p-4 lg:p-8 bg-white",children:[a.jsxs("div",{class:"flex items-center justify-between mb-6 bg-white p-3 rounded-lg shadow-md",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 drop-shadow-md",children:"Realizar Pedido"}),a.jsxs("button",{type:"button",onClick:()=>i("/"),className:"inline-flex items-center text-sm font-semibold text-brand-primary hover:text-brand-primary/80 transition-colors",children:[a.jsx(ng,{size:14,className:"mr-1"}),"Volver"]})]}),a.jsx("div",{class:"bg-white p-4 rounded-lg shadow-md",children:a.jsx(e_,{})}),a.jsxs("div",{className:"flex space-x-3 mb-6 overflow-x-auto pb-2 p-4 rounded-lg shadow-md bg-white",children:[a.jsx("button",{onClick:()=>w("all"),className:`px-5 py-2 rounded-full text-sm font-bold transition-all ${S==="all"?"bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg scale-105 border-2 border-orange-600":"bg-white text-gray-800 shadow-md hover:bg-gray-100 border-2 border-gray-300"}`,children:"Todos"}),x.map(ie=>a.jsx("button",{onClick:()=>w(ie.id),className:`px-5 py-2 rounded-full text-sm font-bold transition-all ${S===ie.id?"bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg scale-105 border-2 border-orange-600":"bg-white text-gray-800 shadow-md hover:bg-gray-100 border-2 border-gray-300"}`,children:ie.nom},ie.id))]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:Ca.map(ie=>ie&&a.jsx(Wj,{product:ie,onClick:()=>Xe(ie)},ie.id))})]}),a.jsxs("div",{className:"lg:w-96 flex flex-col",children:[a.jsxs("div",{className:"bg-white p-4 lg:p-6 shadow-lg flex flex-col",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900 drop-shadow-md mb-4",children:"Mon panier"}),D.length>0&&a.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[a.jsx("h3",{className:"text-sm font-bold text-gray-700 mb-2",children:"Tus últimos pedidos"}),a.jsx("div",{className:"space-y-2",children:D.map(ie=>{let Se="Fecha no disponible";const Ke=ie.created_at||ie.date_commande||ie.date_servido||ie.timestamp;if(Ke)try{const et=new Date(Ke);isNaN(et.getTime())||(Se=et.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"}))}catch(et){console.error("Error parsing date:",et)}Se==="Fecha no disponible"&&(Se=new Date().toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"}));const We=ie.items?ie.items.filter(et=>!Bh(et)).reduce((et,Ct)=>et+Ct.quantite,0):0;return a.jsxs("div",{className:"flex justify-between items-center bg-white p-2 rounded border border-gray-200 hover:border-yellow-500 transition-all",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("p",{className:"text-xs font-bold text-gray-800 truncate",children:["Pedido del ",Se]}),a.jsxs("p",{className:"text-xs text-gray-600",children:[We," article",We>1?"s":""," • ",me(ie.total)]})]}),a.jsx("button",{onClick:()=>yt(ie),className:"ml-2 bg-yellow-400 hover:bg-yellow-500 text-gray-900 font-bold px-3 py-1 rounded text-xs whitespace-nowrap transition-all",children:"Pedir de nuevo"})]},ie.id)})})]}),E.length===0?a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-500",children:[a.jsx(fg,{size:48,className:"mb-3"}),a.jsx("p",{children:"Tu carrito está vacío."})]}):a.jsx("div",{className:"flex-1 overflow-y-auto pr-2 -mr-2",children:E.map(ie=>a.jsx("div",{className:"group relative mb-3 rounded-lg bg-gradient-to-r from-orange-400 to-red-400 border-2 border-orange-500 px-4 py-4 text-white shadow-md transition-shadow hover:shadow-lg",children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex-1 space-y-2",children:["                                        ",a.jsxs("p",{className:"text-[clamp(1rem,2vw,1.3rem)] leading-snug text-white break-words text-balance whitespace-normal [hyphens:auto]",children:["                                          ",(ie==null?void 0:ie.nom_produit)||"Article inconnu"]}),ie.commentaire&&a.jsxs("p",{className:"text-sm text-gray-600 italic bg-gray-50 border-l-2 border-brand-primary/50 p-2 rounded",children:["💬 ",ie.commentaire]}),ie.excluded_ingredients&&ie.excluded_ingredients.length>0&&a.jsxs("p",{className:"text-sm text-gray-700 font-semibold bg-gray-50 border-l-2 border-red-500/50 p-2 rounded",children:["🚫 Sin: ",ie.excluded_ingredients.join(", ")]})]}),a.jsx("div",{className:"flex flex-col items-center gap-2",children:a.jsxs("div",{className:"flex items-center gap-2 rounded-full bg-white px-2 py-1 text-sm font-semibold border border-gray-300 text-gray-800",children:[a.jsx("button",{onClick:()=>Be(ie.id,-1),className:"rounded-full p-1 transition hover:bg-gray-200","aria-label":"Disminuir cantidad",children:a.jsx(mg,{size:14})}),a.jsx("span",{className:"min-w-[1.5rem] text-center text-base font-bold text-gray-800",children:ie.quantite}),a.jsx("button",{onClick:()=>Be(ie.id,1),className:"rounded-full p-1 transition hover:bg-gray-200","aria-label":"Aumentar cantidad",children:a.jsx(Si,{size:14})})]})})]})},ie.id))}),E.length>0&&Qe==="pedir_en_linea"&&a.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-200 last:border-b-0",children:[a.jsx("p",{className:"font-medium text-gray-800",children:Pg}),Dt?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("p",{className:"text-sm text-gray-400 line-through",children:me(gi)}),a.jsx("p",{className:"text-sm font-bold text-green-600",children:"GRATIS"})]}):a.jsx("p",{className:"text-sm text-gray-600",children:me(gi)})]}),a.jsxs("div",{className:"mt-auto pt-4 border-t border-gray-200",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"promoCode",className:"block text-sm font-medium text-gray-700 mb-2",children:"Código de Promoción:"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("input",{type:"text",id:"promoCode",value:M,onChange:ie=>ce(ie.target.value.toUpperCase()),placeholder:"Ingresa tu código",className:"flex-1 border border-gray-300 rounded-md shadow-sm p-2 uppercase"}),a.jsx("button",{type:"button",onClick:rt,disabled:ze||!M.trim()||de===M,"aria-busy":ze,className:"rounded-md bg-gradient-to-r from-orange-500 via-orange-600 to-red-600 px-4 py-2 font-bold text-white shadow-sm transition-all duration-300 hover:from-orange-600 hover:via-orange-700 hover:to-red-700 focus:outline-none focus:ring-2 focus:ring-orange-400 disabled:cursor-not-allowed disabled:opacity-50",children:ze?"Validando…":"Confirmar"})]}),te&&a.jsx("p",{className:"mt-2 text-sm text-red-600",children:te}),de&&a.jsxs("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded-md flex items-center justify-between",children:[a.jsxs("span",{className:"text-sm text-green-700 font-medium",children:['✓ Código "',de,'" aplicado']}),a.jsx("button",{type:"button",onClick:qt,className:"text-red-500 hover:text-red-700 text-sm font-medium",children:"Eliminar"})]})]}),ht.appliedPromotions&&ht.appliedPromotions.length>0&&a.jsxs("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:[a.jsx("p",{className:"text-sm font-bold text-green-800 mb-2",children:"🎉 Promociones aplicadas:"}),ht.appliedPromotions.map((ie,Se)=>{const Ke=`- ${me(ie.discount_amount)}`;return Qe==="a_emporter"?a.jsxs("div",{className:"mb-2 text-sm text-green-700",children:[a.jsx("p",{className:"font-semibold",children:ie.name}),a.jsx("p",{className:"font-semibold",children:Ke})]},Se):a.jsxs("div",{className:"flex justify-between items-center mb-1 text-sm",children:[a.jsx("span",{className:"text-green-700",children:ie.name}),a.jsx("span",{className:"font-semibold text-green-700",children:Ke})]},Se)})]}),xe>0&&a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("p",{className:"text-sm text-green-600",children:"Descuento por código promocional:"}),a.jsxs("p",{className:"text-sm font-bold text-green-600",children:["- ",me(xe)]})]}),a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("p",{className:"text-lg font-bold text-gray-800",children:"Total:"}),a.jsx("p",{className:"text-3xl font-bold text-brand-primary",children:me(pe)})]}),a.jsxs("form",{onSubmit:ka,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de pedido:"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:`flex items-center p-3 border-2 rounded-lg cursor-pointer transition ${Qe==="pedir_en_linea"?"border-brand-primary bg-brand-primary/5":"border-gray-300 hover:border-brand-primary/50"}`,children:[a.jsx("input",{type:"radio",name:"orderType",value:"pedir_en_linea",checked:Qe==="pedir_en_linea",onChange:()=>ua("pedir_en_linea"),className:"form-radio text-brand-primary"}),a.jsx("span",{className:"ml-3 font-medium",children:"🚚 Domicilio (con entrega)"})]}),a.jsxs("label",{className:`flex items-center p-3 border-2 rounded-lg cursor-pointer transition ${Qe==="a_emporter"?"border-brand-primary bg-brand-primary/5":"border-gray-300 hover:border-brand-primary/50"}`,children:[a.jsx("input",{type:"radio",name:"orderType",value:"a_emporter",checked:Qe==="a_emporter",onChange:()=>ua("a_emporter"),className:"form-radio text-brand-primary"}),a.jsx("span",{className:"ml-3 font-medium",children:"🏪 Para llevar (recoger en tienda)"})]})]})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"clientName",className:"block text-sm font-medium text-gray-700",children:["Nombre: ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",id:"clientName",value:G,onChange:ie=>se(ie.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"clientPhone",className:"block text-sm font-medium text-gray-700",children:["Teléfono: ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"tel",id:"clientPhone",value:W,onChange:ie=>K(ie.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",required:!0})]}),Qe==="pedir_en_linea"&&a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"clientAddress",className:"block text-sm font-medium text-gray-700",children:["Dirección: ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("textarea",{id:"clientAddress",value:oe,onChange:ie=>Y(ie.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",rows:3,required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Método de pago:"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:`flex items-center p-3 border-2 rounded-lg cursor-pointer transition ${Z==="transferencia"?"border-brand-primary bg-brand-primary/5":"border-gray-300 hover:border-brand-primary/50"}`,children:[a.jsx("input",{type:"radio",name:"paymentMethod",value:"transferencia",checked:Z==="transferencia",onChange:()=>I("transferencia"),className:"form-radio text-brand-primary"}),a.jsx("span",{className:"ml-3 font-medium",children:"💰 Transferencia Bancaria"})]}),a.jsxs("label",{className:"flex items-center rounded-lg border-2 border-gray-200 bg-gray-100 p-3 opacity-70 cursor-not-allowed","aria-disabled":"true",children:[a.jsx("input",{type:"radio",name:"paymentMethod",value:"efectivo",checked:Z==="efectivo",onChange:()=>{},disabled:!0,className:"form-radio text-gray-400"}),a.jsxs("span",{className:"ml-3 font-medium text-gray-500",children:[a.jsx("span",{children:"💵 Efectivo"}),a.jsx("span",{className:"block text-xs font-normal uppercase tracking-wide text-gray-500/80",children:"No disponible por el momento"})]})]})]})]}),Z==="transferencia"&&a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"paymentProof",className:"block text-sm font-medium text-gray-700",children:["Comprobante de pago: ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"file",id:"paymentProof",onChange:ie=>O(ie.target.files?ie.target.files[0]:null),className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",accept:"image/*,application/pdf",required:!0})]}),a.jsx("button",{type:"submit",disabled:Qt,className:"w-full bg-gradient-to-r from-blue-500 to-indigo-600 text-white font-bold py-3 px-4 rounded-lg hover:from-blue-600 hover:to-indigo-700 transition-all shadow-lg transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:ne?"Enviando pedido...":"Confirmar Pedido"}),Yt&&a.jsxs("p",{className:"mt-2 text-sm text-red-600",children:["Faltan datos obligatorios. Completa los campos marcados con ",a.jsx("span",{className:"font-semibold",children:"*"}),"."]})]})]})]}),$&&a.jsx(s_,{isOpen:B,onClose:()=>L(!1),selectedProduct:$,onAddToCart:Ee}),P&&a.jsx(t_,{isOpen:T,order:P,onClose:()=>{A(!1),C([]),se(""),K(""),Y(""),I("transferencia"),O(null),be(""),Ne(0)}})]})]}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-600 via-red-600 to-rose-600",children:a.jsx("div",{className:"mx-auto flex min-h-screen max-w-3xl flex-col items-center justify-center px-6 py-16 text-center text-white",children:a.jsxs("div",{className:"w-full rounded-3xl border border-white/20 bg-black/30 p-10 shadow-2xl backdrop-blur-xl",children:[a.jsx("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-white/15 text-white",children:a.jsx(hs,{size:32})}),a.jsx("h1",{className:"mt-6 text-3xl font-bold sm:text-4xl",children:c.onlineOrdering.closedTitle}),a.jsx("p",{className:"mt-3 text-lg text-white/85",children:c.onlineOrdering.closedSubtitle||"Consultez nos horaires ci-dessous pour passer commande."}),Ae.dailySchedules&&a.jsxs("div",{className:"mt-6 space-y-3",children:[a.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.3em] text-white/70",children:"Horaires d'ouverture"}),a.jsx("div",{className:"mx-auto max-w-md space-y-2",children:Object.entries(Ae.dailySchedules).map(([ie,Se])=>{const Ke={monday:"Lundi",tuesday:"Mardi",wednesday:"Mercredi",thursday:"Jeudi",friday:"Vendredi",saturday:"Samedi",sunday:"Dimanche"};return a.jsxs("div",{className:"flex justify-between items-center rounded-lg border border-white/20 bg-white/10 px-4 py-2 backdrop-blur",children:[a.jsx("span",{className:"font-medium text-white",children:Ke[ie]}),a.jsx("span",{className:"font-semibold text-white/90",children:Se.enabled?`${Se.startTime} – ${Se.endTime}`:"Fermé"})]},ie)})})]}),it&&a.jsx("p",{className:"mt-4 text-sm font-medium text-white/80",children:it}),a.jsx("div",{className:"mt-8 flex flex-col gap-3 sm:flex-row sm:justify-center",children:a.jsx("button",{type:"button",onClick:()=>i("/"),className:"inline-flex items-center justify-center rounded-full border border-white/30 bg-white/10 px-6 py-3 text-sm font-semibold uppercase tracking-[0.25em] text-white transition hover:bg-white/20 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/70 focus-visible:ring-offset-2 focus-visible:ring-offset-red-600",children:"Retour à l'accueil"})})]})})})},l_=()=>a.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-100 text-center",children:[a.jsx("h1",{className:"text-9xl font-extrabold text-brand-primary tracking-widest",children:"404"}),a.jsx("div",{className:"bg-brand-accent px-2 text-sm rounded rotate-12 absolute",children:"Page Non Trouvée"}),a.jsx("p",{className:"text-2xl md:text-3xl font-light text-gray-700 mt-4",children:"Désolé, la page que vous recherchez n'existe pas."}),a.jsx(vb,{to:"/",className:"mt-8 px-8 py-3 bg-brand-primary text-brand-secondary font-semibold rounded-lg hover:bg-yellow-400 transition",children:"Retour à l'accueil"})]}),i_=new Intl.NumberFormat("es-CO",{maximumFractionDigits:2}),r_=new Intl.NumberFormat("es-CO",{maximumFractionDigits:0}),Hh=n=>i_.format(Number.isFinite(n)?n:0),gn=n=>r_.format(Number.isFinite(n)?Math.round(n):0),pl={all:"Toutes",efectivo:"Efectivo",transferencia:"Transferencia",tarjeta:"Tarjeta",unknown:"Non spécifié"},$h={sur_place:"En el local",a_emporter:"Para llevar",pedir_en_linea:"Pedido en línea"},o_=()=>{const[n,i]=h.useState([]),[o,c]=h.useState([]),[u,f]=h.useState([]),[g,x]=h.useState([]),[p,y]=h.useState(!0),[v,N]=h.useState(null),[j,S]=h.useState(null),[w,E]=h.useState({startDate:"",endDate:"",paymentMethod:"all",orderType:"all",categoryId:"",productId:""}),C=h.useCallback(async()=>{y(!0);try{const[_,T,A,P]=await Promise.all([ye.getFinalizedOrders(),ye.getSalesHistory(),ye.getProducts(),ye.getCategories()]);i([..._].sort((Q,D)=>D.date_creation-Q.date_creation)),c(T),f(A),x(P),N(null)}catch(_){console.error("Failed to fetch sales summary",_),N("Impossible de charger les données de ventes. Veuillez réessayer.")}finally{y(!1)}},[]);h.useEffect(()=>{C()},[C]),h.useEffect(()=>{const _=ye.notifications.subscribe("orders_updated",()=>{C()});return()=>{_()}},[C]);const B=h.useMemo(()=>new Map(n.map(_=>[_.id,_])),[n]),L=h.useMemo(()=>{if(!w.startDate)return null;const _=new Date(w.startDate);return _.setHours(0,0,0,0),_.getTime()},[w.startDate]),$=h.useMemo(()=>{if(!w.endDate)return null;const _=new Date(w.endDate);return _.setHours(23,59,59,999),_.getTime()},[w.endDate]),U=h.useMemo(()=>o.filter(_=>{if(L!==null&&_.saleDate<L||$!==null&&_.saleDate>$||w.paymentMethod!=="all"&&_.paymentMethod!==w.paymentMethod||w.categoryId&&_.categoryId!==w.categoryId||w.productId&&_.productId!==w.productId)return!1;const T=B.get(_.orderId);return!(!T||w.orderType!=="all"&&T.type!==w.orderType||w.paymentMethod!=="all"&&T.payment_method&&T.payment_method!==w.paymentMethod)}),[o,L,$,w.paymentMethod,w.categoryId,w.productId,w.orderType,B]),G=h.useMemo(()=>{const _=new Map;return U.forEach(T=>{const A=_.get(T.orderId),P=T.totalPrice??0,Q=T.profit??0,D=T.quantity??0;if(!A){_.set(T.orderId,{revenue:P,profit:Q,quantity:D,paymentMethod:T.paymentMethod,items:[{productId:T.productId,productName:T.productName,categoryName:T.categoryName,quantity:T.quantity,revenue:P,profit:Q}]});return}A.revenue+=P,A.profit+=Q,A.quantity+=D,!A.paymentMethod&&T.paymentMethod&&(A.paymentMethod=T.paymentMethod);const H=A.items.findIndex(M=>M.productId===T.productId);H>-1?A.items[H]={...A.items[H],quantity:A.items[H].quantity+T.quantity,revenue:A.items[H].revenue+P,profit:A.items[H].profit+Q}:A.items.push({productId:T.productId,productName:T.productName,categoryName:T.categoryName,quantity:T.quantity,revenue:P,profit:Q})}),_.forEach(T=>{T.items.sort((A,P)=>P.revenue-A.revenue)}),_},[U]),se=h.useMemo(()=>n.filter(_=>G.has(_.id)).sort((_,T)=>T.date_creation-_.date_creation),[n,G]),W=h.useMemo(()=>{const _=U.reduce((D,H)=>D+(H.totalPrice??0),0),T=U.reduce((D,H)=>D+(H.totalCost??0),0),A=U.reduce((D,H)=>D+(H.profit??0),0),P=U.reduce((D,H)=>D+(H.quantity??0),0),Q=se.length;return{totalRevenue:_,totalCost:T,totalProfit:A,totalQuantity:P,orderCount:Q,averageOrderValue:Q>0?_/Q:0,averageItemsPerOrder:Q>0?P/Q:0,profitMargin:_>0?A/_*100:0}},[U,se]),K=h.useMemo(()=>{const _=new Map;return U.forEach(T=>{const A=T.productId,P=_.get(A);if(!P){_.set(A,{productId:T.productId,productName:T.productName,categoryName:T.categoryName,quantity:T.quantity,revenue:T.totalPrice??0,profit:T.profit??0});return}P.quantity+=T.quantity,P.revenue+=T.totalPrice??0,P.profit+=T.profit??0}),Array.from(_.values()).sort((T,A)=>A.revenue-T.revenue)},[U]),oe=h.useMemo(()=>{const _=new Map;return U.forEach(T=>{const A=T.categoryId||"unknown",P=_.get(A);if(!P){_.set(A,{categoryName:T.categoryName||"Sin categoría",quantity:T.quantity,revenue:T.totalPrice??0,profit:T.profit??0});return}P.quantity+=T.quantity,P.revenue+=T.totalPrice??0,P.profit+=T.profit??0}),Array.from(_.values()).sort((T,A)=>A.revenue-T.revenue)},[U]),Y=h.useMemo(()=>{const _=new Map;return U.forEach(T=>{const A=T.paymentMethod??"unknown",P=_.get(A);if(!P){_.set(A,{revenue:T.totalPrice??0,profit:T.profit??0,orders:new Set([T.orderId])});return}P.revenue+=T.totalPrice??0,P.profit+=T.profit??0,P.orders.add(T.orderId)}),Array.from(_.entries()).map(([T,A])=>({method:T,label:pl[T]??pl.unknown,revenue:A.revenue,profit:A.profit,orders:A.orders.size})).sort((T,A)=>A.revenue-T.revenue)},[U]),Z=h.useMemo(()=>[...g].sort((_,T)=>_.nom.localeCompare(T.nom,"es")),[g]),I=h.useMemo(()=>{const{categoryId:_}=w;return[..._?u.filter(A=>A.categoria_id===_):u].sort((A,P)=>A.nom_produit.localeCompare(P.nom_produit,"es"))},[u,w.categoryId]),q=_=>{const{name:T,value:A}=_.target;E(P=>{if(T==="categoryId"){const Q={...P,categoryId:A,productId:P.productId};if(A&&P.productId){const D=u.find(H=>H.id===P.productId);(!D||D.categoria_id!==A)&&(Q.productId="")}return Q}if(T==="productId"){if(!A)return{...P,productId:""};const Q=u.find(D=>D.id===A);return{...P,productId:A,categoryId:Q?Q.categoria_id:P.categoryId}}return T==="paymentMethod"&&(A==="all"||A==="efectivo"||A==="transferencia"||A==="tarjeta")?{...P,paymentMethod:A}:T==="orderType"&&(A==="all"||A==="sur_place"||A==="a_emporter"||A==="pedir_en_linea")?{...P,orderType:A}:{...P,[T]:A}}),S(null)},O=()=>{E({startDate:"",endDate:"",paymentMethod:"all",orderType:"all",categoryId:"",productId:""}),S(null)},ne=()=>{if(U.length===0)return;const _=["Fecha","Pedido","Tipo","Mesa/Cliente","Producto","Categoría","Cantidad","Precio unitario","Ingresos","Costo","Beneficio","Método de pago"],T=U.map(H=>{const M=B.get(H.orderId),ce=M?$h[M.type]:"N/A",de=M?M.type==="sur_place"?M.table_nom||"N/A":M.client_name||M.client_address||"N/A":"N/A";return[new Date(H.saleDate).toLocaleString("es-CO"),H.orderId,ce,`"${de}"`,`"${H.productName}"`,H.categoryName||"N/A",H.quantity,me(H.unitPrice??0),me(H.totalPrice??0),me(H.totalCost??0),me(H.profit??0),pl[H.paymentMethod??"unknown"]??pl.unknown].join(",")}),A=[_.join(","),...T].join(`
`),P=new Blob([`﻿${A}`],{type:"text/csv;charset=utf-8;"}),Q=URL.createObjectURL(P),D=document.createElement("a");D.href=Q,D.download=`resume_ventes_${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(D),D.click(),document.body.removeChild(D),URL.revokeObjectURL(Q)};return p?a.jsx("div",{className:"text-gray-800",children:"Chargement du résumé des ventes..."}):a.jsxs("div",{className:"space-y-6",children:[v&&a.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4 text-sm text-red-700",children:v}),a.jsxs("section",{className:"rounded-xl bg-white p-4 shadow-md",children:[a.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Filtres d'analyse"}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsxs("button",{type:"button",onClick:O,className:"inline-flex items-center gap-2 rounded-lg border border-gray-300 px-3 py-2 text-sm font-medium text-gray-700 transition hover:bg-gray-100",children:[a.jsx(Xy,{size:16}),"Réinitialiser"]}),a.jsxs("button",{type:"button",onClick:ne,className:"inline-flex items-center gap-2 rounded-lg bg-green-600 px-3 py-2 text-sm font-semibold text-white transition hover:bg-green-700",children:[a.jsx(By,{size:16}),"Export CSV"]})]})]}),a.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-3",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Date de début"}),a.jsx("input",{type:"date",name:"startDate",value:w.startDate,onChange:q,className:"mt-1 rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-brand-primary focus:outline-none focus:ring-brand-primary"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Date de fin"}),a.jsx("input",{type:"date",name:"endDate",value:w.endDate,onChange:q,className:"mt-1 rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-brand-primary focus:outline-none focus:ring-brand-primary"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Type de commande"}),a.jsxs("select",{name:"orderType",value:w.orderType,onChange:q,className:"mt-1 rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-brand-primary focus:outline-none focus:ring-brand-primary",children:[a.jsx("option",{value:"all",children:"Tous les types"}),a.jsx("option",{value:"sur_place",children:"En el local"}),a.jsx("option",{value:"a_emporter",children:"Para llevar"}),a.jsx("option",{value:"pedir_en_linea",children:"Pedido en línea"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Méthode de paiement"}),a.jsxs("select",{name:"paymentMethod",value:w.paymentMethod,onChange:q,className:"mt-1 rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-brand-primary focus:outline-none focus:ring-brand-primary",children:[a.jsx("option",{value:"all",children:"Toutes"}),a.jsx("option",{value:"efectivo",children:"Efectivo"}),a.jsx("option",{value:"transferencia",children:"Transferencia"}),a.jsx("option",{value:"tarjeta",children:"Tarjeta"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Catégorie"}),a.jsxs("select",{name:"categoryId",value:w.categoryId,onChange:q,className:"mt-1 rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-brand-primary focus:outline-none focus:ring-brand-primary",children:[a.jsx("option",{value:"",children:"Toutes"}),Z.map(_=>a.jsx("option",{value:_.id,children:_.nom},_.id))]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Produit"}),a.jsxs("select",{name:"productId",value:w.productId,onChange:q,className:"mt-1 rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-brand-primary focus:outline-none focus:ring-brand-primary",children:[a.jsx("option",{value:"",children:"Tous les produits"}),I.map(_=>a.jsx("option",{value:_.id,children:_.nom_produit},_.id))]})]})]})]}),a.jsx("section",{children:a.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-4",children:[a.jsxs("div",{className:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Chiffre d'affaires"}),a.jsx("p",{className:"mt-1 text-2xl font-bold text-gray-900",children:me(W.totalRevenue)})]}),a.jsx("div",{className:"rounded-full bg-brand-primary/10 p-3 text-brand-primary",children:a.jsx(gg,{size:20})})]}),a.jsx("p",{className:"mt-3 text-xs text-gray-500",children:"Basé sur les articles correspondant aux filtres appliqués."})]}),a.jsxs("div",{className:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Bénéfice"}),a.jsx("p",{className:"mt-1 text-2xl font-bold text-gray-900",children:me(W.totalProfit)})]}),a.jsx("div",{className:"rounded-full bg-emerald-500/10 p-3 text-emerald-600",children:a.jsx(Dv,{size:20})})]}),a.jsxs("p",{className:"mt-3 text-xs text-gray-500",children:["Marge moyenne : ",Hh(W.profitMargin),"%"]})]}),a.jsxs("div",{className:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Commandes"}),a.jsx("p",{className:"mt-1 text-2xl font-bold text-gray-900",children:gn(W.orderCount)})]}),a.jsx("div",{className:"rounded-full bg-indigo-500/10 p-3 text-indigo-600",children:a.jsx(Qs,{size:20})})]}),a.jsxs("p",{className:"mt-3 text-xs text-gray-500",children:["Panier moyen : ",me(W.averageOrderValue)]})]}),a.jsxs("div",{className:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Articles vendus"}),a.jsx("p",{className:"mt-1 text-2xl font-bold text-gray-900",children:gn(W.totalQuantity)})]}),a.jsx("div",{className:"rounded-full bg-amber-500/10 p-3 text-amber-600",children:a.jsx(ph,{size:20})})]}),a.jsxs("p",{className:"mt-3 text-xs text-gray-500",children:["Moyenne par commande : ",Hh(W.averageItemsPerOrder)]})]})]})}),a.jsxs("section",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[a.jsxs("div",{className:"rounded-xl bg-white p-4 shadow-md",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Répartition par méthode de paiement"}),a.jsx(gy,{size:18,className:"text-brand-primary"})]}),a.jsx("div",{className:"mt-4 overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"border-b text-xs uppercase text-gray-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-2",children:"Méthode"}),a.jsx("th",{className:"p-2 text-right",children:"Ventes"}),a.jsx("th",{className:"p-2 text-right",children:"Bénéfice"}),a.jsx("th",{className:"p-2 text-right",children:"Commandes"})]})}),a.jsx("tbody",{children:Y.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"p-4 text-center text-sm text-gray-500",children:"Aucune donnée pour les filtres sélectionnés."})}):Y.map(_=>a.jsxs("tr",{className:"border-b last:border-b-0",children:[a.jsx("td",{className:"p-2 text-sm font-medium text-gray-800",children:_.label}),a.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:me(_.revenue)}),a.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:me(_.profit)}),a.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:gn(_.orders)})]},_.method))})]})})]}),a.jsxs("div",{className:"rounded-xl bg-white p-4 shadow-md",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Répartition par catégorie"}),a.jsx(ph,{size:18,className:"text-brand-primary"})]}),a.jsx("div",{className:"mt-4 overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"border-b text-xs uppercase text-gray-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-2",children:"Catégorie"}),a.jsx("th",{className:"p-2 text-right",children:"Quantité"}),a.jsx("th",{className:"p-2 text-right",children:"Ventes"}),a.jsx("th",{className:"p-2 text-right",children:"Bénéfice"})]})}),a.jsx("tbody",{children:oe.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"p-4 text-center text-sm text-gray-500",children:"Aucune donnée pour les filtres sélectionnés."})}):oe.map(_=>a.jsxs("tr",{className:"border-b last:border-b-0",children:[a.jsx("td",{className:"p-2 text-sm font-medium text-gray-800",children:_.categoryName}),a.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:gn(_.quantity)}),a.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:me(_.revenue)}),a.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:me(_.profit)})]},_.categoryName))})]})})]})]}),a.jsxs("section",{className:"rounded-xl bg-white p-4 shadow-md",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Produits les plus performants"}),a.jsx(Qs,{size:18,className:"text-brand-primary"})]}),a.jsx("div",{className:"mt-4 overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"border-b text-xs uppercase text-gray-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-2",children:"Produit"}),a.jsx("th",{className:"p-2",children:"Catégorie"}),a.jsx("th",{className:"p-2 text-right",children:"Quantité"}),a.jsx("th",{className:"p-2 text-right",children:"Ventes"}),a.jsx("th",{className:"p-2 text-right",children:"Bénéfice"})]})}),a.jsx("tbody",{children:K.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"p-4 text-center text-sm text-gray-500",children:"Aucun produit trouvé pour les filtres sélectionnés."})}):K.map(_=>a.jsxs("tr",{className:"border-b last:border-b-0",children:[a.jsx("td",{className:"p-2 text-sm font-medium text-gray-800",children:_.productName}),a.jsx("td",{className:"p-2 text-sm text-gray-700",children:_.categoryName||"Sin categoría"}),a.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:gn(_.quantity)}),a.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:me(_.revenue)}),a.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:me(_.profit)})]},_.productId))})]})})]}),a.jsxs("section",{className:"rounded-xl bg-white p-4 shadow-md",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Détails des commandes"}),a.jsx("div",{className:"mt-4 overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"border-b text-xs uppercase text-gray-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"w-12 p-3"}),a.jsx("th",{className:"p-3",children:"Date"}),a.jsx("th",{className:"p-3",children:"Type"}),a.jsx("th",{className:"p-3",children:"Table/Client"}),a.jsx("th",{className:"p-3 text-right",children:"Articles"}),a.jsx("th",{className:"p-3 text-right",children:"Ventes"}),a.jsx("th",{className:"p-3 text-right",children:"Bénéfice"}),a.jsx("th",{className:"p-3",children:"Paiement"})]})}),a.jsx("tbody",{children:se.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:8,className:"p-6 text-center text-sm text-gray-500",children:"Aucune commande ne correspond aux filtres sélectionnés."})}):se.map(_=>{const T=G.get(_.id);if(!T)return null;const A=j===_.id,P=_.type==="sur_place"?a.jsxs("span",{className:"inline-flex items-center gap-1.5 rounded-full bg-blue-100 px-2 py-1 text-xs font-medium text-blue-800",children:[a.jsx(vi,{size:12}),"En el local"]}):a.jsxs("span",{className:"inline-flex items-center gap-1.5 rounded-full bg-purple-100 px-2 py-1 text-xs font-medium text-purple-800",children:[a.jsx(Xd,{size:12}),$h[_.type]]}),Q=_.type==="sur_place"?_.table_nom||"N/A":_.client_name||_.client_address||"N/A",D=pl[T.paymentMethod??_.payment_method??"unknown"]??pl.unknown;return a.jsxs(Sa.Fragment,{children:[a.jsxs("tr",{onClick:()=>S(A?null:_.id),className:"cursor-pointer border-b transition hover:bg-gray-50",children:[a.jsx("td",{className:"p-3 align-top",children:A?a.jsx(ig,{size:16}):a.jsx(_y,{size:16})}),a.jsx("td",{className:"p-3 text-sm text-gray-700",children:new Date(_.date_creation).toLocaleString("es-CO")}),a.jsx("td",{className:"p-3",children:P}),a.jsx("td",{className:"p-3 text-sm font-semibold text-gray-900",children:Q}),a.jsx("td",{className:"p-3 text-right text-sm text-gray-700",children:gn(T.quantity)}),a.jsx("td",{className:"p-3 text-right text-sm font-semibold text-gray-900",children:me(T.revenue)}),a.jsx("td",{className:"p-3 text-right text-sm font-semibold text-emerald-600",children:me(T.profit)}),a.jsx("td",{className:"p-3 text-sm text-gray-700",children:D})]}),A&&a.jsx("tr",{className:"bg-gray-50",children:a.jsx("td",{colSpan:8,className:"p-4",children:a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[a.jsxs("h4",{className:"text-sm font-semibold text-gray-800",children:["Articles inclus (",T.items.length,")"]}),a.jsx("div",{className:"mt-3 overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"border-b text-xs uppercase text-gray-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-2",children:"Produit"}),a.jsx("th",{className:"p-2",children:"Catégorie"}),a.jsx("th",{className:"p-2 text-right",children:"Quantité"}),a.jsx("th",{className:"p-2 text-right",children:"Ventes"}),a.jsx("th",{className:"p-2 text-right",children:"Bénéfice"})]})}),a.jsx("tbody",{children:T.items.map(H=>a.jsxs("tr",{className:"border-b last:border-b-0",children:[a.jsx("td",{className:"p-2 text-sm font-medium text-gray-800",children:H.productName}),a.jsx("td",{className:"p-2 text-sm text-gray-700",children:H.categoryName||"Sin categoría"}),a.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:gn(H.quantity)}),a.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:me(H.revenue)}),a.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:me(H.profit)})]},H.productId))})]})})]})})})]},_.id)})})]})})]})]})},Zr="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-200 bg-white text-slate-600 transition hover:border-brand-primary/50 hover:text-brand-primary focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-brand-primary disabled:opacity-50",c_=({id:n,value:i,fallback:o,onChange:c,className:u,placeholder:f})=>{const g=h.useRef(null),[x,p]=h.useState(()=>((i==null?void 0:i.plainText)??o).trim().length===0),y=()=>{const L=g.current;if(!L){p(!0);return}const $=L.textContent??"";p($.trim().length===0)};h.useEffect(()=>{const L=g.current;if(L){if(i&&typeof i.html=="string"){L.innerHTML!==i.html&&(L.innerHTML=i.html),y();return}L.textContent!==o&&(L.textContent=o,y())}},[i,o]);const v=()=>{const L=g.current;if(!L){c(null),p(!0);return}const $=L.innerHTML,U=L.innerText,G=Kd({html:$,plainText:U});c(G),y()},N=L=>{var $;document.execCommand("styleWithCSS",!1,"false"),document.execCommand(L),($=g.current)==null||$.focus(),v()},j=L=>{var U;const $=L.target.value;document.execCommand("styleWithCSS",!1,"true"),document.execCommand("foreColor",!1,$),(U=g.current)==null||U.focus(),v()},S=()=>{var L;document.execCommand("removeFormat"),document.execCommand("unlink"),(L=g.current)==null||L.focus(),v()},w=()=>{v()},E=()=>{v()},C=L=>{L.preventDefault();const $=L.clipboardData.getData("text/plain");document.execCommand("insertText",!1,$),v()},B=L=>{if((L.metaKey||L.ctrlKey)&&L.key.toLowerCase()==="b"){L.preventDefault(),N("bold");return}if((L.metaKey||L.ctrlKey)&&L.key.toLowerCase()==="i"){L.preventDefault(),N("italic");return}(L.metaKey||L.ctrlKey)&&L.key.toLowerCase()==="x"&&L.shiftKey&&(L.preventDefault(),N("strikeThrough"))};return a.jsxs("div",{className:`space-y-2 ${u??""}`,children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("button",{type:"button",className:Zr,onClick:()=>N("bold"),"aria-label":"Mettre en gras",children:a.jsx(iy,{className:"h-4 w-4","aria-hidden":"true"})}),a.jsx("button",{type:"button",className:Zr,onClick:()=>N("italic"),"aria-label":"Mettre en italique",children:a.jsx(sv,{className:"h-4 w-4","aria-hidden":"true"})}),a.jsx("button",{type:"button",className:Zr,onClick:()=>N("strikeThrough"),"aria-label":"Barrer",children:a.jsx(Wv,{className:"h-4 w-4","aria-hidden":"true"})}),a.jsxs("label",{className:"flex items-center gap-2 text-xs font-medium text-slate-500",children:[a.jsx(Cv,{className:"h-4 w-4","aria-hidden":"true"}),a.jsx("span",{className:"sr-only",children:"Choisir une couleur"}),a.jsx("input",{type:"color",className:"h-8 w-8 cursor-pointer rounded-full border border-slate-200",onChange:j,"aria-label":"Sélectionner une couleur de texte"})]}),a.jsx("button",{type:"button",className:Zr,onClick:S,"aria-label":"Supprimer la mise en forme",children:a.jsx(fs,{className:"h-4 w-4","aria-hidden":"true"})})]}),a.jsxs("div",{className:"relative",children:[f&&x&&a.jsx("div",{className:"pointer-events-none absolute left-4 top-3 text-sm text-slate-400",children:f}),a.jsx("div",{id:n,ref:g,className:"ui-textarea w-full min-h-[120px] whitespace-pre-wrap break-words px-4 py-3",contentEditable:!0,role:"textbox","aria-multiline":"true",suppressContentEditableWarning:!0,onInput:w,onBlur:E,onKeyDown:B,onPaste:C})]})]})},d_=["Inter","Poppins","Roboto","Montserrat","Playfair Display","Lora","Open Sans","Georgia, serif","Arial, sans-serif"],u_=["14px","16px","18px","20px","24px","clamp(1rem, 2vw, 1.5rem)"],Hd=["#0f172a","#111827","#f8fafc","#ffffff","#e2e8f0","#f97316","transparent","currentColor"],m_="#ffffff",f_=n=>/^#(?:[0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(n.trim());new Set(_1);const p_={"navigation.brand":"Nom de la marque","navigation.brandLogo":"Logo principal","navigation.staffLogo":"Logo d'accès équipe","navigation.links.home":"Lien Accueil","navigation.links.about":"Lien À propos","navigation.links.menu":"Lien Menu","navigation.links.contact":"Lien Contact","navigation.links.loginCta":"Bouton d'accès staff","navigation.style.background":"Fond de la navigation","hero.title":"Titre du hero","hero.subtitle":"Sous-titre du hero","hero.ctaLabel":"Bouton principal du hero","hero.historyTitle":"Titre de l'historique","hero.reorderCtaLabel":"Bouton de réassort","hero.backgroundImage":"Image du hero","hero.style.background":"Fond du hero","about.title":"Titre À propos","about.description":"Texte À propos","about.image":"Image À propos","about.style.background":"Fond À propos","menu.title":"Titre du menu","menu.ctaLabel":"Bouton du menu","menu.loadingLabel":"Texte de chargement du menu","menu.image":"Image du menu","menu.style.background":"Fond du menu","instagramReviews.title":"Titre Avis Instagram","instagramReviews.subtitle":"Sous-titre Avis Instagram","instagramReviews.image":"Image centrale Avis Instagram","instagramReviews.style.background":"Fond Avis Instagram","findUs.title":"Titre Encuéntranos","findUs.addressLabel":"Libellé de l'adresse (Encuéntranos)","findUs.address":"Adresse (Encuéntranos)","findUs.cityLabel":"Libellé de contact","findUs.city":"Email (Encuéntranos)","findUs.hoursLabel":"Libellé des horaires","findUs.hours":"Horaires","findUs.mapLabel":"Libellé du lien carte","findUs.style.background":"Fond Encuéntranos","footer.text":"Texte du pied de page","footer.style.background":"Fond du pied de page"},h_={...p_},g_=[{id:"preview",label:"Aperçu"},{id:"custom",label:"Personnalisation"}],x_=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`asset-${Date.now()}-${Math.random().toString(36).slice(2,10)}`,Ei=n=>{var u;const{type:i,name:o}=n;if(i.startsWith("image/"))return"image";if(i.startsWith("video/"))return"video";if(i.startsWith("audio/"))return"audio";if(i.includes("font"))return"font";const c=(u=o.split(".").pop())==null?void 0:u.toLowerCase();return c&&["ttf","otf","woff","woff2"].includes(c)?"font":"raw"},Pr=n=>typeof globalThis.structuredClone=="function"?globalThis.structuredClone(n):JSON.parse(JSON.stringify(n)),Jg=(n,i,o)=>{const c=i.split("."),u=c.pop();if(!u)return;let f=n;c.forEach(g=>{if(f&&typeof f=="object"){const x=f[g];x&&typeof x=="object"?f[g]=Array.isArray(x)?[...x]:{...x}:f[g]={},f=f[g]}}),f&&typeof f=="object"&&(f[u]=o)},Gh=(n,i,o)=>{const c={};o.fontFamily&&o.fontFamily.trim().length>0&&(c.fontFamily=o.fontFamily.trim()),o.fontSize&&o.fontSize.trim().length>0&&(c.fontSize=o.fontSize.trim()),o.textColor&&o.textColor.trim().length>0&&(c.textColor=o.textColor.trim()),o.backgroundColor&&o.backgroundColor.trim().length>0&&(c.backgroundColor=o.backgroundColor.trim());const u={...n.elementStyles};Object.keys(c).length===0?delete u[i]:u[i]=c,n.elementStyles=u},Fh=(n,i,o)=>{const c={...n.elementRichText};o&&o.html.trim().length>0?c[i]=o:delete c[i],n.elementRichText=c},b_=(n,i,o)=>{const c=Ya(i),u={...n[c]},f={...u.style,background:{...o}};u.style=f,n[c]=u},y_=(n,i)=>{var f;const o=((f=n.assets)==null?void 0:f.library)??[],c=o.findIndex(g=>g.url===i.url||g.id===i.id),u=c>=0?o.map((g,x)=>x===c?i:g):[...o,i];n.assets={...n.assets,library:u}},Wg=(n,i)=>{const o=i.split(".");let c=n;for(const u of o){if(!c||typeof c!="object")return"";c=c[u]}return typeof c=="string"?c:""},v_=(n,i)=>{const o=Wg(n,i);return o.trim().length>0?o:null},j_=(n,i)=>n.elementStyles[i]??{},__=(n,i)=>n.elementRichText[i]??null,N_=(n,i)=>{const o=Ya(i);return n[o].style.background},co=(n,i)=>{const o=n.name.replace(/\.[^/.]+$/,"").trim()||"media",c=Ei(n),u=c==="font"?Wd(o):o;return{id:x_(),name:u,url:i,format:n.type||"application/octet-stream",bytes:n.size,type:c,createdAt:new Date().toISOString()}},w_=n=>{if(n===0)return"0 o";const i=["o","Ko","Mo","Go"],o=Math.min(Math.floor(Math.log(n)/Math.log(1024)),i.length-1),c=n/Math.pow(1024,o);return`${c.toFixed(c>=10||o===0?0:1)} ${i[o]}`},S_=[{id:"navigation",title:"Navigation",description:"Logos, liens principaux et fond du menu supérieur.",groups:[{id:"navigation-main",title:"Contenu principal",fields:[{id:"navigation-brand",type:"text",element:"navigation.brand",label:"Nom de la marque"},{id:"navigation-home",type:"text",element:"navigation.links.home",label:"Libellé du lien Accueil"},{id:"navigation-about",type:"text",element:"navigation.links.about",label:"Libellé du lien À propos"},{id:"navigation-menu",type:"text",element:"navigation.links.menu",label:"Libellé du lien Menu"},{id:"navigation-contact",type:"text",element:"navigation.links.contact",label:"Libellé du lien Contact"},{id:"navigation-login",type:"text",element:"navigation.links.loginCta",label:"Texte du bouton d'accès staff"}]},{id:"navigation-branding",title:"Identité visuelle",fields:[{id:"navigation-brand-logo",type:"image",element:"navigation.brandLogo",label:"Logo principal",description:"PNG ou SVG recommandé pour un rendu net sur tous les écrans."},{id:"navigation-staff-logo",type:"image",element:"navigation.staffLogo",label:"Logo d'accès équipe",description:"S'affiche pour le bouton d'accès staff si disponible."}]},{id:"navigation-background",title:"Fond et mise en forme",fields:[{id:"navigation-style-background",type:"background",element:"navigation.style.background",label:"Fond du bandeau"}]}]},{id:"hero",title:"Section Hero",description:"Grand bandeau d’ouverture avec accroche et image de fond.",groups:[{id:"hero-content",title:"Contenu",fields:[{id:"hero-title",type:"text",element:"hero.title",label:"Titre principal",allowRichText:!0,showStyleOptions:!0,multiline:!0},{id:"hero-subtitle",type:"text",element:"hero.subtitle",label:"Sous-titre",allowRichText:!0,showStyleOptions:!0,multiline:!0},{id:"hero-cta",type:"text",element:"hero.ctaLabel",label:"Bouton principal"},{id:"hero-history",type:"text",element:"hero.historyTitle",label:"Titre du bloc historique",multiline:!0},{id:"hero-reorder",type:"text",element:"hero.reorderCtaLabel",label:"Bouton de réassort"}]},{id:"hero-visuals",title:"Visuels et ambiance",fields:[{id:"hero-background-image",type:"image",element:"hero.backgroundImage",label:"Image de fond",description:"Utilisez des images haute résolution. Optimisation Cloudinary recommandée."},{id:"hero-background-style",type:"background",element:"hero.style.background",label:"Couleurs et ambiance"}]}]},{id:"about",title:"Section À propos",description:"Présentation de votre histoire et visuels associés.",groups:[{id:"about-content",title:"Contenu",fields:[{id:"about-title",type:"text",element:"about.title",label:"Titre",showStyleOptions:!0},{id:"about-description",type:"text",element:"about.description",label:"Texte descriptif",allowRichText:!0,multiline:!0,showStyleOptions:!0}]},{id:"about-visuals",title:"Visuels",fields:[{id:"about-image",type:"image",element:"about.image",label:"Image principale",description:"Photo illustrative de votre établissement ou de vos produits."},{id:"about-background",type:"background",element:"about.style.background",label:"Fond de section"}]}]},{id:"menu",title:"Section Menu",description:"Mettre en avant vos plats signatures et CTA vers la commande.",groups:[{id:"menu-content",title:"Contenu",fields:[{id:"menu-title",type:"text",element:"menu.title",label:"Titre du menu",showStyleOptions:!0},{id:"menu-cta",type:"text",element:"menu.ctaLabel",label:"Texte du bouton",showStyleOptions:!0},{id:"menu-loading",type:"text",element:"menu.loadingLabel",label:"Message de chargement",multiline:!0}]},{id:"menu-visuals",title:"Visuels",fields:[{id:"menu-image",type:"image",element:"menu.image",label:"Image d’illustration"},{id:"menu-background",type:"background",element:"menu.style.background",label:"Fond de section"}]}]},{id:"instagram",title:"Section Avis Instagram",description:"Personnalisez le carrousel social, ses textes et ses visuels.",groups:[{id:"instagram-header",title:"En-tête de section",fields:[{id:"instagram-title",type:"text",element:"instagramReviews.title",label:"Titre de la section",showStyleOptions:!0},{id:"instagram-subtitle",type:"text",element:"instagramReviews.subtitle",label:"Sous-titre",allowRichText:!0,multiline:!0},{id:"instagram-image",type:"image",element:"instagramReviews.image",label:"Image centrale",description:"Illustration affichée à droite du carrousel."},{id:"instagram-background",type:"background",element:"instagramReviews.style.background",label:"Fond de section"}]},...Ci.map((n,i)=>({id:`instagram-review-${n}`,title:`Carte témoignage ${i+1}`,description:"Personnalisez le contenu de la carte et les médias associés (avatar, visuel de post, mise en avant).",fields:[{id:`instagram-review-${n}-name`,type:"text",element:`instagramReviews.reviews.${n}.name`,label:"Nom"},{id:`instagram-review-${n}-handle`,type:"text",element:`instagramReviews.reviews.${n}.handle`,label:"Handle Instagram"},{id:`instagram-review-${n}-timeAgo`,type:"text",element:`instagramReviews.reviews.${n}.timeAgo`,label:"Durée depuis la publication"},{id:`instagram-review-${n}-message`,type:"text",element:`instagramReviews.reviews.${n}.message`,label:"Message principal",multiline:!0,allowRichText:!0},{id:`instagram-review-${n}-highlight`,type:"text",element:`instagramReviews.reviews.${n}.highlight`,label:"Message mis en avant",multiline:!0},{id:`instagram-review-${n}-highlight-caption`,type:"text",element:`instagramReviews.reviews.${n}.highlightCaption`,label:"Description du highlight",multiline:!0},{id:`instagram-review-${n}-badge`,type:"text",element:`instagramReviews.reviews.${n}.badgeLabel`,label:"Badge"},{id:`instagram-review-${n}-location`,type:"text",element:`instagramReviews.reviews.${n}.location`,label:"Localisation"},{id:`instagram-review-${n}-avatar`,type:"image",element:`instagramReviews.reviews.${n}.avatarUrl`,label:"Avatar"},{id:`instagram-review-${n}-highlight-image`,type:"image",element:`instagramReviews.reviews.${n}.highlightImageUrl`,label:"Image highlight"},{id:`instagram-review-${n}-post-image`,type:"image",element:`instagramReviews.reviews.${n}.postImageUrl`,label:"Image du post"},{id:`instagram-review-${n}-post-alt`,type:"text",element:`instagramReviews.reviews.${n}.postImageAlt`,label:"Texte alternatif de l'image du post"}]}))]},{id:"find-us",title:"Section Encuéntranos",description:"Coordonnées, horaires et informations de contact.",groups:[{id:"find-us-content",title:"Contenu",fields:[{id:"find-us-title",type:"text",element:"findUs.title",label:"Titre",showStyleOptions:!0},{id:"find-us-address-label",type:"text",element:"findUs.addressLabel",label:"Libellé de l'adresse"},{id:"find-us-address",type:"text",element:"findUs.address",label:"Adresse complète",multiline:!0},{id:"find-us-city-label",type:"text",element:"findUs.cityLabel",label:"Libellé de contact"},{id:"find-us-city",type:"text",element:"findUs.city",label:"Contact (mail ou téléphone)"},{id:"find-us-hours-label",type:"text",element:"findUs.hoursLabel",label:"Libellé des horaires"},{id:"find-us-hours",type:"text",element:"findUs.hours",label:"Horaires détaillés",multiline:!0},{id:"find-us-map-label",type:"text",element:"findUs.mapLabel",label:"Libellé du lien carte"}]},{id:"find-us-background",title:"Fond",fields:[{id:"find-us-style-background",type:"background",element:"findUs.style.background",label:"Personnalisation du fond"}]}]},{id:"footer",title:"Pied de page",description:"Dernière section visible de la page d’accueil.",groups:[{id:"footer-content",title:"Contenu",fields:[{id:"footer-text",type:"text",element:"footer.text",label:"Texte du pied de page",multiline:!0,allowRichText:!0,showStyleOptions:!0}]},{id:"footer-background",title:"Fond",fields:[{id:"footer-style-background",type:"background",element:"footer.style.background",label:"Couleur ou image de fond"}]}]}],kd=({element:n,label:i,description:o,isActive:c,register:u,onFocus:f,children:g})=>{const x=h.useCallback(p=>{u(n,p)},[n,u]);return a.jsxs("div",{ref:x,className:`group relative rounded-3xl border p-6 transition shadow-sm focus-within:ring-2 focus-within:ring-brand-primary/60 ${c?"border-brand-primary/80 ring-1 ring-brand-primary/40":"border-slate-200 hover:border-slate-300"}`,tabIndex:-1,onFocusCapture:()=>f(n),onMouseEnter:()=>f(n),children:[a.jsxs("div",{className:"mb-4 flex items-start justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-base font-semibold text-slate-900",children:i}),o&&a.jsx("p",{className:"mt-1 text-sm text-slate-500",children:o})]}),c&&a.jsx("span",{className:"rounded-full bg-brand-primary/10 px-3 py-1 text-xs font-medium text-brand-primary",children:"Sélectionné"})]}),a.jsx("div",{className:"space-y-4",children:g})]})},C_=({element:n,draft:i,onApply:o,fontOptions:c,onAssetAdded:u,multiline:f=!1,allowRichText:g=!0,showStyleOptions:x=!1,placeholder:p})=>{const y=Wg(i,n),v=__(i,n),N=j_(i,n),[j,S]=h.useState(y),[w,E]=h.useState(v),[C,B]=h.useState(!!v),[L,$]=h.useState(N.fontFamily??""),[U,G]=h.useState(N.fontSize??""),[se,W]=h.useState(N.textColor??""),[K,oe]=h.useState(N.backgroundColor??""),[Y,Z]=h.useState(null),[I,q]=h.useState(!1);h.useEffect(()=>{S(y),E(v),B(!!v),$(N.fontFamily??""),G(N.fontSize??""),W(N.textColor??""),oe(N.backgroundColor??"")},[y,v,N.fontFamily,N.fontSize,N.textColor,N.backgroundColor]);const O=h.useCallback(()=>{const A=j;o(P=>(Jg(P,n,A),Fh(P,n,C?w:null),x&&Gh(P,n,{fontFamily:L,fontSize:U,textColor:se,backgroundColor:K}),P))},[K,n,L,U,C,o,j,w,x,se]),ne=h.useCallback(()=>{$(""),G(""),W(""),oe(""),o(A=>(Gh(A,n,{}),A))},[n,o]),_=()=>{C?(B(!1),E(null),o(A=>(Fh(A,n,null),A))):B(!0)},T=async A=>{var Q;const P=(Q=A.target.files)==null?void 0:Q[0];if(P){Z(null),q(!0);try{const D=await yl(P,{tags:[Ei(P)]}),H=co(P,D);u(H),$(H.name)}catch(D){Z(D instanceof Error?D.message:"Impossible de téléverser la police. Réessayez plus tard.")}finally{q(!1),A.target.value=""}}};return a.jsxs("div",{className:"space-y-5",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-slate-700",htmlFor:`${n}-input`,children:"Contenu"}),f?a.jsx("textarea",{id:`${n}-input`,className:"ui-textarea w-full",rows:4,value:j,placeholder:p,onChange:A=>S(A.target.value)}):a.jsx("input",{id:`${n}-input`,className:"ui-input w-full",value:j,placeholder:p,onChange:A=>S(A.target.value)})]}),g&&a.jsxs("div",{className:"space-y-3 rounded-2xl border border-slate-200 bg-slate-50/70 p-4",children:[a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Mise en forme avancée"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Activez l’éditeur riche pour ajouter du gras, de l’italique et des liens."})]}),a.jsx("button",{type:"button",className:"ui-btn-secondary whitespace-nowrap",onClick:_,children:C?"Désactiver":"Activer"})]}),C&&a.jsx(c_,{id:`${n}-rich`,value:w,fallback:j,onChange:A=>{E(A),A&&S(A.plainText)},className:"rounded-xl border border-slate-200 bg-white",placeholder:"Saisissez votre texte..."})]}),x&&a.jsxs("div",{className:"space-y-4 rounded-2xl border border-slate-200 p-4",children:[a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"Style du texte"}),a.jsx("button",{type:"button",className:"text-sm font-medium text-brand-primary",onClick:ne,children:"Réinitialiser"})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Police"}),a.jsx("input",{className:"ui-input w-full",value:L,onChange:A=>$(A.target.value),list:`${n}-font-options`,placeholder:"Ex: Poppins"}),a.jsx("datalist",{id:`${n}-font-options`,children:c.map(A=>a.jsx("option",{value:A},A))}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-slate-500",children:[a.jsxs("label",{className:"ui-btn-secondary relative cursor-pointer text-xs",children:[a.jsx("input",{type:"file",accept:".woff,.woff2,.ttf,.otf",className:"absolute inset-0 cursor-pointer opacity-0",onChange:T,disabled:I}),a.jsx(_l,{className:"mr-2 h-3.5 w-3.5","aria-hidden":"true"}),"Importer une police"]}),I&&a.jsx(vl,{className:"h-4 w-4 animate-spin text-brand-primary","aria-hidden":"true"}),Y&&a.jsx("span",{className:"text-xs text-amber-600",children:Y})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Taille du texte"}),a.jsx("input",{className:"ui-input w-full",value:U,onChange:A=>G(A.target.value),list:`${n}-size-options`,placeholder:"Ex: 18px"}),a.jsx("datalist",{id:`${n}-size-options`,children:u_.map(A=>a.jsx("option",{value:A},A))})]})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Couleur du texte"}),a.jsx("input",{className:"ui-input w-full",value:se,onChange:A=>W(A.target.value),placeholder:"Ex: #0f172a"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Hd.map(A=>a.jsx("button",{type:"button",className:"h-8 w-8 rounded-full border border-slate-200",style:{backgroundColor:A},onClick:()=>W(A),children:a.jsx("span",{className:"sr-only",children:A})},A))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Fond du texte"}),a.jsx("input",{className:"ui-input w-full",value:K,onChange:A=>oe(A.target.value),placeholder:"Ex: transparent"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Hd.map(A=>a.jsx("button",{type:"button",className:"h-8 w-8 rounded-full border border-slate-200",style:{backgroundColor:A},onClick:()=>oe(A),children:a.jsx("span",{className:"sr-only",children:A})},A))})]})]})]}),a.jsxs("div",{className:"flex flex-wrap justify-end gap-3",children:[a.jsx("button",{type:"button",className:"ui-btn-secondary",onClick:()=>{S(y),E(v),B(!!v),$(N.fontFamily??""),G(N.fontSize??""),W(N.textColor??""),oe(N.backgroundColor??"")},children:"Réinitialiser les modifications"}),a.jsx("button",{type:"button",className:"ui-btn-primary",onClick:O,children:"Appliquer"})]})]})},k_=({element:n,draft:i,onApply:o,onAssetAdded:c,placeholder:u})=>{const f=v_(i,n)??"",[g,x]=h.useState(f),[p,y]=h.useState(null),[v,N]=h.useState(!1);h.useEffect(()=>{x(f)},[f]);const j=()=>{const E=g.trim(),C=ps(E)??(E.length>0?E:null);o(B=>(Jg(B,n,C),B))},S=async E=>{var B;const C=(B=E.target.files)==null?void 0:B[0];if(C){y(null),N(!0);try{const L=await yl(C,{tags:[Ei(C)]}),$=co(C,L);c($),x(L)}catch(L){y(L instanceof Error?L.message:"Téléversement impossible. Vérifiez votre connexion.")}finally{N(!1),E.target.value=""}}},w=g.trim();return a.jsxs("div",{className:"space-y-5",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-slate-700",htmlFor:`${n}-image`,children:"URL de l'image ou du média"}),a.jsx("input",{id:`${n}-image`,className:"ui-input w-full",value:g,placeholder:u??"https://",onChange:E=>x(E.target.value)}),a.jsx("p",{className:"text-xs text-slate-500",children:"Collez une URL Cloudinary ou téléversez un fichier pour l’ajouter automatiquement."})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsxs("label",{className:"ui-btn-secondary relative cursor-pointer",children:[a.jsx("input",{type:"file",accept:"image/*,video/*,audio/*,.ttf,.otf,.woff,.woff2",className:"absolute inset-0 cursor-pointer opacity-0",onChange:S,disabled:v}),a.jsx(_l,{className:"mr-2 h-4 w-4","aria-hidden":"true"}),"Importer un média"]}),v&&a.jsx(vl,{className:"h-4 w-4 animate-spin text-brand-primary","aria-hidden":"true"}),a.jsx("button",{type:"button",className:"text-sm font-medium text-brand-primary hover:text-brand-primary/80",onClick:()=>x(""),children:"Supprimer le média"})]}),p&&a.jsxs("div",{className:"flex items-start gap-2 rounded-2xl border border-amber-200 bg-amber-50 p-3 text-sm text-amber-700",children:[a.jsx(Da,{className:"mt-0.5 h-4 w-4","aria-hidden":"true"}),a.jsx("p",{children:p})]}),w&&a.jsx("div",{className:"overflow-hidden rounded-2xl border border-slate-200",children:a.jsx("img",{src:w,alt:"Aperçu",className:"h-48 w-full object-cover"})}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"button",className:"ui-btn-primary",onClick:j,children:"Appliquer"})})]})},T_=({element:n,draft:i,onApply:o,onAssetAdded:c})=>{const u=N_(i,n),[f,g]=h.useState(u.type),[x,p]=h.useState(u.color),[y,v]=h.useState(u.image??""),[N,j]=h.useState(null),[S,w]=h.useState(!1),E=f_(x)?x:m_,C=U=>{const G=U.target.value;p(G),g("color")},B=U=>{const G=U.target.value;p(G),G.trim().length>0&&g("color")};h.useEffect(()=>{g(u.type),p(u.color),v(u.image??"")},[u.type,u.color,u.image]);const L=()=>{const U=x.trim()||"transparent",G=y.trim(),se=ps(G)??(G.length>0?G:null),W=f==="image"&&se?se:null;o(K=>(b_(K,n,{type:W?"image":"color",color:U,image:W}),K)),W||g("color")},$=async U=>{var se;const G=(se=U.target.files)==null?void 0:se[0];if(G){j(null),w(!0);try{const W=await yl(G,{tags:[Ei(G)]}),K=co(G,W);c(K),v(W),g("image")}catch(W){j(W instanceof Error?W.message:"Téléversement impossible.")}finally{w(!1),U.target.value=""}}};return a.jsxs("div",{className:"space-y-5",children:[a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{type:"button",className:`ui-btn-secondary flex-1 ${f==="color"?"ring-2 ring-brand-primary":""}`,onClick:()=>g("color"),children:"Couleur"}),a.jsx("button",{type:"button",className:`ui-btn-secondary flex-1 ${f==="image"?"ring-2 ring-brand-primary":""}`,onClick:()=>g("image"),children:"Image"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-sm font-medium text-slate-700",htmlFor:`${n}-background-color`,children:"Couleur"}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsx("input",{type:"color",className:"h-10 w-16 cursor-pointer rounded-md border border-slate-200 bg-white",value:E,onChange:C,"aria-label":"Sélectionner une couleur"}),a.jsx("input",{id:`${n}-background-color`,className:"ui-input flex-1 min-w-[12rem]",value:x,onChange:B,placeholder:"#ffffff ou transparent"})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Hd.map(U=>a.jsx("button",{type:"button",className:"h-8 w-8 rounded-full border border-slate-200",style:{backgroundColor:U},onClick:()=>{p(U),g("color")},children:a.jsx("span",{className:"sr-only",children:U})},U))})]}),f==="image"&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-sm font-medium text-slate-700",htmlFor:`${n}-background-image`,children:"Image de fond"}),a.jsx("input",{id:`${n}-background-image`,className:"ui-input w-full",value:y,onChange:U=>v(U.target.value),placeholder:"https://"}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsxs("label",{className:"ui-btn-secondary relative cursor-pointer",children:[a.jsx("input",{type:"file",accept:"image/*,video/*",className:"absolute inset-0 cursor-pointer opacity-0",onChange:$,disabled:S}),a.jsx(_l,{className:"mr-2 h-4 w-4","aria-hidden":"true"}),"Importer une image"]}),S&&a.jsx(vl,{className:"h-4 w-4 animate-spin text-brand-primary","aria-hidden":"true"}),a.jsx("button",{type:"button",className:"text-sm font-medium text-brand-primary hover:text-brand-primary/80",onClick:()=>{v(""),g("color")},children:"Supprimer l'image"})]}),N&&a.jsxs("div",{className:"flex items-start gap-2 rounded-2xl border border-amber-200 bg-amber-50 p-3 text-sm text-amber-700",children:[a.jsx(Da,{className:"mt-0.5 h-4 w-4","aria-hidden":"true"}),a.jsx("p",{children:N})]}),y.trim()&&a.jsx("div",{className:"overflow-hidden rounded-2xl border border-slate-200",children:a.jsx("img",{src:y,alt:"Aperçu du fond",className:"h-40 w-full object-cover"})})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"button",className:"ui-btn-primary",onClick:L,children:"Appliquer"})})]})},E_=({assets:n,onUpload:i})=>{const[o,c]=h.useState(null),[u,f]=h.useState(!1),[g,x]=h.useState(null),p=async S=>{try{await navigator.clipboard.writeText(S.url),c(S.id),setTimeout(()=>c(null),2e3)}catch(w){console.error(w)}},y=async S=>{var E;const w=(E=S.target.files)==null?void 0:E[0];if(w){x(null),f(!0);try{await i(w)}catch(C){x(C instanceof Error?C.message:"Téléversement impossible.")}finally{f(!1),S.target.value=""}}},v=n.filter(S=>S.type==="font"),N=n.filter(S=>S.type==="image"),j=n.filter(S=>S.type!=="image"&&S.type!=="font");return a.jsxs("section",{className:"space-y-6 rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[a.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Bibliothèque de médias"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Centralisez toutes vos ressources pour la personnalisation (polices, images, vidéos, audio)."})]}),a.jsxs("label",{className:"ui-btn-primary relative cursor-pointer",children:[a.jsx("input",{type:"file",accept:"image/*,video/*,audio/*,.ttf,.otf,.woff,.woff2",className:"absolute inset-0 cursor-pointer opacity-0",onChange:y,disabled:u}),a.jsx(_l,{className:"mr-2 h-4 w-4","aria-hidden":"true"}),"Ajouter un média"]})]}),g&&a.jsxs("div",{className:"flex items-start gap-3 rounded-2xl border border-amber-200 bg-amber-50 p-4 text-sm text-amber-700",children:[a.jsx(Da,{className:"h-5 w-5","aria-hidden":"true"}),a.jsx("div",{children:a.jsx("p",{children:g})})]}),u&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[a.jsx(vl,{className:"h-4 w-4 animate-spin","aria-hidden":"true"})," Téléversement en cours…"]}),a.jsxs("div",{className:"space-y-6",children:[a.jsx(Td,{title:"Polices",assets:v,onCopy:p,copySuccessId:o}),a.jsx(Td,{title:"Images",assets:N,onCopy:p,copySuccessId:o}),a.jsx(Td,{title:"Autres médias",assets:j,onCopy:p,copySuccessId:o})]})]})},Td=({title:n,assets:i,onCopy:o,copySuccessId:c})=>i.length===0?a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-slate-700",children:n}),a.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Aucun média pour le moment."})]}):a.jsxs("div",{className:"space-y-3",children:[a.jsx("h3",{className:"text-sm font-semibold text-slate-700",children:n}),a.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:i.map(u=>a.jsxs("article",{className:"rounded-2xl border border-slate-200 p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-slate-900",children:u.name}),a.jsxs("p",{className:"text-xs text-slate-500",children:[u.format.split("/").pop()??u.format," • ",w_(u.bytes)]})]}),a.jsxs("button",{type:"button",className:`ui-btn-secondary flex items-center gap-2 text-xs ${c===u.id?"border-emerald-200 bg-emerald-50 text-emerald-700":""}`,onClick:()=>o(u),children:[a.jsx(Uy,{className:"h-4 w-4","aria-hidden":"true"}),c===u.id?"Copié !":"Copier l’URL"]})]}),a.jsx("p",{className:"mt-3 break-all text-xs text-slate-500",children:u.url})]},u.id))})]}),M_=()=>{var be;const{content:n,loading:i,error:o,updateContent:c}=Ti(),[u,f]=h.useState(()=>n?Pr(n):null),[g,x]=h.useState(null),[p,y]=h.useState(null),[v,N]=h.useState("custom"),[j,S]=h.useState(!1),[w,E]=h.useState(null),[C,B]=h.useState(null),[L,$]=h.useState([]),[U,G]=h.useState(!1),[se,W]=h.useState(null),[K,oe]=h.useState(null),[Y,Z]=h.useState(!1);h.useEffect(()=>{n&&f(Pr(n))},[n]),h.useEffect(()=>{let te=!0;return(async()=>{G(!0),W(null);try{const xe=await ye.getBestSellerProducts();te&&$(xe)}catch(xe){te&&W(xe instanceof Error?xe.message:"Impossible de charger les produits mis en avant.")}finally{te&&G(!1)}})(),()=>{te=!1}},[]),h.useEffect(()=>{if(!C)return;const te=setTimeout(()=>B(null),4e3);return()=>clearTimeout(te)},[C]);const I=h.useCallback(te=>{f(re=>{if(!re)return re;const xe=Pr(re);return te(xe)})},[]),q=h.useCallback(te=>{f(re=>{if(!re)return re;const xe=Pr(re);return y_(xe,te),xe})},[]),O=h.useMemo(()=>{const te=new Map;return S_.forEach(re=>{re.groups.forEach(xe=>{xe.fields.forEach(Ne=>{te.set(Ne.element,{section:re,group:xe,field:Ne})})})}),te},[]),ne=h.useCallback(()=>{},[]),_=h.useCallback(te=>{x(te);try{const re=Ya(te);y(re)}catch(re){console.error(re)}},[]),T=h.useCallback((te,re)=>{if(_(te),y(re.zone),!O.has(te)){console.warn(`Aucun formulaire de personnalisation trouvé pour l'élément "${te}".`);return}oe(te)},[O,_,y]),A=async()=>{S(!0),E(null),B(null);try{if(!u)throw new Error("Le brouillon est indisponible.");const te=await c(u);f(te),B("Modifications enregistrées avec succès.")}catch(te){E(te instanceof Error?te.message:"Une erreur est survenue lors de la sauvegarde.")}finally{S(!1)}},P=h.useMemo(()=>{const te=Array.from(d_);if(!u)return te;const re=u.assets.library.filter(xe=>xe.type==="font").map(xe=>Wd(xe.name));return Array.from(new Set([...te,...re]))},[u]),Q=h.useMemo(()=>K?O.get(K)??null:null,[K,O]),D=h.useMemo(()=>{var re;if(!K)return"";const te=((re=O.get(K))==null?void 0:re.field.label)??K;return h_[K]??te},[K,O]),H=h.useCallback(()=>{oe(null),x(null),y(null)},[x,y,oe]);h.useEffect(()=>{v!=="custom"&&H()},[v,H]),h.useEffect(()=>{if(!K)return;if(!Q){H();return}if(typeof window>"u")return;const te=window.setTimeout(()=>{const re=document.querySelector('[data-element-editor-modal="true"]'),xe=re==null?void 0:re.querySelector('input, textarea, [contenteditable="true"], select');xe==null||xe.focus({preventScroll:!0})},80);return()=>{window.clearTimeout(te)}},[Q,H,K]);const M=h.useCallback(te=>{if(!u)return null;const re={key:te.id,element:te.element,label:te.label,description:te.description,isActive:g===te.element,register:ne,onFocus:_};return te.type==="text"?a.jsx(kd,{...re,children:a.jsx(C_,{element:te.element,draft:u,onApply:I,fontOptions:P,onAssetAdded:q,multiline:te.multiline,allowRichText:te.allowRichText,showStyleOptions:te.showStyleOptions,placeholder:te.placeholder})}):te.type==="image"?a.jsx(kd,{...re,children:a.jsx(k_,{element:te.element,draft:u,onApply:I,onAssetAdded:q,placeholder:te.placeholder})}):a.jsx(kd,{...re,children:a.jsx(T_,{element:te.element,draft:u,onApply:I,onAssetAdded:q})})},[g,q,I,u,_,P,ne]),ce=h.useCallback(async te=>{const re=await yl(te,{tags:[Ei(te)]}),xe=co(te,re);q(xe)},[q]);if(i)return a.jsxs("div",{className:"flex h-full min-h-[60vh] flex-col items-center justify-center gap-3",children:[a.jsx(vl,{className:"h-10 w-10 animate-spin text-brand-primary","aria-hidden":"true"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Chargement du contenu du site…"})]});if(!n||!u)return a.jsxs("div",{className:"flex h-full min-h-[60vh] flex-col items-center justify-center gap-3",children:[a.jsx(Da,{className:"h-6 w-6 text-amber-500","aria-hidden":"true"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Le contenu du site est en cours d'initialisation…"})]});const de=((be=u.assets)==null?void 0:be.library)??[];return a.jsxs("div",{className:"space-y-8 px-4 sm:px-6 lg:px-0",children:[a.jsxs("header",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Site public"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Ajustez le contenu, les couleurs et les médias de votre page d’accueil en temps réel."})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[C&&a.jsxs("div",{className:"flex items-center gap-2 rounded-full bg-emerald-50 px-4 py-2 text-sm text-emerald-700",children:[a.jsx(Cy,{className:"h-4 w-4","aria-hidden":"true"}),C]}),w&&a.jsxs("div",{className:"flex items-center gap-2 rounded-full bg-amber-50 px-4 py-2 text-sm text-amber-700",children:[a.jsx(Da,{className:"h-4 w-4","aria-hidden":"true"}),w]}),a.jsx("button",{type:"button",onClick:()=>Z(!0),className:"ui-btn-secondary",children:"Bibliothèque de médias"}),a.jsx("button",{type:"button",onClick:A,className:"ui-btn-primary",disabled:j,children:j?"Enregistrement…":"Enregistrer les modifications"})]})]}),o&&a.jsxs("div",{className:"flex items-start gap-3 rounded-3xl border border-amber-200 bg-amber-50 p-4 text-sm text-amber-700",children:[a.jsx(Da,{className:"h-5 w-5","aria-hidden":"true"}),a.jsxs("div",{children:[a.jsx("p",{children:o}),a.jsx("p",{className:"mt-1",children:"Les valeurs affichées correspondent à la configuration par défaut."})]})]}),a.jsx("nav",{className:"flex w-full items-center gap-2 overflow-x-auto rounded-full bg-slate-100 p-1",children:g_.map(te=>a.jsx("button",{type:"button",onClick:()=>N(te.id),className:`flex-1 rounded-full px-4 py-2 text-sm font-medium transition ${v===te.id?"bg-white text-slate-900 shadow":"text-slate-500 hover:text-slate-700"}`,children:te.label},te.id))}),a.jsx("div",{children:v==="preview"?a.jsx("div",{className:"mx-auto w-full max-w-6xl",children:a.jsx("div",{className:"rounded-[2.5rem] border border-slate-200 bg-slate-50 p-6",children:a.jsx(Ch,{content:u,bestSellerProducts:L,onEdit:()=>{},activeZone:null,showEditButtons:!1})})}):a.jsxs("div",{className:"space-y-6",children:[se&&a.jsxs("div",{className:"flex items-start gap-3 rounded-2xl border border-amber-200 bg-amber-50 p-4 text-sm text-amber-700",children:[a.jsx(Da,{className:"h-5 w-5","aria-hidden":"true"}),a.jsx("p",{children:se})]}),a.jsx("div",{className:"mx-auto w-full max-w-7xl",children:a.jsx("div",{className:"rounded-[2.75rem] border border-slate-200 bg-slate-50 p-4 shadow-inner sm:p-6 lg:p-8",children:a.jsx(Ch,{content:u,bestSellerProducts:L,onEdit:(te,re)=>T(te,re),activeZone:p})})}),U&&a.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-slate-500",children:[a.jsx(vl,{className:"h-4 w-4 animate-spin","aria-hidden":"true"}),"Chargement des produits populaires…"]})]})}),a.jsx(wt,{isOpen:!!(K&&Q),onClose:H,title:D?`Personnaliser ${D}`:"Personnalisation",size:"lg",children:Q?a.jsxs("div",{className:"space-y-5","data-element-editor-modal":"true",children:[a.jsxs("div",{className:"rounded-2xl bg-slate-100/70 p-4 text-sm text-slate-600",children:[a.jsx("p",{className:"text-sm font-semibold text-slate-900",children:Q.section.title}),a.jsx("p",{className:"text-xs text-slate-500",children:Q.group.title}),Q.group.description&&a.jsx("p",{className:"mt-2 text-xs text-slate-500",children:Q.group.description})]}),M(Q.field)]}):a.jsx("p",{className:"text-sm text-slate-500",children:"Sélectionnez un élément à personnaliser."})}),a.jsx(wt,{isOpen:Y,onClose:()=>Z(!1),title:"Bibliothèque de médias",size:"xl",children:a.jsx(E_,{assets:de,onUpload:ce})})]})},ex=({onLogout:n})=>{const i=Xs(),o=Sa.useCallback(()=>{n&&n(),i("/login",{replace:!0})},[i,n]);return a.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-6 px-4 text-center",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h1",{className:"text-3xl font-semibold text-gray-900",children:"Accès non autorisé"}),a.jsx("p",{className:"text-base text-gray-600",children:"Votre rôle ne dispose actuellement d'aucune page accessible. Veuillez contacter un administrateur ou revenir à l'écran de connexion."})]}),a.jsx("button",{type:"button",onClick:o,className:"rounded-md bg-brand-primary px-6 py-3 text-white transition hover:bg-brand-primary/90 focus:outline-none focus:ring-2 focus:ring-brand-primary focus:ring-offset-2",children:"Retour à la connexion"})]})},A_=[{path:"/dashboard",permissionKey:"/dashboard",Component:F2},{path:"/para-llevar",permissionKey:"/para-llevar",Component:uj},{path:"/ventes",permissionKey:"/ventes",Component:Z2},{path:"/commande/:tableId",permissionKey:"/ventes",Component:ij},{path:"/cocina",permissionKey:"/cocina",Component:dj},{path:"/resume-ventes",permissionKey:"/resume-ventes",Component:o_},{path:"/ingredients",permissionKey:"/ingredients",Component:mj},{path:"/produits",permissionKey:"/produits",Component:gj},{path:"/promotions",permissionKey:"/promotions",Component:Zj},{path:gs,permissionKey:gs,Component:M_}],tx=()=>a.jsx("div",{className:"flex items-center justify-center h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-brand-primary"})}),ax=({children:n,permissionKey:i})=>{var x;const{role:o,loading:c,logout:u}=Va();if(c)return a.jsx(tx,{});if(!o)return a.jsx(so,{to:"/",replace:!0});const f=i?(x=o.permissions)==null?void 0:x[i]:void 0;if(!(i?io(f):!0)){const p=Jd(o);return p?a.jsx(so,{to:p,replace:!0}):a.jsx(ex,{onLogout:u})}return n},z_=()=>{const{role:n,loading:i,logout:o}=Va(),[,c]=h.useState(()=>{const f=no();return f?f.orderId:null});if(Ti(),h.useEffect(()=>{const f=()=>{const g=no();c(g?g.orderId:null)};return window.addEventListener("storage",f),()=>window.removeEventListener("storage",f)},[]),i)return a.jsx(tx,{});if(!n)return a.jsx(D2,{});const u=Jd(n);return u?a.jsx(so,{to:u,replace:!0}):a.jsx(ex,{onLogout:o})},O_=()=>a.jsx(ax,{children:a.jsx(v2,{})}),D_=()=>a.jsxs(_b,{children:[a.jsx(ml,{path:"/",element:a.jsx(z_,{})}),a.jsx(ml,{path:"/login",element:a.jsx(so,{to:"/",replace:!0})}),a.jsx(ml,{path:"/commande-client",element:a.jsx(n_,{})}),a.jsx(ml,{element:a.jsx(O_,{}),children:A_.map(({path:n,permissionKey:i,Component:o})=>a.jsx(ml,{path:n,element:a.jsx(ax,{permissionKey:i,children:a.jsx(o,{})})},n))}),a.jsx(ml,{path:"*",element:a.jsx(l_,{})})]}),R_=()=>a.jsx(p2,{children:a.jsx(jb,{children:a.jsx(D_,{})})}),sx=document.getElementById("root");if(!sx)throw new Error("Could not find root element to mount to");const U_=qb.createRoot(sx);U_.render(a.jsx(Sa.StrictMode,{children:a.jsx(R_,{})}));
