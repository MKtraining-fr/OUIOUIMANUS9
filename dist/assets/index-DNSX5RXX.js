import{a as fb,d as pb,g as hb,r as h,u as Xs,N as Kp,O as gb,e as Ca,f as xb,L as bb,B as yb,h as vb,i as ml,j as no}from"./react-vendor-Dx0eSN0M.js";import{c as jb}from"./supabase-vendor-CH4nZy4O.js";import{R as Zp,B as _b,C as Nb,X as wb,Y as Sb,T as Pp,L as Jp,a as Wp,P as Cb,b as kb,c as Tb}from"./chart-vendor-CVAiwELr.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))c(u);new MutationObserver(u=>{for(const f of u)if(f.type==="childList")for(const g of f.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&c(g)}).observe(document,{childList:!0,subtree:!0});function o(u){const f={};return u.integrity&&(f.integrity=u.integrity),u.referrerPolicy&&(f.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?f.credentials="include":u.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function c(u){if(u.ep)return;u.ep=!0;const f=o(u);fetch(u.href,f)}})();var jd={exports:{}},pi={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eh;function Eb(){if(eh)return pi;eh=1;var n=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function o(c,u,f){var g=null;if(f!==void 0&&(g=""+f),u.key!==void 0&&(g=""+u.key),"key"in u){f={};for(var x in u)x!=="key"&&(f[x]=u[x])}else f=u;return u=f.ref,{$$typeof:n,type:c,key:g,ref:u!==void 0?u:null,props:f}}return pi.Fragment=i,pi.jsx=o,pi.jsxs=o,pi}var th;function Mb(){return th||(th=1,jd.exports=Eb()),jd.exports}var a=Mb(),_d={exports:{}},hi={},Nd={exports:{}},wd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ah;function Ab(){return ah||(ah=1,(function(n){function i(_,E){var z=_.length;_.push(E);e:for(;0<z;){var P=z-1>>>1,F=_[P];if(0<u(F,E))_[P]=E,_[z]=F,z=P;else break e}}function o(_){return _.length===0?null:_[0]}function c(_){if(_.length===0)return null;var E=_[0],z=_.pop();if(z!==E){_[0]=z;e:for(var P=0,F=_.length,R=F>>>1;P<R;){var B=2*(P+1)-1,M=_[B],ce=B+1,de=_[ce];if(0>u(M,z))ce<F&&0>u(de,M)?(_[P]=de,_[ce]=z,P=ce):(_[P]=M,_[B]=z,P=B);else if(ce<F&&0>u(de,z))_[P]=de,_[ce]=z,P=ce;else break e}}return E}function u(_,E){var z=_.sortIndex-E.sortIndex;return z!==0?z:_.id-E.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;n.unstable_now=function(){return f.now()}}else{var g=Date,x=g.now();n.unstable_now=function(){return g.now()-x}}var p=[],y=[],v=1,N=null,j=3,S=!1,w=!1,T=!1,C=!1,I=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function D(_){for(var E=o(y);E!==null;){if(E.callback===null)c(y);else if(E.startTime<=_)c(y),E.sortIndex=E.expirationTime,i(p,E);else break;E=o(y)}}function H(_){if(T=!1,D(_),!w)if(o(p)!==null)w=!0,se||(se=!0,A());else{var E=o(y);E!==null&&le(H,E.startTime-_)}}var se=!1,W=-1,X=5,re=-1;function G(){return C?!0:!(n.unstable_now()-re<X)}function Z(){if(C=!1,se){var _=n.unstable_now();re=_;var E=!0;try{e:{w=!1,T&&(T=!1,L(W),W=-1),S=!0;var z=j;try{t:{for(D(_),N=o(p);N!==null&&!(N.expirationTime>_&&G());){var P=N.callback;if(typeof P=="function"){N.callback=null,j=N.priorityLevel;var F=P(N.expirationTime<=_);if(_=n.unstable_now(),typeof F=="function"){N.callback=F,D(_),E=!0;break t}N===o(p)&&c(p),D(_)}else c(p);N=o(p)}if(N!==null)E=!0;else{var R=o(y);R!==null&&le(H,R.startTime-_),E=!1}}break e}finally{N=null,j=z,S=!1}E=void 0}}finally{E?A():se=!1}}}var A;if(typeof Q=="function")A=function(){Q(Z)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,q=K.port2;K.port1.onmessage=Z,A=function(){q.postMessage(null)}}else A=function(){I(Z,0)};function le(_,E){W=I(function(){_(n.unstable_now())},E)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(_){_.callback=null},n.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<_?Math.floor(1e3/_):5},n.unstable_getCurrentPriorityLevel=function(){return j},n.unstable_next=function(_){switch(j){case 1:case 2:case 3:var E=3;break;default:E=j}var z=j;j=E;try{return _()}finally{j=z}},n.unstable_requestPaint=function(){C=!0},n.unstable_runWithPriority=function(_,E){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var z=j;j=_;try{return E()}finally{j=z}},n.unstable_scheduleCallback=function(_,E,z){var P=n.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?P+z:P):z=P,_){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=z+F,_={id:v++,callback:E,priorityLevel:_,startTime:z,expirationTime:F,sortIndex:-1},z>P?(_.sortIndex=z,i(y,_),o(p)===null&&_===o(y)&&(T?(L(W),W=-1):T=!0,le(H,z-P))):(_.sortIndex=F,i(p,_),w||S||(w=!0,se||(se=!0,A()))),_},n.unstable_shouldYield=G,n.unstable_wrapCallback=function(_){var E=j;return function(){var z=j;j=E;try{return _.apply(this,arguments)}finally{j=z}}}})(wd)),wd}var sh;function zb(){return sh||(sh=1,Nd.exports=Ab()),Nd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nh;function Ob(){if(nh)return hi;nh=1;var n=zb(),i=fb(),o=pb();function c(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function g(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function x(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(f(e)!==e)throw Error(c(188))}function y(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(c(188));return t!==e?null:e}for(var s=e,l=t;;){var r=s.return;if(r===null)break;var d=r.alternate;if(d===null){if(l=r.return,l!==null){s=l;continue}break}if(r.child===d.child){for(d=r.child;d;){if(d===s)return p(r),e;if(d===l)return p(r),t;d=d.sibling}throw Error(c(188))}if(s.return!==l.return)s=r,l=d;else{for(var m=!1,b=r.child;b;){if(b===s){m=!0,s=r,l=d;break}if(b===l){m=!0,l=r,s=d;break}b=b.sibling}if(!m){for(b=d.child;b;){if(b===s){m=!0,s=d,l=r;break}if(b===l){m=!0,l=d,s=r;break}b=b.sibling}if(!m)throw Error(c(189))}}if(s.alternate!==l)throw Error(c(190))}if(s.tag!==3)throw Error(c(188));return s.stateNode.current===s?e:t}function v(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=v(e),t!==null)return t;e=e.sibling}return null}var N=Object.assign,j=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),re=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function A(e){return e===null||typeof e!="object"?null:(e=Z&&e[Z]||e["@@iterator"],typeof e=="function"?e:null)}var K=Symbol.for("react.client.reference");function q(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===K?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case T:return"Fragment";case I:return"Profiler";case C:return"StrictMode";case H:return"Suspense";case se:return"SuspenseList";case re:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case w:return"Portal";case Q:return e.displayName||"Context";case L:return(e._context.displayName||"Context")+".Consumer";case D:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case W:return t=e.displayName||null,t!==null?t:q(e.type)||"Memo";case X:t=e._payload,e=e._init;try{return q(e(t))}catch{}}return null}var le=Array.isArray,_=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,E=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z={pending:!1,data:null,method:null,action:null},P=[],F=-1;function R(e){return{current:e}}function B(e){0>F||(e.current=P[F],P[F]=null,F--)}function M(e,t){F++,P[F]=e.current,e.current=t}var ce=R(null),de=R(null),be=R(null),te=R(null);function ie(e,t){switch(M(be,t),M(de,e),M(ce,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?bp(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=bp(t),e=yp(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}B(ce),M(ce,e)}function xe(){B(ce),B(de),B(be)}function we(e){e.memoizedState!==null&&M(te,e);var t=ce.current,s=yp(t,e.type);t!==s&&(M(de,e),M(ce,s))}function Me(e){de.current===e&&(B(ce),B(de)),te.current===e&&(B(te),di._currentValue=z)}var Je,Dt;function Ct(e){if(Je===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);Je=t&&t[1]||"",Dt=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Je+e+Dt}var Xt=!1;function ge(e,t){if(!e||Xt)return"";Xt=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(J){var V=J}Reflect.construct(e,[],ne)}else{try{ne.call()}catch(J){V=J}e.call(ne.prototype)}}else{try{throw Error()}catch(J){V=J}(ne=e())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(J){if(J&&V&&typeof J.stack=="string")return[J.stack,V.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),m=d[0],b=d[1];if(m&&b){var k=m.split(`
`),Y=b.split(`
`);for(r=l=0;l<k.length&&!k[l].includes("DetermineComponentFrameRoot");)l++;for(;r<Y.length&&!Y[r].includes("DetermineComponentFrameRoot");)r++;if(l===k.length||r===Y.length)for(l=k.length-1,r=Y.length-1;1<=l&&0<=r&&k[l]!==Y[r];)r--;for(;1<=l&&0<=r;l--,r--)if(k[l]!==Y[r]){if(l!==1||r!==1)do if(l--,r--,0>r||k[l]!==Y[r]){var ee=`
`+k[l].replace(" at new "," at ");return e.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",e.displayName)),ee}while(1<=l&&0<=r);break}}}finally{Xt=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?Ct(s):""}function Ne(e,t){switch(e.tag){case 26:case 27:case 5:return Ct(e.type);case 16:return Ct("Lazy");case 13:return e.child!==t&&t!==null?Ct("Suspense Fallback"):Ct("Suspense");case 19:return Ct("SuspenseList");case 0:case 15:return ge(e.type,!1);case 11:return ge(e.type.render,!1);case 1:return ge(e.type,!0);case 31:return Ct("Activity");default:return""}}function ze(e){try{var t="",s=null;do t+=Ne(e,s),s=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var dt=Object.prototype.hasOwnProperty,ke=n.unstable_scheduleCallback,We=n.unstable_cancelCallback,_t=n.unstable_shouldYield,Kt=n.unstable_requestPaint,ft=n.unstable_now,Nt=n.unstable_getCurrentPriorityLevel,fa=n.unstable_ImmediatePriority,Ra=n.unstable_UserBlockingPriority,pt=n.unstable_NormalPriority,ue=n.unstable_LowPriority,pe=n.unstable_IdlePriority,Se=n.log,qe=n.unstable_setDisableYieldValue,Ke=null,Ze=null;function Ee(e){if(typeof Se=="function"&&qe(e),Ze&&typeof Ze.setStrictMode=="function")try{Ze.setStrictMode(Ke,e)}catch{}}var Re=Math.clz32?Math.clz32:Rt,xt=Math.log,ot=Math.LN2;function Rt(e){return e>>>=0,e===0?32:31-(xt(e)/ot|0)|0}var Va=256,pa=262144,Zt=4194304;function Vt(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function yt(e,t,s){var l=e.pendingLanes;if(l===0)return 0;var r=0,d=e.suspendedLanes,m=e.pingedLanes;e=e.warmLanes;var b=l&134217727;return b!==0?(l=b&~d,l!==0?r=Vt(l):(m&=b,m!==0?r=Vt(m):s||(s=b&~e,s!==0&&(r=Vt(s))))):(b=l&~d,b!==0?r=Vt(b):m!==0?r=Vt(m):s||(s=l&~e,s!==0&&(r=Vt(s)))),r===0?0:t!==0&&t!==r&&(t&d)===0&&(d=r&-r,s=t&-t,d>=s||d===32&&(s&4194048)!==0)?t:r}function oe(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Ae(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pe(){var e=Zt;return Zt<<=1,(Zt&62914560)===0&&(Zt=4194304),e}function Fe(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function Ve(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Yt(e,t,s,l,r,d){var m=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var b=e.entanglements,k=e.expirationTimes,Y=e.hiddenUpdates;for(s=m&~s;0<s;){var ee=31-Re(s),ne=1<<ee;b[ee]=0,k[ee]=-1;var V=Y[ee];if(V!==null)for(Y[ee]=null,ee=0;ee<V.length;ee++){var J=V[ee];J!==null&&(J.lane&=-536870913)}s&=~ne}l!==0&&la(e,l,0),d!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=d&~(m&~t))}function la(e,t,s){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-Re(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|s&261930}function Ks(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var l=31-Re(s),r=1<<l;r&t|e[l]&t&&(e[l]|=t),s&=~r}}function _e(e,t){var s=t&-t;return s=(s&42)!==0?1:Be(s),(s&(e.suspendedLanes|t))!==0?0:s}function Be(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ht(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ft(){var e=E.p;return e!==0?e:(e=window.event,e===void 0?32:$p(e.type))}function wl(e,t){var s=E.p;try{return E.p=e,t()}finally{E.p=s}}var xs=Math.random().toString(36).slice(2),Bt="__reactFiber$"+xs,Pt="__reactProps$"+xs,Tn="__reactContainer$"+xs,mo="__reactEvents$"+xs,ax="__reactListeners$"+xs,sx="__reactHandles$"+xs,nu="__reactResources$"+xs,Sl="__reactMarker$"+xs;function fo(e){delete e[Bt],delete e[Pt],delete e[mo],delete e[ax],delete e[sx]}function En(e){var t=e[Bt];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Tn]||s[Bt]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Cp(e);e!==null;){if(s=e[Bt])return s;e=Cp(e)}return t}e=s,s=e.parentNode}return null}function Mn(e){if(e=e[Bt]||e[Tn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Cl(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(c(33))}function An(e){var t=e[nu];return t||(t=e[nu]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ut(e){e[Sl]=!0}var lu=new Set,iu={};function Zs(e,t){zn(e,t),zn(e+"Capture",t)}function zn(e,t){for(iu[e]=t,e=0;e<t.length;e++)lu.add(t[e])}var nx=RegExp("^[:A-Z_a-z\À-\Ö\Ø-\ö\ø-\˿\Ͱ-\ͽ\Ϳ-\῿\‌-\‍\⁰-\↏\Ⰰ-\⿯\、-\퟿\豈-\﷏\ﷰ-\�][:A-Z_a-z\À-\Ö\Ø-\ö\ø-\˿\Ͱ-\ͽ\Ϳ-\῿\‌-\‍\⁰-\↏\Ⰰ-\⿯\、-\퟿\豈-\﷏\ﷰ-\�\\-.0-9\·\̀-\ͯ\‿-\⁀]*$"),ru={},ou={};function lx(e){return dt.call(ou,e)?!0:dt.call(ru,e)?!1:nx.test(e)?ou[e]=!0:(ru[e]=!0,!1)}function Ai(e,t,s){if(lx(t))if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+s)}}function zi(e,t,s){if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+s)}}function Qa(e,t,s,l){if(l===null)e.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(t,s,""+l)}}function ha(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function cu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ix(e,t,s){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var r=l.get,d=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(m){s=""+m,d.call(this,m)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return s},setValue:function(m){s=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function po(e){if(!e._valueTracker){var t=cu(e)?"checked":"value";e._valueTracker=ix(e,t,""+e[t])}}function du(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),l="";return e&&(l=cu(e)?e.checked?"true":"false":e.value),e=l,e!==s?(t.setValue(e),!0):!1}function Oi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var rx=/[\n"\\]/g;function ga(e){return e.replace(rx,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function ho(e,t,s,l,r,d,m,b){e.name="",m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.type=m:e.removeAttribute("type"),t!=null?m==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+ha(t)):e.value!==""+ha(t)&&(e.value=""+ha(t)):m!=="submit"&&m!=="reset"||e.removeAttribute("value"),t!=null?go(e,m,ha(t)):s!=null?go(e,m,ha(s)):l!=null&&e.removeAttribute("value"),r==null&&d!=null&&(e.defaultChecked=!!d),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.name=""+ha(b):e.removeAttribute("name")}function uu(e,t,s,l,r,d,m,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),t!=null||s!=null){if(!(d!=="submit"&&d!=="reset"||t!=null)){po(e);return}s=s!=null?""+ha(s):"",t=t!=null?""+ha(t):s,b||t===e.value||(e.value=t),e.defaultValue=t}l=l??r,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=b?e.checked:!!l,e.defaultChecked=!!l,m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.name=m),po(e)}function go(e,t,s){t==="number"&&Oi(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function On(e,t,s,l){if(e=e.options,t){t={};for(var r=0;r<s.length;r++)t["$"+s[r]]=!0;for(s=0;s<e.length;s++)r=t.hasOwnProperty("$"+e[s].value),e[s].selected!==r&&(e[s].selected=r),r&&l&&(e[s].defaultSelected=!0)}else{for(s=""+ha(s),t=null,r=0;r<e.length;r++){if(e[r].value===s){e[r].selected=!0,l&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function mu(e,t,s){if(t!=null&&(t=""+ha(t),t!==e.value&&(e.value=t),s==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=s!=null?""+ha(s):""}function fu(e,t,s,l){if(t==null){if(l!=null){if(s!=null)throw Error(c(92));if(le(l)){if(1<l.length)throw Error(c(93));l=l[0]}s=l}s==null&&(s=""),t=s}s=ha(t),e.defaultValue=s,l=e.textContent,l===s&&l!==""&&l!==null&&(e.value=l),po(e)}function Dn(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var ox=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pu(e,t,s){var l=t.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,s):typeof s!="number"||s===0||ox.has(t)?t==="float"?e.cssFloat=s:e[t]=(""+s).trim():e[t]=s+"px"}function hu(e,t,s){if(t!=null&&typeof t!="object")throw Error(c(62));if(e=e.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var r in t)l=t[r],t.hasOwnProperty(r)&&s[r]!==l&&pu(e,r,l)}else for(var d in t)t.hasOwnProperty(d)&&pu(e,d,t[d])}function xo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cx=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),dx=/^[ - ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Di(e){return dx.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Xa(){}var bo=null;function yo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Rn=null,Un=null;function gu(e){var t=Mn(e);if(t&&(e=t.stateNode)){var s=e[Pt]||null;e:switch(e=t.stateNode,t.type){case"input":if(ho(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+ga(""+t)+'"][type="radio"]'),t=0;t<s.length;t++){var l=s[t];if(l!==e&&l.form===e.form){var r=l[Pt]||null;if(!r)throw Error(c(90));ho(l,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<s.length;t++)l=s[t],l.form===e.form&&du(l)}break e;case"textarea":mu(e,s.value,s.defaultValue);break e;case"select":t=s.value,t!=null&&On(e,!!s.multiple,t,!1)}}}var vo=!1;function xu(e,t,s){if(vo)return e(t,s);vo=!0;try{var l=e(t);return l}finally{if(vo=!1,(Rn!==null||Un!==null)&&(jr(),Rn&&(t=Rn,e=Un,Un=Rn=null,gu(t),e)))for(t=0;t<e.length;t++)gu(e[t])}}function kl(e,t){var s=e.stateNode;if(s===null)return null;var l=s[Pt]||null;if(l===null)return null;s=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(c(231,t,typeof s));return s}var Ka=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jo=!1;if(Ka)try{var Tl={};Object.defineProperty(Tl,"passive",{get:function(){jo=!0}}),window.addEventListener("test",Tl,Tl),window.removeEventListener("test",Tl,Tl)}catch{jo=!1}var bs=null,_o=null,Ri=null;function bu(){if(Ri)return Ri;var e,t=_o,s=t.length,l,r="value"in bs?bs.value:bs.textContent,d=r.length;for(e=0;e<s&&t[e]===r[e];e++);var m=s-e;for(l=1;l<=m&&t[s-l]===r[d-l];l++);return Ri=r.slice(e,1<l?1-l:void 0)}function Ui(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Li(){return!0}function yu(){return!1}function Jt(e){function t(s,l,r,d,m){this._reactName=s,this._targetInst=r,this.type=l,this.nativeEvent=d,this.target=m,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(s=e[b],this[b]=s?s(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Li:yu,this.isPropagationStopped=yu,this}return N(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Li)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Li)},persist:function(){},isPersistent:Li}),t}var Ps={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qi=Jt(Ps),El=N({},Ps,{view:0,detail:0}),ux=Jt(El),No,wo,Ml,Bi=N({},El,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Co,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ml&&(Ml&&e.type==="mousemove"?(No=e.screenX-Ml.screenX,wo=e.screenY-Ml.screenY):wo=No=0,Ml=e),No)},movementY:function(e){return"movementY"in e?e.movementY:wo}}),vu=Jt(Bi),mx=N({},Bi,{dataTransfer:0}),fx=Jt(mx),px=N({},El,{relatedTarget:0}),So=Jt(px),hx=N({},Ps,{animationName:0,elapsedTime:0,pseudoElement:0}),gx=Jt(hx),xx=N({},Ps,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bx=Jt(xx),yx=N({},Ps,{data:0}),ju=Jt(yx),vx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_x={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=_x[e])?!!t[e]:!1}function Co(){return Nx}var wx=N({},El,{key:function(e){if(e.key){var t=vx[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ui(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?jx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Co,charCode:function(e){return e.type==="keypress"?Ui(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ui(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Sx=Jt(wx),Cx=N({},Bi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_u=Jt(Cx),kx=N({},El,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Co}),Tx=Jt(kx),Ex=N({},Ps,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mx=Jt(Ex),Ax=N({},Bi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),zx=Jt(Ax),Ox=N({},Ps,{newState:0,oldState:0}),Dx=Jt(Ox),Rx=[9,13,27,32],ko=Ka&&"CompositionEvent"in window,Al=null;Ka&&"documentMode"in document&&(Al=document.documentMode);var Ux=Ka&&"TextEvent"in window&&!Al,Nu=Ka&&(!ko||Al&&8<Al&&11>=Al),wu=" ",Su=!1;function Cu(e,t){switch(e){case"keyup":return Rx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ku(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ln=!1;function Lx(e,t){switch(e){case"compositionend":return ku(t);case"keypress":return t.which!==32?null:(Su=!0,wu);case"textInput":return e=t.data,e===wu&&Su?null:e;default:return null}}function qx(e,t){if(Ln)return e==="compositionend"||!ko&&Cu(e,t)?(e=bu(),Ri=_o=bs=null,Ln=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nu&&t.locale!=="ko"?null:t.data;default:return null}}var Bx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Bx[e.type]:t==="textarea"}function Eu(e,t,s,l){Rn?Un?Un.push(l):Un=[l]:Rn=l,t=Tr(t,"onChange"),0<t.length&&(s=new qi("onChange","change",null,s,l),e.push({event:s,listeners:t}))}var zl=null,Ol=null;function Ix(e){mp(e,0)}function Ii(e){var t=Cl(e);if(du(t))return e}function Mu(e,t){if(e==="change")return t}var Au=!1;if(Ka){var To;if(Ka){var Eo="oninput"in document;if(!Eo){var zu=document.createElement("div");zu.setAttribute("oninput","return;"),Eo=typeof zu.oninput=="function"}To=Eo}else To=!1;Au=To&&(!document.documentMode||9<document.documentMode)}function Ou(){zl&&(zl.detachEvent("onpropertychange",Du),Ol=zl=null)}function Du(e){if(e.propertyName==="value"&&Ii(Ol)){var t=[];Eu(t,Ol,e,yo(e)),xu(Ix,t)}}function Hx(e,t,s){e==="focusin"?(Ou(),zl=t,Ol=s,zl.attachEvent("onpropertychange",Du)):e==="focusout"&&Ou()}function $x(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ii(Ol)}function Gx(e,t){if(e==="click")return Ii(t)}function Yx(e,t){if(e==="input"||e==="change")return Ii(t)}function Fx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ia=typeof Object.is=="function"?Object.is:Fx;function Dl(e,t){if(ia(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),l=Object.keys(t);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var r=s[l];if(!dt.call(t,r)||!ia(e[r],t[r]))return!1}return!0}function Ru(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Uu(e,t){var s=Ru(e);e=0;for(var l;s;){if(s.nodeType===3){if(l=e+s.textContent.length,e<=t&&l>=t)return{node:s,offset:t-e};e=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Ru(s)}}function Lu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Lu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function qu(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Oi(e.document);t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=Oi(e.document)}return t}function Mo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Vx=Ka&&"documentMode"in document&&11>=document.documentMode,qn=null,Ao=null,Rl=null,zo=!1;function Bu(e,t,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;zo||qn==null||qn!==Oi(l)||(l=qn,"selectionStart"in l&&Mo(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Rl&&Dl(Rl,l)||(Rl=l,l=Tr(Ao,"onSelect"),0<l.length&&(t=new qi("onSelect","select",null,t,s),e.push({event:t,listeners:l}),t.target=qn)))}function Js(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Bn={animationend:Js("Animation","AnimationEnd"),animationiteration:Js("Animation","AnimationIteration"),animationstart:Js("Animation","AnimationStart"),transitionrun:Js("Transition","TransitionRun"),transitionstart:Js("Transition","TransitionStart"),transitioncancel:Js("Transition","TransitionCancel"),transitionend:Js("Transition","TransitionEnd")},Oo={},Iu={};Ka&&(Iu=document.createElement("div").style,"AnimationEvent"in window||(delete Bn.animationend.animation,delete Bn.animationiteration.animation,delete Bn.animationstart.animation),"TransitionEvent"in window||delete Bn.transitionend.transition);function Ws(e){if(Oo[e])return Oo[e];if(!Bn[e])return e;var t=Bn[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in Iu)return Oo[e]=t[s];return e}var Hu=Ws("animationend"),$u=Ws("animationiteration"),Gu=Ws("animationstart"),Qx=Ws("transitionrun"),Xx=Ws("transitionstart"),Kx=Ws("transitioncancel"),Yu=Ws("transitionend"),Fu=new Map,Do="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Do.push("scrollEnd");function ka(e,t){Fu.set(e,t),Zs(t,[e])}var Hi=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},xa=[],In=0,Ro=0;function $i(){for(var e=In,t=Ro=In=0;t<e;){var s=xa[t];xa[t++]=null;var l=xa[t];xa[t++]=null;var r=xa[t];xa[t++]=null;var d=xa[t];if(xa[t++]=null,l!==null&&r!==null){var m=l.pending;m===null?r.next=r:(r.next=m.next,m.next=r),l.pending=r}d!==0&&Vu(s,r,d)}}function Gi(e,t,s,l){xa[In++]=e,xa[In++]=t,xa[In++]=s,xa[In++]=l,Ro|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Uo(e,t,s,l){return Gi(e,t,s,l),Yi(e)}function en(e,t){return Gi(e,null,null,t),Yi(e)}function Vu(e,t,s){e.lanes|=s;var l=e.alternate;l!==null&&(l.lanes|=s);for(var r=!1,d=e.return;d!==null;)d.childLanes|=s,l=d.alternate,l!==null&&(l.childLanes|=s),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(r=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,r&&t!==null&&(r=31-Re(s),e=d.hiddenUpdates,l=e[r],l===null?e[r]=[t]:l.push(t),t.lane=s|536870912),d):null}function Yi(e){if(50<si)throw si=0,Fc=null,Error(c(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Hn={};function Zx(e,t,s,l){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ra(e,t,s,l){return new Zx(e,t,s,l)}function Lo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Za(e,t){var s=e.alternate;return s===null?(s=ra(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function Qu(e,t){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,t=s.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Fi(e,t,s,l,r,d){var m=0;if(l=e,typeof e=="function")Lo(e)&&(m=1);else if(typeof e=="string")m=tb(e,s,ce.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case re:return e=ra(31,s,t,r),e.elementType=re,e.lanes=d,e;case T:return tn(s.children,r,d,t);case C:m=8,r|=24;break;case I:return e=ra(12,s,t,r|2),e.elementType=I,e.lanes=d,e;case H:return e=ra(13,s,t,r),e.elementType=H,e.lanes=d,e;case se:return e=ra(19,s,t,r),e.elementType=se,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Q:m=10;break e;case L:m=9;break e;case D:m=11;break e;case W:m=14;break e;case X:m=16,l=null;break e}m=29,s=Error(c(130,e===null?"null":typeof e,"")),l=null}return t=ra(m,s,t,r),t.elementType=e,t.type=l,t.lanes=d,t}function tn(e,t,s,l){return e=ra(7,e,l,t),e.lanes=s,e}function qo(e,t,s){return e=ra(6,e,null,t),e.lanes=s,e}function Xu(e){var t=ra(18,null,null,0);return t.stateNode=e,t}function Bo(e,t,s){return t=ra(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ku=new WeakMap;function ba(e,t){if(typeof e=="object"&&e!==null){var s=Ku.get(e);return s!==void 0?s:(t={value:e,source:t,stack:ze(t)},Ku.set(e,t),t)}return{value:e,source:t,stack:ze(t)}}var $n=[],Gn=0,Vi=null,Ul=0,ya=[],va=0,ys=null,Ua=1,La="";function Pa(e,t){$n[Gn++]=Ul,$n[Gn++]=Vi,Vi=e,Ul=t}function Zu(e,t,s){ya[va++]=Ua,ya[va++]=La,ya[va++]=ys,ys=e;var l=Ua;e=La;var r=32-Re(l)-1;l&=~(1<<r),s+=1;var d=32-Re(t)+r;if(30<d){var m=r-r%5;d=(l&(1<<m)-1).toString(32),l>>=m,r-=m,Ua=1<<32-Re(t)+r|s<<r|l,La=d+e}else Ua=1<<d|s<<r|l,La=e}function Io(e){e.return!==null&&(Pa(e,1),Zu(e,1,0))}function Ho(e){for(;e===Vi;)Vi=$n[--Gn],$n[Gn]=null,Ul=$n[--Gn],$n[Gn]=null;for(;e===ys;)ys=ya[--va],ya[va]=null,La=ya[--va],ya[va]=null,Ua=ya[--va],ya[va]=null}function Pu(e,t){ya[va++]=Ua,ya[va++]=La,ya[va++]=ys,Ua=t.id,La=t.overflow,ys=e}var It=null,ut=null,Qe=!1,vs=null,ja=!1,$o=Error(c(519));function js(e){var t=Error(c(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ll(ba(t,e)),$o}function Ju(e){var t=e.stateNode,s=e.type,l=e.memoizedProps;switch(t[Bt]=e,t[Pt]=l,s){case"dialog":$e("cancel",t),$e("close",t);break;case"iframe":case"object":case"embed":$e("load",t);break;case"video":case"audio":for(s=0;s<li.length;s++)$e(li[s],t);break;case"source":$e("error",t);break;case"img":case"image":case"link":$e("error",t),$e("load",t);break;case"details":$e("toggle",t);break;case"input":$e("invalid",t),uu(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":$e("invalid",t);break;case"textarea":$e("invalid",t),fu(t,l.value,l.defaultValue,l.children)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||t.textContent===""+s||l.suppressHydrationWarning===!0||gp(t.textContent,s)?(l.popover!=null&&($e("beforetoggle",t),$e("toggle",t)),l.onScroll!=null&&$e("scroll",t),l.onScrollEnd!=null&&$e("scrollend",t),l.onClick!=null&&(t.onclick=Xa),t=!0):t=!1,t||js(e,!0)}function Wu(e){for(It=e.return;It;)switch(It.tag){case 5:case 31:case 13:ja=!1;return;case 27:case 3:ja=!0;return;default:It=It.return}}function Yn(e){if(e!==It)return!1;if(!Qe)return Wu(e),Qe=!0,!1;var t=e.tag,s;if((s=t!==3&&t!==27)&&((s=t===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||id(e.type,e.memoizedProps)),s=!s),s&&ut&&js(e),Wu(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));ut=Sp(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));ut=Sp(e)}else t===27?(t=ut,Rs(e.type)?(e=ud,ud=null,ut=e):ut=t):ut=It?Na(e.stateNode.nextSibling):null;return!0}function an(){ut=It=null,Qe=!1}function Go(){var e=vs;return e!==null&&(aa===null?aa=e:aa.push.apply(aa,e),vs=null),e}function Ll(e){vs===null?vs=[e]:vs.push(e)}var Yo=R(null),sn=null,Ja=null;function _s(e,t,s){M(Yo,t._currentValue),t._currentValue=s}function Wa(e){e._currentValue=Yo.current,B(Yo)}function Fo(e,t,s){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===s)break;e=e.return}}function Vo(e,t,s,l){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var d=r.dependencies;if(d!==null){var m=r.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=r;for(var k=0;k<t.length;k++)if(b.context===t[k]){d.lanes|=s,b=d.alternate,b!==null&&(b.lanes|=s),Fo(d.return,s,e),l||(m=null);break e}d=b.next}}else if(r.tag===18){if(m=r.return,m===null)throw Error(c(341));m.lanes|=s,d=m.alternate,d!==null&&(d.lanes|=s),Fo(m,s,e),m=null}else m=r.child;if(m!==null)m.return=r;else for(m=r;m!==null;){if(m===e){m=null;break}if(r=m.sibling,r!==null){r.return=m.return,m=r;break}m=m.return}r=m}}function Fn(e,t,s,l){e=null;for(var r=t,d=!1;r!==null;){if(!d){if((r.flags&524288)!==0)d=!0;else if((r.flags&262144)!==0)break}if(r.tag===10){var m=r.alternate;if(m===null)throw Error(c(387));if(m=m.memoizedProps,m!==null){var b=r.type;ia(r.pendingProps.value,m.value)||(e!==null?e.push(b):e=[b])}}else if(r===te.current){if(m=r.alternate,m===null)throw Error(c(387));m.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(di):e=[di])}r=r.return}e!==null&&Vo(t,e,s,l),t.flags|=262144}function Qi(e){for(e=e.firstContext;e!==null;){if(!ia(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function nn(e){sn=e,Ja=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ht(e){return em(sn,e)}function Xi(e,t){return sn===null&&nn(e),em(e,t)}function em(e,t){var s=t._currentValue;if(t={context:t,memoizedValue:s,next:null},Ja===null){if(e===null)throw Error(c(308));Ja=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ja=Ja.next=t;return s}var Px=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(s,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(s){return s()})}},Jx=n.unstable_scheduleCallback,Wx=n.unstable_NormalPriority,kt={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qo(){return{controller:new Px,data:new Map,refCount:0}}function ql(e){e.refCount--,e.refCount===0&&Jx(Wx,function(){e.controller.abort()})}var Bl=null,Xo=0,Vn=0,Qn=null;function e0(e,t){if(Bl===null){var s=Bl=[];Xo=0,Vn=Pc(),Qn={status:"pending",value:void 0,then:function(l){s.push(l)}}}return Xo++,t.then(tm,tm),t}function tm(){if(--Xo===0&&Bl!==null){Qn!==null&&(Qn.status="fulfilled");var e=Bl;Bl=null,Vn=0,Qn=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function t0(e,t){var s=[],l={status:"pending",value:null,reason:null,then:function(r){s.push(r)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var r=0;r<s.length;r++)(0,s[r])(t)},function(r){for(l.status="rejected",l.reason=r,r=0;r<s.length;r++)(0,s[r])(void 0)}),l}var am=_.S;_.S=function(e,t){If=ft(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&e0(e,t),am!==null&&am(e,t)};var ln=R(null);function Ko(){var e=ln.current;return e!==null?e:ct.pooledCache}function Ki(e,t){t===null?M(ln,ln.current):M(ln,t.pool)}function sm(){var e=Ko();return e===null?null:{parent:kt._currentValue,pool:e}}var Xn=Error(c(460)),Zo=Error(c(474)),Zi=Error(c(542)),Pi={then:function(){}};function nm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function lm(e,t,s){switch(s=e[s],s===void 0?e.push(t):s!==t&&(t.then(Xa,Xa),t=s),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,rm(e),e;default:if(typeof t.status=="string")t.then(Xa,Xa);else{if(e=ct,e!==null&&100<e.shellSuspendCounter)throw Error(c(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=l}},function(l){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,rm(e),e}throw on=t,Xn}}function rn(e){try{var t=e._init;return t(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(on=s,Xn):s}}var on=null;function im(){if(on===null)throw Error(c(459));var e=on;return on=null,e}function rm(e){if(e===Xn||e===Zi)throw Error(c(483))}var Kn=null,Il=0;function Ji(e){var t=Il;return Il+=1,Kn===null&&(Kn=[]),lm(Kn,e,t)}function Hl(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Wi(e,t){throw t.$$typeof===j?Error(c(525)):(e=Object.prototype.toString.call(t),Error(c(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function om(e){function t(U,O){if(e){var $=U.deletions;$===null?(U.deletions=[O],U.flags|=16):$.push(O)}}function s(U,O){if(!e)return null;for(;O!==null;)t(U,O),O=O.sibling;return null}function l(U){for(var O=new Map;U!==null;)U.key!==null?O.set(U.key,U):O.set(U.index,U),U=U.sibling;return O}function r(U,O){return U=Za(U,O),U.index=0,U.sibling=null,U}function d(U,O,$){return U.index=$,e?($=U.alternate,$!==null?($=$.index,$<O?(U.flags|=67108866,O):$):(U.flags|=67108866,O)):(U.flags|=1048576,O)}function m(U){return e&&U.alternate===null&&(U.flags|=67108866),U}function b(U,O,$,ae){return O===null||O.tag!==6?(O=qo($,U.mode,ae),O.return=U,O):(O=r(O,$),O.return=U,O)}function k(U,O,$,ae){var Ce=$.type;return Ce===T?ee(U,O,$.props.children,ae,$.key):O!==null&&(O.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===X&&rn(Ce)===O.type)?(O=r(O,$.props),Hl(O,$),O.return=U,O):(O=Fi($.type,$.key,$.props,null,U.mode,ae),Hl(O,$),O.return=U,O)}function Y(U,O,$,ae){return O===null||O.tag!==4||O.stateNode.containerInfo!==$.containerInfo||O.stateNode.implementation!==$.implementation?(O=Bo($,U.mode,ae),O.return=U,O):(O=r(O,$.children||[]),O.return=U,O)}function ee(U,O,$,ae,Ce){return O===null||O.tag!==7?(O=tn($,U.mode,ae,Ce),O.return=U,O):(O=r(O,$),O.return=U,O)}function ne(U,O,$){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=qo(""+O,U.mode,$),O.return=U,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case S:return $=Fi(O.type,O.key,O.props,null,U.mode,$),Hl($,O),$.return=U,$;case w:return O=Bo(O,U.mode,$),O.return=U,O;case X:return O=rn(O),ne(U,O,$)}if(le(O)||A(O))return O=tn(O,U.mode,$,null),O.return=U,O;if(typeof O.then=="function")return ne(U,Ji(O),$);if(O.$$typeof===Q)return ne(U,Xi(U,O),$);Wi(U,O)}return null}function V(U,O,$,ae){var Ce=O!==null?O.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return Ce!==null?null:b(U,O,""+$,ae);if(typeof $=="object"&&$!==null){switch($.$$typeof){case S:return $.key===Ce?k(U,O,$,ae):null;case w:return $.key===Ce?Y(U,O,$,ae):null;case X:return $=rn($),V(U,O,$,ae)}if(le($)||A($))return Ce!==null?null:ee(U,O,$,ae,null);if(typeof $.then=="function")return V(U,O,Ji($),ae);if($.$$typeof===Q)return V(U,O,Xi(U,$),ae);Wi(U,$)}return null}function J(U,O,$,ae,Ce){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return U=U.get($)||null,b(O,U,""+ae,Ce);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case S:return U=U.get(ae.key===null?$:ae.key)||null,k(O,U,ae,Ce);case w:return U=U.get(ae.key===null?$:ae.key)||null,Y(O,U,ae,Ce);case X:return ae=rn(ae),J(U,O,$,ae,Ce)}if(le(ae)||A(ae))return U=U.get($)||null,ee(O,U,ae,Ce,null);if(typeof ae.then=="function")return J(U,O,$,Ji(ae),Ce);if(ae.$$typeof===Q)return J(U,O,$,Xi(O,ae),Ce);Wi(O,ae)}return null}function ve(U,O,$,ae){for(var Ce=null,et=null,je=O,De=O=0,Ye=null;je!==null&&De<$.length;De++){je.index>De?(Ye=je,je=null):Ye=je.sibling;var tt=V(U,je,$[De],ae);if(tt===null){je===null&&(je=Ye);break}e&&je&&tt.alternate===null&&t(U,je),O=d(tt,O,De),et===null?Ce=tt:et.sibling=tt,et=tt,je=Ye}if(De===$.length)return s(U,je),Qe&&Pa(U,De),Ce;if(je===null){for(;De<$.length;De++)je=ne(U,$[De],ae),je!==null&&(O=d(je,O,De),et===null?Ce=je:et.sibling=je,et=je);return Qe&&Pa(U,De),Ce}for(je=l(je);De<$.length;De++)Ye=J(je,U,De,$[De],ae),Ye!==null&&(e&&Ye.alternate!==null&&je.delete(Ye.key===null?De:Ye.key),O=d(Ye,O,De),et===null?Ce=Ye:et.sibling=Ye,et=Ye);return e&&je.forEach(function(Is){return t(U,Is)}),Qe&&Pa(U,De),Ce}function Te(U,O,$,ae){if($==null)throw Error(c(151));for(var Ce=null,et=null,je=O,De=O=0,Ye=null,tt=$.next();je!==null&&!tt.done;De++,tt=$.next()){je.index>De?(Ye=je,je=null):Ye=je.sibling;var Is=V(U,je,tt.value,ae);if(Is===null){je===null&&(je=Ye);break}e&&je&&Is.alternate===null&&t(U,je),O=d(Is,O,De),et===null?Ce=Is:et.sibling=Is,et=Is,je=Ye}if(tt.done)return s(U,je),Qe&&Pa(U,De),Ce;if(je===null){for(;!tt.done;De++,tt=$.next())tt=ne(U,tt.value,ae),tt!==null&&(O=d(tt,O,De),et===null?Ce=tt:et.sibling=tt,et=tt);return Qe&&Pa(U,De),Ce}for(je=l(je);!tt.done;De++,tt=$.next())tt=J(je,U,De,tt.value,ae),tt!==null&&(e&&tt.alternate!==null&&je.delete(tt.key===null?De:tt.key),O=d(tt,O,De),et===null?Ce=tt:et.sibling=tt,et=tt);return e&&je.forEach(function(mb){return t(U,mb)}),Qe&&Pa(U,De),Ce}function rt(U,O,$,ae){if(typeof $=="object"&&$!==null&&$.type===T&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case S:e:{for(var Ce=$.key;O!==null;){if(O.key===Ce){if(Ce=$.type,Ce===T){if(O.tag===7){s(U,O.sibling),ae=r(O,$.props.children),ae.return=U,U=ae;break e}}else if(O.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===X&&rn(Ce)===O.type){s(U,O.sibling),ae=r(O,$.props),Hl(ae,$),ae.return=U,U=ae;break e}s(U,O);break}else t(U,O);O=O.sibling}$.type===T?(ae=tn($.props.children,U.mode,ae,$.key),ae.return=U,U=ae):(ae=Fi($.type,$.key,$.props,null,U.mode,ae),Hl(ae,$),ae.return=U,U=ae)}return m(U);case w:e:{for(Ce=$.key;O!==null;){if(O.key===Ce)if(O.tag===4&&O.stateNode.containerInfo===$.containerInfo&&O.stateNode.implementation===$.implementation){s(U,O.sibling),ae=r(O,$.children||[]),ae.return=U,U=ae;break e}else{s(U,O);break}else t(U,O);O=O.sibling}ae=Bo($,U.mode,ae),ae.return=U,U=ae}return m(U);case X:return $=rn($),rt(U,O,$,ae)}if(le($))return ve(U,O,$,ae);if(A($)){if(Ce=A($),typeof Ce!="function")throw Error(c(150));return $=Ce.call($),Te(U,O,$,ae)}if(typeof $.then=="function")return rt(U,O,Ji($),ae);if($.$$typeof===Q)return rt(U,O,Xi(U,$),ae);Wi(U,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,O!==null&&O.tag===6?(s(U,O.sibling),ae=r(O,$),ae.return=U,U=ae):(s(U,O),ae=qo($,U.mode,ae),ae.return=U,U=ae),m(U)):s(U,O)}return function(U,O,$,ae){try{Il=0;var Ce=rt(U,O,$,ae);return Kn=null,Ce}catch(je){if(je===Xn||je===Zi)throw je;var et=ra(29,je,null,U.mode);return et.lanes=ae,et.return=U,et}finally{}}}var cn=om(!0),cm=om(!1),Ns=!1;function Po(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Jo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ws(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ss(e,t,s){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(at&2)!==0){var r=l.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),l.pending=t,t=Yi(e),Vu(e,null,s),t}return Gi(e,l,t,s),Yi(e)}function $l(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,s|=l,t.lanes=s,Ks(e,s)}}function Wo(e,t){var s=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var r=null,d=null;if(s=s.firstBaseUpdate,s!==null){do{var m={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};d===null?r=d=m:d=d.next=m,s=s.next}while(s!==null);d===null?r=d=t:d=d.next=t}else r=d=t;s={baseState:l.baseState,firstBaseUpdate:r,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}var ec=!1;function Gl(){if(ec){var e=Qn;if(e!==null)throw e}}function Yl(e,t,s,l){ec=!1;var r=e.updateQueue;Ns=!1;var d=r.firstBaseUpdate,m=r.lastBaseUpdate,b=r.shared.pending;if(b!==null){r.shared.pending=null;var k=b,Y=k.next;k.next=null,m===null?d=Y:m.next=Y,m=k;var ee=e.alternate;ee!==null&&(ee=ee.updateQueue,b=ee.lastBaseUpdate,b!==m&&(b===null?ee.firstBaseUpdate=Y:b.next=Y,ee.lastBaseUpdate=k))}if(d!==null){var ne=r.baseState;m=0,ee=Y=k=null,b=d;do{var V=b.lane&-536870913,J=V!==b.lane;if(J?(Ge&V)===V:(l&V)===V){V!==0&&V===Vn&&(ec=!0),ee!==null&&(ee=ee.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var ve=e,Te=b;V=t;var rt=s;switch(Te.tag){case 1:if(ve=Te.payload,typeof ve=="function"){ne=ve.call(rt,ne,V);break e}ne=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=Te.payload,V=typeof ve=="function"?ve.call(rt,ne,V):ve,V==null)break e;ne=N({},ne,V);break e;case 2:Ns=!0}}V=b.callback,V!==null&&(e.flags|=64,J&&(e.flags|=8192),J=r.callbacks,J===null?r.callbacks=[V]:J.push(V))}else J={lane:V,tag:b.tag,payload:b.payload,callback:b.callback,next:null},ee===null?(Y=ee=J,k=ne):ee=ee.next=J,m|=V;if(b=b.next,b===null){if(b=r.shared.pending,b===null)break;J=b,b=J.next,J.next=null,r.lastBaseUpdate=J,r.shared.pending=null}}while(!0);ee===null&&(k=ne),r.baseState=k,r.firstBaseUpdate=Y,r.lastBaseUpdate=ee,d===null&&(r.shared.lanes=0),Ms|=m,e.lanes=m,e.memoizedState=ne}}function dm(e,t){if(typeof e!="function")throw Error(c(191,e));e.call(t)}function um(e,t){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)dm(s[e],t)}var Zn=R(null),er=R(0);function mm(e,t){e=os,M(er,e),M(Zn,t),os=e|t.baseLanes}function tc(){M(er,os),M(Zn,Zn.current)}function ac(){os=er.current,B(Zn),B(er)}var oa=R(null),_a=null;function Cs(e){var t=e.alternate;M(wt,wt.current&1),M(oa,e),_a===null&&(t===null||Zn.current!==null||t.memoizedState!==null)&&(_a=e)}function sc(e){M(wt,wt.current),M(oa,e),_a===null&&(_a=e)}function fm(e){e.tag===22?(M(wt,wt.current),M(oa,e),_a===null&&(_a=e)):ks()}function ks(){M(wt,wt.current),M(oa,oa.current)}function ca(e){B(oa),_a===e&&(_a=null),B(wt)}var wt=R(0);function tr(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||cd(s)||dd(s)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var es=0,Oe=null,lt=null,Tt=null,ar=!1,Pn=!1,dn=!1,sr=0,Fl=0,Jn=null,a0=0;function vt(){throw Error(c(321))}function nc(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!ia(e[s],t[s]))return!1;return!0}function lc(e,t,s,l,r,d){return es=d,Oe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_.H=e===null||e.memoizedState===null?Zm:vc,dn=!1,d=s(l,r),dn=!1,Pn&&(d=hm(t,s,l,r)),pm(e),d}function pm(e){_.H=Xl;var t=lt!==null&&lt.next!==null;if(es=0,Tt=lt=Oe=null,ar=!1,Fl=0,Jn=null,t)throw Error(c(300));e===null||Et||(e=e.dependencies,e!==null&&Qi(e)&&(Et=!0))}function hm(e,t,s,l){Oe=e;var r=0;do{if(Pn&&(Jn=null),Fl=0,Pn=!1,25<=r)throw Error(c(301));if(r+=1,Tt=lt=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}_.H=Pm,d=t(s,l)}while(Pn);return d}function s0(){var e=_.H,t=e.useState()[0];return t=typeof t.then=="function"?Vl(t):t,e=e.useState()[0],(lt!==null?lt.memoizedState:null)!==e&&(Oe.flags|=1024),t}function ic(){var e=sr!==0;return sr=0,e}function rc(e,t,s){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s}function oc(e){if(ar){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}ar=!1}es=0,Tt=lt=Oe=null,Pn=!1,Fl=sr=0,Jn=null}function Qt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?Oe.memoizedState=Tt=e:Tt=Tt.next=e,Tt}function St(){if(lt===null){var e=Oe.alternate;e=e!==null?e.memoizedState:null}else e=lt.next;var t=Tt===null?Oe.memoizedState:Tt.next;if(t!==null)Tt=t,lt=e;else{if(e===null)throw Oe.alternate===null?Error(c(467)):Error(c(310));lt=e,e={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},Tt===null?Oe.memoizedState=Tt=e:Tt=Tt.next=e}return Tt}function nr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vl(e){var t=Fl;return Fl+=1,Jn===null&&(Jn=[]),e=lm(Jn,e,t),t=Oe,(Tt===null?t.memoizedState:Tt.next)===null&&(t=t.alternate,_.H=t===null||t.memoizedState===null?Zm:vc),e}function lr(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Vl(e);if(e.$$typeof===Q)return Ht(e)}throw Error(c(438,String(e)))}function cc(e){var t=null,s=Oe.updateQueue;if(s!==null&&(t=s.memoCache),t==null){var l=Oe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),s===null&&(s=nr(),Oe.updateQueue=s),s.memoCache=t,s=t.data[t.index],s===void 0)for(s=t.data[t.index]=Array(e),l=0;l<e;l++)s[l]=G;return t.index++,s}function ts(e,t){return typeof t=="function"?t(e):t}function ir(e){var t=St();return dc(t,lt,e)}function dc(e,t,s){var l=e.queue;if(l===null)throw Error(c(311));l.lastRenderedReducer=s;var r=e.baseQueue,d=l.pending;if(d!==null){if(r!==null){var m=r.next;r.next=d.next,d.next=m}t.baseQueue=r=d,l.pending=null}if(d=e.baseState,r===null)e.memoizedState=d;else{t=r.next;var b=m=null,k=null,Y=t,ee=!1;do{var ne=Y.lane&-536870913;if(ne!==Y.lane?(Ge&ne)===ne:(es&ne)===ne){var V=Y.revertLane;if(V===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),ne===Vn&&(ee=!0);else if((es&V)===V){Y=Y.next,V===Vn&&(ee=!0);continue}else ne={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},k===null?(b=k=ne,m=d):k=k.next=ne,Oe.lanes|=V,Ms|=V;ne=Y.action,dn&&s(d,ne),d=Y.hasEagerState?Y.eagerState:s(d,ne)}else V={lane:ne,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},k===null?(b=k=V,m=d):k=k.next=V,Oe.lanes|=ne,Ms|=ne;Y=Y.next}while(Y!==null&&Y!==t);if(k===null?m=d:k.next=b,!ia(d,e.memoizedState)&&(Et=!0,ee&&(s=Qn,s!==null)))throw s;e.memoizedState=d,e.baseState=m,e.baseQueue=k,l.lastRenderedState=d}return r===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function uc(e){var t=St(),s=t.queue;if(s===null)throw Error(c(311));s.lastRenderedReducer=e;var l=s.dispatch,r=s.pending,d=t.memoizedState;if(r!==null){s.pending=null;var m=r=r.next;do d=e(d,m.action),m=m.next;while(m!==r);ia(d,t.memoizedState)||(Et=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),s.lastRenderedState=d}return[d,l]}function gm(e,t,s){var l=Oe,r=St(),d=Qe;if(d){if(s===void 0)throw Error(c(407));s=s()}else s=t();var m=!ia((lt||r).memoizedState,s);if(m&&(r.memoizedState=s,Et=!0),r=r.queue,pc(ym.bind(null,l,r,e),[e]),r.getSnapshot!==t||m||Tt!==null&&Tt.memoizedState.tag&1){if(l.flags|=2048,Wn(9,{destroy:void 0},bm.bind(null,l,r,s,t),null),ct===null)throw Error(c(349));d||(es&127)!==0||xm(l,t,s)}return s}function xm(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Oe.updateQueue,t===null?(t=nr(),Oe.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function bm(e,t,s,l){t.value=s,t.getSnapshot=l,vm(t)&&jm(e)}function ym(e,t,s){return s(function(){vm(t)&&jm(e)})}function vm(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!ia(e,s)}catch{return!0}}function jm(e){var t=en(e,2);t!==null&&sa(t,e,2)}function mc(e){var t=Qt();if(typeof e=="function"){var s=e;if(e=s(),dn){Ee(!0);try{s()}finally{Ee(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:e},t}function _m(e,t,s,l){return e.baseState=s,dc(e,lt,typeof l=="function"?l:ts)}function n0(e,t,s,l,r){if(cr(e))throw Error(c(485));if(e=t.action,e!==null){var d={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(m){d.listeners.push(m)}};_.T!==null?s(!0):d.isTransition=!1,l(d),s=t.pending,s===null?(d.next=t.pending=d,Nm(t,d)):(d.next=s.next,t.pending=s.next=d)}}function Nm(e,t){var s=t.action,l=t.payload,r=e.state;if(t.isTransition){var d=_.T,m={};_.T=m;try{var b=s(r,l),k=_.S;k!==null&&k(m,b),wm(e,t,b)}catch(Y){fc(e,t,Y)}finally{d!==null&&m.types!==null&&(d.types=m.types),_.T=d}}else try{d=s(r,l),wm(e,t,d)}catch(Y){fc(e,t,Y)}}function wm(e,t,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){Sm(e,t,l)},function(l){return fc(e,t,l)}):Sm(e,t,s)}function Sm(e,t,s){t.status="fulfilled",t.value=s,Cm(t),e.state=s,t=e.pending,t!==null&&(s=t.next,s===t?e.pending=null:(s=s.next,t.next=s,Nm(e,s)))}function fc(e,t,s){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=s,Cm(t),t=t.next;while(t!==l)}e.action=null}function Cm(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function km(e,t){return t}function Tm(e,t){if(Qe){var s=ct.formState;if(s!==null){e:{var l=Oe;if(Qe){if(ut){t:{for(var r=ut,d=ja;r.nodeType!==8;){if(!d){r=null;break t}if(r=Na(r.nextSibling),r===null){r=null;break t}}d=r.data,r=d==="F!"||d==="F"?r:null}if(r){ut=Na(r.nextSibling),l=r.data==="F!";break e}}js(l)}l=!1}l&&(t=s[0])}}return s=Qt(),s.memoizedState=s.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:km,lastRenderedState:t},s.queue=l,s=Qm.bind(null,Oe,l),l.dispatch=s,l=mc(!1),d=yc.bind(null,Oe,!1,l.queue),l=Qt(),r={state:t,dispatch:null,action:e,pending:null},l.queue=r,s=n0.bind(null,Oe,r,d,s),r.dispatch=s,l.memoizedState=e,[t,s,!1]}function Em(e){var t=St();return Mm(t,lt,e)}function Mm(e,t,s){if(t=dc(e,t,km)[0],e=ir(ts)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=Vl(t)}catch(m){throw m===Xn?Zi:m}else l=t;t=St();var r=t.queue,d=r.dispatch;return s!==t.memoizedState&&(Oe.flags|=2048,Wn(9,{destroy:void 0},l0.bind(null,r,s),null)),[l,d,e]}function l0(e,t){e.action=t}function Am(e){var t=St(),s=lt;if(s!==null)return Mm(t,s,e);St(),t=t.memoizedState,s=St();var l=s.queue.dispatch;return s.memoizedState=e,[t,l,!1]}function Wn(e,t,s,l){return e={tag:e,create:s,deps:l,inst:t,next:null},t=Oe.updateQueue,t===null&&(t=nr(),Oe.updateQueue=t),s=t.lastEffect,s===null?t.lastEffect=e.next=e:(l=s.next,s.next=e,e.next=l,t.lastEffect=e),e}function zm(){return St().memoizedState}function rr(e,t,s,l){var r=Qt();Oe.flags|=e,r.memoizedState=Wn(1|t,{destroy:void 0},s,l===void 0?null:l)}function or(e,t,s,l){var r=St();l=l===void 0?null:l;var d=r.memoizedState.inst;lt!==null&&l!==null&&nc(l,lt.memoizedState.deps)?r.memoizedState=Wn(t,d,s,l):(Oe.flags|=e,r.memoizedState=Wn(1|t,d,s,l))}function Om(e,t){rr(8390656,8,e,t)}function pc(e,t){or(2048,8,e,t)}function i0(e){Oe.flags|=4;var t=Oe.updateQueue;if(t===null)t=nr(),Oe.updateQueue=t,t.events=[e];else{var s=t.events;s===null?t.events=[e]:s.push(e)}}function Dm(e){var t=St().memoizedState;return i0({ref:t,nextImpl:e}),function(){if((at&2)!==0)throw Error(c(440));return t.impl.apply(void 0,arguments)}}function Rm(e,t){return or(4,2,e,t)}function Um(e,t){return or(4,4,e,t)}function Lm(e,t){if(typeof t=="function"){e=e();var s=t(e);return function(){typeof s=="function"?s():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function qm(e,t,s){s=s!=null?s.concat([e]):null,or(4,4,Lm.bind(null,t,e),s)}function hc(){}function Bm(e,t){var s=St();t=t===void 0?null:t;var l=s.memoizedState;return t!==null&&nc(t,l[1])?l[0]:(s.memoizedState=[e,t],e)}function Im(e,t){var s=St();t=t===void 0?null:t;var l=s.memoizedState;if(t!==null&&nc(t,l[1]))return l[0];if(l=e(),dn){Ee(!0);try{e()}finally{Ee(!1)}}return s.memoizedState=[l,t],l}function gc(e,t,s){return s===void 0||(es&1073741824)!==0&&(Ge&261930)===0?e.memoizedState=t:(e.memoizedState=s,e=$f(),Oe.lanes|=e,Ms|=e,s)}function Hm(e,t,s,l){return ia(s,t)?s:Zn.current!==null?(e=gc(e,s,l),ia(e,t)||(Et=!0),e):(es&42)===0||(es&1073741824)!==0&&(Ge&261930)===0?(Et=!0,e.memoizedState=s):(e=$f(),Oe.lanes|=e,Ms|=e,t)}function $m(e,t,s,l,r){var d=E.p;E.p=d!==0&&8>d?d:8;var m=_.T,b={};_.T=b,yc(e,!1,t,s);try{var k=r(),Y=_.S;if(Y!==null&&Y(b,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var ee=t0(k,l);Ql(e,t,ee,ma(e))}else Ql(e,t,l,ma(e))}catch(ne){Ql(e,t,{then:function(){},status:"rejected",reason:ne},ma())}finally{E.p=d,m!==null&&b.types!==null&&(m.types=b.types),_.T=m}}function r0(){}function xc(e,t,s,l){if(e.tag!==5)throw Error(c(476));var r=Gm(e).queue;$m(e,r,t,z,s===null?r0:function(){return Ym(e),s(l)})}function Gm(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:z,baseState:z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:z},next:null};var s={};return t.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:s},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Ym(e){var t=Gm(e);t.next===null&&(t=e.alternate.memoizedState),Ql(e,t.next.queue,{},ma())}function bc(){return Ht(di)}function Fm(){return St().memoizedState}function Vm(){return St().memoizedState}function o0(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var s=ma();e=ws(s);var l=Ss(t,e,s);l!==null&&(sa(l,t,s),$l(l,t,s)),t={cache:Qo()},e.payload=t;return}t=t.return}}function c0(e,t,s){var l=ma();s={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},cr(e)?Xm(t,s):(s=Uo(e,t,s,l),s!==null&&(sa(s,e,l),Km(s,t,l)))}function Qm(e,t,s){var l=ma();Ql(e,t,s,l)}function Ql(e,t,s,l){var r={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(cr(e))Xm(t,r);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var m=t.lastRenderedState,b=d(m,s);if(r.hasEagerState=!0,r.eagerState=b,ia(b,m))return Gi(e,t,r,0),ct===null&&$i(),!1}catch{}finally{}if(s=Uo(e,t,r,l),s!==null)return sa(s,e,l),Km(s,t,l),!0}return!1}function yc(e,t,s,l){if(l={lane:2,revertLane:Pc(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},cr(e)){if(t)throw Error(c(479))}else t=Uo(e,s,l,2),t!==null&&sa(t,e,2)}function cr(e){var t=e.alternate;return e===Oe||t!==null&&t===Oe}function Xm(e,t){Pn=ar=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Km(e,t,s){if((s&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,s|=l,t.lanes=s,Ks(e,s)}}var Xl={readContext:Ht,use:lr,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useLayoutEffect:vt,useInsertionEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useSyncExternalStore:vt,useId:vt,useHostTransitionStatus:vt,useFormState:vt,useActionState:vt,useOptimistic:vt,useMemoCache:vt,useCacheRefresh:vt};Xl.useEffectEvent=vt;var Zm={readContext:Ht,use:lr,useCallback:function(e,t){return Qt().memoizedState=[e,t===void 0?null:t],e},useContext:Ht,useEffect:Om,useImperativeHandle:function(e,t,s){s=s!=null?s.concat([e]):null,rr(4194308,4,Lm.bind(null,t,e),s)},useLayoutEffect:function(e,t){return rr(4194308,4,e,t)},useInsertionEffect:function(e,t){rr(4,2,e,t)},useMemo:function(e,t){var s=Qt();t=t===void 0?null:t;var l=e();if(dn){Ee(!0);try{e()}finally{Ee(!1)}}return s.memoizedState=[l,t],l},useReducer:function(e,t,s){var l=Qt();if(s!==void 0){var r=s(t);if(dn){Ee(!0);try{s(t)}finally{Ee(!1)}}}else r=t;return l.memoizedState=l.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},l.queue=e,e=e.dispatch=c0.bind(null,Oe,e),[l.memoizedState,e]},useRef:function(e){var t=Qt();return e={current:e},t.memoizedState=e},useState:function(e){e=mc(e);var t=e.queue,s=Qm.bind(null,Oe,t);return t.dispatch=s,[e.memoizedState,s]},useDebugValue:hc,useDeferredValue:function(e,t){var s=Qt();return gc(s,e,t)},useTransition:function(){var e=mc(!1);return e=$m.bind(null,Oe,e.queue,!0,!1),Qt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,s){var l=Oe,r=Qt();if(Qe){if(s===void 0)throw Error(c(407));s=s()}else{if(s=t(),ct===null)throw Error(c(349));(Ge&127)!==0||xm(l,t,s)}r.memoizedState=s;var d={value:s,getSnapshot:t};return r.queue=d,Om(ym.bind(null,l,d,e),[e]),l.flags|=2048,Wn(9,{destroy:void 0},bm.bind(null,l,d,s,t),null),s},useId:function(){var e=Qt(),t=ct.identifierPrefix;if(Qe){var s=La,l=Ua;s=(l&~(1<<32-Re(l)-1)).toString(32)+s,t="_"+t+"R_"+s,s=sr++,0<s&&(t+="H"+s.toString(32)),t+="_"}else s=a0++,t="_"+t+"r_"+s.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:bc,useFormState:Tm,useActionState:Tm,useOptimistic:function(e){var t=Qt();t.memoizedState=t.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=s,t=yc.bind(null,Oe,!0,s),s.dispatch=t,[e,t]},useMemoCache:cc,useCacheRefresh:function(){return Qt().memoizedState=o0.bind(null,Oe)},useEffectEvent:function(e){var t=Qt(),s={impl:e};return t.memoizedState=s,function(){if((at&2)!==0)throw Error(c(440));return s.impl.apply(void 0,arguments)}}},vc={readContext:Ht,use:lr,useCallback:Bm,useContext:Ht,useEffect:pc,useImperativeHandle:qm,useInsertionEffect:Rm,useLayoutEffect:Um,useMemo:Im,useReducer:ir,useRef:zm,useState:function(){return ir(ts)},useDebugValue:hc,useDeferredValue:function(e,t){var s=St();return Hm(s,lt.memoizedState,e,t)},useTransition:function(){var e=ir(ts)[0],t=St().memoizedState;return[typeof e=="boolean"?e:Vl(e),t]},useSyncExternalStore:gm,useId:Fm,useHostTransitionStatus:bc,useFormState:Em,useActionState:Em,useOptimistic:function(e,t){var s=St();return _m(s,lt,e,t)},useMemoCache:cc,useCacheRefresh:Vm};vc.useEffectEvent=Dm;var Pm={readContext:Ht,use:lr,useCallback:Bm,useContext:Ht,useEffect:pc,useImperativeHandle:qm,useInsertionEffect:Rm,useLayoutEffect:Um,useMemo:Im,useReducer:uc,useRef:zm,useState:function(){return uc(ts)},useDebugValue:hc,useDeferredValue:function(e,t){var s=St();return lt===null?gc(s,e,t):Hm(s,lt.memoizedState,e,t)},useTransition:function(){var e=uc(ts)[0],t=St().memoizedState;return[typeof e=="boolean"?e:Vl(e),t]},useSyncExternalStore:gm,useId:Fm,useHostTransitionStatus:bc,useFormState:Am,useActionState:Am,useOptimistic:function(e,t){var s=St();return lt!==null?_m(s,lt,e,t):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:cc,useCacheRefresh:Vm};Pm.useEffectEvent=Dm;function jc(e,t,s,l){t=e.memoizedState,s=s(l,t),s=s==null?t:N({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var _c={enqueueSetState:function(e,t,s){e=e._reactInternals;var l=ma(),r=ws(l);r.payload=t,s!=null&&(r.callback=s),t=Ss(e,r,l),t!==null&&(sa(t,e,l),$l(t,e,l))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var l=ma(),r=ws(l);r.tag=1,r.payload=t,s!=null&&(r.callback=s),t=Ss(e,r,l),t!==null&&(sa(t,e,l),$l(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=ma(),l=ws(s);l.tag=2,t!=null&&(l.callback=t),t=Ss(e,l,s),t!==null&&(sa(t,e,s),$l(t,e,s))}};function Jm(e,t,s,l,r,d,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,m):t.prototype&&t.prototype.isPureReactComponent?!Dl(s,l)||!Dl(r,d):!0}function Wm(e,t,s,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,l),t.state!==e&&_c.enqueueReplaceState(t,t.state,null)}function un(e,t){var s=t;if("ref"in t){s={};for(var l in t)l!=="ref"&&(s[l]=t[l])}if(e=e.defaultProps){s===t&&(s=N({},s));for(var r in e)s[r]===void 0&&(s[r]=e[r])}return s}function ef(e){Hi(e)}function tf(e){console.error(e)}function af(e){Hi(e)}function dr(e,t){try{var s=e.onUncaughtError;s(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function sf(e,t,s){try{var l=e.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Nc(e,t,s){return s=ws(s),s.tag=3,s.payload={element:null},s.callback=function(){dr(e,t)},s}function nf(e){return e=ws(e),e.tag=3,e}function lf(e,t,s,l){var r=s.type.getDerivedStateFromError;if(typeof r=="function"){var d=l.value;e.payload=function(){return r(d)},e.callback=function(){sf(t,s,l)}}var m=s.stateNode;m!==null&&typeof m.componentDidCatch=="function"&&(e.callback=function(){sf(t,s,l),typeof r!="function"&&(As===null?As=new Set([this]):As.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function d0(e,t,s,l,r){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=s.alternate,t!==null&&Fn(t,s,r,!0),s=oa.current,s!==null){switch(s.tag){case 31:case 13:return _a===null?_r():s.alternate===null&&jt===0&&(jt=3),s.flags&=-257,s.flags|=65536,s.lanes=r,l===Pi?s.flags|=16384:(t=s.updateQueue,t===null?s.updateQueue=new Set([l]):t.add(l),Xc(e,l,r)),!1;case 22:return s.flags|=65536,l===Pi?s.flags|=16384:(t=s.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=t):(s=t.retryQueue,s===null?t.retryQueue=new Set([l]):s.add(l)),Xc(e,l,r)),!1}throw Error(c(435,s.tag))}return Xc(e,l,r),_r(),!1}if(Qe)return t=oa.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=r,l!==$o&&(e=Error(c(422),{cause:l}),Ll(ba(e,s)))):(l!==$o&&(t=Error(c(423),{cause:l}),Ll(ba(t,s))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,l=ba(l,s),r=Nc(e.stateNode,l,r),Wo(e,r),jt!==4&&(jt=2)),!1;var d=Error(c(520),{cause:l});if(d=ba(d,s),ai===null?ai=[d]:ai.push(d),jt!==4&&(jt=2),t===null)return!0;l=ba(l,s),s=t;do{switch(s.tag){case 3:return s.flags|=65536,e=r&-r,s.lanes|=e,e=Nc(s.stateNode,l,e),Wo(s,e),!1;case 1:if(t=s.type,d=s.stateNode,(s.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(As===null||!As.has(d))))return s.flags|=65536,r&=-r,s.lanes|=r,r=nf(r),lf(r,e,s,l),Wo(s,r),!1}s=s.return}while(s!==null);return!1}var wc=Error(c(461)),Et=!1;function $t(e,t,s,l){t.child=e===null?cm(t,null,s,l):cn(t,e.child,s,l)}function rf(e,t,s,l,r){s=s.render;var d=t.ref;if("ref"in l){var m={};for(var b in l)b!=="ref"&&(m[b]=l[b])}else m=l;return nn(t),l=lc(e,t,s,m,d,r),b=ic(),e!==null&&!Et?(rc(e,t,r),as(e,t,r)):(Qe&&b&&Io(t),t.flags|=1,$t(e,t,l,r),t.child)}function of(e,t,s,l,r){if(e===null){var d=s.type;return typeof d=="function"&&!Lo(d)&&d.defaultProps===void 0&&s.compare===null?(t.tag=15,t.type=d,cf(e,t,d,l,r)):(e=Fi(s.type,null,l,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!zc(e,r)){var m=d.memoizedProps;if(s=s.compare,s=s!==null?s:Dl,s(m,l)&&e.ref===t.ref)return as(e,t,r)}return t.flags|=1,e=Za(d,l),e.ref=t.ref,e.return=t,t.child=e}function cf(e,t,s,l,r){if(e!==null){var d=e.memoizedProps;if(Dl(d,l)&&e.ref===t.ref)if(Et=!1,t.pendingProps=l=d,zc(e,r))(e.flags&131072)!==0&&(Et=!0);else return t.lanes=e.lanes,as(e,t,r)}return Sc(e,t,s,l,r)}function df(e,t,s,l){var r=l.children,d=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(d=d!==null?d.baseLanes|s:s,e!==null){for(l=t.child=e.child,r=0;l!==null;)r=r|l.lanes|l.childLanes,l=l.sibling;l=r&~d}else l=0,t.child=null;return uf(e,t,d,s,l)}if((s&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ki(t,d!==null?d.cachePool:null),d!==null?mm(t,d):tc(),fm(t);else return l=t.lanes=536870912,uf(e,t,d!==null?d.baseLanes|s:s,s,l)}else d!==null?(Ki(t,d.cachePool),mm(t,d),ks(),t.memoizedState=null):(e!==null&&Ki(t,null),tc(),ks());return $t(e,t,r,s),t.child}function Kl(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function uf(e,t,s,l,r){var d=Ko();return d=d===null?null:{parent:kt._currentValue,pool:d},t.memoizedState={baseLanes:s,cachePool:d},e!==null&&Ki(t,null),tc(),fm(t),e!==null&&Fn(e,t,l,!0),t.childLanes=r,null}function ur(e,t){return t=fr({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function mf(e,t,s){return cn(t,e.child,null,s),e=ur(t,t.pendingProps),e.flags|=2,ca(t),t.memoizedState=null,e}function u0(e,t,s){var l=t.pendingProps,r=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Qe){if(l.mode==="hidden")return e=ur(t,l),t.lanes=536870912,Kl(null,e);if(sc(t),(e=ut)?(e=wp(e,ja),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ys!==null?{id:Ua,overflow:La}:null,retryLane:536870912,hydrationErrors:null},s=Xu(e),s.return=t,t.child=s,It=t,ut=null)):e=null,e===null)throw js(t);return t.lanes=536870912,null}return ur(t,l)}var d=e.memoizedState;if(d!==null){var m=d.dehydrated;if(sc(t),r)if(t.flags&256)t.flags&=-257,t=mf(e,t,s);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(c(558));else if(Et||Fn(e,t,s,!1),r=(s&e.childLanes)!==0,Et||r){if(l=ct,l!==null&&(m=_e(l,s),m!==0&&m!==d.retryLane))throw d.retryLane=m,en(e,m),sa(l,e,m),wc;_r(),t=mf(e,t,s)}else e=d.treeContext,ut=Na(m.nextSibling),It=t,Qe=!0,vs=null,ja=!1,e!==null&&Pu(t,e),t=ur(t,l),t.flags|=4096;return t}return e=Za(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function mr(e,t){var s=t.ref;if(s===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(c(284));(e===null||e.ref!==s)&&(t.flags|=4194816)}}function Sc(e,t,s,l,r){return nn(t),s=lc(e,t,s,l,void 0,r),l=ic(),e!==null&&!Et?(rc(e,t,r),as(e,t,r)):(Qe&&l&&Io(t),t.flags|=1,$t(e,t,s,r),t.child)}function ff(e,t,s,l,r,d){return nn(t),t.updateQueue=null,s=hm(t,l,s,r),pm(e),l=ic(),e!==null&&!Et?(rc(e,t,d),as(e,t,d)):(Qe&&l&&Io(t),t.flags|=1,$t(e,t,s,d),t.child)}function pf(e,t,s,l,r){if(nn(t),t.stateNode===null){var d=Hn,m=s.contextType;typeof m=="object"&&m!==null&&(d=Ht(m)),d=new s(l,d),t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=_c,t.stateNode=d,d._reactInternals=t,d=t.stateNode,d.props=l,d.state=t.memoizedState,d.refs={},Po(t),m=s.contextType,d.context=typeof m=="object"&&m!==null?Ht(m):Hn,d.state=t.memoizedState,m=s.getDerivedStateFromProps,typeof m=="function"&&(jc(t,s,m,l),d.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(m=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),m!==d.state&&_c.enqueueReplaceState(d,d.state,null),Yl(t,l,d,r),Gl(),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){d=t.stateNode;var b=t.memoizedProps,k=un(s,b);d.props=k;var Y=d.context,ee=s.contextType;m=Hn,typeof ee=="object"&&ee!==null&&(m=Ht(ee));var ne=s.getDerivedStateFromProps;ee=typeof ne=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=t.pendingProps!==b,ee||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||Y!==m)&&Wm(t,d,l,m),Ns=!1;var V=t.memoizedState;d.state=V,Yl(t,l,d,r),Gl(),Y=t.memoizedState,b||V!==Y||Ns?(typeof ne=="function"&&(jc(t,s,ne,l),Y=t.memoizedState),(k=Ns||Jm(t,s,k,l,V,Y,m))?(ee||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=Y),d.props=l,d.state=Y,d.context=m,l=k):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{d=t.stateNode,Jo(e,t),m=t.memoizedProps,ee=un(s,m),d.props=ee,ne=t.pendingProps,V=d.context,Y=s.contextType,k=Hn,typeof Y=="object"&&Y!==null&&(k=Ht(Y)),b=s.getDerivedStateFromProps,(Y=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(m!==ne||V!==k)&&Wm(t,d,l,k),Ns=!1,V=t.memoizedState,d.state=V,Yl(t,l,d,r),Gl();var J=t.memoizedState;m!==ne||V!==J||Ns||e!==null&&e.dependencies!==null&&Qi(e.dependencies)?(typeof b=="function"&&(jc(t,s,b,l),J=t.memoizedState),(ee=Ns||Jm(t,s,ee,l,V,J,k)||e!==null&&e.dependencies!==null&&Qi(e.dependencies))?(Y||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,J,k),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,J,k)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||m===e.memoizedProps&&V===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&V===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=J),d.props=l,d.state=J,d.context=k,l=ee):(typeof d.componentDidUpdate!="function"||m===e.memoizedProps&&V===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&V===e.memoizedState||(t.flags|=1024),l=!1)}return d=l,mr(e,t),l=(t.flags&128)!==0,d||l?(d=t.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:d.render(),t.flags|=1,e!==null&&l?(t.child=cn(t,e.child,null,r),t.child=cn(t,null,s,r)):$t(e,t,s,r),t.memoizedState=d.state,e=t.child):e=as(e,t,r),e}function hf(e,t,s,l){return an(),t.flags|=256,$t(e,t,s,l),t.child}var Cc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function kc(e){return{baseLanes:e,cachePool:sm()}}function Tc(e,t,s){return e=e!==null?e.childLanes&~s:0,t&&(e|=ua),e}function gf(e,t,s){var l=t.pendingProps,r=!1,d=(t.flags&128)!==0,m;if((m=d)||(m=e!==null&&e.memoizedState===null?!1:(wt.current&2)!==0),m&&(r=!0,t.flags&=-129),m=(t.flags&32)!==0,t.flags&=-33,e===null){if(Qe){if(r?Cs(t):ks(),(e=ut)?(e=wp(e,ja),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ys!==null?{id:Ua,overflow:La}:null,retryLane:536870912,hydrationErrors:null},s=Xu(e),s.return=t,t.child=s,It=t,ut=null)):e=null,e===null)throw js(t);return dd(e)?t.lanes=32:t.lanes=536870912,null}var b=l.children;return l=l.fallback,r?(ks(),r=t.mode,b=fr({mode:"hidden",children:b},r),l=tn(l,r,s,null),b.return=t,l.return=t,b.sibling=l,t.child=b,l=t.child,l.memoizedState=kc(s),l.childLanes=Tc(e,m,s),t.memoizedState=Cc,Kl(null,l)):(Cs(t),Ec(t,b))}var k=e.memoizedState;if(k!==null&&(b=k.dehydrated,b!==null)){if(d)t.flags&256?(Cs(t),t.flags&=-257,t=Mc(e,t,s)):t.memoizedState!==null?(ks(),t.child=e.child,t.flags|=128,t=null):(ks(),b=l.fallback,r=t.mode,l=fr({mode:"visible",children:l.children},r),b=tn(b,r,s,null),b.flags|=2,l.return=t,b.return=t,l.sibling=b,t.child=l,cn(t,e.child,null,s),l=t.child,l.memoizedState=kc(s),l.childLanes=Tc(e,m,s),t.memoizedState=Cc,t=Kl(null,l));else if(Cs(t),dd(b)){if(m=b.nextSibling&&b.nextSibling.dataset,m)var Y=m.dgst;m=Y,l=Error(c(419)),l.stack="",l.digest=m,Ll({value:l,source:null,stack:null}),t=Mc(e,t,s)}else if(Et||Fn(e,t,s,!1),m=(s&e.childLanes)!==0,Et||m){if(m=ct,m!==null&&(l=_e(m,s),l!==0&&l!==k.retryLane))throw k.retryLane=l,en(e,l),sa(m,e,l),wc;cd(b)||_r(),t=Mc(e,t,s)}else cd(b)?(t.flags|=192,t.child=e.child,t=null):(e=k.treeContext,ut=Na(b.nextSibling),It=t,Qe=!0,vs=null,ja=!1,e!==null&&Pu(t,e),t=Ec(t,l.children),t.flags|=4096);return t}return r?(ks(),b=l.fallback,r=t.mode,k=e.child,Y=k.sibling,l=Za(k,{mode:"hidden",children:l.children}),l.subtreeFlags=k.subtreeFlags&65011712,Y!==null?b=Za(Y,b):(b=tn(b,r,s,null),b.flags|=2),b.return=t,l.return=t,l.sibling=b,t.child=l,Kl(null,l),l=t.child,b=e.child.memoizedState,b===null?b=kc(s):(r=b.cachePool,r!==null?(k=kt._currentValue,r=r.parent!==k?{parent:k,pool:k}:r):r=sm(),b={baseLanes:b.baseLanes|s,cachePool:r}),l.memoizedState=b,l.childLanes=Tc(e,m,s),t.memoizedState=Cc,Kl(e.child,l)):(Cs(t),s=e.child,e=s.sibling,s=Za(s,{mode:"visible",children:l.children}),s.return=t,s.sibling=null,e!==null&&(m=t.deletions,m===null?(t.deletions=[e],t.flags|=16):m.push(e)),t.child=s,t.memoizedState=null,s)}function Ec(e,t){return t=fr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function fr(e,t){return e=ra(22,e,null,t),e.lanes=0,e}function Mc(e,t,s){return cn(t,e.child,null,s),e=Ec(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function xf(e,t,s){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),Fo(e.return,t,s)}function Ac(e,t,s,l,r,d){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:r,treeForkCount:d}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=l,m.tail=s,m.tailMode=r,m.treeForkCount=d)}function bf(e,t,s){var l=t.pendingProps,r=l.revealOrder,d=l.tail;l=l.children;var m=wt.current,b=(m&2)!==0;if(b?(m=m&1|2,t.flags|=128):m&=1,M(wt,m),$t(e,t,l,s),l=Qe?Ul:0,!b&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&xf(e,s,t);else if(e.tag===19)xf(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(r){case"forwards":for(s=t.child,r=null;s!==null;)e=s.alternate,e!==null&&tr(e)===null&&(r=s),s=s.sibling;s=r,s===null?(r=t.child,t.child=null):(r=s.sibling,s.sibling=null),Ac(t,!1,r,s,d,l);break;case"backwards":case"unstable_legacy-backwards":for(s=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&tr(e)===null){t.child=r;break}e=r.sibling,r.sibling=s,s=r,r=e}Ac(t,!0,s,null,d,l);break;case"together":Ac(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function as(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Ms|=t.lanes,(s&t.childLanes)===0)if(e!==null){if(Fn(e,t,s,!1),(s&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(c(153));if(t.child!==null){for(e=t.child,s=Za(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=Za(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function zc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Qi(e)))}function m0(e,t,s){switch(t.tag){case 3:ie(t,t.stateNode.containerInfo),_s(t,kt,e.memoizedState.cache),an();break;case 27:case 5:we(t);break;case 4:ie(t,t.stateNode.containerInfo);break;case 10:_s(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,sc(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(Cs(t),t.flags|=128,null):(s&t.child.childLanes)!==0?gf(e,t,s):(Cs(t),e=as(e,t,s),e!==null?e.sibling:null);Cs(t);break;case 19:var r=(e.flags&128)!==0;if(l=(s&t.childLanes)!==0,l||(Fn(e,t,s,!1),l=(s&t.childLanes)!==0),r){if(l)return bf(e,t,s);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),M(wt,wt.current),l)break;return null;case 22:return t.lanes=0,df(e,t,s,t.pendingProps);case 24:_s(t,kt,e.memoizedState.cache)}return as(e,t,s)}function yf(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps)Et=!0;else{if(!zc(e,s)&&(t.flags&128)===0)return Et=!1,m0(e,t,s);Et=(e.flags&131072)!==0}else Et=!1,Qe&&(t.flags&1048576)!==0&&Zu(t,Ul,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=rn(t.elementType),t.type=e,typeof e=="function")Lo(e)?(l=un(e,l),t.tag=1,t=pf(null,t,e,l,s)):(t.tag=0,t=Sc(null,t,e,l,s));else{if(e!=null){var r=e.$$typeof;if(r===D){t.tag=11,t=rf(null,t,e,l,s);break e}else if(r===W){t.tag=14,t=of(null,t,e,l,s);break e}}throw t=q(e)||e,Error(c(306,t,""))}}return t;case 0:return Sc(e,t,t.type,t.pendingProps,s);case 1:return l=t.type,r=un(l,t.pendingProps),pf(e,t,l,r,s);case 3:e:{if(ie(t,t.stateNode.containerInfo),e===null)throw Error(c(387));l=t.pendingProps;var d=t.memoizedState;r=d.element,Jo(e,t),Yl(t,l,null,s);var m=t.memoizedState;if(l=m.cache,_s(t,kt,l),l!==d.cache&&Vo(t,[kt],s,!0),Gl(),l=m.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:m.cache},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){t=hf(e,t,l,s);break e}else if(l!==r){r=ba(Error(c(424)),t),Ll(r),t=hf(e,t,l,s);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ut=Na(e.firstChild),It=t,Qe=!0,vs=null,ja=!0,s=cm(t,null,l,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(an(),l===r){t=as(e,t,s);break e}$t(e,t,l,s)}t=t.child}return t;case 26:return mr(e,t),e===null?(s=Mp(t.type,null,t.pendingProps,null))?t.memoizedState=s:Qe||(s=t.type,e=t.pendingProps,l=Er(be.current).createElement(s),l[Bt]=t,l[Pt]=e,Gt(l,s,e),Ut(l),t.stateNode=l):t.memoizedState=Mp(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return we(t),e===null&&Qe&&(l=t.stateNode=kp(t.type,t.pendingProps,be.current),It=t,ja=!0,r=ut,Rs(t.type)?(ud=r,ut=Na(l.firstChild)):ut=r),$t(e,t,t.pendingProps.children,s),mr(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Qe&&((r=l=ut)&&(l=$0(l,t.type,t.pendingProps,ja),l!==null?(t.stateNode=l,It=t,ut=Na(l.firstChild),ja=!1,r=!0):r=!1),r||js(t)),we(t),r=t.type,d=t.pendingProps,m=e!==null?e.memoizedProps:null,l=d.children,id(r,d)?l=null:m!==null&&id(r,m)&&(t.flags|=32),t.memoizedState!==null&&(r=lc(e,t,s0,null,null,s),di._currentValue=r),mr(e,t),$t(e,t,l,s),t.child;case 6:return e===null&&Qe&&((e=s=ut)&&(s=G0(s,t.pendingProps,ja),s!==null?(t.stateNode=s,It=t,ut=null,e=!0):e=!1),e||js(t)),null;case 13:return gf(e,t,s);case 4:return ie(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=cn(t,null,l,s):$t(e,t,l,s),t.child;case 11:return rf(e,t,t.type,t.pendingProps,s);case 7:return $t(e,t,t.pendingProps,s),t.child;case 8:return $t(e,t,t.pendingProps.children,s),t.child;case 12:return $t(e,t,t.pendingProps.children,s),t.child;case 10:return l=t.pendingProps,_s(t,t.type,l.value),$t(e,t,l.children,s),t.child;case 9:return r=t.type._context,l=t.pendingProps.children,nn(t),r=Ht(r),l=l(r),t.flags|=1,$t(e,t,l,s),t.child;case 14:return of(e,t,t.type,t.pendingProps,s);case 15:return cf(e,t,t.type,t.pendingProps,s);case 19:return bf(e,t,s);case 31:return u0(e,t,s);case 22:return df(e,t,s,t.pendingProps);case 24:return nn(t),l=Ht(kt),e===null?(r=Ko(),r===null&&(r=ct,d=Qo(),r.pooledCache=d,d.refCount++,d!==null&&(r.pooledCacheLanes|=s),r=d),t.memoizedState={parent:l,cache:r},Po(t),_s(t,kt,r)):((e.lanes&s)!==0&&(Jo(e,t),Yl(t,null,null,s),Gl()),r=e.memoizedState,d=t.memoizedState,r.parent!==l?(r={parent:l,cache:l},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),_s(t,kt,l)):(l=d.cache,_s(t,kt,l),l!==r.cache&&Vo(t,[kt],s,!0))),$t(e,t,t.pendingProps.children,s),t.child;case 29:throw t.pendingProps}throw Error(c(156,t.tag))}function ss(e){e.flags|=4}function Oc(e,t,s,l,r){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(r&335544128)===r)if(e.stateNode.complete)e.flags|=8192;else if(Vf())e.flags|=8192;else throw on=Pi,Zo}else e.flags&=-16777217}function vf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Rp(t))if(Vf())e.flags|=8192;else throw on=Pi,Zo}function pr(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Pe():536870912,e.lanes|=t,sl|=t)}function Zl(e,t){if(!Qe)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function mt(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,l=0;if(t)for(var r=e.child;r!==null;)s|=r.lanes|r.childLanes,l|=r.subtreeFlags&65011712,l|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)s|=r.lanes|r.childLanes,l|=r.subtreeFlags,l|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=l,e.childLanes=s,t}function f0(e,t,s){var l=t.pendingProps;switch(Ho(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(t),null;case 1:return mt(t),null;case 3:return s=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),Wa(kt),xe(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Yn(t)?ss(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Go())),mt(t),null;case 26:var r=t.type,d=t.memoizedState;return e===null?(ss(t),d!==null?(mt(t),vf(t,d)):(mt(t),Oc(t,r,null,l,s))):d?d!==e.memoizedState?(ss(t),mt(t),vf(t,d)):(mt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&ss(t),mt(t),Oc(t,r,e,l,s)),null;case 27:if(Me(t),s=be.current,r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&ss(t);else{if(!l){if(t.stateNode===null)throw Error(c(166));return mt(t),null}e=ce.current,Yn(t)?Ju(t):(e=kp(r,l,s),t.stateNode=e,ss(t))}return mt(t),null;case 5:if(Me(t),r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&ss(t);else{if(!l){if(t.stateNode===null)throw Error(c(166));return mt(t),null}if(d=ce.current,Yn(t))Ju(t);else{var m=Er(be.current);switch(d){case 1:d=m.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:d=m.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":d=m.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":d=m.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":d=m.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?m.createElement("select",{is:l.is}):m.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?m.createElement(r,{is:l.is}):m.createElement(r)}}d[Bt]=t,d[Pt]=l;e:for(m=t.child;m!==null;){if(m.tag===5||m.tag===6)d.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}t.stateNode=d;e:switch(Gt(d,r,l),r){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&ss(t)}}return mt(t),Oc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,s),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&ss(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(c(166));if(e=be.current,Yn(t)){if(e=t.stateNode,s=t.memoizedProps,l=null,r=It,r!==null)switch(r.tag){case 27:case 5:l=r.memoizedProps}e[Bt]=t,e=!!(e.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||gp(e.nodeValue,s)),e||js(t,!0)}else e=Er(e).createTextNode(l),e[Bt]=t,t.stateNode=e}return mt(t),null;case 31:if(s=t.memoizedState,e===null||e.memoizedState!==null){if(l=Yn(t),s!==null){if(e===null){if(!l)throw Error(c(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(557));e[Bt]=t}else an(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;mt(t),e=!1}else s=Go(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return t.flags&256?(ca(t),t):(ca(t),null);if((t.flags&128)!==0)throw Error(c(558))}return mt(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=Yn(t),l!==null&&l.dehydrated!==null){if(e===null){if(!r)throw Error(c(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(c(317));r[Bt]=t}else an(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;mt(t),r=!1}else r=Go(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(ca(t),t):(ca(t),null)}return ca(t),(t.flags&128)!==0?(t.lanes=s,t):(s=l!==null,e=e!==null&&e.memoizedState!==null,s&&(l=t.child,r=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(r=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==r&&(l.flags|=2048)),s!==e&&s&&(t.child.flags|=8192),pr(t,t.updateQueue),mt(t),null);case 4:return xe(),e===null&&td(t.stateNode.containerInfo),mt(t),null;case 10:return Wa(t.type),mt(t),null;case 19:if(B(wt),l=t.memoizedState,l===null)return mt(t),null;if(r=(t.flags&128)!==0,d=l.rendering,d===null)if(r)Zl(l,!1);else{if(jt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(d=tr(e),d!==null){for(t.flags|=128,Zl(l,!1),e=d.updateQueue,t.updateQueue=e,pr(t,e),t.subtreeFlags=0,e=s,s=t.child;s!==null;)Qu(s,e),s=s.sibling;return M(wt,wt.current&1|2),Qe&&Pa(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&ft()>yr&&(t.flags|=128,r=!0,Zl(l,!1),t.lanes=4194304)}else{if(!r)if(e=tr(d),e!==null){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,pr(t,e),Zl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Qe)return mt(t),null}else 2*ft()-l.renderingStartTime>yr&&s!==536870912&&(t.flags|=128,r=!0,Zl(l,!1),t.lanes=4194304);l.isBackwards?(d.sibling=t.child,t.child=d):(e=l.last,e!==null?e.sibling=d:t.child=d,l.last=d)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=ft(),e.sibling=null,s=wt.current,M(wt,r?s&1|2:s&1),Qe&&Pa(t,l.treeForkCount),e):(mt(t),null);case 22:case 23:return ca(t),ac(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(s&536870912)!==0&&(t.flags&128)===0&&(mt(t),t.subtreeFlags&6&&(t.flags|=8192)):mt(t),s=t.updateQueue,s!==null&&pr(t,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==s&&(t.flags|=2048),e!==null&&B(ln),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),Wa(kt),mt(t),null;case 25:return null;case 30:return null}throw Error(c(156,t.tag))}function p0(e,t){switch(Ho(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Wa(kt),xe(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Me(t),null;case 31:if(t.memoizedState!==null){if(ca(t),t.alternate===null)throw Error(c(340));an()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(ca(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(c(340));an()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return B(wt),null;case 4:return xe(),null;case 10:return Wa(t.type),null;case 22:case 23:return ca(t),ac(),e!==null&&B(ln),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Wa(kt),null;case 25:return null;default:return null}}function jf(e,t){switch(Ho(t),t.tag){case 3:Wa(kt),xe();break;case 26:case 27:case 5:Me(t);break;case 4:xe();break;case 31:t.memoizedState!==null&&ca(t);break;case 13:ca(t);break;case 19:B(wt);break;case 10:Wa(t.type);break;case 22:case 23:ca(t),ac(),e!==null&&B(ln);break;case 24:Wa(kt)}}function Pl(e,t){try{var s=t.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var r=l.next;s=r;do{if((s.tag&e)===e){l=void 0;var d=s.create,m=s.inst;l=d(),m.destroy=l}s=s.next}while(s!==r)}}catch(b){nt(t,t.return,b)}}function Ts(e,t,s){try{var l=t.updateQueue,r=l!==null?l.lastEffect:null;if(r!==null){var d=r.next;l=d;do{if((l.tag&e)===e){var m=l.inst,b=m.destroy;if(b!==void 0){m.destroy=void 0,r=t;var k=s,Y=b;try{Y()}catch(ee){nt(r,k,ee)}}}l=l.next}while(l!==d)}}catch(ee){nt(t,t.return,ee)}}function _f(e){var t=e.updateQueue;if(t!==null){var s=e.stateNode;try{um(t,s)}catch(l){nt(e,e.return,l)}}}function Nf(e,t,s){s.props=un(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(l){nt(e,t,l)}}function Jl(e,t){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof s=="function"?e.refCleanup=s(l):s.current=l}}catch(r){nt(e,t,r)}}function qa(e,t){var s=e.ref,l=e.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(r){nt(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(r){nt(e,t,r)}else s.current=null}function wf(e){var t=e.type,s=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break e;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(r){nt(e,e.return,r)}}function Dc(e,t,s){try{var l=e.stateNode;U0(l,e.type,s,t),l[Pt]=t}catch(r){nt(e,e.return,r)}}function Sf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Rs(e.type)||e.tag===4}function Rc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Sf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Rs(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Uc(e,t,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,t):(t=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,t.appendChild(e),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=Xa));else if(l!==4&&(l===27&&Rs(e.type)&&(s=e.stateNode,t=null),e=e.child,e!==null))for(Uc(e,t,s),e=e.sibling;e!==null;)Uc(e,t,s),e=e.sibling}function hr(e,t,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(l!==4&&(l===27&&Rs(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(hr(e,t,s),e=e.sibling;e!==null;)hr(e,t,s),e=e.sibling}function Cf(e){var t=e.stateNode,s=e.memoizedProps;try{for(var l=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Gt(t,l,s),t[Bt]=e,t[Pt]=s}catch(d){nt(e,e.return,d)}}var ns=!1,Mt=!1,Lc=!1,kf=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function h0(e,t){if(e=e.containerInfo,nd=Ur,e=qu(e),Mo(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var r=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{s.nodeType,d.nodeType}catch{s=null;break e}var m=0,b=-1,k=-1,Y=0,ee=0,ne=e,V=null;t:for(;;){for(var J;ne!==s||r!==0&&ne.nodeType!==3||(b=m+r),ne!==d||l!==0&&ne.nodeType!==3||(k=m+l),ne.nodeType===3&&(m+=ne.nodeValue.length),(J=ne.firstChild)!==null;)V=ne,ne=J;for(;;){if(ne===e)break t;if(V===s&&++Y===r&&(b=m),V===d&&++ee===l&&(k=m),(J=ne.nextSibling)!==null)break;ne=V,V=ne.parentNode}ne=J}s=b===-1||k===-1?null:{start:b,end:k}}else s=null}s=s||{start:0,end:0}}else s=null;for(ld={focusedElem:e,selectionRange:s},Ur=!1,Lt=t;Lt!==null;)if(t=Lt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Lt=e;else for(;Lt!==null;){switch(t=Lt,d=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)r=e[s],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,s=t,r=d.memoizedProps,d=d.memoizedState,l=s.stateNode;try{var ve=un(s.type,r);e=l.getSnapshotBeforeUpdate(ve,d),l.__reactInternalSnapshotBeforeUpdate=e}catch(Te){nt(s,s.return,Te)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,s=e.nodeType,s===9)od(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":od(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(c(163))}if(e=t.sibling,e!==null){e.return=t.return,Lt=e;break}Lt=t.return}}function Tf(e,t,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:is(e,s),l&4&&Pl(5,s);break;case 1:if(is(e,s),l&4)if(e=s.stateNode,t===null)try{e.componentDidMount()}catch(m){nt(s,s.return,m)}else{var r=un(s.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(m){nt(s,s.return,m)}}l&64&&_f(s),l&512&&Jl(s,s.return);break;case 3:if(is(e,s),l&64&&(e=s.updateQueue,e!==null)){if(t=null,s.child!==null)switch(s.child.tag){case 27:case 5:t=s.child.stateNode;break;case 1:t=s.child.stateNode}try{um(e,t)}catch(m){nt(s,s.return,m)}}break;case 27:t===null&&l&4&&Cf(s);case 26:case 5:is(e,s),t===null&&l&4&&wf(s),l&512&&Jl(s,s.return);break;case 12:is(e,s);break;case 31:is(e,s),l&4&&Af(e,s);break;case 13:is(e,s),l&4&&zf(e,s),l&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=w0.bind(null,s),Y0(e,s))));break;case 22:if(l=s.memoizedState!==null||ns,!l){t=t!==null&&t.memoizedState!==null||Mt,r=ns;var d=Mt;ns=l,(Mt=t)&&!d?rs(e,s,(s.subtreeFlags&8772)!==0):is(e,s),ns=r,Mt=d}break;case 30:break;default:is(e,s)}}function Ef(e){var t=e.alternate;t!==null&&(e.alternate=null,Ef(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&fo(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var gt=null,Wt=!1;function ls(e,t,s){for(s=s.child;s!==null;)Mf(e,t,s),s=s.sibling}function Mf(e,t,s){if(Ze&&typeof Ze.onCommitFiberUnmount=="function")try{Ze.onCommitFiberUnmount(Ke,s)}catch{}switch(s.tag){case 26:Mt||qa(s,t),ls(e,t,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Mt||qa(s,t);var l=gt,r=Wt;Rs(s.type)&&(gt=s.stateNode,Wt=!1),ls(e,t,s),ri(s.stateNode),gt=l,Wt=r;break;case 5:Mt||qa(s,t);case 6:if(l=gt,r=Wt,gt=null,ls(e,t,s),gt=l,Wt=r,gt!==null)if(Wt)try{(gt.nodeType===9?gt.body:gt.nodeName==="HTML"?gt.ownerDocument.body:gt).removeChild(s.stateNode)}catch(d){nt(s,t,d)}else try{gt.removeChild(s.stateNode)}catch(d){nt(s,t,d)}break;case 18:gt!==null&&(Wt?(e=gt,_p(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),ul(e)):_p(gt,s.stateNode));break;case 4:l=gt,r=Wt,gt=s.stateNode.containerInfo,Wt=!0,ls(e,t,s),gt=l,Wt=r;break;case 0:case 11:case 14:case 15:Ts(2,s,t),Mt||Ts(4,s,t),ls(e,t,s);break;case 1:Mt||(qa(s,t),l=s.stateNode,typeof l.componentWillUnmount=="function"&&Nf(s,t,l)),ls(e,t,s);break;case 21:ls(e,t,s);break;case 22:Mt=(l=Mt)||s.memoizedState!==null,ls(e,t,s),Mt=l;break;default:ls(e,t,s)}}function Af(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ul(e)}catch(s){nt(t,t.return,s)}}}function zf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ul(e)}catch(s){nt(t,t.return,s)}}function g0(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new kf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new kf),t;default:throw Error(c(435,e.tag))}}function gr(e,t){var s=g0(e);t.forEach(function(l){if(!s.has(l)){s.add(l);var r=S0.bind(null,e,l);l.then(r,r)}})}function ea(e,t){var s=t.deletions;if(s!==null)for(var l=0;l<s.length;l++){var r=s[l],d=e,m=t,b=m;e:for(;b!==null;){switch(b.tag){case 27:if(Rs(b.type)){gt=b.stateNode,Wt=!1;break e}break;case 5:gt=b.stateNode,Wt=!1;break e;case 3:case 4:gt=b.stateNode.containerInfo,Wt=!0;break e}b=b.return}if(gt===null)throw Error(c(160));Mf(d,m,r),gt=null,Wt=!1,d=r.alternate,d!==null&&(d.return=null),r.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Of(t,e),t=t.sibling}var Ta=null;function Of(e,t){var s=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ea(t,e),ta(e),l&4&&(Ts(3,e,e.return),Pl(3,e),Ts(5,e,e.return));break;case 1:ea(t,e),ta(e),l&512&&(Mt||s===null||qa(s,s.return)),l&64&&ns&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var r=Ta;if(ea(t,e),ta(e),l&512&&(Mt||s===null||qa(s,s.return)),l&4){var d=s!==null?s.memoizedState:null;if(l=e.memoizedState,s===null)if(l===null)if(e.stateNode===null){e:{l=e.type,s=e.memoizedProps,r=r.ownerDocument||r;t:switch(l){case"title":d=r.getElementsByTagName("title")[0],(!d||d[Sl]||d[Bt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=r.createElement(l),r.head.insertBefore(d,r.querySelector("head > title"))),Gt(d,l,s),d[Bt]=e,Ut(d),l=d;break e;case"link":var m=Op("link","href",r).get(l+(s.href||""));if(m){for(var b=0;b<m.length;b++)if(d=m[b],d.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&d.getAttribute("rel")===(s.rel==null?null:s.rel)&&d.getAttribute("title")===(s.title==null?null:s.title)&&d.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){m.splice(b,1);break t}}d=r.createElement(l),Gt(d,l,s),r.head.appendChild(d);break;case"meta":if(m=Op("meta","content",r).get(l+(s.content||""))){for(b=0;b<m.length;b++)if(d=m[b],d.getAttribute("content")===(s.content==null?null:""+s.content)&&d.getAttribute("name")===(s.name==null?null:s.name)&&d.getAttribute("property")===(s.property==null?null:s.property)&&d.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&d.getAttribute("charset")===(s.charSet==null?null:s.charSet)){m.splice(b,1);break t}}d=r.createElement(l),Gt(d,l,s),r.head.appendChild(d);break;default:throw Error(c(468,l))}d[Bt]=e,Ut(d),l=d}e.stateNode=l}else Dp(r,e.type,e.stateNode);else e.stateNode=zp(r,l,e.memoizedProps);else d!==l?(d===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):d.count--,l===null?Dp(r,e.type,e.stateNode):zp(r,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Dc(e,e.memoizedProps,s.memoizedProps)}break;case 27:ea(t,e),ta(e),l&512&&(Mt||s===null||qa(s,s.return)),s!==null&&l&4&&Dc(e,e.memoizedProps,s.memoizedProps);break;case 5:if(ea(t,e),ta(e),l&512&&(Mt||s===null||qa(s,s.return)),e.flags&32){r=e.stateNode;try{Dn(r,"")}catch(ve){nt(e,e.return,ve)}}l&4&&e.stateNode!=null&&(r=e.memoizedProps,Dc(e,r,s!==null?s.memoizedProps:r)),l&1024&&(Lc=!0);break;case 6:if(ea(t,e),ta(e),l&4){if(e.stateNode===null)throw Error(c(162));l=e.memoizedProps,s=e.stateNode;try{s.nodeValue=l}catch(ve){nt(e,e.return,ve)}}break;case 3:if(zr=null,r=Ta,Ta=Mr(t.containerInfo),ea(t,e),Ta=r,ta(e),l&4&&s!==null&&s.memoizedState.isDehydrated)try{ul(t.containerInfo)}catch(ve){nt(e,e.return,ve)}Lc&&(Lc=!1,Df(e));break;case 4:l=Ta,Ta=Mr(e.stateNode.containerInfo),ea(t,e),ta(e),Ta=l;break;case 12:ea(t,e),ta(e);break;case 31:ea(t,e),ta(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,gr(e,l)));break;case 13:ea(t,e),ta(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(br=ft()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,gr(e,l)));break;case 22:r=e.memoizedState!==null;var k=s!==null&&s.memoizedState!==null,Y=ns,ee=Mt;if(ns=Y||r,Mt=ee||k,ea(t,e),Mt=ee,ns=Y,ta(e),l&8192)e:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(s===null||k||ns||Mt||mn(e)),s=null,t=e;;){if(t.tag===5||t.tag===26){if(s===null){k=s=t;try{if(d=k.stateNode,r)m=d.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none";else{b=k.stateNode;var ne=k.memoizedProps.style,V=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;b.style.display=V==null||typeof V=="boolean"?"":(""+V).trim()}}catch(ve){nt(k,k.return,ve)}}}else if(t.tag===6){if(s===null){k=t;try{k.stateNode.nodeValue=r?"":k.memoizedProps}catch(ve){nt(k,k.return,ve)}}}else if(t.tag===18){if(s===null){k=t;try{var J=k.stateNode;r?Np(J,!0):Np(k.stateNode,!1)}catch(ve){nt(k,k.return,ve)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;s===t&&(s=null),t=t.return}s===t&&(s=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,gr(e,s))));break;case 19:ea(t,e),ta(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,gr(e,l)));break;case 30:break;case 21:break;default:ea(t,e),ta(e)}}function ta(e){var t=e.flags;if(t&2){try{for(var s,l=e.return;l!==null;){if(Sf(l)){s=l;break}l=l.return}if(s==null)throw Error(c(160));switch(s.tag){case 27:var r=s.stateNode,d=Rc(e);hr(e,d,r);break;case 5:var m=s.stateNode;s.flags&32&&(Dn(m,""),s.flags&=-33);var b=Rc(e);hr(e,b,m);break;case 3:case 4:var k=s.stateNode.containerInfo,Y=Rc(e);Uc(e,Y,k);break;default:throw Error(c(161))}}catch(ee){nt(e,e.return,ee)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Df(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Df(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function is(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Tf(e,t.alternate,t),t=t.sibling}function mn(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ts(4,t,t.return),mn(t);break;case 1:qa(t,t.return);var s=t.stateNode;typeof s.componentWillUnmount=="function"&&Nf(t,t.return,s),mn(t);break;case 27:ri(t.stateNode);case 26:case 5:qa(t,t.return),mn(t);break;case 22:t.memoizedState===null&&mn(t);break;case 30:mn(t);break;default:mn(t)}e=e.sibling}}function rs(e,t,s){for(s=s&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,r=e,d=t,m=d.flags;switch(d.tag){case 0:case 11:case 15:rs(r,d,s),Pl(4,d);break;case 1:if(rs(r,d,s),l=d,r=l.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(Y){nt(l,l.return,Y)}if(l=d,r=l.updateQueue,r!==null){var b=l.stateNode;try{var k=r.shared.hiddenCallbacks;if(k!==null)for(r.shared.hiddenCallbacks=null,r=0;r<k.length;r++)dm(k[r],b)}catch(Y){nt(l,l.return,Y)}}s&&m&64&&_f(d),Jl(d,d.return);break;case 27:Cf(d);case 26:case 5:rs(r,d,s),s&&l===null&&m&4&&wf(d),Jl(d,d.return);break;case 12:rs(r,d,s);break;case 31:rs(r,d,s),s&&m&4&&Af(r,d);break;case 13:rs(r,d,s),s&&m&4&&zf(r,d);break;case 22:d.memoizedState===null&&rs(r,d,s),Jl(d,d.return);break;case 30:break;default:rs(r,d,s)}t=t.sibling}}function qc(e,t){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&ql(s))}function Bc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ql(e))}function Ea(e,t,s,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Rf(e,t,s,l),t=t.sibling}function Rf(e,t,s,l){var r=t.flags;switch(t.tag){case 0:case 11:case 15:Ea(e,t,s,l),r&2048&&Pl(9,t);break;case 1:Ea(e,t,s,l);break;case 3:Ea(e,t,s,l),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ql(e)));break;case 12:if(r&2048){Ea(e,t,s,l),e=t.stateNode;try{var d=t.memoizedProps,m=d.id,b=d.onPostCommit;typeof b=="function"&&b(m,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(k){nt(t,t.return,k)}}else Ea(e,t,s,l);break;case 31:Ea(e,t,s,l);break;case 13:Ea(e,t,s,l);break;case 23:break;case 22:d=t.stateNode,m=t.alternate,t.memoizedState!==null?d._visibility&2?Ea(e,t,s,l):Wl(e,t):d._visibility&2?Ea(e,t,s,l):(d._visibility|=2,el(e,t,s,l,(t.subtreeFlags&10256)!==0||!1)),r&2048&&qc(m,t);break;case 24:Ea(e,t,s,l),r&2048&&Bc(t.alternate,t);break;default:Ea(e,t,s,l)}}function el(e,t,s,l,r){for(r=r&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var d=e,m=t,b=s,k=l,Y=m.flags;switch(m.tag){case 0:case 11:case 15:el(d,m,b,k,r),Pl(8,m);break;case 23:break;case 22:var ee=m.stateNode;m.memoizedState!==null?ee._visibility&2?el(d,m,b,k,r):Wl(d,m):(ee._visibility|=2,el(d,m,b,k,r)),r&&Y&2048&&qc(m.alternate,m);break;case 24:el(d,m,b,k,r),r&&Y&2048&&Bc(m.alternate,m);break;default:el(d,m,b,k,r)}t=t.sibling}}function Wl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var s=e,l=t,r=l.flags;switch(l.tag){case 22:Wl(s,l),r&2048&&qc(l.alternate,l);break;case 24:Wl(s,l),r&2048&&Bc(l.alternate,l);break;default:Wl(s,l)}t=t.sibling}}var ei=8192;function tl(e,t,s){if(e.subtreeFlags&ei)for(e=e.child;e!==null;)Uf(e,t,s),e=e.sibling}function Uf(e,t,s){switch(e.tag){case 26:tl(e,t,s),e.flags&ei&&e.memoizedState!==null&&ab(s,Ta,e.memoizedState,e.memoizedProps);break;case 5:tl(e,t,s);break;case 3:case 4:var l=Ta;Ta=Mr(e.stateNode.containerInfo),tl(e,t,s),Ta=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=ei,ei=16777216,tl(e,t,s),ei=l):tl(e,t,s));break;default:tl(e,t,s)}}function Lf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ti(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var l=t[s];Lt=l,Bf(l,e)}Lf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)qf(e),e=e.sibling}function qf(e){switch(e.tag){case 0:case 11:case 15:ti(e),e.flags&2048&&Ts(9,e,e.return);break;case 3:ti(e);break;case 12:ti(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,xr(e)):ti(e);break;default:ti(e)}}function xr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var l=t[s];Lt=l,Bf(l,e)}Lf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ts(8,t,t.return),xr(t);break;case 22:s=t.stateNode,s._visibility&2&&(s._visibility&=-3,xr(t));break;default:xr(t)}e=e.sibling}}function Bf(e,t){for(;Lt!==null;){var s=Lt;switch(s.tag){case 0:case 11:case 15:Ts(8,s,t);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:ql(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,Lt=l;else e:for(s=e;Lt!==null;){l=Lt;var r=l.sibling,d=l.return;if(Ef(l),l===s){Lt=null;break e}if(r!==null){r.return=d,Lt=r;break e}Lt=d}}}var x0={getCacheForType:function(e){var t=Ht(kt),s=t.data.get(e);return s===void 0&&(s=e(),t.data.set(e,s)),s},cacheSignal:function(){return Ht(kt).controller.signal}},b0=typeof WeakMap=="function"?WeakMap:Map,at=0,ct=null,He=null,Ge=0,st=0,da=null,Es=!1,al=!1,Ic=!1,os=0,jt=0,Ms=0,fn=0,Hc=0,ua=0,sl=0,ai=null,aa=null,$c=!1,br=0,If=0,yr=1/0,vr=null,As=null,Ot=0,zs=null,nl=null,cs=0,Gc=0,Yc=null,Hf=null,si=0,Fc=null;function ma(){return(at&2)!==0&&Ge!==0?Ge&-Ge:_.T!==null?Pc():Ft()}function $f(){if(ua===0)if((Ge&536870912)===0||Qe){var e=pa;pa<<=1,(pa&3932160)===0&&(pa=262144),ua=e}else ua=536870912;return e=oa.current,e!==null&&(e.flags|=32),ua}function sa(e,t,s){(e===ct&&(st===2||st===9)||e.cancelPendingCommit!==null)&&(ll(e,0),Os(e,Ge,ua,!1)),Ve(e,s),((at&2)===0||e!==ct)&&(e===ct&&((at&2)===0&&(fn|=s),jt===4&&Os(e,Ge,ua,!1)),Ba(e))}function Gf(e,t,s){if((at&6)!==0)throw Error(c(327));var l=!s&&(t&127)===0&&(t&e.expiredLanes)===0||oe(e,t),r=l?j0(e,t):Qc(e,t,!0),d=l;do{if(r===0){al&&!l&&Os(e,t,0,!1);break}else{if(s=e.current.alternate,d&&!y0(s)){r=Qc(e,t,!1),d=!1;continue}if(r===2){if(d=t,e.errorRecoveryDisabledLanes&d)var m=0;else m=e.pendingLanes&-536870913,m=m!==0?m:m&536870912?536870912:0;if(m!==0){t=m;e:{var b=e;r=ai;var k=b.current.memoizedState.isDehydrated;if(k&&(ll(b,m).flags|=256),m=Qc(b,m,!1),m!==2){if(Ic&&!k){b.errorRecoveryDisabledLanes|=d,fn|=d,r=4;break e}d=aa,aa=r,d!==null&&(aa===null?aa=d:aa.push.apply(aa,d))}r=m}if(d=!1,r!==2)continue}}if(r===1){ll(e,0),Os(e,t,0,!0);break}e:{switch(l=e,d=r,d){case 0:case 1:throw Error(c(345));case 4:if((t&4194048)!==t)break;case 6:Os(l,t,ua,!Es);break e;case 2:aa=null;break;case 3:case 5:break;default:throw Error(c(329))}if((t&62914560)===t&&(r=br+300-ft(),10<r)){if(Os(l,t,ua,!Es),yt(l,0,!0)!==0)break e;cs=t,l.timeoutHandle=vp(Yf.bind(null,l,s,aa,vr,$c,t,ua,fn,sl,Es,d,"Throttled",-0,0),r);break e}Yf(l,s,aa,vr,$c,t,ua,fn,sl,Es,d,null,-0,0)}}break}while(!0);Ba(e)}function Yf(e,t,s,l,r,d,m,b,k,Y,ee,ne,V,J){if(e.timeoutHandle=-1,ne=t.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xa},Uf(t,d,ne);var ve=(d&62914560)===d?br-ft():(d&4194048)===d?If-ft():0;if(ve=sb(ne,ve),ve!==null){cs=d,e.cancelPendingCommit=ve(Jf.bind(null,e,t,d,s,l,r,m,b,k,ee,ne,null,V,J)),Os(e,d,m,!Y);return}}Jf(e,t,d,s,l,r,m,b,k)}function y0(e){for(var t=e;;){var s=t.tag;if((s===0||s===11||s===15)&&t.flags&16384&&(s=t.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var r=s[l],d=r.getSnapshot;r=r.value;try{if(!ia(d(),r))return!1}catch{return!1}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Os(e,t,s,l){t&=~Hc,t&=~fn,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var r=t;0<r;){var d=31-Re(r),m=1<<d;l[d]=-1,r&=~m}s!==0&&la(e,s,t)}function jr(){return(at&6)===0?(ni(0),!1):!0}function Vc(){if(He!==null){if(st===0)var e=He.return;else e=He,Ja=sn=null,oc(e),Kn=null,Il=0,e=He;for(;e!==null;)jf(e.alternate,e),e=e.return;He=null}}function ll(e,t){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,B0(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),cs=0,Vc(),ct=e,He=s=Za(e.current,null),Ge=t,st=0,da=null,Es=!1,al=oe(e,t),Ic=!1,sl=ua=Hc=fn=Ms=jt=0,aa=ai=null,$c=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var r=31-Re(l),d=1<<r;t|=e[r],l&=~d}return os=t,$i(),s}function Ff(e,t){Oe=null,_.H=Xl,t===Xn||t===Zi?(t=im(),st=3):t===Zo?(t=im(),st=4):st=t===wc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,da=t,He===null&&(jt=1,dr(e,ba(t,e.current)))}function Vf(){var e=oa.current;return e===null?!0:(Ge&4194048)===Ge?_a===null:(Ge&62914560)===Ge||(Ge&536870912)!==0?e===_a:!1}function Qf(){var e=_.H;return _.H=Xl,e===null?Xl:e}function Xf(){var e=_.A;return _.A=x0,e}function _r(){jt=4,Es||(Ge&4194048)!==Ge&&oa.current!==null||(al=!0),(Ms&134217727)===0&&(fn&134217727)===0||ct===null||Os(ct,Ge,ua,!1)}function Qc(e,t,s){var l=at;at|=2;var r=Qf(),d=Xf();(ct!==e||Ge!==t)&&(vr=null,ll(e,t)),t=!1;var m=jt;e:do try{if(st!==0&&He!==null){var b=He,k=da;switch(st){case 8:Vc(),m=6;break e;case 3:case 2:case 9:case 6:oa.current===null&&(t=!0);var Y=st;if(st=0,da=null,il(e,b,k,Y),s&&al){m=0;break e}break;default:Y=st,st=0,da=null,il(e,b,k,Y)}}v0(),m=jt;break}catch(ee){Ff(e,ee)}while(!0);return t&&e.shellSuspendCounter++,Ja=sn=null,at=l,_.H=r,_.A=d,He===null&&(ct=null,Ge=0,$i()),m}function v0(){for(;He!==null;)Kf(He)}function j0(e,t){var s=at;at|=2;var l=Qf(),r=Xf();ct!==e||Ge!==t?(vr=null,yr=ft()+500,ll(e,t)):al=oe(e,t);e:do try{if(st!==0&&He!==null){t=He;var d=da;t:switch(st){case 1:st=0,da=null,il(e,t,d,1);break;case 2:case 9:if(nm(d)){st=0,da=null,Zf(t);break}t=function(){st!==2&&st!==9||ct!==e||(st=7),Ba(e)},d.then(t,t);break e;case 3:st=7;break e;case 4:st=5;break e;case 7:nm(d)?(st=0,da=null,Zf(t)):(st=0,da=null,il(e,t,d,7));break;case 5:var m=null;switch(He.tag){case 26:m=He.memoizedState;case 5:case 27:var b=He;if(m?Rp(m):b.stateNode.complete){st=0,da=null;var k=b.sibling;if(k!==null)He=k;else{var Y=b.return;Y!==null?(He=Y,Nr(Y)):He=null}break t}}st=0,da=null,il(e,t,d,5);break;case 6:st=0,da=null,il(e,t,d,6);break;case 8:Vc(),jt=6;break e;default:throw Error(c(462))}}_0();break}catch(ee){Ff(e,ee)}while(!0);return Ja=sn=null,_.H=l,_.A=r,at=s,He!==null?0:(ct=null,Ge=0,$i(),jt)}function _0(){for(;He!==null&&!_t();)Kf(He)}function Kf(e){var t=yf(e.alternate,e,os);e.memoizedProps=e.pendingProps,t===null?Nr(e):He=t}function Zf(e){var t=e,s=t.alternate;switch(t.tag){case 15:case 0:t=ff(s,t,t.pendingProps,t.type,void 0,Ge);break;case 11:t=ff(s,t,t.pendingProps,t.type.render,t.ref,Ge);break;case 5:oc(t);default:jf(s,t),t=He=Qu(t,os),t=yf(s,t,os)}e.memoizedProps=e.pendingProps,t===null?Nr(e):He=t}function il(e,t,s,l){Ja=sn=null,oc(t),Kn=null,Il=0;var r=t.return;try{if(d0(e,r,t,s,Ge)){jt=1,dr(e,ba(s,e.current)),He=null;return}}catch(d){if(r!==null)throw He=r,d;jt=1,dr(e,ba(s,e.current)),He=null;return}t.flags&32768?(Qe||l===1?e=!0:al||(Ge&536870912)!==0?e=!1:(Es=e=!0,(l===2||l===9||l===3||l===6)&&(l=oa.current,l!==null&&l.tag===13&&(l.flags|=16384))),Pf(t,e)):Nr(t)}function Nr(e){var t=e;do{if((t.flags&32768)!==0){Pf(t,Es);return}e=t.return;var s=f0(t.alternate,t,os);if(s!==null){He=s;return}if(t=t.sibling,t!==null){He=t;return}He=t=e}while(t!==null);jt===0&&(jt=5)}function Pf(e,t){do{var s=p0(e.alternate,e);if(s!==null){s.flags&=32767,He=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!t&&(e=e.sibling,e!==null)){He=e;return}He=e=s}while(e!==null);jt=6,He=null}function Jf(e,t,s,l,r,d,m,b,k){e.cancelPendingCommit=null;do wr();while(Ot!==0);if((at&6)!==0)throw Error(c(327));if(t!==null){if(t===e.current)throw Error(c(177));if(d=t.lanes|t.childLanes,d|=Ro,Yt(e,s,d,m,b,k),e===ct&&(He=ct=null,Ge=0),nl=t,zs=e,cs=s,Gc=d,Yc=r,Hf=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,C0(pt,function(){return sp(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=_.T,_.T=null,r=E.p,E.p=2,m=at,at|=4;try{h0(e,t,s)}finally{at=m,E.p=r,_.T=l}}Ot=1,Wf(),ep(),tp()}}function Wf(){if(Ot===1){Ot=0;var e=zs,t=nl,s=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||s){s=_.T,_.T=null;var l=E.p;E.p=2;var r=at;at|=4;try{Of(t,e);var d=ld,m=qu(e.containerInfo),b=d.focusedElem,k=d.selectionRange;if(m!==b&&b&&b.ownerDocument&&Lu(b.ownerDocument.documentElement,b)){if(k!==null&&Mo(b)){var Y=k.start,ee=k.end;if(ee===void 0&&(ee=Y),"selectionStart"in b)b.selectionStart=Y,b.selectionEnd=Math.min(ee,b.value.length);else{var ne=b.ownerDocument||document,V=ne&&ne.defaultView||window;if(V.getSelection){var J=V.getSelection(),ve=b.textContent.length,Te=Math.min(k.start,ve),rt=k.end===void 0?Te:Math.min(k.end,ve);!J.extend&&Te>rt&&(m=rt,rt=Te,Te=m);var U=Uu(b,Te),O=Uu(b,rt);if(U&&O&&(J.rangeCount!==1||J.anchorNode!==U.node||J.anchorOffset!==U.offset||J.focusNode!==O.node||J.focusOffset!==O.offset)){var $=ne.createRange();$.setStart(U.node,U.offset),J.removeAllRanges(),Te>rt?(J.addRange($),J.extend(O.node,O.offset)):($.setEnd(O.node,O.offset),J.addRange($))}}}}for(ne=[],J=b;J=J.parentNode;)J.nodeType===1&&ne.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<ne.length;b++){var ae=ne[b];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Ur=!!nd,ld=nd=null}finally{at=r,E.p=l,_.T=s}}e.current=t,Ot=2}}function ep(){if(Ot===2){Ot=0;var e=zs,t=nl,s=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||s){s=_.T,_.T=null;var l=E.p;E.p=2;var r=at;at|=4;try{Tf(e,t.alternate,t)}finally{at=r,E.p=l,_.T=s}}Ot=3}}function tp(){if(Ot===4||Ot===3){Ot=0,Kt();var e=zs,t=nl,s=cs,l=Hf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Ot=5:(Ot=0,nl=zs=null,ap(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(As=null),ht(s),t=t.stateNode,Ze&&typeof Ze.onCommitFiberRoot=="function")try{Ze.onCommitFiberRoot(Ke,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=_.T,r=E.p,E.p=2,_.T=null;try{for(var d=e.onRecoverableError,m=0;m<l.length;m++){var b=l[m];d(b.value,{componentStack:b.stack})}}finally{_.T=t,E.p=r}}(cs&3)!==0&&wr(),Ba(e),r=e.pendingLanes,(s&261930)!==0&&(r&42)!==0?e===Fc?si++:(si=0,Fc=e):si=0,ni(0)}}function ap(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,ql(t)))}function wr(){return Wf(),ep(),tp(),sp()}function sp(){if(Ot!==5)return!1;var e=zs,t=Gc;Gc=0;var s=ht(cs),l=_.T,r=E.p;try{E.p=32>s?32:s,_.T=null,s=Yc,Yc=null;var d=zs,m=cs;if(Ot=0,nl=zs=null,cs=0,(at&6)!==0)throw Error(c(331));var b=at;if(at|=4,qf(d.current),Rf(d,d.current,m,s),at=b,ni(0,!1),Ze&&typeof Ze.onPostCommitFiberRoot=="function")try{Ze.onPostCommitFiberRoot(Ke,d)}catch{}return!0}finally{E.p=r,_.T=l,ap(e,t)}}function np(e,t,s){t=ba(s,t),t=Nc(e.stateNode,t,2),e=Ss(e,t,2),e!==null&&(Ve(e,2),Ba(e))}function nt(e,t,s){if(e.tag===3)np(e,e,s);else for(;t!==null;){if(t.tag===3){np(t,e,s);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(As===null||!As.has(l))){e=ba(s,e),s=nf(2),l=Ss(t,s,2),l!==null&&(lf(s,l,t,e),Ve(l,2),Ba(l));break}}t=t.return}}function Xc(e,t,s){var l=e.pingCache;if(l===null){l=e.pingCache=new b0;var r=new Set;l.set(t,r)}else r=l.get(t),r===void 0&&(r=new Set,l.set(t,r));r.has(s)||(Ic=!0,r.add(s),e=N0.bind(null,e,t,s),t.then(e,e))}function N0(e,t,s){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,ct===e&&(Ge&s)===s&&(jt===4||jt===3&&(Ge&62914560)===Ge&&300>ft()-br?(at&2)===0&&ll(e,0):Hc|=s,sl===Ge&&(sl=0)),Ba(e)}function lp(e,t){t===0&&(t=Pe()),e=en(e,t),e!==null&&(Ve(e,t),Ba(e))}function w0(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),lp(e,s)}function S0(e,t){var s=0;switch(e.tag){case 31:case 13:var l=e.stateNode,r=e.memoizedState;r!==null&&(s=r.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(c(314))}l!==null&&l.delete(t),lp(e,s)}function C0(e,t){return ke(e,t)}var Sr=null,rl=null,Kc=!1,Cr=!1,Zc=!1,Ds=0;function Ba(e){e!==rl&&e.next===null&&(rl===null?Sr=rl=e:rl=rl.next=e),Cr=!0,Kc||(Kc=!0,T0())}function ni(e,t){if(!Zc&&Cr){Zc=!0;do for(var s=!1,l=Sr;l!==null;){if(e!==0){var r=l.pendingLanes;if(r===0)var d=0;else{var m=l.suspendedLanes,b=l.pingedLanes;d=(1<<31-Re(42|e)+1)-1,d&=r&~(m&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(s=!0,cp(l,d))}else d=Ge,d=yt(l,l===ct?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||oe(l,d)||(s=!0,cp(l,d));l=l.next}while(s);Zc=!1}}function k0(){ip()}function ip(){Cr=Kc=!1;var e=0;Ds!==0&&q0()&&(e=Ds);for(var t=ft(),s=null,l=Sr;l!==null;){var r=l.next,d=rp(l,t);d===0?(l.next=null,s===null?Sr=r:s.next=r,r===null&&(rl=s)):(s=l,(e!==0||(d&3)!==0)&&(Cr=!0)),l=r}Ot!==0&&Ot!==5||ni(e),Ds!==0&&(Ds=0)}function rp(e,t){for(var s=e.suspendedLanes,l=e.pingedLanes,r=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var m=31-Re(d),b=1<<m,k=r[m];k===-1?((b&s)===0||(b&l)!==0)&&(r[m]=Ae(b,t)):k<=t&&(e.expiredLanes|=b),d&=~b}if(t=ct,s=Ge,s=yt(e,e===t?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,s===0||e===t&&(st===2||st===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&We(l),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||oe(e,s)){if(t=s&-s,t===e.callbackPriority)return t;switch(l!==null&&We(l),ht(s)){case 2:case 8:s=Ra;break;case 32:s=pt;break;case 268435456:s=pe;break;default:s=pt}return l=op.bind(null,e),s=ke(s,l),e.callbackPriority=t,e.callbackNode=s,t}return l!==null&&l!==null&&We(l),e.callbackPriority=2,e.callbackNode=null,2}function op(e,t){if(Ot!==0&&Ot!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(wr()&&e.callbackNode!==s)return null;var l=Ge;return l=yt(e,e===ct?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Gf(e,l,t),rp(e,ft()),e.callbackNode!=null&&e.callbackNode===s?op.bind(null,e):null)}function cp(e,t){if(wr())return null;Gf(e,t,!0)}function T0(){I0(function(){(at&6)!==0?ke(fa,k0):ip()})}function Pc(){if(Ds===0){var e=Vn;e===0&&(e=Va,Va<<=1,(Va&261888)===0&&(Va=256)),Ds=e}return Ds}function dp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Di(""+e)}function up(e,t){var s=t.ownerDocument.createElement("input");return s.name=t.name,s.value=t.value,e.id&&s.setAttribute("form",e.id),t.parentNode.insertBefore(s,t),e=new FormData(e),s.parentNode.removeChild(s),e}function E0(e,t,s,l,r){if(t==="submit"&&s&&s.stateNode===r){var d=dp((r[Pt]||null).action),m=l.submitter;m&&(t=(t=m[Pt]||null)?dp(t.formAction):m.getAttribute("formAction"),t!==null&&(d=t,m=null));var b=new qi("action","action",null,l,r);e.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ds!==0){var k=m?up(r,m):new FormData(r);xc(s,{pending:!0,data:k,method:r.method,action:d},null,k)}}else typeof d=="function"&&(b.preventDefault(),k=m?up(r,m):new FormData(r),xc(s,{pending:!0,data:k,method:r.method,action:d},d,k))},currentTarget:r}]})}}for(var Jc=0;Jc<Do.length;Jc++){var Wc=Do[Jc],M0=Wc.toLowerCase(),A0=Wc[0].toUpperCase()+Wc.slice(1);ka(M0,"on"+A0)}ka(Hu,"onAnimationEnd"),ka($u,"onAnimationIteration"),ka(Gu,"onAnimationStart"),ka("dblclick","onDoubleClick"),ka("focusin","onFocus"),ka("focusout","onBlur"),ka(Qx,"onTransitionRun"),ka(Xx,"onTransitionStart"),ka(Kx,"onTransitionCancel"),ka(Yu,"onTransitionEnd"),zn("onMouseEnter",["mouseout","mouseover"]),zn("onMouseLeave",["mouseout","mouseover"]),zn("onPointerEnter",["pointerout","pointerover"]),zn("onPointerLeave",["pointerout","pointerover"]),Zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var li="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),z0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(li));function mp(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var l=e[s],r=l.event;l=l.listeners;e:{var d=void 0;if(t)for(var m=l.length-1;0<=m;m--){var b=l[m],k=b.instance,Y=b.currentTarget;if(b=b.listener,k!==d&&r.isPropagationStopped())break e;d=b,r.currentTarget=Y;try{d(r)}catch(ee){Hi(ee)}r.currentTarget=null,d=k}else for(m=0;m<l.length;m++){if(b=l[m],k=b.instance,Y=b.currentTarget,b=b.listener,k!==d&&r.isPropagationStopped())break e;d=b,r.currentTarget=Y;try{d(r)}catch(ee){Hi(ee)}r.currentTarget=null,d=k}}}}function $e(e,t){var s=t[mo];s===void 0&&(s=t[mo]=new Set);var l=e+"__bubble";s.has(l)||(fp(t,e,2,!1),s.add(l))}function ed(e,t,s){var l=0;t&&(l|=4),fp(s,e,l,t)}var kr="_reactListening"+Math.random().toString(36).slice(2);function td(e){if(!e[kr]){e[kr]=!0,lu.forEach(function(s){s!=="selectionchange"&&(z0.has(s)||ed(s,!1,e),ed(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[kr]||(t[kr]=!0,ed("selectionchange",!1,t))}}function fp(e,t,s,l){switch($p(t)){case 2:var r=ib;break;case 8:r=rb;break;default:r=gd}s=r.bind(null,t,s,e),r=void 0,!jo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),l?r!==void 0?e.addEventListener(t,s,{capture:!0,passive:r}):e.addEventListener(t,s,!0):r!==void 0?e.addEventListener(t,s,{passive:r}):e.addEventListener(t,s,!1)}function ad(e,t,s,l,r){var d=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var m=l.tag;if(m===3||m===4){var b=l.stateNode.containerInfo;if(b===r)break;if(m===4)for(m=l.return;m!==null;){var k=m.tag;if((k===3||k===4)&&m.stateNode.containerInfo===r)return;m=m.return}for(;b!==null;){if(m=En(b),m===null)return;if(k=m.tag,k===5||k===6||k===26||k===27){l=d=m;continue e}b=b.parentNode}}l=l.return}xu(function(){var Y=d,ee=yo(s),ne=[];e:{var V=Fu.get(e);if(V!==void 0){var J=qi,ve=e;switch(e){case"keypress":if(Ui(s)===0)break e;case"keydown":case"keyup":J=Sx;break;case"focusin":ve="focus",J=So;break;case"focusout":ve="blur",J=So;break;case"beforeblur":case"afterblur":J=So;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=vu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=fx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=Tx;break;case Hu:case $u:case Gu:J=gx;break;case Yu:J=Mx;break;case"scroll":case"scrollend":J=ux;break;case"wheel":J=zx;break;case"copy":case"cut":case"paste":J=bx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=_u;break;case"toggle":case"beforetoggle":J=Dx}var Te=(t&4)!==0,rt=!Te&&(e==="scroll"||e==="scrollend"),U=Te?V!==null?V+"Capture":null:V;Te=[];for(var O=Y,$;O!==null;){var ae=O;if($=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||$===null||U===null||(ae=kl(O,U),ae!=null&&Te.push(ii(O,ae,$))),rt)break;O=O.return}0<Te.length&&(V=new J(V,ve,null,s,ee),ne.push({event:V,listeners:Te}))}}if((t&7)===0){e:{if(V=e==="mouseover"||e==="pointerover",J=e==="mouseout"||e==="pointerout",V&&s!==bo&&(ve=s.relatedTarget||s.fromElement)&&(En(ve)||ve[Tn]))break e;if((J||V)&&(V=ee.window===ee?ee:(V=ee.ownerDocument)?V.defaultView||V.parentWindow:window,J?(ve=s.relatedTarget||s.toElement,J=Y,ve=ve?En(ve):null,ve!==null&&(rt=f(ve),Te=ve.tag,ve!==rt||Te!==5&&Te!==27&&Te!==6)&&(ve=null)):(J=null,ve=Y),J!==ve)){if(Te=vu,ae="onMouseLeave",U="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(Te=_u,ae="onPointerLeave",U="onPointerEnter",O="pointer"),rt=J==null?V:Cl(J),$=ve==null?V:Cl(ve),V=new Te(ae,O+"leave",J,s,ee),V.target=rt,V.relatedTarget=$,ae=null,En(ee)===Y&&(Te=new Te(U,O+"enter",ve,s,ee),Te.target=$,Te.relatedTarget=rt,ae=Te),rt=ae,J&&ve)t:{for(Te=O0,U=J,O=ve,$=0,ae=U;ae;ae=Te(ae))$++;ae=0;for(var Ce=O;Ce;Ce=Te(Ce))ae++;for(;0<$-ae;)U=Te(U),$--;for(;0<ae-$;)O=Te(O),ae--;for(;$--;){if(U===O||O!==null&&U===O.alternate){Te=U;break t}U=Te(U),O=Te(O)}Te=null}else Te=null;J!==null&&pp(ne,V,J,Te,!1),ve!==null&&rt!==null&&pp(ne,rt,ve,Te,!0)}}e:{if(V=Y?Cl(Y):window,J=V.nodeName&&V.nodeName.toLowerCase(),J==="select"||J==="input"&&V.type==="file")var et=Mu;else if(Tu(V))if(Au)et=Yx;else{et=$x;var je=Hx}else J=V.nodeName,!J||J.toLowerCase()!=="input"||V.type!=="checkbox"&&V.type!=="radio"?Y&&xo(Y.elementType)&&(et=Mu):et=Gx;if(et&&(et=et(e,Y))){Eu(ne,et,s,ee);break e}je&&je(e,V,Y),e==="focusout"&&Y&&V.type==="number"&&Y.memoizedProps.value!=null&&go(V,"number",V.value)}switch(je=Y?Cl(Y):window,e){case"focusin":(Tu(je)||je.contentEditable==="true")&&(qn=je,Ao=Y,Rl=null);break;case"focusout":Rl=Ao=qn=null;break;case"mousedown":zo=!0;break;case"contextmenu":case"mouseup":case"dragend":zo=!1,Bu(ne,s,ee);break;case"selectionchange":if(Vx)break;case"keydown":case"keyup":Bu(ne,s,ee)}var De;if(ko)e:{switch(e){case"compositionstart":var Ye="onCompositionStart";break e;case"compositionend":Ye="onCompositionEnd";break e;case"compositionupdate":Ye="onCompositionUpdate";break e}Ye=void 0}else Ln?Cu(e,s)&&(Ye="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Ye="onCompositionStart");Ye&&(Nu&&s.locale!=="ko"&&(Ln||Ye!=="onCompositionStart"?Ye==="onCompositionEnd"&&Ln&&(De=bu()):(bs=ee,_o="value"in bs?bs.value:bs.textContent,Ln=!0)),je=Tr(Y,Ye),0<je.length&&(Ye=new ju(Ye,e,null,s,ee),ne.push({event:Ye,listeners:je}),De?Ye.data=De:(De=ku(s),De!==null&&(Ye.data=De)))),(De=Ux?Lx(e,s):qx(e,s))&&(Ye=Tr(Y,"onBeforeInput"),0<Ye.length&&(je=new ju("onBeforeInput","beforeinput",null,s,ee),ne.push({event:je,listeners:Ye}),je.data=De)),E0(ne,e,Y,s,ee)}mp(ne,t)})}function ii(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Tr(e,t){for(var s=t+"Capture",l=[];e!==null;){var r=e,d=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||d===null||(r=kl(e,s),r!=null&&l.unshift(ii(e,r,d)),r=kl(e,t),r!=null&&l.push(ii(e,r,d))),e.tag===3)return l;e=e.return}return[]}function O0(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function pp(e,t,s,l,r){for(var d=t._reactName,m=[];s!==null&&s!==l;){var b=s,k=b.alternate,Y=b.stateNode;if(b=b.tag,k!==null&&k===l)break;b!==5&&b!==26&&b!==27||Y===null||(k=Y,r?(Y=kl(s,d),Y!=null&&m.unshift(ii(s,Y,k))):r||(Y=kl(s,d),Y!=null&&m.push(ii(s,Y,k)))),s=s.return}m.length!==0&&e.push({event:t,listeners:m})}var D0=/\r\n?/g,R0=/ |�/g;function hp(e){return(typeof e=="string"?e:""+e).replace(D0,`
`).replace(R0,"")}function gp(e,t){return t=hp(t),hp(e)===t}function it(e,t,s,l,r,d){switch(s){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||Dn(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&Dn(e,""+l);break;case"className":zi(e,"class",l);break;case"tabIndex":zi(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":zi(e,s,l);break;case"style":hu(e,l,d);break;case"data":if(t!=="object"){zi(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||s!=="href")){e.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(s);break}l=Di(""+l),e.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(s==="formAction"?(t!=="input"&&it(e,t,"name",r.name,r,null),it(e,t,"formEncType",r.formEncType,r,null),it(e,t,"formMethod",r.formMethod,r,null),it(e,t,"formTarget",r.formTarget,r,null)):(it(e,t,"encType",r.encType,r,null),it(e,t,"method",r.method,r,null),it(e,t,"target",r.target,r,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(s);break}l=Di(""+l),e.setAttribute(s,l);break;case"onClick":l!=null&&(e.onclick=Xa);break;case"onScroll":l!=null&&$e("scroll",e);break;case"onScrollEnd":l!=null&&$e("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(c(61));if(s=l.__html,s!=null){if(r.children!=null)throw Error(c(60));e.innerHTML=s}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}s=Di(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,""+l):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":l===!0?e.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,l):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(s,l):e.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(s):e.setAttribute(s,l);break;case"popover":$e("beforetoggle",e),$e("toggle",e),Ai(e,"popover",l);break;case"xlinkActuate":Qa(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Qa(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Qa(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Qa(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Qa(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Qa(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Qa(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Qa(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Qa(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ai(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=cx.get(s)||s,Ai(e,s,l))}}function sd(e,t,s,l,r,d){switch(s){case"style":hu(e,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(c(61));if(s=l.__html,s!=null){if(r.children!=null)throw Error(c(60));e.innerHTML=s}}break;case"children":typeof l=="string"?Dn(e,l):(typeof l=="number"||typeof l=="bigint")&&Dn(e,""+l);break;case"onScroll":l!=null&&$e("scroll",e);break;case"onScrollEnd":l!=null&&$e("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Xa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!iu.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(r=s.endsWith("Capture"),t=s.slice(2,r?s.length-7:void 0),d=e[Pt]||null,d=d!=null?d[s]:null,typeof d=="function"&&e.removeEventListener(t,d,r),typeof l=="function")){typeof d!="function"&&d!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(t,l,r);break e}s in e?e[s]=l:l===!0?e.setAttribute(s,""):Ai(e,s,l)}}}function Gt(e,t,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$e("error",e),$e("load",e);var l=!1,r=!1,d;for(d in s)if(s.hasOwnProperty(d)){var m=s[d];if(m!=null)switch(d){case"src":l=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:it(e,t,d,m,s,null)}}r&&it(e,t,"srcSet",s.srcSet,s,null),l&&it(e,t,"src",s.src,s,null);return;case"input":$e("invalid",e);var b=d=m=r=null,k=null,Y=null;for(l in s)if(s.hasOwnProperty(l)){var ee=s[l];if(ee!=null)switch(l){case"name":r=ee;break;case"type":m=ee;break;case"checked":k=ee;break;case"defaultChecked":Y=ee;break;case"value":d=ee;break;case"defaultValue":b=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(c(137,t));break;default:it(e,t,l,ee,s,null)}}uu(e,d,b,k,Y,m,r,!1);return;case"select":$e("invalid",e),l=m=d=null;for(r in s)if(s.hasOwnProperty(r)&&(b=s[r],b!=null))switch(r){case"value":d=b;break;case"defaultValue":m=b;break;case"multiple":l=b;default:it(e,t,r,b,s,null)}t=d,s=m,e.multiple=!!l,t!=null?On(e,!!l,t,!1):s!=null&&On(e,!!l,s,!0);return;case"textarea":$e("invalid",e),d=r=l=null;for(m in s)if(s.hasOwnProperty(m)&&(b=s[m],b!=null))switch(m){case"value":l=b;break;case"defaultValue":r=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(c(91));break;default:it(e,t,m,b,s,null)}fu(e,l,r,d);return;case"option":for(k in s)if(s.hasOwnProperty(k)&&(l=s[k],l!=null))switch(k){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:it(e,t,k,l,s,null)}return;case"dialog":$e("beforetoggle",e),$e("toggle",e),$e("cancel",e),$e("close",e);break;case"iframe":case"object":$e("load",e);break;case"video":case"audio":for(l=0;l<li.length;l++)$e(li[l],e);break;case"image":$e("error",e),$e("load",e);break;case"details":$e("toggle",e);break;case"embed":case"source":case"link":$e("error",e),$e("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in s)if(s.hasOwnProperty(Y)&&(l=s[Y],l!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:it(e,t,Y,l,s,null)}return;default:if(xo(t)){for(ee in s)s.hasOwnProperty(ee)&&(l=s[ee],l!==void 0&&sd(e,t,ee,l,s,void 0));return}}for(b in s)s.hasOwnProperty(b)&&(l=s[b],l!=null&&it(e,t,b,l,s,null))}function U0(e,t,s,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,d=null,m=null,b=null,k=null,Y=null,ee=null;for(J in s){var ne=s[J];if(s.hasOwnProperty(J)&&ne!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":k=ne;default:l.hasOwnProperty(J)||it(e,t,J,null,l,ne)}}for(var V in l){var J=l[V];if(ne=s[V],l.hasOwnProperty(V)&&(J!=null||ne!=null))switch(V){case"type":d=J;break;case"name":r=J;break;case"checked":Y=J;break;case"defaultChecked":ee=J;break;case"value":m=J;break;case"defaultValue":b=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(c(137,t));break;default:J!==ne&&it(e,t,V,J,l,ne)}}ho(e,m,b,k,Y,ee,d,r);return;case"select":J=m=b=V=null;for(d in s)if(k=s[d],s.hasOwnProperty(d)&&k!=null)switch(d){case"value":break;case"multiple":J=k;default:l.hasOwnProperty(d)||it(e,t,d,null,l,k)}for(r in l)if(d=l[r],k=s[r],l.hasOwnProperty(r)&&(d!=null||k!=null))switch(r){case"value":V=d;break;case"defaultValue":b=d;break;case"multiple":m=d;default:d!==k&&it(e,t,r,d,l,k)}t=b,s=m,l=J,V!=null?On(e,!!s,V,!1):!!l!=!!s&&(t!=null?On(e,!!s,t,!0):On(e,!!s,s?[]:"",!1));return;case"textarea":J=V=null;for(b in s)if(r=s[b],s.hasOwnProperty(b)&&r!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:it(e,t,b,null,l,r)}for(m in l)if(r=l[m],d=s[m],l.hasOwnProperty(m)&&(r!=null||d!=null))switch(m){case"value":V=r;break;case"defaultValue":J=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(c(91));break;default:r!==d&&it(e,t,m,r,l,d)}mu(e,V,J);return;case"option":for(var ve in s)if(V=s[ve],s.hasOwnProperty(ve)&&V!=null&&!l.hasOwnProperty(ve))switch(ve){case"selected":e.selected=!1;break;default:it(e,t,ve,null,l,V)}for(k in l)if(V=l[k],J=s[k],l.hasOwnProperty(k)&&V!==J&&(V!=null||J!=null))switch(k){case"selected":e.selected=V&&typeof V!="function"&&typeof V!="symbol";break;default:it(e,t,k,V,l,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in s)V=s[Te],s.hasOwnProperty(Te)&&V!=null&&!l.hasOwnProperty(Te)&&it(e,t,Te,null,l,V);for(Y in l)if(V=l[Y],J=s[Y],l.hasOwnProperty(Y)&&V!==J&&(V!=null||J!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(c(137,t));break;default:it(e,t,Y,V,l,J)}return;default:if(xo(t)){for(var rt in s)V=s[rt],s.hasOwnProperty(rt)&&V!==void 0&&!l.hasOwnProperty(rt)&&sd(e,t,rt,void 0,l,V);for(ee in l)V=l[ee],J=s[ee],!l.hasOwnProperty(ee)||V===J||V===void 0&&J===void 0||sd(e,t,ee,V,l,J);return}}for(var U in s)V=s[U],s.hasOwnProperty(U)&&V!=null&&!l.hasOwnProperty(U)&&it(e,t,U,null,l,V);for(ne in l)V=l[ne],J=s[ne],!l.hasOwnProperty(ne)||V===J||V==null&&J==null||it(e,t,ne,V,l,J)}function xp(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function L0(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,s=performance.getEntriesByType("resource"),l=0;l<s.length;l++){var r=s[l],d=r.transferSize,m=r.initiatorType,b=r.duration;if(d&&b&&xp(m)){for(m=0,b=r.responseEnd,l+=1;l<s.length;l++){var k=s[l],Y=k.startTime;if(Y>b)break;var ee=k.transferSize,ne=k.initiatorType;ee&&xp(ne)&&(k=k.responseEnd,m+=ee*(k<b?1:(b-Y)/(k-Y)))}if(--l,t+=8*(d+m)/(r.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var nd=null,ld=null;function Er(e){return e.nodeType===9?e:e.ownerDocument}function bp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yp(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function id(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var rd=null;function q0(){var e=window.event;return e&&e.type==="popstate"?e===rd?!1:(rd=e,!0):(rd=null,!1)}var vp=typeof setTimeout=="function"?setTimeout:void 0,B0=typeof clearTimeout=="function"?clearTimeout:void 0,jp=typeof Promise=="function"?Promise:void 0,I0=typeof queueMicrotask=="function"?queueMicrotask:typeof jp<"u"?function(e){return jp.resolve(null).then(e).catch(H0)}:vp;function H0(e){setTimeout(function(){throw e})}function Rs(e){return e==="head"}function _p(e,t){var s=t,l=0;do{var r=s.nextSibling;if(e.removeChild(s),r&&r.nodeType===8)if(s=r.data,s==="/$"||s==="/&"){if(l===0){e.removeChild(r),ul(t);return}l--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")l++;else if(s==="html")ri(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,ri(s);for(var d=s.firstChild;d;){var m=d.nextSibling,b=d.nodeName;d[Sl]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&d.rel.toLowerCase()==="stylesheet"||s.removeChild(d),d=m}}else s==="body"&&ri(e.ownerDocument.body);s=r}while(s);ul(t)}function Np(e,t){var s=e;e=0;do{var l=s.nextSibling;if(s.nodeType===1?t?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(t?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),l&&l.nodeType===8)if(s=l.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=l}while(s)}function od(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var s=t;switch(t=t.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":od(s),fo(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function $0(e,t,s,l){for(;e.nodeType===1;){var r=s;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Sl])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var d=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=Na(e.nextSibling),e===null)break}return null}function G0(e,t,s){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=Na(e.nextSibling),e===null))return null;return e}function wp(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Na(e.nextSibling),e===null))return null;return e}function cd(e){return e.data==="$?"||e.data==="$~"}function dd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Y0(e,t){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||s.readyState!=="loading")t();else{var l=function(){t(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Na(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var ud=null;function Sp(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(t===0)return Na(e.nextSibling);t--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||t++}e=e.nextSibling}return null}function Cp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(t===0)return e;t--}else s!=="/$"&&s!=="/&"||t++}e=e.previousSibling}return null}function kp(e,t,s){switch(t=Er(s),e){case"html":if(e=t.documentElement,!e)throw Error(c(452));return e;case"head":if(e=t.head,!e)throw Error(c(453));return e;case"body":if(e=t.body,!e)throw Error(c(454));return e;default:throw Error(c(451))}}function ri(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);fo(e)}var wa=new Map,Tp=new Set;function Mr(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ds=E.d;E.d={f:F0,r:V0,D:Q0,C:X0,L:K0,m:Z0,X:J0,S:P0,M:W0};function F0(){var e=ds.f(),t=jr();return e||t}function V0(e){var t=Mn(e);t!==null&&t.tag===5&&t.type==="form"?Ym(t):ds.r(e)}var ol=typeof document>"u"?null:document;function Ep(e,t,s){var l=ol;if(l&&typeof t=="string"&&t){var r=ga(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof s=="string"&&(r+='[crossorigin="'+s+'"]'),Tp.has(r)||(Tp.add(r),e={rel:e,crossOrigin:s,href:t},l.querySelector(r)===null&&(t=l.createElement("link"),Gt(t,"link",e),Ut(t),l.head.appendChild(t)))}}function Q0(e){ds.D(e),Ep("dns-prefetch",e,null)}function X0(e,t){ds.C(e,t),Ep("preconnect",e,t)}function K0(e,t,s){ds.L(e,t,s);var l=ol;if(l&&e&&t){var r='link[rel="preload"][as="'+ga(t)+'"]';t==="image"&&s&&s.imageSrcSet?(r+='[imagesrcset="'+ga(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(r+='[imagesizes="'+ga(s.imageSizes)+'"]')):r+='[href="'+ga(e)+'"]';var d=r;switch(t){case"style":d=cl(e);break;case"script":d=dl(e)}wa.has(d)||(e=N({rel:"preload",href:t==="image"&&s&&s.imageSrcSet?void 0:e,as:t},s),wa.set(d,e),l.querySelector(r)!==null||t==="style"&&l.querySelector(oi(d))||t==="script"&&l.querySelector(ci(d))||(t=l.createElement("link"),Gt(t,"link",e),Ut(t),l.head.appendChild(t)))}}function Z0(e,t){ds.m(e,t);var s=ol;if(s&&e){var l=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+ga(l)+'"][href="'+ga(e)+'"]',d=r;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=dl(e)}if(!wa.has(d)&&(e=N({rel:"modulepreload",href:e},t),wa.set(d,e),s.querySelector(r)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(ci(d)))return}l=s.createElement("link"),Gt(l,"link",e),Ut(l),s.head.appendChild(l)}}}function P0(e,t,s){ds.S(e,t,s);var l=ol;if(l&&e){var r=An(l).hoistableStyles,d=cl(e);t=t||"default";var m=r.get(d);if(!m){var b={loading:0,preload:null};if(m=l.querySelector(oi(d)))b.loading=5;else{e=N({rel:"stylesheet",href:e,"data-precedence":t},s),(s=wa.get(d))&&md(e,s);var k=m=l.createElement("link");Ut(k),Gt(k,"link",e),k._p=new Promise(function(Y,ee){k.onload=Y,k.onerror=ee}),k.addEventListener("load",function(){b.loading|=1}),k.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Ar(m,t,l)}m={type:"stylesheet",instance:m,count:1,state:b},r.set(d,m)}}}function J0(e,t){ds.X(e,t);var s=ol;if(s&&e){var l=An(s).hoistableScripts,r=dl(e),d=l.get(r);d||(d=s.querySelector(ci(r)),d||(e=N({src:e,async:!0},t),(t=wa.get(r))&&fd(e,t),d=s.createElement("script"),Ut(d),Gt(d,"link",e),s.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(r,d))}}function W0(e,t){ds.M(e,t);var s=ol;if(s&&e){var l=An(s).hoistableScripts,r=dl(e),d=l.get(r);d||(d=s.querySelector(ci(r)),d||(e=N({src:e,async:!0,type:"module"},t),(t=wa.get(r))&&fd(e,t),d=s.createElement("script"),Ut(d),Gt(d,"link",e),s.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(r,d))}}function Mp(e,t,s,l){var r=(r=be.current)?Mr(r):null;if(!r)throw Error(c(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(t=cl(s.href),s=An(r).hoistableStyles,l=s.get(t),l||(l={type:"style",instance:null,count:0,state:null},s.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=cl(s.href);var d=An(r).hoistableStyles,m=d.get(e);if(m||(r=r.ownerDocument||r,m={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,m),(d=r.querySelector(oi(e)))&&!d._p&&(m.instance=d,m.state.loading=5),wa.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},wa.set(e,s),d||eb(r,e,s,m.state))),t&&l===null)throw Error(c(528,""));return m}if(t&&l!==null)throw Error(c(529,""));return null;case"script":return t=s.async,s=s.src,typeof s=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=dl(s),s=An(r).hoistableScripts,l=s.get(t),l||(l={type:"script",instance:null,count:0,state:null},s.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(c(444,e))}}function cl(e){return'href="'+ga(e)+'"'}function oi(e){return'link[rel="stylesheet"]['+e+"]"}function Ap(e){return N({},e,{"data-precedence":e.precedence,precedence:null})}function eb(e,t,s,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),Gt(t,"link",s),Ut(t),e.head.appendChild(t))}function dl(e){return'[src="'+ga(e)+'"]'}function ci(e){return"script[async]"+e}function zp(e,t,s){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+ga(s.href)+'"]');if(l)return t.instance=l,Ut(l),l;var r=N({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Ut(l),Gt(l,"style",r),Ar(l,s.precedence,e),t.instance=l;case"stylesheet":r=cl(s.href);var d=e.querySelector(oi(r));if(d)return t.state.loading|=4,t.instance=d,Ut(d),d;l=Ap(s),(r=wa.get(r))&&md(l,r),d=(e.ownerDocument||e).createElement("link"),Ut(d);var m=d;return m._p=new Promise(function(b,k){m.onload=b,m.onerror=k}),Gt(d,"link",l),t.state.loading|=4,Ar(d,s.precedence,e),t.instance=d;case"script":return d=dl(s.src),(r=e.querySelector(ci(d)))?(t.instance=r,Ut(r),r):(l=s,(r=wa.get(d))&&(l=N({},s),fd(l,r)),e=e.ownerDocument||e,r=e.createElement("script"),Ut(r),Gt(r,"link",l),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(c(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,Ar(l,s.precedence,e));return t.instance}function Ar(e,t,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=l.length?l[l.length-1]:null,d=r,m=0;m<l.length;m++){var b=l[m];if(b.dataset.precedence===t)d=b;else if(d!==r)break}d?d.parentNode.insertBefore(e,d.nextSibling):(t=s.nodeType===9?s.head:s,t.insertBefore(e,t.firstChild))}function md(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function fd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var zr=null;function Op(e,t,s){if(zr===null){var l=new Map,r=zr=new Map;r.set(s,l)}else r=zr,l=r.get(s),l||(l=new Map,r.set(s,l));if(l.has(e))return l;for(l.set(e,null),s=s.getElementsByTagName(e),r=0;r<s.length;r++){var d=s[r];if(!(d[Sl]||d[Bt]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var m=d.getAttribute(t)||"";m=e+m;var b=l.get(m);b?b.push(d):l.set(m,[d])}}return l}function Dp(e,t,s){e=e.ownerDocument||e,e.head.insertBefore(s,t==="title"?e.querySelector("head > title"):null)}function tb(e,t,s){if(s===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Rp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function ab(e,t,s,l){if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var r=cl(l.href),d=t.querySelector(oi(r));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Or.bind(e),t.then(e,e)),s.state.loading|=4,s.instance=d,Ut(d);return}d=t.ownerDocument||t,l=Ap(l),(r=wa.get(r))&&md(l,r),d=d.createElement("link"),Ut(d);var m=d;m._p=new Promise(function(b,k){m.onload=b,m.onerror=k}),Gt(d,"link",l),s.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,t),(t=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=Or.bind(e),t.addEventListener("load",s),t.addEventListener("error",s))}}var pd=0;function sb(e,t){return e.stylesheets&&e.count===0&&Rr(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var l=setTimeout(function(){if(e.stylesheets&&Rr(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+t);0<e.imgBytes&&pd===0&&(pd=62500*L0());var r=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Rr(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>pd?50:800)+t);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(r)}}:null}function Or(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Rr(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Dr=null;function Rr(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Dr=new Map,t.forEach(nb,e),Dr=null,Or.call(e))}function nb(e,t){if(!(t.state.loading&4)){var s=Dr.get(e);if(s)var l=s.get(null);else{s=new Map,Dr.set(e,s);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<r.length;d++){var m=r[d];(m.nodeName==="LINK"||m.getAttribute("media")!=="not all")&&(s.set(m.dataset.precedence,m),l=m)}l&&s.set(null,l)}r=t.instance,m=r.getAttribute("data-precedence"),d=s.get(m)||l,d===l&&s.set(null,r),s.set(m,r),this.count++,l=Or.bind(this),r.addEventListener("load",l),r.addEventListener("error",l),d?d.parentNode.insertBefore(r,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var di={$$typeof:Q,Provider:null,Consumer:null,_currentValue:z,_currentValue2:z,_threadCount:0};function lb(e,t,s,l,r,d,m,b,k){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fe(0),this.hiddenUpdates=Fe(null),this.identifierPrefix=l,this.onUncaughtError=r,this.onCaughtError=d,this.onRecoverableError=m,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function Up(e,t,s,l,r,d,m,b,k,Y,ee,ne){return e=new lb(e,t,s,m,k,Y,ee,ne,b),t=1,d===!0&&(t|=24),d=ra(3,null,null,t),e.current=d,d.stateNode=e,t=Qo(),t.refCount++,e.pooledCache=t,t.refCount++,d.memoizedState={element:l,isDehydrated:s,cache:t},Po(d),e}function Lp(e){return e?(e=Hn,e):Hn}function qp(e,t,s,l,r,d){r=Lp(r),l.context===null?l.context=r:l.pendingContext=r,l=ws(t),l.payload={element:s},d=d===void 0?null:d,d!==null&&(l.callback=d),s=Ss(e,l,t),s!==null&&(sa(s,e,t),$l(s,e,t))}function Bp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function hd(e,t){Bp(e,t),(e=e.alternate)&&Bp(e,t)}function Ip(e){if(e.tag===13||e.tag===31){var t=en(e,67108864);t!==null&&sa(t,e,67108864),hd(e,67108864)}}function Hp(e){if(e.tag===13||e.tag===31){var t=ma();t=Be(t);var s=en(e,t);s!==null&&sa(s,e,t),hd(e,t)}}var Ur=!0;function ib(e,t,s,l){var r=_.T;_.T=null;var d=E.p;try{E.p=2,gd(e,t,s,l)}finally{E.p=d,_.T=r}}function rb(e,t,s,l){var r=_.T;_.T=null;var d=E.p;try{E.p=8,gd(e,t,s,l)}finally{E.p=d,_.T=r}}function gd(e,t,s,l){if(Ur){var r=xd(l);if(r===null)ad(e,t,l,Lr,s),Gp(e,l);else if(cb(r,e,t,s,l))l.stopPropagation();else if(Gp(e,l),t&4&&-1<ob.indexOf(e)){for(;r!==null;){var d=Mn(r);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var m=Vt(d.pendingLanes);if(m!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;m;){var k=1<<31-Re(m);b.entanglements[1]|=k,m&=~k}Ba(d),(at&6)===0&&(yr=ft()+500,ni(0))}}break;case 31:case 13:b=en(d,2),b!==null&&sa(b,d,2),jr(),hd(d,2)}if(d=xd(l),d===null&&ad(e,t,l,Lr,s),d===r)break;r=d}r!==null&&l.stopPropagation()}else ad(e,t,l,null,s)}}function xd(e){return e=yo(e),bd(e)}var Lr=null;function bd(e){if(Lr=null,e=En(e),e!==null){var t=f(e);if(t===null)e=null;else{var s=t.tag;if(s===13){if(e=g(t),e!==null)return e;e=null}else if(s===31){if(e=x(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Lr=e,null}function $p(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Nt()){case fa:return 2;case Ra:return 8;case pt:case ue:return 32;case pe:return 268435456;default:return 32}default:return 32}}var yd=!1,Us=null,Ls=null,qs=null,ui=new Map,mi=new Map,Bs=[],ob="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Gp(e,t){switch(e){case"focusin":case"focusout":Us=null;break;case"dragenter":case"dragleave":Ls=null;break;case"mouseover":case"mouseout":qs=null;break;case"pointerover":case"pointerout":ui.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":mi.delete(t.pointerId)}}function fi(e,t,s,l,r,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:s,eventSystemFlags:l,nativeEvent:d,targetContainers:[r]},t!==null&&(t=Mn(t),t!==null&&Ip(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function cb(e,t,s,l,r){switch(t){case"focusin":return Us=fi(Us,e,t,s,l,r),!0;case"dragenter":return Ls=fi(Ls,e,t,s,l,r),!0;case"mouseover":return qs=fi(qs,e,t,s,l,r),!0;case"pointerover":var d=r.pointerId;return ui.set(d,fi(ui.get(d)||null,e,t,s,l,r)),!0;case"gotpointercapture":return d=r.pointerId,mi.set(d,fi(mi.get(d)||null,e,t,s,l,r)),!0}return!1}function Yp(e){var t=En(e.target);if(t!==null){var s=f(t);if(s!==null){if(t=s.tag,t===13){if(t=g(s),t!==null){e.blockedOn=t,wl(e.priority,function(){Hp(s)});return}}else if(t===31){if(t=x(s),t!==null){e.blockedOn=t,wl(e.priority,function(){Hp(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function qr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=xd(e.nativeEvent);if(s===null){s=e.nativeEvent;var l=new s.constructor(s.type,s);bo=l,s.target.dispatchEvent(l),bo=null}else return t=Mn(s),t!==null&&Ip(t),e.blockedOn=s,!1;t.shift()}return!0}function Fp(e,t,s){qr(e)&&s.delete(t)}function db(){yd=!1,Us!==null&&qr(Us)&&(Us=null),Ls!==null&&qr(Ls)&&(Ls=null),qs!==null&&qr(qs)&&(qs=null),ui.forEach(Fp),mi.forEach(Fp)}function Br(e,t){e.blockedOn===t&&(e.blockedOn=null,yd||(yd=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,db)))}var Ir=null;function Vp(e){Ir!==e&&(Ir=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Ir===e&&(Ir=null);for(var t=0;t<e.length;t+=3){var s=e[t],l=e[t+1],r=e[t+2];if(typeof l!="function"){if(bd(l||s)===null)continue;break}var d=Mn(s);d!==null&&(e.splice(t,3),t-=3,xc(d,{pending:!0,data:r,method:s.method,action:l},l,r))}}))}function ul(e){function t(k){return Br(k,e)}Us!==null&&Br(Us,e),Ls!==null&&Br(Ls,e),qs!==null&&Br(qs,e),ui.forEach(t),mi.forEach(t);for(var s=0;s<Bs.length;s++){var l=Bs[s];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Bs.length&&(s=Bs[0],s.blockedOn===null);)Yp(s),s.blockedOn===null&&Bs.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var r=s[l],d=s[l+1],m=r[Pt]||null;if(typeof d=="function")m||Vp(s);else if(m){var b=null;if(d&&d.hasAttribute("formAction")){if(r=d,m=d[Pt]||null)b=m.formAction;else if(bd(r)!==null)continue}else b=m.action;typeof b=="function"?s[l+1]=b:(s.splice(l,3),l-=3),Vp(s)}}}function Qp(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(m){return r=m})},focusReset:"manual",scroll:"manual"})}function t(){r!==null&&(r(),r=null),l||setTimeout(s,20)}function s(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,r=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(s,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),r!==null&&(r(),r=null)}}}function vd(e){this._internalRoot=e}Hr.prototype.render=vd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(c(409));var s=t.current,l=ma();qp(s,l,e,t,null,null)},Hr.prototype.unmount=vd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;qp(e.current,2,null,e,null,null),jr(),t[Tn]=null}};function Hr(e){this._internalRoot=e}Hr.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ft();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Bs.length&&t!==0&&t<Bs[s].priority;s++);Bs.splice(s,0,e),s===0&&Yp(e)}};var Xp=i.version;if(Xp!=="19.2.0")throw Error(c(527,Xp,"19.2.0"));E.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(c(188)):(e=Object.keys(e).join(","),Error(c(268,e)));return e=y(t),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var ub={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:_,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $r=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$r.isDisabled&&$r.supportsFiber)try{Ke=$r.inject(ub),Ze=$r}catch{}}return hi.createRoot=function(e,t){if(!u(e))throw Error(c(299));var s=!1,l="",r=ef,d=tf,m=af;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(d=t.onCaughtError),t.onRecoverableError!==void 0&&(m=t.onRecoverableError)),t=Up(e,1,!1,null,null,s,l,null,r,d,m,Qp),e[Tn]=t.current,td(e),new vd(t)},hi.hydrateRoot=function(e,t,s){if(!u(e))throw Error(c(299));var l=!1,r="",d=ef,m=tf,b=af,k=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(r=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError),s.formState!==void 0&&(k=s.formState)),t=Up(e,1,!0,t,s??null,l,r,k,d,m,b,Qp),t.context=Lp(null),s=t.current,l=ma(),l=Be(l),r=ws(l),r.callback=null,Ss(s,r,l),s=l,t.current.lanes=s,Ve(t,s),Ba(t),e[Tn]=t.current,td(e),new Hr(t)},hi.version="19.2.0",hi}var lh;function Db(){if(lh)return _d.exports;lh=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(i){console.error(i)}}return n(),_d.exports=Ob(),_d.exports}var Rb=Db();const Ub=hb(Rb),Md="active-customer-order",Ad="active-customer-order-id",Yh=1440*60*1e3,Lb=n=>{if(!n)return null;try{const i=JSON.parse(n);if(i&&typeof i.orderId=="string"&&i.orderId.trim().length>0)return i}catch(i){console.error("Failed to parse stored active order",i)}return null},wi=n=>{if(!(typeof window>"u"))try{if(!n){window.localStorage.removeItem(Md),window.localStorage.removeItem(Ad);return}window.localStorage.setItem(Md,JSON.stringify(n)),window.localStorage.removeItem(Ad)}catch(i){console.error("Failed to persist active order",i)}},lo=()=>{if(typeof window>"u")return null;const n=Lb(window.localStorage.getItem(Md));if(n)return n.expiresAt&&n.expiresAt<=Date.now()?(wi(null),null):n;const i=window.localStorage.getItem(Ad);if(i&&i.trim().length>0){const o={orderId:i};return wi(o),o}return null},Fh=(n,i)=>{if(!n){wi(null);return}wi(i?{orderId:n,expiresAt:i}:{orderId:n})},Vh=()=>{wi(null)},Qh="Supabase client is not available in this offline build. Install @supabase/supabase-js in production.",Xh=()=>{const n=Promise.reject(new Error(Qh));return new Proxy({},{get(i,o){return o==="then"||o==="catch"||o==="finally"?n[o].bind(n):()=>Xh()}})},qb=()=>{const n=Xh(),i=async()=>{throw new Error(Qh)};return{from(){return n},functions:{invoke:i},auth:{signInWithPassword:i,signOut:i,getSession:i}}},Bb=n=>{try{const i=new URL(n),o=i.pathname.replace(/\/+$/,"");if(o&&o!=="/"){const c=o===""?"/":o;throw new Error(`VITE_SUPABASE_URL must point to the project root (e.g. https://xxxx.supabase.co). Remove the path "${c}" to avoid cross-origin errors.`)}return i.origin}catch(i){const o=i instanceof Error?` ${i.message}`:"";throw new Error(`Invalid VITE_SUPABASE_URL provided.${o}`.trim())}},Ib=()=>qb();let zd;try{const n="https://epolcaohkaozcanyexau.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVwb2xjYW9oa2FvemNhbnlleGF1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg3NDk0NDUsImV4cCI6MjA3NDMyNTQ0NX0.xROZsagC9K1aP6XexNoqlYZfeuqGUOC9huGsrJ55x_0",o=Bb(n);zd=jb(o,i,{auth:{persistSession:!1}})}catch(n){const i=n instanceof Error?n.message:"Unknown error while creating the Supabase client.";console.warn("Supabase client disabled. Falling back to the offline stub. Operations depending on Supabase will fail until the environment is configured.",i),zd=Ib()}const fe=zd,Hb={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_CLOUDINARY_CLOUD_NAME:"dmed4shf3",VITE_CLOUDINARY_DEFAULT_PRODUCT_IMAGE:"https://res.cloudinary.com/dmed4shf3/image/upload/v1757751722/main-sample.png",VITE_CLOUDINARY_PRODUCTS_FOLDER:"products",VITE_CLOUDINARY_RECEIPTS_FOLDER:"receipts",VITE_CLOUDINARY_UPLOAD_PRESET:"ml_default",VITE_CLOUDINARY_UPLOAD_PRESET_PRODUCTS:"",VITE_CLOUDINARY_UPLOAD_PRESET_RECEIPTS:"",VITE_CLOUDINARY_URL:"cloudinary://638671212949945:Gex0K0jrKzsXpn-iLglyyxbEi40@dmed4shf3",VITE_FIREBASE_API_KEY:"AIzaSyBU5pHpTKoLp9YSrDYQAfU020MmABXuO2I",VITE_FIREBASE_APP_ID:"1:771027243035:web:b2adab7c31c4438814a8be",VITE_FIREBASE_AUTH_DOMAIN:"steady-service-469913-q4.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"771027243035",VITE_FIREBASE_PROJECT_ID:"steady-service-469913-q4",VITE_FIREBASE_STORAGE_BUCKET:"steady-service-469913-q4.firebasestorage.app",VITE_GEMINI_API_KEY:"AIzaSyAVEshpvhYt7TXSc5IoM9RnbeRQVXErEHg",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVwb2xjYW9oa2FvemNhbnlleGF1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg3NDk0NDUsImV4cCI6MjA3NDMyNTQ0NX0.xROZsagC9K1aP6XexNoqlYZfeuqGUOC9huGsrJ55x_0",VITE_SUPABASE_URL:"https://epolcaohkaozcanyexau.supabase.co"},$b=Hb,Gb="https://api.cloudinary.com/v1_1",Yb="cloudinary.com",Fb=n=>n.normalize("NFD").replace(/[̀-ͯ]/g,"").normalize("NFC"),Gd=n=>Fb(n).toLowerCase().replace(/[^a-z0-9-]+/g,"-").replace(/^-+|-+$/g,""),Kh=()=>Math.random().toString(36).slice(2,10),vi=(n,i)=>n&&Gd(n)||i,Da=n=>{const i=$b[n];if(typeof i!="string")return;const o=i.trim();return o.length>0?o:void 0},ih=(n,i)=>{const o=Da(n);if(!o)throw new Error(`Configuration Cloudinary manquante: définissez la variable d'environnement ${n} pour ${i}.`);return o},Yd=async(n,{folder:i,uploadPreset:o,publicId:c,tags:u})=>{var N;const f=ih("VITE_CLOUDINARY_CLOUD_NAME","les téléversements de médias"),g=o??ih("VITE_CLOUDINARY_UPLOAD_PRESET","les téléversements de médias"),x=g,p=new FormData;p.append("file",n),p.append("upload_preset",g),i&&p.append("folder",i),c&&p.append("public_id",c),u!=null&&u.length&&p.append("tags",u.join(","));const y=await fetch(`${Gb}/${f}/auto/upload`,{method:"POST",body:p}),v=await y.json();if(!y.ok||v.error){const j=(N=v.error)==null?void 0:N.message;throw j&&/upload preset/i.test(j)?new Error(`Le preset Cloudinary "${x}" est introuvable ou ne permet pas les téléversements non signés. Vérifiez sa configuration dans votre console Cloudinary (Settings → Upload → Upload presets).`):new Error(j??`Échec du téléversement Cloudinary (statut ${y.status}).`)}if(!v.secure_url&&!v.url)throw new Error("Cloudinary n'a pas renvoyé d'URL sécurisée pour le fichier téléversé.");return v.secure_url??v.url},ps=n=>{const i=n==null?void 0:n.trim();if(!i)return null;try{const o=new URL(i);return o.protocol!=="https:"||!o.hostname.endsWith(Yb)?null:i}catch{return null}},Vb=Da("VITE_CLOUDINARY_DEFAULT_PRODUCT_IMAGE")??"",rh=Vb,Zh=n=>{const i=ps(n);return i||rh||""},Qb=async(n,i)=>{const o=Da("VITE_CLOUDINARY_PRODUCTS_FOLDER")??"products",c=Da("VITE_CLOUDINARY_UPLOAD_PRESET_PRODUCTS")??Da("VITE_CLOUDINARY_UPLOAD_PRESET"),u=i?Gd(i):void 0,f=u?`${u}-${Kh()}`:void 0;return Yd(n,{folder:vi(o,"products"),uploadPreset:c,publicId:f,tags:["product"]})},Xb=()=>vi(Da("VITE_CLOUDINARY_CUSTOM_FOLDER")??"Custom","Custom"),yl=async(n,i)=>{const o=Xb(),c=Da("VITE_CLOUDINARY_UPLOAD_PRESET_CUSTOM")??Da("VITE_CLOUDINARY_UPLOAD_PRESET"),u=(i==null?void 0:i.publicId)??(n instanceof File&&n.name?Gd(n.name.replace(/\.[^/.]+$/,"")):void 0),f=u?`${u}-${Kh()}`:void 0,g=Array.from(new Set(["customization","custom-folder",...(i==null?void 0:i.tags)??[]]));return Yd(n,{folder:o,uploadPreset:c,publicId:f,tags:g})},Ph=async(n,i)=>{const o=Da("VITE_CLOUDINARY_RECEIPTS_FOLDER")??"receipts",c=Da("VITE_CLOUDINARY_UPLOAD_PRESET_RECEIPTS")??Da("VITE_CLOUDINARY_UPLOAD_PRESET"),u=[vi(o,"receipts")];return i!=null&&i.orderId?u.push(`order-${vi(i.orderId,"commande")}`):i!=null&&i.customerReference&&u.push(`customer-${vi(i.customerReference,"client")}`),Yd(n,{folder:u.join("/"),uploadPreset:c,tags:["payment","receipt"]})},Jh="ouiouipos:role-logins",Wh=()=>{if(typeof window>"u"||!window.localStorage)throw new Error("Local storage is not available for role login tracking.");return window.localStorage},Kb=n=>{if(!n)return[];try{const i=JSON.parse(n);return Array.isArray(i)?i.map(o=>{if(!o||typeof o!="object")return null;const{roleId:c,roleName:u,loginAt:f}=o;if(typeof c!="string"||typeof u!="string"||typeof f!="string")return null;const g=Date.parse(f);return Number.isNaN(g)?null:{roleId:c,roleName:u,loginAt:new Date(g).toISOString()}}).filter(o=>!!o).sort((o,c)=>Date.parse(o.loginAt)-Date.parse(c.loginAt)):[]}catch(i){return console.warn("Unable to parse stored role logins, clearing history.",i),[]}},Fd=()=>{const i=Wh().getItem(Jh);return Kb(i)},eg=n=>{Wh().setItem(Jh,JSON.stringify(n.slice(-500)))},oh=async(n,i,o)=>{const c=o??new Date().toISOString(),u={roleId:n,roleName:i,loginAt:c};try{const f=Fd();f.push(u),eg(f)}catch(f){console.warn("Unable to persist role login locally.",f)}return u},ch=async n=>{const i=Date.parse(n);if(Number.isNaN(i))throw new Error("Invalid start date provided when fetching role logins.");return Fd().filter(c=>Date.parse(c.loginAt)>=i)},dh=n=>{try{const i=Date.parse(n);if(Number.isNaN(i))return;const o=Fd().filter(c=>Date.parse(c.loginAt)>=i);eg(o)}catch(i){console.warn("Unable to prune stored role logins.",i)}};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zb=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Pb=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(i,o,c)=>c?c.toUpperCase():o.toLowerCase()),uh=n=>{const i=Pb(n);return i.charAt(0).toUpperCase()+i.slice(1)},tg=(...n)=>n.filter((i,o,c)=>!!i&&i.trim()!==""&&c.indexOf(i)===o).join(" ").trim(),Jb=n=>{for(const i in n)if(i.startsWith("aria-")||i==="role"||i==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Wb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=h.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:u="",children:f,iconNode:g,...x},p)=>h.createElement("svg",{ref:p,...Wb,width:i,height:i,stroke:n,strokeWidth:c?Number(o)*24/Number(i):o,className:tg("lucide",u),...!f&&!Jb(x)&&{"aria-hidden":"true"},...x},[...g.map(([y,v])=>h.createElement(y,v)),...Array.isArray(f)?f:[f]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=(n,i)=>{const o=h.forwardRef(({className:c,...u},f)=>h.createElement(ey,{ref:f,iconNode:i,className:tg(`lucide-${Zb(uh(n))}`,`lucide-${n}`,c),...u}));return o.displayName=uh(n),o};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=[["path",{d:"M19 9V6a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v3",key:"irtipd"}],["path",{d:"M3 16a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v1.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V11a2 2 0 0 0-4 0z",key:"1qyhux"}],["path",{d:"M5 18v2",key:"ppbyun"}],["path",{d:"M19 18v2",key:"gy7782"}]],Vd=he("armchair",ty);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ag=he("arrow-left",ay);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],ny=he("bold",sy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ly=[["path",{d:"m11 10 3 3",key:"fzmg1i"}],["path",{d:"M6.5 21A3.5 3.5 0 1 0 3 17.5a2.62 2.62 0 0 1-.708 1.792A1 1 0 0 0 3 21z",key:"p4q2r7"}],["path",{d:"M9.969 17.031 21.378 5.624a1 1 0 0 0-3.002-3.002L6.967 14.031",key:"wy6l02"}]],iy=he("brush",ly);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],oy=he("calendar-days",ry);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cy=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],dy=he("calendar",cy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uy=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 11.207a.5.5 0 0 1 .146-.353l2-2a.5.5 0 0 1 .708 0l3.292 3.292a.5.5 0 0 0 .708 0l4.292-4.292a.5.5 0 0 1 .854.353V16a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1z",key:"q0gr47"}]],my=he("chart-area",uy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],py=he("chart-column",fy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hy=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],gy=he("check",hy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xy=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],by=he("chef-hat",xy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yy=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],sg=he("chevron-down",yy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],jy=he("chevron-right",vy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ng=he("chevron-up",_y);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],jn=he("circle-check-big",Ny);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Sy=he("circle-check",wy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cy=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]],ky=he("circle-minus",Cy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Qd=he("circle-plus",Ty);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],My=he("circle-question-mark",Ey);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],zy=he("circle-x",Ay);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],hs=he("clock",Oy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Ry=he("copy",Dy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],oo=he("dollar-sign",Uy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],qy=he("download",Ly);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],lg=he("ellipsis-vertical",By);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Hy=he("external-link",Iy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Gy=he("eye-off",$y);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Od=he("eye",Yy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ig=he("file-text",Fy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=[["path",{d:"M12.531 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14v6a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341l.427-.473",key:"ol2ft2"}],["path",{d:"m16.5 3.5 5 5",key:"15e6fa"}],["path",{d:"m21.5 3.5-5 5",key:"m0lwru"}]],Qy=he("funnel-x",Vy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],Dd=he("gift",Xy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Zy=he("grip-vertical",Ky);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Py=[["path",{d:"M12 3V2",key:"ar7q03"}],["path",{d:"m15.4 17.4 3.2-2.8a2 2 0 1 1 2.8 2.9l-3.6 3.3c-.7.8-1.7 1.2-2.8 1.2h-4c-1.1 0-2.1-.4-2.8-1.2l-1.302-1.464A1 1 0 0 0 6.151 19H5",key:"n2g93r"}],["path",{d:"M2 14h12a2 2 0 0 1 0 4h-2",key:"1o2jem"}],["path",{d:"M4 10h16",key:"img6z1"}],["path",{d:"M5 10a7 7 0 0 1 14 0",key:"1ega1o"}],["path",{d:"M5 14v6a1 1 0 0 1-1 1H2",key:"1hescx"}]],Jy=he("hand-platter",Py);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ev=he("info",Wy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],av=he("italic",tv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],mh=he("layers",sv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],lv=he("layout-dashboard",nv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],vl=he("loader-circle",iv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],ov=he("log-in",rv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],dv=he("log-out",cv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],mv=he("mail",uv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],wn=he("map-pin",fv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],rg=he("menu",pv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],gv=he("message-circle",hv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],og=he("message-square",xv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=[["path",{d:"M5 12h14",key:"1ays0h"}]],cg=he("minus",bv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]],vv=he("package-check",yv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M19 13v6",key:"85cyf1"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]],_v=he("package-plus",jv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Qs=he("package",Nv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Sv=he("palette",wv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],kv=he("pen",Cv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Ev=he("pencil",Tv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mv=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],_l=he("percent",Mv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],xl=he("phone",Av);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=[["path",{d:"M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z",key:"1piglc"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M2 8v1a2 2 0 0 0 2 2h1",key:"1env43"}]],Ov=he("piggy-bank",zv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ci=he("plus",Dv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],Wr=he("receipt",Rv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Lv=he("refresh-cw",Uv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qv=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Bv=he("save",qv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Xd=he("search",Iv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],$v=he("send",Hv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Yv=he("settings",Gv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fv=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Vv=he("shield",Fv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],Kd=he("shopping-bag",Qv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],dg=he("shopping-cart",Xv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=[["path",{d:"M12 21a9 9 0 0 0 9-9H3a9 9 0 0 0 9 9Z",key:"4rw317"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M19.5 12 22 6",key:"shfsr5"}],["path",{d:"M16.25 3c.27.1.8.53.75 1.36-.06.83-.93 1.2-1 2.02-.05.78.34 1.24.73 1.62",key:"rpc6vp"}],["path",{d:"M11.25 3c.27.1.8.53.74 1.36-.05.83-.93 1.2-.98 2.02-.06.78.33 1.24.72 1.62",key:"1lf63m"}],["path",{d:"M6.25 3c.27.1.8.53.75 1.36-.06.83-.93 1.2-1 2.02-.05.78.34 1.24.74 1.62",key:"97tijn"}]],ug=he("soup",Kv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],mg=he("square-pen",Zv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]],Jv=he("strikethrough",Pv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wv=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Si=he("tag",Wv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],kn=he("trash-2",e1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],fg=he("trending-up",t1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Oa=he("triangle-alert",a1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],pg=he("truck",s1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Nl=he("upload",n1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],i1=he("user-check",l1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ji=he("user",r1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Rd=he("users",o1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]],d1=he("utensils-crossed",c1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],m1=he("utensils",u1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],fs=he("x",f1),gs="/site-customizer",na=[{name:"Dashboard",href:"/dashboard",icon:lv,permissionKey:"/dashboard"},{name:"À Emporter",href:"/para-llevar",icon:Kd,permissionKey:"/para-llevar"},{name:"Plan de Salle",href:"/ventes",icon:Vd,permissionKey:"/ventes"},{name:"Cuisine",href:"/cocina",icon:ug,permissionKey:"/cocina"},{name:"Personnalisation",href:gs,icon:iy,permissionKey:gs},{name:"Produits",href:"/produits",icon:d1,permissionKey:"/produits"},{name:"Ingrédients",href:"/ingredients",icon:Qs,permissionKey:"/ingredients"},{name:"Promotions",href:"/promotions",icon:_l,permissionKey:"/promotions"},{name:"Résumé Ventes",href:"/resume-ventes",icon:my,permissionKey:"/resume-ventes"}],hg={ADMIN:"admin"},Sn="__home_page",p1=n=>{if(n.status!=="active")return!1;const i=new Date,o=n.conditions;if(o.start_date){const c=new Date(o.start_date);if(i<c)return!1}if(o.end_date){const c=new Date(o.end_date);if(i>c)return!1}return!(o.usage_limit&&n.usage_count>=o.usage_limit)},h1=n=>{const i=new Date,o=n.conditions;if(o.days_of_week&&o.days_of_week.length>0){const c=i.getDay();if(!o.days_of_week.includes(c))return!1}if(o.time_range){const c=i.getHours(),u=i.getMinutes(),f=c*60+u,[g,x]=o.time_range.start_time.split(":").map(Number),[p,y]=o.time_range.end_time.split(":").map(Number),v=g*60+x,N=p*60+y;if(f<v||f>N)return!1}return!0},ki=["review1","review2","review3","review4","review5","review6","review7"],g1=["name","handle","timeAgo","message","highlight","highlightCaption","location","badgeLabel","postImageAlt"],x1=["avatarUrl","highlightImageUrl","postImageUrl"],b1=["navigation.brand","navigation.brandLogo","navigation.staffLogo","navigation.links.home","navigation.links.about","navigation.links.menu","navigation.links.contact","navigation.links.loginCta","navigation.style.background","hero.title","hero.subtitle","hero.ctaLabel","hero.historyTitle","hero.reorderCtaLabel","hero.backgroundImage","about.title","about.description","about.image","about.style.background","menu.title","menu.ctaLabel","menu.loadingLabel","menu.image","menu.style.background","instagramReviews.title","instagramReviews.subtitle","instagramReviews.image","instagramReviews.style.background","findUs.title","findUs.addressLabel","findUs.address","findUs.cityLabel","findUs.city","findUs.hoursLabel","findUs.hours","findUs.mapLabel","findUs.style.background","footer.text","footer.style.background"],y1=[...g1,...x1],v1=ki.flatMap(n=>y1.map(i=>`instagramReviews.reviews.${n}.${i}`)),Ti=[...b1,...v1],j1=Ti.filter(n=>!n.endsWith(".style.background")&&!n.endsWith(".image")&&!n.endsWith(".avatarUrl")&&!n.endsWith(".highlightImageUrl")&&!n.endsWith(".postImageUrl")&&n!=="hero.backgroundImage"&&n!=="navigation.brandLogo"&&n!=="navigation.staffLogo"),_1=new Set(["STRONG","EM","S","STRIKE","SPAN","BR","DIV","P","B","I"]),N1=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,w1=/^rgba?\((\s*\d{1,3}\s*,){2}\s*\d{1,3}\s*(,\s*(0|1|0?\.\d+))?\s*\)$/,gg=typeof window<"u"&&typeof document<"u",S1=n=>{const i=n.trim().replace(/"|'/g,"");return N1.test(i)?i.toLowerCase():w1.test(i)?i.replace(/\s+/g,""):null},C1=n=>{const i=n.parentNode;if(!i){n.remove();return}for(;n.firstChild;)i.insertBefore(n.firstChild,n);i.removeChild(n)},k1=n=>{const o={B:"strong",I:"em",STRIKE:"s"}[n.tagName];if(!o)return n;const c=document.createElement(o);for(;n.firstChild;)c.appendChild(n.firstChild);return n.replaceWith(c),c},xg=n=>{if(!_1.has(n.tagName)){C1(n);return}const i=k1(n);if(Array.from(i.attributes).forEach(o=>{o.name!=="style"&&i.removeAttribute(o.name)}),i.hasAttribute("style")){const u=(i.getAttribute("style")??"").split(";").map(f=>f.trim()).filter(Boolean).find(f=>f.toLowerCase().startsWith("color"));if(u){const[,f]=u.split(":"),g=f?S1(f):null;g?i.setAttribute("style",`color: ${g}`):i.removeAttribute("style")}else i.removeAttribute("style")}Array.from(i.childNodes).forEach(o=>{var c;if(o.nodeType===Node.COMMENT_NODE){(c=o.parentNode)==null||c.removeChild(o);return}o.nodeType===Node.ELEMENT_NODE&&xg(o)})},T1=n=>n.replace(/<\/?(?!br\b)[^>]+>/gi,"").replace(/\r\n|\r|\n/g,"<br>").replace(/<script[^>]*>[\s\S]*?<\/script>/gi,""),E1=n=>{const i=n??"";if(i.trim().length===0)return"";if(!gg)return T1(i).trim();const o=document.createElement("template");return o.innerHTML=i,Array.from(o.content.childNodes).forEach(c=>{var u;if(c.nodeType===Node.COMMENT_NODE){(u=c.parentNode)==null||u.removeChild(c);return}c.nodeType===Node.ELEMENT_NODE&&xg(c)}),o.innerHTML.trim()},M1=n=>{if(!gg)return n.replace(/<[^>]+>/g,"");const i=document.createElement("template");return i.innerHTML=n,i.content.textContent??""},fh=n=>n.replace(/[​‌‍﻿]/g,"").replace(/\r\n/g,`
`),Zd=n=>{if(!n)return null;const i=E1(n.html??""),o=fh(n.plainText??""),c=fh(M1(i)),u=o.trim().length>0?o:c;return i.trim().length===0&&u.trim().length===0?null:{html:i,plainText:u}},A1={review1:{name:"Laura Méndez",handle:"@laurita.eats",timeAgo:"hace 2 días",message:"No puedo con la originalidad de estos tacos al pastor: cada mordisco tiene un giro gourmet brutal. La salsa cheddar queda cremosa sin empalagar y el toque crujiente lo es todo.",highlight:"Story « Taco Tuesday »",highlightCaption:"Guardado en Destacadas",location:"Bogotá · Servicio nocturno",badgeLabel:"Instagram",postImageAlt:"Assiette de tacos colorés garnis d'herbes fraîches.",avatarUrl:"https://images.unsplash.com/photo-1544723795-3fb6469f5b39?auto=format&fit=crop&w=320&q=80",highlightImageUrl:"https://images.unsplash.com/photo-1521305916504-4a1121188589?auto=format&fit=crop&w=320&q=80",postImageUrl:"https://images.unsplash.com/photo-1521305916504-4a1121188589?auto=format&fit=crop&w=640&q=80"},review2:{name:"Camila Torres",handle:"@camigoesout",timeAgo:"hace 5 días",message:"Estas arepas son lo más: combinan ingredientes súper frescos con un toque gourmet creativo. La mezcla dulce-salado y esa salsa cheddar para remojar me tuvieron feliz todo el brunch.",highlight:"Reel « Brunch entre amigas »",highlightCaption:"Comentarios llenos de antojos",location:"Medellín · Brunch de domingo",badgeLabel:"Instagram",postImageAlt:"Gros plan sur des arepas dorées et une sauce maison.",avatarUrl:"https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=320&q=80",highlightImageUrl:"https://images.unsplash.com/photo-1478145046317-39f10e56b5e9?auto=format&fit=crop&w=320&q=80",postImageUrl:"https://images.unsplash.com/photo-1478145046317-39f10e56b5e9?auto=format&fit=crop&w=640&q=80"},review3:{name:"Sebastián Ruiz",handle:"@ruizhungry",timeAgo:"hace 1 semana",message:"Armamos un afterwork aquí y fue un hit: combos originales, porciones generosas y un crunch brutal en cada bocado. La salsa cheddar se volvió tema de conversación.",highlight:"Post « Team Afterwork »",highlightCaption:"Reacciones de la oficina",location:"Barranquilla · Terraza privada",badgeLabel:"Instagram",postImageAlt:"Table conviviale avec plusieurs plats mexicains et des boissons fraîches.",avatarUrl:"https://images.unsplash.com/photo-1521572267360-ee0c2909d518?auto=format&fit=crop&w=320&q=80",highlightImageUrl:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?auto=format&fit=crop&w=320&q=80",postImageUrl:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?auto=format&fit=crop&w=640&q=80"},review4:{name:"Valentina Ríos",handle:"@valen.foodnotes",timeAgo:"hace 2 semanas",message:"El menú tiene un mood gourmet sin perder lo reconfortante: masa crocante, cheddar fundido y combinaciones de ingredientes que se sienten pensadas con cariño. Increíble experiencia.",highlight:"Carousel « Night Out »",highlightCaption:"Comentarios fijados",location:"Cali · Cena casual",badgeLabel:"Instagram",postImageAlt:"Pizza gourmande avec fromage coulant et herbes fraîches.",avatarUrl:"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?auto=format&fit=crop&w=320&q=80",highlightImageUrl:"https://images.unsplash.com/photo-1513104890138-7c749659a591?auto=format&fit=crop&w=320&q=80",postImageUrl:"https://images.unsplash.com/photo-1513104890138-7c749659a591?auto=format&fit=crop&w=640&q=80"},review5:{name:"Alejandro Pérez",handle:"@alexlovesfood",timeAgo:"hace 3 semanas",message:"Vine por curiosidad y me quedé por la originalidad del menú: el cheddar baña la burger justo como me gusta y el pan crujiente aguanta toda la salsa. Asociaciones de sabores top.",highlight:"Live « Burger Night »",highlightCaption:"Chat lleno de elogios",location:"Bogotá · Servicio takeout",badgeLabel:"Instagram",postImageAlt:"Burger gourmet avec sauce et frites croustillantes.",avatarUrl:"https://images.unsplash.com/photo-1529665253569-6d01c0eaf7b6?auto=format&fit=crop&w=320&q=80",highlightImageUrl:"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?auto=format&fit=crop&w=320&q=80",postImageUrl:"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?auto=format&fit=crop&w=640&q=80"},review6:{name:"Juliana Gómez",handle:"@julie.foodstories",timeAgo:"hace 1 mes",message:"Pedimos catering para un cumpleaños y fue éxito total: tacos mini, dips calientes y una mesa que se veía divina para fotos. Todo llegó puntual y con instrucciones claras.",highlight:"Story « Fiesta privada »",highlightCaption:"Reseñas con confeti",location:"Cartagena · Evento privado",badgeLabel:"Instagram",postImageAlt:"Buffet coloré avec tacos, dips et accompagnements.",avatarUrl:"https://images.unsplash.com/photo-1517841905240-472988babdf9?auto=format&fit=crop&w=320&q=80",highlightImageUrl:"https://images.unsplash.com/photo-1528715471579-d1bcf0ba5e83?auto=format&fit=crop&w=320&q=80",postImageUrl:"https://images.unsplash.com/photo-1466978913421-dad2ebd01d17?auto=format&fit=crop&w=640&q=80"},review7:{name:"Manuela Herrera",handle:"@manuelatryit",timeAgo:"hace 6 semanas",message:"Amo que tengan opciones veggies sin perder el toque cheddar: las quesadillas con hongos y maíz dulce son mi nueva obsesión. Además, la atención es rapidísima.",highlight:"Reel « Veggie Lovers »",highlightCaption:"Comentarios verdes y felices",location:"Bogotá · Servicio para llevar",badgeLabel:"Instagram",postImageAlt:"Quesadillas dorées servies avec salsa verde.",avatarUrl:"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?auto=format&fit=crop&w=320&q=80",highlightImageUrl:"https://images.unsplash.com/photo-1528712306091-ed0763094c98?auto=format&fit=crop&w=320&q=80",postImageUrl:"https://images.unsplash.com/photo-1528712306091-ed0763094c98?auto=format&fit=crop&w=640&q=80"}},Ue=n=>n.trim(),Pd=n=>typeof n=="string"&&n.trim().length>0,bg=(n,i)=>Pd(n)?n.trim():i,yg=(n,i)=>Pd(n)?n.trim():i,_i=(n,i)=>Pd(n)?n.trim():i,Le=(n,i)=>{if(typeof n!="string")return i;const o=n.trim();return o.length>0?o:i},$a=(n,i)=>n===void 0?i??null:n===null?null:ps(n)??i??null,Ga=n=>ps(n)??null,vg=/^([01]\d|2[0-3]):([0-5]\d)$/,ph=(n,i)=>{if(typeof n!="string")return i;const o=n.trim();return vg.test(o)?o:i},hh=(n,i)=>{if(typeof n!="string")return i;const o=n.trim();return vg.test(o)?o:i},z1=(n,i)=>{const o={};return ki.forEach(c=>{const u=i[c],f=(n==null?void 0:n[c])??{};o[c]={name:Le(f==null?void 0:f.name,u.name),handle:Le(f==null?void 0:f.handle,u.handle),timeAgo:Le(f==null?void 0:f.timeAgo,u.timeAgo),message:Le(f==null?void 0:f.message,u.message),highlight:Le(f==null?void 0:f.highlight,u.highlight),highlightCaption:Le(f==null?void 0:f.highlightCaption,u.highlightCaption),location:Le(f==null?void 0:f.location,u.location),badgeLabel:Le(f==null?void 0:f.badgeLabel,u.badgeLabel),postImageAlt:Le(f==null?void 0:f.postImageAlt,u.postImageAlt),avatarUrl:$a(f==null?void 0:f.avatarUrl,u.avatarUrl),highlightImageUrl:$a(f==null?void 0:f.highlightImageUrl,u.highlightImageUrl),postImageUrl:$a(f==null?void 0:f.postImageUrl,u.postImageUrl)}}),o},O1=n=>{const i={};return ki.forEach(o=>{const c=(n==null?void 0:n[o])??{};i[o]={name:Ue((c==null?void 0:c.name)??""),handle:Ue((c==null?void 0:c.handle)??""),timeAgo:Ue((c==null?void 0:c.timeAgo)??""),message:Ue((c==null?void 0:c.message)??""),highlight:Ue((c==null?void 0:c.highlight)??""),highlightCaption:Ue((c==null?void 0:c.highlightCaption)??""),location:Ue((c==null?void 0:c.location)??""),badgeLabel:Ue((c==null?void 0:c.badgeLabel)??""),postImageAlt:Ue((c==null?void 0:c.postImageAlt)??""),avatarUrl:Ga(c==null?void 0:c.avatarUrl),highlightImageUrl:Ga(c==null?void 0:c.highlightImageUrl),postImageUrl:Ga(c==null?void 0:c.postImageUrl)}}),i},Gr=n=>{if(typeof n!="string")return;const i=n.trim();return i.length>0?i:void 0},jg=n=>{if(!n)return null;const i=Gr(n.textColor??null),o=Gr(n.fontFamily??null),c=Gr(n.fontSize??null),u=Gr(n.backgroundColor??null),f={};return i&&(f.textColor=i),o&&(f.fontFamily=o),c&&(f.fontSize=c),u&&(f.backgroundColor=u),Object.keys(f).length>0?f:null},D1=(n,i)=>{const o=n??i,c={};return Ti.forEach(u=>{const f=jg(o[u]??null);f&&(c[u]=f)}),c},R1=(n,i)=>{const o=n??i,c={};return Ti.forEach(u=>{const f=jg(o[u]??null);f&&(c[u]=f)}),c},U1=(n,i)=>{const o=n??i,c={};return Ti.forEach(u=>{const f=o[u],g=Zd(f??null);g&&(c[u]=g)}),c},L1=(n,i)=>{const o=n??i,c={};return Ti.forEach(u=>{const f=o[u],g=Zd(f??null);g&&(c[u]=g)}),c},q1=["image","video","audio","font","raw"],B1=()=>`asset-${Date.now()}-${Math.random().toString(36).slice(2,10)}`,I1=n=>q1.includes(n)?n:"raw",H1=n=>{if(typeof n=="string"){const i=Date.parse(n);if(!Number.isNaN(i))return new Date(i).toISOString()}return new Date().toISOString()},$1=n=>{const i=typeof n=="number"?n:Number(n);return!Number.isFinite(i)||i<0?0:Math.round(i)},_g=n=>{if(!n)return null;const i=ps(n.url??void 0);if(!i)return null;const o=typeof n.id=="string"&&n.id.trim().length>0?n.id.trim():B1(),c=typeof n.name=="string"&&n.name.trim().length>0?n.name.trim():o,u=typeof n.format=="string"&&n.format.trim().length>0?n.format.trim():"application/octet-stream",f=I1(n.type),g=$1(n.bytes),x=H1(n.createdAt);return{id:o,name:c,url:i,format:u,bytes:g,type:f,createdAt:x}},G1=(n,i)=>n?{library:Array.isArray(n.library)?n.library.map(c=>_g(c)).filter(Boolean):i.library}:i,Y1=(n,i)=>{const o=n??i;return{library:Array.isArray(o.library)?o.library.map(u=>_g(u)).filter(Boolean):i.library}},Ng={background:{type:"color",color:"#0f172a",image:null},fontFamily:"Inter",fontSize:"16px",textColor:"#f1f5f9"},wg={background:{type:"image",color:"#0f172a",image:"https://picsum.photos/seed/tacosbg/1920/1080"},fontFamily:"Inter",fontSize:"18px",textColor:"#f8fafc"},Sg={background:{type:"color",color:"#ffffff",image:null},fontFamily:"Inter",fontSize:"16px",textColor:"#0f172a"},Cg={background:{type:"color",color:"#f8fafc",image:null},fontFamily:"Inter",fontSize:"16px",textColor:"#111827"},kg={background:{type:"color",color:"#ffffff",image:null},fontFamily:"Inter",fontSize:"16px",textColor:"#111827"},Tg={background:{type:"color",color:"#f8fafc",image:null},fontFamily:"Inter",fontSize:"16px",textColor:"#0f172a"},Eg={background:{type:"color",color:"#0f172a",image:null},fontFamily:"Inter",fontSize:"14px",textColor:"#e2e8f0"},Jd={library:[]},Mg={},Ag={},pn=(n,i)=>{var f,g,x,p;const o=((f=n==null?void 0:n.background)==null?void 0:f.type)==="image"?"image":"color",c=_i((g=n==null?void 0:n.background)==null?void 0:g.color,i.background.color),u=o==="image"?$a(((x=n==null?void 0:n.background)==null?void 0:x.image)??void 0,i.background.image):null;return{background:{type:o,color:o==="color"?c:_i((p=n==null?void 0:n.background)==null?void 0:p.color,i.background.color),image:o==="image"?u:null},fontFamily:bg((n==null?void 0:n.fontFamily)??null,i.fontFamily),fontSize:yg((n==null?void 0:n.fontSize)??null,i.fontSize),textColor:_i((n==null?void 0:n.textColor)??null,i.textColor)}},hn=(n,i)=>{var f,g,x;const o=((f=n==null?void 0:n.background)==null?void 0:f.type)==="image"?"image":"color",c=_i(((g=n==null?void 0:n.background)==null?void 0:g.color)??null,i.background.color),u=o==="image"?Ga(((x=n==null?void 0:n.background)==null?void 0:x.image)??null):null;return{background:{type:o,color:c,image:o==="image"?u:null},fontFamily:bg((n==null?void 0:n.fontFamily)??null,i.fontFamily),fontSize:yg((n==null?void 0:n.fontSize)??null,i.fontSize),textColor:_i((n==null?void 0:n.textColor)??null,i.textColor)}},Cn={navigation:{brand:"OUIOUITACOS",brandLogo:"/logo-brand.svg",staffLogo:"/logo-staff.svg",links:{home:"Accueil",about:"À propos",menu:"Menu",contact:"Contact",loginCta:"Staff Login"},style:Ng},hero:{title:"Le Goût Authentique du Mexique",subtitle:"Des tacos préparés avec passion, des ingrédients frais et une touche de tradition pour un voyage gustatif inoubliable.",ctaLabel:"Commander en ligne",backgroundImage:"https://picsum.photos/seed/tacosbg/1920/1080",historyTitle:"Vos dernières commandes",reorderCtaLabel:"Commander à nouveau",style:wg},about:{title:"Notre Histoire",description:"Fondé par des passionnés de la cuisine mexicaine, OUIOUITACOS est né d'un désir simple : partager le goût authentique des tacos faits maison. Chaque recette est un héritage familial, chaque ingrédient est choisi avec soin, et chaque plat est préparé avec le cœur. Venez découvrir une explosion de saveurs qui vous transportera directement dans les rues de Mexico.",image:null,style:Sg},menu:{title:"Nos Best-sellers",ctaLabel:"Voir le menu complet & Commander",loadingLabel:"Chargement du menu...",image:null,style:Cg},instagramReviews:{title:"Ils nous adorent sur Instagram",subtitle:"Des foodies de toute la Colombie partagent leur coup de cœur pour notre cuisine : ambiance solaire, service attentionné et assiettes qui brillent autant que leurs stories.",image:"https://picsum.photos/seed/instagramreviews/600/600",style:kg,reviews:ki.reduce((n,i)=>(n[i]={...A1[i]},n),{})},findUs:{title:"Encuéntranos",addressLabel:"Dirección",address:`Cra. 53 #75-98
Barranquilla, Atlántico
Colombie`,cityLabel:"Email",city:"hola@ouiouipos.co",hoursLabel:"Horarios",hours:"Lunes a domingo · 11h00 - 23h00",mapLabel:"Ver en Google Maps",mapUrl:"https://www.google.com/maps?q=OUIOUITACOS%2C%20Cra%2053%20%2375-98%2C%20Barranquilla%2C%20Atl%C3%A1ntico%2C%20Colombie",style:Tg},footer:{text:"Tous droits réservés.",style:Eg},onlineOrdering:{schedule:{startTime:"11:00",endTime:"23:00"},closedTitle:"Commandes en ligne indisponibles",closedSubtitle:"Revenez durant nos horaires de service pour commander vos plats préférés."},elementStyles:Mg,elementRichText:Ag,assets:Jd},Ud=n=>{var o,c,u,f,g,x,p,y,v,N,j,S,w,T,C,I,L,Q,D,H,se,W,X,re,G,Z,A,K,q,le,_,E,z,P,F,R,B,M,ce,de,be,te,ie,xe,we,Me,Je;const i=Cn;return{navigation:{brand:Le((o=n==null?void 0:n.navigation)==null?void 0:o.brand,i.navigation.brand),brandLogo:$a((c=n==null?void 0:n.navigation)==null?void 0:c.brandLogo,i.navigation.brandLogo),staffLogo:$a((u=n==null?void 0:n.navigation)==null?void 0:u.staffLogo,i.navigation.staffLogo),links:{home:Le((g=(f=n==null?void 0:n.navigation)==null?void 0:f.links)==null?void 0:g.home,i.navigation.links.home),about:Le((p=(x=n==null?void 0:n.navigation)==null?void 0:x.links)==null?void 0:p.about,i.navigation.links.about),menu:Le((v=(y=n==null?void 0:n.navigation)==null?void 0:y.links)==null?void 0:v.menu,i.navigation.links.menu),contact:Le((j=(N=n==null?void 0:n.navigation)==null?void 0:N.links)==null?void 0:j.contact,i.navigation.links.contact),loginCta:Le((w=(S=n==null?void 0:n.navigation)==null?void 0:S.links)==null?void 0:w.loginCta,i.navigation.links.loginCta)},style:pn((T=n==null?void 0:n.navigation)==null?void 0:T.style,i.navigation.style)},hero:{title:Le((C=n==null?void 0:n.hero)==null?void 0:C.title,i.hero.title),subtitle:Le((I=n==null?void 0:n.hero)==null?void 0:I.subtitle,i.hero.subtitle),ctaLabel:Le((L=n==null?void 0:n.hero)==null?void 0:L.ctaLabel,i.hero.ctaLabel),backgroundImage:$a((Q=n==null?void 0:n.hero)==null?void 0:Q.backgroundImage,i.hero.backgroundImage),historyTitle:Le((D=n==null?void 0:n.hero)==null?void 0:D.historyTitle,i.hero.historyTitle),reorderCtaLabel:Le((H=n==null?void 0:n.hero)==null?void 0:H.reorderCtaLabel,i.hero.reorderCtaLabel),style:pn((se=n==null?void 0:n.hero)==null?void 0:se.style,i.hero.style)},about:{title:Le((W=n==null?void 0:n.about)==null?void 0:W.title,i.about.title),description:Le((X=n==null?void 0:n.about)==null?void 0:X.description,i.about.description),image:$a((re=n==null?void 0:n.about)==null?void 0:re.image,i.about.image),style:pn((G=n==null?void 0:n.about)==null?void 0:G.style,i.about.style)},menu:{title:Le((Z=n==null?void 0:n.menu)==null?void 0:Z.title,i.menu.title),ctaLabel:Le((A=n==null?void 0:n.menu)==null?void 0:A.ctaLabel,i.menu.ctaLabel),loadingLabel:Le((K=n==null?void 0:n.menu)==null?void 0:K.loadingLabel,i.menu.loadingLabel),image:$a((q=n==null?void 0:n.menu)==null?void 0:q.image,i.menu.image),style:pn((le=n==null?void 0:n.menu)==null?void 0:le.style,i.menu.style)},instagramReviews:{title:Le((_=n==null?void 0:n.instagramReviews)==null?void 0:_.title,i.instagramReviews.title),subtitle:Le((E=n==null?void 0:n.instagramReviews)==null?void 0:E.subtitle,i.instagramReviews.subtitle),image:$a((z=n==null?void 0:n.instagramReviews)==null?void 0:z.image,i.instagramReviews.image),style:pn((P=n==null?void 0:n.instagramReviews)==null?void 0:P.style,i.instagramReviews.style),reviews:z1(((F=n==null?void 0:n.instagramReviews)==null?void 0:F.reviews)??null,i.instagramReviews.reviews)},findUs:{title:Le((R=n==null?void 0:n.findUs)==null?void 0:R.title,i.findUs.title),addressLabel:Le((B=n==null?void 0:n.findUs)==null?void 0:B.addressLabel,i.findUs.addressLabel),address:Le((M=n==null?void 0:n.findUs)==null?void 0:M.address,i.findUs.address),cityLabel:Le((ce=n==null?void 0:n.findUs)==null?void 0:ce.cityLabel,i.findUs.cityLabel),city:Le((de=n==null?void 0:n.findUs)==null?void 0:de.city,i.findUs.city),hoursLabel:Le((be=n==null?void 0:n.findUs)==null?void 0:be.hoursLabel,i.findUs.hoursLabel),hours:Le((te=n==null?void 0:n.findUs)==null?void 0:te.hours,i.findUs.hours),mapLabel:Le((ie=n==null?void 0:n.findUs)==null?void 0:ie.mapLabel,i.findUs.mapLabel),mapUrl:Le((xe=n==null?void 0:n.findUs)==null?void 0:xe.mapUrl,i.findUs.mapUrl),style:pn((we=n==null?void 0:n.findUs)==null?void 0:we.style,i.findUs.style)},footer:{text:Le((Me=n==null?void 0:n.footer)==null?void 0:Me.text,i.footer.text),style:pn((Je=n==null?void 0:n.footer)==null?void 0:Je.style,i.footer.style)},onlineOrdering:F1(n==null?void 0:n.onlineOrdering,i.onlineOrdering),elementStyles:D1((n==null?void 0:n.elementStyles)??null,i.elementStyles),elementRichText:U1((n==null?void 0:n.elementRichText)??null,i.elementRichText),assets:G1((n==null?void 0:n.assets)??null,Jd)}},F1=(n,i)=>{var o,c;return{schedule:{startTime:ph(((o=n==null?void 0:n.schedule)==null?void 0:o.startTime)??null,i.schedule.startTime),endTime:ph(((c=n==null?void 0:n.schedule)==null?void 0:c.endTime)??null,i.schedule.endTime)},closedTitle:Le((n==null?void 0:n.closedTitle)??null,i.closedTitle),closedSubtitle:Le((n==null?void 0:n.closedSubtitle)??null,i.closedSubtitle)}},V1=n=>({navigation:{brand:Ue(n.navigation.brand),brandLogo:Ga(n.navigation.brandLogo)??null,staffLogo:Ga(n.navigation.staffLogo)??null,links:{home:Ue(n.navigation.links.home),about:Ue(n.navigation.links.about),menu:Ue(n.navigation.links.menu),contact:Ue(n.navigation.links.contact),loginCta:Ue(n.navigation.links.loginCta)},style:hn(n.navigation.style,Ng)},hero:{title:Ue(n.hero.title),subtitle:Ue(n.hero.subtitle),ctaLabel:Ue(n.hero.ctaLabel),backgroundImage:Ga(n.hero.backgroundImage),historyTitle:Ue(n.hero.historyTitle),reorderCtaLabel:Ue(n.hero.reorderCtaLabel),style:hn(n.hero.style,wg)},about:{title:Ue(n.about.title),description:Ue(n.about.description),image:Ga(n.about.image),style:hn(n.about.style,Sg)},menu:{title:Ue(n.menu.title),ctaLabel:Ue(n.menu.ctaLabel),loadingLabel:Ue(n.menu.loadingLabel),image:Ga(n.menu.image),style:hn(n.menu.style,Cg)},instagramReviews:{title:Ue(n.instagramReviews.title),subtitle:Ue(n.instagramReviews.subtitle),image:Ga(n.instagramReviews.image),style:hn(n.instagramReviews.style,kg),reviews:O1(n.instagramReviews.reviews??null)},findUs:{title:Ue(n.findUs.title),addressLabel:Ue(n.findUs.addressLabel),address:Ue(n.findUs.address),cityLabel:Ue(n.findUs.cityLabel),city:Ue(n.findUs.city),hoursLabel:Ue(n.findUs.hoursLabel),hours:Ue(n.findUs.hours),mapLabel:Ue(n.findUs.mapLabel),mapUrl:Ue(n.findUs.mapUrl),style:hn(n.findUs.style,Tg)},footer:{text:Ue(n.footer.text),style:hn(n.footer.style,Eg)},onlineOrdering:{schedule:{startTime:hh(n.onlineOrdering.schedule.startTime,Cn.onlineOrdering.schedule.startTime),endTime:hh(n.onlineOrdering.schedule.endTime,Cn.onlineOrdering.schedule.endTime)},closedTitle:Ue(n.onlineOrdering.closedTitle),closedSubtitle:Ue(n.onlineOrdering.closedSubtitle)},elementStyles:R1(n.elementStyles,Mg),elementRichText:L1(n.elementRichText,Ag),assets:Y1(n.assets,Jd)}),Vs={},eo=n=>{Vs[n]&&Vs[n].forEach(i=>i())};let bl=null;const gh="site_content",Q1="default",X1=()=>{if(!(bl||typeof fe.channel!="function"))try{bl=fe.channel("orders-updates").on("postgres_changes",{event:"*",schema:"public",table:"orders"},()=>eo("orders_updated")).on("postgres_changes",{event:"*",schema:"public",table:"order_items"},()=>eo("orders_updated")).on("postgres_changes",{event:"*",schema:"public",table:"restaurant_tables"},()=>eo("orders_updated")).subscribe(n=>{(n==="CHANNEL_ERROR"||n==="CLOSED"||n==="TIMED_OUT")&&(bl=null)})}catch(n){console.warn("Failed to subscribe to real-time order updates",n)}},Ie=n=>{if(n.error)throw new Error(n.error.message);return n.data},_n=n=>{if(n.error&&n.status!==406)throw new Error(n.error.message);return n.data??null},Sa=n=>{if(n)return new Date(n).getTime()},Ma=n=>{if(n==null)return;if(typeof n=="number")return n;const i=Number(n);return Number.isFinite(i)?i:void 0},hl=n=>{if(n!==void 0)return n===null?null:new Date(n).toISOString()},io=(n,i)=>n.reduce((o,c)=>{const u=i.get(c.ingredient_id);if(!u)return o;let f=u.prix_unitaire;return(u.unite==="kg"||u.unite==="L")&&(f=f/1e3),o+f*c.qte_utilisee},0),K1=n=>{if(!n)return{permissions:{},homePage:void 0};const{[Sn]:i,...o}=n;return{permissions:o,homePage:typeof i=="string"?i:void 0}},xh=(n,i)=>{const o={...n};return i?o[Sn]=i:delete o[Sn],o},Z1=n=>{if(!n)return!1;const i=n.trim().toLowerCase();return i===hg.ADMIN||i==="administrateur"},P1=(n,i)=>{const o={...n};return gs in o||(o[gs]=Z1(i)?"editor":"none"),o},gi=(n,i)=>{const{permissions:o,homePage:c}=K1(n.permissions),u=P1(o,n.name),f={id:n.id,name:n.name,homePage:c,permissions:u};return i&&n.pin&&(f.pin=n.pin),f},bh=n=>n!=null&&n.content?Ud(n.content):null,to=n=>({id:n.id,nom:n.nom,unite:n.unite,stock_minimum:n.stock_minimum,stock_actuel:n.stock_actuel,prix_unitaire:n.prix_unitaire}),Ld=n=>({id:n.id,nom:n.nom}),J1=n=>({ingredient_id:n.ingredient_id,qte_utilisee:n.qte_utilisee}),Ys=(n,i)=>{const o=(n.product_recipes??[]).map(J1),c={id:n.id,nom_produit:n.nom_produit,description:n.description??void 0,prix_vente:n.prix_vente,categoria_id:n.categoria_id,estado:n.estado,image:Zh(n.image),recipe:o,is_best_seller:n.is_best_seller??!1,best_seller_rank:n.best_seller_rank??null};return i&&(c.cout_revient=io(o,i)),c},xn=n=>!!n&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(n),zg=n=>({id:n.id,produitRef:n.produit_id,nom_produit:n.nom_produit,prix_unitaire:Ma(n.prix_unitaire)??0,quantite:n.quantite,excluded_ingredients:n.excluded_ingredients??[],commentaire:n.commentaire??"",estado:n.estado,date_envoi:Sa(n.date_envoi)}),W1=(n,i)=>n.length!==i.length?!1:n.every((o,c)=>o===i[c]),e2=(n,i)=>{if(n.produitRef!==i.produitRef||n.nom_produit!==i.nom_produit||n.prix_unitaire!==i.prix_unitaire||n.quantite!==i.quantite||n.commentaire!==i.commentaire||n.estado!==i.estado)return!1;const o=[...n.excluded_ingredients].sort(),c=[...i.excluded_ingredients].sort();return W1(o,c)},t2=(n,i)=>{const o=[...i],c=[];return n.forEach(u=>{const f=o.findIndex(g=>e2(g,u));f!==-1&&c.push(o.splice(f,1)[0])}),[...c,...o]},us=n=>{const i=(n.order_items??[]).map(zg),o=Ma(n.total),c=Ma(n.profit),u={id:n.id,type:n.type,table_id:n.table_id??void 0,table_nom:n.table_nom??void 0,couverts:n.couverts??0,statut:n.statut,estado_cocina:n.estado_cocina,date_creation:Sa(n.date_creation)??Date.now(),date_envoi_cuisine:Sa(n.date_envoi_cuisine),date_listo_cuisine:Sa(n.date_listo_cuisine),date_servido:Sa(n.date_servido),payment_status:n.payment_status,items:i,total:o??0,profit:c,payment_method:n.payment_method??void 0,payment_receipt_url:n.payment_receipt_url??void 0,receipt_url:n.receipt_url??void 0};return(n.client_nom||n.client_telephone||n.client_adresse)&&(u.clientInfo={nom:n.client_nom??"",telephone:n.client_telephone??"",adresse:n.client_adresse??void 0}),u.subtotal=Ma(n.subtotal)??0,u.total_discount=Ma(n.total_discount)??0,u.promo_code=n.promo_code??void 0,u.applied_promotions=n.applied_promotions?typeof n.applied_promotions=="string"?JSON.parse(n.applied_promotions):n.applied_promotions:[],u},qd=n=>{const i=n.items.map(w=>Math.max(0,w.prix_unitaire)*Math.max(0,w.quantite)),o=i.reduce((w,T)=>w+T,0),c=Math.max(n.subtotal??0,0),u=o>0?o:c,f=Math.max(n.total_discount??0,0),g=u>0?Math.min(f,u):0,x=i.map(w=>{if(u<=0||w<=0||g<=0)return 0;const T=w/u*g;return Math.min(w,T)}),p=x.reduce((w,T)=>w+T,0),y=g-p;if(Math.abs(y)>1e-6&&x.length>0){const w=x.length-1,T=i[w],C=Math.min(T,Math.max(0,x[w]+y));x[w]=C}const v=x.map((w,T)=>{const C=i[T]-w;return C>0?C:0}),N=v.reduce((w,T)=>w+T,0),j=typeof n.shipping_cost=="number"?n.shipping_cost:0,S=n.total??Math.max(N+j,0);return{grossPerItem:i,discountPerItem:x,netPerItem:v,subtotalBeforeDiscount:u,totalDiscount:g,netRevenueFromItems:N,totalRevenue:S}},a2=n=>({id:n.id,orderId:n.order_id,productId:n.product_id,productName:n.product_name,categoryId:n.category_id,categoryName:n.category_name,quantity:n.quantity,unitPrice:n.unit_price,totalPrice:n.total_price,unitCost:n.unit_cost,totalCost:n.total_cost,profit:n.profit,paymentMethod:n.payment_method??void 0,saleDate:Sa(n.sale_date)??Date.now()}),s2=(n,i)=>{if(!n.commande_id)return"libre";const o=i==null?void 0:i.estado_cocina;return!o||o==="no_enviado"?"libre":o==="listo"?"para_entregar":o==="servido"||o==="entregada"?"para_pagar":n.statut==="para_entregar"||n.statut==="para_pagar"?n.statut:"en_cuisine"},Bd=(n,i)=>{const o=n.commande_id?i.get(n.commande_id):void 0,c={id:n.id,nom:n.nom,capacite:n.capacite,statut:s2(n,o),commandeId:n.commande_id??void 0,couverts:n.commande_id?n.couverts??void 0:void 0};return c.commandeId&&o&&(c.estado_cocina=o.estado_cocina,c.date_envoi_cuisine=o.date_envoi_cuisine),c},yh=async n=>{if(!n.commande_id)return Bd(n,new Map);const i=await fe.from("orders").select("id, estado_cocina, date_envoi_cuisine").eq("id",n.commande_id).maybeSingle(),o=_n(i),c=o?new Map([[o.id,{estado_cocina:o.estado_cocina,date_envoi_cuisine:Sa(o.date_envoi_cuisine)}]]):new Map;return Bd(n,c)},Fs=()=>fe.from("orders").select(`
        id,
        type,
        table_id,
        table_nom,
        couverts,
        statut,
        estado_cocina,
        date_creation,
        date_envoi_cuisine,
        date_listo_cuisine,
        date_servido,
        payment_status,
        total,
        profit,
        payment_method,
        payment_receipt_url,
        client_nom,
        client_telephone,
        client_adresse,
        receipt_url,
        order_items (
          id,
          order_id,
          produit_id,
          nom_produit,
          prix_unitaire,
          quantite,
          excluded_ingredients,
          commentaire,
          estado,
          date_envoi
        ),
        subtotal,
        total_discount,
        promo_code,
        applied_promotions
      `).order("date_creation",{ascending:!1}),n2=(n,i)=>`
        id,
        nom_produit,
        description,
        prix_vente,
        categoria_id,
        estado,
        image${n?`,
        is_best_seller,
        best_seller_rank`:""}${i?`,
        product_recipes (
          ingredient_id,
          qte_utilisee
        )`:""}
      `,vh=n=>{const i=(n==null?void 0:n.includeBestSellerColumns)!==!1,o=(n==null?void 0:n.includeRecipes)!==!1;let c=fe.from("products").select(n2(i,o));return n!=null&&n.orderBy?c=c.order(n.orderBy.column,{ascending:n.orderBy.ascending??!0,nullsFirst:n.orderBy.nullsFirst}):c=c.order("nom_produit"),c},l2=n=>{if(!(n!=null&&n.message))return!1;const i=n.message.toLowerCase();return i.includes("does not exist")&&i.includes("column")&&(i.includes("is_best_seller")||i.includes("best_seller_rank"))},Nn=async(n,i)=>{let c=await n(vh({...i,includeBestSellerColumns:!0}),!0);return l2(c.error)&&(c=await n(vh({...i,includeBestSellerColumns:!1}),!1)),c},i2=n=>n==="sur_place"||n==="a_emporter"||n==="pedir_en_linea"?n:"a_emporter",r2=n=>n==="en_cours"||n==="finalisee"||n==="pendiente_validacion"?n:"pendiente_validacion",o2=n=>n==="paid"||n==="unpaid"?n:"unpaid",c2=n=>{if(!n)return null;const i=n.trim().toLowerCase();return i==="tarjeta"||i==="card"||i==="credit_card"||i==="debit_card"||i==="carte"||i==="carte_bancaire"||i==="pago_online"||i==="online"?"tarjeta":i==="efectivo"||i==="cash"||i==="liquide"||i==="contado"?"efectivo":i==="transferencia"||i==="transfer"||i==="bank_transfer"||i==="transfert"?"transferencia":null},At=async n=>{const i=await Fs().eq("id",n).maybeSingle(),o=_n(i);return o?us(o):null},gl=async()=>{const n=await fe.from("ingredients").select("id, nom, unite, stock_minimum, stock_actuel, prix_unitaire").order("nom");return Ie(n).map(to)},d2=n=>n?typeof n=="string"?n.toLowerCase().includes("permission"):n instanceof Error?n.message.toLowerCase().includes("permission"):typeof n=="object"&&"message"in n?String(n.message??"").toLowerCase().includes("permission"):!1:!1,Sd=async n=>{try{return await gl()}catch(i){if(d2(i))return console.warn(`[api.${n}] Impossible de récupérer les ingrédients (permissions insuffisantes). Poursuite avec une liste vide.`,i),[];throw i}},ao=async()=>{const n=await fe.from("categories").select("id, nom").order("nom");return Ie(n).map(Ld)},jh=async()=>{const n=await fe.from("restaurant_tables").select("id, nom, capacite, statut, commande_id, couverts").order("nom"),i=Ie(n),o=i.map(u=>u.commande_id).filter(u=>!!u);let c=new Map;if(o.length>0){const u=await fe.from("orders").select("id, estado_cocina, date_envoi_cuisine").in("id",o),f=Ie(u);c=new Map(f.map(g=>[g.id,{estado_cocina:g.estado_cocina,date_envoi_cuisine:Sa(g.date_envoi_cuisine)}]))}return i.map(u=>Bd(u,c))},Ni=(n=new Date)=>{const i=new Date(n);return i.setHours(5,0,0,0),n<i&&i.setDate(i.getDate()-1),i},u2={week:{days:7,label:"7 derniers jours"},month:{days:30,label:"30 derniers jours"}},m2=n=>{const i=u2[n],o=new Date(Ni());o.setDate(o.getDate()+1);const c=new Date(o);return c.setDate(c.getDate()-i.days),{config:i,start:c,end:o}},_h=async n=>{if(!n.items.length)return await fe.from("sales").delete().eq("order_id",n.id),await fe.from("orders").update({profit:0}).eq("id",n.id),0;const i=Array.from(new Set(n.items.map(w=>w.produitRef))),o=i.length>0?Nn(w=>w.in("id",i)):Nn(w=>w.limit(0)),[c,u,f]=await Promise.all([ao(),gl(),o]),g=new Map(u.map(w=>[w.id,w])),x=new Map(c.map(w=>[w.id,w.nom]));let p=[];i.length>0&&(p=Ie(f));const y=new Map(p.map(w=>{const T=Ys(w,g);return[T.id,T]})),v=hl(n.date_servido)??new Date().toISOString(),N=qd(n),j=n.items.map((w,T)=>({item:w,index:T})).filter(({item:w})=>xn(w.produitRef)).map(({item:w,index:T})=>{const C=y.get(w.produitRef),I=C?io(C.recipe,g):0,L=(C==null?void 0:C.categoria_id)??"unknown",Q=C?x.get(L)??"Sans catégorie":"Sans catégorie",D=N.netPerItem[T]??w.prix_unitaire*w.quantite,H=w.quantite>0?D/w.quantite:0,se=I*w.quantite,W=D-se;return{order_id:n.id,product_id:w.produitRef,product_name:w.nom_produit,category_id:L,category_name:Q,quantity:w.quantite,unit_price:H,total_price:D,unit_cost:I,total_cost:se,profit:W,payment_method:n.payment_method??null,sale_date:v}}),S=j.reduce((w,T)=>w+T.profit,0);return await fe.from("sales").delete().eq("order_id",n.id),await fe.from("sales").insert(j),await fe.from("orders").update({profit:S}).eq("id",n.id),S},Ha={subscribe:(n,i)=>(Vs[n]||(Vs[n]=[]),Vs[n].push(i),n==="orders_updated"&&X1(),()=>{var o;Vs[n]=(Vs[n]??[]).filter(c=>c!==i),n==="orders_updated"&&((o=Vs[n])==null?void 0:o.length)===0&&bl&&(typeof fe.removeChannel=="function"&&fe.removeChannel(bl),bl=null)}),publish:n=>{eo(n)}},bt=n=>{(n==null?void 0:n.includeNotifications)!==!1&&Ha.publish("notifications_updated"),Ha.publish("orders_updated")},ye={notifications:Ha,getSiteContent:async()=>{const n=await fe.from(gh).select("id, content, updated_at").order("updated_at",{ascending:!1}).limit(1).maybeSingle(),i=_n(n);return bh(i)},updateSiteContent:async n=>{const i=V1(n),o=await fe.from(gh).upsert({id:Q1,content:i},{onConflict:"id"}).select("id, content, updated_at").single(),c=Ie(o),u=bh(c);if(!u)throw new Error("Contenu du site introuvable après la mise à jour.");return u},getRoles:async()=>{const n=await fe.from("roles").select("id, name, pin, permissions").order("name");return Ie(n).map(o=>gi(o,!0))},getRoleById:async n=>{const i=await fe.from("roles").select("id, name, permissions").eq("id",n).maybeSingle(),o=_n(i);return o?gi(o,!1):null},createRole:async n=>{const i=await fe.from("roles").insert({name:n.name,pin:n.pin,permissions:xh(n.permissions,n.homePage)}).select("id, name, pin, permissions").single(),o=Ie(i);return Ha.publish("notifications_updated"),gi(o,!0)},updateRole:async(n,i)=>{const o=await fe.from("roles").update({name:i.name,pin:i.pin,permissions:xh(i.permissions,i.homePage)}).eq("id",n).select("id, name, pin, permissions").single(),c=Ie(o);return Ha.publish("notifications_updated"),gi(c,!0)},deleteRole:async n=>{const i=await fe.from("roles").delete().eq("id",n);Ie(i),Ha.publish("notifications_updated")},loginWithPin:async n=>{const i=await fe.from("roles").select("id, name, permissions").eq("pin",n).maybeSingle(),o=_n(i);if(!o)return null;const c=gi(o,!1);try{await oh(c.id,c.name)}catch(u){console.warn("Failed to enregistrer la connexion du rôle",u)}return c},getDashboardStats:async(n="week")=>{var Xt;const{config:i,start:o,end:c}=m2(n),u=o.toISOString(),f=c.toISOString(),g=new Date(o);g.setDate(g.getDate()-i.days);const x=g.toISOString(),y=Ni().toISOString(),[v,N,j,S,w,T]=await Promise.all([jh(),gl(),ao(),Nn(ge=>ge),Fs().eq("statut","finalisee").gte("date_creation",y),Fs().eq("statut","finalisee").gte("date_creation",x).lt("date_creation",f)]),I=Ie(w).map(us),Q=Ie(T).map(us),D=Q.filter(ge=>ge.date_creation>=o.getTime()),H=Q.filter(ge=>ge.date_creation<o.getTime()),se=new Map(N.map(ge=>[ge.id,ge])),W=Ie(S),X=new Map(W.map(ge=>{const Ne=Ys(ge,se);return[Ne.id,Ne]})),re=new Map(j.map(ge=>[ge.id,ge.nom])),G=new Map,Z=ge=>{const Ne=G.get(ge.id);if(Ne)return Ne;const ze=qd(ge);return G.set(ge.id,ze),ze},A=ge=>ge.reduce((Ne,ze)=>{const dt=Z(ze);return Ne+ze.items.reduce((ke,We,_t)=>{const Kt=X.get(We.produitRef),ft=Kt?io(Kt.recipe,se):0,Nt=dt.netPerItem[_t]??We.prix_unitaire*We.quantite;return ke+(Nt-ft*We.quantite)},0)},0),K=hl((Xt=I[0])==null?void 0:Xt.date_servido)??new Date().toISOString(),q=I.flatMap(ge=>{const Ne=Z(ge);return ge.items.map((ze,dt)=>{const ke=X.get(ze.produitRef),We=ke?io(ke.recipe,se):0,_t=(ke==null?void 0:ke.categoria_id)??"unknown",Kt=ke?re.get(_t)??"Sans catégorie":"Sans catégorie",ft=Ne.netPerItem[dt]??ze.prix_unitaire*ze.quantite,Nt=ze.quantite>0?ft/ze.quantite:0,fa=We*ze.quantite,Ra=ft-fa;return{order_id:ge.id,product_id:ze.produitRef,product_name:ze.nom_produit,category_id:_t,category_name:Kt,quantity:ze.quantite,unit_price:Nt,total_price:ft,unit_cost:We,total_cost:fa,profit:Ra,payment_method:ge.payment_method??null,sale_date:K}})}),le=I.reduce((ge,Ne)=>ge+Z(Ne).totalRevenue,0);q.reduce((ge,Ne)=>ge+Ne.profit,0),I.reduce((ge,Ne)=>ge+(Ne.couverts??0),0),I.length>0&&le/I.length;const _=D.reduce((ge,Ne)=>ge+Z(Ne).totalRevenue,0),E=H.reduce((ge,Ne)=>ge+Z(Ne).totalRevenue,0),z=A(D),P=A(H),F=D.reduce((ge,Ne)=>ge+(Ne.couverts??0),0),R=H.reduce((ge,Ne)=>ge+(Ne.couverts??0),0),B=D.length>0?_/D.length:0,M=D.length,ce=H.length,de=new Map;D.forEach(ge=>{const Ne=Z(ge);ge.items.forEach((ze,dt)=>{const ke=X.get(ze.produitRef),We=ke?re.get(ke.categoria_id)??"Sans catégorie":"Sans catégorie",_t=Ne.netPerItem[dt]??ze.prix_unitaire*ze.quantite;de.set(We,(de.get(We)??0)+_t)})});const be=Array.from(de.entries()).map(([ge,Ne])=>({name:ge,value:Ne})),te=[...D].sort((ge,Ne)=>Ne.date_creation-ge.date_creation).slice(0,5),ie=Array.from(X.values()).filter(ge=>ge.is_best_seller).sort((ge,Ne)=>{const ze=ge.best_seller_rank??Number.POSITIVE_INFINITY,dt=Ne.best_seller_rank??Number.POSITIVE_INFINITY;return ze===dt?ge.nom_produit.localeCompare(Ne.nom_produit):ze-dt}).slice(0,6),xe=v.filter(ge=>ge.statut!=="libre").length,we=v.reduce((ge,Ne)=>ge+(Ne.couverts??0),0),Me=I.filter(ge=>ge.estado_cocina==="recibido").length,Je=N.filter(ge=>ge.stock_actuel<=ge.stock_minimum),Dt=(ge,Ne,ze)=>{const dt=Ne.getTime(),ke=ze.getTime();return ge.reduce((We,_t)=>_t.date_creation>=dt&&_t.date_creation<ke?We+Z(_t).totalRevenue:We,0)},Ct=Array.from({length:i.days}).map((ge,Ne)=>{const ze=new Date(o);ze.setDate(ze.getDate()+Ne);const dt=new Date(ze);dt.setDate(dt.getDate()+1);const ke=new Date(g);ke.setDate(ke.getDate()+Ne);const We=new Date(ke);return We.setDate(We.getDate()+1),{name:i.days===7?Ne===i.days-1?"Auj":`J-${i.days-1-Ne}`:ze.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit"}),ventes:Dt(D,ze,dt),ventesPeriodePrecedente:Dt(H,ke,We)}});return{period:n,periodLabel:i.label,periodStart:u,periodEnd:f,ventesPeriode:_,ventesPeriodePrecedente:E,beneficePeriode:z,beneficePeriodePrecedente:P,clientsPeriode:F,clientsPeriodePrecedente:R,panierMoyen:B,commandesPeriode:M,commandesPeriodePrecedente:ce,tablesOccupees:xe,clientsActuels:we,commandesEnCuisine:Me,ingredientsStockBas:Je,ventesPeriodeSeries:Ct,ventesParCategorie:be,recentOrders:te,bestSellerProducts:ie}},getSalesByProduct:async n=>{const i=y=>{if(y)return typeof y=="string"?y:y.toISOString()},o=i(n==null?void 0:n.start)??Ni().toISOString(),c=i(n==null?void 0:n.end);let u=fe.from("sales").select("product_id, product_name, total_price").gte("sale_date",o);c&&(u=u.lt("sale_date",c));const f=await u,g=Ie(f),x=new Map;g.forEach(y=>{const v=x.get(y.product_id)??{name:y.product_name,value:0};v.value+=y.total_price,x.set(y.product_id,v)});const p=Array.from(x.values()).sort((y,v)=>v.value-y.value);if(p.length>6){const y=p.slice(0,6),v=p.slice(6).reduce((N,j)=>N+j.value,0);return[...y,{name:"Autres",value:v}]}return p},getTables:async()=>jh(),createTable:async n=>{const i=await fe.from("restaurant_tables").insert({nom:n.nom,capacite:n.capacite,couverts:n.couverts??null}).select("id, nom, capacite, statut, commande_id, couverts").single(),o=Ie(i);return bt(),yh(o)},updateTable:async(n,i)=>{const o={};i.nom!==void 0&&(o.nom=i.nom),i.capacite!==void 0&&(o.capacite=i.capacite),i.couverts!==void 0&&(o.couverts=i.couverts??null);const c=await fe.from("restaurant_tables").update(o).eq("id",n).select("id, nom, capacite, statut, commande_id, couverts").single(),u=Ie(c);return bt(),yh(u)},deleteTable:async n=>{const i=await fe.from("restaurant_tables").delete().eq("id",n);Ie(i),bt()},getIngredients:async()=>gl(),getProducts:async()=>{const[n,i]=await Promise.all([Nn(u=>u.neq("estado","archive")),Sd("getProducts")]),o=Ie(n),c=i.length>0?new Map(i.map(u=>[u.id,u])):void 0;return o.map(u=>Ys(u,c))},getProductById:async n=>{const[i,o]=await Promise.all([Nn(f=>f.eq("id",n).maybeSingle()),Sd("getProductById")]),c=_n(i);if(!c)return null;const u=o.length>0?new Map(o.map(f=>[f.id,f])):void 0;return Ys(c,u)},getBestSellerProducts:async()=>{const[n,i]=await Promise.all([Nn((u,f)=>f?u.eq("is_best_seller",!0).order("best_seller_rank",{ascending:!0,nullsFirst:!1}).limit(6):u.limit(0),{includeRecipes:!1}),Sd("getBestSellerProducts")]),o=Ie(n),c=i.length>0?new Map(i.map(u=>[u.id,u])):void 0;return o.filter(u=>u.estado!=="archive").sort((u,f)=>{const g=u.best_seller_rank??Number.POSITIVE_INFINITY,x=f.best_seller_rank??Number.POSITIVE_INFINITY;return g-x}).map(u=>Ys(u,c)).filter(u=>u.is_best_seller).slice(0,6)},getCategories:async()=>ao(),addProduct:async n=>{const i=ps(n.image),o=await fe.from("products").insert({nom_produit:n.nom_produit,description:n.description??null,prix_vente:n.prix_vente,categoria_id:n.categoria_id,estado:n.estado,image:i,is_best_seller:n.is_best_seller??!1,best_seller_rank:n.is_best_seller?n.best_seller_rank:null}).select("id, nom_produit, description, prix_vente, categoria_id, estado, image, is_best_seller, best_seller_rank").single(),c=Ie(o);return n.recipe.length>0&&await fe.from("product_recipes").insert(n.recipe.map(u=>({product_id:c.id,ingredient_id:u.ingredient_id,qte_utilisee:u.qte_utilisee}))),bt(),Ys({...c,product_recipes:n.recipe.map(u=>({ingredient_id:u.ingredient_id,qte_utilisee:u.qte_utilisee}))})},createProduct:async(n,i)=>{let o;i&&(o=await fe.storage.from("product-images").upload(`${n.nom_produit}-${Date.now()}`,i).then(f=>{var g;if(f.error)throw f.error;return(g=f.data)==null?void 0:g.path}));const c=await fe.from("products").insert({nom_produit:n.nom_produit,description:n.description??null,prix_vente:n.prix_vente,categoria_id:n.categoria_id,estado:n.estado,image:o??null}).select("id, nom_produit, description, prix_vente, categoria_id, estado, image").single(),u=Ie(c);return n.recipe.length>0&&await fe.from("product_recipes").insert(n.recipe.map(f=>({product_id:u.id,ingredient_id:f.ingredient_id,qte_utilisee:f.qte_utilisee}))),bt(),Ys({...u,product_recipes:n.recipe.map(f=>({...f,product_id:u.id}))})},updateProduct:async(n,i,o)=>{let c;o?c=await fe.storage.from("product-images").upload(`${i.nom_produit??n}-${Date.now()}`,o).then(g=>{var x;if(g.error)throw g.error;return(x=g.data)==null?void 0:x.path}):"image"in i&&i.image===null&&(c=null);const u={};i.nom_produit!==void 0&&(u.nom_produit=i.nom_produit),i.description!==void 0&&(u.description=i.description),i.prix_vente!==void 0&&(u.prix_vente=i.prix_vente),i.categoria_id!==void 0&&(u.categoria_id=i.categoria_id),i.estado!==void 0&&(u.estado=i.estado),c!==void 0&&(u.image=c),Object.keys(u).length>0&&await fe.from("products").update(u).eq("id",n),i.recipe&&(await fe.from("product_recipes").delete().eq("product_id",n),i.recipe.length>0&&await fe.from("product_recipes").insert(i.recipe.map(g=>({product_id:n,ingredient_id:g.ingredient_id,qte_utilisee:g.qte_utilisee})))),bt();const f=await ye.getProductById(n);if(!f)throw new Error("Product not found after update");return f},deleteProduct:async n=>{const i=await ye.getProductById(n);if(i!=null&&i.image){const o=i.image.split("/").pop();o&&await fe.storage.from("product-images").remove([o])}await fe.from("product_recipes").delete().eq("product_id",n),await fe.from("products").delete().eq("id",n),bt()},createCategory:async n=>{const i=await fe.from("categories").insert(n).select("id, nom").single(),o=Ie(i);return bt(),Ld(o)},updateCategory:async(n,i)=>{const o=await fe.from("categories").update(i).eq("id",n).select("id, nom").single(),c=Ie(o);return bt(),Ld(c)},deleteCategory:async n=>{await fe.from("categories").delete().eq("id",n),bt()},createIngredient:async n=>{const i=await fe.from("ingredients").insert({nom:n.nom,unite:n.unite,stock_minimum:n.stock_minimum,stock_actuel:0,prix_unitaire:0}).select("id, nom, unite, stock_minimum, stock_actuel, prix_unitaire").single(),o=Ie(i);return Ha.publish("notifications_updated"),to(o)},updateIngredient:async(n,i)=>{const o=await fe.from("ingredients").update(i).eq("id",n).select("id, nom, unite, stock_minimum, stock_actuel, prix_unitaire").single(),c=Ie(o);return Ha.publish("notifications_updated"),to(c)},resupplyIngredient:async(n,i,o)=>{if(!Number.isFinite(i)||i<=0)throw new Error("Quantity must be a positive number");if(!Number.isFinite(o)||o<0)throw new Error("Unit price must be a non-negative number");const c=await fe.from("ingredients").select("id, nom, unite, stock_minimum, stock_actuel, prix_unitaire").eq("id",n).single(),u=Ie(c),f=Ma(u.stock_actuel)??0,g=Ma(u.prix_unitaire)??0,x=Number(i),p=f+x,y=f*g+x*o,v=p>0?y/p:0,N=await fe.from("ingredients").update({stock_actuel:p,prix_unitaire:v}).eq("id",n).select("id, nom, unite, stock_minimum, stock_actuel, prix_unitaire").single(),j=Ie(N),S=await fe.from("purchases").insert({ingredient_id:n,quantite_achetee:x,prix_total:x*o,date_achat:new Date().toISOString()});if(S.error)throw new Error(S.error.message);return Ha.publish("notifications_updated"),to(j)},deleteIngredient:async n=>{const i=await fe.from("product_recipes").select("ingredient_id, product_id, qte_utilisee").eq("ingredient_id",n).limit(1),{data:o}=i;return o&&o.length>0?{success:!1}:(await fe.from("ingredients").delete().eq("id",n),Ha.publish("notifications_updated"),{success:!0})},getKitchenOrders:async()=>{const n=await Fs().eq("estado_cocina","recibido"),o=Ie(n).map(us),c=[];return o.forEach(u=>{const f=u.items.filter(x=>x.estado==="enviado");if(f.length===0)return;f.reduce((x,p)=>{const y=p.date_envoi??u.date_envoi_cuisine??u.date_creation,v=x.get(y)??[];return v.push(p),x.set(y,v),x},new Map).forEach((x,p)=>{c.push({...u,items:x,date_envoi_cuisine:p,ticketKey:`${u.id}-${p}`})})}),c.sort((u,f)=>{const g=u.date_envoi_cuisine??u.date_creation,x=f.date_envoi_cuisine??f.date_creation;return g-x})},getTakeawayOrders:async()=>{const n=await Fs().in("type",["a_emporter","pedir_en_linea"]),o=Ie(n).map(us);return{pending:o.filter(c=>c.statut==="pendiente_validacion"&&c.estado_cocina==="no_enviado"),ready:o.filter(c=>c.estado_cocina==="listo")}},getOrderById:async n=>await At(n)??void 0,createOrGetOrderByTableId:async(n,i)=>{const o=await fe.from("restaurant_tables").select("id, nom, capacite, statut, commande_id, couverts").eq("id",n).maybeSingle(),c=_n(o);if(!c)throw new Error("Table not found");if(c.commande_id){const y=await At(c.commande_id);if(y)return y}const u=(i==null?void 0:i.couverts)??c.couverts??null;if(!Number.isInteger(u)||u<=0)throw new Error("Le nombre de couverts sélectionné est requis pour ouvrir la table.");const f=u,g=new Date().toISOString(),x=await fe.from("orders").insert({type:"sur_place",table_id:c.id,table_nom:c.nom,couverts:f,statut:"en_cours",estado_cocina:"no_enviado",date_creation:g,payment_status:"unpaid",total:0}).select("*").single(),p=Ie(x);return await fe.from("restaurant_tables").update({statut:"en_cuisine",commande_id:p.id,couverts:f}).eq("id",n),bt(),us(p)},cancelUnsentTableOrder:async n=>{const i=await At(n);!i||i.estado_cocina!=="no_enviado"||i.items.some(c=>c.estado!=="en_attente")||(await fe.from("order_items").delete().eq("order_id",n),await fe.from("orders").delete().eq("id",n),i.table_id&&await fe.from("restaurant_tables").update({statut:"libre",commande_id:null,couverts:null}).eq("id",i.table_id),bt())},addOrderItems:async(n,i)=>{const o=new Date().toISOString(),c=i.map(f=>({...f,order_id:n,estado:"en_attente",date_envoi:o}));await fe.from("order_items").insert(c),bt();const u=await At(n);if(!u)throw new Error("Order not found after adding items");return u},updateOrderItems:async(n,i)=>{const o=await At(n);if(!o)throw new Error("Order not found");const c=new Set(o.items.map(v=>v.id)),u=new Set(i.map(v=>v.id)),f=i.filter(v=>!c.has(v.id)),g=i.filter(v=>c.has(v.id)),x=o.items.filter(v=>!u.has(v.id)),p=new Date().toISOString();f.length>0&&await fe.from("order_items").insert(f.map(v=>({...v,order_id:n,estado:"en_attente",date_envoi:p}))),g.length>0&&await Promise.all(g.map(v=>fe.from("order_items").update({produit_id:v.produitRef,nom_produit:v.nom_produit,prix_unitaire:v.prix_unitaire,quantite:v.quantite,excluded_ingredients:v.excluded_ingredients??[],commentaire:v.commentaire,estado:v.estado??"en_attente",date_envoi:v.date_envoi?new Date(v.date_envoi).toISOString():p}).eq("id",v.id))),x.length>0&&await fe.from("order_items").delete().in("id",x.map(v=>v.id)),bt();const y=await At(n);if(!y)throw new Error("Order not found after item update");return y},updateOrder:async(n,i,o)=>{const{items:c,clientInfo:u,removedItemIds:f=[],...g}=i;let x=[];if(c){const j=await At(n);if(!j)throw new Error("Order not found");x=j.items;const S=new Set(x.map(C=>C.id)),w=c.filter(C=>!xn(C.id)||!S.has(C.id)),T=c.filter(C=>xn(C.id)&&S.has(C.id));w.length>0&&await fe.from("order_items").insert(w.map(C=>({...xn(C.id)?{id:C.id}:{},order_id:n,produit_id:C.produitRef,nom_produit:C.nom_produit,prix_unitaire:C.prix_unitaire,quantite:C.quantite,excluded_ingredients:C.excluded_ingredients??[],commentaire:C.commentaire??null,estado:C.estado??"en_attente",date_envoi:C.date_envoi?new Date(C.date_envoi).toISOString():null}))),T.length>0&&await Promise.all(T.map(C=>fe.from("order_items").update({produit_id:C.produitRef,nom_produit:C.nom_produit,prix_unitaire:C.prix_unitaire,quantite:C.quantite,excluded_ingredients:C.excluded_ingredients??[],commentaire:C.commentaire??null,estado:C.estado??"en_attente",date_envoi:C.date_envoi?new Date(C.date_envoi).toISOString():null}).eq("id",C.id)))}const p={};g.type&&(p.type=g.type),g.table_id!==void 0&&(p.table_id=g.table_id),g.table_nom!==void 0&&(p.table_nom=g.table_nom),g.couverts!==void 0&&(p.couverts=g.couverts),g.statut&&(p.statut=g.statut),g.estado_cocina&&(p.estado_cocina=g.estado_cocina),g.payment_status&&(p.payment_status=g.payment_status),g.payment_method!==void 0&&(p.payment_method=g.payment_method),g.payment_receipt_url!==void 0&&(p.payment_receipt_url=g.payment_receipt_url),g.receipt_url!==void 0&&(p.receipt_url=g.receipt_url),g.total!==void 0&&(p.total=g.total),g.profit!==void 0&&(p.profit=g.profit),g.date_creation!==void 0&&(p.date_creation=hl(g.date_creation)),g.date_envoi_cuisine!==void 0&&(p.date_envoi_cuisine=hl(g.date_envoi_cuisine)),g.date_listo_cuisine!==void 0&&(p.date_listo_cuisine=hl(g.date_listo_cuisine)),g.date_servido!==void 0&&(p.date_servido=hl(g.date_servido)),c&&(p.total=c.reduce((j,S)=>j+S.prix_unitaire*S.quantite,0));const y=new Set((c??[]).map(j=>j.id)),v=new Set;f.filter(j=>xn(j)).forEach(j=>v.add(j)),x.filter(j=>xn(j.id)&&!y.has(j.id)).forEach(j=>v.add(j.id)),v.size>0&&await fe.from("order_items").delete().in("id",Array.from(v)),u&&(p.client_nom=(u==null?void 0:u.nom)??null,p.client_telephone=(u==null?void 0:u.telephone)??null,p.client_adresse=(u==null?void 0:u.adresse)??null),Object.keys(p).length>0&&await fe.from("orders").update(p).eq("id",n),bt({includeNotifications:(o==null?void 0:o.includeNotifications)??!0});const N=await At(n);if(!N)throw new Error("Order not found after update");return c?{...N,items:t2(c,N.items)}:N},sendOrderToKitchen:async(n,i)=>{const o=await At(n);if(!o)throw new Error("Order not found");const c=o.items.filter(p=>p.estado==="en_attente"),u=(()=>{if(!i||i.length===0)return c;const p=new Set(i);return c.filter(y=>p.has(y.id))})();if(u.length===0)return o;const f=u.filter(p=>xn(p.id)).map(p=>p.id);if(f.length===0)return o;const g=new Date().toISOString();await fe.from("order_items").update({estado:"enviado",date_envoi:g}).in("id",f),await fe.from("orders").update({estado_cocina:"recibido",date_envoi_cuisine:g}).eq("id",n),o.table_id&&await fe.from("restaurant_tables").update({statut:"en_cuisine"}).eq("id",o.table_id),bt();const x=await At(n);if(!x)throw new Error("Order not found after sending to kitchen");return x},markOrderAsReady:async n=>{const i=new Date().toISOString();await fe.from("orders").update({estado_cocina:"listo",date_listo_cuisine:i}).eq("id",n);const o=await At(n);o!=null&&o.table_id&&await fe.from("restaurant_tables").update({statut:"para_entregar"}).eq("id",o.table_id),bt();const c=await At(n);if(!c)throw new Error("Order not found after ready update");return c},markOrderAsServed:async n=>{const i=await At(n);if(!i)throw new Error("Order not found");const o=new Date().toISOString();await fe.from("orders").update({estado_cocina:"servido",date_servido:o}).eq("id",n),i.table_id&&await fe.from("restaurant_tables").update({statut:"para_pagar"}).eq("id",i.table_id),bt();const c=await At(n);if(!c)throw new Error("Order not found after serve update");return c},finalizeOrder:async(n,i,o)=>{const c=await At(n);if(!c)throw new Error("Order not found");const u=new Date().toISOString();await fe.from("orders").update({statut:"finalisee",payment_status:"paid",payment_method:i,payment_receipt_url:o??null,date_servido:u,total:c.total,subtotal:c.subtotal,total_discount:c.total_discount,promo_code:c.promo_code,applied_promotions:c.applied_promotions?JSON.stringify(c.applied_promotions):null}).eq("id",n),c.table_id&&await fe.from("restaurant_tables").update({statut:"libre",commande_id:null,couverts:null}).eq("id",c.table_id),bt();const f=await At(n);if(!f)throw new Error("Order not found after finalization");const g=await _h(f);return{...f,profit:g}},submitCustomerOrder:async n=>{var g,x,p;const o=new Date().toISOString(),c=await fe.from("orders").insert({type:"a_emporter",couverts:1,statut:"pendiente_validacion",estado_cocina:"no_enviado",date_creation:o,payment_status:"unpaid",total:n.total??n.items.reduce((y,v)=>y+v.prix_unitaire*v.quantite,0),client_nom:((g=n.clientInfo)==null?void 0:g.nom)??null,client_telephone:((x=n.clientInfo)==null?void 0:x.telephone)??null,client_adresse:((p=n.clientInfo)==null?void 0:p.adresse)??null,receipt_url:n.receipt_url??null,subtotal:n.subtotal??null,total_discount:n.total_discount??null,promo_code:n.promo_code??null,applied_promotions:n.applied_promotions?JSON.stringify(n.applied_promotions):null}).select("*").single(),u=Ie(c);if(n.items.length>0){const y=n.items.map(N=>{const j=N.produitRef&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(N.produitRef);return{order_id:u.id,produit_id:j?N.produitRef:null,nom_produit:N.nom_produit,prix_unitaire:N.prix_unitaire,quantite:N.quantite,excluded_ingredients:N.excluded_ingredients??[],commentaire:N.commentaire,estado:N.estado??"en_attente",date_envoi:N.date_envoi?new Date(N.date_envoi).toISOString():null}}),v=await fe.from("order_items").insert(y);if(v.error)throw console.error("Error inserting order items:",v.error),new Error(`Failed to insert order items: ${v.error.message}`)}bt();const f=await At(u.id);if(!f)throw new Error("Order not found after creation");return f},getCustomerOrderStatus:async n=>At(n),validateTakeawayOrder:async n=>{const i=new Date().toISOString(),o=await fe.from("orders").update({statut:"en_cours",estado_cocina:"recibido",payment_status:"paid",payment_method:"tarjeta",date_envoi_cuisine:i}).eq("id",n);if(o.error)throw console.error("Failed to update takeaway order status",o.error),new Error(`Failed to update takeaway order status: ${o.error.message}`);const c=await fe.from("order_items").update({estado:"enviado",date_envoi:i}).eq("order_id",n);if(c.error)throw console.error("Failed to mark takeaway order items as sent",c.error),new Error(`Failed to mark takeaway order items as sent: ${c.error.message}`);bt();const u=await At(n);if(!u)throw new Error("Order not found after validation");return u},markTakeawayAsDelivered:async n=>{await fe.from("orders").update({statut:"finalisee",estado_cocina:"entregada",payment_method:"transferencia"}).eq("id",n),bt();const i=await At(n);if(!i)throw new Error("Order not found after delivery");const o=await _h(i);return{...i,profit:o}},getNotificationCounts:async()=>{const n=await Fs(),o=Ie(n).map(us),c=u=>u.type==="a_emporter"||u.type==="pedir_en_linea";return{pendingTakeaway:o.filter(u=>c(u)&&u.statut==="pendiente_validacion"&&u.estado_cocina==="no_enviado").length,readyTakeaway:o.filter(u=>c(u)&&u.estado_cocina==="listo").length,kitchenOrders:o.filter(u=>u.estado_cocina==="recibido").length,lowStockIngredients:(await gl()).filter(u=>u.stock_actuel<=u.stock_minimum).length,readyForService:o.filter(u=>u.type==="sur_place"&&u.estado_cocina==="listo").length}},generateDailyReport:async()=>{const n=new Date,i=Ni(n),o=i.toISOString();dh(o);const[c,u,f,g]=await Promise.all([Fs().eq("statut","finalisee"),ao(),gl(),Nn(A=>A)]);let x=[],p=!1;try{x=await ch(o)}catch(A){console.warn("Failed to fetch role logins for daily report",A),p=!0}const v=Ie(c).map(us),N=i.getTime(),j=n.getTime(),S=v.filter(A=>{const K=A.date_servido??A.date_listo_cuisine??A.date_creation;return K>=N&&K<=j}),w=new Map,T=A=>{const K=w.get(A.id);if(K)return K;const q=qd(A);return w.set(A.id,q),q},C=S.reduce((A,K)=>A+(K.type==="sur_place"?Math.max(K.couverts??0,0):0),0),I=S.filter(A=>A.type==="pedir_en_linea").length,L=C+I;let Q=0,D=0;const H=new Map(f.map(A=>[A.id,A])),se=Ie(g),W=new Map(se.map(A=>{const K=Ys(A,H);return[K.id,K]})),X=new Map(u.map(A=>[A.id,A.nom])),re=new Map;S.forEach(A=>{const K=T(A);Q+=K.totalRevenue,D+=K.totalDiscount,A.items.forEach((q,le)=>{const _=W.get(q.produitRef),E=_?X.get(_.categoria_id)??"Sans catégorie":"Sans catégorie",z=_?_.categoria_id:"unknown",P=re.get(z)??{categoryName:E,products:[]},F=P.products.find(B=>B.id===q.produitRef),R=K.netPerItem[le]??q.prix_unitaire*q.quantite;F?(F.quantity+=q.quantite,F.totalSales+=R):P.products.push({id:q.produitRef,name:q.nom_produit,quantity:q.quantite,totalSales:R}),re.set(z,P)})}),re.forEach(A=>{A.products.sort((K,q)=>q.quantity-K.quantity)});const G=f.filter(A=>A.stock_actuel<=A.stock_minimum),Z=S.length>0?Q/S.length:0;return{generatedAt:n.toISOString(),startDate:i.toISOString(),clientsDuJour:L,clientsSurPlace:C,clientsEnLigne:I,panierMoyen:Z,ventesDuJour:Q,totalPromotionsApplied:D,soldProducts:Array.from(re.values()),lowStockIngredients:G,roleLogins:x,roleLoginsUnavailable:p}},getSalesHistory:async()=>{const n=await fe.from("sales").select("*").order("sale_date",{ascending:!1});return Ie(n).map(a2)},getFinalizedOrders:async()=>{const n=await Fs().eq("statut","finalisee");return Ie(n).map(us)},createOrder:async n=>{var v,N,j;const i=i2(n.order_type??n.type),o=r2(n.status??n.statut),c=o2(n.payment_status),u=c2(n.payment_method),f={type:i,statut:o,estado_cocina:"no_enviado",payment_status:c,date_creation:new Date().toISOString(),total:n.total??0,subtotal:n.subtotal??0,total_discount:n.total_discount??0,promo_code:n.promo_code||null,applied_promotions:n.applied_promotions?JSON.stringify(n.applied_promotions):null,payment_method:u,payment_receipt_url:n.receipt_url||null,receipt_url:n.receipt_url||null,client_nom:n.client_name||((v=n.clientInfo)==null?void 0:v.nom)||null,client_telephone:n.client_phone||((N=n.clientInfo)==null?void 0:N.telephone)||null,client_adresse:n.client_address||((j=n.clientInfo)==null?void 0:j.adresse)||null},g=await fe.from("orders").insert(f).select(`
        id,
        type,
        table_id,
        table_nom,
        couverts,
        statut,
        estado_cocina,
        date_creation,
        date_envoi_cuisine,
        date_listo_cuisine,
        date_servido,
        payment_status,
        total,
        profit,
        payment_method,
        payment_receipt_url,
        client_nom,
        client_telephone,
        client_adresse,
        receipt_url,
        subtotal,
        total_discount,
        promo_code,
        applied_promotions
      `).single(),x=Ie(g),p=[];if(n.items&&n.items.length>0){const S=n.items.map(C=>({order_id:x.id,produit_id:C.produitRef,nom_produit:C.nom_produit,prix_unitaire:C.prix_unitaire,quantite:C.quantite,excluded_ingredients:C.excluded_ingredients||[],commentaire:C.commentaire||null,estado:"en_attente"})),w=await fe.from("order_items").insert(S).select("*"),T=Ie(w);p.push(...T.map(zg))}const y={id:x.id,type:x.type,table_id:x.table_id??void 0,table_nom:x.table_nom??void 0,couverts:x.couverts??0,statut:x.statut,estado_cocina:x.estado_cocina,date_creation:Sa(x.date_creation)??Date.now(),date_envoi_cuisine:Sa(x.date_envoi_cuisine),date_listo_cuisine:Sa(x.date_listo_cuisine),date_servido:Sa(x.date_servido),payment_status:x.payment_status,items:p,total:Ma(x.total)??0,profit:Ma(x.profit),payment_method:x.payment_method??void 0,payment_receipt_url:x.payment_receipt_url??void 0,receipt_url:x.receipt_url??void 0,subtotal:Ma(x.subtotal),total_discount:Ma(x.total_discount),promo_code:x.promo_code??void 0,applied_promotions:x.applied_promotions?typeof x.applied_promotions=="string"?JSON.parse(x.applied_promotions):x.applied_promotions:void 0};return(x.client_nom||x.client_telephone||x.client_adresse)&&(y.clientInfo={nom:x.client_nom??"",telephone:x.client_telephone??"",adresse:x.client_adresse??void 0}),bt({includeNotifications:!0}),y},logins:{fetchSince:ch,clearBefore:dh,log:oh}};let Yr=null;const Ei=()=>{const[n,i]=h.useState(Yr),[o,c]=h.useState(!0),[u,f]=h.useState(null),g=h.useCallback(async()=>{c(!0);try{const p=await ye.getSiteContent(),y=Ud(p??void 0);Yr=y,i(y),f(null)}catch(p){console.error("Failed to fetch site content",p),Yr=Cn,i(Cn),f(p instanceof Error?p.message:"Impossible de charger le contenu du site.")}finally{c(!1)}},[]),x=h.useCallback(async p=>{const y=await ye.updateSiteContent(p),v=Ud(y);return i(v),Yr=v,v},[]);return h.useEffect(()=>{g()},[g]),{content:n,loading:o,error:u,refresh:g,updateContent:x}},Og=h.createContext(void 0),f2=({children:n})=>{const[i,o]=h.useState(null),[c,u]=h.useState(!0);h.useEffect(()=>{(async()=>{try{const y=localStorage.getItem("oui-oui-tacos-role"),v=localStorage.getItem("oui-oui-tacos-session");if(!y||!v){localStorage.removeItem("oui-oui-tacos-role"),localStorage.removeItem("oui-oui-tacos-session");return}const N=JSON.parse(y),j=JSON.parse(v);if(!(N!=null&&N.id)||j.roleId!==N.id){localStorage.removeItem("oui-oui-tacos-role"),localStorage.removeItem("oui-oui-tacos-session"),o(null);return}const S=await ye.getRoleById(N.id);S?(o(S),localStorage.setItem("oui-oui-tacos-role",JSON.stringify(S)),localStorage.setItem("oui-oui-tacos-session",JSON.stringify({roleId:S.id,authenticatedAt:Date.now()}))):(localStorage.removeItem("oui-oui-tacos-role"),localStorage.removeItem("oui-oui-tacos-session"),o(null))}catch(y){console.error("Failed to restore role:",y),localStorage.removeItem("oui-oui-tacos-role"),localStorage.removeItem("oui-oui-tacos-session"),o(null)}finally{u(!1)}})()},[]);const f=h.useCallback(async p=>{u(!0);try{const y=await ye.loginWithPin(p);if(!y)throw new Error("PIN invalide");return o(y),localStorage.setItem("oui-oui-tacos-role",JSON.stringify(y)),localStorage.setItem("oui-oui-tacos-session",JSON.stringify({roleId:y.id,authenticatedAt:Date.now()})),y}finally{u(!1)}},[]),g=h.useCallback(()=>{o(null),localStorage.removeItem("oui-oui-tacos-role"),localStorage.removeItem("oui-oui-tacos-session")},[]),x=h.useCallback(async()=>{if(i!=null&&i.id)try{const p=await ye.getRoleById(i.id);p?(o(p),localStorage.setItem("oui-oui-tacos-role",JSON.stringify(p)),localStorage.setItem("oui-oui-tacos-session",JSON.stringify({roleId:p.id,authenticatedAt:Date.now()}))):g()}catch(p){console.error("Failed to refresh role:",p)}},[g,i==null?void 0:i.id]);return a.jsx(Og.Provider,{value:{role:i,loading:c,login:f,logout:g,refreshRole:x},children:n})},Fa=()=>{const n=h.useContext(Og);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n},ro=n=>n==="editor"||n==="readonly",Wd=n=>{if(!n)return null;const{homePage:i,permissions:o}=n;if(i&&ro(o==null?void 0:o[i]))return i;const c=na.find(u=>ro(o==null?void 0:o[u.permissionKey]));return c?c.href:null},p2=["a[href]","button:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(","),h2=({isOpen:n,onClose:i,notifications:o,onReportClick:c})=>{const{role:u,logout:f}=Fa(),g=Xs(),x=h.useRef(null),p=h.useRef(null),y=()=>{f(),g("/")},v=u==null?void 0:u.permissions,N=h.useMemo(()=>na.filter(T=>{const C=v==null?void 0:v[T.permissionKey];return ro(C)}),[v]),j=h.useMemo(()=>N.find(T=>T.permissionKey===gs),[N]),S=h.useMemo(()=>N.filter(T=>T.permissionKey!==gs),[N]);h.useEffect(()=>{var Q;if(!n||typeof window<"u"&&window.matchMedia("(min-width: 768px)").matches)return;p.current=document.activeElement;const C=x.current,I=C==null?void 0:C.querySelectorAll(p2);(Q=I==null?void 0:I[0])==null||Q.focus();const L=D=>{if(D.key==="Escape"&&(D.preventDefault(),i()),D.key==="Tab"&&I&&I.length>0){const H=I[0],se=I[I.length-1];D.shiftKey?document.activeElement===H&&(D.preventDefault(),se.focus()):document.activeElement===se&&(D.preventDefault(),H.focus())}};return document.addEventListener("keydown",L),()=>{var D,H;document.removeEventListener("keydown",L),(H=(D=p.current)==null?void 0:D.focus)==null||H.call(D)}},[n,i]);const w=()=>{typeof window<"u"&&window.matchMedia("(min-width: 768px)").matches||i()};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:`fixed inset-0 z-40 bg-black/50 transition-opacity duration-300 md:hidden ${n?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,"aria-hidden":!n,onClick:i}),a.jsxs("aside",{ref:x,className:`app-sidebar fixed inset-y-0 left-0 z-50 flex w-72 flex-col transition-transform duration-300 ease-in-out md:static md:z-auto md:w-64 md:translate-x-0 ${n?"translate-x-0":"-translate-x-full md:translate-x-0"}`,"aria-label":"Navegación principal",children:[a.jsxs("div",{className:"app-sidebar__header",children:[a.jsx("span",{className:"app-sidebar__brand",children:"OUIOUI"}),a.jsx("button",{onClick:i,className:"app-sidebar__close md:hidden","aria-label":"Cerrar el menú",children:a.jsx(fs,{size:20})})]}),a.jsxs("div",{className:"app-sidebar__content",children:[a.jsx("div",{className:"app-sidebar__scroll-region",children:a.jsx("nav",{className:"app-sidebar__nav",children:S.map(T=>{let C=null;return o&&(T.href==="/para-llevar"&&(o.pendingTakeaway>0||o.readyTakeaway>0)?C=a.jsxs("span",{className:"app-sidebar__badge-group",children:[o.pendingTakeaway>0&&a.jsx("span",{className:"app-sidebar__badge app-sidebar__badge--danger",title:`${o.pendingTakeaway} por validar`,children:o.pendingTakeaway}),o.readyTakeaway>0&&a.jsx("span",{className:"app-sidebar__badge app-sidebar__badge--success",title:`${o.readyTakeaway} listo(s)`,children:o.readyTakeaway})]}):T.href==="/ventes"&&o.readyForService>0?C=a.jsx("span",{className:"app-sidebar__badge-group",children:a.jsx("span",{className:"app-sidebar__badge app-sidebar__badge--danger",title:`${o.readyForService} pedido(s) listo(s)`,children:o.readyForService})}):T.href==="/cocina"&&o.kitchenOrders>0?C=a.jsx("span",{className:"app-sidebar__badge-group",children:a.jsx("span",{className:"app-sidebar__badge app-sidebar__badge--danger",children:o.kitchenOrders})}):T.href==="/ingredients"&&o.lowStockIngredients>0&&(C=a.jsx("span",{className:"app-sidebar__badge-group",children:a.jsx("span",{className:"app-sidebar__badge app-sidebar__badge--danger",children:o.lowStockIngredients})}))),a.jsxs(Kp,{to:T.href,onClick:w,className:({isActive:I})=>`app-sidebar__nav-link${I?" is-active":""}`,children:[a.jsx(T.icon,{size:22}),a.jsx("span",{children:T.name}),C]},T.name)})})}),a.jsxs("div",{className:"app-sidebar__section",children:[j&&a.jsxs(Kp,{to:j.href,onClick:w,className:({isActive:T})=>`app-sidebar__action${T?" is-active":""}`,children:[a.jsx(j.icon,{size:22}),a.jsx("span",{className:"font-semibold",children:j.name})]}),a.jsxs("button",{onClick:()=>{c(),w()},className:"app-sidebar__action",children:[a.jsx(ig,{size:22}),a.jsx("span",{className:"font-semibold",children:"Reporte"})]}),a.jsxs("button",{onClick:y,className:"app-sidebar__action app-sidebar__action--logout",children:[a.jsx(dv,{size:22}),a.jsx("span",{className:"font-semibold",children:"Cerrar sesión"})]})]})]})]})]})},qt=16,zt=({isOpen:n,onClose:i,title:o,children:c,size:u="md",anchor:f=null,boundary:g=null})=>{const x={xs:"max-w-xs",sm:"max-w-sm",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",half:""},p=h.useId(),y=h.useRef(null),[v,N]=h.useState(null);if(h.useLayoutEffect(()=>{if(!n){N(null);return}const W=()=>{if(!y.current)return;const G=y.current.getBoundingClientRect(),{innerWidth:Z,innerHeight:A}=window,K=g?{top:Math.max(g.top+qt,qt),left:Math.max(g.left+qt,qt),right:Math.min(g.right-qt,Z-qt),bottom:Math.min(g.bottom-qt,A-qt)}:{top:qt,left:qt,right:Z-qt,bottom:A-qt},q=Math.max(K.right-K.left,0),le=Math.max(K.bottom-K.top,0),_=Z/2,E=A/2;let z=_-G.width/2;G.width>q?z=K.left:z=Math.max(K.left,Math.min(z,K.right-G.width));let P=E-G.height/2;G.height>le?P=K.top:P=Math.max(K.top,Math.min(P,K.bottom-G.height)),N({top:P,left:z})};let X=window.requestAnimationFrame(W);const re=()=>{window.cancelAnimationFrame(X),X=window.requestAnimationFrame(W)};return window.addEventListener("resize",re),window.addEventListener("scroll",re,!0),()=>{window.cancelAnimationFrame(X),window.removeEventListener("resize",re),window.removeEventListener("scroll",re,!0)}},[f,g,n]),h.useEffect(()=>{if(!n)return;const W=X=>{X.key==="Escape"&&(X.preventDefault(),i())};return window.addEventListener("keydown",W),()=>{window.removeEventListener("keydown",W)}},[n,i]),!n)return null;const j=typeof window<"u"?window.innerWidth:null,S=typeof window<"u"?window.innerHeight:null,w=j!==null?Math.max(j-qt*2,200):null,T=S!==null?Math.max(S-qt*2,200):null,C=g!==null?Math.max(g.width-qt*2,200):null,I=g!==null?Math.max(g.height-qt*2,200):null,L=C!==null&&w!==null?Math.min(C,w):C??w,Q=I!==null&&T!==null?Math.min(I,T):I??T,D=g&&typeof L=="number"?Math.min(Math.max(g.width*.6,320),L):g?Math.max(g.width*.6,320):null,H={position:"fixed",maxHeight:typeof Q=="number"?`${Math.max(Q,200)}px`:`calc(100vh - ${qt*2}px)`};u==="half"?(H.width="calc(100vw - 32px)",H.maxWidth="calc(100vw - 32px)",H.minWidth="320px"):D!==null?(H.width=`${D}px`,H.maxWidth=`${D}px`):H.maxWidth=typeof L=="number"?`${Math.max(L,260)}px`:`calc(100vw - ${qt*2}px)`;const se=v?{top:v.top,left:v.left}:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"};return a.jsxs("div",{className:"fixed inset-0 z-50",children:[a.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:i}),a.jsxs("div",{ref:y,role:"dialog","aria-modal":"true","aria-labelledby":p,className:`fixed flex flex-col overflow-hidden rounded-2xl bg-white shadow-2xl ${f&&g?"w-full max-w-none":u==="half"?"w-full lg:!w-[50vw] lg:!max-w-[50vw]":x[u]} sm:max-h-[90vh] focus:outline-none`,style:{...H,...se},onClick:W=>W.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 bg-white/80 px-4 py-3 sm:px-6",children:[a.jsx("h3",{id:p,className:"text-[clamp(1.05rem,2.2vw,1.4rem)] font-semibold leading-snug text-slate-900 break-words text-balance whitespace-normal [hyphens:auto]",children:o}),a.jsx("button",{type:"button",onClick:i,className:"rounded-full p-1.5 text-slate-500 transition-colors hover:bg-slate-100 hover:text-slate-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-500","aria-label":"Fermer la fenêtre modale",children:a.jsx(fs,{size:20})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-5 sm:px-6 sm:py-6",children:c})]})]})},g2=new Intl.NumberFormat("es-CO",{maximumFractionDigits:0}),x2=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0});function Dg(n){return Number.isFinite(n)?Math.round(n):0}function bi(n){return g2.format(Dg(n))}function me(n){return x2.format(Dg(n))}const Cd=({icon:n,label:i,value:o})=>a.jsxs("div",{className:"flex flex-col items-start gap-3 rounded-2xl border border-slate-200 bg-slate-50/80 p-4 shadow-sm sm:flex-row sm:items-center",children:[a.jsx("div",{className:"rounded-full bg-brand-primary/20 p-2 text-brand-primary sm:p-3",children:n}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500 sm:text-sm",children:i}),a.jsx("div",{className:"text-[clamp(1.1rem,2.5vw,1.6rem)] font-bold text-slate-800",children:o})]})]}),b2=({isOpen:n,onClose:i})=>{const[o,c]=h.useState(null),[u,f]=h.useState(!0),[g,x]=h.useState(null);h.useEffect(()=>{n&&(async()=>{f(!0),x(null);try{const S=await ye.generateDailyReport();c(S)}catch(S){console.error("Error al generar el informe diario",S),c(null),x("No fue posible generar el reporte diario. Intenta nuevamente más tarde.")}finally{f(!1)}})()},[n]);const p=j=>{const S=new Map;return j.forEach(w=>{const T=new Date(w.loginAt).toLocaleTimeString("es-CO",{hour:"2-digit",minute:"2-digit"}),C=S.get(w.roleName)??[];C.push(T),S.set(w.roleName,C)}),S},y=j=>{const S=[];S.push("*REPORTE OUIOUITACOS*"),S.push(`Generado el: ${new Date(j.generatedAt).toLocaleString("es-CO")}`),S.push(`Periodo: desde ${new Date(j.startDate).toLocaleString("es-CO")}`),S.push("---"),S.push("*Estadísticas del día*");const w=j.ventesDuJour+(j.totalPromotionsApplied??0);if(S.push(`- Ventas: *${me(j.ventesDuJour)}*`),S.push(`- Total facturado: *${me(w)}*`),S.push(`- Clientes: *${j.clientsDuJour}* (Sala: ${j.clientsSurPlace??0} | En línea: ${j.clientsEnLigne??0})`),S.push(`- Ticket promedio: *${me(j.panierMoyen)}*`),S.push(`- Total promociones aplicadas: *${me(j.totalPromotionsApplied??0)}*`),S.push("---"),S.push("*Productos vendidos*"),j.soldProducts.length===0?S.push("Ningún producto vendido."):j.soldProducts.forEach(T=>{S.push(`
_${T.categoryName}_`),T.products.forEach(C=>{S.push(`  - ${C.quantity}x ${C.name} (${me(C.totalSales)})`)})}),S.push("---"),S.push("*Inicios de sesión desde las 05:00*"),j.roleLoginsUnavailable)S.push("Inicios de sesión no disponibles en este dispositivo.");else{const T=p(j.roleLogins);T.size===0?S.push("No hay inicios de sesión registrados."):T.forEach((C,I)=>{S.push(`- ${I}: ${C.join(", ")}`)})}return S.push("---"),S.push("*Inventario bajo*"),j.lowStockIngredients.length===0?S.push("No hay ingredientes con inventario bajo."):j.lowStockIngredients.forEach(T=>{S.push(`- ${T.nom} (${T.stock_actuel} / ${T.stock_minimum} ${T.unite})`)}),encodeURIComponent(S.join(`
`))},v=()=>{if(!o)return;const S=`https://wa.me/?text=${y(o)}`;window.open(S,"_blank"),i()},N=o?o.ventesDuJour+(o.totalPromotionsApplied??0):0;return a.jsx(zt,{isOpen:n,onClose:i,title:"Reporte diario",size:"half",children:a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"max-h-[60vh] overflow-y-auto",children:[u&&a.jsx("p",{children:"Generando el reporte..."}),!u&&g&&a.jsx("div",{className:"mb-4 rounded-md border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:g}),!u&&!o&&!g&&a.jsx("p",{className:"text-red-500",children:"No fue posible generar el reporte."}),!u&&o&&a.jsxs("div",{className:"space-y-6",children:[o.roleLoginsUnavailable&&a.jsxs("div",{className:"rounded-md border border-yellow-200 bg-yellow-50 p-3 text-sm text-yellow-800 flex items-start gap-2",children:[a.jsx(Oa,{className:"mt-0.5 h-4 w-4"}),a.jsx("span",{children:"Los inicios de sesión de los roles no están disponibles en este dispositivo (almacenamiento local inaccesible)."})]}),a.jsxs("div",{className:"text-center border-b pb-4",children:[a.jsx("h2",{className:"font-bold text-brand-secondary text-[clamp(1.5rem,3.5vw,2rem)]",children:"Reporte OUIOUITACOS"}),a.jsxs("p",{className:"text-gray-500 text-sm",children:["Generado el ",new Date(o.generatedAt).toLocaleString("es-CO")]}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Datos desde ",new Date(o.startDate).toLocaleString("es-CO")]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[a.jsx(Cd,{icon:a.jsx(oo,{}),label:"Ventas del día",value:me(o.ventesDuJour)}),a.jsx(Cd,{icon:a.jsx(Rd,{}),label:"Clientes del día",value:a.jsxs(a.Fragment,{children:[o.clientsDuJour,a.jsxs("span",{className:"mt-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:["Salle : ",o.clientsSurPlace??0," • En ligne : ",o.clientsEnLigne??0]})]})}),a.jsx(Cd,{icon:a.jsx(dg,{}),label:"Ticket promedio",value:me(o.panierMoyen)})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2 text-gray-800",children:[a.jsx(Qs,{size:20})," Productos vendidos"]}),a.jsxs("div",{className:"space-y-4",children:[o.soldProducts.map(j=>a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-brand-primary text-sm",children:j.categoryName}),a.jsx("ul",{className:"list-disc list-inside pl-2 text-gray-700 text-sm",children:j.products.map(S=>a.jsxs("li",{children:[S.quantity,"x ",S.name," - ",a.jsx("span",{className:"font-semibold",children:me(S.totalSales)})]},S.id))})]},j.categoryName)),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white px-3 py-2 text-slate-700 shadow-sm",children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide",children:"Total facturado"}),a.jsx("p",{className:"mt-1 text-xl font-bold",children:me(N)})]}),a.jsxs("div",{className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-emerald-700 shadow-sm",children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide",children:"Promotions appliquées"}),a.jsx("p",{className:"mt-1 text-xl font-bold",children:me(o.totalPromotionsApplied??0)})]})]})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2 text-gray-800",children:[a.jsx(ov,{size:20})," Inicios de sesión desde las 05:00"]}),o.roleLoginsUnavailable?a.jsx("p",{className:"text-gray-500 text-sm",children:"Inicios de sesión no disponibles: no es posible acceder al almacenamiento local."}):(()=>{const j=p(o.roleLogins);return j.size===0?a.jsx("p",{className:"text-gray-500 text-sm",children:"No hay inicios de sesión registrados desde las 05:00."}):a.jsx("ul",{className:"space-y-2",children:Array.from(j.entries()).map(([S,w])=>a.jsxs("li",{className:"flex justify-between items-center bg-slate-100 p-2 rounded-md text-sm",children:[a.jsx("span",{className:"font-semibold text-gray-800",children:S}),a.jsx("span",{className:"text-xs text-gray-600",children:w.join(", ")})]},S))})})()]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2 text-gray-800",children:[a.jsx(Oa,{className:"text-orange-500",size:20})," Ingredientes con inventario bajo"]}),o.lowStockIngredients.length>0?a.jsx("ul",{className:"space-y-1",children:o.lowStockIngredients.map(j=>a.jsxs("li",{className:"flex justify-between items-center bg-orange-50 p-2 rounded-md text-orange-800 text-sm",children:[a.jsx("span",{children:j.nom}),a.jsxs("span",{className:"font-bold",children:[j.stock_actuel," / ",j.stock_minimum," ",j.unite]})]},j.id))}):a.jsx("p",{className:"text-gray-500 text-sm",children:"No hay ingredientes con inventario bajo."})]})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t mt-4",children:[a.jsx("button",{onClick:i,className:"w-full sm:w-auto bg-gray-200 text-gray-800 font-bold py-2.5 px-4 rounded-lg hover:bg-gray-300 transition text-sm",children:"Cerrar"}),a.jsxs("button",{onClick:v,disabled:u||!o,className:"w-full sm:w-auto bg-green-500 text-white font-bold py-2.5 px-4 rounded-lg hover:bg-green-600 transition flex items-center justify-center gap-2 disabled:bg-gray-400 disabled:cursor-not-allowed text-sm",children:[a.jsx(og,{size:18})," Enviar por WhatsApp"]})]})]})})},y2=()=>{const[n,i]=h.useState(!1),{role:o}=Fa(),[c,u]=h.useState(null),[f,g]=h.useState(!1),x=()=>i(!0),p=()=>i(!1);return h.useEffect(()=>{const y=async()=>{try{const N=await ye.getNotificationCounts();u(N)}catch(N){console.error("Failed to fetch notifications",N)}};y();const v=ye.notifications.subscribe("notifications_updated",y);return()=>{v()}},[]),h.useEffect(()=>{if(typeof window>"u")return;const y=()=>{window.innerWidth>=768&&i(!1)};return window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[]),a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"app-shell",children:[a.jsx(h2,{isOpen:n,onClose:p,notifications:c,onReportClick:()=>g(!0)}),a.jsxs("div",{className:"app-main",children:[a.jsxs("header",{className:"app-header",children:[a.jsx("button",{type:"button",onClick:x,className:"app-header__menu-button md:hidden","aria-label":"Abrir el menú",children:a.jsx(rg,{size:24})}),a.jsxs("h1",{className:"app-header__title",children:["Bienvenido, ",o==null?void 0:o.name]}),a.jsx("div",{className:"app-header__spacer md:hidden","aria-hidden":"true"})]}),a.jsx("main",{className:"app-content",children:a.jsx(gb,{})})]})]}),a.jsx(b2,{isOpen:f,onClose:()=>g(!1)})]})},v2=n=>{try{const i=localStorage.getItem("customer-order-history"),o=i?JSON.parse(i):[],c=o.findIndex(f=>f.id===n.id);c!==-1&&o.splice(c,1),o.unshift(n);const u=o.slice(0,10);localStorage.setItem("customer-order-history",JSON.stringify(u))}catch(i){console.error("Failed to save order to history:",i)}},j2=({orderId:n,onNewOrderClick:i,variant:o="page"})=>{var z,P,F,R,B;const[c,u]=h.useState(null),[f,g]=h.useState(!0),[x,p]=h.useState(!1),y=[{name:"Enviado",icon:ig,description:"Commande transmise et en attente de validation."},{name:"Validado",icon:jn,description:"La commande est validée par l’équipe."},{name:"En preparacion",icon:by,description:"La cuisine prépare activement votre commande."},{name:"Listo",icon:vv,description:"La commande est prête pour la remise ou la livraison."}];h.useMemo(()=>[{gradient:"from-brand-primary to-brand-primary-dark",border:"border-brand-primary/40",glow:"shadow-[0_10px_25px_rgba(249,168,38,0.35)]"},{gradient:"from-emerald-500 to-emerald-600",border:"border-emerald-200/70",glow:"shadow-[0_10px_25px_rgba(16,185,129,0.35)]"},{gradient:"from-sky-500 to-indigo-600",border:"border-sky-200/70",glow:"shadow-[0_10px_25px_rgba(56,189,248,0.35)]"},{gradient:"from-rose-500 to-red-600",border:"border-rose-200/70",glow:"shadow-[0_10px_25px_rgba(244,114,182,0.35)]"},{gradient:"from-amber-500 to-orange-600",border:"border-amber-200/70",glow:"shadow-[0_10px_25px_rgba(251,191,36,0.35)]"}],[]);const v=h.useCallback(M=>M?M.statut==="finalisee"||M.estado_cocina==="servido"||M.estado_cocina==="entregada"||M.estado_cocina==="listo"?3:M.estado_cocina==="recibido"||M.statut==="en_cours"?2:M.statut==="pendiente_validacion"||M.estado_cocina==="no_enviado"?1:0:-1,[]),N=h.useMemo(()=>v(c),[c,v]),j=h.useRef(null),S=Math.max(y.length-1,1),w=!!(c&&(c.statut==="finalisee"||c.estado_cocina==="servido"||c.estado_cocina==="entregada"||c.estado_cocina==="listo")),T=Math.max(0,N),C=S>0?Math.min(100,(w?S:T)/S*100):100,I=Math.max(0,Math.min(100,C)),L=`${I}-${w?"complete":"active"}`,Q=h.useMemo(()=>({"--tracker-progress-target":`${I}%`}),[I]);h.useEffect(()=>{if(o!=="hero")return;const M=j.current;M&&M.style.setProperty("--tracker-progress-target",`${I}%`)},[o,I]),h.useEffect(()=>{let M=!0,ce=null,de,be=!1;const te=async()=>{if(!be){be=!0;try{const ie=await ye.getCustomerOrderStatus(n);if(M){if(u(ie),(ie==null?void 0:ie.statut)==="finalisee"||(ie==null?void 0:ie.estado_cocina)==="servido"||(ie==null?void 0:ie.estado_cocina)==="entregada"){ce&&(clearInterval(ce),ce=null),v2(ie);const xe=ie.date_servido??Date.now();Fh(ie.id,xe+Yh)}if(!ie){const xe=lo();(xe==null?void 0:xe.orderId)===n&&Vh()}}}catch(ie){console.error("Failed to fetch order status",ie)}finally{M&&g(ie=>ie&&!1),be=!1}}};return g(!0),u(null),te(),ce=setInterval(te,5e3),de=ye.notifications.subscribe("orders_updated",te),()=>{M=!1,ce&&clearInterval(ce),de&&de()}},[n]);const D=o==="page"?"container mx-auto p-4 lg:p-8":"w-full px-4 pt-0 pb-4 sm:pt-1 sm:pb-5 flex justify-center",H=o==="page"?"bg-white/95 p-6 rounded-xl shadow-2xl max-w-2xl mx-auto":"max-w-4xl mx-auto",se="border-t pt-6 mt-6 space-y-4 relative md:w-1/2 md:mx-auto";if(f)return a.jsx("div",{className:D,children:"Chargement du suivi de commande..."});if(!c)return o==="hero"?null:a.jsx("div",{className:D,children:a.jsxs("div",{className:H,children:[a.jsx("h2",{className:"text-2xl font-bold mb-4 text-red-600",children:"Commande non trouvée"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Nous n'avons pas pu retrouver votre commande."}),a.jsx("button",{onClick:i,className:"bg-brand-primary text-brand-secondary font-bold py-3 px-6 rounded-lg hover:bg-yellow-400 transition",children:"Passer une nouvelle commande"})]})});c.subtotal??c.total;const W=c.total_discount??0,X=(((z=c.applied_promotions)==null?void 0:z.length)??0)>0,re=c.type==="a_emporter",G=((P=c.clientInfo)==null?void 0:P.nom)??c.client_name??"",Z=((F=c.clientInfo)==null?void 0:F.telephone)??c.client_phone??"",A=((R=c.clientInfo)==null?void 0:R.adresse)??c.client_address??"",K=!!(G||Z||A),q=M=>M.type==="free_shipping"?a.jsx(pg,{size:16}):M.type==="percentage"?a.jsx(_l,{size:16}):M.type==="buy_x_get_y"?a.jsx(Dd,{size:16}):a.jsx(Si,{size:16}),le=X?c.applied_promotions.map((M,ce)=>{const de=typeof M.config=="object"&&M.config!==null?M.config:void 0;de==null||de.promo_code;const be=M.visuals||null,te=(be==null?void 0:be.badge_bg_color)||"#4CAF50",ie=M.discount_amount||0;return a.jsxs("div",{className:"flex items-center rounded-xl shadow-lg transition-transform hover:scale-[1.01] overflow-hidden h-11",style:{backgroundColor:te},"aria-label":`Promotion ${M.name}`,children:[a.jsx("div",{className:"flex items-center justify-center w-11 flex-shrink-0",style:{color:(be==null?void 0:be.badge_color)||"#FFFFFF"},children:q(M)}),a.jsxs("div",{className:"flex-1 px-2.5 flex items-center justify-between min-w-0 gap-2",children:[a.jsx("p",{className:"font-bold text-white text-sm sm:text-base truncate",children:M.name}),a.jsxs("span",{className:"text-sm sm:text-base font-bold text-white whitespace-nowrap shrink-0",children:["-",me(ie)]})]})]},`${M.promotion_id}-${M.name}`)}):null,_=le?a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:`text-sm font-semibold ${o==="hero"?"text-green-300":"text-green-700"}`,children:"Promotions appliquées"}),a.jsx("div",{className:"space-y-3",children:le})]}):null,E=((B=c.items)==null?void 0:B.length)??0;return o==="hero"?a.jsxs("div",{className:D,children:[a.jsxs("div",{className:"relative w-full max-w-4xl overflow-hidden rounded-3xl border border-white/15 bg-gradient-to-br from-slate-900/90 via-slate-900/75 to-slate-900/60 p-6 text-white shadow-2xl backdrop-blur-xl sm:p-8",children:[a.jsxs("div",{className:"pointer-events-none absolute inset-0 opacity-70",children:[a.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.18),_transparent_65%)]"}),a.jsx("div",{className:"absolute -bottom-32 right-0 h-64 w-64 rounded-full bg-gradient-to-br from-amber-400/30 via-orange-500/20 to-red-500/30 blur-3xl"})]}),a.jsxs("div",{className:"relative flex flex-col gap-6",children:[w&&a.jsx("div",{className:"pointer-events-none absolute -top-6 right-4 sm:right-8",children:a.jsx("div",{className:"relative",style:{transform:"rotate(10deg)"},children:a.jsx("div",{className:"stamp-container scale-75 sm:scale-90",children:a.jsx("div",{className:"stamp-border",children:a.jsxs("div",{className:"stamp-inner",children:[a.jsx("span",{className:"stamp-text",children:"PEDIDO"}),a.jsx("span",{className:"stamp-text stamp-text-large",children:"LISTO"})]})})})})}),a.jsx("div",{className:"flex flex-col items-center gap-2 text-center",children:a.jsxs("h2",{className:"text-3xl font-bold text-center text-white sm:text-4xl",children:["Commande #",c.id.slice(-6)]})}),a.jsx("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-4",children:y.map((M,ce)=>{const de=ce===N,be=ce===y.length-1,te=ce<N||be&&w,ie=`tracker-step-card rounded-2xl border p-3 sm:p-4 transition-all ${te?"bg-gradient-to-br from-emerald-400/80 to-emerald-600/80 border-white/35 text-white shadow-lg shadow-emerald-500/25":de?"bg-gradient-to-br from-amber-400/95 via-orange-500/90 to-red-500/95 border-white/30 text-white shadow-xl shadow-orange-500/25 tracker-step-active":"bg-white/10 border-white/10 text-white/70 backdrop-blur-sm hover:bg-white/15 hover:border-white/20"} ${de?"scale-[1.02]":""}`,xe=`tracker-step-icon-wrapper relative flex h-16 w-16 sm:h-20 sm:w-20 items-center justify-center rounded-2xl bg-black/25 ${te||de?"text-white":"text-white/70"}`;return a.jsx("div",{className:ie,"aria-current":de?"step":void 0,children:a.jsxs("div",{className:"flex flex-col items-center text-center gap-2 sm:gap-3",children:[a.jsx("p",{className:`text-xs sm:text-sm font-semibold tracking-wide ${te||de?"text-white":"text-white/70"}`,children:M.name}),a.jsxs("div",{className:xe,children:[a.jsx(M.icon,{className:"tracker-step-icon h-10 w-10 sm:h-12 sm:w-12"}),te&&a.jsx(jn,{className:"absolute -top-2 -right-2 h-5 w-5 sm:h-6 sm:w-6 text-white drop-shadow"})]}),a.jsx("p",{className:`text-[11px] sm:text-xs leading-snug ${te||de?"text-white/80":"text-white/60"}`,children:M.description})]})},M.name)})}),a.jsx("style",{children:`
                            .tracker-step-card {
                                position: relative;
                                overflow: hidden;
                                border-radius: 1.25rem;
                            }

                            .tracker-step-card::after {
                                content: '';
                                position: absolute;
                                inset: 0;
                                border-radius: inherit;
                                border: 1px solid rgba(255, 255, 255, 0.18);
                                opacity: 0.35;
                                pointer-events: none;
                            }

                            .tracker-step-active {
                                animation: tracker-step-blink 1.6s ease-in-out infinite;
                            }

                            .tracker-step-active::after {
                                border-color: rgba(255, 255, 255, 0.45);
                                opacity: 0.75;
                            }

                            .tracker-step-icon {
                                transition: transform 0.4s ease;
                            }

                            .tracker-step-active .tracker-step-icon {
                                animation: tracker-step-icon-pulse 1.6s ease-in-out infinite;
                            }

                            @keyframes tracker-step-blink {
                                0%,
                                100% {
                                    transform: translateY(0);
                                    box-shadow: 0 18px 36px rgba(234, 179, 8, 0.35);
                                }
                                50% {
                                    transform: translateY(-2px);
                                    box-shadow: 0 22px 40px rgba(251, 191, 36, 0.45);
                                }
                            }

                            @keyframes tracker-step-icon-pulse {
                                0%,
                                100% {
                                    transform: scale(1);
                                }
                                50% {
                                    transform: scale(1.15);
                                }
                            }

                            .tracker-progress-container {
                                position: relative;
                                height: 10px;
                                border-radius: 9999px;
                                overflow: hidden;
                                background: linear-gradient(90deg, rgba(255, 255, 255, 0.25), rgba(148, 163, 184, 0.18));
                                box-shadow: inset 0 1px 3px rgba(15, 23, 42, 0.35);
                                margin-top: 0.25rem;
                            }

                            .tracker-progress-fill {
                                position: absolute;
                                inset: 0;
                                width: 0;
                                display: flex;
                                align-items: center;
                                justify-content: flex-end;
                                border-radius: inherit;
                                background: linear-gradient(90deg, rgba(249, 168, 38, 0.8), rgba(239, 68, 68, 0.95));
                                animation: tracker-progress-advance 1.2s ease forwards;
                                animation-delay: 0.05s;
                            }

                            .tracker-progress-fill-complete {
                                background: linear-gradient(90deg, rgba(34, 197, 94, 0.85), rgba(56, 189, 248, 0.9));
                            }

                            .tracker-progress-fill-hero {
                                animation: tracker-progress-loop 3s ease-in-out infinite;
                                animation-delay: 0s;
                            }

                            .tracker-progress-fill-hero.tracker-progress-fill-complete {
                                animation: tracker-progress-loop 3s ease-in-out infinite;
                            }

                            .tracker-progress-fill::after {
                                content: '';
                                position: absolute;
                                inset: 0;
                                background: linear-gradient(90deg, rgba(255, 255, 255, 0.25), transparent 55%);
                                mix-blend-mode: screen;
                            }

                            .tracker-progress-glow {
                                position: absolute;
                                right: -14px;
                                top: 50%;
                                width: 28px;
                                height: 28px;
                                transform: translateY(-50%);
                                background: radial-gradient(circle at center, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0));
                                pointer-events: none;
                            }

                            @keyframes tracker-progress-advance {
                                0% {
                                    width: 0;
                                }
                                100% {
                                    width: var(--tracker-progress-target);
                                }
                            }

                            @keyframes tracker-progress-loop {
                                0% {
                                    width: 0;
                                }
                                60% {
                                    width: var(--tracker-progress-target);
                                }
                                75% {
                                    width: var(--tracker-progress-target);
                                }
                                100% {
                                    width: 0;
                                }
                            }
                        `}),a.jsx("div",{className:"tracker-progress-container tracker-progress-hero",children:a.jsx("div",{className:`tracker-progress-fill tracker-progress-fill-hero ${w?"tracker-progress-fill-complete":""}`,ref:j,style:Q,children:a.jsx("span",{className:"tracker-progress-glow"})},`hero-progress-${L}`)}),a.jsxs("div",{className:"rounded-2xl bg-black/25 p-4 sm:p-5",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-white/60",children:"Informations"}),c.receipt_url&&a.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-white/70",children:"Comprobante de pago"})]}),a.jsxs("div",{className:"mt-3 flex flex-col gap-4 text-sm sm:flex-row sm:items-start sm:justify-between",children:[a.jsx("div",{className:"space-y-2",children:K?a.jsxs(a.Fragment,{children:[G&&a.jsxs("div",{className:"flex items-center gap-2 text-white/80",children:[a.jsx(ji,{size:16}),a.jsx("span",{className:"truncate",title:G,children:G})]}),Z&&a.jsxs("div",{className:"flex items-center gap-2 text-white/80",children:[a.jsx(xl,{size:16}),a.jsx("span",{className:"truncate",title:Z,children:Z})]}),A&&a.jsxs("div",{className:"flex items-center gap-2 text-white/80",children:[a.jsx(wn,{size:16}),a.jsx("span",{className:"truncate",title:A,children:A})]})]}):a.jsx("p",{className:"text-white/70",children:"Aucune information client requise."})}),a.jsx("div",{className:"flex flex-col items-start gap-3 text-sm sm:min-w-[12rem] sm:items-end sm:text-right",children:c.receipt_url&&a.jsx("div",{className:"flex flex-col items-start gap-2 sm:items-end",children:a.jsx("button",{type:"button",onClick:()=>p(!0),className:"group relative inline-flex focus:outline-none","aria-label":"Ouvrir le justificatif de paiement",children:a.jsxs("div",{className:"relative overflow-hidden rounded-xl border border-white/20 bg-black/40 shadow-lg",children:[a.jsx("img",{src:c.receipt_url,alt:"Aperçu du justificatif",className:"h-20 w-28 object-cover transition duration-500 ease-out group-hover:scale-105 sm:h-24 sm:w-32"}),a.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center bg-black/40 opacity-0 transition duration-300 group-hover:opacity-100",children:a.jsx(Wr,{size:20,className:"text-white"})})]})})})})]})]}),a.jsxs("div",{className:"rounded-2xl bg-black/20 p-4 sm:p-5",children:[a.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between text-xs font-semibold uppercase tracking-wide text-white/60",children:[a.jsx("span",{children:"Résumé"}),a.jsxs("span",{children:["Articles : ",E]})]}),a.jsx("div",{className:"mt-4 space-y-3 pr-1 text-sm",children:c.items&&c.items.length>0?c.items.map(M=>{const de=M.nom_produit==="Domicilio"&&M.prix_unitaire===0,be=(()=>{const te=M.description;return typeof te=="string"&&te.trim().length>0?te.trim():null})();return a.jsx("div",{className:"rounded-xl border border-gray-200 bg-white px-4 py-1 sm:px-5 sm:py-2",children:a.jsx("div",{className:"flex flex-col gap-4 items-center",children:a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-4",children:["                                                            ",a.jsx("span",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-xl bg-gray-200 text-base font-semibold text-black shadow-inner shadow-gray-400 sm:h-10 sm:w-10 sm:text-lg",children:M.quantite}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-base font-semibold text-black sm:text-lg",children:M.nom_produit}),be&&a.jsx("p",{className:"text-xs text-gray-600",children:be}),M.commentaire&&a.jsxs("p",{className:"text-xs italic text-amber-200/80",children:["“",M.commentaire,"”"]})]})]}),a.jsx("div",{className:"flex items-center rounded-full bg-gray-100 px-3 py-1 text-sm font-bold text-gray-800 shadow-sm",children:de?a.jsx("span",{className:"text-emerald-600",children:"GRATUIT"}):me(M.prix_unitaire*M.quantite)})]})})},M.id)}):a.jsx("p",{className:"text-white/70",children:"Aucun article enregistré pour cette commande."})}),le?a.jsxs("div",{className:"mt-6 space-y-3",children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-white/60",children:"Promotions appliquées"}),a.jsx("div",{className:"space-y-3",children:le})]}):null,W>0&&a.jsxs("div",{className:"mt-5 flex items-center justify-between rounded-xl bg-black/30 px-3 py-2 text-sm font-semibold text-emerald-300 border border-emerald-500/20 shadow-lg",children:[a.jsx("span",{children:"Réductions totales"}),a.jsxs("span",{children:["- ",me(W)]})]}),a.jsxs("div",{className:"mt-4 flex items-center justify-between border-t border-white/20 pt-4 text-xl font-extrabold text-white",children:[a.jsx("span",{children:"Total de la commande"}),a.jsx("span",{children:me(c.total)})]})]}),a.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[w?a.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-emerald-500/20 px-4 py-2 text-sm font-semibold text-emerald-200",children:[a.jsx(jn,{size:16})," Commande prête"]}):a.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-white/60",children:"Nous préparons votre commande"}),a.jsx("button",{onClick:w?i:void 0,disabled:!w,className:`inline-flex items-center gap-2 rounded-full px-5 py-2 text-sm font-semibold transition ${w?"bg-white text-amber-600 shadow-lg hover:bg-white/90":"cursor-not-allowed bg-white/10 text-white/50"}`,children:"Revenir au menu"})]})]})]}),a.jsx(zt,{isOpen:x,onClose:()=>p(!1),title:"Justificatif de Paiement",children:c.receipt_url?a.jsx("img",{src:c.receipt_url,alt:"Justificatif",className:"h-auto w-full rounded-md"}):a.jsx("p",{children:"Aucun justificatif fourni."})})]}):a.jsxs("div",{className:D,children:[a.jsxs("div",{className:H,children:[a.jsx("h2",{className:`text-3xl font-bold text-center mb-2 ${o==="hero"?"text-white":"text-gray-800"}`,children:"Suivi de votre commande"}),a.jsxs("p",{className:`text-center font-semibold mb-8 ${o==="hero"?"text-gray-300":"text-gray-500"}`,children:["Commande #",c.id.slice(-6)]}),a.jsxs("div",{className:"mb-8",children:[a.jsx("div",{className:"mb-6 tracker-progress-container tracker-progress-default",children:a.jsx("div",{className:`tracker-progress-fill ${w?"tracker-progress-fill-complete":""}`,style:Q,children:a.jsx("span",{className:"tracker-progress-glow"})},`page-progress-${L}`)}),a.jsx("div",{className:`flex items-start sm:items-center justify-between gap-3 sm:gap-4 px-2 ${y.length>3?"flex-wrap sm:flex-nowrap":""}`,children:y.map((M,ce)=>{const de=ce===N,be=ce===y.length-1,te=ce<N||be&&w;return a.jsxs("div",{className:"flex flex-1 items-center gap-2 sm:gap-4",children:[a.jsxs("div",{className:"flex flex-col items-center text-center gap-2 sm:gap-3",children:[a.jsx("p",{className:`text-xs sm:text-sm font-semibold ${te||de?"text-gray-900":"text-gray-400"}`,children:M.name}),a.jsxs("div",{className:`relative flex h-14 w-14 sm:h-16 sm:w-16 items-center justify-center rounded-full border-4 transition-all duration-500 ${te?"bg-green-500 border-green-300":de?"bg-blue-600 border-blue-400 animate-pulse":"bg-gray-400 border-gray-300"}`,children:[a.jsx(M.icon,{className:"h-8 w-8 text-white sm:h-9 sm:w-9"}),te&&a.jsx(jn,{className:"absolute -top-2 -right-2 h-5 w-5 text-emerald-100 drop-shadow"})]}),a.jsx("p",{className:`text-[11px] sm:text-xs leading-snug ${te||de?"text-gray-600":"text-gray-400"}`,children:M.description})]}),ce<y.length-1&&a.jsx("div",{className:"flex flex-1 items-center","aria-hidden":!0,children:a.jsxs("div",{className:`tracker-gauge-wrapper ${o==="hero"?"tracker-gauge-hero":"tracker-gauge-default"} ${te?"tracker-gauge-wrapper-complete":""}`,children:[a.jsx("span",{className:`tracker-gauge-fill ${te?"tracker-gauge-fill-complete":de?"tracker-gauge-fill-active":"tracker-gauge-fill-idle"}`}),(de||te)&&a.jsx("span",{className:"tracker-gauge-glow"})]})})]},M.name)})})]}),a.jsx("style",{children:`
                    .tracker-progress-container {
                        position: relative;
                        height: 12px;
                        border-radius: 9999px;
                        overflow: hidden;
                        box-shadow: inset 0 1px 2px rgba(15, 23, 42, 0.12);
                    }

                    .tracker-progress-default {
                        background: linear-gradient(90deg, rgba(229, 231, 235, 0.55), rgba(209, 213, 219, 0.35));
                    }

                    .tracker-progress-hero {
                        background: linear-gradient(90deg, rgba(255, 255, 255, 0.25), rgba(148, 163, 184, 0.15));
                        box-shadow: inset 0 1px 2px rgba(15, 23, 42, 0.25);
                    }

                    .tracker-progress-fill {
                        position: absolute;
                        inset: 0;
                        width: 0;
                        display: flex;
                        align-items: center;
                        justify-content: flex-end;
                        background: linear-gradient(90deg, rgba(249, 168, 38, 0.65), rgba(239, 68, 68, 0.95));
                        border-radius: inherit;
                        animation: tracker-progress-advance 1.2s ease forwards;
                    }

                    .tracker-progress-fill-complete {
                        background: linear-gradient(90deg, rgba(34, 197, 94, 0.75), rgba(56, 189, 248, 0.9));
                    }

                    .tracker-progress-fill::after {
                        content: '';
                        position: absolute;
                        inset: 0;
                        background: linear-gradient(90deg, rgba(255, 255, 255, 0.15), transparent 55%);
                        mix-blend-mode: screen;
                    }

                    .tracker-progress-glow {
                        position: absolute;
                        right: -14px;
                        top: 50%;
                        width: 28px;
                        height: 28px;
                        transform: translateY(-50%);
                        background: radial-gradient(circle at center, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0));
                        pointer-events: none;
                    }

                    @keyframes tracker-progress-advance {
                        0% {
                            width: 0;
                        }
                        100% {
                            width: var(--tracker-progress-target);
                        }
                    }

                    .tracker-gauge-wrapper {
                        position: relative;
                        height: 10px;
                        border-radius: 9999px;
                        overflow: hidden;
                        box-shadow: inset 0 1px 3px rgba(15, 23, 42, 0.12);
                        transition: box-shadow 0.3s ease;
                    }

                    .tracker-gauge-wrapper-complete {
                        box-shadow: inset 0 1px 3px rgba(21, 128, 61, 0.35);
                    }

                    .tracker-gauge-default {
                        background: linear-gradient(90deg, rgba(229, 231, 235, 0.45), rgba(209, 213, 219, 0.25));
                    }

                    .tracker-gauge-hero {
                        background: linear-gradient(90deg, rgba(255, 255, 255, 0.22), rgba(148, 163, 184, 0.12));
                        box-shadow: inset 0 1px 3px rgba(15, 23, 42, 0.4);
                    }

                    .tracker-gauge-fill {
                        position: absolute;
                        inset: 0;
                        transform-origin: left;
                        background-size: 250% 100%;
                        border-radius: inherit;
                    }

                    .tracker-gauge-fill-idle {
                        transform: scaleX(0);
                        background: linear-gradient(90deg, rgba(148, 163, 184, 0.25), rgba(148, 163, 184, 0.15));
                    }

                    .tracker-gauge-fill-active {
                        animation: tracker-gauge-fill-grow 1.2s ease forwards, tracker-gauge-cycle 3.2s linear infinite;
                        background: linear-gradient(90deg, #f97316, #ef4444, #facc15, #f97316);
                    }

                    .tracker-gauge-fill-complete {
                        transform: scaleX(1);
                        animation: tracker-gauge-cycle 4.2s linear infinite;
                        background: linear-gradient(90deg, #22c55e, #0ea5e9, #f97316, #22c55e);
                    }

                    .tracker-gauge-glow {
                        position: absolute;
                        inset: -6px;
                        background: radial-gradient(circle at center, rgba(255, 255, 255, 0.4), rgba(255, 255, 255, 0));
                        animation: tracker-gauge-glow 1.6s ease-in-out infinite;
                        pointer-events: none;
                    }

                    @keyframes tracker-gauge-fill-grow {
                        0% { transform: scaleX(0); }
                        100% { transform: scaleX(1); }
                    }

                    @keyframes tracker-gauge-cycle {
                        0% { background-position: 0% 50%; }
                        100% { background-position: 200% 50%; }
                    }

                    @keyframes tracker-gauge-glow {
                        0%, 100% { opacity: 0.45; }
                        50% { opacity: 0.85; }
                    }

                    .promo-banner {
                        position: relative;
                        isolation: isolate;
                        animation: promo-banner-blink 2.2s ease-in-out infinite;
                    }

                    .promo-banner::before {
                        content: '';
                        position: absolute;
                        inset: 0;
                        background: linear-gradient(120deg, rgba(255, 255, 255, 0.22), rgba(255, 255, 255, 0));
                        opacity: 0.45;
                        pointer-events: none;
                    }

                    .promo-banner > * {
                        position: relative;
                        z-index: 1;
                    }

                    @keyframes promo-banner-blink {
                        0%, 100% {
                            transform: translateY(0) scale(1);
                            filter: brightness(1);
                            opacity: 0.85;
                        }
                        45% {
                            transform: translateY(-2px) scale(1.02);
                            filter: brightness(1.18);
                            opacity: 1;
                        }
                        60% {
                            transform: translateY(0) scale(0.99);
                            filter: brightness(0.92);
                            opacity: 0.55;
                        }
                    }

                    .stamp-container {
                        position: relative;
                        width: 180px;
                        height: 180px;
                        animation: stamp-appear 0.5s ease-out;
                    }
                    
                    @keyframes stamp-appear {
                        0% {
                            transform: scale(0) rotate(-45deg);
                            opacity: 0;
                        }
                        60% {
                            transform: scale(1.1) rotate(0deg);
                        }
                        100% {
                            transform: scale(1) rotate(0deg);
                            opacity: 1;
                        }
                    }
                    
                    .stamp-border {
                        width: 100%;
                        height: 100%;
                        border: 4px solid #dc2626;
                        border-radius: 50%;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        background: rgba(220, 38, 38, 0.05);
                        position: relative;
                        box-shadow: 0 0 0 2px #dc2626;
                    }
                    
                    .stamp-border::before {
                        content: '';
                        position: absolute;
                        top: 0;
                        left: 0;
                        right: 0;
                        bottom: 0;
                        border-radius: 50%;
                        background: repeating-linear-gradient(
                            45deg,
                            transparent,
                            transparent 2px,
                            rgba(220, 38, 38, 0.03) 2px,
                            rgba(220, 38, 38, 0.03) 4px
                        );
                    }
                    
                    .stamp-inner {
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                        text-align: center;
                        z-index: 1;
                    }
                    
                    .stamp-text {
                        font-family: 'Arial Black', 'Arial Bold', sans-serif;
                        font-weight: 900;
                        color: #dc2626;
                        text-transform: uppercase;
                        letter-spacing: 2px;
                        line-height: 1;
                        text-shadow: 
                            1px 1px 0 rgba(220, 38, 38, 0.3),
                            -1px -1px 0 rgba(220, 38, 38, 0.3);
                    }
                    
                    .stamp-text:first-child {
                        font-size: 20px;
                        margin-bottom: 6px;
                    }
                    
                    .stamp-text-large {
                        font-size: 42px;
                        font-weight: 900;
                    }
                    
                    /* Effet de texture grunge */
                    .stamp-border::after {
                        content: '';
                        position: absolute;
                        top: 0;
                        left: 0;
                        right: 0;
                        bottom: 0;
                        border-radius: 50%;
                        background-image: 
                            radial-gradient(circle at 20% 30%, transparent 0%, transparent 2%, rgba(220, 38, 38, 0.1) 2%, transparent 3%),
                            radial-gradient(circle at 80% 70%, transparent 0%, transparent 2%, rgba(220, 38, 38, 0.1) 2%, transparent 3%),
                            radial-gradient(circle at 40% 80%, transparent 0%, transparent 1%, rgba(220, 38, 38, 0.1) 1%, transparent 2%),
                            radial-gradient(circle at 60% 20%, transparent 0%, transparent 1%, rgba(220, 38, 38, 0.1) 1%, transparent 2%);
                        opacity: 0.8;
                    }
                `}),a.jsxs("div",{className:se,children:[w&&a.jsx("div",{className:"absolute top-4 right-4 z-10 pointer-events-none",children:a.jsx("div",{className:"relative",style:{transform:"rotate(15deg)"},children:a.jsx("div",{className:"stamp-container",children:a.jsx("div",{className:"stamp-border",children:a.jsxs("div",{className:"stamp-inner",children:[a.jsx("span",{className:"stamp-text",children:"PEDIDO"}),a.jsx("span",{className:"stamp-text stamp-text-large",children:"LISTO"})]})})})})}),a.jsx("h3",{className:`mt-10 text-xl font-bold ${o==="hero"?"text-white":"text-gray-800"}`,children:"Résumé de la commande"}),re&&K&&a.jsxs("div",{className:`mt-6 rounded-xl border p-4 ${o==="hero"?"border-white/30 bg-white/10 backdrop-blur text-white":"border-gray-200 bg-gray-50 text-gray-700"}`,children:[a.jsx("p",{className:`mb-3 text-sm font-semibold uppercase tracking-wide ${o==="hero"?"text-gray-100":"text-gray-600"}`,children:"Informations Client"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[G&&a.jsxs("div",{className:"flex items-center",children:[a.jsx(ji,{size:16,className:`mr-2 ${o==="hero"?"text-white/80":"text-gray-500"}`}),a.jsx("span",{className:"font-medium whitespace-nowrap truncate",title:G,children:G})]}),Z&&a.jsxs("div",{className:"flex items-center",children:[a.jsx(xl,{size:16,className:`mr-2 ${o==="hero"?"text-white/80":"text-gray-500"}`}),a.jsx("span",{className:"whitespace-nowrap",title:Z,children:Z})]}),A&&a.jsxs("div",{className:"flex items-center",children:[a.jsx(wn,{size:16,className:`mr-2 ${o==="hero"?"text-white/80":"text-gray-500"}`}),a.jsx("span",{className:"truncate",title:A,children:A})]})]}),c.receipt_url&&a.jsxs("button",{onClick:()=>p(!0),className:`mt-4 inline-flex items-center gap-2 text-sm font-semibold underline-offset-2 hover:underline ${o==="hero"?"text-white":"text-blue-500"}`,children:[a.jsx(Wr,{size:16})," Voir le justificatif"]})]}),a.jsx("div",{className:"space-y-2",children:c.items&&c.items.length>0?c.items.map(M=>{const de=M.nom_produit==="Domicilio"&&M.prix_unitaire===0,be=M.description,te=typeof be=="string"&&be.trim().length>0?be.trim():null,ie=typeof M.commentaire=="string"&&M.commentaire.trim().length>0?M.commentaire.trim():null;return a.jsx("div",{className:`flex flex-col gap-2 rounded-lg border-b border-dashed border-gray-200/70 pb-3 pt-2 last:border-b-0 last:pb-0 ${o==="hero"?"text-gray-200":"text-gray-600"}`,children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"text-[clamp(0.95rem,1.8vw,1.1rem)] font-semibold leading-snug text-balance",children:[M.quantite,"x ",M.nom_produit]}),a.jsx("p",{className:`mt-1 text-sm ${o==="hero"?"text-gray-400":"text-gray-500"}`,children:de?"Livraison offerte":`${me(M.prix_unitaire)} /u`}),te&&a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:te}),ie&&a.jsxs("p",{className:"mt-1 text-sm italic text-amber-600",children:["“",ie,"”"]})]}),a.jsx("div",{className:"whitespace-nowrap text-right text-sm font-semibold",children:de?a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[a.jsx("span",{className:"text-xs text-gray-400 line-through",children:me(8e3)}),a.jsx("span",{className:"text-sm font-bold text-green-600",children:"GRATIS"})]}):a.jsx("span",{children:me(M.prix_unitaire*M.quantite)})})]})},M.id)}):a.jsx("p",{className:`${o==="hero"?"text-gray-300":"text-gray-600"}`,children:"Aucun article enregistré pour cette commande."})}),_,W>0&&a.jsxs("div",{className:`mt-4 flex items-center justify-between rounded-lg border px-3 py-2 text-sm font-semibold ${o==="hero"?"border-emerald-300/30 bg-emerald-500/15 text-emerald-100":"border-emerald-200 bg-emerald-50 text-emerald-700"}`,children:[a.jsx("span",{children:"Réductions totales"}),a.jsxs("span",{children:["-",me(W)]})]}),a.jsxs("div",{className:`flex justify-between font-bold text-lg border-t pt-2 ${o==="hero"?"text-white border-gray-500":"text-gray-800"}`,children:[a.jsx("span",{children:"Total"}),a.jsx("span",{children:me(c.total)})]}),!re&&K&&a.jsxs("div",{className:`border-t pt-4 space-y-2 ${o==="hero"?"border-gray-500":""}`,children:[a.jsx("h3",{className:`text-xl font-bold ${o==="hero"?"text-white":"text-gray-800"} mb-2`,children:"Informations Client"}),G&&a.jsxs("div",{className:`flex items-center ${o==="hero"?"text-gray-200":"text-gray-700"}`,children:[a.jsx(ji,{size:16,className:"mr-2"}),a.jsx("span",{className:"whitespace-nowrap truncate",title:G,children:G})]}),Z&&a.jsxs("div",{className:`flex items-center ${o==="hero"?"text-gray-200":"text-gray-700"}`,children:[a.jsx(xl,{size:16,className:"mr-2"}),a.jsx("span",{className:"whitespace-nowrap",title:Z,children:Z})]}),A&&a.jsxs("div",{className:`flex items-center ${o==="hero"?"text-gray-200":"text-gray-700"}`,children:[a.jsx(wn,{size:16,className:"mr-2"}),a.jsx("span",{className:"truncate",title:A,children:A})]}),c.receipt_url&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-medium",children:"Comprobante de pago:"}),a.jsxs("button",{onClick:()=>p(!0),className:"flex items-center text-blue-400 hover:underline",children:[a.jsx(Wr,{size:16,className:"mr-2"}),"Voir"]})]})]})]}),a.jsxs("div",{className:"mt-8 text-center space-y-4",children:[w&&a.jsx("div",{className:"flex justify-center",children:a.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-green-100 px-4 py-2 text-sm font-semibold text-green-700",children:[a.jsx(jn,{size:16})," Pedido listo"]})}),a.jsxs("div",{className:"flex flex-col space-y-4",children:[a.jsx("p",{className:`text-sm ${o==="hero"?"text-gray-300":"text-gray-600"}`,children:"Le statut de votre commande est mis à jour automatiquement."}),a.jsx("button",{onClick:w?i:void 0,disabled:!w,className:`font-bold py-3 px-6 rounded-lg transition ${w?`${o==="hero"?"bg-gray-200 text-gray-800 hover:bg-gray-300":"bg-brand-primary text-brand-secondary hover:bg-brand-primary-dark"} cursor-pointer`:"bg-gray-300 text-gray-500 cursor-not-allowed opacity-50"}`,children:"Volver"})]})]})]}),a.jsx(zt,{isOpen:x,onClose:()=>p(!1),title:"Justificatif de Paiement",children:c.receipt_url?a.jsx("img",{src:c.receipt_url,alt:"Justificatif",className:"w-full h-auto rounded-md"}):a.jsx("p",{children:"Aucun justificatif fourni."})})]})},_2={"font/woff2":"woff2","application/font-woff2":"woff2","application/x-font-woff2":"woff2","font/woff":"woff","application/font-woff":"woff","application/x-font-woff":"woff","application/x-font-ttf":"truetype","font/ttf":"truetype","application/x-font-otf":"opentype","font/otf":"opentype","application/vnd.ms-fontobject":"embedded-opentype","application/x-font-eot":"embedded-opentype","image/svg+xml":"svg"},N2={woff2:"woff2",woff:"woff",ttf:"truetype",otf:"opentype",eot:"embedded-opentype",svg:"svg"},eu=n=>{const i=n.trim();return(i.length>0?i:"Custom Font").replace(/"|'/g,"")},w2=n=>{if(!n)return null;const i=n.toLowerCase();for(const[o,c]of Object.entries(_2))if(i.includes(o))return c;return null},S2=n=>{const o=n.toLowerCase().match(/\.([a-z0-9]+)(?:\?|#|$)/);if(!o)return null;const c=o[1];return N2[c]??null},C2=n=>{const i=w2(n.format);return i||S2(n.url)},k2=n=>{const i=eu(n.name),o=C2(n),c=o?` format("${o}")`:"",u=`url("${n.url}")${c}`;return`@font-face {
  font-family: "${i}";
  src: ${u};
  font-style: normal;
  font-weight: 400;
  font-display: swap;
}`},T2="data-custom-font-faces",Rg=n=>{h.useEffect(()=>{if(typeof document>"u")return;const i=n.filter(f=>f.type==="font");if(i.length===0)return;const o=[],c=new Set;if(i.forEach(f=>{const g=k2(f),x=g.match(/font-family: "([^"]+)";/),p=x?x[1]:f.name;c.has(p)||(c.add(p),o.push(g))}),o.length===0)return;const u=document.createElement("style");return u.setAttribute(T2,"true"),u.textContent=o.join(`
`),document.head.appendChild(u),()=>{u.remove()}},[n])},Ug=n=>{if(!n)return n??void 0;const i=n.trim();return i.length===0||i.includes(",")?i.length===0?void 0:i:/^(['"]).*\1$/.test(i)||!/[^a-zA-Z0-9-]/.test(i)?i:`'${i.replace(/'/g,"\\'")}'`},Aa=n=>n.background.type==="image"&&n.background.image?{backgroundImage:`url('${n.background.image}')`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundColor:n.background.color}:{backgroundColor:n.background.color},tu=(n,i)=>{const o=Aa(n);if(n.background.type==="image"){const c=n.background.image??i;return c?{...o,backgroundImage:`url('${c}')`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:o}return i?{...o,backgroundImage:`url('${i}')`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:o},za=n=>({color:n.textColor,fontFamily:Ug(n.fontFamily)}),ms=n=>({...za(n),fontSize:n.fontSize}),au=(n,i)=>{const o={color:(i==null?void 0:i.textColor)??n.textColor,fontFamily:Ug((i==null?void 0:i.fontFamily)??n.fontFamily)};return i!=null&&i.backgroundColor&&i.backgroundColor.trim().length>0&&(o.backgroundColor=i.backgroundColor),o},Lg=(n,i)=>({...au(n,i),fontSize:(i==null?void 0:i.fontSize)??n.fontSize}),qg=(n,i)=>i!=null&&i.backgroundColor?{backgroundColor:i.backgroundColor}:{},Bg=(n,i,o)=>{if(!n)return n;try{const c=new URL(n);return c.searchParams.set(i,o),c.toString()}catch{const u=n.includes("?")?"&":"?",f=encodeURIComponent(i),g=encodeURIComponent(o);return`${n}${u}${f}=${g}`}},Nh="/logo-brand.svg",Ya=n=>{if(n.startsWith("navigation."))return"navigation";if(n.startsWith("hero."))return"hero";if(n.startsWith("about."))return"about";if(n.startsWith("menu."))return"menu";if(n.startsWith("instagramReviews."))return"instagramReviews";if(n.startsWith("findUs."))return"findUs";if(n.startsWith("footer."))return"footer";throw new Error(`Zone introuvable pour l'élément modifiable "${n}"`)},Ig=Ca.createContext(!0),Xe=({id:n,onEdit:i,children:o,label:c,className:u,buttonClassName:f,as:g="div"})=>{const x=["group relative",u].filter(Boolean).join(" "),p=Ca.useContext(Ig),[y,v]=h.useState(!1);if(!p)return a.jsx(g,{className:x,children:o});const N=["customization-edit-button absolute z-30 flex h-8 w-8 items-center justify-center rounded-full bg-blue-500 text-white shadow-lg transition-all duration-200","opacity-0 group-hover:opacity-100 group-focus-within:opacity-100 focus-visible:opacity-100","focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500","hover:scale-110 hover:bg-blue-600 active:scale-95",f??"right-2 top-2"].filter(Boolean).join(" "),j=S=>{S.preventDefault(),S.stopPropagation();const w=Ya(n),T=S.currentTarget.getBoundingClientRect(),C=S.currentTarget.closest(`[data-zone="${w}"]`)??S.currentTarget.parentElement,I=(C==null?void 0:C.getBoundingClientRect())??null,L=S.currentTarget.closest('[data-preview-boundary="true"]'),Q=(L==null?void 0:L.getBoundingClientRect())??null;i(n,{zone:w,anchor:T??I,boundary:Q})};return a.jsxs(g,{className:x,onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1),children:[a.jsx("button",{type:"button",onClick:j,className:N,"aria-label":c,"data-element-id":n,title:c,children:a.jsx(kv,{className:"h-4 w-4","aria-hidden":"true"})}),y&&a.jsx("div",{className:"absolute inset-0 pointer-events-none border-2 border-blue-500 border-dashed rounded-lg opacity-50 animate-pulse"}),y&&a.jsxs("div",{className:"absolute z-40 bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded shadow-lg whitespace-nowrap",children:[c,a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]}),o]})},fl=({children:n,className:i,zone:o,activeZone:c})=>{const f=["customization-section-card relative overflow-hidden rounded-3xl border bg-white shadow-sm transition-all",c===o?"active border-brand-primary/70 shadow-brand-primary/20 ring-2 ring-brand-primary/10":"border-gray-200",i].filter(Boolean).join(" ");return a.jsx("div",{className:f,"data-zone":o,children:n})},wh=({content:n,bestSellerProducts:i,onEdit:o,activeZone:c,showEditButtons:u=!0})=>{const f=Aa(n.navigation.style),g=za(n.navigation.style);ms(n.navigation.style);const x=n.navigation.brandLogo??Nh,p=n.navigation.staffLogo??n.navigation.brandLogo??Nh,y=tu(n.hero.style,n.hero.backgroundImage),v=za(n.hero.style),N=ms(n.hero.style),j=Aa(n.about.style),S=za(n.about.style);ms(n.about.style);const w=Aa(n.menu.style),T=za(n.menu.style),C=ms(n.menu.style),I=Aa(n.findUs.style),L=za(n.findUs.style),Q=Aa(n.footer.style),D=ms(n.footer.style);Rg(n.assets.library);const H=n.elementStyles??{},se=n.elementRichText??{},W=M=>{var be;const ce=se[M],de=(be=ce==null?void 0:ce.html)==null?void 0:be.trim();return de&&de.length>0?de:null},X=(M,ce,de,be)=>{const te=W(M);return te?Ca.createElement(ce,{...de,dangerouslySetInnerHTML:{__html:te}}):Ca.createElement(ce,de,be)},re={navigation:n.navigation.style,hero:n.hero.style,about:n.about.style,menu:n.menu.style,instagramReviews:n.instagramReviews.style,findUs:n.findUs.style,footer:n.footer.style},G=M=>H[M],Z=M=>{const ce=Ya(M);return au(re[ce],G(M))},A=M=>{const ce=Ya(M);return Lg(re[ce],G(M))},K=M=>{const ce=Ya(M);return qg(re[ce],G(M))},q=n.findUs.address.trim(),le=n.findUs.mapUrl,_=typeof le=="string"?le.trim():"",E=_.length>0,z=!E&&q.length>0?encodeURIComponent(q):"",P=E?_:z?`https://www.google.com/maps?q=${z}`:"https://www.google.com/maps",F=E?Bg(_,"output","embed"):z?`https://www.google.com/maps?q=${z}&output=embed`:"about:blank",R=E||z.length>0,B=q.length>0?q:n.findUs.title;return a.jsx(Ig.Provider,{value:u,children:a.jsxs("div",{className:"space-y-6 rounded-[2.5rem] border border-gray-200 bg-slate-50 p-6 shadow-inner","data-preview-boundary":"true",children:[a.jsx(fl,{zone:"navigation",activeZone:c,children:a.jsx(Xe,{id:"navigation.style.background",label:"Modifier le fond de la navigation",onEdit:o,className:"block",buttonClassName:"right-4 top-4",children:a.jsx("header",{className:"login-header",style:f,children:a.jsxs("div",{className:"layout-container login-header__inner",style:g,children:[a.jsxs("div",{className:"login-brand",style:g,children:[a.jsx(Xe,{id:"navigation.brandLogo",label:"Modifier le logo principal",onEdit:o,as:"span",className:"inline-flex items-center",children:a.jsx("img",{src:x,alt:`Logo ${n.navigation.brand}`,className:"login-brand__logo"})}),a.jsx(Xe,{id:"navigation.brand",label:"Modifier le nom de la marque",onEdit:o,as:"span",className:"ml-3 inline-flex items-center",buttonClassName:"-right-3 -top-3",children:X("navigation.brand","span",{className:"login-brand__name",style:Z("navigation.brand")},n.navigation.brand)})]}),a.jsxs("nav",{className:"login-nav","aria-label":"Navigation principale",children:[a.jsx(Xe,{id:"navigation.links.home",label:"Modifier le lien Accueil",onEdit:o,as:"span",className:"inline-flex",buttonClassName:"-right-2 -top-2",children:X("navigation.links.home","span",{className:"login-nav__link",style:A("navigation.links.home")},n.navigation.links.home)}),a.jsx(Xe,{id:"navigation.links.about",label:"Modifier le lien À propos",onEdit:o,as:"span",className:"inline-flex",buttonClassName:"-right-2 -top-2",children:X("navigation.links.about","span",{className:"login-nav__link",style:A("navigation.links.about")},n.navigation.links.about)}),a.jsx(Xe,{id:"navigation.links.menu",label:"Modifier le lien Menu",onEdit:o,as:"span",className:"inline-flex",buttonClassName:"-right-2 -top-2",children:X("navigation.links.menu","span",{className:"login-nav__link",style:A("navigation.links.menu")},n.navigation.links.menu)}),a.jsx(Xe,{id:"navigation.links.loginCta",label:"Modifier le bouton personnel",onEdit:o,as:"span",className:"inline-flex",buttonClassName:"-right-2 -top-2",children:a.jsx("div",{className:"login-nav__staff-btn","aria-label":n.navigation.links.loginCta,role:"img",children:a.jsx(Xe,{id:"navigation.staffLogo",label:"Modifier le logo d'accès staff",onEdit:o,as:"span",className:"inline-flex",buttonClassName:"-right-2 -top-2",children:a.jsx("img",{src:p,alt:"",className:"login-brand__logo","aria-hidden":"true"})})})})]})]})})})}),a.jsx(fl,{zone:"hero",activeZone:c,children:a.jsx(Xe,{id:"hero.backgroundImage",label:"Modifier le visuel de fond du hero",onEdit:o,className:"block",buttonClassName:"right-4 top-4",children:a.jsx("section",{className:"section section-hero",style:{...y,...v},children:a.jsx("div",{className:"section-hero__inner",children:a.jsxs("div",{className:"hero-content",style:v,children:[a.jsx(Xe,{id:"hero.title",label:"Modifier le titre du hero",onEdit:o,className:"block",buttonClassName:"right-0 -top-3",children:X("hero.title","h2",{className:"hero-title",style:Z("hero.title")},n.hero.title)}),a.jsx(Xe,{id:"hero.subtitle",label:"Modifier le sous-titre du hero",onEdit:o,className:"mt-4 block",buttonClassName:"right-0 -top-3",children:X("hero.subtitle","p",{className:"hero-subtitle",style:A("hero.subtitle")},n.hero.subtitle)}),a.jsx(Xe,{id:"hero.ctaLabel",label:"Modifier le texte du bouton principal",onEdit:o,className:"mt-6 inline-flex",buttonClassName:"-right-3 -top-3",children:a.jsx("button",{type:"button",className:"ui-btn ui-btn-accent hero-cta",style:{...A("hero.ctaLabel"),...K("hero.ctaLabel")},disabled:!0,children:X("hero.ctaLabel","span",{className:"inline-flex items-center justify-center",style:A("hero.ctaLabel")},n.hero.ctaLabel)})}),a.jsxs("div",{className:"hero-history mt-6",children:[a.jsx(Xe,{id:"hero.historyTitle",label:"Modifier le titre de l'historique",onEdit:o,className:"block",buttonClassName:"right-0 -top-3",children:X("hero.historyTitle","p",{className:"hero-history__title",style:A("hero.historyTitle")},n.hero.historyTitle)}),a.jsx(Xe,{id:"hero.reorderCtaLabel",label:"Modifier le bouton de réassort",onEdit:o,className:"hero-history__list",buttonClassName:"right-2 top-2",children:a.jsx(a.Fragment,{children:[0,1,2].map(M=>a.jsxs("div",{className:"hero-history__item",children:[a.jsxs("div",{className:"hero-history__meta",children:[a.jsx("p",{className:"hero-history__date",style:N,children:"Pedido del 12/03/2024"}),a.jsxs("p",{className:"hero-history__details",style:N,children:["2 article(s) • ",me(32e3)]})]}),a.jsx("button",{type:"button",className:"hero-history__cta",style:{...A("hero.reorderCtaLabel"),...K("hero.reorderCtaLabel")},disabled:!0,children:X("hero.reorderCtaLabel","span",{className:"inline-flex items-center justify-center",style:A("hero.reorderCtaLabel")},n.hero.reorderCtaLabel)})]},M))})})]})]})})})})}),a.jsx(fl,{zone:"about",activeZone:c,children:a.jsx(Xe,{id:"about.style.background",label:"Modifier le fond de la section À propos",onEdit:o,className:"block",buttonClassName:"right-4 top-4",children:a.jsx("section",{className:"section section-surface",style:{...j,...S},children:a.jsxs("div",{className:"section-inner section-inner--center",style:S,children:[a.jsx(Xe,{id:"about.title",label:"Modifier le titre À propos",onEdit:o,className:"block",buttonClassName:"right-0 -top-3",children:X("about.title","h2",{className:"section-title",style:Z("about.title")},n.about.title)}),a.jsx(Xe,{id:"about.description",label:"Modifier la description À propos",onEdit:o,className:"mt-4 block",buttonClassName:"right-0 -top-3",children:X("about.description","p",{className:"section-text section-text--muted",style:A("about.description")},n.about.description)}),n.about.image&&a.jsx(Xe,{id:"about.image",label:"Modifier l'image À propos",onEdit:o,className:"mt-6 block",buttonClassName:"right-4 top-4",children:a.jsx("img",{src:n.about.image,alt:n.about.title,className:"h-64 w-full rounded-xl object-cover shadow-lg"})})]})})})}),a.jsx(fl,{zone:"menu",activeZone:c,children:a.jsx(Xe,{id:"menu.style.background",label:"Modifier le fond de la section Menu",onEdit:o,className:"block",buttonClassName:"right-4 top-4",children:a.jsx("section",{className:"section section-muted",style:{...w,...T},children:a.jsxs("div",{className:"section-inner section-inner--wide section-inner--center",style:T,children:[a.jsx(Xe,{id:"menu.title",label:"Modifier le titre du menu",onEdit:o,className:"block",buttonClassName:"right-0 -top-3",children:X("menu.title","h2",{className:"section-title",style:Z("menu.title")},n.menu.title)}),n.menu.image&&a.jsx(Xe,{id:"menu.image",label:"Modifier l'image du menu",onEdit:o,className:"mb-8 block",buttonClassName:"right-4 top-4",children:a.jsx("img",{src:n.menu.image,alt:n.menu.title,className:"h-64 w-full rounded-xl object-cover shadow-lg"})}),a.jsx("div",{className:"menu-grid",children:i.length>0?i.map(M=>{const ce=!!M.image;return a.jsxs("article",{className:"ui-card menu-card",children:[ce?a.jsx("img",{src:M.image,alt:M.nom_produit,className:"h-40 w-full rounded-t-xl object-cover"}):a.jsx("div",{className:"h-40 w-full rounded-t-xl bg-gradient-to-br from-orange-200 via-amber-100 to-orange-50"}),a.jsxs("div",{className:"menu-card__body",children:[a.jsx("h3",{className:"menu-card__title",style:T,children:M.nom_produit}),M.description&&a.jsx("p",{className:"menu-card__description",style:C,children:M.description}),a.jsx("p",{className:"menu-card__price",style:C,children:me(M.prix_vente)})]})]},M.id)}):a.jsx("div",{className:"col-span-full rounded-2xl border border-dashed border-slate-300 bg-white/70 p-6 text-center",children:a.jsx("p",{className:"text-sm text-slate-500",style:C,children:"Aucun best seller sélectionné pour le moment."})})}),a.jsx(Xe,{id:"menu.ctaLabel",label:"Modifier le bouton de commande",onEdit:o,className:"section-actions mt-8",buttonClassName:"right-2 top-2",children:a.jsxs("div",{className:"section-actions",children:[a.jsx("button",{type:"button",className:"ui-btn ui-btn-primary hero-cta",style:{...A("menu.ctaLabel"),...K("menu.ctaLabel")},disabled:!0,children:X("menu.ctaLabel","span",{className:"inline-flex items-center justify-center",style:A("menu.ctaLabel")},n.menu.ctaLabel)}),a.jsx(Xe,{id:"menu.loadingLabel",label:"Modifier le texte de chargement",onEdit:o,className:"ml-4 inline-flex",buttonClassName:"-right-3 -top-3",as:"span",children:X("menu.loadingLabel","p",{className:"section-text section-text--muted",style:A("menu.loadingLabel")},n.menu.loadingLabel)})]})})]})})})}),a.jsx(fl,{zone:"findUs",activeZone:c,children:a.jsx(Xe,{id:"findUs.style.background",label:"Modifier le fond de la section Encuéntranos",onEdit:o,className:"block",buttonClassName:"right-4 top-4",children:a.jsx("section",{className:"section section-surface",style:{...I,...L},children:a.jsxs("div",{className:"find-us-grid",style:L,children:[a.jsxs("div",{className:"find-us-panel",style:L,children:[a.jsx(Xe,{id:"findUs.title",label:"Modifier le titre Encuéntranos",onEdit:o,className:"block",buttonClassName:"right-0 -top-3",children:X("findUs.title","h2",{className:"section-title",style:Z("findUs.title")},n.findUs.title)}),a.jsxs("div",{className:"find-us-details",children:[a.jsxs("div",{className:"find-us-detail",style:L,children:[a.jsx(wn,{className:"find-us-detail__icon","aria-hidden":"true"}),a.jsxs("div",{children:[a.jsx(Xe,{id:"findUs.addressLabel",label:"Modifier le libellé de l'adresse",onEdit:o,className:"block",buttonClassName:"right-0 -top-3",children:X("findUs.addressLabel","h3",{className:"find-us-detail__title",style:Z("findUs.addressLabel")},n.findUs.addressLabel)}),a.jsx(Xe,{id:"findUs.address",label:"Modifier l'adresse",onEdit:o,className:"mt-1 block",buttonClassName:"right-0 -top-3",children:X("findUs.address","p",{className:"find-us-detail__text",style:A("findUs.address")},n.findUs.address)})]})]}),a.jsxs("div",{className:"find-us-detail",style:L,children:[a.jsx(hs,{className:"find-us-detail__icon","aria-hidden":"true"}),a.jsxs("div",{children:[a.jsx(Xe,{id:"findUs.hoursLabel",label:"Modifier le libellé des horaires",onEdit:o,className:"block",buttonClassName:"right-0 -top-3",children:X("findUs.hoursLabel","h3",{className:"find-us-detail__title",style:Z("findUs.hoursLabel")},n.findUs.hoursLabel)}),a.jsx(Xe,{id:"findUs.hours",label:"Modifier les horaires",onEdit:o,className:"mt-1 block",buttonClassName:"right-0 -top-3",children:X("findUs.hours","p",{className:"find-us-detail__text",style:A("findUs.hours")},n.findUs.hours)})]})]}),a.jsxs("div",{className:"find-us-detail",style:L,children:[a.jsx(mv,{className:"find-us-detail__icon","aria-hidden":"true"}),a.jsxs("div",{children:[a.jsx(Xe,{id:"findUs.cityLabel",label:"Modifier le libellé de l'email",onEdit:o,className:"block",buttonClassName:"right-0 -top-3",children:X("findUs.cityLabel","h3",{className:"find-us-detail__title",style:Z("findUs.cityLabel")},n.findUs.cityLabel)}),a.jsx(Xe,{id:"findUs.city",label:"Modifier l'email",onEdit:o,className:"mt-1 block",buttonClassName:"right-0 -top-3",children:X("findUs.city","p",{className:"find-us-detail__text",style:A("findUs.city")},n.findUs.city)})]})]})]})]}),a.jsx("div",{className:"find-us-map",style:L,children:R?a.jsxs("div",{className:"find-us-map__frame",children:[a.jsx("iframe",{title:`Carte Google Maps pour ${B}`,src:F,loading:"lazy",allowFullScreen:!0,referrerPolicy:"no-referrer-when-downgrade"}),a.jsx("a",{className:"find-us-map__link",href:P,target:"_blank",rel:"noopener noreferrer",children:a.jsx(Xe,{id:"findUs.mapLabel",label:"Modifier le libellé du lien Google Maps",onEdit:o,className:"inline-flex",buttonClassName:"-right-3 -top-3",as:"span",children:X("findUs.mapLabel","span",{className:"find-us-map__label",style:A("findUs.mapLabel")},n.findUs.mapLabel)})})]}):a.jsx("div",{className:"find-us-map__placeholder",children:a.jsx(Xe,{id:"findUs.mapLabel",label:"Modifier le libellé du lien Google Maps",onEdit:o,className:"inline-flex",buttonClassName:"-right-3 -top-3",as:"span",children:X("findUs.mapLabel","span",{className:"find-us-map__label",style:A("findUs.mapLabel")},n.findUs.mapLabel)})})})]})})})}),a.jsx(fl,{zone:"footer",activeZone:c,children:a.jsx(Xe,{id:"footer.style.background",label:"Modifier le fond du pied de page",onEdit:o,className:"block",buttonClassName:"right-4 top-4",children:a.jsx("footer",{className:"site-footer",style:{...Q,...D},children:a.jsx("div",{className:"layout-container site-footer__inner",style:D,children:a.jsx(Xe,{id:"footer.text",label:"Modifier le texte du pied de page",onEdit:o,className:"block",buttonClassName:"right-0 -top-3",children:a.jsxs("p",{style:A("footer.text"),children:["© ",new Date().getFullYear()," ",n.navigation.brand,"."," ",X("footer.text","span",{style:A("footer.text")},n.footer.text)]})})})})})})]})})},jl=n=>{const[i,o]=n.split(":");if(i===void 0||o===void 0)return null;const c=Number.parseInt(i,10),u=Number.parseInt(o,10);return Number.isNaN(c)||Number.isNaN(u)||c<0||c>23||u<0||u>59?null:c*60+u},co=(n,i=new Date)=>{const o=jl(n.startTime),c=jl(n.endTime);if(o===null||c===null||o===c)return!0;const u=i.getHours()*60+i.getMinutes();return o<c?u>=o&&u<c:u>=o||u<c},Hg=(n,i="fr-FR")=>{const o=new Intl.DateTimeFormat(i,{hour:"2-digit",minute:"2-digit"}),c=new Date,u=new Date(c),f=new Date(c),g=jl(n.startTime),x=jl(n.endTime);g!==null&&u.setHours(Math.floor(g/60),g%60,0,0),x!==null&&f.setHours(Math.floor(x/60),x%60,0,0);const p=o.format(u),y=o.format(f);return`${p} – ${y}`},E2=(n,i=new Date)=>{const o=jl(n.startTime),c=jl(n.endTime);if(o===null||c===null)return null;const u=i.getHours()*60+i.getMinutes(),f=co(n,i)?c:o,g=new Date(i);return g.setSeconds(0,0),g.setHours(Math.floor(f/60),f%60,0,0),f<=u&&f===c&&g.setDate(g.getDate()+1),f<=u&&f===o&&o>=c&&g.setDate(g.getDate()+1),g},$g=(n,i=new Date)=>{const o=E2(n,i);if(!o)return null;const c=o.getTime()-i.getTime();return Math.max(0,Math.round(c/6e4))},Sh="/logo-brand.svg",M2=Cn,Gg=Ca.forwardRef(({pin:n,onPinChange:i,pinLength:o,describedBy:c,disabled:u},f)=>{const g=N=>{n.length<o&&!u&&i(n+N)},x=()=>{n.length>0&&!u&&i(n.slice(0,-1))},p=N=>{if(u)return;const j=N.target.value.replace(/\D/g,"").slice(0,o);i(j)},y=N=>{if(/^\d$/.test(N.key)){N.preventDefault(),g(N.key);return}if(N.key==="Backspace"){N.preventDefault(),x();return}N.key==="Escape"&&(N.preventDefault(),i(""))},v=n.length===0?`Aucun chiffre saisi. Vous pouvez entrer ${o} chiffres.`:`${n.length} ${n.length>1?"chiffres saisis":"chiffre saisi"} sur ${o}.`;return a.jsxs("div",{className:"pin-input","aria-label":"Clavier numérique sécurisé",children:[a.jsx("input",{ref:f,id:"staff-pin-field",type:"password",inputMode:"numeric",autoComplete:"one-time-code",className:"pin-input__field",value:n,onChange:p,onKeyDown:y,"aria-describedby":c,"aria-label":`Code PIN à ${o} chiffres`,disabled:u,"aria-disabled":u,"aria-busy":u}),a.jsx("div",{className:"pin-indicator",role:"presentation",children:Array.from({length:o}).map((N,j)=>a.jsx("div",{className:"pin-indicator__slot","aria-hidden":"true",children:n[j]?"•":""},j))}),a.jsx("div",{className:"pin-input__live","aria-live":"polite",children:v}),a.jsxs("div",{className:"pin-pad",children:[[...Array(9)].map((N,j)=>a.jsx("button",{type:"button",onClick:()=>g(String(j+1)),className:"pin-pad__button",disabled:u,children:j+1},j+1)),a.jsx("div",{"aria-hidden":"true"}),a.jsx("button",{type:"button",onClick:()=>g("0"),className:"pin-pad__button",disabled:u,children:"0"}),a.jsx("button",{type:"button",onClick:x,className:"pin-pad__button pin-pad__button--muted",disabled:u,children:"DEL"})]})]})});Gg.displayName="PinInput";const A2=n=>n===1?"menu-grid menu-grid--single":n===2?"menu-grid menu-grid--double":n===3?"menu-grid menu-grid--triple":n>=6?"menu-grid menu-grid--six":n>0?"menu-grid menu-grid--multi":"menu-grid",z2=n=>{const i="ui-card menu-card";return n===1?`${i} menu-card--single`:n===2?`${i} menu-card--double`:n===3?`${i} menu-card--triple`:n>=6?`${i} menu-card--compact`:i},O2=()=>{const[n,i]=h.useState(!1),[o,c]=h.useState(""),[u,f]=h.useState(""),[g,x]=h.useState(!1),p=h.useRef(null),{login:y}=Fa(),v=Xs(),{content:N}=Ei(),[j,S]=h.useState(()=>N);h.useEffect(()=>{N&&S(N)},[N]);const w=j??M2;Rg(w.assets.library);const{navigation:T,hero:C,about:I,menu:L,findUs:Q,footer:D,onlineOrdering:H}=w,se=h.useCallback(_e=>_e?_e.replace(/[,\s]*Colombia\b/gi,"").trim():"",[]),W=h.useMemo(()=>se(Q.address),[Q.address,se]),X=T.brandLogo??Sh,re=T.brandLogo??Sh,G=Aa(T.style),Z=za(T.style),A=tu(C.style,C.backgroundImage),K=za(C.style),q=ms(C.style),le=Aa(I.style),_=za(I.style),E=Aa(L.style),z=za(L.style),P=ms(L.style),F=Aa(Q.style),R=za(Q.style),B=ms(Q.style),M=Aa(D.style),ce=ms(D.style),de=w.elementStyles??{},be={navigation:T.style,hero:C.style,about:I.style,menu:L.style,instagramReviews:w.instagramReviews.style,findUs:Q.style,footer:D.style},te=_e=>de[_e],ie=_e=>{const Be=Ya(_e);return au(be[Be],te(_e))},xe=_e=>{const Be=Ya(_e);return Lg(be[Be],te(_e))},we=_e=>{const Be=Ya(_e);return qg(be[Be],te(_e))},Me=w.elementRichText??{},[Je,Dt]=h.useState(()=>new Date);h.useEffect(()=>{if(typeof window>"u")return;const _e=()=>Dt(new Date);_e();const Be=window.setInterval(_e,6e4);return()=>window.clearInterval(Be)},[]);const Ct=H.schedule,Xt=h.useMemo(()=>Hg(Ct,"fr-FR"),[Ct.startTime,Ct.endTime]),ge=co(Ct,Je),Ne=$g(Ct,Je),ze=h.useMemo(()=>{if(Ne===null)return null;if(Ne<1)return"Réouverture imminente";if(Ne<60)return`Réouverture dans environ ${Ne} min`;const _e=Math.floor(Ne/60),Be=Ne%60;return Be===0?`Réouverture dans environ ${_e} h`:`Réouverture dans environ ${_e} h ${Be.toString().padStart(2,"0")} min`},[Ne]),dt=_e=>{var Ft;const Be=Me[_e],ht=(Ft=Be==null?void 0:Be.html)==null?void 0:Ft.trim();return ht&&ht.length>0?ht:null},ke=(_e,Be,ht,Ft)=>{const wl=dt(_e);return wl?Ca.createElement(Be,{...ht,dangerouslySetInnerHTML:{__html:wl}}):Ca.createElement(Be,ht,Ft)},[We,_t]=h.useState([]),[Kt,ft]=h.useState([]),[Nt,fa]=h.useState(!0),[Ra,pt]=h.useState(!1),[ue,pe]=h.useState(()=>lo()),Se=h.useCallback(async _e=>{x(!0),f("");try{const Be=await y(_e),ht=Wd(Be)??"/dashboard";i(!1),c(""),v(ht)}catch(Be){console.error("Failed to authenticate with PIN",Be);const ht=Be instanceof Error&&Be.message?Be.message:"PIN invalide";f(ht),c(""),requestAnimationFrame(()=>{var Ft;(Ft=p.current)==null||Ft.focus()})}finally{x(!1)}},[y,v]);h.useEffect(()=>{if(!n)return;const _e=window.setTimeout(()=>{var Be;(Be=p.current)==null||Be.focus()},0);return()=>window.clearTimeout(_e)},[n]),h.useEffect(()=>{o.length===6&&!g&&Se(o)},[o,g,Se]),h.useEffect(()=>{if(!(typeof window>"u"))try{const _e=window.localStorage.getItem("customer-order-history");if(!_e)return;const Be=JSON.parse(_e);Array.isArray(Be)&&ft(Be)}catch(_e){console.error("Could not load order history",_e)}},[]),h.useEffect(()=>{let _e=!0;return(async()=>{try{const ht=await ye.getBestSellerProducts();_e&&_t(ht)}catch(ht){console.error("Could not load best seller products",ht)}finally{_e&&fa(!1)}})(),()=>{_e=!1}},[]);const qe=Q.address.trim(),Ke=Q.mapUrl,Ze=typeof Ke=="string"?Ke.trim():"",Ee=Ze.length>0,Re=!Ee&&qe.length>0?encodeURIComponent(qe):"",xt=Ee?Ze:Re?`https://www.google.com/maps?q=${Re}`:"https://www.google.com/maps",ot=Ee?Bg(Ze,"output","embed"):Re?`https://www.google.com/maps?q=${Re}&output=embed`:"about:blank",Rt=Ee||Re.length>0,Va=qe.length>0?qe:Q.title,pa="0681161642",Vt=`https://wa.me/${`33${pa.replace(/^0/,"")}`}`,yt=(ue==null?void 0:ue.orderId)??null,oe=We.slice(0,6),Ae=oe.length,Pe=A2(Ae),Fe=z2(Ae),Ve=_e=>{_e.preventDefault(),o.length===6&&!g&&Se(o)},Yt=()=>{Vh(),pe(null)},la=_e=>{localStorage.setItem("customer-order-reorder-id",_e),v("/commande-client")},Ks=()=>{ge&&v("/commande-client")};return a.jsxs("div",{className:"login-page",children:[a.jsx("header",{className:"login-header",style:G,children:a.jsxs("div",{className:"layout-container login-header__inner",style:Z,children:[a.jsxs("div",{className:"login-brand",style:Z,children:[a.jsx("img",{src:X,alt:`Logo ${T.brand}`,className:"login-brand__logo"}),ke("navigation.brand","span",{className:"login-brand__name",style:ie("navigation.brand")},T.brand)]}),a.jsxs("nav",{className:"login-nav","aria-label":"Navigation principale",children:[ke("navigation.links.home","a",{href:"#accueil",className:"login-nav__link",style:xe("navigation.links.home")},T.links.home),ke("navigation.links.about","a",{href:"#apropos",className:"login-nav__link",style:xe("navigation.links.about")},T.links.about),ke("navigation.links.menu","a",{href:"#menu",className:"login-nav__link",style:xe("navigation.links.menu")},T.links.menu),a.jsx("button",{type:"button",onClick:()=>i(!0),className:"login-nav__staff-btn","aria-label":T.links.loginCta,children:a.jsx("img",{src:re,alt:"",className:"login-brand__logo","aria-hidden":"true"})})]}),a.jsx("button",{type:"button",onClick:()=>pt(!0),className:"login-header__menu","aria-label":"Ouvrir le menu",children:a.jsx(rg,{size:24})})]})}),Ra&&a.jsxs("div",{className:"login-menu-overlay",role:"dialog","aria-modal":"true",style:G,children:[a.jsx("button",{type:"button",onClick:()=>pt(!1),className:"login-menu-overlay__close","aria-label":"Fermer le menu",children:a.jsx(fs,{size:28})}),a.jsxs("nav",{className:"login-menu-overlay__nav","aria-label":"Navigation mobile",style:Z,children:[ke("navigation.links.home","a",{href:"#accueil",onClick:()=>pt(!1),className:"login-menu-overlay__link",style:xe("navigation.links.home")},T.links.home),ke("navigation.links.about","a",{href:"#apropos",onClick:()=>pt(!1),className:"login-menu-overlay__link",style:xe("navigation.links.about")},T.links.about),ke("navigation.links.menu","a",{href:"#menu",onClick:()=>pt(!1),className:"login-menu-overlay__link",style:xe("navigation.links.menu")},T.links.menu),a.jsx("button",{type:"button",onClick:()=>{i(!0),pt(!1)},className:"login-nav__staff-btn login-menu-overlay__staff-btn","aria-label":T.links.loginCta,children:a.jsx("img",{src:re,alt:"",className:"login-brand__logo","aria-hidden":"true"})})]})]}),a.jsxs("main",{children:[a.jsx("section",{id:"accueil",className:"section section-hero",style:{...A,...K},children:yt?a.jsx(j2,{orderId:yt,onNewOrderClick:Yt,variant:"hero"}):a.jsxs("div",{className:"hero-content",style:K,children:[ke("hero.title","h2",{className:"hero-title",style:ie("hero.title")},C.title),ke("hero.subtitle","p",{className:"hero-subtitle",style:xe("hero.subtitle")},C.subtitle),a.jsx("button",{onClick:Ks,className:`ui-btn hero-cta ${ge?"ui-btn-accent":"hero-cta--disabled"}`.trim(),style:{...xe("hero.ctaLabel"),...we("hero.ctaLabel")},disabled:!ge,"aria-disabled":!ge,children:ke("hero.ctaLabel","span",{className:"inline-flex items-center justify-center",style:xe("hero.ctaLabel")},C.ctaLabel)}),!ge&&a.jsxs("div",{className:"hero-availability",children:[a.jsx("div",{className:"hero-availability__icon",children:a.jsx(hs,{size:28})}),a.jsxs("div",{className:"hero-availability__content",children:[a.jsx("p",{className:"hero-availability__label",children:"Commandes en ligne indisponibles"}),a.jsx("p",{className:"hero-availability__title",children:H.closedTitle}),a.jsx("p",{className:"hero-availability__subtitle",children:H.closedSubtitle||`Revenez entre ${Xt}.`}),a.jsx("p",{className:"hero-availability__hours",children:Xt}),ze&&a.jsx("p",{className:"hero-availability__countdown",children:ze})]})]}),Kt.length>0&&a.jsxs("div",{className:"hero-history",children:[ke("hero.historyTitle","p",{className:"hero-history__title",style:xe("hero.historyTitle")},C.historyTitle),a.jsx("div",{className:"hero-history__list",children:Kt.slice(0,3).map(_e=>a.jsxs("div",{className:"hero-history__item",children:[a.jsxs("div",{className:"hero-history__meta",children:[a.jsxs("p",{className:"hero-history__date",style:q,children:["Pedido del ",new Date(_e.date_creation).toLocaleDateString()]}),a.jsxs("p",{className:"hero-history__details",style:q,children:[_e.items.length," article(s) • ",me(_e.total)]})]}),a.jsx("button",{type:"button",onClick:()=>la(_e.id),className:"hero-history__cta",style:{...xe("hero.reorderCtaLabel"),...we("hero.reorderCtaLabel")},children:ke("hero.reorderCtaLabel","span",{className:"inline-flex items-center justify-center",style:xe("hero.reorderCtaLabel")},C.reorderCtaLabel)})]},_e.id))})]})]})}),a.jsx("section",{id:"apropos",className:"section section-surface",style:{...le,..._},children:a.jsxs("div",{className:"section-inner section-inner--center",style:_,children:[ke("about.title","h2",{className:"section-title",style:ie("about.title")},I.title),ke("about.description","p",{className:"section-text section-text--muted",style:xe("about.description")},I.description),I.image&&a.jsx("img",{src:I.image,alt:I.title,className:"mt-6 h-64 w-full rounded-xl object-cover shadow-lg"})]})}),a.jsx("section",{id:"menu",className:"section section-muted",style:{...E,...z},children:a.jsxs("div",{className:"section-inner section-inner--wide section-inner--center",style:z,children:[ke("menu.title","h2",{className:"section-title",style:ie("menu.title")},L.title),L.image&&a.jsx("img",{src:L.image,alt:L.title,className:"mb-8 h-64 w-full rounded-xl object-cover shadow-lg"}),Nt?ke("menu.loadingLabel","p",{className:"section-text section-text--muted",style:xe("menu.loadingLabel")},L.loadingLabel):oe.length>0?a.jsx("div",{className:Pe,children:oe.map(_e=>a.jsxs("article",{className:Fe,children:[a.jsx("img",{src:_e.image,alt:_e.nom_produit,className:"menu-card__media"}),a.jsxs("div",{className:"menu-card__body",children:[a.jsx("h3",{className:"menu-card__title",style:z,children:_e.nom_produit}),a.jsx("p",{className:"menu-card__description",style:P,children:_e.description}),a.jsx("p",{className:"menu-card__price",style:P,children:me(_e.prix_vente)})]})]},_e.id))}):a.jsx("p",{className:"section-text section-text--muted",style:P,children:"Aucun produit best seller n'est disponible pour le moment."}),a.jsx("div",{className:"section-actions",children:a.jsx("button",{onClick:()=>v("/commande-client"),className:"ui-btn ui-btn-primary hero-cta",style:{...xe("menu.ctaLabel"),...we("menu.ctaLabel")},children:ke("menu.ctaLabel","span",{className:"inline-flex items-center justify-center",style:xe("menu.ctaLabel")},L.ctaLabel)})})]})}),a.jsx("section",{id:"find-us",className:"section section-surface py-14 sm:py-16",style:{...F,...R},children:a.jsxs("div",{className:"section-inner section-inner--wide section-inner--center",children:[ke("findUs.title","h2",{className:"section-title text-center",style:ie("findUs.title")},Q.title),a.jsxs("div",{className:"mx-auto mt-10 grid w-full max-w-6xl gap-8 md:grid-cols-2 lg:grid-cols-[minmax(0,1fr)_minmax(0,1.15fr)]",children:[a.jsxs("div",{className:"grid gap-6",children:[a.jsx("article",{className:"h-full rounded-[24px] border border-white/70 bg-white/75 p-4 shadow-[0_24px_48px_-30px_rgba(15,23,42,0.5)] backdrop-blur",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-2xl bg-orange-500 text-white",children:a.jsx(wn,{className:"h-5 w-5"})}),a.jsxs("div",{className:"flex-1 space-y-2",children:[ke("findUs.addressLabel","h3",{className:"text-xl font-semibold text-gray-900",style:ie("findUs.addressLabel")},Q.addressLabel),ke("findUs.address","p",{className:"whitespace-pre-line text-base font-medium text-gray-700",style:xe("findUs.address")},W)]})]})}),a.jsx("article",{className:"h-full rounded-[24px] border border-white/70 bg-white/75 p-4 shadow-[0_24px_48px_-30px_rgba(15,23,42,0.5)] backdrop-blur",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-2xl bg-orange-500 text-white",children:a.jsx(hs,{className:"h-5 w-5"})}),a.jsxs("div",{className:"flex-1 space-y-2",children:[ke("findUs.hoursLabel","h3",{className:"text-xl font-semibold text-gray-900",style:ie("findUs.hoursLabel")},Q.hoursLabel),ke("findUs.hours","p",{className:"whitespace-pre-line text-base font-medium text-gray-700",style:xe("findUs.hours")},Q.hours)]})]})}),a.jsx("article",{className:"h-full rounded-[24px] border border-white/70 bg-white/75 p-4 shadow-[0_24px_48px_-30px_rgba(15,23,42,0.5)] backdrop-blur",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-2xl bg-orange-500 text-white",children:a.jsx(xl,{className:"h-5 w-5"})}),a.jsxs("div",{className:"flex-1 space-y-3",children:[ke("findUs.cityLabel","h3",{className:"text-xl font-semibold text-gray-900",style:ie("findUs.cityLabel")},Q.cityLabel),a.jsx("div",{className:"flex flex-col gap-3 text-base font-medium text-gray-700",style:B,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("a",{href:`tel:${pa}`,className:"inline-flex items-center gap-2 text-base font-semibold text-gray-900 transition hover:text-orange-500",children:[a.jsx(xl,{className:"h-5 w-5 text-orange-500"}),pa]}),a.jsx("a",{href:Vt,target:"_blank",rel:"noopener noreferrer",className:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-green-500 text-white transition hover:bg-green-600","aria-label":"Nous écrire sur WhatsApp",children:a.jsx(gv,{className:"h-4 w-4"})})]})})]})]})})]}),a.jsxs("div",{className:"flex h-full w-full flex-col justify-between rounded-[36px] border border-white/70 bg-white/75 p-6 shadow-[0_28px_70px_-32px_rgba(15,23,42,0.55)] backdrop-blur",children:[a.jsx("div",{className:"relative aspect-[13/8] w-full overflow-hidden rounded-3xl bg-white",children:Rt?a.jsx("iframe",{title:`Carte Google Maps pour ${Va}`,src:ot,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",className:"h-full w-full border-0",allowFullScreen:!0}):a.jsx("div",{className:"flex h-full w-full items-center justify-center bg-gray-100 px-8 text-center",children:a.jsx("p",{className:"text-lg text-gray-500",style:B,children:"La localisation de notre restaurant sera bientôt disponible."})})}),a.jsx("div",{className:"mt-6 flex justify-center",children:Rt?a.jsxs("a",{href:xt,target:"_blank",rel:"noopener noreferrer",className:"inline-flex w-full items-center justify-center gap-3 rounded-full bg-orange-500 px-6 py-3 text-base font-semibold text-white shadow-lg transition hover:bg-orange-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-500",style:xe("findUs.mapLabel"),children:[a.jsx(wn,{className:"h-6 w-6 text-white"}),ke("findUs.mapLabel","span",{className:"text-base font-semibold"},Q.mapLabel)]}):null})]})]})]})})]}),a.jsx("footer",{className:"site-footer",style:{...M,...ce},children:a.jsx("div",{className:"layout-container site-footer__inner",style:ce,children:a.jsxs("p",{style:xe("footer.text"),children:["© ",new Date().getFullYear()," ",T.brand,"."," ",ke("footer.text","span",{style:xe("footer.text")},D.text)]})})}),a.jsx(zt,{isOpen:n,onClose:()=>{i(!1),c(""),f("")},title:"Connexion du personnel",size:"lg",children:a.jsx("div",{className:"login-modal",children:a.jsx("form",{onSubmit:Ve,className:"login-modal__form","aria-describedby":u?"staff-pin-error":void 0,children:a.jsxs("div",{className:"login-modal__panel",children:[a.jsx(Gg,{ref:p,pin:o,onPinChange:c,pinLength:6,describedBy:u?"staff-pin-error":void 0,disabled:g}),u&&a.jsx("p",{id:"staff-pin-error",className:"login-modal__error",role:"alert","aria-live":"assertive",children:u})]})})})})]})},Ch=[{value:"editor",label:"Éditeur",headerDescription:"Gestion complète",helper:"Créer, modifier et valider le contenu.",tooltip:"Autorise toutes les actions, y compris la modification et la validation des données."},{value:"readonly",label:"Lecture seule",headerDescription:"Consultation",helper:"Visualiser les informations sans modifier.",tooltip:"Permet uniquement de consulter les informations sans pouvoir les modifier."},{value:"none",label:"Aucun",headerDescription:"Accès bloqué",helper:"Masquer totalement la section.",tooltip:"Bloque complètement l’accès à la section ou à la fonctionnalité."}],D2=({permissionKeys:n,permissions:i,onChange:o,getPermissionLabel:c,customPermissions:u,onRemoveCustomPermission:f})=>{const g=h.useMemo(()=>{if(n.length===0)return[];const p=na.map(S=>S.permissionKey),y=new Set(p),v=p.filter(S=>n.includes(S)),N=n.filter(S=>!y.has(S)).sort((S,w)=>c(S).localeCompare(c(w),"fr")),j=[];return v.length>0&&j.push({id:"navigation",title:"Navigation principale",keys:v}),N.length>0&&j.push({id:"custom",title:"Permissions personnalisées",keys:N}),j},[c,n]),x=p=>{n.forEach(y=>{(i[y]??"none")!==p&&o(y,p)})};return n.length===0?a.jsx("div",{className:"rounded-xl border border-dashed border-gray-300 bg-gray-50 px-4 py-6 text-center text-sm font-medium text-gray-900",children:"Aucune permission disponible pour ce rôle pour le moment."}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{type:"button",className:"permission-action-button",onClick:()=>x("editor"),title:"Autoriser toutes les sections en mode édition.",children:"Tout autoriser"}),a.jsx("button",{type:"button",className:"permission-action-button",onClick:()=>x("readonly"),title:"Basculer toutes les sections en lecture seule.",children:"Lecture seule partout"}),a.jsx("button",{type:"button",className:"permission-action-button is-danger",onClick:()=>x("none"),title:"Révoquer toutes les permissions.",children:"Tout bloquer"})]}),a.jsx("div",{className:"overflow-hidden rounded-xl border border-gray-200 bg-white shadow-sm",children:a.jsx("div",{className:"max-h-96 overflow-auto",children:a.jsx("div",{className:"min-w-full",children:a.jsxs("div",{className:"grid grid-cols-[minmax(220px,2fr)_repeat(3,minmax(140px,1fr))]",children:[a.jsx("div",{className:"border-b border-gray-200 bg-gray-50 px-4 py-3 text-sm font-semibold text-gray-900",children:"Section / permission"}),Ch.map(p=>a.jsxs("div",{className:"border-b border-l border-gray-200 bg-gray-50 px-4 py-3 text-sm font-semibold text-gray-900",children:[a.jsx("div",{children:p.label}),a.jsx("p",{className:"mt-1 text-xs font-medium text-gray-900",children:p.headerDescription})]},p.value)),g.map(p=>a.jsxs(Ca.Fragment,{children:[a.jsx("div",{className:"col-span-4 border-t border-gray-200 bg-gray-100 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-gray-900",children:p.title}),p.keys.map(y=>{const v=i[y]??"none",N=`permission-${y.replace(/[^a-zA-Z0-9_-]/g,"_")}`,j=y in u;return a.jsxs(Ca.Fragment,{children:[a.jsx("div",{className:"border-t border-gray-100 px-4 py-3",children:a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-900",children:c(y)}),j&&f&&a.jsx("button",{type:"button",onClick:()=>f(y),className:"text-gray-700 transition-colors hover:text-red-600",title:"Supprimer cette permission personnalisée",children:a.jsx(kn,{className:"h-4 w-4"})})]})}),Ch.map(S=>{const w=v===S.value;return a.jsx("div",{className:"border-t border-l border-gray-100 px-4 py-3",children:a.jsxs("label",{className:`permission-choice${w?" is-active":""}`,title:S.tooltip,children:[a.jsx("input",{type:"radio",className:"sr-only",name:N,value:S.value,checked:w,onChange:()=>o(y,S.value)}),a.jsx("span",{className:"permission-choice__label",children:S.label}),a.jsx("span",{className:"permission-choice__helper",children:S.helper})]})},S.value)})]},y)})]},p.id))]})})})})]})},R2=({mode:n,formState:i,onSubmit:o,onInputChange:c,onHomePageChange:u,onPermissionChange:f,onAddCustomPermission:g,onRemoveCustomPermission:x,onCancel:p,isSubmitting:y,hasAccessibleHomePage:v,permissionKeys:N,getPermissionLabel:j,isPermissionGranted:S})=>{const[w,T]=h.useState(!1),[C,I]=h.useState(""),[L,Q]=h.useState(""),[D,H]=h.useState(null),se=()=>{T(!1),I(""),Q(""),H(null)},W=()=>{const X=C.trim(),re=L.trim();if(!X||!re){H("La clé technique et le nom affiché sont obligatoires.");return}if(N.includes(X)){H("Cette clé de permission existe déjà.");return}g(X,re),se()};return a.jsxs("div",{children:[a.jsx("h4",{className:"mb-4 text-lg font-semibold text-gray-900",children:n==="edit"?"Modifier le rôle sélectionné":"Créer un nouveau rôle"}),a.jsxs("form",{onSubmit:o,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"role-name",className:"mb-1 block text-sm font-medium text-gray-900",children:"Nom du rôle"}),a.jsx("input",{id:"role-name",name:"name",value:i.name,onChange:c,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-brand-primary focus:outline-none focus:ring-1 focus:ring-brand-primary",placeholder:"Ex. Manager"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"role-pin",className:"mb-1 block text-sm font-medium text-gray-900",children:"Code PIN d'accès"}),a.jsx("input",{id:"role-pin",name:"pin",value:i.pin,onChange:c,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-brand-primary focus:outline-none focus:ring-1 focus:ring-brand-primary",placeholder:"Ex. 1234"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"role-home-page",className:"mb-1 block text-sm font-medium text-gray-900",children:"Page d'accueil par défaut"}),a.jsx("select",{id:"role-home-page",name:"homePage",value:i.homePage,onChange:X=>u(X.target.value),disabled:!v,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-brand-primary focus:outline-none focus:ring-1 focus:ring-brand-primary disabled:cursor-not-allowed disabled:bg-gray-100",children:na.map(X=>{const re=S(i.permissions[X.permissionKey]);return a.jsxs("option",{value:X.permissionKey,disabled:!re,children:[j(X.permissionKey),re?"":" (accès requis)"]},X.permissionKey)})}),v?a.jsx("p",{className:"mt-1 text-xs text-gray-900",children:"Les pages sans permission sont désactivées."}):a.jsx("p",{className:"mt-1 text-xs font-medium text-red-700",children:"Accordez au moins une permission pour choisir une page d'accueil."})]}),a.jsxs("div",{children:[a.jsx("p",{className:"mb-2 text-sm font-semibold text-gray-900",children:"Permissions par page"}),a.jsx(D2,{permissionKeys:N,permissions:i.permissions,onChange:f,getPermissionLabel:j,customPermissions:i.customPermissions,onRemoveCustomPermission:x}),a.jsx("div",{className:"mt-4 space-y-3",children:w?a.jsxs("div",{className:"rounded-md border border-dashed border-brand-primary/50 bg-brand-primary/5 p-4",children:[a.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-900",children:"Clé technique"}),a.jsx("input",{type:"text",value:C,onChange:X=>{I(X.target.value),H(null)},className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-brand-primary focus:outline-none focus:ring-1 focus:ring-brand-primary",placeholder:"ex. /rapports"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-900",children:"Nom affiché"}),a.jsx("input",{type:"text",value:L,onChange:X=>{Q(X.target.value),H(null)},className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-brand-primary focus:outline-none focus:ring-1 focus:ring-brand-primary",placeholder:"ex. Rapports"})]})]}),D&&a.jsx("p",{className:"mt-2 text-xs font-medium text-red-700",children:D}),a.jsxs("div",{className:"mt-3 flex justify-end space-x-2",children:[a.jsx("button",{type:"button",onClick:se,className:"rounded-md border border-gray-300 px-3 py-1.5 text-xs font-semibold text-gray-900 hover:bg-gray-100",children:"Annuler"}),a.jsx("button",{type:"button",onClick:W,className:"rounded-md bg-brand-primary px-3 py-1.5 text-xs font-semibold text-white hover:bg-brand-primary/90",children:"Ajouter"})]})]}):a.jsx("button",{type:"button",onClick:()=>{T(!0),H(null)},className:"text-sm font-semibold text-brand-primary hover:underline",children:"Ajouter une permission"})})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[n==="edit"&&a.jsx("button",{type:"button",onClick:p,className:"rounded-md border border-gray-300 px-3 py-2 text-sm font-semibold text-gray-900 hover:bg-gray-100",children:"Annuler"}),a.jsxs("button",{type:"submit",disabled:y,className:"inline-flex items-center rounded-md bg-brand-primary px-4 py-2 text-sm font-semibold text-white shadow hover:bg-brand-primary/90 disabled:cursor-not-allowed disabled:opacity-60",children:[a.jsx(Bv,{className:"mr-2 h-4 w-4"}),y?"Enregistrement...":n==="edit"?"Mettre à jour":"Créer"]})]})]})]})},U2=({roles:n,isFetching:i,onCreateRole:o,onSelectRole:c,onDeleteRole:u,selectedRoleId:f,isEditing:g,deletingRoleId:x,getPermissionLabel:p})=>{const y=!i&&n.length===0;return a.jsxs("div",{className:"flex h-full flex-col",children:[a.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Rôles existants"}),a.jsxs("button",{type:"button",onClick:o,className:"inline-flex items-center rounded-md border border-brand-primary px-2 py-1 text-sm font-medium text-brand-primary transition-colors hover:bg-brand-primary/10",children:[a.jsx(Ci,{className:"mr-1.5 h-4 w-4"}),"Nouveau rôle"]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto rounded-md border border-gray-200 p-3",children:i?a.jsx("p",{className:"text-sm text-gray-900",children:"Chargement des rôles..."}):y?a.jsx("p",{className:"text-sm text-gray-900",children:"Aucun rôle configuré pour le moment."}):a.jsx("div",{className:"space-y-3",children:n.map(v=>{const N=g&&f===v.id;return a.jsxs("div",{className:`flex items-center justify-between rounded-md border px-3 py-2 transition-colors ${N?"border-brand-primary bg-brand-primary/10":"border-gray-200"}`,children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"font-semibold text-gray-900",children:v.name}),a.jsxs("p",{className:"text-xs font-medium text-gray-900",children:["PIN : ",v.pin??"—"]}),v.homePage&&a.jsxs("p",{className:"text-xs font-medium text-gray-900",children:["Accueil : ",p(v.homePage)]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:()=>c(v),className:"rounded-md border border-gray-300 px-2 py-1 text-xs font-semibold text-gray-900 transition-colors hover:bg-gray-100",children:"Modifier"}),a.jsxs("button",{type:"button",onClick:()=>u(v.id),disabled:x===v.id,className:"inline-flex items-center rounded-md border border-red-300 px-2 py-1 text-xs font-semibold text-red-600 transition-colors hover:bg-red-50 disabled:cursor-not-allowed disabled:opacity-60",children:[a.jsx(kn,{className:"mr-1 h-3 w-3"}),"Supprimer"]})]})]},v.id)})})})]})};var Gh;const L2=((Gh=na[0])==null?void 0:Gh.permissionKey)??"/dashboard",q2=n=>{if(!n)return!1;const i=n.trim().toLowerCase();return i===hg.ADMIN||i==="administrateur"},bn=(n,i,o={})=>{const c={...n||{}};return delete c[Sn],na.forEach(u=>{u.permissionKey in c||(u.permissionKey===gs&&q2(i)?c[u.permissionKey]="editor":c[u.permissionKey]="none")}),Object.keys(o).forEach(u=>{u in c||(c[u]="none")}),c},yn=n=>{const i=na.find(o=>vn(n[o.permissionKey]));return(i==null?void 0:i.permissionKey)??L2},kh=n=>{const i=bn(void 0,void 0,n);return{name:"",pin:"",permissions:i,homePage:yn(i),customPermissions:{...n}}},vn=n=>n==="editor"||n==="readonly",B2=({isOpen:n,onClose:i})=>{const{refreshRole:o,role:c}=Fa(),[u,f]=h.useState([]),[g,x]=h.useState({}),[p,y]=h.useState(()=>kh({})),[v,N]=h.useState("create"),[j,S]=h.useState(!1),[w,T]=h.useState(!1),[C,I]=h.useState(null),[L,Q]=h.useState(null),[D,H]=h.useState(null),se=h.useMemo(()=>{const F=na.map(B=>B.permissionKey),R=new Set;return Object.keys(g).forEach(B=>{F.includes(B)||R.add(B)}),u.forEach(B=>{Object.keys(B.permissions).forEach(M=>{M!==Sn&&(F.includes(M)||R.add(M))})}),[...F,...Array.from(R)]},[u,g]),W=h.useMemo(()=>na.some(F=>vn(p.permissions[F.permissionKey])),[p.permissions]),X=h.useCallback(async()=>{S(!0);try{const F=await ye.getRoles();f(F),x(R=>{const B={...R};let M=!1;const ce=new Set(na.map(de=>de.permissionKey));return F.forEach(de=>{Object.keys(de.permissions).forEach(be=>{be===Sn||ce.has(be)||be in B||(B[be]=be,M=!0)})}),M?B:R}),H(null)}catch(F){console.error("Failed to load roles:",F),H("Impossible de charger les rôles.")}finally{S(!1)}},[]),re=h.useCallback(()=>{N("create"),y(kh(g))},[g]);h.useEffect(()=>{n&&(Q(null),H(null),re(),X())},[n,X,re]),h.useEffect(()=>{y(F=>{const R=F.homePage;if(vn(F.permissions[R]))return F;const B=yn(F.permissions);return B===R?F:{...F,homePage:B}})},[p.permissions]),h.useEffect(()=>{y(F=>{const R=F.customPermissions,B=g,M=Object.keys(R),ce=Object.keys(B);if(M.length===ce.length&&M.every(te=>B[te]===R[te]))return F;const de=bn(F.permissions,F.name,B),be=vn(de[F.homePage])?F.homePage:yn(de);return{...F,customPermissions:{...B},permissions:de,homePage:be}})},[g]);const G=h.useCallback(F=>{const R=na.find(B=>B.permissionKey===F);return R?R.name:g[F]??F},[g]);return{roles:u,formState:p,mode:v,isFetching:j,isSubmitting:w,deletingRoleId:C,statusMessage:L,errorMessage:D,permissionKeys:se,hasAccessibleHomePage:W,handleInputChange:F=>{const{name:R,value:B}=F.target;y(M=>({...M,[R]:B}))},handlePermissionChange:(F,R)=>{y(B=>({...B,permissions:{...B.permissions,[F]:R}}))},handleHomePageChange:F=>{y(R=>({...R,homePage:F}))},handleSelectRole:F=>{const R=new Set(na.map(de=>de.permissionKey)),B={...g};let M=!1;Object.keys(F.permissions).forEach(de=>{de===Sn||R.has(de)||de in B||(B[de]=de,M=!0)}),M&&x(B);const ce=bn(F.permissions,F.name,M?B:g);N("edit"),y({id:F.id,name:F.name,pin:F.pin??"",permissions:ce,homePage:F.homePage??yn(ce),customPermissions:{...M?B:g}}),Q(null),H(null)},handleDeleteRole:async F=>{if(confirm("Supprimer ce rôle ? Cette action est irréversible.")){I(F),Q(null),H(null);try{await ye.deleteRole(F),Q("Rôle supprimé avec succès."),v==="edit"&&p.id===F&&re(),await X(),(c==null?void 0:c.id)===F&&await o()}catch(R){console.error("Failed to delete role:",R),H("Impossible de supprimer le rôle.")}finally{I(null)}}},handleSubmit:async F=>{if(F.preventDefault(),H(null),Q(null),!p.name.trim()||!p.pin.trim()){H("Le nom et le code PIN sont obligatoires.");return}T(!0);try{const R=bn(p.permissions,p.name,g),B=vn(R[p.homePage])?p.homePage:yn(R);if(v==="create")await ye.createRole({name:p.name.trim(),pin:p.pin.trim(),permissions:R,homePage:B}),Q("Rôle créé avec succès."),await X(),await o(),re();else if(p.id){const M=await ye.updateRole(p.id,{name:p.name.trim(),pin:p.pin.trim(),permissions:R,homePage:B});Q("Rôle mis à jour avec succès.");const ce=bn(M.permissions,M.name,g);y({id:M.id,name:M.name,pin:M.pin??"",permissions:ce,homePage:M.homePage??yn(ce),customPermissions:{...g}}),await X(),(c==null?void 0:c.id)===M.id&&await o()}}catch(R){console.error("Failed to save role:",R),H("Impossible d'enregistrer le rôle.")}finally{T(!1)}},handleClose:()=>{re(),Q(null),H(null),i()},resetForm:re,getPermissionLabel:G,isPermissionGranted:vn,handleAddCustomPermission:(F,R)=>{na.some(B=>B.permissionKey===F)||x(B=>{if(B[F]===R)return B;const M={...B,[F]:R};return y(ce=>{const de=bn(ce.permissions,ce.name,M);return F in de||(de[F]="none"),{...ce,customPermissions:{...M},permissions:de}}),M})},handleRemoveCustomPermission:F=>{na.some(R=>R.permissionKey===F)||x(R=>{if(!(F in R))return R;const B={...R};return delete B[F],y(M=>{const{[F]:ce,...de}=M.customPermissions,be={...M.permissions};delete be[F];const te=bn(be,M.name,B),ie=vn(te[M.homePage])?M.homePage:yn(te);return{...M,customPermissions:{...de},permissions:te,homePage:ie}}),B})}}},I2=({isOpen:n,onClose:i})=>{const{roles:o,formState:c,mode:u,isFetching:f,isSubmitting:g,deletingRoleId:x,statusMessage:p,errorMessage:y,permissionKeys:v,hasAccessibleHomePage:N,handleInputChange:j,handlePermissionChange:S,handleHomePageChange:w,handleSelectRole:T,handleDeleteRole:C,handleSubmit:I,handleClose:L,resetForm:Q,getPermissionLabel:D,isPermissionGranted:H,handleAddCustomPermission:se,handleRemoveCustomPermission:W}=B2({isOpen:n,onClose:i});return a.jsx(zt,{isOpen:n,onClose:L,title:"Gestion des rôles",size:"xl",children:a.jsxs("div",{className:"flex flex-col gap-6",children:[p&&a.jsx("div",{className:"rounded-md bg-green-100 px-4 py-2 text-sm font-medium text-green-900",children:p}),y&&a.jsx("div",{className:"rounded-md bg-red-100 px-4 py-2 text-sm font-medium text-red-900",children:y}),a.jsxs("div",{className:"flex flex-col gap-6 md:flex-row md:items-start md:gap-8",children:[a.jsx("div",{className:"md:w-[38%] md:flex-shrink-0 lg:w-[35%]",children:a.jsx(U2,{roles:o,isFetching:f,onCreateRole:Q,onSelectRole:T,onDeleteRole:C,selectedRoleId:c.id,isEditing:u==="edit",deletingRoleId:x,getPermissionLabel:D})}),a.jsx("div",{className:"flex-1",children:a.jsx(R2,{mode:u,formState:c,onSubmit:I,onInputChange:j,onHomePageChange:w,onPermissionChange:S,onAddCustomPermission:se,onRemoveCustomPermission:W,onCancel:Q,isSubmitting:g,hasAccessibleHomePage:N,permissionKeys:v,getPermissionLabel:D,isPermissionGranted:H})})]})]})})},H2=new Intl.NumberFormat("fr-FR",{maximumFractionDigits:1,minimumFractionDigits:0}),yi=n=>H2.format(Number.isFinite(n)?n:0),Hs=(n,i)=>i==null?null:i===0?n===0?0:100:(n-i)/Math.abs(i)*100,$s=({title:n,value:i,icon:o,helper:c,comparison:u,previousValue:f})=>{const g=typeof u=="number"?u:null,x=g!==null,p=x&&g!==0?g>0?"+":"−":"",y=x?yi(Math.abs(g)):null,v=x?g<0?"text-red-600":"text-emerald-600":"text-gray-500",N=f!=null;return a.jsxs("div",{className:"ui-card flex min-w-0 flex-col gap-4 p-5",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"rounded-xl bg-brand-primary/10 p-3 text-brand-primary",children:o}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:n}),a.jsx("p",{className:"mt-2 text-2xl font-bold text-gray-900 sm:text-3xl",children:i}),N?a.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Période précédente : ",a.jsx("span",{className:"font-semibold text-gray-800",children:f}),y?a.jsxs("span",{className:`ml-2 font-semibold ${v}`,children:[p,y,"%"]}):null]}):a.jsxs("p",{className:`mt-1 text-sm font-semibold ${v}`,children:[y?`${p}${y}%`:"N/A",a.jsx("span",{className:"ml-1 text-xs font-medium text-gray-500 sm:text-sm",children:"vs période précédente"})]})]})]}),!N&&c?a.jsx("p",{className:"text-sm text-gray-500",children:c}):null]})},Fr=({title:n,value:i,icon:o,onClick:c})=>a.jsxs("div",{className:`ui-card p-4 flex items-center space-x-3 min-w-0 ${c?"cursor-pointer hover:bg-gray-50":""}`,onClick:c,children:[a.jsx("div",{className:"p-3 bg-gray-100 text-gray-600 rounded-lg",children:o}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500",children:n}),a.jsx("p",{className:"text-lg sm:text-xl xl:text-2xl font-bold text-gray-800 break-words leading-tight",children:i})]})]}),Id={week:{label:"Últimos 7 días",days:7},month:{label:"Últimos 30 días",days:30}},$2=n=>{const{days:i}=Id[n],o=new Date(Ni());o.setDate(o.getDate()+1);const c=new Date(o);return c.setDate(c.getDate()-i),{start:c,end:o}},G2=()=>{const[n,i]=h.useState(null),[o,c]=h.useState([]),[u,f]=h.useState(!0),[g,x]=h.useState("category"),[p,y]=h.useState(!1),[v,N]=h.useState(!1),[j,S]=h.useState("week"),w=h.useCallback(async()=>{const{start:B,end:M}=$2(j),ce=B.toISOString(),de=M.toISOString();f(!0);try{const[be,te]=await Promise.all([ye.getDashboardStats(j),ye.getSalesByProduct({start:ce,end:de})]);i(be),c(te)}catch(be){console.error("Failed to fetch dashboard stats",be)}finally{f(!1)}},[j]);if(h.useEffect(()=>{w()},[w]),h.useEffect(()=>{const B=ye.notifications.subscribe("orders_updated",()=>{w()});return()=>{B()}},[w]),u)return a.jsx("div",{className:"text-gray-800",children:"Cargando datos del panel..."});if(!n)return a.jsx("div",{className:"text-red-500",children:"No fue posible cargar los datos."});const T=["#0088FE","#00C49F","#FFBB28","#FF8042","#AF19FF","#FF4560","#775DD0"],C=g==="category"?n.ventesParCategorie:o,I=C.length>0,L=Id[j],Q=n.ventesPeriodePrecedente,D=Hs(n.ventesPeriode,n.ventesPeriodePrecedente),H=n.ventesPeriode>0?n.beneficePeriode/n.ventesPeriode*100:null,se=n.ventesPeriodePrecedente>0?n.beneficePeriodePrecedente/n.ventesPeriodePrecedente*100:null,W=n.commandesPeriode,X=L.days>0?n.ventesPeriode/L.days:0,re=n.clientsPeriode>0?n.ventesPeriode/n.clientsPeriode:0,G=L.days>0?W/L.days:0,Z=L.days>0?n.clientsPeriode/L.days:0,A=n.commandesPeriodePrecedente>0?n.ventesPeriodePrecedente/n.commandesPeriodePrecedente:0,K=n.clientsPeriodePrecedente>0?n.ventesPeriodePrecedente/n.clientsPeriodePrecedente:0,q=L.days>0?n.ventesPeriodePrecedente/L.days:0,le=Hs(n.beneficePeriode,n.beneficePeriodePrecedente),_=H!==null?Hs(H,se??null):null,E=Hs(W,n.commandesPeriodePrecedente),z=Hs(n.panierMoyen,A),P=Hs(re,K),F=Hs(n.clientsPeriode,n.clientsPeriodePrecedente),R=Hs(X,q);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[a.jsx("div",{className:"inline-flex rounded-lg bg-gray-100 p-1 text-sm font-semibold text-gray-600",children:Object.entries(Id).map(([B,M])=>{const ce=B,de=j===ce;return a.jsx("button",{onClick:()=>S(ce),className:`px-3 py-1.5 rounded-md transition-colors ${de?"bg-white text-gray-900 shadow":"hover:text-gray-900"}`,children:M.label},ce)})}),a.jsxs("button",{onClick:()=>N(!0),className:"ui-btn-primary",children:[a.jsx(Vv,{className:"mr-2 h-4 w-4"}),"Gestión de roles"]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 xl:grid-cols-4",children:[a.jsx($s,{title:`Chiffre d'affaires (${n.periodLabel})`,value:me(n.ventesPeriode),icon:a.jsx(oo,{size:24}),comparison:D,previousValue:me(Q)}),a.jsx($s,{title:"Bénéfice net",value:me(n.beneficePeriode),icon:a.jsx(fg,{size:24}),comparison:le,previousValue:me(n.beneficePeriodePrecedente)}),a.jsx($s,{title:"Marge bénéficiaire",value:H!==null?`${yi(H)}%`:"0%",icon:a.jsx(_l,{size:24}),comparison:se!==null?_:null,previousValue:se!==null?`${yi(se)}%`:"N/A"}),a.jsx($s,{title:"Commandes traitées",value:bi(W),icon:a.jsx(Kd,{size:24}),comparison:E,helper:`≈ ${yi(G)} commandes / jour`})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 xl:grid-cols-4",children:[a.jsx($s,{title:"Ticket moyen",value:me(n.panierMoyen),icon:a.jsx(Wr,{size:24}),comparison:z,helper:W>0?`Basé sur ${bi(W)} commandes`:"Aucune commande sur la période"}),a.jsx($s,{title:"Revenu par client",value:me(re),icon:a.jsx(i1,{size:24}),comparison:P,helper:n.clientsPeriode>0?`${bi(n.clientsPeriode)} clients servis`:"Aucun client sur la période"}),a.jsx($s,{title:`Clients (${n.periodLabel})`,value:bi(n.clientsPeriode),icon:a.jsx(Rd,{size:24}),comparison:F,helper:`≈ ${yi(Z)} clients / jour`}),a.jsx($s,{title:"Revenu moyen quotidien",value:me(X),icon:a.jsx(oy,{size:24}),comparison:R,helper:`Total période : ${me(n.ventesPeriode)}`})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[a.jsx(Fr,{title:"Mesas ocupadas",value:n.tablesOccupees,icon:a.jsx(Vd,{size:24})}),a.jsx(Fr,{title:"Clientes actuales",value:n.clientsActuels,icon:a.jsx(Rd,{size:24})}),a.jsx(Fr,{title:"En cocina",value:n.commandesEnCuisine,icon:a.jsx(ug,{size:24})}),a.jsx(Fr,{title:"Ingredientes bajos",value:n.ingredientsStockBas.length,icon:a.jsx(Oa,{size:24,className:n.ingredientsStockBas.length>0?"text-red-500":"text-gray-600"}),onClick:()=>y(!0)})]}),a.jsxs("div",{className:"ui-card p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 text-gray-900",children:["Ventas durante ",n.periodLabel]}),a.jsx(Zp,{width:"100%",height:300,children:a.jsxs(_b,{data:n.ventesPeriodeSeries,children:[a.jsx(Nb,{strokeDasharray:"3 3"}),a.jsx(wb,{dataKey:"name"}),a.jsx(Sb,{}),a.jsx(Pp,{}),a.jsx(Jp,{}),a.jsx(Wp,{dataKey:"ventes",fill:"#8884d8",name:`${n.periodLabel}`}),a.jsx(Wp,{dataKey:"ventesPeriodePrecedente",fill:"#d8d6f5",name:"Periodo anterior"})]})})]}),a.jsxs("div",{className:"ui-card p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Distribución de ventas (",n.periodLabel,")"]}),a.jsxs("div",{className:"flex p-1 bg-gray-200 rounded-lg",children:[a.jsx("button",{onClick:()=>x("category"),className:`px-3 py-1 text-sm font-semibold rounded-md ${g==="category"?"bg-white shadow":""}`,children:"Por categoría"}),a.jsx("button",{onClick:()=>x("product"),className:`px-3 py-1 text-sm font-semibold rounded-md ${g==="product"?"bg-white shadow":""}`,children:"Por producto"})]})]}),I?a.jsx(Zp,{width:"100%",height:300,children:a.jsxs(Cb,{children:[a.jsx(kb,{data:C,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:100,fill:"#8884d8",label:!0,children:C.map((B,M)=>a.jsx(Tb,{fill:T[M%T.length]},`cell-${M}`))}),a.jsx(Pp,{formatter:B=>me(B)}),a.jsx(Jp,{})]})}):a.jsx("div",{style:{height:300},className:"flex items-center justify-center text-gray-500",children:"No hay datos para el periodo seleccionado."})]}),a.jsx(zt,{isOpen:p,onClose:()=>y(!1),title:"Ingredientes con inventario bajo",children:n.ingredientsStockBas.length>0?a.jsx("ul",{className:"space-y-2",children:n.ingredientsStockBas.map(B=>a.jsxs("li",{className:"flex justify-between items-center bg-red-50 p-3 rounded-lg",children:[a.jsx("span",{className:"font-semibold text-red-800",children:B.nom}),a.jsxs("span",{className:"font-bold text-red-600",children:[B.stock_actuel," / ",B.stock_minimum," ",B.unite]})]},B.id))}):a.jsx("p",{className:"text-gray-600 text-center",children:"No hay ingredientes con inventario bajo por el momento."})}),a.jsx(I2,{isOpen:v,onClose:()=>N(!1)})]})},Y2=n=>{const i=Number.isFinite(n)?Math.max(0,n):0,o=Math.floor(i/1e3),c=Math.floor(o/60),u=o%60;return`${c.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}`},su=({startTime:n,className:i="",variant:o="default",accentClassName:c,label:u})=>{const[f,g]=h.useState(Date.now()-n);h.useEffect(()=>{const j=setInterval(()=>{g(Date.now()-n)},1e3);return()=>clearInterval(j)},[n]);const x=Math.floor(f/6e4),p=Y2(f),y=u?`${u.trim()} ${p}`:`Tiempo transcurrido ${p}`,N=[o==="chip"?`inline-flex items-center gap-3 rounded-full px-4 py-1.5 text-xs font-semibold uppercase tracking-[0.25em] text-white shadow-lg shadow-slate-900/10 ring-1 ring-inset ring-white/30 ${c??"bg-brand-primary"}`:`flex items-center gap-2 px-3 py-1.5 rounded-full text-lg font-bold border-2 border-white ${x>=20?"bg-red-500 text-white shadow-lg":x>=10?"bg-yellow-400 text-black shadow-md":"bg-brand-primary text-brand-secondary shadow-md ring-1 ring-black/5"}`,i].filter(Boolean).join(" ");return a.jsxs("div",{className:N,role:"timer","aria-live":"polite","aria-label":y,title:y,children:[o==="default"&&a.jsx(hs,{size:20,className:"shrink-0"}),o==="chip"&&u?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-white/70",children:u}),a.jsx("span",{className:"text-lg font-semibold tracking-normal text-white",children:p})]}):a.jsx("span",{className:"text-lg font-semibold tracking-normal text-white",children:p})]})},Th={nom:"",capacite:"",couverts:""},F2=({isOpen:n,onClose:i,mode:o,initialValues:c,onSubmit:u,showCouvertsField:f=!1})=>{const[g,x]=h.useState(Th),[p,y]=h.useState({}),[v,N]=h.useState(null),[j,S]=h.useState(!1),w=h.useMemo(()=>o==="create"?"Ajouter une table":"Modifier la table",[o]);h.useEffect(()=>{if(!n){x(Th),y({}),N(null),S(!1);return}const L={nom:(c==null?void 0:c.nom)??"",capacite:c!=null&&c.capacite?String(c.capacite):"",couverts:f&&(c==null?void 0:c.couverts)!==void 0?String(c.couverts):""};x(L),y({}),N(null)},[c==null?void 0:c.capacite,c==null?void 0:c.couverts,c==null?void 0:c.nom,n,f]);const T=L=>{const{name:Q,value:D}=L.target;x(H=>({...H,[Q]:D}))},C=()=>{const L={},Q=g.nom.trim(),D=g.capacite.trim();Q||(L.nom="Le nom est requis.");let H=null;if(!D)L.capacite="La capacité est requise.";else{const se=Number(D);!Number.isInteger(se)||se<=0?L.capacite="La capacité doit être un entier positif.":H=se}if(f){const se=g.couverts.trim();if(!se)L.couverts="Le nombre de couverts est requis.";else{const W=Number(se);!Number.isInteger(W)||W<=0?L.couverts="Les couverts doivent être un entier positif.":H!==null&&W>H&&(L.couverts="Les couverts ne peuvent pas dépasser la capacité.")}}return L},I=async L=>{L.preventDefault(),y({}),N(null);const Q=C();if(Object.keys(Q).length>0){y(Q);return}const D={nom:g.nom.trim(),capacite:Number(g.capacite.trim())};if(f){const H=g.couverts.trim();H&&(D.couverts=Number(H))}S(!0);try{await u(D)}catch(H){const se=H instanceof Error&&H.message?H.message:"Une erreur est survenue. Veuillez réessayer.";N(se)}finally{S(!1)}};return a.jsx(zt,{isOpen:n,onClose:i,title:w,size:"md",children:a.jsxs("form",{onSubmit:I,className:"space-y-5",children:[v&&a.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:v}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"table-name",className:"block text-sm font-medium text-gray-700",children:"Nom de la table"}),a.jsx("input",{id:"table-name",name:"nom",type:"text",className:"ui-input mt-1",value:g.nom,onChange:T,disabled:j,placeholder:"Ex. Terrasse 1",autoFocus:!0}),p.nom&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.nom})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"table-capacity",className:"block text-sm font-medium text-gray-700",children:"Capacité (nombre de places)"}),a.jsx("input",{id:"table-capacity",name:"capacite",type:"number",min:1,className:"ui-input mt-1",value:g.capacite,onChange:T,disabled:j,placeholder:"Ex. 4"}),p.capacite&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.capacite})]}),f&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"table-couverts",className:"block text-sm font-medium text-gray-700",children:"Couverts (actuels)"}),a.jsx("input",{id:"table-couverts",name:"couverts",type:"number",min:1,className:"ui-input mt-1",value:g.couverts,onChange:T,disabled:j,placeholder:"Ex. 2"}),p.couverts&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.couverts})]}),a.jsxs("div",{className:"flex flex-col gap-3 pt-2 sm:flex-row",children:[a.jsx("button",{type:"button",onClick:i,className:"w-full ui-btn-secondary py-3",disabled:j,children:"Annuler"}),a.jsx("button",{type:"submit",className:"w-full ui-btn-primary py-3 disabled:opacity-60",disabled:j,children:j?"Enregistrement...":"Enregistrer"})]})]})})},Gs={libre:{text:"Libre",statusClass:"status--free",Icon:Vd},en_cuisine:{text:"En cuisine",statusClass:"status--preparing",Icon:m1},para_entregar:{text:"Para entregar",statusClass:"status--ready",Icon:Jy},para_pagar:{text:"Para pagar",statusClass:"status--payment",Icon:oo}},V2=n=>{const i=n.trim();if(!i)return n;const o=i.split(/\s+/);if(o.length<2)return i;const[c,...u]=o;let f=0;for(;f<u.length&&u[f].toLowerCase()===c.toLowerCase();)f+=1;return[c,...u.slice(f)].join(" ")},Q2=n=>{switch(n.statut){case"libre":return Gs.libre;case"en_cuisine":return Gs.en_cuisine;case"para_entregar":return Gs.para_entregar;case"para_pagar":return Gs.para_pagar;default:return n.estado_cocina==="servido"||n.estado_cocina==="entregada"?Gs.para_pagar:n.estado_cocina==="listo"?Gs.para_entregar:n.commandeId?Gs.en_cuisine:Gs.libre}},X2=({table:n,onServe:i,canEdit:o,onEdit:c,onDelete:u,isDeleting:f,onSeatGuests:g})=>{const x=Xs(),{text:p,statusClass:y,Icon:v}=Q2(n),[N,j]=h.useState(!1),S=h.useRef(null),w=()=>{if(n.statut==="libre"&&g){g(n);return}n.commandeId?x(`/commande/${n.id}`):o&&c&&c(n)},T=H=>{(H.key==="Enter"||H.key===" ")&&(H.preventDefault(),w())},C=H=>{H.stopPropagation(),n.commandeId&&i(n.commandeId)},I=H=>{H.stopPropagation(),j(se=>!se)};h.useEffect(()=>{if(!N)return;const H=se=>{S.current&&!S.current.contains(se.target)&&j(!1)};return document.addEventListener("mousedown",H),()=>{document.removeEventListener("mousedown",H)}},[N]);const L=H=>{H.stopPropagation(),j(!1),c==null||c(n)},Q=async H=>{if(H.stopPropagation(),j(!1),!!u)try{await u(n)}catch(se){console.error("Failed to delete table from card:",se)}},D=V2(n.nom);return a.jsxs("div",{onClick:w,onKeyDown:T,className:`ui-card status-card ${y} relative h-full`,role:"button",tabIndex:0,children:[n.statut==="para_entregar"&&n.readyOrdersCount&&n.readyOrdersCount>0&&a.jsx("div",{className:"absolute left-3 top-3 z-10",children:a.jsx("span",{className:"table-notification-badge",children:n.readyOrdersCount})}),o&&a.jsxs("div",{className:"absolute right-3 top-3",ref:S,children:[a.jsx("button",{type:"button",onClick:I,className:"flex h-9 w-9 items-center justify-center rounded-full text-gray-500 transition hover:bg-gray-100 hover:text-gray-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 disabled:cursor-not-allowed disabled:opacity-60","aria-haspopup":"menu","aria-expanded":N,"aria-label":"Options de la table",disabled:f,children:a.jsx(lg,{size:18})}),N&&a.jsxs("div",{className:"absolute right-0 mt-2 w-44 rounded-md border border-gray-200 bg-white py-1 text-sm shadow-lg",children:[a.jsxs("button",{type:"button",onClick:L,className:"flex w-full items-center gap-2 px-3 py-2 text-left text-gray-700 transition hover:bg-gray-100",children:[a.jsx(Ev,{size:16}),"Modifier"]}),a.jsxs("button",{type:"button",onClick:Q,className:"flex w-full items-center gap-2 px-3 py-2 text-left text-red-600 transition hover:bg-red-50 disabled:cursor-not-allowed disabled:opacity-60",disabled:f,children:[a.jsx(kn,{size:16}),f?"Suppression…":"Supprimer"]})]})]}),a.jsxs("div",{className:"status-card__header",children:[a.jsx("h3",{className:"status-card__title",children:D}),n.date_envoi_cuisine&&n.statut!=="libre"&&a.jsx("div",{className:"status-card__timer",children:a.jsx(su,{startTime:n.date_envoi_cuisine,className:"w-full justify-center"})})]}),a.jsxs("div",{className:"status-card__body",children:[a.jsx(v,{size:56,className:"status-card__icon"}),a.jsx("p",{className:"status-card__state",children:p})]}),(n.estado_cocina==="listo"||n.statut==="para_entregar")&&a.jsx("div",{className:"status-card__footer",children:a.jsx("button",{type:"button",onClick:C,className:"ui-btn ui-btn-accent status-card__cta",children:"ENTREGADA"})})]})},K2=()=>{var xe;const{role:n}=Fa(),i=((xe=n==null?void 0:n.permissions)==null?void 0:xe["/ventes"])==="editor",o=Xs(),[c,u]=h.useState([]),[f,g]=h.useState(!0),[x,p]=h.useState(null),[y,v]=h.useState(null),[N,j]=h.useState(null),[S,w]=h.useState(!1),[T,C]=h.useState("create"),[I,L]=h.useState(null),[Q,D]=h.useState(null),[H,se]=h.useState(!1),[W,X]=h.useState(null),[re,G]=h.useState(null),[Z,A]=h.useState(null),[K,q]=h.useState(!1),le=h.useRef(0),_=h.useCallback(async()=>{const we=++le.current;try{const Me=await ye.getTables();we===le.current&&(u(Me),p(null))}catch(Me){console.error("Failed to fetch tables",Me),we===le.current&&p("Impossible de charger le plan de salle. Veuillez réessayer.")}finally{we===le.current&&g(!1)}},[]);h.useEffect(()=>{g(!0),_();const we=setInterval(_,1e4),Me=ye.notifications.subscribe("orders_updated",_);return()=>{clearInterval(we),Me()}},[_]);const E=h.useCallback(()=>{w(!1),L(null)},[]),z=h.useCallback(()=>{C("create"),L(null),v(null),j(null),w(!0)},[]),P=h.useCallback(we=>{C("edit"),L(we),v(null),j(null),w(!0)},[]),F=h.useCallback(we=>{X(we);const Me=we.couverts??null;G(typeof Me=="number"&&Me>=1&&Me<=10?Me:null),A(null),v(null),j(null),se(!0)},[v,j]),R=h.useCallback(()=>{K||(se(!1),X(null),G(null),A(null))},[K]),B=h.useCallback(async we=>{if(W){if(!Number.isInteger(we)||we<=0){A("Veuillez sélectionner un nombre de couverts valide.");return}q(!0),A(null),v(null);try{await ye.createOrGetOrderByTableId(W.id,{couverts:we}),se(!1),X(null),G(null),await _(),o(`/commande/${W.id}`)}catch(Me){console.error("Failed to open table with couverts:",Me),v("Impossible d'ouvrir la table. Veuillez réessayer.")}finally{q(!1)}}},[_,o,W]),M=h.useCallback(we=>{K||(G(we),A(null),B(we))},[B,K]),ce=h.useCallback(async we=>{v(null),j(null);try{let Me="";if(T==="create")await ye.createTable(we),Me="Table créée avec succès.";else{if(!I){const Je="Aucune table sélectionnée pour la mise à jour.";throw v(Je),new Error(Je)}await ye.updateTable(I.id,we),Me="Table mise à jour avec succès."}await _(),E(),j(Me)}catch(Me){console.error("Failed to save table:",Me);const Je=T==="create"?"Impossible de créer la table. Veuillez réessayer.":"Impossible de mettre à jour la table. Veuillez réessayer.";throw v(Je),new Error(Je)}},[_,E,T,I]),de=h.useCallback(async we=>{if(confirm("Supprimer cette table ? Cette action est irréversible.")){v(null),j(null),D(we.id);try{await ye.deleteTable(we.id),await _(),j("Table supprimée avec succès.")}catch(Me){console.error("Failed to delete table:",Me),v("Impossible de supprimer la table. Veuillez réessayer.")}finally{D(null)}}},[_]),be=h.useCallback(async we=>{v(null),j(null);const Me=c.find(Je=>Je.commandeId===we);if(Me){u(Je=>Je.map(Dt=>Dt.id===Me.id?{...Dt,statut:"para_pagar",estado_cocina:"servido"}:Dt));try{await ye.markOrderAsServed(we),await _()}catch(Je){console.error("Failed to mark order as served:",Je),v("Impossible de marquer la commande comme servie. Veuillez réessayer."),await _()}}},[_,c]);if(f)return a.jsx("p",{className:"section-text section-text--muted",children:"Chargement du plan de salle..."});const te=T==="edit"&&I?{nom:I.nom,capacite:I.capacite,couverts:I.couverts}:void 0,ie=T==="edit"&&!!(I!=null&&I.commandeId);return a.jsxs("div",{children:[a.jsxs("div",{className:"flex flex-col gap-4",children:[i&&a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{type:"button",onClick:z,className:"ui-btn ui-btn-primary flex items-center gap-2",children:[a.jsx(Ci,{size:18}),"Ajouter une table"]})}),x&&a.jsx("div",{className:"rounded-md border border-amber-200 bg-amber-50 p-4 text-sm text-amber-700",children:x}),y&&a.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 p-4 text-sm text-red-700",children:y}),N&&a.jsx("div",{className:"rounded-md border border-emerald-200 bg-emerald-50 p-4 text-sm text-emerald-700",children:N})]}),a.jsx("div",{className:"mt-6 status-grid",children:c.map(we=>a.jsx(X2,{table:we,onServe:be,canEdit:!!i,onEdit:P,onDelete:de,isDeleting:Q===we.id,onSeatGuests:F},we.id))}),a.jsx(zt,{isOpen:H,onClose:R,title:"CUBIERTOS",size:"sm",children:a.jsxs("div",{className:"space-y-5 text-left",children:[a.jsx("div",{className:"grid grid-cols-5 gap-3",children:Array.from({length:10},(we,Me)=>{const Je=Me+1,Dt=re===Je;return a.jsx("button",{type:"button",onClick:()=>M(Je),disabled:K,className:`flex h-12 w-12 items-center justify-center rounded-md border text-lg font-semibold transition-colors focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary-500 ${Dt?"border-primary-500 bg-primary-50 text-primary-600":"border-gray-300 bg-white text-gray-900 hover:border-primary-400 hover:text-primary-600"} ${K?"cursor-not-allowed opacity-50":""}`,"aria-pressed":Dt,children:Je},Je)})}),Z&&a.jsx("p",{className:"text-sm text-red-600",children:Z}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"button",onClick:R,className:"ui-btn ui-btn-secondary",disabled:K,children:"Annuler"})})]})}),a.jsx(F2,{isOpen:S,onClose:E,mode:T,initialValues:te,onSubmit:ce,showCouvertsField:ie})]})},Z2=({isOpen:n,onClose:i,order:o,onFinalize:c})=>{const[u,f]=h.useState("efectivo"),[g,x]=h.useState(null),[p,y]=h.useState(!1),v=async N=>{N.preventDefault(),u&&(y(!0),await c(u,g),y(!1),i())};return a.jsx(zt,{isOpen:n,onClose:i,title:`Finalizar el pedido #${o.id.slice(-4)}`,children:a.jsxs("form",{onSubmit:v,className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-gray-600",children:"Total a pagar"}),a.jsx("p",{className:"text-4xl font-extrabold text-gray-900",children:me(o.total)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Método de pago"}),a.jsxs("select",{value:u,onChange:N=>f(N.target.value),className:"mt-1 ui-select",children:[a.jsx("option",{value:"efectivo",children:"Efectivo"}),a.jsx("option",{value:"transferencia",children:"Transferencia"}),a.jsx("option",{value:"tarjeta",children:"Tarjeta"})]})]}),u==="transferencia"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Comprobante (opcional)"}),a.jsxs("label",{htmlFor:"payment-receipt",className:"mt-1 flex w-full cursor-pointer items-center gap-2 rounded-lg border border-gray-300 bg-white p-2 text-gray-500 shadow-sm hover:bg-gray-50",children:[a.jsx(Nl,{size:18}),a.jsx("span",{children:g?g.name:"Selecciona un archivo..."})]}),a.jsx("input",{id:"payment-receipt",type:"file",accept:"image/*,.pdf",onChange:N=>x(N.target.files?N.target.files[0]:null),className:"hidden"})]}),a.jsxs("div",{className:"pt-4 flex flex-col sm:flex-row gap-3",children:[a.jsx("button",{type:"button",onClick:i,className:"w-full ui-btn-secondary py-3",children:"Cancelar"}),a.jsx("button",{type:"submit",disabled:p,className:"w-full ui-btn-success py-3 disabled:opacity-60",children:p?"Finalizando...":"Confirmar pago"})]})]})})},P2=n=>n??"",J2=n=>!n||n.length===0?[]:n.slice().sort(),so=(n=[])=>{const i=new Map;for(const o of n)i.set(o.id,{quantite:o.quantite,commentaire:P2(o.commentaire),excludedIngredients:J2(o.excluded_ingredients)});return{size:n.length,itemsById:i}},Eh=(n,i)=>{if(n===i)return!0;if(n.size!==i.size)return!1;for(const[o,c]of n.itemsById){const u=i.itemsById.get(o);if(!u||c.quantite!==u.quantite||c.commentaire!==u.commentaire||c.excludedIngredients.length!==u.excludedIngredients.length)return!1;for(let f=0;f<c.excludedIngredients.length;f+=1)if(c.excludedIngredients[f]!==u.excludedIngredients[f])return!1}return!0},W2=({filteredProducts:n,quantities:i,onAdd:o,activeCategoryId:c,categories:u,onSelectCategory:f,isProductAvailable:g,handleProductPointerDown:x,handleProductKeyDown:p})=>a.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[a.jsx("div",{className:"border-b border-gray-200/30 p-2",children:a.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",children:[a.jsx("button",{onClick:()=>f("all"),className:`shrink-0 rounded-full px-3 py-1.5 text-sm font-semibold whitespace-nowrap transition ${c==="all"?"bg-brand-primary text-brand-secondary shadow":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Tous"}),u.map(y=>a.jsx("button",{onClick:()=>f(y.id),className:`shrink-0 rounded-full px-3 py-1.5 text-sm font-semibold whitespace-nowrap transition ${c===y.id?"bg-brand-primary text-brand-secondary shadow":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:y.nom},y.id))]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:a.jsx("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2 lg:grid-cols-3",children:n.map(y=>{const v=!g(y),N=i[y.id]||0,j=N>0,S=()=>o(y),w=x(y),T=p(y);return a.jsxs("button",{type:"button",onClick:S,onPointerDown:w,onKeyDown:T,className:`relative flex flex-col items-center rounded-xl p-2 text-center transition-all focus:outline-none focus:ring-2 focus:ring-brand-primary focus:ring-offset-2 focus:ring-offset-gray-900 ${j?"bg-gradient-to-br from-amber-500 via-orange-500 to-red-500 text-white shadow-xl shadow-orange-500/30":"border border-gray-200 bg-white text-black hover:shadow-lg"} ${v&&!j?"border-2 border-yellow-500":""}`,children:[N>0&&a.jsx("div",{className:"absolute left-1 top-1 flex h-5 w-5 items-center justify-center rounded-full bg-brand-accent text-xs font-bold text-white",children:N}),v&&a.jsx("div",{className:`absolute right-1 top-1 rounded-full p-1 ${j?"bg-black/30 text-white":"bg-yellow-500 text-white"}`,title:"Stock bas",children:a.jsx(Oa,{size:16})}),a.jsx("img",{src:y.image,alt:y.nom_produit,className:"mb-1.5 aspect-square w-full rounded-md object-cover"}),a.jsx("p",{className:`text-[clamp(0.85rem,1.6vw,0.95rem)] font-semibold leading-tight ${j?"text-white":"text-black"} text-balance text-center break-words whitespace-normal [hyphens:auto]`,style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:y.nom_produit}),a.jsx("p",{className:`mt-0.5 w-full text-[0.7rem] ${j?"text-white/90":"text-black/70"} text-center leading-tight`,style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:y.description}),a.jsx("p",{className:`mt-1.5 font-bold text-sm ${j?"text-white":"text-black"}`,children:me(y.prix_vente)})]},y.id)})})})]}),ej=h.memo(W2),tj=({categorizedItems:n,order:i,total:o,onQuantityChange:c,onCommentChange:u,onPersistComment:f,onStartEditingComment:g,onSendToKitchen:x,onServeOrder:p,onOpenPayment:y,isSending:v,hasPending:N,orderStatus:j,editingCommentId:S,className:w})=>{var C;const T=n.pending.length+n.sent.length;return a.jsxs("div",{className:`ui-card flex flex-col ${w??""}`,children:[a.jsx("div",{className:"p-4 border-b",children:a.jsx("h2",{className:"text-2xl font-semibold text-brand-secondary",children:"Commande"})}),a.jsx("div",{className:"flex-1 space-y-3 overflow-y-auto p-4",children:T===0?a.jsx("p",{className:"text-gray-500",children:"La commande est vide."}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-brand-secondary",children:"Articles à envoyer"}),a.jsx("span",{className:"text-sm text-gray-500",children:n.pending.length})]}),n.pending.length===0?a.jsx("p",{className:"text-sm text-gray-500",children:"Aucun article en attente."}):n.pending.map(({item:I,index:L})=>a.jsxs("div",{className:"p-3 rounded-lg bg-yellow-100",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex flex-1 items-center gap-3",children:[a.jsx("span",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-full bg-yellow-500 text-base font-bold text-white shadow-md",children:I.quantite}),a.jsx("p",{className:"font-bold text-gray-900 text-[clamp(0.95rem,1.9vw,1.2rem)] leading-snug break-words text-balance whitespace-normal [hyphens:auto]",children:I.nom_produit})]}),a.jsx("p",{className:"font-bold text-gray-900 whitespace-nowrap",children:me(I.quantite*I.prix_unitaire)})]}),a.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("p",{className:"text-sm text-gray-700",children:[me(I.prix_unitaire)," /u"]}),a.jsxs("div",{className:"flex items-center gap-2 text-gray-800",children:[a.jsx("button",{onClick:()=>c(L,-1),className:"rounded-full p-1 transition hover:bg-yellow-200",children:a.jsx(ky,{size:20})}),a.jsx("span",{className:"font-bold w-6 text-center",children:I.quantite}),a.jsx("button",{onClick:()=>c(L,1),className:"rounded-full p-1 transition hover:bg-yellow-200",children:a.jsx(Qd,{size:20})})]})]}),S===I.id||I.commentaire?a.jsx("input",{type:"text",placeholder:"Ajouter un commentaire...",value:I.commentaire??"",onChange:Q=>u(L,Q.target.value),onBlur:()=>f(L),autoFocus:S===I.id,className:"mt-2 ui-input text-sm"}):a.jsxs("button",{onClick:()=>g(I.id),className:"mt-2 text-xs text-blue-600 hover:underline flex items-center gap-1",children:[a.jsx(og,{size:12})," Ajouter un commentaire"]})]},I.id))]}),n.sent.length>0&&a.jsxs("div",{className:"space-y-3 border-t border-gray-700 pt-6",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-brand-secondary",children:"Envoyés en cuisine"}),a.jsx("span",{className:"text-sm text-gray-500",children:n.sent.length})]}),n.sent.map(({item:I})=>a.jsxs("div",{className:"p-3 rounded-lg bg-green-100",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex flex-1 items-center gap-3",children:[a.jsx("span",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-full bg-green-600 text-base font-bold text-white shadow-md",children:I.quantite}),a.jsx("p",{className:"font-bold text-gray-900 text-[clamp(0.95rem,1.9vw,1.2rem)] leading-snug break-words text-balance whitespace-normal [hyphens:auto]",children:I.nom_produit})]}),a.jsx("p",{className:"font-bold text-gray-900 whitespace-nowrap",children:me(I.quantite*I.prix_unitaire)})]}),a.jsxs("p",{className:"text-sm text-gray-700 mt-2",children:[me(I.prix_unitaire)," /u"]}),I.commentaire&&a.jsxs("p",{className:"mt-2 text-sm italic text-gray-600 pl-2",children:['"',I.commentaire,'"']})]},I.id))]})]})}),a.jsxs("div",{className:"space-y-4 border-t p-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-gray-700",children:[a.jsx("span",{children:"Sous-total"}),a.jsx("span",{children:me(i.subtotal??0)})]}),i.total_discount&&i.total_discount>0&&a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-green-600",children:[a.jsx("span",{children:"Réduction totale"}),a.jsxs("span",{children:["- ",me(i.total_discount)]})]}),i.shipping_cost!==void 0&&i.shipping_cost>0&&a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-gray-700",children:[a.jsx("span",{children:"Frais de livraison"}),a.jsx("span",{children:me(i.shipping_cost)})]}),i.shipping_cost===0&&((C=i.applied_promotions)==null?void 0:C.some(I=>I.type==="FREE_SHIPPING"))&&a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-green-600",children:[a.jsx("span",{children:"Livraison gratuite"}),a.jsx("span",{children:me(0)})]}),a.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-between gap-2 border-t pt-2 text-2xl font-semibold text-brand-secondary",children:[a.jsx("span",{children:"Total"}),a.jsx("span",{children:me(o)})]})]}),j==="listo"&&a.jsxs("button",{onClick:p,className:"w-full ui-btn-info justify-center py-3",children:[a.jsx(gy,{size:20}),a.jsx("span",{children:"Entregada"})]}),a.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("button",{onClick:x,disabled:v||!N,className:"ui-btn-accent flex-1 justify-center py-3 disabled:opacity-60",children:[a.jsx($v,{size:20}),a.jsx("span",{children:v?"Synchronisation…":"Envoyer en Cuisine"})]}),a.jsxs("button",{onClick:y,disabled:j!=="servido",className:"ui-btn-success flex-1 justify-center py-3 disabled:opacity-60",children:[a.jsx(oo,{size:20}),a.jsx("span",{children:"Payer"})]})]})]})]})},aj=({isOpen:n,product:i,onClose:o,onSave:c})=>{const[u,f]=h.useState(1),[g,x]=h.useState("");if(h.useEffect(()=>{n&&(f(1),x(""))},[n,i==null?void 0:i.id]),!i)return null;const p=()=>{f(N=>Math.max(1,N-1))},y=()=>{f(N=>N+1)},v=()=>{c({quantity:u,comment:g})};return a.jsx(zt,{isOpen:n,onClose:o,title:i.nom_produit,children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("img",{src:i.image,alt:i.nom_produit,className:"w-full h-48 object-cover rounded-lg"}),i.description&&a.jsx("p",{className:"text-gray-200 text-sm",children:i.description}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-200",children:"Commentaire"}),a.jsx("textarea",{value:g,onChange:N=>x(N.target.value),rows:2,className:"mt-1 block w-full rounded-md border border-gray-600 bg-gray-900/60 py-2 px-3 text-sm text-gray-100 focus:border-brand-primary focus:outline-none focus:ring-2 focus:ring-brand-primary",placeholder:"Allergies, instructions spécifiques…"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"button",onClick:p,className:"p-2 rounded-full bg-gray-800 text-gray-100 hover:bg-gray-700","aria-label":"Diminuer la quantité",children:a.jsx(cg,{size:18})}),a.jsx("span",{className:"w-8 text-center text-lg font-bold text-gray-100",children:u}),a.jsx("button",{type:"button",onClick:y,className:"p-2 rounded-full bg-gray-800 text-gray-100 hover:bg-gray-700","aria-label":"Augmenter la quantité",children:a.jsx(Ci,{size:18})})]}),a.jsxs("button",{type:"button",onClick:v,className:"rounded-lg bg-gradient-to-r from-orange-500 via-orange-600 to-red-600 py-2 px-6 font-semibold text-white shadow-md transition-all duration-300 hover:from-orange-600 hover:via-orange-700 hover:to-red-700 focus:outline-none focus:ring-2 focus:ring-orange-400/70 focus:ring-offset-2",children:["Ajouter (",me(i.prix_vente*u),")"]})]})]})})},kd=n=>!!n&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(n),Ia=n=>JSON.parse(JSON.stringify(n)),Mh=(()=>{let n=0;return()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?`tmp-${crypto.randomUUID()}`:(n+=1,`tmp-${Date.now()}-${n}`)})(),Ah=n=>(n??"").trim(),sj=(n=[],i=[])=>{if(n.length!==i.length)return!1;const o=[...n].sort(),c=[...i].sort();return o.every((u,f)=>u===c[f])},nj=(n,i,o,c,u=[])=>{const f=Ah(o.comment),g=f.length===0,x=Number.isFinite(o.quantity)?Math.max(1,Math.floor(o.quantity)):1,p=g?n.findIndex(v=>v.produitRef===i.id&&v.estado==="en_attente"&&Ah(v.commentaire)===""&&sj(v.excluded_ingredients??[],u)):-1;if(p>-1)return n.map((v,N)=>N===p?{...v,quantite:v.quantite+x}:v);const y={id:c(),produitRef:i.id,nom_produit:i.nom_produit,prix_unitaire:i.prix_vente,quantite:x,excluded_ingredients:[...u],commentaire:f,estado:"en_attente"};return[...n,y]},zh=so([]),lj=()=>{const{tableId:n}=xb(),i=Xs(),[o,c]=h.useState(null),[u,f]=h.useState(null),[g,x]=h.useState([]),[p,y]=h.useState([]),[v,N]=h.useState([]),[j,S]=h.useState("all"),[w,T]=h.useState(!0),[C,I]=h.useState(!1),[L,Q]=h.useState(!1),[D,H]=h.useState(null),[se,W]=h.useState(!1),[X,re]=h.useState(null),G=h.useRef(o),Z=h.useRef(u),A=h.useRef(null),K=h.useRef(null),q=h.useRef(null),le=h.useRef(Promise.resolve()),_=h.useRef(null),E=h.useRef(null),z=h.useRef(new Map),P=h.useCallback((ue,pe,Se)=>{if(!pe||pe.length===0)return ue.current=null,zh;const qe=Se??so(pe);return ue.current={source:pe,snapshot:qe},qe},[]),F=h.useCallback((ue,pe)=>{if(!ue||ue.length===0)return pe.current=null,zh;const Se=pe.current;return Se&&Se.source===ue?Se.snapshot:P(pe,ue)},[P]);h.useEffect(()=>{G.current=o},[o]),h.useEffect(()=>{Z.current=u},[u]);const R=h.useCallback(ue=>{const pe=G.current;if(!pe)return!0;const Se=ue??Z.current;if(!Se)return!0;const qe=F(pe.items,_),Ke=ue?so(Se.items):F(Se.items,E);return Eh(Ke,qe)},[F]),B=h.useCallback(()=>{const ue=K.current;if(!ue)return;const pe=so(ue.items);A.current=Ia(ue);const Se=G.current;if(Se){const Ke=F(Se.items,_);if(Eh(Ke,pe)){K.current=null;return}}K.current=null,G.current=ue,c(ue),P(_,ue.items,pe);const qe=Ia(ue);Z.current=qe,f(qe),P(E,qe.items)},[F,P]),M=h.useCallback(async(ue=!1)=>{if(n)try{if(ue||T(!0),ue){const Ee=await ye.createOrGetOrderByTableId(n),Re=Ia(Ee);if(A.current=Re,R()){K.current=null,c(Ee),G.current=Ee,P(_,Ee.items);const ot=Ia(Ee);Z.current=ot,f(ot),P(E,ot.items)}else{const ot=Z.current;ot&&JSON.stringify(ot)===JSON.stringify(Ee)?K.current=null:K.current=Re}return}const[pe,Se,qe,Ke]=await Promise.all([ye.createOrGetOrderByTableId(n),ye.getProducts(),ye.getCategories(),ye.getIngredients()]);A.current=Ia(pe),c(pe),G.current=pe,P(_,pe.items);const Ze=Ia(pe);f(Ze),Z.current=Ze,P(E,Ze.items),x(Se),y(qe),N(Ke),K.current=null}catch(pe){console.error("Failed to load order data",pe),i("/ventes")}finally{ue||T(!1)}},[R,i,n,P]);h.useEffect(()=>{M()},[M]),h.useEffect(()=>{R()&&B()},[B,R,o,u]),h.useEffect(()=>{const ue=ye.notifications.subscribe("orders_updated",()=>M(!0));return()=>ue()},[M]);const ce=h.useMemo(()=>!R(),[R,o,u]),de=h.useMemo(()=>o?o.items.reduce((ue,pe)=>(pe.estado!=="en_attente"||(ue[pe.produitRef]=(ue[pe.produitRef]||0)+pe.quantite),ue),{}):{},[o]),be=h.useMemo(()=>j==="all"?g:g.filter(ue=>ue.categoria_id===j),[j,g]),te=h.useCallback(ue=>{if(!ue.recipe||ue.recipe.length===0)return!0;for(const pe of ue.recipe){const Se=v.find(qe=>qe.id===pe.ingredient_id);if(!Se||Se.stock_actuel<=Se.stock_minimum)return!1}return!0},[v]);h.useEffect(()=>()=>{q.current!==null&&(window.clearTimeout(q.current),q.current=null)},[]);const ie=h.useCallback(async(ue,pe)=>{const Se=G.current;if(!Se)return;const qe=ot=>typeof ue=="function"?ue(ot):ue,Ze=(pe!=null&&pe.isLocalUpdate?Se.items:(pe==null?void 0:pe.removalSourceItems)??Se.items).map(ot=>({...ot})),Ee=qe(Ze),Re={...Se,items:Ee,total:Ee.reduce((ot,Rt)=>ot+Rt.quantite*Rt.prix_unitaire,0)};if(c(Re),G.current=Re,P(_,Re.items),pe!=null&&pe.isLocalUpdate)return;const xt=async()=>{try{let ot=K.current??A.current??null;if(!ot){const yt=await ye.getOrderById(Se.id);yt?(ot=yt,A.current=Ia(yt)):ot=Se}if(!ot)return;const Rt=G.current.items.map(yt=>({...yt})),pa=((pe==null?void 0:pe.removalSourceItems)??Se.items).filter(yt=>kd(yt.id)&&!Rt.some(oe=>oe.id===yt.id)).map(yt=>yt.id),Zt=await ye.updateOrder(Se.id,{items:Rt,removedItemIds:pa},{includeNotifications:!1});c(Zt),G.current=Zt,P(_,Zt.items);const Vt=Ia(Zt);f(Vt),Z.current=Vt,P(E,Vt.items),A.current=Ia(Zt),ye.getIngredients().then(N).catch(yt=>{console.error("Failed to refresh ingredients",yt)}),B()}catch(ot){console.error("Failed to update order:",ot),alert("Une erreur est survenue lors de la mise à jour de la commande."),M(!0)}};le.current=le.current.then(xt,xt),await le.current},[B,M,P]),xe=h.useCallback((ue=300)=>{q.current!==null&&window.clearTimeout(q.current);const pe=ue>0?ue:1;q.current=window.setTimeout(async()=>{if(q.current=null,!G.current)return;const Se=G.current.items.map(Ke=>({...Ke})),qe=A.current?A.current.items.map(Ke=>({...Ke})):Se.map(Ke=>({...Ke}));await ie(Se,{removalSourceItems:qe})},pe)},[ie]),we=h.useCallback(ue=>{G.current&&(ie(ue,{isLocalUpdate:!0}),xe())},[xe,ie]),Me=h.useCallback(ue=>{re(ue)},[]),Je=h.useCallback(()=>{re(null)},[]),Dt=h.useCallback(ue=>{X&&(we(pe=>nj(pe,X,ue,Mh)),re(null))},[we,X]),Ct=h.useCallback((ue,pe)=>{const Se=G.current;if(!Se||!Se.items[ue])return;const qe=Se.items[ue].id,Ke=z.current.get(qe);Ke&&clearTimeout(Ke),we(Ee=>{const Re=Ee.findIndex(Rt=>Rt.id===qe);if(Re===-1)return Ee;const xt=Ee[Re].quantite,ot=Math.max(0,xt+pe);return Ee.map(Rt=>Rt.id===qe?{...Rt,quantite:ot}:Rt)});const Ze=setTimeout(()=>{we(Ee=>{const Re=Ee.find(xt=>xt.id===qe);return Re&&Re.quantite<=0?Ee.filter(xt=>xt.id!==qe):Ee}),z.current.delete(qe)},300);z.current.set(qe,Ze)},[we]),Xt=h.useCallback((ue,pe)=>{const Se=G.current;if(!Se||!Se.items[ue])return;const qe=Se.items[ue].id;ie(Ke=>{const Ze=Ke.findIndex(xt=>xt.id===qe);if(Ze===-1)return Ke;const Ee=Ke.map(xt=>({...xt})),Re=Ee[Ze];if(Re.quantite>1&&!Re.commentaire&&pe){Re.quantite-=1;const xt={...Re,id:Mh(),quantite:1,commentaire:pe};Ee.push(xt),H(xt.id)}else Re.commentaire=pe;return Ee},{isLocalUpdate:!0})},[ie]),ge=h.useCallback(ue=>{G.current&&(ie(G.current.items.map(pe=>({...pe}))),H(null))},[ie]),Ne=h.useCallback(async()=>{if(G.current){W(!0);try{let ue=G.current;for(;ue&&ue.items.some(Ee=>Ee.estado==="en_attente"&&!kd(Ee.id));)await ie(ue.items.map(Ee=>({...Ee}))),ue=G.current;if(ue=G.current,!ue)return;const pe=ue.items.filter(Ee=>Ee.estado==="en_attente");if(pe.length===0)return;if(pe.filter(Ee=>!kd(Ee.id)).length>0){console.warn("Des articles non persistés subsistent après synchronisation, envoi annulé.");return}const qe=pe.map(Ee=>Ee.id),Ke=await ye.sendOrderToKitchen(ue.id,qe);c(Ke),G.current=Ke,P(_,Ke.items);const Ze=Ia(Ke);f(Ze),Z.current=Ze,P(E,Ze.items),i("/ventes")}catch(ue){console.error("Failed to send order to kitchen",ue),alert("Erreur lors de l'envoi en cuisine.")}finally{W(!1)}}},[i,ie,P]),ze=h.useCallback(async()=>{if(o)try{const ue=await ye.markOrderAsServed(o.id);c(ue),G.current=ue,P(_,ue.items)}catch(ue){console.error("Failed to mark order as served",ue)}},[o,P]),dt=async(ue,pe)=>{if(o)try{let Se=o.payment_receipt_url??void 0;if(pe&&pe instanceof File)try{Se=await Ph(pe,{orderId:o.id})}catch(qe){console.error("Failed to upload receipt",qe)}await ye.finalizeOrder(o.id,ue,Se),i("/ventes")}catch(Se){console.error("Failed to finalize order",Se),alert("Erreur lors de la finalisation de la commande. Veuillez réessayer.")}},ke=()=>{if(o&&o.estado_cocina==="no_enviado"&&o.items.length>0){Q(!0);return}ce?Q(!0):i("/ventes")},We=async()=>{try{o&&o.estado_cocina==="no_enviado"?await ye.cancelUnsentTableOrder(o.id):u&&!R(u)&&await ie(u.items)}catch(ue){console.error("Failed to cancel unsent order before exiting",ue)}finally{Q(!1),i("/ventes")}},_t=(o==null?void 0:o.items)??[],Kt=h.useMemo(()=>_t.reduce((ue,pe,Se)=>(pe.estado==="en_attente"?ue.pending.push({item:pe,index:Se}):ue.sent.push({item:pe,index:Se}),ue),{pending:[],sent:[]}),[_t]),ft=h.useCallback(ue=>pe=>{pe.preventDefault(),pe.currentTarget.focus()},[]),Nt=h.useCallback(ue=>pe=>{(pe.key==="Enter"||pe.key===" ")&&(pe.preventDefault(),Me(ue))},[Me]),fa=h.useCallback(()=>{I(!0)},[]),Ra=h.useCallback(ue=>{H(ue)},[]),pt=h.useMemo(()=>Kt.pending.length>0,[Kt]);return w?a.jsx("div",{className:"text-center p-10 text-gray-800",children:"Chargement de la commande..."}):o?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 gap-2 lg:grid-cols-[minmax(0,2.4fr)_minmax(0,1fr)] lg:items-start min-h-screen",children:[a.jsxs("div",{className:"flex h-full flex-col overflow-hidden",children:[a.jsx("div",{className:"p-2",children:a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a.jsxs("button",{onClick:ke,className:"ui-btn-dark text-sm px-3 py-1.5",title:"Retour au plan de salle",children:[a.jsx(ag,{size:18}),a.jsx("span",{children:"Retour plan de salle"})]}),a.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Table ",o.table_nom]})]})}),a.jsx(ej,{filteredProducts:be,quantities:de,onAdd:Me,activeCategoryId:j,categories:p,onSelectCategory:S,isProductAvailable:te,handleProductPointerDown:ft,handleProductKeyDown:Nt})]}),a.jsx("div",{className:"flex flex-col h-full",children:a.jsx("div",{className:"lg:sticky lg:top-2",children:a.jsx(tj,{className:"lg:h-full w-full",categorizedItems:Kt,order:o,total:o.total,onQuantityChange:Ct,onCommentChange:Xt,onPersistComment:ge,onStartEditingComment:Ra,onSendToKitchen:Ne,onServeOrder:ze,onOpenPayment:fa,isSending:se,hasPending:pt,orderStatus:o.estado_cocina,editingCommentId:D})})})]}),a.jsx(aj,{isOpen:X!==null,product:X,onClose:Je,onSave:Dt}),a.jsx(Z2,{isOpen:C,onClose:()=>I(!1),order:o,onFinalize:dt}),a.jsxs(zt,{isOpen:L,onClose:()=>Q(!1),title:"Quitter sans envoyer ?",children:[a.jsx("p",{className:"text-gray-700",children:"Vous avez des articles non envoyés en cuisine. Si vous quittez, ils seront annulés. Voulez-vous continuer ?"}),a.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[a.jsx("button",{onClick:()=>Q(!1),className:"ui-btn-secondary",children:"Non, rester"}),a.jsx("button",{onClick:We,className:"ui-btn-danger",children:"Oui, quitter"})]})]})]}):a.jsx("div",{className:"text-center p-10 text-red-500",children:"Commande non trouvée."})},ij={critical:{border:"border-4 border-solid border-red-500",accent:"bg-red-500 urgency-accent-critical",badge:"bg-red-100 text-red-700 ring-1 ring-inset ring-red-300 urgency-badge-critical",icon:"text-red-500 urgency-icon-critical",background:"bg-red-100"},warning:{border:"border-[3px] border-solid border-yellow-400",accent:"bg-yellow-400 urgency-accent-warning",badge:"bg-yellow-100 text-yellow-800 ring-1 ring-inset ring-yellow-300 urgency-badge-warning",icon:"text-yellow-500 urgency-icon-warning",background:"bg-yellow-100"},normal:{border:"border-2 border-solid border-brand-accent",accent:"bg-brand-accent urgency-accent-normal",badge:"bg-blue-100 text-blue-700 ring-1 ring-inset ring-blue-200 urgency-badge-normal",icon:"text-brand-accent urgency-icon-normal",background:"bg-blue-100"}},rj=n=>{if(!n)return"normal";const i=(Date.now()-n)/6e4;return i>=20?"critical":i>=10?"warning":"normal"},Yg=n=>{const i=rj(n),o=ij[i];return{level:i,border:o.border,accent:o.accent,badge:o.badge,icon:o.icon,background:o.background}},oj=n=>{const i=n.trim().length;return i<=10?"text-[clamp(1.755rem,3.9vw,2.275rem)]":i<=16?"text-[clamp(1.625rem,3.77vw,2.08rem)]":i<=24?"text-[clamp(1.495rem,3.51vw,1.885rem)]":"text-[clamp(1.365rem,3.25vw,1.69rem)]"},cj=({order:n,onReady:i,canMarkReady:o})=>{const c=Yg(n.date_envoi_cuisine||Date.now()),u=h.useMemo(()=>{const p=[],y=new Map;return n.items.forEach(v=>{var T;const N=(T=v.commentaire)==null?void 0:T.trim(),j=N||"no_comment",S=`${v.produitRef}::${j}`;if(N){p.push({key:`${S}::${v.id}`,nom_produit:v.nom_produit,quantite:v.quantite,commentaire:N});return}const w=y.get(S);if(w!==void 0){p[w].quantite+=v.quantite;return}y.set(S,p.length),p.push({key:S,nom_produit:v.nom_produit,quantite:v.quantite})}),p},[n.items]);h.useMemo(()=>n.items.reduce((p,y)=>p+y.quantite,0),[n.items]);const g=new Date(n.date_envoi_cuisine||Date.now()).toLocaleTimeString("es-CO",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),x=n.table_nom||`Para llevar #${n.id.slice(-4)}`;return oj(x),a.jsxs("div",{className:`relative flex h-full flex-col overflow-hidden rounded-xl border text-gray-900 shadow-md transition-shadow duration-300 hover:shadow-lg ${c.border} ${c.background}`,children:[a.jsx("span",{"aria-hidden":!0,className:`absolute inset-y-0 left-0 w-1 ${c.accent}`}),a.jsx("header",{className:"border-b border-gray-200 px-5 pt-3 pb-2",children:a.jsxs("div",{className:"grid gap-2 sm:grid-cols-[minmax(0,1fr)_auto] sm:items-start",children:[a.jsxs("div",{className:"min-w-0 space-y-0.5",children:[a.jsx("h4",{className:"truncate text-base font-semibold leading-tight text-gray-900 sm:text-lg md:text-xl",children:x}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Pedido a las ",g]})]}),a.jsx("div",{className:"flex flex-col items-start gap-1 sm:items-end",children:a.jsx("div",{className:"flex w-full justify-start sm:justify-end",children:a.jsx(su,{startTime:n.date_envoi_cuisine||Date.now(),className:" text-sm sm:text-base"})})})]})}),a.jsx("div",{className:"flex-1 overflow-hidden px-5 pt-2 pb-4",children:a.jsx("div",{className:"flex h-full flex-col gap-1",children:a.jsxs("section",{className:"flex flex-col overflow-hidden gap-1",children:[a.jsx("h5",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-gray-500",children:"Artículos"}),a.jsx("div",{className:"flex-1 overflow-y-auto pr-1",children:u.length>0?a.jsx("ul",{className:"space-y-0.5",children:u.map(p=>{var v;const y=(v=p.commentaire)==null?void 0:v.trim();return a.jsxs("li",{className:"flex items-stretch rounded-lg border border-gray-200 bg-gray-50 text-sm text-gray-900 shadow-sm overflow-hidden min-h-[3.5rem]",children:[a.jsx("div",{className:"flex flex-1 items-center justify-between gap-3 pr-3",children:a.jsxs("div",{className:"flex flex-1 items-center",children:[a.jsx("span",{className:`flex self-stretch w-12 shrink-0 items-center justify-center text-xl font-bold text-white shadow-md ${c.accent} rounded-l-lg`,children:p.quantite}),a.jsx("span",{className:"font-semibold text-gray-900 text-[clamp(1.1rem,2.1vw,1.3rem)] leading-snug break-words text-balance whitespace-normal [hyphens:auto] px-3 py-3",children:p.nom_produit})]})}),y&&a.jsx("p",{className:"mt-2 rounded-md border border-dashed border-blue-200 bg-blue-50 px-3 py-2 text-xs font-medium italic text-blue-800 ml-14 mr-3",children:y})]},p.key)})}):a.jsx("p",{className:"rounded-lg border border-gray-200 bg-gray-50 px-4 py-3 text-xs text-gray-500 shadow-sm",children:"Este pedido aún no tiene artículos registrados."})})]})})}),o&&a.jsx("footer",{className:"border-t border-gray-200 px-5 pb-5 pt-4",children:a.jsx("button",{onClick:()=>i(n.id,n.date_envoi_cuisine),className:"w-full ui-btn ui-btn-success uppercase",type:"button",children:"Listo"})})]})},dj=()=>{const[n,i]=h.useState([]),[o,c]=h.useState(!0),{role:u}=Fa(),f=(u==null?void 0:u.permissions["/cocina"])==="editor",g=h.useCallback(async()=>{try{const p=await ye.getKitchenOrders();i(p)}catch(p){console.error("Failed to fetch kitchen orders",p)}finally{c(!1)}},[]);h.useEffect(()=>{g();const p=setInterval(g,5e3),y=ye.notifications.subscribe("orders_updated",g);return()=>{clearInterval(p),y()}},[g]);const x=async(p,y)=>{try{await ye.markOrderAsReady(p,y),g()}catch(v){console.error("Failed to mark order as ready",v)}};return o?a.jsx("div",{className:"text-gray-700",children:"Cargando pedidos de cocina..."}):a.jsx("div",{className:"flex h-full flex-col",children:n.length===0?a.jsx("div",{className:"mt-6 flex flex-1 items-center justify-center text-2xl text-gray-500",children:"No hay pedidos en preparación."}):a.jsx("div",{className:"mt-6 grid flex-1 grid-cols-1 justify-center gap-4 sm:[grid-template-columns:repeat(auto-fit,minmax(24rem,max-content))] sm:justify-start",children:n.map(p=>a.jsx(cj,{order:p,onReady:x,canMarkReady:f},p.ticketKey))})})},Oh=({order:n,onValidate:i,onDeliver:o,isProcessing:c})=>{var N;const[u,f]=h.useState(!1),g=n.table_nom||`Pedido #${n.id.slice(-6)}`,x=n.date_envoi_cuisine||n.date_creation,p=Yg(x),y=(((N=n.applied_promotions)==null?void 0:N.length)??0)>0,v=y;return a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:`relative flex h-full flex-col overflow-hidden rounded-xl border text-gray-900 shadow-md transition-shadow duration-300 hover:shadow-lg ${p.border} ${p.background}`,children:[a.jsx("span",{"aria-hidden":!0,className:`absolute inset-y-0 left-0 w-1 ${p.accent}`}),a.jsx("header",{className:"border-b border-gray-200 px-5 pt-3 pb-2",children:a.jsxs("div",{className:"grid gap-2 sm:grid-cols-[minmax(0,1fr)_auto] sm:items-start",children:[a.jsxs("div",{className:"min-w-0 space-y-0.5",children:[a.jsx("h4",{className:"truncate text-base font-semibold leading-tight text-gray-900 sm:text-lg md:text-xl",children:g}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Pedido enviado ",new Date(x).toLocaleTimeString("es-CO",{hour:"2-digit",minute:"2-digit"})]})]}),a.jsx("div",{className:"flex flex-col items-start gap-1 sm:items-end",children:a.jsx("div",{className:"flex w-full justify-start sm:justify-end",children:a.jsx(su,{startTime:x,className:" text-sm sm:text-base"})})})]})}),a.jsx("div",{className:"flex-1 overflow-hidden px-5 pt-2 pb-4",children:a.jsxs("div",{className:"flex h-full flex-col gap-1",children:[n.clientInfo&&a.jsxs("section",{className:"space-y-2 rounded-lg border border-gray-200 bg-gray-50 p-3 text-sm text-gray-900 shadow-sm",children:[n.clientInfo.nom&&a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-2 text-gray-900",children:[a.jsx(ji,{size:16,className:p.icon}),a.jsx("span",{className:"font-medium",children:n.clientInfo.nom})]}),n.clientInfo.telephone&&a.jsxs("div",{className:"ml-6 flex items-center gap-2 text-xs text-gray-600",children:[a.jsx(xl,{size:14,className:"text-gray-500"}),a.jsx("span",{children:n.clientInfo.telephone})]})]}),n.clientInfo.adresse&&a.jsxs("div",{className:"flex items-start gap-2 text-gray-700",children:[a.jsx(wn,{size:16,className:`mt-0.5 text-gray-500 ${p.icon}`}),a.jsx("span",{className:"text-sm text-gray-700",children:n.clientInfo.adresse})]})]}),a.jsxs("section",{className:"flex flex-col overflow-hidden gap-1",children:[a.jsx("h5",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-gray-500",children:"Artículos"}),a.jsx("div",{className:"flex-1 overflow-y-auto pr-1",children:n.items.length>0?a.jsx("ul",{className:"space-y-0.5",children:n.items.map(j=>{var w;const S=(w=j.commentaire)==null?void 0:w.trim();return a.jsxs("li",{className:"flex items-stretch rounded-lg border border-gray-200 bg-gray-50 text-sm text-gray-900 shadow-sm overflow-hidden min-h-[3.5rem]",children:[a.jsxs("div",{className:"flex flex-1 items-center justify-between gap-3 pr-3",children:[a.jsxs("div",{className:"flex flex-1 items-center",children:[a.jsx("span",{className:`flex self-stretch w-12 shrink-0 items-center justify-center text-xl font-bold text-white shadow-md ${p.accent} rounded-l-lg`,children:j.quantite}),a.jsx("span",{className:"font-semibold text-gray-900 text-[clamp(1.1rem,2.1vw,1.3rem)] leading-snug break-words text-balance whitespace-normal [hyphens:auto] px-3 py-3",children:j.nom_produit})]}),a.jsx("span",{className:"whitespace-nowrap text-sm font-semibold text-gray-900 sm:text-base",children:me(j.prix_unitaire*j.quantite)})]}),S&&a.jsx("p",{className:"mt-2 rounded-md border border-dashed border-blue-200 bg-blue-50 px-3 py-2 text-xs font-medium italic text-blue-800 ml-14 mr-3",children:S})]},j.id)})}):a.jsx("p",{className:"rounded-lg border border-gray-200 bg-gray-50 px-4 py-3 text-xs text-gray-500 shadow-sm",children:"Este pedido aún no tiene artículos registrados."})})]}),v&&a.jsx("section",{className:"space-y-2 rounded-lg border border-emerald-200 bg-emerald-50 bg-emerald-50 px-3 py-2 text-sm text-emerald-900 shadow-sm",children:y&&a.jsx("ul",{className:"space-y-0.5","aria-label":"Promotions",children:n.applied_promotions.map(j=>{const S=typeof j.config=="object"&&j.config!==null?j.config.promo_code:void 0;return a.jsx("li",{className:"rounded-md border border-emerald-200 bg-white/70 px-3 py-2 text-emerald-900 shadow-sm",children:a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("p",{className:"font-medium leading-tight",children:[j.name,S?` (Code: ${S})`:""]}),a.jsxs("p",{className:"text-sm font-semibold text-emerald-700 whitespace-nowrap",children:["-",me(j.discount_amount||0)]})]})},`${j.promotion_id}-${j.name}`)})})}),a.jsxs("div",{className:"mt-auto flex items-center justify-between rounded-lg border border-gray-200 bg-gray-50 px-3 py-2 font-semibold text-gray-900 shadow-sm",children:[a.jsx("span",{children:"Total"}),a.jsx("span",{className:"text-lg sm:text-xl text-gray-900",children:me(n.total)})]})]})}),a.jsx("footer",{className:"border-t border-gray-200 px-5 pb-5 pt-4",children:(i||o)&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("button",{onClick:()=>f(!0),className:"w-full ui-btn ui-btn-secondary",type:"button",children:[a.jsx(Od,{size:16,className:p.icon})," ",n.receipt_url?"Ver comprobante":"Comprobante no disponible"]}),i&&n.statut==="pendiente_validacion"&&a.jsx("button",{onClick:()=>i(n.id),disabled:c,className:"w-full ui-btn ui-btn-info uppercase",type:"button",children:c?"Validando...":"Validar"}),o&&n.estado_cocina==="listo"&&a.jsx("button",{onClick:()=>o(n.id),disabled:c,className:"w-full ui-btn ui-btn-success uppercase",type:"button",children:c?"Procesando...":"Entregar"})]})})]}),u&&a.jsxs("div",{className:"absolute inset-0 z-50 flex items-start justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>f(!1)}),a.jsxs("div",{className:"relative w-full h-full bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-4 py-3 bg-gray-50",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Comprobante de pago"}),a.jsx("button",{onClick:()=>f(!1),className:"text-gray-500 hover:text-gray-700 transition",type:"button",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"flex-1 overflow-auto p-4",children:n.receipt_url?a.jsx("img",{src:n.receipt_url,alt:"Comprobante",className:"w-full h-auto rounded-md"}):a.jsx("p",{className:"text-center text-gray-500",children:"No se proporcionó comprobante."})})]})]})]})},uj=()=>{const[n,i]=h.useState([]),[o,c]=h.useState([]),[u,f]=h.useState(!0),[g,x]=h.useState(null),{content:p,updateContent:y,loading:v}=Ei(),[N,j]=h.useState(!1),[S,w]=h.useState(null),[T,C]=h.useState(()=>new Date),[I,L]=h.useState(!1);h.useEffect(()=>{if(typeof window>"u")return;const A=()=>C(new Date);A();const K=window.setInterval(A,6e4);return()=>window.clearInterval(K)},[]);const Q=[{key:"monday",label:"Lundi"},{key:"tuesday",label:"Mardi"},{key:"wednesday",label:"Mercredi"},{key:"thursday",label:"Jeudi"},{key:"friday",label:"Vendredi"},{key:"saturday",label:"Samedi"},{key:"sunday",label:"Dimanche"}],[D,H]=h.useState({monday:{startTime:"11:00",endTime:"23:00",closed:!1},tuesday:{startTime:"11:00",endTime:"23:00",closed:!1},wednesday:{startTime:"11:00",endTime:"23:00",closed:!1},thursday:{startTime:"11:00",endTime:"23:00",closed:!1},friday:{startTime:"11:00",endTime:"23:00",closed:!1},saturday:{startTime:"11:00",endTime:"23:00",closed:!1},sunday:{startTime:"11:00",endTime:"23:00",closed:!1}});h.useEffect(()=>{p!=null&&p.onlineOrdering.schedule.weeklySchedule&&H(p.onlineOrdering.schedule.weeklySchedule)},[p]);const se=h.useMemo(()=>p?co(p.onlineOrdering.schedule,T):!1,[p,T]),W=h.useMemo(()=>{const K=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][T.getDay()];return D[K]},[T,D]),X=h.useCallback(async()=>{if(p){j(!0),w(null);try{await y({...p,onlineOrdering:{...p.onlineOrdering,schedule:{...p.onlineOrdering.schedule,weeklySchedule:D}}}),w({message:"Horaires mis à jour avec succès.",tone:"success"}),L(!1)}catch(A){console.error("Failed to update online ordering schedule",A);const K=A instanceof Error?A.message:"Impossible de mettre à jour les horaires.";w({message:K,tone:"error"})}finally{j(!1)}}},[p,D,y]),re=h.useCallback(async()=>{try{const{pending:A,ready:K}=await ye.getTakeawayOrders();i(A.sort((q,le)=>q.date_creation-le.date_creation)),c(K.sort((q,le)=>(q.date_listo_cuisine||0)-(le.date_listo_cuisine||0)))}catch(A){console.error("Failed to fetch takeaway orders",A)}finally{f(!1)}},[]);h.useEffect(()=>{f(!0),re();const A=setInterval(re,1e4),K=ye.notifications.subscribe("orders_updated",re);return()=>{clearInterval(A),K()}},[re]);const G=async A=>{if(!g){x(A);try{await ye.validateTakeawayOrder(A),await re()}catch(K){console.error("Failed to validate order:",K),alert(`No se pudo validar el pedido: ${K.message}`)}finally{x(null)}}},Z=async A=>{if(!g){x(A);try{await ye.markTakeawayAsDelivered(A),await re()}catch(K){console.error("Failed to mark order as delivered:",K),alert("Ocurrió un error al finalizar el pedido.")}finally{x(null)}}};return u?a.jsx("div",{className:"text-gray-700",children:"Cargando pedidos para llevar..."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"rounded-2xl border border-gray-200 bg-white shadow-sm p-6",children:[a.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-blue-100 text-blue-600",children:a.jsx(hs,{size:22})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-base font-semibold text-gray-900",children:"Disponibilité de la commande en ligne"}),a.jsx("p",{className:"text-sm text-gray-500",children:v?"Chargement des horaires...":W.closed?"Aujourd'hui: Fermé":`Aujourd'hui: ${W.startTime} - ${W.endTime}`})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold uppercase tracking-[0.2em] ${se?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700"}`,children:[a.jsx("span",{className:`h-2 w-2 rounded-full ${se?"bg-emerald-500":"bg-amber-500"}`}),se?"Ouvert":"Fermé"]}),a.jsx("button",{onClick:()=>L(!0),className:"inline-flex items-center justify-center rounded-lg bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow transition hover:bg-blue-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",type:"button",children:"Configurer"})]})]}),S&&a.jsx("p",{className:`mt-4 text-sm font-medium ${S.tone==="success"?"text-emerald-600":"text-red-600"}`,children:S.message})]}),a.jsx(zt,{isOpen:I,onClose:()=>L(!1),title:"Configuration des horaires",size:"xs",children:a.jsxs("div",{className:"space-y-1.5",children:[Q.map(({key:A,label:K})=>a.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 p-1.5",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[a.jsx("h3",{className:"text-xs font-semibold text-gray-900",children:K}),a.jsxs("label",{className:"flex items-center gap-1",children:[a.jsx("input",{type:"checkbox",checked:D[A].closed,onChange:q=>H({...D,[A]:{...D[A],closed:q.target.checked}}),className:"h-3 w-3 rounded border-gray-300 text-blue-600 focus:ring-1 focus:ring-blue-500"}),a.jsx("span",{className:"text-[10px] text-gray-700",children:"Fermé"})]})]}),!D[A].closed&&a.jsxs("div",{className:"flex gap-1.5",children:[a.jsxs("label",{className:"flex flex-col gap-0.5 flex-1",children:[a.jsx("span",{className:"text-[9px] font-medium text-gray-600",children:"Ouverture"}),a.jsx("input",{type:"time",value:D[A].startTime,onChange:q=>H({...D,[A]:{...D[A],startTime:q.target.value}}),className:"w-full rounded border border-gray-300 bg-white px-1.5 py-0.5 text-[11px] text-gray-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500/30"})]}),a.jsxs("label",{className:"flex flex-col gap-0.5 flex-1",children:[a.jsx("span",{className:"text-[9px] font-medium text-gray-600",children:"Fermeture"}),a.jsx("input",{type:"time",value:D[A].endTime,onChange:q=>H({...D,[A]:{...D[A],endTime:q.target.value}}),className:"w-full rounded border border-gray-300 bg-white px-1.5 py-0.5 text-[11px] text-gray-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500/30"})]})]})]},A)),a.jsxs("div",{className:"flex justify-end gap-1.5 pt-2 border-t border-gray-200",children:[a.jsx("button",{onClick:()=>L(!1),className:"rounded border border-gray-300 bg-white px-2.5 py-1 text-[11px] font-semibold text-gray-700 shadow-sm transition hover:bg-gray-50",type:"button",children:"Annuler"}),a.jsx("button",{onClick:X,disabled:N,className:"rounded bg-blue-600 px-2.5 py-1 text-[11px] font-semibold text-white shadow transition hover:bg-blue-700 disabled:cursor-not-allowed disabled:bg-blue-300",type:"button",children:N?"Enregistrement...":"Enregistrer"})]})]})}),a.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-8 md:grid-cols-2",children:[a.jsxs("div",{className:"bg-gray-100 p-4 rounded-xl",children:[a.jsxs("h2",{className:"text-lg sm:text-xl font-bold mb-4 text-center text-blue-700",children:["Pendientes de validación (",n.length,")"]}),a.jsx("div",{className:"space-y-4",children:n.length>0?n.map(A=>a.jsx(Oh,{order:A,onValidate:G,isProcessing:g===A.id},A.id)):a.jsx("p",{className:"text-center text-gray-500 py-8",children:"No hay pedidos para validar."})})]}),a.jsxs("div",{className:"bg-gray-100 p-4 rounded-xl",children:[a.jsxs("h2",{className:"text-lg sm:text-xl font-bold mb-4 text-center text-green-700",children:["Pedidos listos (",o.length,")"]}),a.jsx("div",{className:"space-y-4",children:o.length>0?o.map(A=>a.jsx(Oh,{order:A,onDeliver:Z,isProcessing:g===A.id},A.id)):a.jsx("p",{className:"text-center text-gray-500 py-8",children:"No hay pedidos listos."})})]})]})]})},mj=()=>{const{role:n}=Fa(),[i,o]=h.useState([]),[c,u]=h.useState(!0),[f,g]=h.useState(null),[x,p]=h.useState(""),[y,v]=h.useState(!1),[N,j]=h.useState(!1),[S,w]=h.useState(!1),[T,C]=h.useState(null),[I,L]=h.useState("add"),Q=(n==null?void 0:n.permissions["/ingredients"])==="editor",D=h.useCallback(async()=>{try{const W=await ye.getIngredients();o(W),g(null)}catch(W){g("Impossible de charger les ingrédients."),console.error(W)}finally{u(!1)}},[]);h.useEffect(()=>{u(!0),D()},[D]);const H=h.useMemo(()=>i.filter(W=>W.nom.toLowerCase().includes(x.toLowerCase())),[i,x]),se=(W,X=null)=>{C(X),W==="add"||W==="edit"?(L(W),v(!0)):W==="resupply"?j(!0):W==="delete"&&w(!0)};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"mt-6 flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[a.jsxs("div",{className:"relative w-full md:w-80",children:[a.jsx(Xd,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),a.jsx("input",{type:"text",placeholder:"Rechercher un ingrédient...",value:x,onChange:W=>p(W.target.value),className:"ui-input pl-10 sm:w-64"})]}),Q&&a.jsxs("button",{onClick:()=>se("add"),className:"w-full md:w-auto ui-btn-primary",children:[a.jsx(Qd,{size:20}),"Ajouter un ingrédient"]})]}),c?a.jsx("p",{className:"text-gray-800",children:"Chargement..."}):f?a.jsx("p",{className:"text-red-500",children:f}):a.jsx("div",{className:"ui-card p-4 overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"border-b",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-3 text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Nom"}),a.jsx("th",{className:"p-3 text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Stock Actuel"}),a.jsx("th",{className:"p-3 text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Stock Minimum"}),a.jsx("th",{className:"p-3 text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Prix unitaire moyen"}),Q&&a.jsx("th",{className:"p-3 text-right text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{children:H.map(W=>{const X=W.stock_actuel<=W.stock_minimum;return a.jsxs("tr",{className:`border-b hover:bg-gray-50 ${X?"bg-red-50":""}`,children:[a.jsx("td",{className:`p-3 font-semibold ${X?"text-red-900":"text-gray-900"}`,children:W.nom}),a.jsxs("td",{className:`p-3 font-bold ${X?"text-red-700":"text-gray-800"}`,children:[W.stock_actuel," ",W.unite]}),a.jsxs("td",{className:`p-3 ${X?"text-red-800":"text-gray-700"}`,children:[W.stock_minimum," ",W.unite]}),a.jsx("td",{className:`p-3 ${X?"text-red-800":"text-gray-700"}`,children:me(W.prix_unitaire)}),Q&&a.jsx("td",{className:"p-3 text-right",children:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>se("resupply",W),title:"Réapprovisionner",className:"p-2 text-green-600 hover:bg-green-100 rounded-full",children:a.jsx(_v,{size:20})}),a.jsx("button",{onClick:()=>se("edit",W),title:"Modifier",className:"p-2 text-blue-600 hover:bg-blue-100 rounded-full",children:a.jsx(mg,{size:20})}),a.jsx("button",{onClick:()=>se("delete",W),title:"Supprimer",className:"p-2 text-red-600 hover:bg-red-100 rounded-full",children:a.jsx(kn,{size:20})})]})})]},W.id)})})]})}),y&&Q&&a.jsx(fj,{isOpen:y,onClose:()=>v(!1),onSuccess:D,ingredient:T,mode:I}),N&&Q&&T&&a.jsx(pj,{isOpen:N,onClose:()=>j(!1),onSuccess:D,ingredient:T}),S&&Q&&T&&a.jsx(hj,{isOpen:S,onClose:()=>w(!1),onSuccess:D,ingredient:T})]})},fj=({isOpen:n,onClose:i,onSuccess:o,ingredient:c,mode:u})=>{const[f,g]=h.useState({nom:(c==null?void 0:c.nom)||"",unite:(c==null?void 0:c.unite)||"g",stock_minimum:(c==null?void 0:c.stock_minimum)||0}),[x,p]=h.useState(!1),y=async v=>{v.preventDefault(),p(!0);try{u==="edit"&&c?await ye.updateIngredient(c.id,f):await ye.createIngredient(f),o(),i()}catch(N){console.error("Failed to save ingredient",N)}finally{p(!1)}};return a.jsx(zt,{isOpen:n,onClose:i,title:u==="add"?"Ajouter un Ingrédient":"Modifier l'Ingrédient",children:a.jsxs("form",{onSubmit:y,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"nom",className:"block text-sm font-medium text-gray-700",children:"Nom"}),a.jsx("input",{type:"text",id:"nom",value:f.nom,onChange:v=>g({...f,nom:v.target.value}),required:!0,className:"mt-1 ui-input"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"unite",className:"block text-sm font-medium text-gray-700",children:"Unité"}),a.jsxs("select",{id:"unite",value:f.unite,onChange:v=>g({...f,unite:v.target.value}),required:!0,className:"mt-1 ui-select",children:[a.jsx("option",{value:"g",children:"Grammes (g)"}),a.jsx("option",{value:"kg",children:"Kilogrammes (kg)"}),a.jsx("option",{value:"ml",children:"Millilitres (ml)"}),a.jsx("option",{value:"L",children:"Litres (L)"}),a.jsx("option",{value:"unite",children:"Unité"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"stock_minimum",className:"block text-sm font-medium text-gray-700",children:"Stock Minimum"}),a.jsx("input",{type:"number",id:"stock_minimum",min:"0",value:f.stock_minimum,onChange:v=>g({...f,stock_minimum:parseFloat(v.target.value)}),required:!0,className:"mt-1 ui-input"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:i,className:"w-full ui-btn-secondary py-3",children:"Annuler"}),a.jsx("button",{type:"submit",disabled:x,className:"w-full ui-btn-primary py-3 disabled:opacity-60",children:x?"Sauvegarde...":"Sauvegarder"})]})]})})},pj=({isOpen:n,onClose:i,onSuccess:o,ingredient:c})=>{const[u,f]=h.useState(0),[g,x]=h.useState(0),[p,y]=h.useState(!1),v=async N=>{if(N.preventDefault(),!(u<=0||g<0)){y(!0);try{await ye.resupplyIngredient(c.id,u,g),o(),i()}catch(j){console.error("Failed to resupply ingredient",j)}finally{y(!1)}}};return a.jsx(zt,{isOpen:n,onClose:i,title:`Réapprovisionner: ${c.nom}`,children:a.jsxs("form",{onSubmit:v,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"quantity",className:"block text-sm font-medium text-gray-700",children:["Quantité Achetée (",c.unite,")"]}),a.jsx("input",{type:"number",id:"quantity",min:"0.01",step:"0.01",value:u,onChange:N=>f(parseFloat(N.target.value)),required:!0,className:"mt-1 ui-input"})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"unitPrice",className:"block text-sm font-medium text-gray-700",children:["Prix par unité (",c.unite,")"]}),a.jsx("input",{type:"number",id:"unitPrice",min:"0",step:"0.01",value:g,onChange:N=>x(parseFloat(N.target.value)),required:!0,className:"mt-1 ui-input"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:i,className:"w-full ui-btn-secondary py-3",children:"Annuler"}),a.jsx("button",{type:"submit",disabled:p,className:"w-full ui-btn-success py-3 disabled:opacity-60",children:p?"Ajout...":"Ajouter au Stock"})]})]})})},hj=({isOpen:n,onClose:i,onSuccess:o,ingredient:c})=>{const[u,f]=h.useState(!1),[g,x]=h.useState(null),p=async()=>{f(!0),x(null);try{await ye.deleteIngredient(c.id),o(),i()}catch(y){console.error("Failed to delete ingredient",y),x("Impossible de supprimer cet ingrédient car il est utilisé dans au moins une recette.")}finally{f(!1)}};return a.jsxs(zt,{isOpen:n,onClose:i,title:"Confirmer la Suppression",children:[a.jsxs("p",{className:"text-gray-700",children:["Êtes-vous sûr de vouloir supprimer l'ingrédient ",a.jsx("strong",{className:"text-gray-900",children:c.nom})," ? Cette action est irréversible."]}),g&&a.jsx("p",{className:"mt-4 text-sm text-red-600",children:g}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-6",children:[a.jsx("button",{type:"button",onClick:i,className:"w-full ui-btn-secondary py-3",children:"Annuler"}),a.jsx("button",{onClick:p,disabled:u,className:"w-full ui-btn-danger py-3 disabled:opacity-60",children:u?"Suppression...":"Supprimer"})]})]})},Dh=[1,2,3,4,5,6],Rh=n=>{switch(n){case"disponible":return{text:"Disponible",color:"bg-green-100 text-green-800",Icon:jn};case"agotado_temporal":return{text:"Rupture (Temp.)",color:"bg-yellow-100 text-yellow-800",Icon:hs};case"agotado_indefinido":return{text:"Indisponible",color:"bg-red-100 text-red-800",Icon:zy};default:return{text:"Inconnu",color:"bg-gray-100 text-gray-800",Icon:My}}},gj=()=>{const{role:n}=Fa(),[i,o]=h.useState([]),[c,u]=h.useState([]),[f,g]=h.useState([]),[x,p]=h.useState(!0),[y,v]=h.useState(null),[N,j]=h.useState(""),[S,w]=h.useState("all"),[T,C]=h.useState(!1),[I,L]=h.useState(!1),[Q,D]=h.useState(!1),[H,se]=h.useState(null),[W,X]=h.useState("add"),re=(n==null?void 0:n.permissions["/produits"])==="editor",G=h.useCallback(async()=>{try{p(!0);const[le,_,E]=await Promise.all([ye.getProducts(),ye.getCategories(),ye.getIngredients()]);o(le),u(_),g(E),v(null)}catch(le){v("Impossible de charger les données des produits."),console.error(le)}finally{p(!1)}},[]);h.useEffect(()=>{G()},[G]);const Z=h.useMemo(()=>i.filter(le=>le.nom_produit.toLowerCase().includes(N.toLowerCase())&&(S==="all"||le.categoria_id===S)),[i,N,S]),A=h.useMemo(()=>{const le=new Map;return i.forEach(_=>{_.is_best_seller&&_.best_seller_rank!=null&&le.set(_.best_seller_rank,_)}),le},[i]),K=(le,_="add",E=null)=>{le==="product"?(X(_),se(E),C(!0)):le==="category"?L(!0):le==="delete"&&E&&(se(E),D(!0))},q=async(le,_)=>{try{await ye.updateProduct(le.id,{estado:_}),G()}catch(E){console.error("Failed to update status",E);const z=E instanceof Error?E.message:"Une erreur inconnue s'est produite.";alert(`Échec de la mise à jour du statut du produit : ${z}`)}};return x?a.jsx("p",{className:"text-gray-800",children:"Chargement des produits..."}):y?a.jsx("p",{className:"text-red-500",children:y}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"mt-6 ui-card p-4 flex flex-col lg:flex-row justify-between items-center gap-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row gap-4 w-full",children:[a.jsxs("div",{className:"relative flex-grow md:max-w-md",children:[a.jsx(Xd,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),a.jsx("input",{type:"text",placeholder:"Rechercher un produit...",value:N,onChange:le=>j(le.target.value),className:"ui-input pl-10"})]}),a.jsxs("select",{value:S,onChange:le=>w(le.target.value),className:"ui-select md:w-56",children:[a.jsx("option",{value:"all",children:"Toutes les catégories"}),c.map(le=>a.jsx("option",{value:le.id,children:le.nom},le.id))]})]}),re&&a.jsxs("div",{className:"flex gap-2 w-full lg:w-auto",children:[a.jsx("button",{onClick:()=>L(!0),className:"flex-1 lg:flex-initial ui-btn-secondary",children:a.jsx(Yv,{size:20})}),a.jsxs("button",{onClick:()=>K("product","add"),className:"flex-1 lg:flex-initial ui-btn-primary",children:[a.jsx(Qd,{size:20}),"Ajouter Produit"]})]})]}),a.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:Z.map(le=>a.jsx(xj,{product:le,category:c.find(_=>_.id===le.categoria_id),onEdit:()=>K("product","edit",le),onDelete:()=>K("delete","edit",le),onStatusChange:q,canEdit:re},le.id))}),T&&re&&a.jsx(bj,{isOpen:T,onClose:()=>C(!1),onSuccess:G,product:H,mode:W,categories:c,ingredients:f,occupiedPositions:A}),I&&re&&a.jsx(yj,{isOpen:I,onClose:()=>L(!1),onSuccess:G,categories:c}),Q&&re&&H&&a.jsx(vj,{isOpen:Q,onClose:()=>D(!1),onSuccess:G,product:H})]})},xj=({product:n,category:i,onEdit:o,onDelete:c,onStatusChange:u,canEdit:f})=>{const{text:g,color:x,Icon:p}=Rh(n.estado),[y,v]=h.useState(!1),N=n.prix_vente-(n.cout_revient||0);return n.prix_vente>0&&N/n.prix_vente*100,a.jsxs("div",{className:"ui-card flex flex-col overflow-hidden",children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:n.image,alt:n.nom_produit,className:"w-full h-40 object-cover"}),n.is_best_seller&&a.jsxs("span",{className:"absolute top-2 left-2 rounded-full bg-brand-primary/90 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-white shadow-md",children:["Best seller",n.best_seller_rank?` #${n.best_seller_rank}`:""]})]}),a.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-black",children:(i==null?void 0:i.nom)||"Sans catégorie"}),a.jsx("h3",{className:"font-bold text-[clamp(1.05rem,2.2vw,1.35rem)] leading-snug text-black break-words text-balance whitespace-normal [hyphens:auto]",children:n.nom_produit})]}),a.jsx("p",{className:"text-xl font-extrabold text-black",children:me(n.prix_vente)})]}),a.jsx("p",{className:"text-xs text-black mt-1 flex-grow",children:n.description}),a.jsxs("div",{className:"flex justify-between items-center mt-4",children:[a.jsxs("span",{className:`px-2 py-1 text-xs font-bold rounded-full flex items-center gap-1 ${x}`,children:[a.jsx(p,{size:14})," ",g]}),f&&a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:()=>v(!y),className:"p-1 text-gray-500 hover:text-gray-800",children:a.jsx(lg,{size:20})}),y&&a.jsxs("div",{className:"absolute right-0 bottom-full mb-2 w-48 bg-white rounded-md shadow-lg z-10 border",children:[a.jsx("button",{onClick:()=>{o(),v(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Modifier"}),a.jsx("button",{onClick:()=>{c(),v(!1)},className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100",children:"Supprimer"}),a.jsx("div",{className:"border-t my-1"}),a.jsx("p",{className:"px-4 pt-2 pb-1 text-xs text-gray-500",children:"Changer statut :"}),["disponible","agotado_temporal","agotado_indefinido"].map(j=>a.jsx("button",{onClick:()=>{u(n,j),v(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:Rh(j).text},j))]})]})]})]})]})},bj=({isOpen:n,onClose:i,onSuccess:o,product:c,mode:u,categories:f,ingredients:g,occupiedPositions:x})=>{var re;const[p,y]=h.useState({nom_produit:(c==null?void 0:c.nom_produit)||"",prix_vente:(c==null?void 0:c.prix_vente)||0,categoria_id:(c==null?void 0:c.categoria_id)||(((re=f[0])==null?void 0:re.id)??""),estado:(c==null?void 0:c.estado)||"disponible",image:(c==null?void 0:c.image)??"",description:(c==null?void 0:c.description)||"",recipe:(c==null?void 0:c.recipe)||[],is_best_seller:(c==null?void 0:c.is_best_seller)??!1,best_seller_rank:(c==null?void 0:c.best_seller_rank)??null}),[v,N]=h.useState(null),[j,S]=h.useState(!1);h.useEffect(()=>{var G;n&&(y({nom_produit:(c==null?void 0:c.nom_produit)||"",prix_vente:(c==null?void 0:c.prix_vente)||0,categoria_id:(c==null?void 0:c.categoria_id)||(((G=f[0])==null?void 0:G.id)??""),estado:(c==null?void 0:c.estado)||"disponible",image:(c==null?void 0:c.image)??"",description:(c==null?void 0:c.description)||"",recipe:(c==null?void 0:c.recipe)||[],is_best_seller:(c==null?void 0:c.is_best_seller)??!1,best_seller_rank:(c==null?void 0:c.best_seller_rank)??null}),N(null))},[n,c,f]);const w=h.useCallback(()=>{for(const G of Dh){const Z=x.get(G);if(!Z||Z.id===(c==null?void 0:c.id))return G}return null},[x,c==null?void 0:c.id]),T=h.useCallback(G=>{y(Z=>{if(G){const A=Z.best_seller_rank??w();return{...Z,is_best_seller:!0,best_seller_rank:A??null}}return{...Z,is_best_seller:!1,best_seller_rank:null}})},[w]),C=h.useCallback(G=>{const Z=G.target.value;y(A=>({...A,best_seller_rank:Z?Number(Z):null}))},[]),I=h.useMemo(()=>new Map(g.map(G=>[G.id,G])),[g]),L=h.useMemo(()=>p.recipe.reduce((G,Z)=>{const A=I.get(Z.ingredient_id);if(!A)return G;let K=A.prix_unitaire;return(A.unite==="kg"||A.unite==="L")&&(K=K/1e3),G+K*Z.qte_utilisee},0),[p.recipe,I]),Q=p.prix_vente-L,D=p.prix_vente>0?Q/p.prix_vente*100:0,H=(G,Z,A)=>{const K=[...p.recipe];if(Z==="qte_utilisee"){const{valueAsNumber:q,value:le}=A.currentTarget,_=Number.isNaN(q)?Number(le.replace(",",".")):q;K[G]={...K[G],[Z]:Number.isNaN(_)?K[G].qte_utilisee:_}}else K[G]={...K[G],[Z]:A.currentTarget.value};y(q=>({...q,recipe:K}))},se=()=>{g.length!==0&&y({...p,recipe:[...p.recipe,{ingredient_id:g[0].id,qte_utilisee:0}]})},W=G=>{const Z=p.recipe.filter((A,K)=>K!==G);y({...p,recipe:Z})},X=async G=>{var Z;if(G.preventDefault(),p.recipe.length===0){alert("Veuillez ajouter au moins un ingrédient à la recette.");return}if(p.is_best_seller){if(p.best_seller_rank==null){alert("Veuillez sélectionner une position de best seller disponible.");return}const A=x.get(p.best_seller_rank);if(A&&A.id!==(c==null?void 0:c.id)){alert(`La position ${p.best_seller_rank} est déjà occupée par ${A.nom_produit}.`);return}}S(!0);try{let A=((Z=p.image)==null?void 0:Z.trim())??"";v&&(A=await Qb(v,p.nom_produit));const K={...p,image:A,is_best_seller:p.is_best_seller,best_seller_rank:p.is_best_seller?p.best_seller_rank:null};u==="edit"&&c?await ye.updateProduct(c.id,K):await ye.addProduct(K),o(),N(null),i()}catch(A){console.error("Failed to save product",A);const K=A instanceof Error?A.message:"Une erreur inconnue s'est produite.";alert(`Échec du téléversement de l'image du produit : ${K}`)}finally{S(!1)}};return a.jsx(zt,{isOpen:n,onClose:i,title:u==="add"?"Ajouter un Produit":"Modifier le Produit",size:"lg",children:a.jsxs("form",{onSubmit:X,className:"space-y-4",children:[a.jsxs("div",{className:"max-h-[65vh] overflow-y-auto pr-2 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nom"}),a.jsx("input",{type:"text",value:p.nom_produit,onChange:G=>y({...p,nom_produit:G.target.value}),required:!0,className:"mt-1 ui-input"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Prix de vente"}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:p.prix_vente,onChange:G=>{const{valueAsNumber:Z,value:A}=G.currentTarget,K=Number.isNaN(Z)?Number(A.replace(",",".")):Z;y(q=>({...q,prix_vente:Number.isNaN(K)?q.prix_vente:K}))},required:!0,className:"mt-1 ui-input"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Catégorie"}),a.jsx("select",{value:p.categoria_id,onChange:G=>y({...p,categoria_id:G.target.value}),required:!0,className:"mt-1 ui-select",children:f.map(G=>a.jsx("option",{value:G.id,children:G.nom},G.id))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Statut"}),a.jsxs("select",{value:p.estado,onChange:G=>y({...p,estado:G.target.value}),required:!0,className:"mt-1 ui-select",children:[a.jsx("option",{value:"disponible",children:"Disponible"}),a.jsx("option",{value:"agotado_temporal",children:"Rupture (Temp.)"}),a.jsx("option",{value:"agotado_indefinido",children:"Indisponible"})]})]}),a.jsxs("div",{className:"sm:col-span-2 flex items-center gap-2 pt-2",children:[a.jsx("input",{id:"best-seller-toggle",type:"checkbox",checked:p.is_best_seller,onChange:G=>T(G.target.checked),className:"h-4 w-4 rounded border-gray-300 text-brand-primary focus:ring-brand-primary"}),a.jsx("label",{htmlFor:"best-seller-toggle",className:"text-sm font-medium text-gray-700",children:"Best seller"})]}),a.jsxs("div",{className:"sm:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",htmlFor:"best-seller-rank",children:"Position dans le classement"}),a.jsxs("select",{id:"best-seller-rank",value:p.best_seller_rank??"",onChange:C,disabled:!p.is_best_seller,className:"mt-1 ui-select",children:[a.jsx("option",{value:"",children:"Sélectionner une position"}),Dh.map(G=>{const Z=x.get(G),A=(Z==null?void 0:Z.id)===(c==null?void 0:c.id),K=!!(Z&&!A),q=Z?A?`${G} – Position actuelle`:`${G} – Occupé par ${Z.nom_produit}`:`${G}`;return a.jsx("option",{value:G,disabled:K,children:q},G)})]}),p.is_best_seller&&p.best_seller_rank===null&&a.jsx("p",{className:"mt-1 text-xs text-red-600",children:"Sélectionnez une position disponible pour ce best seller."})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 bg-gray-50 border border-gray-200 rounded-lg p-4 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500",children:"Coût de revient"}),a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:me(L)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500",children:"Marge"}),a.jsx("p",{className:`text-lg font-semibold ${Q>=0?"text-emerald-600":"text-red-600"}`,children:me(Q)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500",children:"Marge %"}),a.jsxs("p",{className:`text-lg font-semibold ${D>=0?"text-emerald-600":"text-red-600"}`,children:[Number.isFinite(D)?bi(D):"0","%"]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),a.jsx("textarea",{rows:3,value:p.description,onChange:G=>y({...p,description:G.target.value}),className:"mt-1 ui-textarea",placeholder:"Courte description du produit..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Image du produit"}),a.jsxs("div",{className:"mt-1 flex items-center gap-4",children:[a.jsx("img",{src:v?URL.createObjectURL(v):Zh(p.image),alt:"Aperçu",className:"w-20 h-20 object-cover rounded-md bg-gray-100"}),a.jsxs("label",{htmlFor:"product-image-upload",className:"cursor-pointer bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-primary",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Nl,{size:16}),a.jsx("span",{children:"Changer l'image"})]}),a.jsx("input",{id:"product-image-upload",type:"file",className:"sr-only",onChange:G=>N(G.target.files?G.target.files[0]:null)})]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-md font-semibold text-gray-800 border-b pb-2 mb-2",children:"Recette"}),p.recipe.length===0&&a.jsx("div",{className:"text-center p-2 my-2 bg-red-50 border border-red-200 rounded-md",children:a.jsx("p",{className:"text-sm text-red-600",children:"Un produit doit contenir au moins un ingrédient."})}),a.jsx("div",{className:"space-y-2",children:p.recipe.map((G,Z)=>{var A,K;return a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Zy,{className:"text-gray-400 cursor-move",size:16}),a.jsx("select",{value:G.ingredient_id,onChange:q=>H(Z,"ingredient_id",q),className:"ui-select flex-grow",children:g.map(q=>a.jsx("option",{value:q.id,children:q.nom},q.id))}),a.jsx("input",{type:"number",placeholder:"Qté",value:G.qte_utilisee,onChange:q=>H(Z,"qte_utilisee",q),className:"ui-input w-24"}),a.jsx("span",{className:"text-gray-500 text-sm w-12",children:((A=g.find(q=>q.id===G.ingredient_id))==null?void 0:A.unite)==="kg"?"g":(K=g.find(q=>q.id===G.ingredient_id))==null?void 0:K.unite}),a.jsx("button",{type:"button",onClick:()=>W(Z),className:"p-1 text-red-500 hover:bg-red-100 rounded-full",children:a.jsx(kn,{size:16})})]},Z)})}),a.jsx("button",{type:"button",onClick:se,className:"mt-2 text-sm text-blue-600 hover:underline",children:"Ajouter un ingrédient"})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t",children:[a.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto ui-btn-secondary py-3",children:"Annuler"}),a.jsx("button",{type:"submit",disabled:j||p.recipe.length===0,className:"w-full sm:w-auto ui-btn-primary py-3 disabled:opacity-60",children:j?"Sauvegarde...":"Sauvegarder"})]})]})})},yj=({isOpen:n,onClose:i,onSuccess:o,categories:c})=>{const[u,f]=h.useState(""),[g,x]=h.useState(""),p=async()=>{if(u.trim())try{await ye.addCategory(u),f(""),o()}catch(v){console.error(v)}},y=async v=>{x("");try{await ye.deleteCategory(v),o()}catch(N){x(N.message),console.error(N)}};return a.jsx(zt,{isOpen:n,onClose:i,title:"Gérer les Catégories",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:u,onChange:v=>f(v.target.value),placeholder:"Nom de la nouvelle catégorie",className:"ui-input flex-grow"}),a.jsx("button",{onClick:p,className:"ui-btn-primary px-4",children:"Ajouter"})]}),g&&a.jsx("p",{className:"text-red-500 text-sm",children:g}),a.jsx("ul",{className:"space-y-2 max-h-60 overflow-y-auto",children:c.map(v=>a.jsxs("li",{className:"flex justify-between items-center bg-gray-50 p-2 rounded",children:[a.jsx("span",{className:"text-gray-800",children:v.nom}),a.jsx("button",{onClick:()=>y(v.id),className:"p-1 text-red-500 hover:bg-red-100 rounded-full",children:a.jsx(kn,{size:16})})]},v.id))}),a.jsx("div",{className:"pt-4 flex",children:a.jsx("button",{type:"button",onClick:i,className:"w-full ui-btn-secondary py-3",children:"Fermer"})})]})})},vj=({isOpen:n,onClose:i,onSuccess:o,product:c})=>{const[u,f]=h.useState(!1),g=async()=>{f(!0);try{await ye.deleteProduct(c.id),o(),i()}catch(x){console.error("Failed to delete product",x)}finally{f(!1)}};return a.jsxs(zt,{isOpen:n,onClose:i,title:"Confirmer la Suppression",children:[a.jsxs("p",{className:"text-gray-700",children:["Êtes-vous sûr de vouloir supprimer le produit ",a.jsx("strong",{className:"text-gray-900",children:c.nom_produit})," ? Cette action est irréversible."]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-6",children:[a.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto ui-btn-secondary py-3",children:"Annuler"}),a.jsx("button",{onClick:g,disabled:u,className:"w-full sm:w-auto ui-btn-danger py-3",children:u?"Suppression...":"Supprimer"})]})]})},Vr=n=>n.visuals?{...n.visuals,banner_image:n.visuals.banner_image??n.visuals.banner_url}:null,jj=n=>{if(n.status!=="active")return!1;const i=new Date;return!(n.conditions.start_date&&new Date(n.conditions.start_date)>i||n.conditions.end_date&&new Date(n.conditions.end_date)<i||n.conditions.usage_limit&&n.usage_count>=n.conditions.usage_limit)},_j=n=>{const i=new Date;if(n.days_of_week&&!n.days_of_week.includes(i.getDay()))return!1;if(n.time_range){const[o,c]=n.time_range.start_time.split(":").map(Number),[u,f]=n.time_range.end_time.split(":").map(Number),g=i.getHours()*60+i.getMinutes(),x=o*60+c,p=u*60+f;if(g<x||g>p)return!1}return!0},Nj=(n,i)=>{const o=n.subtotal||n.total;if(i.min_order_amount&&o<i.min_order_amount||i.max_order_amount&&o>i.max_order_amount)return!1;const c=n.items.reduce((u,f)=>u+f.quantite,0);return i.min_items_count&&c<i.min_items_count||i.max_items_count&&c>i.max_items_count||i.order_types&&!i.order_types.includes(n.type)?!1:(i.first_order_only,!0)},Qr=(n,i)=>{if(!jj(n)||!_j(n.conditions)||!Nj(i,n.conditions))return!1;if(n.type==="buy_x_get_y"){const o=n.discount.buy_x_get_y_config;return!o||!o.product_ids?!1:i.items.filter(u=>o.product_ids.includes(u.produitRef)).reduce((u,f)=>u+f.quantite,0)>=2}return!0},Xr=(n,i)=>{let o=0;n.subtotal||n.total,i.applies_to==="total"?o=n.total:i.applies_to==="products"&&i.product_ids&&i.product_ids.length>0?o=n.items.filter(u=>{var f;return(f=i.product_ids)==null?void 0:f.includes(u.produitRef)}).reduce((u,f)=>u+f.prix_unitaire*f.quantite,0):i.applies_to==="categories"&&i.category_ids&&i.category_ids.length>0;let c=o*i.discount_value/100;return i.max_discount_amount&&(c=Math.min(c,i.max_discount_amount)),c},Kr=(n,i)=>i.discount_value,wj=(n,i)=>{const o=i.buy_x_get_y_config;if(!o)return 0;let c=0;const u=n.items.reduce((f,g)=>(f[g.produitRef]||(f[g.produitRef]=[]),f[g.produitRef].push(g),f),{});for(const f in u){const g=u[f],x=g.reduce((p,y)=>p+y.quantite,0);if(o.product_ids&&o.product_ids.includes(f)&&x>=2){const p=Math.floor(x/2),y=[...g].sort((v,N)=>v.prix_unitaire-N.prix_unitaire);y.length>0&&(c+=y[0].prix_unitaire*p)}}return c},Sj=n=>n.shipping_cost||0,Zr=(n,i)=>{switch(n.type){case"percentage":return Xr(i,n.discount);case"fixed_amount":return Kr(i,n.discount);case"promo_code":return n.discount.discount_type==="percentage"?Xr(i,n.discount):n.discount.discount_type==="fixed_amount"?Kr(i,n.discount):0;case"buy_x_get_y":return wj(i,n.discount);case"free_shipping":return Sj(i);case"threshold":return n.discount.discount_type==="percentage"?Xr(i,n.discount):n.discount.discount_type==="fixed_amount"?Kr(i,n.discount):0;case"happy_hour":return n.discount.discount_type==="percentage"?Xr(i,n.discount):n.discount.discount_type==="fixed_amount"?Kr(i,n.discount):0;default:return 0}},Cj=async n=>{const i={...n,applied_promotions:[],total_discount:0,subtotal:n.subtotal||n.total},{data:o,error:c}=await fe.from("promotions").select("*").eq("status","active");if(c||!o)return console.error("Error fetching active promotions:",c),n;let u=i.subtotal;const f=o.filter(p=>p.type==="buy_x_get_y"&&Qr(p,i)).sort((p,y)=>y.priority-p.priority);for(const p of f){const y=Zr(p,i);if(y>0){const v=Math.min(y,u);u-=v,i.total_discount+=v,i.applied_promotions.push({promotion_id:p.id,name:p.name,discount_amount:v,config:p.discount.buy_x_get_y_config,visuals:Vr(p)}),i.total=u}}if(n.promo_code){const p=await Qg(n.promo_code);if(p&&Qr(p,i)){const y=Zr(p,i);if(y>0){const v=Math.min(y,u);u-=v,i.total_discount+=v,i.applied_promotions.push({promotion_id:p.id,name:p.name,discount_amount:v,config:{promo_code:p.discount.promo_code},visuals:Vr(p)}),i.total=u}}}const g=o.filter(p=>(p.type==="percentage"||p.type==="fixed_amount"||p.type==="threshold"||p.type==="happy_hour")&&Qr(p,i)).sort((p,y)=>y.priority-p.priority);for(const p of g){const y=Zr(p,i);if(y>0){const v=Math.min(y,u);u-=v,i.total_discount+=v,i.applied_promotions.push({promotion_id:p.id,name:p.name,discount_amount:v,visuals:Vr(p)}),i.total=u}}const x=o.find(p=>p.type==="free_shipping"&&Qr(p,i));if(x){const p=Zr(x,i);p>0&&i.applied_promotions.push({promotion_id:x.id,name:x.name,discount_amount:p,type:"FREE_SHIPPING",visuals:Vr(x)})}return i.total=u,i},kj=async()=>{const{data:n,error:i}=await fe.from("promotions").select("*").order("priority",{ascending:!1});if(i)throw console.error("Error fetching promotions:",i),new Error("Impossible de récupérer les promotions");return n||[]},Fg=async()=>{const{data:n,error:i}=await fe.from("promotions").select("*").eq("status","active").order("priority",{ascending:!1});if(i)throw console.error("Error fetching active promotions:",i),new Error("Impossible de récupérer les promotions actives");return n||[]},Tj=async n=>{const{data:i,error:o}=await fe.from("promotions").insert([{...n,usage_count:0}]).select().single();if(o)throw console.error("Error creating promotion:",o),new Error("Impossible de créer la promotion");return i},Vg=async(n,i)=>{const{data:o,error:c}=await fe.from("promotions").update(i).eq("id",n).select().single();if(c)throw console.error("Error updating promotion:",c),new Error("Impossible de mettre à jour la promotion");return o},Ej=async(n,i)=>Vg(n,{status:i}),Mj=async n=>{const{error:i}=await fe.from("promotions").delete().eq("id",n);if(i)throw console.error("Error deleting promotion:",i),new Error("Impossible de supprimer la promotion")},Qg=async n=>{const{data:i,error:o}=await fe.from("promotions").select("*").eq("type","promo_code").eq("status","active");return o?(console.error("Error fetching promotion by code:",o),null):(i==null?void 0:i.find(u=>{var f;return((f=u.discount)==null?void 0:f.promo_code)===n}))||null},Aj=async n=>{const{data:i,error:o}=await fe.from("promotion_usages").select("*").eq("promotion_id",n).order("applied_at",{ascending:!1});return o?(console.error("Error fetching promotion usages:",o),[]):i||[]},zj=[{value:"percentage",label:"Pourcentage"},{value:"fixed_amount",label:"Montant fixe"},{value:"promo_code",label:"Code promo"},{value:"buy_x_get_y",label:"2x1 / Achetez X, obtenez Y"},{value:"free_product",label:"Produit gratuit"},{value:"free_shipping",label:"Livraison gratuite"},{value:"combo",label:"Combo"},{value:"threshold",label:"Palier"},{value:"happy_hour",label:"Happy hour"}],Oj=[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"scheduled",label:"Programmée"},{value:"expired",label:"Expirée"}],Uh=({isOpen:n,onClose:i,onSave:o,promotion:c})=>{var A,K;const[u,f]=h.useState(""),[g,x]=h.useState("percentage"),[p,y]=h.useState("active"),[v,N]=h.useState(0),[j,S]=h.useState({}),[w,T]=h.useState({type:"percentage",value:0,applies_to:"total"}),[C,I]=h.useState({}),[L,Q]=h.useState(!1),[D,H]=h.useState(null),[se,W]=h.useState("general"),[X,re]=h.useState(!1);h.useEffect(()=>{c&&(f(c.name),x(c.type),y(c.status),N(c.priority),S(c.conditions),T(c.discount),I(c.visuals||{}))},[c]);const G=async q=>{if(q.preventDefault(),Q(!0),H(null),g!=="free_shipping"&&(!w.value||w.value<=0)){H("La valeur de la réduction doit être supérieure à 0"),Q(!1),W("discount");return}if(!u||u.trim()===""){H("Le nom de la promotion est obligatoire"),Q(!1),W("general");return}try{c?await Vg(c.id,{name:u,type:g,status:p,priority:v,conditions:j,discount:w,visuals:C}):await Tj({name:u,type:g,status:p,priority:v,conditions:j,discount:w,visuals:C}),o()}catch(le){H(le instanceof Error?le.message:"Une erreur est survenue")}finally{Q(!1)}},Z=async q=>{var _;const le=(_=q.target.files)==null?void 0:_[0];if(le){re(!0);try{const E=await yl(le);I({...C,banner_image:ps(E)})}catch{H("Erreur lors du téléchargement de l'image")}finally{re(!1)}}};return n?a.jsx("div",{className:"promotion-modal fixed inset-0 z-50 flex items-center justify-center bg-slate-950/80 px-4 py-6 text-black backdrop-blur-sm",children:a.jsxs("div",{className:"promotion-modal__content flex w-full max-w-5xl flex-col overflow-hidden rounded-2xl border border-slate-200 bg-white text-black shadow-2xl",children:[a.jsxs("div",{className:"flex flex-col gap-3 border-b border-slate-200 bg-white px-6 py-5 text-black sm:flex-row sm:items-center sm:justify-between",children:[a.jsx("h2",{className:"text-xl font-semibold leading-snug sm:text-2xl",children:c?"Modifier la promotion":"Nouvelle promotion"}),a.jsx("button",{onClick:i,className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-transparent text-black transition hover:bg-slate-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-brand-primary","aria-label":"Fermer la fenêtre de promotion",children:a.jsx(fs,{size:22})})]}),D&&a.jsx("div",{className:"mx-6 mt-4 rounded-xl border border-red-200 bg-red-50/90 px-4 py-3 text-sm font-medium text-black shadow-sm",children:D}),a.jsxs("div",{className:"flex flex-wrap gap-2 border-b border-slate-200 bg-slate-50/80 px-4 py-3 sm:px-6",children:[a.jsx("button",{className:`rounded-full px-4 py-2 text-sm font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary ${se==="general"?"border border-brand-primary bg-brand-primary/10 text-black shadow":"border border-transparent text-black hover:bg-slate-100"}`,onClick:()=>W("general"),children:"Général"}),a.jsx("button",{className:`rounded-full px-4 py-2 text-sm font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary ${se==="conditions"?"border border-brand-primary bg-brand-primary/10 text-black shadow":"border border-transparent text-black hover:bg-slate-100"}`,onClick:()=>W("conditions"),children:"Conditions"}),a.jsx("button",{className:`rounded-full px-4 py-2 text-sm font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary ${se==="discount"?"border border-brand-primary bg-brand-primary/10 text-black shadow":"border border-transparent text-black hover:bg-slate-100"}`,onClick:()=>W("discount"),children:"Réduction"}),a.jsx("button",{className:`rounded-full px-4 py-2 text-sm font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary ${se==="visuals"?"border border-brand-primary bg-brand-primary/10 text-black shadow":"border border-transparent text-black hover:bg-slate-100"}`,onClick:()=>W("visuals"),children:"Affichage"})]}),a.jsxs("form",{onSubmit:G,className:"flex-1 overflow-y-auto bg-white px-4 py-6 text-black sm:px-6",children:[se==="general"&&a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"space-y-4 rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"name",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Nom de la promotion"}),a.jsx("input",{type:"text",id:"name",value:u,onChange:q=>f(q.target.value),className:"ui-input mt-2",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"type",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Type de promotion"}),a.jsx("select",{id:"type",value:g,onChange:q=>x(q.target.value),className:"ui-input mt-2",required:!0,children:zj.map(q=>a.jsx("option",{value:q.value,children:q.label},q.value))})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"status",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Statut"}),a.jsx("select",{id:"status",value:p,onChange:q=>y(q.target.value),className:"ui-input mt-2",required:!0,children:Oj.map(q=>a.jsx("option",{value:q.value,children:q.label},q.value))})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"priority",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Priorité"}),a.jsx("input",{type:"number",id:"priority",value:v,onChange:q=>N(parseInt(q.target.value)||0),className:"ui-input mt-2",min:"0",max:"100"}),a.jsx("p",{className:"mt-2 text-xs text-black",children:"Plus la valeur est élevée, plus la promotion est prioritaire."})]})]})}),se==="conditions"&&a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"space-y-6 rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[g==="promo_code"&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"promo_code",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Code promo"}),a.jsx("input",{type:"text",id:"promo_code",value:j.promo_code||"",onChange:q=>S({...j,promo_code:q.target.value}),className:"ui-input mt-2",required:g==="promo_code"})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"min_order_amount",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Montant minimum de commande"}),a.jsx("input",{type:"number",id:"min_order_amount",value:j.min_order_amount||"",onChange:q=>S({...j,min_order_amount:parseFloat(q.target.value)||void 0}),className:"ui-input mt-2",min:"0",step:"0.01"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"max_order_amount",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Montant maximum de commande"}),a.jsx("input",{type:"number",id:"max_order_amount",value:j.max_order_amount||"",onChange:q=>S({...j,max_order_amount:parseFloat(q.target.value)||void 0}),className:"ui-input mt-2",min:"0",step:"0.01"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"start_date",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Date de début"}),a.jsx("input",{type:"datetime-local",id:"start_date",value:j.start_date?new Date(j.start_date).toISOString().slice(0,16):"",onChange:q=>S({...j,start_date:q.target.value?new Date(q.target.value).toISOString():void 0}),className:"ui-input mt-2"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"end_date",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Date de fin"}),a.jsx("input",{type:"datetime-local",id:"end_date",value:j.end_date?new Date(j.end_date).toISOString().slice(0,16):"",onChange:q=>S({...j,end_date:q.target.value?new Date(q.target.value).toISOString():void 0}),className:"ui-input mt-2"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Jours de la semaine"}),a.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"].map((q,le)=>{var _;return a.jsxs("label",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white/80 px-3 py-1 text-sm text-black shadow-sm",children:[a.jsx("input",{type:"checkbox",checked:((_=j.days_of_week)==null?void 0:_.includes(le))||!1,onChange:E=>{const z=j.days_of_week||[];E.target.checked?S({...j,days_of_week:[...z,le]}):S({...j,days_of_week:z.filter(P=>P!==le)})},className:"h-4 w-4 rounded border-slate-300 text-black focus:ring-black"}),a.jsx("span",{children:q})]},le)})})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"hours_start",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Heure de début"}),a.jsx("input",{type:"time",id:"hours_start",value:((A=j.hours_of_day)==null?void 0:A.start)||"",onChange:q=>S({...j,hours_of_day:{...j.hours_of_day||{},start:q.target.value}}),className:"ui-input mt-2"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"hours_end",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Heure de fin"}),a.jsx("input",{type:"time",id:"hours_end",value:((K=j.hours_of_day)==null?void 0:K.end)||"",onChange:q=>S({...j,hours_of_day:{...j.hours_of_day||{},end:q.target.value}}),className:"ui-input mt-2"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"max_uses",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Nombre maximum d'utilisations"}),a.jsx("input",{type:"number",id:"max_uses",value:j.max_uses_total||"",onChange:q=>S({...j,max_uses_total:parseInt(q.target.value)||void 0}),className:"ui-input mt-2",min:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"max_uses_per_customer",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Maximum par client"}),a.jsx("input",{type:"number",id:"max_uses_per_customer",value:j.max_uses_per_customer||"",onChange:q=>S({...j,max_uses_per_customer:parseInt(q.target.value)||void 0}),className:"ui-input mt-2",min:"0"})]})]}),g==="buy_x_get_y"&&a.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"buy_quantity",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Quantité à acheter"}),a.jsx("input",{type:"number",id:"buy_quantity",value:j.buy_quantity||"",onChange:q=>S({...j,buy_quantity:parseInt(q.target.value)||void 0}),className:"ui-input mt-2",min:"1",required:g==="buy_x_get_y"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"get_quantity",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Quantité offerte"}),a.jsx("input",{type:"number",id:"get_quantity",value:j.get_quantity||"",onChange:q=>S({...j,get_quantity:parseInt(q.target.value)||void 0}),className:"ui-input mt-2",min:"1",required:g==="buy_x_get_y"})]})]}),a.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-slate-200 bg-white/80 px-4 py-3 shadow-sm",children:[a.jsx("input",{type:"checkbox",id:"first_order_only",checked:j.first_order_only||!1,onChange:q=>S({...j,first_order_only:q.target.checked}),className:"h-4 w-4 rounded border-slate-300 text-black focus:ring-black"}),a.jsx("label",{htmlFor:"first_order_only",className:"text-sm font-medium text-black",children:"Uniquement pour la première commande"})]})]})}),se==="discount"&&a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"space-y-6 rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[a.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"discount_type",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Type de réduction"}),a.jsxs("select",{id:"discount_type",value:w.type,onChange:q=>T({...w,type:q.target.value}),className:"ui-input mt-2",required:!0,children:[a.jsx("option",{value:"percentage",children:"Pourcentage"}),a.jsx("option",{value:"fixed_amount",children:"Montant fixe"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"discount_value",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Valeur de la réduction"}),a.jsxs("div",{className:"relative mt-2",children:[a.jsx("input",{type:"number",id:"discount_value",value:w.value,onChange:q=>T({...w,value:parseFloat(q.target.value)||0}),className:"ui-input pr-10",min:"0",step:(w.type==="percentage","0.01"),required:!0}),a.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-3 flex items-center text-sm font-semibold text-black",children:w.type==="percentage"?"%":"€"})]})]})]}),w.type==="percentage"&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"max_discount_amount",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Montant maximum de la réduction"}),a.jsxs("div",{className:"relative mt-2",children:[a.jsx("input",{type:"number",id:"max_discount_amount",value:w.max_discount_amount||"",onChange:q=>T({...w,max_discount_amount:parseFloat(q.target.value)||void 0}),className:"ui-input pr-10",min:"0",step:"0.01"}),a.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-3 flex items-center text-sm font-semibold text-black",children:"€"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"applies_to",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Application de la réduction"}),a.jsxs("select",{id:"applies_to",value:w.applies_to,onChange:q=>T({...w,applies_to:q.target.value}),className:"ui-input mt-2",required:!0,children:[a.jsx("option",{value:"total",children:"Total de la commande"}),a.jsx("option",{value:"products",children:"Produits spécifiques"}),a.jsx("option",{value:"shipping",children:"Frais de livraison"})]})]})]})}),se==="visuals"&&a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"space-y-6 rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[a.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"badge_text",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Texte du badge"}),a.jsx("input",{type:"text",id:"badge_text",value:C.badge_text||"",onChange:q=>I({...C,badge_text:q.target.value}),className:"ui-input mt-2",placeholder:"Ex: 2x1, -20%, etc."})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"badge_color",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Couleur du texte du badge"}),a.jsx("input",{type:"color",id:"badge_color",value:C.badge_color||"#FFFFFF",onChange:q=>I({...C,badge_color:q.target.value}),className:"mt-2 h-12 w-full rounded-lg border border-slate-200 bg-white"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"badge_bg_color",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Couleur de fond du badge"}),a.jsx("input",{type:"color",id:"badge_bg_color",value:C.badge_bg_color||"#F9A826",onChange:q=>I({...C,badge_bg_color:q.target.value}),className:"mt-2 h-12 w-full rounded-lg border border-slate-200 bg-white"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"badge_bg_image",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Image de fond du badge (optionnel)"}),a.jsx("p",{className:"mt-1 text-xs text-black",children:"Si vous uploadez une image, elle remplacera la couleur de fond du badge"}),a.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-4",children:[a.jsxs("label",{className:"inline-flex items-center justify-center gap-2 rounded-full border border-slate-200 bg-white px-5 py-2 text-sm font-semibold text-black shadow-sm transition hover:bg-slate-100",children:[a.jsx("input",{type:"file",id:"badge_bg_image",onChange:async q=>{var _;const le=(_=q.target.files)==null?void 0:_[0];if(le){re(!0);try{const E=await yl(le,{tags:["badge-background"]});I({...C,badge_bg_image:ps(E)})}catch{H("Erreur lors du téléchargement de l'image du badge")}finally{re(!1)}}},className:"sr-only",accept:"image/*"}),a.jsx("span",{children:X?"Téléchargement...":"Choisir une image"})]}),C.badge_bg_image&&a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:C.badge_bg_image,alt:"Aperçu de l'image de fond du badge",className:"h-16 w-auto rounded-lg object-cover shadow-sm"}),a.jsx("button",{type:"button",onClick:()=>I({...C,badge_bg_image:void 0}),className:"absolute -top-2 -right-2 inline-flex h-7 w-7 items-center justify-center rounded-full border border-red-500 bg-white text-black shadow hover:bg-red-100",children:a.jsx(fs,{size:12})})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"banner_text",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Texte de la bannière"}),a.jsx("input",{type:"text",id:"banner_text",value:C.banner_text||"",onChange:q=>I({...C,banner_text:q.target.value}),className:"ui-input mt-2",placeholder:"Ex: Offre spéciale : 20% de réduction sur tous les tacos !"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"banner_image",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Image de la bannière"}),a.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-4",children:[a.jsxs("label",{className:"inline-flex items-center justify-center gap-2 rounded-full border border-slate-200 bg-white px-5 py-2 text-sm font-semibold text-black shadow-sm transition hover:bg-slate-100",children:[a.jsx("input",{type:"file",id:"banner_image",onChange:Z,className:"sr-only",accept:"image/*"}),a.jsx("span",{children:X?"Téléchargement...":"Choisir une image"})]}),C.banner_image&&a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:C.banner_image,alt:"Aperçu de la bannière",className:"h-20 w-auto rounded-lg object-cover shadow-sm"}),a.jsx("button",{type:"button",onClick:()=>I({...C,banner_image:void 0}),className:"absolute -top-2 -right-2 inline-flex h-7 w-7 items-center justify-center rounded-full border border-red-500 bg-white text-black shadow hover:bg-red-100",children:a.jsx(fs,{size:12})})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"banner_cta",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Texte du bouton d'appel à l'action"}),a.jsx("input",{type:"text",id:"banner_cta",value:C.banner_cta||"",onChange:q=>I({...C,banner_cta:q.target.value}),className:"ui-input mt-2",placeholder:"Ex: En profiter maintenant"})]})]})})]}),a.jsxs("div",{className:"flex flex-col gap-3 border-t border-slate-200 bg-slate-50/80 p-6 sm:flex-row sm:items-center sm:justify-end",children:[a.jsx("button",{type:"button",onClick:i,className:"inline-flex items-center justify-center rounded-full border border-slate-300 px-5 py-2.5 text-sm font-semibold text-black transition hover:bg-slate-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary",disabled:L,children:"Annuler"}),a.jsx("button",{type:"submit",onClick:G,className:"inline-flex items-center justify-center gap-2 rounded-full border border-brand-primary bg-white px-5 py-2.5 text-sm font-semibold text-black shadow transition hover:bg-brand-primary/10 focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary",disabled:L,children:L?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-black border-t-transparent"}),a.jsx("span",{children:"Enregistrement..."})]}):a.jsx("span",{children:"Enregistrer"})})]})]})}):null},Hd=(n,i,o)=>Math.min(Math.max(n,i),o),Dj=n=>{const i=n.replace("#","").trim();if(i.length===3){const o=parseInt(i[0]+i[0],16),c=parseInt(i[1]+i[1],16),u=parseInt(i[2]+i[2],16);return[o,c,u]}if(i.length===4){const o=parseInt(i[0]+i[0],16),c=parseInt(i[1]+i[1],16),u=parseInt(i[2]+i[2],16);return[o,c,u]}if(i.length===6||i.length===8){const o=parseInt(i.slice(0,2),16),c=parseInt(i.slice(2,4),16),u=parseInt(i.slice(4,6),16);return[o,c,u]}return null},Rj=n=>{const i=n.match(/rgba?\(([^)]+)\)/i);if(!i)return null;const[o,c,u]=i[1].split(",").slice(0,3).map(f=>Hd(parseFloat(f.trim()),0,255));return[o,c,u].some(f=>Number.isNaN(f))?null:[o,c,u]},Uj=(n,i,o)=>{const c=(n%360+360)%360,u=Hd(i,0,1),f=Hd(o,0,1);if(u===0){const S=Math.round(f*255);return[S,S,S]}const g=(1-Math.abs(2*f-1))*u,x=g*(1-Math.abs(c/60%2-1)),p=f-g/2;let y=0,v=0,N=0;c<60?(y=g,v=x):c<120?(y=x,v=g):c<180?(v=g,N=x):c<240?(v=x,N=g):c<300?(y=x,N=g):(y=g,N=x);const j=S=>Math.round((S+p)*255);return[j(y),j(v),j(N)]},Lj=n=>{const i=n.match(/hsla?\(([^)]+)\)/i);if(!i)return null;const[o,c,u]=i[1].split(",").slice(0,3).map(p=>p.trim()),f=parseFloat(o),g=parseFloat(c.replace("%",""))/100,x=parseFloat(u.replace("%",""))/100;return[f,g,x].some(p=>Number.isNaN(p))?null:Uj(f,g,x)},qj=n=>{if(!n)return null;const i=n.trim();return i?i.startsWith("#")?Dj(i):i.toLowerCase().startsWith("rgb")?Rj(i):i.toLowerCase().startsWith("hsl")?Lj(i):null:null},Bj=n=>{const i=qj(n);if(!i)return null;const[o,c,u]=i.map(g=>g/255),f=[o,c,u].map(g=>g<=.03928?g/12.92:Math.pow((g+.055)/1.055,2.4));return .2126*f[0]+.7152*f[1]+.0722*f[2]},Ij=(n,i=.55)=>{const o=Bj(n);return o===null?!1:o<i},Xg=(n,{lightColor:i="#FFFFFF",darkColor:o="#000000",threshold:c=.55}={})=>Ij(n,c)?i:o,Hj={percentage:"Pourcentage",fixed_amount:"Montant fixe",promo_code:"Code promo",buy_x_get_y:"2x1 / Achetez X, obtenez Y",free_product:"Produit gratuit",free_shipping:"Livraison gratuite",combo:"Combo",threshold:"Palier",happy_hour:"Happy hour"},$j={active:"Active",inactive:"Inactive",scheduled:"Programmée",expired:"Expirée"},Gj={active:"bg-green-100 text-black",inactive:"bg-gray-100 text-black",scheduled:"bg-blue-100 text-black",expired:"bg-red-100 text-black"},Yj=({isOpen:n,onClose:i,promotion:o})=>{var T;const[c,u]=h.useState([]),[f,g]=h.useState(!1),[x,p]=h.useState(null),[y,v]=h.useState("details");h.useEffect(()=>{n&&o&&N()},[n,o]);const N=async()=>{g(!0),p(null);try{const C=await Aj(o.id);u(C)}catch(C){p("Erreur lors du chargement des utilisations"),console.error(C)}finally{g(!1)}},j=C=>{const I=new Date(C);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(I)},S=((T=o.visuals)==null?void 0:T.badge_bg_color)||"#F9A826",w=Xg(S);return n?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-950/80 px-4 py-6 backdrop-blur-sm",children:a.jsxs("div",{className:"flex w-full max-w-5xl flex-col overflow-hidden rounded-2xl border border-slate-200 bg-white text-black shadow-2xl",children:[a.jsxs("div",{className:"flex flex-col gap-3 border-b border-slate-200 bg-white px-6 py-5 text-black sm:flex-row sm:items-center sm:justify-between",children:[a.jsx("h2",{className:"text-xl font-semibold leading-snug sm:text-2xl",children:"Détails de la promotion"}),a.jsx("button",{onClick:i,className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-transparent text-black transition hover:bg-slate-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-brand-primary","aria-label":"Fermer les détails de la promotion",children:a.jsx(fs,{size:22})})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 border-b border-slate-200 bg-slate-50/80 px-4 py-3 sm:px-6",children:[a.jsx("button",{className:`rounded-full px-4 py-2 text-sm font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary ${y==="details"?"border border-brand-primary bg-brand-primary/10 text-black shadow":"border border-transparent text-black hover:bg-slate-100"}`,onClick:()=>v("details"),children:"Détails"}),a.jsxs("button",{className:`rounded-full px-4 py-2 text-sm font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary ${y==="usages"?"border border-brand-primary bg-brand-primary/10 text-black shadow":"border border-transparent text-black hover:bg-slate-100"}`,onClick:()=>v("usages"),children:["Utilisations (",o.usage_count,")"]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto bg-white px-4 py-6 sm:px-6",children:[y==="details"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:a.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-black",children:o.name}),a.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold ${Gj[o.status]}`,children:$j[o.status]}),a.jsx("span",{className:"text-sm font-medium text-black",children:Hj[o.type]})]})]}),a.jsxs("div",{className:"rounded-full border border-slate-200 bg-white/80 px-4 py-1.5 text-sm font-semibold text-black shadow-sm",children:["Priorité : ",o.priority]})]})}),a.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[a.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[a.jsxs("h4",{className:"mb-3 flex items-center gap-2 text-sm font-semibold uppercase tracking-wide text-black",children:[a.jsx(ev,{size:16}),"Informations générales"]}),a.jsxs("dl",{className:"space-y-2 text-sm text-black",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"ID"}),a.jsx("dd",{className:"rounded bg-white/80 px-2 py-0.5 font-mono text-black shadow-sm",children:o.id})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Créée le"}),a.jsx("dd",{children:j(o.created_at)})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Mise à jour"}),a.jsx("dd",{children:j(o.updated_at)})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Utilisations"}),a.jsx("dd",{children:o.usage_count})]})]})]}),a.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[a.jsxs("h4",{className:"mb-3 flex items-center gap-2 text-sm font-semibold uppercase tracking-wide text-black",children:[a.jsx(_l,{size:16}),"Réduction"]}),a.jsxs("dl",{className:"space-y-2 text-sm text-black",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Type"}),a.jsx("dd",{children:o.discount.type==="percentage"?"Pourcentage":"Montant fixe"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Valeur"}),a.jsxs("dd",{className:"font-semibold text-black",children:[o.discount.value,o.discount.type==="percentage"?"%":"€"]})]}),o.discount.max_discount_amount&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Maximum"}),a.jsxs("dd",{children:[o.discount.max_discount_amount,"€"]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Application"}),a.jsxs("dd",{children:[o.discount.applies_to==="total"&&"Total de la commande",o.discount.applies_to==="products"&&"Produits spécifiques",o.discount.applies_to==="shipping"&&"Frais de livraison"]})]})]})]})]}),a.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[a.jsxs("h4",{className:"mb-3 flex items-center gap-2 text-sm font-semibold uppercase tracking-wide text-black",children:[a.jsx(dy,{size:16}),"Conditions"]}),a.jsxs("dl",{className:"grid grid-cols-1 gap-3 text-sm text-black md:grid-cols-2",children:[o.conditions.promo_code&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Code promo"}),a.jsx("dd",{className:"rounded bg-white/80 px-2 py-0.5 font-mono text-black shadow-sm",children:o.conditions.promo_code})]}),o.conditions.min_order_amount&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Montant minimum"}),a.jsxs("dd",{children:[o.conditions.min_order_amount,"€"]})]}),o.conditions.max_order_amount&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Montant maximum"}),a.jsxs("dd",{children:[o.conditions.max_order_amount,"€"]})]}),o.conditions.start_date&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Date de début"}),a.jsx("dd",{children:j(o.conditions.start_date)})]}),o.conditions.end_date&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Date de fin"}),a.jsx("dd",{children:j(o.conditions.end_date)})]}),o.conditions.days_of_week&&o.conditions.days_of_week.length>0&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Jours"}),a.jsx("dd",{children:o.conditions.days_of_week.map(C=>["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"][C]).join(", ")})]}),o.conditions.hours_of_day&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Heures"}),a.jsxs("dd",{children:[o.conditions.hours_of_day.start," - ",o.conditions.hours_of_day.end]})]}),o.conditions.max_uses_total&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Utilisations max."}),a.jsx("dd",{children:o.conditions.max_uses_total})]}),o.conditions.max_uses_per_customer&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Max par client"}),a.jsx("dd",{children:o.conditions.max_uses_per_customer})]}),o.conditions.first_order_only&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Première commande"}),a.jsx("dd",{children:"Oui"})]}),o.type==="buy_x_get_y"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Achetez"}),a.jsx("dd",{children:o.conditions.buy_quantity})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Obtenez"}),a.jsx("dd",{children:o.conditions.get_quantity})]})]})]})]}),o.visuals&&Object.keys(o.visuals).length>0&&a.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[a.jsxs("h4",{className:"mb-3 flex items-center gap-2 text-sm font-semibold uppercase tracking-wide text-black",children:[a.jsx(Si,{size:16}),"Éléments visuels"]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 text-sm text-black md:grid-cols-2",children:[o.visuals.badge_text&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-medium",children:"Badge"}),a.jsx("span",{className:"rounded-full px-3 py-1 text-xs font-semibold",style:{backgroundColor:S,color:w},children:o.visuals.badge_text})]}),o.visuals.banner_text&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-medium",children:"Texte bannière"}),a.jsx("span",{className:"text-right text-black",children:o.visuals.banner_text})]}),o.visuals.banner_cta&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-medium",children:"Bouton"}),a.jsx("span",{className:"text-right text-black",children:o.visuals.banner_cta})]})]}),o.visuals.banner_image&&a.jsxs("div",{className:"mt-4",children:[a.jsx("span",{className:"mb-2 block text-xs font-semibold uppercase tracking-wide text-black",children:"Image de bannière"}),a.jsx("img",{src:o.visuals.banner_image,alt:"Bannière promotionnelle",className:"w-full max-h-40 rounded-xl object-cover shadow-sm"})]})]})]}),y==="usages"&&a.jsxs("div",{className:"space-y-4",children:[x&&a.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50/90 px-4 py-3 text-sm font-medium text-black shadow-sm",children:x}),f?a.jsxs("div",{className:"flex items-center justify-center gap-3 rounded-2xl border border-slate-200 bg-slate-50/80 py-10 text-black shadow-sm",children:[a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-b-2 border-brand-primary"}),a.jsx("span",{children:"Chargement…"})]}):c.length===0?a.jsx("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/80 py-10 text-center text-sm font-medium text-black shadow-sm",children:"Aucune utilisation enregistrée pour cette promotion"}):a.jsx("div",{className:"overflow-hidden rounded-2xl border border-slate-200 shadow-sm",children:a.jsxs("table",{className:"w-full divide-y divide-slate-200 text-sm text-black",children:[a.jsx("thead",{className:"bg-slate-50/90 text-xs font-semibold uppercase tracking-wide text-black",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left",children:"Date"}),a.jsx("th",{className:"px-4 py-3 text-left",children:"Commande"}),a.jsx("th",{className:"px-4 py-3 text-left",children:"Client"}),a.jsx("th",{className:"px-4 py-3 text-right",children:"Montant"})]})}),a.jsx("tbody",{className:"divide-y divide-slate-100",children:c.map(C=>a.jsxs("tr",{className:"bg-white/80 transition hover:bg-brand-accent-soft",children:[a.jsx("td",{className:"px-4 py-3 font-medium text-black",children:j(C.applied_at)}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs("a",{href:"#",className:"inline-flex items-center gap-2 text-black transition hover:underline",onClick:I=>{I.preventDefault()},children:[C.order_id.substring(0,8),"...",a.jsx(Hy,{size:14})]})}),a.jsx("td",{className:"px-4 py-3",children:C.customer_phone||"—"}),a.jsxs("td",{className:"px-4 py-3 text-right font-semibold text-black",children:[C.discount_amount.toFixed(2),"€"]})]},C.id))})]})})]})]}),a.jsx("div",{className:"flex justify-end border-t border-slate-200 bg-slate-50/80 p-6",children:a.jsx("button",{type:"button",onClick:i,className:"inline-flex items-center justify-center rounded-full border border-slate-300 px-5 py-2.5 text-sm font-semibold text-black transition hover:bg-slate-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary",children:"Fermer"})})]})}):null},Fj=({isOpen:n,onClose:i,onConfirm:o,title:c,message:u,confirmLabel:f="Confirmer",cancelLabel:g="Annuler",confirmButtonClass:x="bg-brand-primary hover:bg-brand-primary-dark"})=>n?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md overflow-hidden",children:[a.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[a.jsx("h2",{className:"text-xl font-semibold",children:c}),a.jsx("button",{onClick:i,className:"text-gray-500 hover:text-gray-700",children:a.jsx(fs,{size:24})})]}),a.jsx("div",{className:"p-6",children:a.jsx("p",{className:"text-gray-700",children:u})}),a.jsxs("div",{className:"flex justify-end items-center gap-3 p-6 border-t",children:[a.jsx("button",{type:"button",onClick:i,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:g}),a.jsx("button",{type:"button",onClick:o,className:`px-4 py-2 text-white rounded-md ${x}`,children:f})]})]})}):null,Vj={active:"Active",inactive:"Inactive",scheduled:"Programmée",expired:"Expirée"},Qj={active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",scheduled:"bg-blue-100 text-blue-800",expired:"bg-red-100 text-red-800"},Xj={percentage:"Pourcentage",fixed_amount:"Montant fixe",promo_code:"Code promo",buy_x_get_y:"2x1 / Achetez X, obtenez Y",free_product:"Produit gratuit",free_shipping:"Livraison gratuite",combo:"Combo",threshold:"Palier",happy_hour:"Happy hour"},Kj={percentage:a.jsx(_l,{size:16}),fixed_amount:a.jsx(Si,{size:16}),promo_code:a.jsx(Si,{size:16}),buy_x_get_y:a.jsx(Qs,{size:16}),free_product:a.jsx(Qs,{size:16}),free_shipping:a.jsx(Qs,{size:16}),combo:a.jsx(Qs,{size:16}),threshold:a.jsx(ng,{size:16}),happy_hour:a.jsx(hs,{size:16})},Zj=()=>{const[n,i]=h.useState([]),[o,c]=h.useState(!0),[u,f]=h.useState(null),[g,x]=h.useState(!1),[p,y]=h.useState(!1),[v,N]=h.useState(!1),[j,S]=h.useState(!1),[w,T]=h.useState(null),[C,I]=h.useState(""),[L,Q]=h.useState("all"),[D,H]=h.useState("all"),[se,W]=h.useState("priority"),[X,re]=h.useState("desc"),G=async()=>{c(!0),f(null);try{const R=await kj();i(R)}catch(R){f("Erreur lors du chargement des promotions"),console.error(R)}finally{c(!1)}};h.useEffect(()=>{G()},[]);const Z=()=>{T(null),x(!0)},A=R=>{T(R),y(!0)},K=R=>{T(R),N(!0)},q=R=>{T(R),S(!0)},le=async R=>{try{const B=R.active?"inactive":"active",M=await Ej(R.id,B);i(n.map(ce=>ce.id===R.id?M:ce))}catch(B){f("Erreur lors de la mise à jour du statut"),console.error(B)}},_=async()=>{if(w)try{await Mj(w.id),i(n.filter(R=>R.id!==w.id)),S(!1)}catch(R){f("Erreur lors de la suppression de la promotion"),console.error(R)}},E=R=>{se===R?re(X==="asc"?"desc":"asc"):(W(R),re("desc"))},z=n.filter(R=>{const B=R.name.toLowerCase().includes(C.toLowerCase()),M=L==="all"||R.status===L,ce=D==="all"||R.type===D;return B&&M&&ce}).sort((R,B)=>{let M=0;switch(se){case"name":M=R.name.localeCompare(B.name);break;case"priority":M=R.priority-B.priority;break;case"created_at":M=new Date(R.created_at).getTime()-new Date(B.created_at).getTime();break;case"usage_count":M=R.usage_count-B.usage_count;break}return X==="asc"?M:-M}),P=R=>se!==R?null:X==="asc"?a.jsx(ng,{size:16}):a.jsx(sg,{size:16}),F=R=>{const B=new Date(R);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(B)};return a.jsxs("div",{className:"promotions-page p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Gestion des promotions"}),a.jsxs("button",{onClick:Z,className:"bg-brand-primary hover:bg-brand-primary-dark text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[a.jsx(Ci,{size:20}),"Nouvelle promotion"]})]}),u&&a.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:u}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",placeholder:"Rechercher une promotion...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg",value:C,onChange:R=>I(R.target.value)}),a.jsx(Xd,{className:"absolute left-3 top-2.5 text-gray-400",size:20})]})}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("select",{className:"border border-gray-300 rounded-lg px-3 py-2",value:L,onChange:R=>Q(R.target.value),children:[a.jsx("option",{value:"all",children:"Tous les statuts"}),a.jsx("option",{value:"active",children:"Actives"}),a.jsx("option",{value:"inactive",children:"Inactives"}),a.jsx("option",{value:"scheduled",children:"Programmées"}),a.jsx("option",{value:"expired",children:"Expirées"})]}),a.jsxs("select",{className:"border border-gray-300 rounded-lg px-3 py-2",value:D,onChange:R=>H(R.target.value),children:[a.jsx("option",{value:"all",children:"Tous les types"}),a.jsx("option",{value:"percentage",children:"Pourcentage"}),a.jsx("option",{value:"fixed_amount",children:"Montant fixe"}),a.jsx("option",{value:"promo_code",children:"Code promo"}),a.jsx("option",{value:"buy_x_get_y",children:"2x1 / Achetez X, obtenez Y"}),a.jsx("option",{value:"free_product",children:"Produit gratuit"}),a.jsx("option",{value:"free_shipping",children:"Livraison gratuite"}),a.jsx("option",{value:"combo",children:"Combo"}),a.jsx("option",{value:"threshold",children:"Palier"}),a.jsx("option",{value:"happy_hour",children:"Happy hour"})]}),a.jsxs("button",{onClick:G,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-2 rounded-lg flex items-center gap-2",children:[a.jsx(Lv,{size:18}),a.jsx("span",{className:"hidden md:inline",children:"Actualiser"})]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-50 border-b",children:[a.jsx("th",{className:"px-4 py-3 text-left",children:a.jsxs("button",{className:"flex items-center gap-1 font-semibold text-gray-700",onClick:()=>E("name"),children:["Nom ",P("name")]})}),a.jsx("th",{className:"px-4 py-3 text-left",children:"Type"}),a.jsx("th",{className:"px-4 py-3 text-left",children:"Statut"}),a.jsx("th",{className:"px-4 py-3 text-left",children:a.jsxs("button",{className:"flex items-center gap-1 font-semibold text-gray-700",onClick:()=>E("priority"),children:["Priorité ",P("priority")]})}),a.jsx("th",{className:"px-4 py-3 text-left",children:a.jsxs("button",{className:"flex items-center gap-1 font-semibold text-gray-700",onClick:()=>E("created_at"),children:["Créée le ",P("created_at")]})}),a.jsx("th",{className:"px-4 py-3 text-left",children:a.jsxs("button",{className:"flex items-center gap-1 font-semibold text-gray-700",onClick:()=>E("usage_count"),children:["Utilisations ",P("usage_count")]})}),a.jsx("th",{className:"px-4 py-3 text-right",children:"Actions"})]})}),a.jsx("tbody",{children:o?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"px-4 py-8 text-center",children:a.jsxs("div",{className:"flex justify-center items-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-primary"}),a.jsx("span",{className:"ml-2",children:"Chargement..."})]})})}):z.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-gray-500",children:"Aucune promotion trouvée"})}):z.map(R=>a.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[a.jsxs("td",{className:"px-4 py-4",children:[a.jsx("div",{className:"font-medium",children:R.name}),R.type==="promo_code"&&R.conditions.promo_code&&a.jsxs("div",{className:"text-sm text-gray-500",children:["Code: ",a.jsx("span",{className:"font-mono bg-gray-100 px-1 rounded",children:R.conditions.promo_code})]})]}),a.jsx("td",{className:"px-4 py-4",children:a.jsxs("div",{className:"flex items-center gap-1.5",children:[Kj[R.type],a.jsx("span",{children:Xj[R.type]})]})}),a.jsx("td",{className:"px-4 py-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Qj[R.status]}`,children:Vj[R.status]})}),a.jsx("td",{className:"px-4 py-4",children:R.priority}),a.jsx("td",{className:"px-4 py-4",children:F(R.created_at)}),a.jsx("td",{className:"px-4 py-4",children:R.usage_count}),a.jsx("td",{className:"px-4 py-4 text-right",children:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>le(R),className:"p-1.5 rounded-md hover:bg-gray-100",title:R.status==="active"?"Désactiver":"Activer",children:R.status==="active"?a.jsx(Gy,{size:18}):a.jsx(Od,{size:18})}),a.jsx("button",{onClick:()=>K(R),className:"p-1.5 rounded-md hover:bg-gray-100",title:"Voir les détails",children:a.jsx(Od,{size:18})}),a.jsx("button",{onClick:()=>A(R),className:"p-1.5 rounded-md hover:bg-gray-100",title:"Modifier",children:a.jsx(mg,{size:18})}),a.jsx("button",{onClick:()=>q(R),className:"p-1.5 rounded-md hover:bg-gray-100 text-red-500",title:"Supprimer",children:a.jsx(kn,{size:18})})]})})]},R.id))})]})})]}),g&&a.jsx(Uh,{isOpen:g,onClose:()=>x(!1),onSave:()=>{x(!1),G()}}),p&&w&&a.jsx(Uh,{isOpen:p,onClose:()=>y(!1),onSave:()=>{y(!1),G()},promotion:w}),v&&w&&a.jsx(Yj,{isOpen:v,onClose:()=>N(!1),promotion:w}),j&&w&&a.jsx(Fj,{isOpen:j,onClose:()=>S(!1),onConfirm:_,title:"Supprimer la promotion",message:`Êtes-vous sûr de vouloir supprimer la promotion "${w.name}" ? Cette action est irréversible.`,confirmLabel:"Supprimer",cancelLabel:"Annuler",confirmButtonClass:"bg-red-600 hover:bg-red-700"})]})},Pj=({promotion:n,className:i=""})=>{const o=n.config,c=o.visuals||{};let u=c.badge_text||"",f=c.description||n.description||"";u||(o.discount_type==="percentage"?(u=`-${o.discount_value}%`,f=f||`${o.discount_value}% de descuento`):o.discount_type==="fixed_amount"?(u=`-$${o.discount_value.toLocaleString()}`,f=f||`$${o.discount_value.toLocaleString()} de descuento`):o.buy_quantity&&o.get_quantity?(u=`${o.buy_quantity}x${o.get_quantity}`,f=f||`Compra ${o.buy_quantity}, lleva ${o.get_quantity}`):o.applies_to==="shipping"?(u="ENVÍO GRATIS",f=f||"Envío gratis en este producto"):(u=n.name||"PROMO",f=f||n.name));const g=c.badge_bg_color||"#E63946",x=c.badge_bg_image,p=x?"#000000":Xg(g);return a.jsx("div",{className:`px-2 py-0.5 rounded-full font-bold text-xs shadow-sm border border-white/50 ${i}`,style:{backgroundColor:x?"transparent":g,backgroundImage:x?`url(${x})`:"none",backgroundSize:"cover",backgroundPosition:"center",color:p,textShadow:x?"0 1px 3px rgba(0,0,0,0.8)":"none"},title:f,children:u})},Jj=n=>{const[i,o]=h.useState([]),[c,u]=h.useState(!0),[f,g]=h.useState(null);h.useEffect(()=>{if(!n){o([]),u(!1);return}(async()=>{try{u(!0);const N=(await Fg().catch(j=>(console.error("[useProductPromotions] Error fetching active promotions from API:",j),[]))).filter(j=>{if(!p1(j)||!h1(j))return!1;const S=j.config||{},w=Array.isArray(j.conditions)?j.conditions:[];return!S.product_ids&&!S.category_ids&&w.length===0?!1:S.product_ids&&Array.isArray(S.product_ids)&&S.product_ids.length>0&&S.product_ids.includes(n.id)||S.category_ids&&Array.isArray(S.category_ids)&&S.category_ids.length>0&&S.category_ids.includes(n.categoria_id)?!0:w.length>0?w.some(C=>C.type==="specific_product"&&Array.isArray(C.value)?C.value.includes(n.id):C.type==="specific_category"&&Array.isArray(C.value)?C.value.includes(n.categoria_id):!1):!1}).sort((j,S)=>(S.priority||0)-(j.priority||0));o(N)}catch(y){console.error("[useProductPromotions] Error during promotion processing:",y),g(y instanceof Error?y:new Error("Une erreur est survenue")),o([])}finally{u(!1)}})()},[n]);const x=i.length>0?i[0]:null;return{promotions:i,bestPromotion:x,loading:c,error:f}},Wj=({product:n,onClick:i})=>{const{promotions:o,loading:c}=Jj(n);return a.jsxs("div",{onClick:()=>n.estado==="disponible"&&i(),className:`relative border rounded-2xl p-6 flex flex-col items-center text-center transition-shadow bg-white/90 shadow-md ${n.estado==="disponible"?"cursor-pointer hover:shadow-xl":"opacity-50"}`,children:[!c&&o.length>0&&n.estado==="disponible"&&a.jsx("div",{className:"absolute top-2 right-2 flex flex-wrap gap-1 max-w-[calc(100%-1rem)] justify-end z-10",children:o.map((u,f)=>a.jsx(Pj,{promotion:u},u.id||f))}),a.jsx("img",{src:n.image,alt:n.nom_produit,className:"w-full h-36 object-cover rounded-xl mb-4 aspect-4/3"}),a.jsx("p",{className:"font-extrabold flex-grow text-black leading-snug text-[clamp(1rem,2.2vw,1.2rem)] break-words text-balance whitespace-normal [hyphens:auto] tracking-tight",children:n.nom_produit}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 px-1 max-h-10 overflow-hidden line-clamp-2",children:n.description}),a.jsx("p",{className:"font-bold text-lg text-gray-800 mt-2",children:me(n.prix_vente)}),n.estado!=="disponible"&&a.jsx("span",{className:"text-xs text-red-500 font-bold mt-1",children:"Agotado"}),n.estado==="disponible"&&a.jsx("button",{onClick:u=>{u.stopPropagation(),i()},className:"mt-4 w-full rounded-lg bg-gradient-to-r from-orange-500 via-orange-600 to-red-600 py-2 font-bold text-white shadow-lg transition-all duration-300 hover:scale-[1.02] hover:from-orange-600 hover:via-orange-700 hover:to-red-700",children:"Agregar"})]})},e_=()=>{const[n,i]=h.useState([]),[o,c]=h.useState(!0);h.useEffect(()=>{(async()=>{try{const p=await Fg();i(p)}catch(p){console.error("Error loading promotions:",p)}finally{c(!1)}})()},[]);const u=n.filter(x=>x.type!=="promo_code");if(o||u.length===0)return null;const f=x=>{var p;return x.type==="free_shipping"?a.jsx(pg,{size:16}):x.type==="percentage"?a.jsx(_l,{size:16}):(p=x.conditions)!=null&&p.time_range?a.jsx(hs,{size:16}):x.type==="buy_x_get_y"?a.jsx(Dd,{size:16}):a.jsx(Si,{size:16})},g=x=>{const p=x.discount,y=x.conditions;let v=x.description||x.name;return y!=null&&y.min_order_amount&&(v+=` (Mínimo: ${y.min_order_amount.toLocaleString()})`),y!=null&&y.time_range&&(v+=` (${y.time_range.start_time} - ${y.time_range.end_time})`),x.type==="promo_code"&&(p!=null&&p.promo_code)&&(v+=` (Código: ${p.promo_code})`),v};return a.jsxs("div",{className:"mb-4 space-y-2",children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center drop-shadow-md",children:[a.jsx(Dd,{className:"mr-2",size:22}),"Promociones Activas"]}),a.jsx("div",{className:"space-y-2",children:u.map(x=>{var N,j,S,w;const p=((N=x.visuals)==null?void 0:N.badge_bg_color)||"#4CAF50",y=(j=x.visuals)==null?void 0:j.banner_image,v=(S=x.visuals)==null?void 0:S.banner_text;return y?a.jsxs("div",{className:"relative overflow-hidden rounded-lg shadow-md transition-transform hover:scale-[1.02]",children:[a.jsx("img",{src:y,alt:x.name,className:"w-full h-32 object-cover"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent flex items-end p-3",children:a.jsxs("div",{className:"text-white",children:[a.jsx("p",{className:"font-bold text-lg drop-shadow-md",children:x.name}),v&&a.jsx("p",{className:"text-sm drop-shadow-md",children:v})]})})]},x.id):a.jsxs("div",{className:"flex items-center rounded-lg shadow-sm transition-transform hover:scale-[1.01] overflow-hidden",style:{borderLeftColor:p,background:`linear-gradient(to right, ${p}15, white)`},children:[a.jsx("div",{className:"flex items-center justify-center w-10 h-10 flex-shrink-0",style:{backgroundColor:p,color:((w=x.visuals)==null?void 0:w.badge_color)||"#FFFFFF"},children:f(x)}),"              ",a.jsxs("div",{className:"flex-1 px-2 py-1 flex items-center justify-between",children:[a.jsx("p",{className:"font-bold text-gray-900 text-sm",children:x.name}),a.jsx("p",{className:"text-xs text-gray-600 truncate ml-2",children:g(x)})]})]})})})]})},t_=({isOpen:n,order:i,whatsappNumber:o="573238090562"})=>{var g;const c=Xs();if(!n||!i)return null;const u=()=>{var H,se,W,X,re,G;const x=i.items.filter(Z=>{var A;return!((A=Z.nom_produit)!=null&&A.toLowerCase().includes("domicilio"))}),p=x.map(Z=>`- ${Z.quantite}x ${Z.nom_produit} (${me(Z.prix_unitaire)})`).join(`
`),y=x.reduce((Z,A)=>Z+(A.quantite??0),0),v=i.subtotal??x.reduce((Z,A)=>Z+(A.quantite??0)*A.prix_unitaire,0),N=typeof i.date_creation=="number"?new Date(i.date_creation):void 0,j=N?new Intl.DateTimeFormat("es-CO",{day:"2-digit",month:"2-digit",year:"numeric"}).format(N):"No disponible",S=N?new Intl.DateTimeFormat("es-CO",{hour:"2-digit",minute:"2-digit"}).format(N):"No disponible",w=((H=i.clientInfo)==null?void 0:H.nom)??i.client_name??"No especificado",T=((se=i.clientInfo)==null?void 0:se.telephone)??i.client_phone??"No especificado",C=((W=i.clientInfo)==null?void 0:W.adresse)??i.client_address,I=i.total_discount??0,L=(((X=i.applied_promotions)==null?void 0:X.length)??0)>0,Q=i.payment_method==="transferencia"?"Transferencia":i.payment_method==="tarjeta"?"Tarjeta":"Efectivo",D=[];return D.push("¡Hola! Aquí están los detalles de mi pedido:"),D.push(`Pedido #${i.id.slice(-6)}`),D.push(`Fecha: ${j}`),D.push(`Hora: ${S}`),D.push(""),D.push(`Cliente: ${w}`),D.push(`Teléfono: ${T}`),C&&D.push(`Dirección: ${C}`),D.push(""),D.push(`Número de productos: ${y}`),p&&(D.push("Productos:"),D.push(p)),D.push(""),D.push(`Total antes de promociones: ${me(v)}`),i.shipping_cost!==void 0&&(i.shipping_cost>0?D.push(`Costo de envío: ${me(i.shipping_cost)}`):(re=i.applied_promotions)!=null&&re.some(Z=>Z.type==="FREE_SHIPPING")&&D.push("Costo de envío: Gratis")),I>0&&D.push(`Descuento total: -${me(I)}`),L?(D.push("Promociones aplicadas:"),(G=i.applied_promotions)==null||G.forEach(Z=>{D.push(`- ${Z.name}: -${me(Z.discount_amount)}`)})):D.push("Promociones aplicadas: Ninguna"),D.push(`Total a pagar: ${me(i.total)}`),D.push(`Método de pago: ${Q}`),i.receipt_url&&D.push(`Comprobante: ${i.receipt_url}`),encodeURIComponent(D.join(`
`))},f=()=>{const x=u(),p=`https://wa.me/${o}?text=${x}`;window.open(p,"_blank"),c("/",{replace:!0}),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)};return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-md overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 p-6 text-white",children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx(jn,{size:64,className:"mb-3"}),a.jsx("h2",{className:"text-2xl font-bold text-center",children:"¡Pedido Confirmado!"}),a.jsxs("p",{className:"text-green-100 mt-2",children:["Pedido #",i.id.slice(-6)]})]})}),a.jsxs("div",{className:"p-6 text-center",children:[a.jsxs("div",{className:"p-6 text-left",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Détails de la commande:"}),a.jsxs("div",{className:"space-y-2",children:[i.items.filter(x=>{var p;return!((p=x.nom_produit)!=null&&p.toLowerCase().includes("domicilio"))}).map((x,p)=>a.jsxs("div",{className:"flex justify-between items-center text-gray-700",children:[a.jsxs("span",{children:[x.quantite,"x ",x.nom_produit]}),a.jsx("span",{children:me(x.quantite*x.prix_unitaire)})]},p)),i.subtotal!==void 0&&a.jsxs("div",{className:"flex justify-between items-center text-gray-700 border-t pt-2 mt-2",children:[a.jsx("span",{children:"Sous-total:"}),a.jsx("span",{children:me(i.subtotal)})]}),i.total_discount&&i.total_discount>0&&a.jsxs("div",{className:"flex justify-between items-center text-green-600",children:[a.jsx("span",{children:"Réduction totale:"}),a.jsxs("span",{children:["- ",me(i.total_discount)]})]}),i.applied_promotions&&i.applied_promotions.length>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("p",{className:"text-sm font-semibold text-green-700",children:"Promotions appliquées:"}),i.applied_promotions.map((x,p)=>a.jsxs("div",{className:"flex justify-between items-center text-xs text-green-600 ml-2",children:[a.jsxs("span",{children:["- ",x.name]}),a.jsxs("span",{children:["- ",me(x.discount_amount)]})]},p))]}),i.shipping_cost!==void 0&&i.shipping_cost>0&&a.jsxs("div",{className:"flex justify-between items-center text-gray-700",children:[a.jsx("span",{children:"Frais de livraison:"}),a.jsx("span",{children:me(i.shipping_cost)})]}),i.shipping_cost===0&&((g=i.applied_promotions)==null?void 0:g.some(x=>x.type==="FREE_SHIPPING"))&&a.jsxs("div",{className:"flex justify-between items-center text-green-600",children:[a.jsx("span",{children:"Livraison gratuite:"}),a.jsx("span",{children:me(0)})]}),a.jsxs("div",{className:"flex justify-between items-center text-gray-900 font-bold text-xl border-t pt-2 mt-2",children:[a.jsx("span",{children:"Total:"}),a.jsx("span",{children:me(i.total)})]})]})]}),a.jsxs("button",{onClick:f,className:"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-4 px-6 rounded-lg flex items-center justify-center gap-3 transition-all transform hover:scale-105 shadow-lg",children:[a.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"Enviar por WhatsApp"]}),a.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"Haz clic para enviar tu pedido por WhatsApp y ver el seguimiento"})]})]})})},xi=8e3,Kg="Domicilio",Lh=n=>n.nom_produit===Kg,qh=n=>(n??"").trim(),a_=(n,i)=>{const o=[...n??[]].sort(),c=[...i??[]].sort();return o.length!==c.length?!1:o.every((u,f)=>u===c[f])},s_=({isOpen:n,onClose:i,selectedProduct:o,onAddToCart:c})=>{var S;const[u,f]=h.useState(1),[g,x]=h.useState(""),[p,y]=h.useState([]);if(h.useEffect(()=>{n&&(f((o==null?void 0:o.quantite)||1),x((o==null?void 0:o.commentaire)||""),y((o==null?void 0:o.excluded_ingredients)||[]))},[n,o]),!n||!o)return null;const v=()=>{const w=o.product;c({id:`oi${Date.now()}`,produitRef:w.id,nom_produit:w.nom_produit,prix_unitaire:w.prix_vente,quantite:u,commentaire:g.trim()||void 0,excluded_ingredients:p.length>0?p:void 0})},N=w=>{p.includes(w)?y(p.filter(T=>T!==w)):y([...p,w])},j=((S=o.product.ingredients)==null?void 0:S.split(",").map(w=>w.trim()).filter(Boolean))||[];return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("h2",{className:"text-[clamp(1.1rem,2.3vw,1.5rem)] font-bold leading-snug text-gray-800 break-words text-balance whitespace-normal [hyphens:auto]",children:o.product.nom_produit}),a.jsx("button",{onClick:i,className:"text-gray-500 hover:text-gray-700",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("img",{src:o.product.image,alt:o.product.nom_produit,className:"w-full h-48 object-cover rounded-lg mb-4"}),a.jsx("p",{className:"text-gray-600 mb-4",children:o.product.description}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("p",{className:"font-bold text-gray-800 mb-2",children:["Precio: ",me(o.product.prix_vente)]}),a.jsxs("div",{className:"flex items-center mt-2",children:[a.jsx("button",{onClick:()=>f(Math.max(1,u-1)),className:"bg-gray-200 text-gray-700 rounded-l-lg px-3 py-1",children:"-"}),a.jsx("span",{className:"bg-gray-100 px-4 py-1",children:u}),a.jsx("button",{onClick:()=>f(u+1),className:"bg-gray-200 text-gray-700 rounded-r-lg px-3 py-1",children:"+"})]})]}),j.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsx("p",{className:"font-bold text-gray-800 mb-2",children:"Ingredientes:"}),a.jsx("div",{className:"space-y-2",children:j.map((w,T)=>a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:`ingredient-${T}`,checked:!p.includes(w),onChange:()=>N(w),className:"mr-2"}),a.jsx("label",{htmlFor:`ingredient-${T}`,className:"text-gray-700",children:w})]},T))})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"comment",className:"block font-bold text-gray-800 mb-2",children:"Comentarios adicionales:"}),a.jsx("textarea",{id:"comment",value:g,onChange:w=>x(w.target.value),className:"w-full border border-gray-300 rounded-lg p-2 text-gray-700",rows:3,placeholder:"Instrucciones especiales, alergias, etc."})]}),a.jsxs("button",{onClick:v,className:"w-full rounded-lg bg-gradient-to-r from-orange-500 via-orange-600 to-red-600 py-3 px-4 font-bold text-white shadow-lg transition-all duration-300 hover:scale-[1.02] hover:from-orange-600 hover:via-orange-700 hover:to-red-700 focus:outline-none focus:ring-2 focus:ring-orange-400/70 focus:ring-offset-2",children:["Agregar al carrito - ",me(o.product.prix_vente*u)]})]})})})},n_=({onOrderSubmitted:n})=>{const i=Xs(),{content:o}=Ei(),c=o??Cn,u=h.useMemo(()=>tu(c.hero.style,c.hero.backgroundImage),[c.hero.backgroundImage,c.hero.style]),[f,g]=h.useState([]),[x,p]=h.useState([]),[y,v]=h.useState(!0),[N,j]=h.useState(null),[S,w]=h.useState("all"),[T,C]=h.useState([]),[I,L]=h.useState(!1),[Q,D]=h.useState(null),[H,se]=h.useState(""),[W,X]=h.useState(""),[re,G]=h.useState(""),[Z,A]=h.useState("transferencia"),[K,q]=h.useState(null),[le,_]=h.useState(!1),[E,z]=h.useState(!1),[P,F]=h.useState(null),[R,B]=h.useState([]),[M,ce]=h.useState(""),[de,be]=h.useState(""),[te,ie]=h.useState(""),[xe,we]=h.useState(0),[Me,Je]=h.useState(!1),[Dt,Ct]=h.useState(!1),[Xt,ge]=h.useState(()=>new Date),Ne=h.useRef(new Map);h.useEffect(()=>{if(typeof window>"u")return;const oe=()=>ge(new Date);oe();const Ae=window.setInterval(oe,6e4);return()=>window.clearInterval(Ae)},[]);const ze=c.onlineOrdering.schedule,dt=h.useMemo(()=>Hg(ze,"fr-FR"),[ze.startTime,ze.endTime]),ke=co(ze,Xt),We=$g(ze,Xt),_t=h.useMemo(()=>{if(We===null)return null;if(We<1)return"Réouverture imminente";if(We<60)return`Réouverture dans environ ${We} min`;const oe=Math.floor(We/60),Ae=We%60;return Ae===0?`Réouverture dans environ ${oe} h`:`Réouverture dans environ ${oe} h ${Ae.toString().padStart(2,"0")} min`},[We]),[Kt,ft]=h.useState(8e4),[Nt,fa]=h.useState("pedir_en_linea");h.useEffect(()=>{Z==="efectivo"&&A("transferencia")},[Z]),h.useEffect(()=>{(async()=>{try{const[Ae,Pe]=await Promise.all([ye.getProducts(),ye.getCategories()]);g(Ae),p(Pe);try{const Fe=localStorage.getItem("customer-order-history");if(Fe){const Ve=JSON.parse(Fe);B(Ve.slice(0,3))}}catch(Fe){console.error("Error fetching order history:",Fe)}}catch(Ae){console.error("Error fetching data:",Ae),j("Error al cargar los datos. Por favor, intenta de nuevo más tarde.")}finally{v(!1)}})()},[]);const Ra=h.useMemo(()=>S==="all"?f:f.filter(oe=>oe.categoria_id===S),[f,S]),[pt,ue]=h.useState({subtotal:0,total:0,automaticPromotionsDiscount:0,promoCodeDiscount:0,deliveryFee:0,appliedPromotions:[]}),pe=h.useCallback(async()=>{var Be;const oe=T.reduce((ht,Ft)=>ht+Ft.quantite*Ft.prix_unitaire,0);if(T.length===0){ue({subtotal:0,total:0,automaticPromotionsDiscount:0,promoCodeDiscount:0,deliveryFee:0,appliedPromotions:[]}),Ct(!1);return}const Pe=await Cj({id:"temp",items:T,subtotal:oe,total:oe,total_discount:0,applied_promotions:[],promo_code:de||void 0,client_name:H,client_phone:W,client_address:re,shipping_cost:xi}),Fe=Pe.total_discount||0,Ve=((Be=Pe.applied_promotions.find(ht=>{var Ft;return((Ft=ht.config)==null?void 0:Ft.promo_code)===de}))==null?void 0:Be.discount_amount)||0,Yt=Fe-Ve;let la=Nt==="pedir_en_linea"?xi:0;const Ks=Pe.applied_promotions.some(ht=>ht.type==="FREE_SHIPPING");Ks&&(la=0),Ct(Ks);const _e=Pe.total+la;ue({subtotal:oe,total:_e,automaticPromotionsDiscount:Yt,promoCodeDiscount:Ve,deliveryFee:la,appliedPromotions:Pe.applied_promotions})},[T,de,Nt,H,W,re,Z,xi]);h.useEffect(()=>{pe()},[pe]);const{total:Se,subtotal:qe,promoCodeDiscount:Ke,deliveryFee:Ze}=pt,Ee=oe=>{const Ae=T.find(Pe=>Pe.produitRef===oe.id);D({product:oe,quantite:1,commentaire:Ae==null?void 0:Ae.commentaire,excluded_ingredients:Ae==null?void 0:Ae.excluded_ingredients}),L(!0)},Re=h.useCallback(oe=>{C(Ae=>{const Pe=Ae.findIndex(Fe=>Fe.produitRef===oe.produitRef&&qh(Fe.commentaire)===qh(oe.commentaire)&&a_(Fe.excluded_ingredients,oe.excluded_ingredients));if(Pe>-1){const Fe=[...Ae],Ve=Fe[Pe];return Fe[Pe]={...Ve,quantite:Ve.quantite+oe.quantite,commentaire:oe.commentaire??Ve.commentaire,excluded_ingredients:oe.excluded_ingredients??Ve.excluded_ingredients},Fe}return[...Ae,oe]}),L(!1)},[C,L]);h.useCallback(oe=>{C(Ae=>Ae.filter(Pe=>Pe.id!==oe))},[C]);const xt=h.useCallback((oe,Ae)=>{const Pe=Ne.current.get(oe);Pe&&clearTimeout(Pe),C(Ve=>Ve.map(Yt=>{if(Yt.id===oe){const la=Math.max(0,Yt.quantite+Ae);return{...Yt,quantite:la}}return Yt}));const Fe=setTimeout(()=>{C(Ve=>Ve.filter(Yt=>Yt.quantite>0)),Ne.current.delete(oe)},300);Ne.current.set(oe,Fe)},[C]),ot=oe=>{const Ae=oe.items.filter(Pe=>!Lh(Pe));C(Ae)},Rt=async()=>{const oe=M.trim().toUpperCase();if(oe){if(de&&de===oe){ie("Este código ya está aplicado.");return}ce(oe),ie(""),Je(!0);try{if(!await Qg(oe)){ie("Código promocional inválido o expirado.");return}be(oe)}catch(Ae){console.error("Error validating promo code:",Ae),ie("No se pudo validar el código. Intenta nuevamente.")}finally{Je(!1)}}},Va=()=>{be(""),ce(""),ie("")},pa=async oe=>{oe.preventDefault(),_(!0);let Ae="";if(Z==="transferencia"&&K)try{Ae=await Ph(K)}catch(Fe){console.error("Error uploading receipt:",Fe),j("Error al subir el comprobante de pago."),_(!1);return}const Pe={id:`ord_${Date.now()}`,items:T,clientInfo:{nom:H,telephone:W,adresse:re},shipping_cost:Ze,order_type:Nt,payment_method:Z,receipt_url:Ae,subtotal:pt.subtotal,total:pt.total,total_discount:pt.automaticPromotionsDiscount+pt.promoCodeDiscount,promo_code:de||void 0,applied_promotions:pt.appliedPromotions,status:"pending",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};console.log("finalOrder.total avant createOrder:",Pe.total),console.log("orderTotals:",pt);try{const Fe=await ye.createOrder(Pe);console.log("submitted.total après createOrder:",Fe.total),F(Fe),z(!0),Fh(Fe.id,Date.now()+Yh),n==null||n(Fe);try{const Ve=localStorage.getItem("customer-order-history"),Yt=Ve?JSON.parse(Ve):[],la=[Fe,...Yt].slice(0,10);localStorage.setItem("customer-order-history",JSON.stringify(la)),B(la.slice(0,3))}catch(Ve){console.error("Error updating order history:",Ve)}}catch(Fe){console.error("Error submitting order:",Fe),j("Error al enviar el pedido. Por favor, intenta de nuevo.")}finally{_(!1)}},Zt=H.trim()===""||W.trim()===""||Nt==="pedir_en_linea"&&re.trim()===""||Z==="transferencia"&&!K,Vt=le||T.length===0||Zt,yt=!le&&T.length>0&&Zt;return ke?a.jsxs("div",{className:"min-h-screen flex flex-col lg:flex-row",style:u,children:[a.jsxs("div",{class:"flex-1 p-4 lg:p-8 bg-white",children:[a.jsxs("div",{class:"flex items-center justify-between mb-6 bg-white p-3 rounded-lg shadow-md",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 drop-shadow-md",children:"Realizar Pedido"}),a.jsxs("button",{type:"button",onClick:()=>i("/"),className:"inline-flex items-center text-sm font-semibold text-brand-primary hover:text-brand-primary/80 transition-colors",children:[a.jsx(ag,{size:14,className:"mr-1"}),"Volver"]})]}),a.jsx("div",{class:"bg-white p-4 rounded-lg shadow-md",children:a.jsx(e_,{})}),a.jsxs("div",{className:"flex space-x-3 mb-6 overflow-x-auto pb-2 p-4 rounded-lg shadow-md bg-white",children:[a.jsx("button",{onClick:()=>w("all"),className:`px-5 py-2 rounded-full text-sm font-bold transition-all ${S==="all"?"bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg scale-105 border-2 border-orange-600":"bg-white text-gray-800 shadow-md hover:bg-gray-100 border-2 border-gray-300"}`,children:"Todos"}),x.map(oe=>a.jsx("button",{onClick:()=>w(oe.id),className:`px-5 py-2 rounded-full text-sm font-bold transition-all ${S===oe.id?"bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg scale-105 border-2 border-orange-600":"bg-white text-gray-800 shadow-md hover:bg-gray-100 border-2 border-gray-300"}`,children:oe.nom},oe.id))]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:Ra.map(oe=>oe&&a.jsx(Wj,{product:oe,onClick:()=>Ee(oe)},oe.id))})]}),a.jsxs("div",{className:"lg:w-96 flex flex-col",children:[a.jsxs("div",{className:"bg-white p-4 lg:p-6 shadow-lg flex flex-col",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900 drop-shadow-md mb-4",children:"Mon panier"}),R.length>0&&a.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[a.jsx("h3",{className:"text-sm font-bold text-gray-700 mb-2",children:"Tus últimos pedidos"}),a.jsx("div",{className:"space-y-2",children:R.map(oe=>{let Ae="Fecha no disponible";const Pe=oe.created_at||oe.date_commande||oe.date_servido||oe.timestamp;if(Pe)try{const Ve=new Date(Pe);isNaN(Ve.getTime())||(Ae=Ve.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"}))}catch(Ve){console.error("Error parsing date:",Ve)}Ae==="Fecha no disponible"&&(Ae=new Date().toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"}));const Fe=oe.items?oe.items.filter(Ve=>!Lh(Ve)).reduce((Ve,Yt)=>Ve+Yt.quantite,0):0;return a.jsxs("div",{className:"flex justify-between items-center bg-white p-2 rounded border border-gray-200 hover:border-yellow-500 transition-all",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("p",{className:"text-xs font-bold text-gray-800 truncate",children:["Pedido del ",Ae]}),a.jsxs("p",{className:"text-xs text-gray-600",children:[Fe," article",Fe>1?"s":""," • ",me(oe.total)]})]}),a.jsx("button",{onClick:()=>ot(oe),className:"ml-2 bg-yellow-400 hover:bg-yellow-500 text-gray-900 font-bold px-3 py-1 rounded text-xs whitespace-nowrap transition-all",children:"Pedir de nuevo"})]},oe.id)})})]}),T.length===0?a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-500",children:[a.jsx(dg,{size:48,className:"mb-3"}),a.jsx("p",{children:"Tu carrito está vacío."})]}):a.jsx("div",{className:"flex-1 overflow-y-auto pr-2 -mr-2",children:T.map(oe=>a.jsx("div",{className:"group relative mb-3 rounded-lg bg-gradient-to-r from-orange-400 to-red-400 border-2 border-orange-500 px-4 py-4 text-white shadow-md transition-shadow hover:shadow-lg",children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex-1 space-y-2",children:["                                        ",a.jsxs("p",{className:"text-[clamp(1rem,2vw,1.3rem)] leading-snug text-white break-words text-balance whitespace-normal [hyphens:auto]",children:["                                          ",(oe==null?void 0:oe.nom_produit)||"Article inconnu"]}),oe.commentaire&&a.jsxs("p",{className:"text-sm text-gray-600 italic bg-gray-50 border-l-2 border-brand-primary/50 p-2 rounded",children:["💬 ",oe.commentaire]}),oe.excluded_ingredients&&oe.excluded_ingredients.length>0&&a.jsxs("p",{className:"text-sm text-gray-700 font-semibold bg-gray-50 border-l-2 border-red-500/50 p-2 rounded",children:["🚫 Sin: ",oe.excluded_ingredients.join(", ")]})]}),a.jsx("div",{className:"flex flex-col items-center gap-2",children:a.jsxs("div",{className:"flex items-center gap-2 rounded-full bg-white px-2 py-1 text-sm font-semibold border border-gray-300 text-gray-800",children:[a.jsx("button",{onClick:()=>xt(oe.id,-1),className:"rounded-full p-1 transition hover:bg-gray-200","aria-label":"Disminuir cantidad",children:a.jsx(cg,{size:14})}),a.jsx("span",{className:"min-w-[1.5rem] text-center text-base font-bold text-gray-800",children:oe.quantite}),a.jsx("button",{onClick:()=>xt(oe.id,1),className:"rounded-full p-1 transition hover:bg-gray-200","aria-label":"Aumentar cantidad",children:a.jsx(Ci,{size:14})})]})})]})},oe.id))}),T.length>0&&Nt==="pedir_en_linea"&&a.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-200 last:border-b-0",children:[a.jsx("p",{className:"font-medium text-gray-800",children:Kg}),Dt?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("p",{className:"text-sm text-gray-400 line-through",children:me(xi)}),a.jsx("p",{className:"text-sm font-bold text-green-600",children:"GRATIS"})]}):a.jsx("p",{className:"text-sm text-gray-600",children:me(xi)})]}),a.jsxs("div",{className:"mt-auto pt-4 border-t border-gray-200",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"promoCode",className:"block text-sm font-medium text-gray-700 mb-2",children:"Código de Promoción:"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("input",{type:"text",id:"promoCode",value:M,onChange:oe=>ce(oe.target.value.toUpperCase()),placeholder:"Ingresa tu código",className:"flex-1 border border-gray-300 rounded-md shadow-sm p-2 uppercase"}),a.jsx("button",{type:"button",onClick:Rt,disabled:Me||!M.trim()||de===M,"aria-busy":Me,className:"rounded-md bg-gradient-to-r from-orange-500 via-orange-600 to-red-600 px-4 py-2 font-bold text-white shadow-sm transition-all duration-300 hover:from-orange-600 hover:via-orange-700 hover:to-red-700 focus:outline-none focus:ring-2 focus:ring-orange-400 disabled:cursor-not-allowed disabled:opacity-50",children:Me?"Validando…":"Confirmar"})]}),te&&a.jsx("p",{className:"mt-2 text-sm text-red-600",children:te}),de&&a.jsxs("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded-md flex items-center justify-between",children:[a.jsxs("span",{className:"text-sm text-green-700 font-medium",children:['✓ Código "',de,'" aplicado']}),a.jsx("button",{type:"button",onClick:Va,className:"text-red-500 hover:text-red-700 text-sm font-medium",children:"Eliminar"})]})]}),pt.appliedPromotions&&pt.appliedPromotions.length>0&&a.jsxs("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:[a.jsx("p",{className:"text-sm font-bold text-green-800 mb-2",children:"🎉 Promociones aplicadas:"}),pt.appliedPromotions.map((oe,Ae)=>{const Pe=`- ${me(oe.discount_amount)}`;return Nt==="a_emporter"?a.jsxs("div",{className:"mb-2 text-sm text-green-700",children:[a.jsx("p",{className:"font-semibold",children:oe.name}),a.jsx("p",{className:"font-semibold",children:Pe})]},Ae):a.jsxs("div",{className:"flex justify-between items-center mb-1 text-sm",children:[a.jsx("span",{className:"text-green-700",children:oe.name}),a.jsx("span",{className:"font-semibold text-green-700",children:Pe})]},Ae)})]}),xe>0&&a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("p",{className:"text-sm text-green-600",children:"Descuento por código promocional:"}),a.jsxs("p",{className:"text-sm font-bold text-green-600",children:["- ",me(xe)]})]}),a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("p",{className:"text-lg font-bold text-gray-800",children:"Total:"}),a.jsx("p",{className:"text-3xl font-bold text-brand-primary",children:me(Se)})]}),a.jsxs("form",{onSubmit:pa,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de pedido:"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:`flex items-center p-3 border-2 rounded-lg cursor-pointer transition ${Nt==="pedir_en_linea"?"border-brand-primary bg-brand-primary/5":"border-gray-300 hover:border-brand-primary/50"}`,children:[a.jsx("input",{type:"radio",name:"orderType",value:"pedir_en_linea",checked:Nt==="pedir_en_linea",onChange:()=>fa("pedir_en_linea"),className:"form-radio text-brand-primary"}),a.jsx("span",{className:"ml-3 font-medium",children:"🚚 Domicilio (con entrega)"})]}),a.jsxs("label",{className:`flex items-center p-3 border-2 rounded-lg cursor-pointer transition ${Nt==="a_emporter"?"border-brand-primary bg-brand-primary/5":"border-gray-300 hover:border-brand-primary/50"}`,children:[a.jsx("input",{type:"radio",name:"orderType",value:"a_emporter",checked:Nt==="a_emporter",onChange:()=>fa("a_emporter"),className:"form-radio text-brand-primary"}),a.jsx("span",{className:"ml-3 font-medium",children:"🏪 Para llevar (recoger en tienda)"})]})]})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"clientName",className:"block text-sm font-medium text-gray-700",children:["Nombre: ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",id:"clientName",value:H,onChange:oe=>se(oe.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"clientPhone",className:"block text-sm font-medium text-gray-700",children:["Teléfono: ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"tel",id:"clientPhone",value:W,onChange:oe=>X(oe.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",required:!0})]}),Nt==="pedir_en_linea"&&a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"clientAddress",className:"block text-sm font-medium text-gray-700",children:["Dirección: ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("textarea",{id:"clientAddress",value:re,onChange:oe=>G(oe.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",rows:3,required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Método de pago:"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:`flex items-center p-3 border-2 rounded-lg cursor-pointer transition ${Z==="transferencia"?"border-brand-primary bg-brand-primary/5":"border-gray-300 hover:border-brand-primary/50"}`,children:[a.jsx("input",{type:"radio",name:"paymentMethod",value:"transferencia",checked:Z==="transferencia",onChange:()=>A("transferencia"),className:"form-radio text-brand-primary"}),a.jsx("span",{className:"ml-3 font-medium",children:"💰 Transferencia Bancaria"})]}),a.jsxs("label",{className:"flex items-center rounded-lg border-2 border-gray-200 bg-gray-100 p-3 opacity-70 cursor-not-allowed","aria-disabled":"true",children:[a.jsx("input",{type:"radio",name:"paymentMethod",value:"efectivo",checked:Z==="efectivo",onChange:()=>{},disabled:!0,className:"form-radio text-gray-400"}),a.jsxs("span",{className:"ml-3 font-medium text-gray-500",children:[a.jsx("span",{children:"💵 Efectivo"}),a.jsx("span",{className:"block text-xs font-normal uppercase tracking-wide text-gray-500/80",children:"No disponible por el momento"})]})]})]})]}),Z==="transferencia"&&a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"paymentProof",className:"block text-sm font-medium text-gray-700",children:["Comprobante de pago: ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"file",id:"paymentProof",onChange:oe=>q(oe.target.files?oe.target.files[0]:null),className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",accept:"image/*,application/pdf",required:!0})]}),a.jsx("button",{type:"submit",disabled:Vt,className:"w-full bg-gradient-to-r from-blue-500 to-indigo-600 text-white font-bold py-3 px-4 rounded-lg hover:from-blue-600 hover:to-indigo-700 transition-all shadow-lg transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:le?"Enviando pedido...":"Confirmar Pedido"}),yt&&a.jsxs("p",{className:"mt-2 text-sm text-red-600",children:["Faltan datos obligatorios. Completa los campos marcados con ",a.jsx("span",{className:"font-semibold",children:"*"}),"."]})]})]})]}),Q&&a.jsx(s_,{isOpen:I,onClose:()=>L(!1),selectedProduct:Q,onAddToCart:Re}),P&&a.jsx(t_,{isOpen:E,order:P,onClose:()=>{z(!1),C([]),se(""),X(""),G(""),A("transferencia"),q(null),be(""),we(0)}})]})]}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-600 via-red-600 to-rose-600",children:a.jsx("div",{className:"mx-auto flex min-h-screen max-w-3xl flex-col items-center justify-center px-6 py-16 text-center text-white",children:a.jsxs("div",{className:"w-full rounded-3xl border border-white/20 bg-black/30 p-10 shadow-2xl backdrop-blur-xl",children:[a.jsx("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-white/15 text-white",children:a.jsx(hs,{size:32})}),a.jsx("h1",{className:"mt-6 text-3xl font-bold sm:text-4xl",children:c.onlineOrdering.closedTitle}),a.jsx("p",{className:"mt-3 text-lg text-white/85",children:c.onlineOrdering.closedSubtitle||`Revenez entre ${dt} pour passer commande.`}),a.jsxs("p",{className:"mt-6 text-sm font-semibold uppercase tracking-[0.3em] text-white/70",children:["Horaires : ",dt]}),_t&&a.jsx("p",{className:"mt-2 text-sm font-medium text-white/80",children:_t}),a.jsx("div",{className:"mt-8 flex flex-col gap-3 sm:flex-row sm:justify-center",children:a.jsx("button",{type:"button",onClick:()=>i("/"),className:"inline-flex items-center justify-center rounded-full border border-white/30 bg-white/10 px-6 py-3 text-sm font-semibold uppercase tracking-[0.25em] text-white transition hover:bg-white/20 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/70 focus-visible:ring-offset-2 focus-visible:ring-offset-red-600",children:"Retour à l'accueil"})})]})})})},l_=()=>a.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-100 text-center",children:[a.jsx("h1",{className:"text-9xl font-extrabold text-brand-primary tracking-widest",children:"404"}),a.jsx("div",{className:"bg-brand-accent px-2 text-sm rounded rotate-12 absolute",children:"Page Non Trouvée"}),a.jsx("p",{className:"text-2xl md:text-3xl font-light text-gray-700 mt-4",children:"Désolé, la page que vous recherchez n'existe pas."}),a.jsx(bb,{to:"/",className:"mt-8 px-8 py-3 bg-brand-primary text-brand-secondary font-semibold rounded-lg hover:bg-yellow-400 transition",children:"Retour à l'accueil"})]}),i_=new Intl.NumberFormat("es-CO",{maximumFractionDigits:2}),r_=new Intl.NumberFormat("es-CO",{maximumFractionDigits:0}),Bh=n=>i_.format(Number.isFinite(n)?n:0),gn=n=>r_.format(Number.isFinite(n)?Math.round(n):0),pl={all:"Toutes",efectivo:"Efectivo",transferencia:"Transferencia",tarjeta:"Tarjeta",unknown:"Non spécifié"},Ih={sur_place:"En el local",a_emporter:"Para llevar",pedir_en_linea:"Pedido en línea"},o_=()=>{const[n,i]=h.useState([]),[o,c]=h.useState([]),[u,f]=h.useState([]),[g,x]=h.useState([]),[p,y]=h.useState(!0),[v,N]=h.useState(null),[j,S]=h.useState(null),[w,T]=h.useState({startDate:"",endDate:"",paymentMethod:"all",orderType:"all",categoryId:"",productId:""}),C=h.useCallback(async()=>{y(!0);try{const[_,E,z,P]=await Promise.all([ye.getFinalizedOrders(),ye.getSalesHistory(),ye.getProducts(),ye.getCategories()]);i([..._].sort((F,R)=>R.date_creation-F.date_creation)),c(E),f(z),x(P),N(null)}catch(_){console.error("Failed to fetch sales summary",_),N("Impossible de charger les données de ventes. Veuillez réessayer.")}finally{y(!1)}},[]);h.useEffect(()=>{C()},[C]),h.useEffect(()=>{const _=ye.notifications.subscribe("orders_updated",()=>{C()});return()=>{_()}},[C]);const I=h.useMemo(()=>new Map(n.map(_=>[_.id,_])),[n]),L=h.useMemo(()=>{if(!w.startDate)return null;const _=new Date(w.startDate);return _.setHours(0,0,0,0),_.getTime()},[w.startDate]),Q=h.useMemo(()=>{if(!w.endDate)return null;const _=new Date(w.endDate);return _.setHours(23,59,59,999),_.getTime()},[w.endDate]),D=h.useMemo(()=>o.filter(_=>{if(L!==null&&_.saleDate<L||Q!==null&&_.saleDate>Q||w.paymentMethod!=="all"&&_.paymentMethod!==w.paymentMethod||w.categoryId&&_.categoryId!==w.categoryId||w.productId&&_.productId!==w.productId)return!1;const E=I.get(_.orderId);return!(!E||w.orderType!=="all"&&E.type!==w.orderType||w.paymentMethod!=="all"&&E.payment_method&&E.payment_method!==w.paymentMethod)}),[o,L,Q,w.paymentMethod,w.categoryId,w.productId,w.orderType,I]),H=h.useMemo(()=>{const _=new Map;return D.forEach(E=>{const z=_.get(E.orderId),P=E.totalPrice??0,F=E.profit??0,R=E.quantity??0;if(!z){_.set(E.orderId,{revenue:P,profit:F,quantity:R,paymentMethod:E.paymentMethod,items:[{productId:E.productId,productName:E.productName,categoryName:E.categoryName,quantity:E.quantity,revenue:P,profit:F}]});return}z.revenue+=P,z.profit+=F,z.quantity+=R,!z.paymentMethod&&E.paymentMethod&&(z.paymentMethod=E.paymentMethod);const B=z.items.findIndex(M=>M.productId===E.productId);B>-1?z.items[B]={...z.items[B],quantity:z.items[B].quantity+E.quantity,revenue:z.items[B].revenue+P,profit:z.items[B].profit+F}:z.items.push({productId:E.productId,productName:E.productName,categoryName:E.categoryName,quantity:E.quantity,revenue:P,profit:F})}),_.forEach(E=>{E.items.sort((z,P)=>P.revenue-z.revenue)}),_},[D]),se=h.useMemo(()=>n.filter(_=>H.has(_.id)).sort((_,E)=>E.date_creation-_.date_creation),[n,H]),W=h.useMemo(()=>{const _=D.reduce((R,B)=>R+(B.totalPrice??0),0),E=D.reduce((R,B)=>R+(B.totalCost??0),0),z=D.reduce((R,B)=>R+(B.profit??0),0),P=D.reduce((R,B)=>R+(B.quantity??0),0),F=se.length;return{totalRevenue:_,totalCost:E,totalProfit:z,totalQuantity:P,orderCount:F,averageOrderValue:F>0?_/F:0,averageItemsPerOrder:F>0?P/F:0,profitMargin:_>0?z/_*100:0}},[D,se]),X=h.useMemo(()=>{const _=new Map;return D.forEach(E=>{const z=E.productId,P=_.get(z);if(!P){_.set(z,{productId:E.productId,productName:E.productName,categoryName:E.categoryName,quantity:E.quantity,revenue:E.totalPrice??0,profit:E.profit??0});return}P.quantity+=E.quantity,P.revenue+=E.totalPrice??0,P.profit+=E.profit??0}),Array.from(_.values()).sort((E,z)=>z.revenue-E.revenue)},[D]),re=h.useMemo(()=>{const _=new Map;return D.forEach(E=>{const z=E.categoryId||"unknown",P=_.get(z);if(!P){_.set(z,{categoryName:E.categoryName||"Sin categoría",quantity:E.quantity,revenue:E.totalPrice??0,profit:E.profit??0});return}P.quantity+=E.quantity,P.revenue+=E.totalPrice??0,P.profit+=E.profit??0}),Array.from(_.values()).sort((E,z)=>z.revenue-E.revenue)},[D]),G=h.useMemo(()=>{const _=new Map;return D.forEach(E=>{const z=E.paymentMethod??"unknown",P=_.get(z);if(!P){_.set(z,{revenue:E.totalPrice??0,profit:E.profit??0,orders:new Set([E.orderId])});return}P.revenue+=E.totalPrice??0,P.profit+=E.profit??0,P.orders.add(E.orderId)}),Array.from(_.entries()).map(([E,z])=>({method:E,label:pl[E]??pl.unknown,revenue:z.revenue,profit:z.profit,orders:z.orders.size})).sort((E,z)=>z.revenue-E.revenue)},[D]),Z=h.useMemo(()=>[...g].sort((_,E)=>_.nom.localeCompare(E.nom,"es")),[g]),A=h.useMemo(()=>{const{categoryId:_}=w;return[..._?u.filter(z=>z.categoria_id===_):u].sort((z,P)=>z.nom_produit.localeCompare(P.nom_produit,"es"))},[u,w.categoryId]),K=_=>{const{name:E,value:z}=_.target;T(P=>{if(E==="categoryId"){const F={...P,categoryId:z,productId:P.productId};if(z&&P.productId){const R=u.find(B=>B.id===P.productId);(!R||R.categoria_id!==z)&&(F.productId="")}return F}if(E==="productId"){if(!z)return{...P,productId:""};const F=u.find(R=>R.id===z);return{...P,productId:z,categoryId:F?F.categoria_id:P.categoryId}}return E==="paymentMethod"&&(z==="all"||z==="efectivo"||z==="transferencia"||z==="tarjeta")?{...P,paymentMethod:z}:E==="orderType"&&(z==="all"||z==="sur_place"||z==="a_emporter"||z==="pedir_en_linea")?{...P,orderType:z}:{...P,[E]:z}}),S(null)},q=()=>{T({startDate:"",endDate:"",paymentMethod:"all",orderType:"all",categoryId:"",productId:""}),S(null)},le=()=>{if(D.length===0)return;const _=["Fecha","Pedido","Tipo","Mesa/Cliente","Producto","Categoría","Cantidad","Precio unitario","Ingresos","Costo","Beneficio","Método de pago"],E=D.map(B=>{const M=I.get(B.orderId),ce=M?Ih[M.type]:"N/A",de=M?M.type==="sur_place"?M.table_nom||"N/A":M.client_name||M.client_address||"N/A":"N/A";return[new Date(B.saleDate).toLocaleString("es-CO"),B.orderId,ce,`"${de}"`,`"${B.productName}"`,B.categoryName||"N/A",B.quantity,me(B.unitPrice??0),me(B.totalPrice??0),me(B.totalCost??0),me(B.profit??0),pl[B.paymentMethod??"unknown"]??pl.unknown].join(",")}),z=[_.join(","),...E].join(`
`),P=new Blob([`﻿${z}`],{type:"text/csv;charset=utf-8;"}),F=URL.createObjectURL(P),R=document.createElement("a");R.href=F,R.download=`resume_ventes_${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(R),R.click(),document.body.removeChild(R),URL.revokeObjectURL(F)};return p?a.jsx("div",{className:"text-gray-800",children:"Chargement du résumé des ventes..."}):a.jsxs("div",{className:"space-y-6",children:[v&&a.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4 text-sm text-red-700",children:v}),a.jsxs("section",{className:"rounded-xl bg-white p-4 shadow-md",children:[a.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Filtres d'analyse"}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsxs("button",{type:"button",onClick:q,className:"inline-flex items-center gap-2 rounded-lg border border-gray-300 px-3 py-2 text-sm font-medium text-gray-700 transition hover:bg-gray-100",children:[a.jsx(Qy,{size:16}),"Réinitialiser"]}),a.jsxs("button",{type:"button",onClick:le,className:"inline-flex items-center gap-2 rounded-lg bg-green-600 px-3 py-2 text-sm font-semibold text-white transition hover:bg-green-700",children:[a.jsx(qy,{size:16}),"Export CSV"]})]})]}),a.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-3",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Date de début"}),a.jsx("input",{type:"date",name:"startDate",value:w.startDate,onChange:K,className:"mt-1 rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-brand-primary focus:outline-none focus:ring-brand-primary"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Date de fin"}),a.jsx("input",{type:"date",name:"endDate",value:w.endDate,onChange:K,className:"mt-1 rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-brand-primary focus:outline-none focus:ring-brand-primary"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Type de commande"}),a.jsxs("select",{name:"orderType",value:w.orderType,onChange:K,className:"mt-1 rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-brand-primary focus:outline-none focus:ring-brand-primary",children:[a.jsx("option",{value:"all",children:"Tous les types"}),a.jsx("option",{value:"sur_place",children:"En el local"}),a.jsx("option",{value:"a_emporter",children:"Para llevar"}),a.jsx("option",{value:"pedir_en_linea",children:"Pedido en línea"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Méthode de paiement"}),a.jsxs("select",{name:"paymentMethod",value:w.paymentMethod,onChange:K,className:"mt-1 rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-brand-primary focus:outline-none focus:ring-brand-primary",children:[a.jsx("option",{value:"all",children:"Toutes"}),a.jsx("option",{value:"efectivo",children:"Efectivo"}),a.jsx("option",{value:"transferencia",children:"Transferencia"}),a.jsx("option",{value:"tarjeta",children:"Tarjeta"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Catégorie"}),a.jsxs("select",{name:"categoryId",value:w.categoryId,onChange:K,className:"mt-1 rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-brand-primary focus:outline-none focus:ring-brand-primary",children:[a.jsx("option",{value:"",children:"Toutes"}),Z.map(_=>a.jsx("option",{value:_.id,children:_.nom},_.id))]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Produit"}),a.jsxs("select",{name:"productId",value:w.productId,onChange:K,className:"mt-1 rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-brand-primary focus:outline-none focus:ring-brand-primary",children:[a.jsx("option",{value:"",children:"Tous les produits"}),A.map(_=>a.jsx("option",{value:_.id,children:_.nom_produit},_.id))]})]})]})]}),a.jsx("section",{children:a.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-4",children:[a.jsxs("div",{className:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Chiffre d'affaires"}),a.jsx("p",{className:"mt-1 text-2xl font-bold text-gray-900",children:me(W.totalRevenue)})]}),a.jsx("div",{className:"rounded-full bg-brand-primary/10 p-3 text-brand-primary",children:a.jsx(fg,{size:20})})]}),a.jsx("p",{className:"mt-3 text-xs text-gray-500",children:"Basé sur les articles correspondant aux filtres appliqués."})]}),a.jsxs("div",{className:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Bénéfice"}),a.jsx("p",{className:"mt-1 text-2xl font-bold text-gray-900",children:me(W.totalProfit)})]}),a.jsx("div",{className:"rounded-full bg-emerald-500/10 p-3 text-emerald-600",children:a.jsx(Ov,{size:20})})]}),a.jsxs("p",{className:"mt-3 text-xs text-gray-500",children:["Marge moyenne : ",Bh(W.profitMargin),"%"]})]}),a.jsxs("div",{className:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Commandes"}),a.jsx("p",{className:"mt-1 text-2xl font-bold text-gray-900",children:gn(W.orderCount)})]}),a.jsx("div",{className:"rounded-full bg-indigo-500/10 p-3 text-indigo-600",children:a.jsx(Qs,{size:20})})]}),a.jsxs("p",{className:"mt-3 text-xs text-gray-500",children:["Panier moyen : ",me(W.averageOrderValue)]})]}),a.jsxs("div",{className:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Articles vendus"}),a.jsx("p",{className:"mt-1 text-2xl font-bold text-gray-900",children:gn(W.totalQuantity)})]}),a.jsx("div",{className:"rounded-full bg-amber-500/10 p-3 text-amber-600",children:a.jsx(mh,{size:20})})]}),a.jsxs("p",{className:"mt-3 text-xs text-gray-500",children:["Moyenne par commande : ",Bh(W.averageItemsPerOrder)]})]})]})}),a.jsxs("section",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[a.jsxs("div",{className:"rounded-xl bg-white p-4 shadow-md",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Répartition par méthode de paiement"}),a.jsx(py,{size:18,className:"text-brand-primary"})]}),a.jsx("div",{className:"mt-4 overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"border-b text-xs uppercase text-gray-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-2",children:"Méthode"}),a.jsx("th",{className:"p-2 text-right",children:"Ventes"}),a.jsx("th",{className:"p-2 text-right",children:"Bénéfice"}),a.jsx("th",{className:"p-2 text-right",children:"Commandes"})]})}),a.jsx("tbody",{children:G.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"p-4 text-center text-sm text-gray-500",children:"Aucune donnée pour les filtres sélectionnés."})}):G.map(_=>a.jsxs("tr",{className:"border-b last:border-b-0",children:[a.jsx("td",{className:"p-2 text-sm font-medium text-gray-800",children:_.label}),a.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:me(_.revenue)}),a.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:me(_.profit)}),a.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:gn(_.orders)})]},_.method))})]})})]}),a.jsxs("div",{className:"rounded-xl bg-white p-4 shadow-md",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Répartition par catégorie"}),a.jsx(mh,{size:18,className:"text-brand-primary"})]}),a.jsx("div",{className:"mt-4 overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"border-b text-xs uppercase text-gray-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-2",children:"Catégorie"}),a.jsx("th",{className:"p-2 text-right",children:"Quantité"}),a.jsx("th",{className:"p-2 text-right",children:"Ventes"}),a.jsx("th",{className:"p-2 text-right",children:"Bénéfice"})]})}),a.jsx("tbody",{children:re.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"p-4 text-center text-sm text-gray-500",children:"Aucune donnée pour les filtres sélectionnés."})}):re.map(_=>a.jsxs("tr",{className:"border-b last:border-b-0",children:[a.jsx("td",{className:"p-2 text-sm font-medium text-gray-800",children:_.categoryName}),a.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:gn(_.quantity)}),a.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:me(_.revenue)}),a.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:me(_.profit)})]},_.categoryName))})]})})]})]}),a.jsxs("section",{className:"rounded-xl bg-white p-4 shadow-md",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Produits les plus performants"}),a.jsx(Qs,{size:18,className:"text-brand-primary"})]}),a.jsx("div",{className:"mt-4 overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"border-b text-xs uppercase text-gray-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-2",children:"Produit"}),a.jsx("th",{className:"p-2",children:"Catégorie"}),a.jsx("th",{className:"p-2 text-right",children:"Quantité"}),a.jsx("th",{className:"p-2 text-right",children:"Ventes"}),a.jsx("th",{className:"p-2 text-right",children:"Bénéfice"})]})}),a.jsx("tbody",{children:X.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"p-4 text-center text-sm text-gray-500",children:"Aucun produit trouvé pour les filtres sélectionnés."})}):X.map(_=>a.jsxs("tr",{className:"border-b last:border-b-0",children:[a.jsx("td",{className:"p-2 text-sm font-medium text-gray-800",children:_.productName}),a.jsx("td",{className:"p-2 text-sm text-gray-700",children:_.categoryName||"Sin categoría"}),a.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:gn(_.quantity)}),a.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:me(_.revenue)}),a.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:me(_.profit)})]},_.productId))})]})})]}),a.jsxs("section",{className:"rounded-xl bg-white p-4 shadow-md",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Détails des commandes"}),a.jsx("div",{className:"mt-4 overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"border-b text-xs uppercase text-gray-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"w-12 p-3"}),a.jsx("th",{className:"p-3",children:"Date"}),a.jsx("th",{className:"p-3",children:"Type"}),a.jsx("th",{className:"p-3",children:"Table/Client"}),a.jsx("th",{className:"p-3 text-right",children:"Articles"}),a.jsx("th",{className:"p-3 text-right",children:"Ventes"}),a.jsx("th",{className:"p-3 text-right",children:"Bénéfice"}),a.jsx("th",{className:"p-3",children:"Paiement"})]})}),a.jsx("tbody",{children:se.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:8,className:"p-6 text-center text-sm text-gray-500",children:"Aucune commande ne correspond aux filtres sélectionnés."})}):se.map(_=>{const E=H.get(_.id);if(!E)return null;const z=j===_.id,P=_.type==="sur_place"?a.jsxs("span",{className:"inline-flex items-center gap-1.5 rounded-full bg-blue-100 px-2 py-1 text-xs font-medium text-blue-800",children:[a.jsx(ji,{size:12}),"En el local"]}):a.jsxs("span",{className:"inline-flex items-center gap-1.5 rounded-full bg-purple-100 px-2 py-1 text-xs font-medium text-purple-800",children:[a.jsx(Kd,{size:12}),Ih[_.type]]}),F=_.type==="sur_place"?_.table_nom||"N/A":_.client_name||_.client_address||"N/A",R=pl[E.paymentMethod??_.payment_method??"unknown"]??pl.unknown;return a.jsxs(Ca.Fragment,{children:[a.jsxs("tr",{onClick:()=>S(z?null:_.id),className:"cursor-pointer border-b transition hover:bg-gray-50",children:[a.jsx("td",{className:"p-3 align-top",children:z?a.jsx(sg,{size:16}):a.jsx(jy,{size:16})}),a.jsx("td",{className:"p-3 text-sm text-gray-700",children:new Date(_.date_creation).toLocaleString("es-CO")}),a.jsx("td",{className:"p-3",children:P}),a.jsx("td",{className:"p-3 text-sm font-semibold text-gray-900",children:F}),a.jsx("td",{className:"p-3 text-right text-sm text-gray-700",children:gn(E.quantity)}),a.jsx("td",{className:"p-3 text-right text-sm font-semibold text-gray-900",children:me(E.revenue)}),a.jsx("td",{className:"p-3 text-right text-sm font-semibold text-emerald-600",children:me(E.profit)}),a.jsx("td",{className:"p-3 text-sm text-gray-700",children:R})]}),z&&a.jsx("tr",{className:"bg-gray-50",children:a.jsx("td",{colSpan:8,className:"p-4",children:a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[a.jsxs("h4",{className:"text-sm font-semibold text-gray-800",children:["Articles inclus (",E.items.length,")"]}),a.jsx("div",{className:"mt-3 overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"border-b text-xs uppercase text-gray-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-2",children:"Produit"}),a.jsx("th",{className:"p-2",children:"Catégorie"}),a.jsx("th",{className:"p-2 text-right",children:"Quantité"}),a.jsx("th",{className:"p-2 text-right",children:"Ventes"}),a.jsx("th",{className:"p-2 text-right",children:"Bénéfice"})]})}),a.jsx("tbody",{children:E.items.map(B=>a.jsxs("tr",{className:"border-b last:border-b-0",children:[a.jsx("td",{className:"p-2 text-sm font-medium text-gray-800",children:B.productName}),a.jsx("td",{className:"p-2 text-sm text-gray-700",children:B.categoryName||"Sin categoría"}),a.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:gn(B.quantity)}),a.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:me(B.revenue)}),a.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:me(B.profit)})]},B.productId))})]})})]})})})]},_.id)})})]})})]})]})},Pr="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-200 bg-white text-slate-600 transition hover:border-brand-primary/50 hover:text-brand-primary focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-brand-primary disabled:opacity-50",c_=({id:n,value:i,fallback:o,onChange:c,className:u,placeholder:f})=>{const g=h.useRef(null),[x,p]=h.useState(()=>((i==null?void 0:i.plainText)??o).trim().length===0),y=()=>{const L=g.current;if(!L){p(!0);return}const Q=L.textContent??"";p(Q.trim().length===0)};h.useEffect(()=>{const L=g.current;if(L){if(i&&typeof i.html=="string"){L.innerHTML!==i.html&&(L.innerHTML=i.html),y();return}L.textContent!==o&&(L.textContent=o,y())}},[i,o]);const v=()=>{const L=g.current;if(!L){c(null),p(!0);return}const Q=L.innerHTML,D=L.innerText,H=Zd({html:Q,plainText:D});c(H),y()},N=L=>{var Q;document.execCommand("styleWithCSS",!1,"false"),document.execCommand(L),(Q=g.current)==null||Q.focus(),v()},j=L=>{var D;const Q=L.target.value;document.execCommand("styleWithCSS",!1,"true"),document.execCommand("foreColor",!1,Q),(D=g.current)==null||D.focus(),v()},S=()=>{var L;document.execCommand("removeFormat"),document.execCommand("unlink"),(L=g.current)==null||L.focus(),v()},w=()=>{v()},T=()=>{v()},C=L=>{L.preventDefault();const Q=L.clipboardData.getData("text/plain");document.execCommand("insertText",!1,Q),v()},I=L=>{if((L.metaKey||L.ctrlKey)&&L.key.toLowerCase()==="b"){L.preventDefault(),N("bold");return}if((L.metaKey||L.ctrlKey)&&L.key.toLowerCase()==="i"){L.preventDefault(),N("italic");return}(L.metaKey||L.ctrlKey)&&L.key.toLowerCase()==="x"&&L.shiftKey&&(L.preventDefault(),N("strikeThrough"))};return a.jsxs("div",{className:`space-y-2 ${u??""}`,children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("button",{type:"button",className:Pr,onClick:()=>N("bold"),"aria-label":"Mettre en gras",children:a.jsx(ny,{className:"h-4 w-4","aria-hidden":"true"})}),a.jsx("button",{type:"button",className:Pr,onClick:()=>N("italic"),"aria-label":"Mettre en italique",children:a.jsx(av,{className:"h-4 w-4","aria-hidden":"true"})}),a.jsx("button",{type:"button",className:Pr,onClick:()=>N("strikeThrough"),"aria-label":"Barrer",children:a.jsx(Jv,{className:"h-4 w-4","aria-hidden":"true"})}),a.jsxs("label",{className:"flex items-center gap-2 text-xs font-medium text-slate-500",children:[a.jsx(Sv,{className:"h-4 w-4","aria-hidden":"true"}),a.jsx("span",{className:"sr-only",children:"Choisir une couleur"}),a.jsx("input",{type:"color",className:"h-8 w-8 cursor-pointer rounded-full border border-slate-200",onChange:j,"aria-label":"Sélectionner une couleur de texte"})]}),a.jsx("button",{type:"button",className:Pr,onClick:S,"aria-label":"Supprimer la mise en forme",children:a.jsx(fs,{className:"h-4 w-4","aria-hidden":"true"})})]}),a.jsxs("div",{className:"relative",children:[f&&x&&a.jsx("div",{className:"pointer-events-none absolute left-4 top-3 text-sm text-slate-400",children:f}),a.jsx("div",{id:n,ref:g,className:"ui-textarea w-full min-h-[120px] whitespace-pre-wrap break-words px-4 py-3",contentEditable:!0,role:"textbox","aria-multiline":"true",suppressContentEditableWarning:!0,onInput:w,onBlur:T,onKeyDown:I,onPaste:C})]})]})},d_=["Inter","Poppins","Roboto","Montserrat","Playfair Display","Lora","Open Sans","Georgia, serif","Arial, sans-serif"],u_=["14px","16px","18px","20px","24px","clamp(1rem, 2vw, 1.5rem)"],$d=["#0f172a","#111827","#f8fafc","#ffffff","#e2e8f0","#f97316","transparent","currentColor"],m_="#ffffff",f_=n=>/^#(?:[0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(n.trim());new Set(j1);const p_={"navigation.brand":"Nom de la marque","navigation.brandLogo":"Logo principal","navigation.staffLogo":"Logo d'accès équipe","navigation.links.home":"Lien Accueil","navigation.links.about":"Lien À propos","navigation.links.menu":"Lien Menu","navigation.links.contact":"Lien Contact","navigation.links.loginCta":"Bouton d'accès staff","navigation.style.background":"Fond de la navigation","hero.title":"Titre du hero","hero.subtitle":"Sous-titre du hero","hero.ctaLabel":"Bouton principal du hero","hero.historyTitle":"Titre de l'historique","hero.reorderCtaLabel":"Bouton de réassort","hero.backgroundImage":"Image du hero","hero.style.background":"Fond du hero","about.title":"Titre À propos","about.description":"Texte À propos","about.image":"Image À propos","about.style.background":"Fond À propos","menu.title":"Titre du menu","menu.ctaLabel":"Bouton du menu","menu.loadingLabel":"Texte de chargement du menu","menu.image":"Image du menu","menu.style.background":"Fond du menu","instagramReviews.title":"Titre Avis Instagram","instagramReviews.subtitle":"Sous-titre Avis Instagram","instagramReviews.image":"Image centrale Avis Instagram","instagramReviews.style.background":"Fond Avis Instagram","findUs.title":"Titre Encuéntranos","findUs.addressLabel":"Libellé de l'adresse (Encuéntranos)","findUs.address":"Adresse (Encuéntranos)","findUs.cityLabel":"Libellé de contact","findUs.city":"Email (Encuéntranos)","findUs.hoursLabel":"Libellé des horaires","findUs.hours":"Horaires","findUs.mapLabel":"Libellé du lien carte","findUs.style.background":"Fond Encuéntranos","footer.text":"Texte du pied de page","footer.style.background":"Fond du pied de page"},h_={...p_},g_=[{id:"preview",label:"Aperçu"},{id:"custom",label:"Personnalisation"}],x_=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`asset-${Date.now()}-${Math.random().toString(36).slice(2,10)}`,Mi=n=>{var u;const{type:i,name:o}=n;if(i.startsWith("image/"))return"image";if(i.startsWith("video/"))return"video";if(i.startsWith("audio/"))return"audio";if(i.includes("font"))return"font";const c=(u=o.split(".").pop())==null?void 0:u.toLowerCase();return c&&["ttf","otf","woff","woff2"].includes(c)?"font":"raw"},Jr=n=>typeof globalThis.structuredClone=="function"?globalThis.structuredClone(n):JSON.parse(JSON.stringify(n)),Zg=(n,i,o)=>{const c=i.split("."),u=c.pop();if(!u)return;let f=n;c.forEach(g=>{if(f&&typeof f=="object"){const x=f[g];x&&typeof x=="object"?f[g]=Array.isArray(x)?[...x]:{...x}:f[g]={},f=f[g]}}),f&&typeof f=="object"&&(f[u]=o)},Hh=(n,i,o)=>{const c={};o.fontFamily&&o.fontFamily.trim().length>0&&(c.fontFamily=o.fontFamily.trim()),o.fontSize&&o.fontSize.trim().length>0&&(c.fontSize=o.fontSize.trim()),o.textColor&&o.textColor.trim().length>0&&(c.textColor=o.textColor.trim()),o.backgroundColor&&o.backgroundColor.trim().length>0&&(c.backgroundColor=o.backgroundColor.trim());const u={...n.elementStyles};Object.keys(c).length===0?delete u[i]:u[i]=c,n.elementStyles=u},$h=(n,i,o)=>{const c={...n.elementRichText};o&&o.html.trim().length>0?c[i]=o:delete c[i],n.elementRichText=c},b_=(n,i,o)=>{const c=Ya(i),u={...n[c]},f={...u.style,background:{...o}};u.style=f,n[c]=u},y_=(n,i)=>{var f;const o=((f=n.assets)==null?void 0:f.library)??[],c=o.findIndex(g=>g.url===i.url||g.id===i.id),u=c>=0?o.map((g,x)=>x===c?i:g):[...o,i];n.assets={...n.assets,library:u}},Pg=(n,i)=>{const o=i.split(".");let c=n;for(const u of o){if(!c||typeof c!="object")return"";c=c[u]}return typeof c=="string"?c:""},v_=(n,i)=>{const o=Pg(n,i);return o.trim().length>0?o:null},j_=(n,i)=>n.elementStyles[i]??{},__=(n,i)=>n.elementRichText[i]??null,N_=(n,i)=>{const o=Ya(i);return n[o].style.background},uo=(n,i)=>{const o=n.name.replace(/\.[^/.]+$/,"").trim()||"media",c=Mi(n),u=c==="font"?eu(o):o;return{id:x_(),name:u,url:i,format:n.type||"application/octet-stream",bytes:n.size,type:c,createdAt:new Date().toISOString()}},w_=n=>{if(n===0)return"0 o";const i=["o","Ko","Mo","Go"],o=Math.min(Math.floor(Math.log(n)/Math.log(1024)),i.length-1),c=n/Math.pow(1024,o);return`${c.toFixed(c>=10||o===0?0:1)} ${i[o]}`},S_=[{id:"navigation",title:"Navigation",description:"Logos, liens principaux et fond du menu supérieur.",groups:[{id:"navigation-main",title:"Contenu principal",fields:[{id:"navigation-brand",type:"text",element:"navigation.brand",label:"Nom de la marque"},{id:"navigation-home",type:"text",element:"navigation.links.home",label:"Libellé du lien Accueil"},{id:"navigation-about",type:"text",element:"navigation.links.about",label:"Libellé du lien À propos"},{id:"navigation-menu",type:"text",element:"navigation.links.menu",label:"Libellé du lien Menu"},{id:"navigation-contact",type:"text",element:"navigation.links.contact",label:"Libellé du lien Contact"},{id:"navigation-login",type:"text",element:"navigation.links.loginCta",label:"Texte du bouton d'accès staff"}]},{id:"navigation-branding",title:"Identité visuelle",fields:[{id:"navigation-brand-logo",type:"image",element:"navigation.brandLogo",label:"Logo principal",description:"PNG ou SVG recommandé pour un rendu net sur tous les écrans."},{id:"navigation-staff-logo",type:"image",element:"navigation.staffLogo",label:"Logo d'accès équipe",description:"S'affiche pour le bouton d'accès staff si disponible."}]},{id:"navigation-background",title:"Fond et mise en forme",fields:[{id:"navigation-style-background",type:"background",element:"navigation.style.background",label:"Fond du bandeau"}]}]},{id:"hero",title:"Section Hero",description:"Grand bandeau d’ouverture avec accroche et image de fond.",groups:[{id:"hero-content",title:"Contenu",fields:[{id:"hero-title",type:"text",element:"hero.title",label:"Titre principal",allowRichText:!0,showStyleOptions:!0,multiline:!0},{id:"hero-subtitle",type:"text",element:"hero.subtitle",label:"Sous-titre",allowRichText:!0,showStyleOptions:!0,multiline:!0},{id:"hero-cta",type:"text",element:"hero.ctaLabel",label:"Bouton principal"},{id:"hero-history",type:"text",element:"hero.historyTitle",label:"Titre du bloc historique",multiline:!0},{id:"hero-reorder",type:"text",element:"hero.reorderCtaLabel",label:"Bouton de réassort"}]},{id:"hero-visuals",title:"Visuels et ambiance",fields:[{id:"hero-background-image",type:"image",element:"hero.backgroundImage",label:"Image de fond",description:"Utilisez des images haute résolution. Optimisation Cloudinary recommandée."},{id:"hero-background-style",type:"background",element:"hero.style.background",label:"Couleurs et ambiance"}]}]},{id:"about",title:"Section À propos",description:"Présentation de votre histoire et visuels associés.",groups:[{id:"about-content",title:"Contenu",fields:[{id:"about-title",type:"text",element:"about.title",label:"Titre",showStyleOptions:!0},{id:"about-description",type:"text",element:"about.description",label:"Texte descriptif",allowRichText:!0,multiline:!0,showStyleOptions:!0}]},{id:"about-visuals",title:"Visuels",fields:[{id:"about-image",type:"image",element:"about.image",label:"Image principale",description:"Photo illustrative de votre établissement ou de vos produits."},{id:"about-background",type:"background",element:"about.style.background",label:"Fond de section"}]}]},{id:"menu",title:"Section Menu",description:"Mettre en avant vos plats signatures et CTA vers la commande.",groups:[{id:"menu-content",title:"Contenu",fields:[{id:"menu-title",type:"text",element:"menu.title",label:"Titre du menu",showStyleOptions:!0},{id:"menu-cta",type:"text",element:"menu.ctaLabel",label:"Texte du bouton",showStyleOptions:!0},{id:"menu-loading",type:"text",element:"menu.loadingLabel",label:"Message de chargement",multiline:!0}]},{id:"menu-visuals",title:"Visuels",fields:[{id:"menu-image",type:"image",element:"menu.image",label:"Image d’illustration"},{id:"menu-background",type:"background",element:"menu.style.background",label:"Fond de section"}]}]},{id:"instagram",title:"Section Avis Instagram",description:"Personnalisez le carrousel social, ses textes et ses visuels.",groups:[{id:"instagram-header",title:"En-tête de section",fields:[{id:"instagram-title",type:"text",element:"instagramReviews.title",label:"Titre de la section",showStyleOptions:!0},{id:"instagram-subtitle",type:"text",element:"instagramReviews.subtitle",label:"Sous-titre",allowRichText:!0,multiline:!0},{id:"instagram-image",type:"image",element:"instagramReviews.image",label:"Image centrale",description:"Illustration affichée à droite du carrousel."},{id:"instagram-background",type:"background",element:"instagramReviews.style.background",label:"Fond de section"}]},...ki.map((n,i)=>({id:`instagram-review-${n}`,title:`Carte témoignage ${i+1}`,description:"Personnalisez le contenu de la carte et les médias associés (avatar, visuel de post, mise en avant).",fields:[{id:`instagram-review-${n}-name`,type:"text",element:`instagramReviews.reviews.${n}.name`,label:"Nom"},{id:`instagram-review-${n}-handle`,type:"text",element:`instagramReviews.reviews.${n}.handle`,label:"Handle Instagram"},{id:`instagram-review-${n}-timeAgo`,type:"text",element:`instagramReviews.reviews.${n}.timeAgo`,label:"Durée depuis la publication"},{id:`instagram-review-${n}-message`,type:"text",element:`instagramReviews.reviews.${n}.message`,label:"Message principal",multiline:!0,allowRichText:!0},{id:`instagram-review-${n}-highlight`,type:"text",element:`instagramReviews.reviews.${n}.highlight`,label:"Message mis en avant",multiline:!0},{id:`instagram-review-${n}-highlight-caption`,type:"text",element:`instagramReviews.reviews.${n}.highlightCaption`,label:"Description du highlight",multiline:!0},{id:`instagram-review-${n}-badge`,type:"text",element:`instagramReviews.reviews.${n}.badgeLabel`,label:"Badge"},{id:`instagram-review-${n}-location`,type:"text",element:`instagramReviews.reviews.${n}.location`,label:"Localisation"},{id:`instagram-review-${n}-avatar`,type:"image",element:`instagramReviews.reviews.${n}.avatarUrl`,label:"Avatar"},{id:`instagram-review-${n}-highlight-image`,type:"image",element:`instagramReviews.reviews.${n}.highlightImageUrl`,label:"Image highlight"},{id:`instagram-review-${n}-post-image`,type:"image",element:`instagramReviews.reviews.${n}.postImageUrl`,label:"Image du post"},{id:`instagram-review-${n}-post-alt`,type:"text",element:`instagramReviews.reviews.${n}.postImageAlt`,label:"Texte alternatif de l'image du post"}]}))]},{id:"find-us",title:"Section Encuéntranos",description:"Coordonnées, horaires et informations de contact.",groups:[{id:"find-us-content",title:"Contenu",fields:[{id:"find-us-title",type:"text",element:"findUs.title",label:"Titre",showStyleOptions:!0},{id:"find-us-address-label",type:"text",element:"findUs.addressLabel",label:"Libellé de l'adresse"},{id:"find-us-address",type:"text",element:"findUs.address",label:"Adresse complète",multiline:!0},{id:"find-us-city-label",type:"text",element:"findUs.cityLabel",label:"Libellé de contact"},{id:"find-us-city",type:"text",element:"findUs.city",label:"Contact (mail ou téléphone)"},{id:"find-us-hours-label",type:"text",element:"findUs.hoursLabel",label:"Libellé des horaires"},{id:"find-us-hours",type:"text",element:"findUs.hours",label:"Horaires détaillés",multiline:!0},{id:"find-us-map-label",type:"text",element:"findUs.mapLabel",label:"Libellé du lien carte"}]},{id:"find-us-background",title:"Fond",fields:[{id:"find-us-style-background",type:"background",element:"findUs.style.background",label:"Personnalisation du fond"}]}]},{id:"footer",title:"Pied de page",description:"Dernière section visible de la page d’accueil.",groups:[{id:"footer-content",title:"Contenu",fields:[{id:"footer-text",type:"text",element:"footer.text",label:"Texte du pied de page",multiline:!0,allowRichText:!0,showStyleOptions:!0}]},{id:"footer-background",title:"Fond",fields:[{id:"footer-style-background",type:"background",element:"footer.style.background",label:"Couleur ou image de fond"}]}]}],Td=({element:n,label:i,description:o,isActive:c,register:u,onFocus:f,children:g})=>{const x=h.useCallback(p=>{u(n,p)},[n,u]);return a.jsxs("div",{ref:x,className:`group relative rounded-3xl border p-6 transition shadow-sm focus-within:ring-2 focus-within:ring-brand-primary/60 ${c?"border-brand-primary/80 ring-1 ring-brand-primary/40":"border-slate-200 hover:border-slate-300"}`,tabIndex:-1,onFocusCapture:()=>f(n),onMouseEnter:()=>f(n),children:[a.jsxs("div",{className:"mb-4 flex items-start justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-base font-semibold text-slate-900",children:i}),o&&a.jsx("p",{className:"mt-1 text-sm text-slate-500",children:o})]}),c&&a.jsx("span",{className:"rounded-full bg-brand-primary/10 px-3 py-1 text-xs font-medium text-brand-primary",children:"Sélectionné"})]}),a.jsx("div",{className:"space-y-4",children:g})]})},C_=({element:n,draft:i,onApply:o,fontOptions:c,onAssetAdded:u,multiline:f=!1,allowRichText:g=!0,showStyleOptions:x=!1,placeholder:p})=>{const y=Pg(i,n),v=__(i,n),N=j_(i,n),[j,S]=h.useState(y),[w,T]=h.useState(v),[C,I]=h.useState(!!v),[L,Q]=h.useState(N.fontFamily??""),[D,H]=h.useState(N.fontSize??""),[se,W]=h.useState(N.textColor??""),[X,re]=h.useState(N.backgroundColor??""),[G,Z]=h.useState(null),[A,K]=h.useState(!1);h.useEffect(()=>{S(y),T(v),I(!!v),Q(N.fontFamily??""),H(N.fontSize??""),W(N.textColor??""),re(N.backgroundColor??"")},[y,v,N.fontFamily,N.fontSize,N.textColor,N.backgroundColor]);const q=h.useCallback(()=>{const z=j;o(P=>(Zg(P,n,z),$h(P,n,C?w:null),x&&Hh(P,n,{fontFamily:L,fontSize:D,textColor:se,backgroundColor:X}),P))},[X,n,L,D,C,o,j,w,x,se]),le=h.useCallback(()=>{Q(""),H(""),W(""),re(""),o(z=>(Hh(z,n,{}),z))},[n,o]),_=()=>{C?(I(!1),T(null),o(z=>($h(z,n,null),z))):I(!0)},E=async z=>{var F;const P=(F=z.target.files)==null?void 0:F[0];if(P){Z(null),K(!0);try{const R=await yl(P,{tags:[Mi(P)]}),B=uo(P,R);u(B),Q(B.name)}catch(R){Z(R instanceof Error?R.message:"Impossible de téléverser la police. Réessayez plus tard.")}finally{K(!1),z.target.value=""}}};return a.jsxs("div",{className:"space-y-5",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-slate-700",htmlFor:`${n}-input`,children:"Contenu"}),f?a.jsx("textarea",{id:`${n}-input`,className:"ui-textarea w-full",rows:4,value:j,placeholder:p,onChange:z=>S(z.target.value)}):a.jsx("input",{id:`${n}-input`,className:"ui-input w-full",value:j,placeholder:p,onChange:z=>S(z.target.value)})]}),g&&a.jsxs("div",{className:"space-y-3 rounded-2xl border border-slate-200 bg-slate-50/70 p-4",children:[a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Mise en forme avancée"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Activez l’éditeur riche pour ajouter du gras, de l’italique et des liens."})]}),a.jsx("button",{type:"button",className:"ui-btn-secondary whitespace-nowrap",onClick:_,children:C?"Désactiver":"Activer"})]}),C&&a.jsx(c_,{id:`${n}-rich`,value:w,fallback:j,onChange:z=>{T(z),z&&S(z.plainText)},className:"rounded-xl border border-slate-200 bg-white",placeholder:"Saisissez votre texte..."})]}),x&&a.jsxs("div",{className:"space-y-4 rounded-2xl border border-slate-200 p-4",children:[a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"Style du texte"}),a.jsx("button",{type:"button",className:"text-sm font-medium text-brand-primary",onClick:le,children:"Réinitialiser"})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Police"}),a.jsx("input",{className:"ui-input w-full",value:L,onChange:z=>Q(z.target.value),list:`${n}-font-options`,placeholder:"Ex: Poppins"}),a.jsx("datalist",{id:`${n}-font-options`,children:c.map(z=>a.jsx("option",{value:z},z))}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-slate-500",children:[a.jsxs("label",{className:"ui-btn-secondary relative cursor-pointer text-xs",children:[a.jsx("input",{type:"file",accept:".woff,.woff2,.ttf,.otf",className:"absolute inset-0 cursor-pointer opacity-0",onChange:E,disabled:A}),a.jsx(Nl,{className:"mr-2 h-3.5 w-3.5","aria-hidden":"true"}),"Importer une police"]}),A&&a.jsx(vl,{className:"h-4 w-4 animate-spin text-brand-primary","aria-hidden":"true"}),G&&a.jsx("span",{className:"text-xs text-amber-600",children:G})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Taille du texte"}),a.jsx("input",{className:"ui-input w-full",value:D,onChange:z=>H(z.target.value),list:`${n}-size-options`,placeholder:"Ex: 18px"}),a.jsx("datalist",{id:`${n}-size-options`,children:u_.map(z=>a.jsx("option",{value:z},z))})]})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Couleur du texte"}),a.jsx("input",{className:"ui-input w-full",value:se,onChange:z=>W(z.target.value),placeholder:"Ex: #0f172a"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:$d.map(z=>a.jsx("button",{type:"button",className:"h-8 w-8 rounded-full border border-slate-200",style:{backgroundColor:z},onClick:()=>W(z),children:a.jsx("span",{className:"sr-only",children:z})},z))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Fond du texte"}),a.jsx("input",{className:"ui-input w-full",value:X,onChange:z=>re(z.target.value),placeholder:"Ex: transparent"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:$d.map(z=>a.jsx("button",{type:"button",className:"h-8 w-8 rounded-full border border-slate-200",style:{backgroundColor:z},onClick:()=>re(z),children:a.jsx("span",{className:"sr-only",children:z})},z))})]})]})]}),a.jsxs("div",{className:"flex flex-wrap justify-end gap-3",children:[a.jsx("button",{type:"button",className:"ui-btn-secondary",onClick:()=>{S(y),T(v),I(!!v),Q(N.fontFamily??""),H(N.fontSize??""),W(N.textColor??""),re(N.backgroundColor??"")},children:"Réinitialiser les modifications"}),a.jsx("button",{type:"button",className:"ui-btn-primary",onClick:q,children:"Appliquer"})]})]})},k_=({element:n,draft:i,onApply:o,onAssetAdded:c,placeholder:u})=>{const f=v_(i,n)??"",[g,x]=h.useState(f),[p,y]=h.useState(null),[v,N]=h.useState(!1);h.useEffect(()=>{x(f)},[f]);const j=()=>{const T=g.trim(),C=ps(T)??(T.length>0?T:null);o(I=>(Zg(I,n,C),I))},S=async T=>{var I;const C=(I=T.target.files)==null?void 0:I[0];if(C){y(null),N(!0);try{const L=await yl(C,{tags:[Mi(C)]}),Q=uo(C,L);c(Q),x(L)}catch(L){y(L instanceof Error?L.message:"Téléversement impossible. Vérifiez votre connexion.")}finally{N(!1),T.target.value=""}}},w=g.trim();return a.jsxs("div",{className:"space-y-5",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-slate-700",htmlFor:`${n}-image`,children:"URL de l'image ou du média"}),a.jsx("input",{id:`${n}-image`,className:"ui-input w-full",value:g,placeholder:u??"https://",onChange:T=>x(T.target.value)}),a.jsx("p",{className:"text-xs text-slate-500",children:"Collez une URL Cloudinary ou téléversez un fichier pour l’ajouter automatiquement."})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsxs("label",{className:"ui-btn-secondary relative cursor-pointer",children:[a.jsx("input",{type:"file",accept:"image/*,video/*,audio/*,.ttf,.otf,.woff,.woff2",className:"absolute inset-0 cursor-pointer opacity-0",onChange:S,disabled:v}),a.jsx(Nl,{className:"mr-2 h-4 w-4","aria-hidden":"true"}),"Importer un média"]}),v&&a.jsx(vl,{className:"h-4 w-4 animate-spin text-brand-primary","aria-hidden":"true"}),a.jsx("button",{type:"button",className:"text-sm font-medium text-brand-primary hover:text-brand-primary/80",onClick:()=>x(""),children:"Supprimer le média"})]}),p&&a.jsxs("div",{className:"flex items-start gap-2 rounded-2xl border border-amber-200 bg-amber-50 p-3 text-sm text-amber-700",children:[a.jsx(Oa,{className:"mt-0.5 h-4 w-4","aria-hidden":"true"}),a.jsx("p",{children:p})]}),w&&a.jsx("div",{className:"overflow-hidden rounded-2xl border border-slate-200",children:a.jsx("img",{src:w,alt:"Aperçu",className:"h-48 w-full object-cover"})}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"button",className:"ui-btn-primary",onClick:j,children:"Appliquer"})})]})},T_=({element:n,draft:i,onApply:o,onAssetAdded:c})=>{const u=N_(i,n),[f,g]=h.useState(u.type),[x,p]=h.useState(u.color),[y,v]=h.useState(u.image??""),[N,j]=h.useState(null),[S,w]=h.useState(!1),T=f_(x)?x:m_,C=D=>{const H=D.target.value;p(H),g("color")},I=D=>{const H=D.target.value;p(H),H.trim().length>0&&g("color")};h.useEffect(()=>{g(u.type),p(u.color),v(u.image??"")},[u.type,u.color,u.image]);const L=()=>{const D=x.trim()||"transparent",H=y.trim(),se=ps(H)??(H.length>0?H:null),W=f==="image"&&se?se:null;o(X=>(b_(X,n,{type:W?"image":"color",color:D,image:W}),X)),W||g("color")},Q=async D=>{var se;const H=(se=D.target.files)==null?void 0:se[0];if(H){j(null),w(!0);try{const W=await yl(H,{tags:[Mi(H)]}),X=uo(H,W);c(X),v(W),g("image")}catch(W){j(W instanceof Error?W.message:"Téléversement impossible.")}finally{w(!1),D.target.value=""}}};return a.jsxs("div",{className:"space-y-5",children:[a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{type:"button",className:`ui-btn-secondary flex-1 ${f==="color"?"ring-2 ring-brand-primary":""}`,onClick:()=>g("color"),children:"Couleur"}),a.jsx("button",{type:"button",className:`ui-btn-secondary flex-1 ${f==="image"?"ring-2 ring-brand-primary":""}`,onClick:()=>g("image"),children:"Image"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-sm font-medium text-slate-700",htmlFor:`${n}-background-color`,children:"Couleur"}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsx("input",{type:"color",className:"h-10 w-16 cursor-pointer rounded-md border border-slate-200 bg-white",value:T,onChange:C,"aria-label":"Sélectionner une couleur"}),a.jsx("input",{id:`${n}-background-color`,className:"ui-input flex-1 min-w-[12rem]",value:x,onChange:I,placeholder:"#ffffff ou transparent"})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:$d.map(D=>a.jsx("button",{type:"button",className:"h-8 w-8 rounded-full border border-slate-200",style:{backgroundColor:D},onClick:()=>{p(D),g("color")},children:a.jsx("span",{className:"sr-only",children:D})},D))})]}),f==="image"&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-sm font-medium text-slate-700",htmlFor:`${n}-background-image`,children:"Image de fond"}),a.jsx("input",{id:`${n}-background-image`,className:"ui-input w-full",value:y,onChange:D=>v(D.target.value),placeholder:"https://"}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsxs("label",{className:"ui-btn-secondary relative cursor-pointer",children:[a.jsx("input",{type:"file",accept:"image/*,video/*",className:"absolute inset-0 cursor-pointer opacity-0",onChange:Q,disabled:S}),a.jsx(Nl,{className:"mr-2 h-4 w-4","aria-hidden":"true"}),"Importer une image"]}),S&&a.jsx(vl,{className:"h-4 w-4 animate-spin text-brand-primary","aria-hidden":"true"}),a.jsx("button",{type:"button",className:"text-sm font-medium text-brand-primary hover:text-brand-primary/80",onClick:()=>{v(""),g("color")},children:"Supprimer l'image"})]}),N&&a.jsxs("div",{className:"flex items-start gap-2 rounded-2xl border border-amber-200 bg-amber-50 p-3 text-sm text-amber-700",children:[a.jsx(Oa,{className:"mt-0.5 h-4 w-4","aria-hidden":"true"}),a.jsx("p",{children:N})]}),y.trim()&&a.jsx("div",{className:"overflow-hidden rounded-2xl border border-slate-200",children:a.jsx("img",{src:y,alt:"Aperçu du fond",className:"h-40 w-full object-cover"})})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"button",className:"ui-btn-primary",onClick:L,children:"Appliquer"})})]})},E_=({assets:n,onUpload:i})=>{const[o,c]=h.useState(null),[u,f]=h.useState(!1),[g,x]=h.useState(null),p=async S=>{try{await navigator.clipboard.writeText(S.url),c(S.id),setTimeout(()=>c(null),2e3)}catch(w){console.error(w)}},y=async S=>{var T;const w=(T=S.target.files)==null?void 0:T[0];if(w){x(null),f(!0);try{await i(w)}catch(C){x(C instanceof Error?C.message:"Téléversement impossible.")}finally{f(!1),S.target.value=""}}},v=n.filter(S=>S.type==="font"),N=n.filter(S=>S.type==="image"),j=n.filter(S=>S.type!=="image"&&S.type!=="font");return a.jsxs("section",{className:"space-y-6 rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[a.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Bibliothèque de médias"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Centralisez toutes vos ressources pour la personnalisation (polices, images, vidéos, audio)."})]}),a.jsxs("label",{className:"ui-btn-primary relative cursor-pointer",children:[a.jsx("input",{type:"file",accept:"image/*,video/*,audio/*,.ttf,.otf,.woff,.woff2",className:"absolute inset-0 cursor-pointer opacity-0",onChange:y,disabled:u}),a.jsx(Nl,{className:"mr-2 h-4 w-4","aria-hidden":"true"}),"Ajouter un média"]})]}),g&&a.jsxs("div",{className:"flex items-start gap-3 rounded-2xl border border-amber-200 bg-amber-50 p-4 text-sm text-amber-700",children:[a.jsx(Oa,{className:"h-5 w-5","aria-hidden":"true"}),a.jsx("div",{children:a.jsx("p",{children:g})})]}),u&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[a.jsx(vl,{className:"h-4 w-4 animate-spin","aria-hidden":"true"})," Téléversement en cours…"]}),a.jsxs("div",{className:"space-y-6",children:[a.jsx(Ed,{title:"Polices",assets:v,onCopy:p,copySuccessId:o}),a.jsx(Ed,{title:"Images",assets:N,onCopy:p,copySuccessId:o}),a.jsx(Ed,{title:"Autres médias",assets:j,onCopy:p,copySuccessId:o})]})]})},Ed=({title:n,assets:i,onCopy:o,copySuccessId:c})=>i.length===0?a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-slate-700",children:n}),a.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Aucun média pour le moment."})]}):a.jsxs("div",{className:"space-y-3",children:[a.jsx("h3",{className:"text-sm font-semibold text-slate-700",children:n}),a.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:i.map(u=>a.jsxs("article",{className:"rounded-2xl border border-slate-200 p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-slate-900",children:u.name}),a.jsxs("p",{className:"text-xs text-slate-500",children:[u.format.split("/").pop()??u.format," • ",w_(u.bytes)]})]}),a.jsxs("button",{type:"button",className:`ui-btn-secondary flex items-center gap-2 text-xs ${c===u.id?"border-emerald-200 bg-emerald-50 text-emerald-700":""}`,onClick:()=>o(u),children:[a.jsx(Ry,{className:"h-4 w-4","aria-hidden":"true"}),c===u.id?"Copié !":"Copier l’URL"]})]}),a.jsx("p",{className:"mt-3 break-all text-xs text-slate-500",children:u.url})]},u.id))})]}),M_=()=>{var be;const{content:n,loading:i,error:o,updateContent:c}=Ei(),[u,f]=h.useState(()=>n?Jr(n):null),[g,x]=h.useState(null),[p,y]=h.useState(null),[v,N]=h.useState("custom"),[j,S]=h.useState(!1),[w,T]=h.useState(null),[C,I]=h.useState(null),[L,Q]=h.useState([]),[D,H]=h.useState(!1),[se,W]=h.useState(null),[X,re]=h.useState(null),[G,Z]=h.useState(!1);h.useEffect(()=>{n&&f(Jr(n))},[n]),h.useEffect(()=>{let te=!0;return(async()=>{H(!0),W(null);try{const xe=await ye.getBestSellerProducts();te&&Q(xe)}catch(xe){te&&W(xe instanceof Error?xe.message:"Impossible de charger les produits mis en avant.")}finally{te&&H(!1)}})(),()=>{te=!1}},[]),h.useEffect(()=>{if(!C)return;const te=setTimeout(()=>I(null),4e3);return()=>clearTimeout(te)},[C]);const A=h.useCallback(te=>{f(ie=>{if(!ie)return ie;const xe=Jr(ie);return te(xe)})},[]),K=h.useCallback(te=>{f(ie=>{if(!ie)return ie;const xe=Jr(ie);return y_(xe,te),xe})},[]),q=h.useMemo(()=>{const te=new Map;return S_.forEach(ie=>{ie.groups.forEach(xe=>{xe.fields.forEach(we=>{te.set(we.element,{section:ie,group:xe,field:we})})})}),te},[]),le=h.useCallback(()=>{},[]),_=h.useCallback(te=>{x(te);try{const ie=Ya(te);y(ie)}catch(ie){console.error(ie)}},[]),E=h.useCallback((te,ie)=>{if(_(te),y(ie.zone),!q.has(te)){console.warn(`Aucun formulaire de personnalisation trouvé pour l'élément "${te}".`);return}re(te)},[q,_,y]),z=async()=>{S(!0),T(null),I(null);try{if(!u)throw new Error("Le brouillon est indisponible.");const te=await c(u);f(te),I("Modifications enregistrées avec succès.")}catch(te){T(te instanceof Error?te.message:"Une erreur est survenue lors de la sauvegarde.")}finally{S(!1)}},P=h.useMemo(()=>{const te=Array.from(d_);if(!u)return te;const ie=u.assets.library.filter(xe=>xe.type==="font").map(xe=>eu(xe.name));return Array.from(new Set([...te,...ie]))},[u]),F=h.useMemo(()=>X?q.get(X)??null:null,[X,q]),R=h.useMemo(()=>{var ie;if(!X)return"";const te=((ie=q.get(X))==null?void 0:ie.field.label)??X;return h_[X]??te},[X,q]),B=h.useCallback(()=>{re(null),x(null),y(null)},[x,y,re]);h.useEffect(()=>{v!=="custom"&&B()},[v,B]),h.useEffect(()=>{if(!X)return;if(!F){B();return}if(typeof window>"u")return;const te=window.setTimeout(()=>{const ie=document.querySelector('[data-element-editor-modal="true"]'),xe=ie==null?void 0:ie.querySelector('input, textarea, [contenteditable="true"], select');xe==null||xe.focus({preventScroll:!0})},80);return()=>{window.clearTimeout(te)}},[F,B,X]);const M=h.useCallback(te=>{if(!u)return null;const ie={key:te.id,element:te.element,label:te.label,description:te.description,isActive:g===te.element,register:le,onFocus:_};return te.type==="text"?a.jsx(Td,{...ie,children:a.jsx(C_,{element:te.element,draft:u,onApply:A,fontOptions:P,onAssetAdded:K,multiline:te.multiline,allowRichText:te.allowRichText,showStyleOptions:te.showStyleOptions,placeholder:te.placeholder})}):te.type==="image"?a.jsx(Td,{...ie,children:a.jsx(k_,{element:te.element,draft:u,onApply:A,onAssetAdded:K,placeholder:te.placeholder})}):a.jsx(Td,{...ie,children:a.jsx(T_,{element:te.element,draft:u,onApply:A,onAssetAdded:K})})},[g,K,A,u,_,P,le]),ce=h.useCallback(async te=>{const ie=await yl(te,{tags:[Mi(te)]}),xe=uo(te,ie);K(xe)},[K]);if(i)return a.jsxs("div",{className:"flex h-full min-h-[60vh] flex-col items-center justify-center gap-3",children:[a.jsx(vl,{className:"h-10 w-10 animate-spin text-brand-primary","aria-hidden":"true"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Chargement du contenu du site…"})]});if(!n||!u)return a.jsxs("div",{className:"flex h-full min-h-[60vh] flex-col items-center justify-center gap-3",children:[a.jsx(Oa,{className:"h-6 w-6 text-amber-500","aria-hidden":"true"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Le contenu du site est en cours d'initialisation…"})]});const de=((be=u.assets)==null?void 0:be.library)??[];return a.jsxs("div",{className:"space-y-8 px-4 sm:px-6 lg:px-0",children:[a.jsxs("header",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Site public"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Ajustez le contenu, les couleurs et les médias de votre page d’accueil en temps réel."})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[C&&a.jsxs("div",{className:"flex items-center gap-2 rounded-full bg-emerald-50 px-4 py-2 text-sm text-emerald-700",children:[a.jsx(Sy,{className:"h-4 w-4","aria-hidden":"true"}),C]}),w&&a.jsxs("div",{className:"flex items-center gap-2 rounded-full bg-amber-50 px-4 py-2 text-sm text-amber-700",children:[a.jsx(Oa,{className:"h-4 w-4","aria-hidden":"true"}),w]}),a.jsx("button",{type:"button",onClick:()=>Z(!0),className:"ui-btn-secondary",children:"Bibliothèque de médias"}),a.jsx("button",{type:"button",onClick:z,className:"ui-btn-primary",disabled:j,children:j?"Enregistrement…":"Enregistrer les modifications"})]})]}),o&&a.jsxs("div",{className:"flex items-start gap-3 rounded-3xl border border-amber-200 bg-amber-50 p-4 text-sm text-amber-700",children:[a.jsx(Oa,{className:"h-5 w-5","aria-hidden":"true"}),a.jsxs("div",{children:[a.jsx("p",{children:o}),a.jsx("p",{className:"mt-1",children:"Les valeurs affichées correspondent à la configuration par défaut."})]})]}),a.jsx("nav",{className:"flex w-full items-center gap-2 overflow-x-auto rounded-full bg-slate-100 p-1",children:g_.map(te=>a.jsx("button",{type:"button",onClick:()=>N(te.id),className:`flex-1 rounded-full px-4 py-2 text-sm font-medium transition ${v===te.id?"bg-white text-slate-900 shadow":"text-slate-500 hover:text-slate-700"}`,children:te.label},te.id))}),a.jsx("div",{children:v==="preview"?a.jsx("div",{className:"mx-auto w-full max-w-6xl",children:a.jsx("div",{className:"rounded-[2.5rem] border border-slate-200 bg-slate-50 p-6",children:a.jsx(wh,{content:u,bestSellerProducts:L,onEdit:()=>{},activeZone:null,showEditButtons:!1})})}):a.jsxs("div",{className:"space-y-6",children:[se&&a.jsxs("div",{className:"flex items-start gap-3 rounded-2xl border border-amber-200 bg-amber-50 p-4 text-sm text-amber-700",children:[a.jsx(Oa,{className:"h-5 w-5","aria-hidden":"true"}),a.jsx("p",{children:se})]}),a.jsx("div",{className:"mx-auto w-full max-w-7xl",children:a.jsx("div",{className:"rounded-[2.75rem] border border-slate-200 bg-slate-50 p-4 shadow-inner sm:p-6 lg:p-8",children:a.jsx(wh,{content:u,bestSellerProducts:L,onEdit:(te,ie)=>E(te,ie),activeZone:p})})}),D&&a.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-slate-500",children:[a.jsx(vl,{className:"h-4 w-4 animate-spin","aria-hidden":"true"}),"Chargement des produits populaires…"]})]})}),a.jsx(zt,{isOpen:!!(X&&F),onClose:B,title:R?`Personnaliser ${R}`:"Personnalisation",size:"lg",children:F?a.jsxs("div",{className:"space-y-5","data-element-editor-modal":"true",children:[a.jsxs("div",{className:"rounded-2xl bg-slate-100/70 p-4 text-sm text-slate-600",children:[a.jsx("p",{className:"text-sm font-semibold text-slate-900",children:F.section.title}),a.jsx("p",{className:"text-xs text-slate-500",children:F.group.title}),F.group.description&&a.jsx("p",{className:"mt-2 text-xs text-slate-500",children:F.group.description})]}),M(F.field)]}):a.jsx("p",{className:"text-sm text-slate-500",children:"Sélectionnez un élément à personnaliser."})}),a.jsx(zt,{isOpen:G,onClose:()=>Z(!1),title:"Bibliothèque de médias",size:"xl",children:a.jsx(E_,{assets:de,onUpload:ce})})]})},Jg=({onLogout:n})=>{const i=Xs(),o=Ca.useCallback(()=>{n&&n(),i("/login",{replace:!0})},[i,n]);return a.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-6 px-4 text-center",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h1",{className:"text-3xl font-semibold text-gray-900",children:"Accès non autorisé"}),a.jsx("p",{className:"text-base text-gray-600",children:"Votre rôle ne dispose actuellement d'aucune page accessible. Veuillez contacter un administrateur ou revenir à l'écran de connexion."})]}),a.jsx("button",{type:"button",onClick:o,className:"rounded-md bg-brand-primary px-6 py-3 text-white transition hover:bg-brand-primary/90 focus:outline-none focus:ring-2 focus:ring-brand-primary focus:ring-offset-2",children:"Retour à la connexion"})]})},A_=[{path:"/dashboard",permissionKey:"/dashboard",Component:G2},{path:"/para-llevar",permissionKey:"/para-llevar",Component:uj},{path:"/ventes",permissionKey:"/ventes",Component:K2},{path:"/commande/:tableId",permissionKey:"/ventes",Component:lj},{path:"/cocina",permissionKey:"/cocina",Component:dj},{path:"/resume-ventes",permissionKey:"/resume-ventes",Component:o_},{path:"/ingredients",permissionKey:"/ingredients",Component:mj},{path:"/produits",permissionKey:"/produits",Component:gj},{path:"/promotions",permissionKey:"/promotions",Component:Zj},{path:gs,permissionKey:gs,Component:M_}],Wg=()=>a.jsx("div",{className:"flex items-center justify-center h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-brand-primary"})}),ex=({children:n,permissionKey:i})=>{var x;const{role:o,loading:c,logout:u}=Fa();if(c)return a.jsx(Wg,{});if(!o)return a.jsx(no,{to:"/",replace:!0});const f=i?(x=o.permissions)==null?void 0:x[i]:void 0;if(!(i?ro(f):!0)){const p=Wd(o);return p?a.jsx(no,{to:p,replace:!0}):a.jsx(Jg,{onLogout:u})}return n},z_=()=>{const{role:n,loading:i,logout:o}=Fa(),[,c]=h.useState(()=>{const f=lo();return f?f.orderId:null});if(Ei(),h.useEffect(()=>{const f=()=>{const g=lo();c(g?g.orderId:null)};return window.addEventListener("storage",f),()=>window.removeEventListener("storage",f)},[]),i)return a.jsx(Wg,{});if(!n)return a.jsx(O2,{});const u=Wd(n);return u?a.jsx(no,{to:u,replace:!0}):a.jsx(Jg,{onLogout:o})},O_=()=>a.jsx(ex,{children:a.jsx(y2,{})}),D_=()=>a.jsxs(vb,{children:[a.jsx(ml,{path:"/",element:a.jsx(z_,{})}),a.jsx(ml,{path:"/login",element:a.jsx(no,{to:"/",replace:!0})}),a.jsx(ml,{path:"/commande-client",element:a.jsx(n_,{})}),a.jsx(ml,{element:a.jsx(O_,{}),children:A_.map(({path:n,permissionKey:i,Component:o})=>a.jsx(ml,{path:n,element:a.jsx(ex,{permissionKey:i,children:a.jsx(o,{})})},n))}),a.jsx(ml,{path:"*",element:a.jsx(l_,{})})]}),R_=()=>a.jsx(f2,{children:a.jsx(yb,{children:a.jsx(D_,{})})}),tx=document.getElementById("root");if(!tx)throw new Error("Could not find root element to mount to");const U_=Ub.createRoot(tx);U_.render(a.jsx(Ca.StrictMode,{children:a.jsx(R_,{})}));
