import{a as gb,d as xb,g as bb,r as h,u as Vs,N as Pp,O as yb,e as _a,f as vb,L as jb,B as _b,h as Nb,i as ul,j as ao}from"./react-vendor-Dx0eSN0M.js";import{c as wb}from"./supabase-vendor-CH4nZy4O.js";import{R as Jp,B as Sb,C as Cb,X as kb,Y as Eb,T as Wp,L as eh,a as th,P as Tb,b as Mb,c as Ab}from"./chart-vendor-CVAiwELr.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))c(u);new MutationObserver(u=>{for(const f of u)if(f.type==="childList")for(const g of f.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&c(g)}).observe(document,{childList:!0,subtree:!0});function o(u){const f={};return u.integrity&&(f.integrity=u.integrity),u.referrerPolicy&&(f.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?f.credentials="include":u.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function c(u){if(u.ep)return;u.ep=!0;const f=o(u);fetch(u.href,f)}})();var bd={exports:{}},ui={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ah;function zb(){if(ah)return ui;ah=1;var n=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function o(c,u,f){var g=null;if(f!==void 0&&(g=""+f),u.key!==void 0&&(g=""+u.key),"key"in u){f={};for(var x in u)x!=="key"&&(f[x]=u[x])}else f=u;return u=f.ref,{$$typeof:n,type:c,key:g,ref:u!==void 0?u:null,props:f}}return ui.Fragment=i,ui.jsx=o,ui.jsxs=o,ui}var sh;function Ob(){return sh||(sh=1,bd.exports=zb()),bd.exports}var a=Ob(),yd={exports:{}},mi={},vd={exports:{}},jd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nh;function Db(){return nh||(nh=1,(function(n){function i(_,E){var z=_.length;_.push(E);e:for(;0<z;){var Z=z-1>>>1,$=_[Z];if(0<u($,E))_[Z]=E,_[z]=$,z=Z;else break e}}function o(_){return _.length===0?null:_[0]}function c(_){if(_.length===0)return null;var E=_[0],z=_.pop();if(z!==E){_[0]=z;e:for(var Z=0,$=_.length,R=$>>>1;Z<R;){var I=2*(Z+1)-1,M=_[I],re=I+1,ue=_[re];if(0>u(M,z))re<$&&0>u(ue,M)?(_[Z]=ue,_[re]=z,Z=re):(_[Z]=M,_[I]=z,Z=I);else if(re<$&&0>u(ue,z))_[Z]=ue,_[re]=z,Z=re;else break e}}return E}function u(_,E){var z=_.sortIndex-E.sortIndex;return z!==0?z:_.id-E.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;n.unstable_now=function(){return f.now()}}else{var g=Date,x=g.now();n.unstable_now=function(){return g.now()-x}}var p=[],y=[],v=1,N=null,j=3,S=!1,w=!1,D=!1,C=!1,L=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function A(_){for(var E=o(y);E!==null;){if(E.callback===null)c(y);else if(E.startTime<=_)c(y),E.sortIndex=E.expirationTime,i(p,E);else break;E=o(y)}}function F(_){if(D=!1,A(_),!w)if(o(p)!==null)w=!0,te||(te=!0,T());else{var E=o(y);E!==null&&le(F,E.startTime-_)}}var te=!1,J=-1,Q=5,oe=-1;function H(){return C?!0:!(n.unstable_now()-oe<Q)}function W(){if(C=!1,te){var _=n.unstable_now();oe=_;var E=!0;try{e:{w=!1,D&&(D=!1,q(J),J=-1),S=!0;var z=j;try{t:{for(A(_),N=o(p);N!==null&&!(N.expirationTime>_&&H());){var Z=N.callback;if(typeof Z=="function"){N.callback=null,j=N.priorityLevel;var $=Z(N.expirationTime<=_);if(_=n.unstable_now(),typeof $=="function"){N.callback=$,A(_),E=!0;break t}N===o(p)&&c(p),A(_)}else c(p);N=o(p)}if(N!==null)E=!0;else{var R=o(y);R!==null&&le(F,R.startTime-_),E=!1}}break e}finally{N=null,j=z,S=!1}E=void 0}}finally{E?T():te=!1}}}var T;if(typeof X=="function")T=function(){X(W)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,B=K.port2;K.port1.onmessage=W,T=function(){B.postMessage(null)}}else T=function(){L(W,0)};function le(_,E){J=L(function(){_(n.unstable_now())},E)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(_){_.callback=null},n.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<_?Math.floor(1e3/_):5},n.unstable_getCurrentPriorityLevel=function(){return j},n.unstable_next=function(_){switch(j){case 1:case 2:case 3:var E=3;break;default:E=j}var z=j;j=E;try{return _()}finally{j=z}},n.unstable_requestPaint=function(){C=!0},n.unstable_runWithPriority=function(_,E){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var z=j;j=_;try{return E()}finally{j=z}},n.unstable_scheduleCallback=function(_,E,z){var Z=n.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?Z+z:Z):z=Z,_){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=z+$,_={id:v++,callback:E,priorityLevel:_,startTime:z,expirationTime:$,sortIndex:-1},z>Z?(_.sortIndex=z,i(y,_),o(p)===null&&_===o(y)&&(D?(q(J),J=-1):D=!0,le(F,z-Z))):(_.sortIndex=$,i(p,_),w||S||(w=!0,te||(te=!0,T()))),_},n.unstable_shouldYield=H,n.unstable_wrapCallback=function(_){var E=j;return function(){var z=j;j=E;try{return _.apply(this,arguments)}finally{j=z}}}})(jd)),jd}var lh;function Rb(){return lh||(lh=1,vd.exports=Db()),vd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ih;function Ub(){if(ih)return mi;ih=1;var n=Rb(),i=gb(),o=xb();function c(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function g(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function x(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(f(e)!==e)throw Error(c(188))}function y(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(c(188));return t!==e?null:e}for(var s=e,l=t;;){var r=s.return;if(r===null)break;var d=r.alternate;if(d===null){if(l=r.return,l!==null){s=l;continue}break}if(r.child===d.child){for(d=r.child;d;){if(d===s)return p(r),e;if(d===l)return p(r),t;d=d.sibling}throw Error(c(188))}if(s.return!==l.return)s=r,l=d;else{for(var m=!1,b=r.child;b;){if(b===s){m=!0,s=r,l=d;break}if(b===l){m=!0,l=r,s=d;break}b=b.sibling}if(!m){for(b=d.child;b;){if(b===s){m=!0,s=d,l=r;break}if(b===l){m=!0,l=d,s=r;break}b=b.sibling}if(!m)throw Error(c(189))}}if(s.alternate!==l)throw Error(c(190))}if(s.tag!==3)throw Error(c(188));return s.stateNode.current===s?e:t}function v(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=v(e),t!==null)return t;e=e.sibling}return null}var N=Object.assign,j=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),q=Symbol.for("react.consumer"),X=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),oe=Symbol.for("react.activity"),H=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function T(e){return e===null||typeof e!="object"?null:(e=W&&e[W]||e["@@iterator"],typeof e=="function"?e:null)}var K=Symbol.for("react.client.reference");function B(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===K?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case D:return"Fragment";case L:return"Profiler";case C:return"StrictMode";case F:return"Suspense";case te:return"SuspenseList";case oe:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case w:return"Portal";case X:return e.displayName||"Context";case q:return(e._context.displayName||"Context")+".Consumer";case A:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case J:return t=e.displayName||null,t!==null?t:B(e.type)||"Memo";case Q:t=e._payload,e=e._init;try{return B(e(t))}catch{}}return null}var le=Array.isArray,_=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,E=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z={pending:!1,data:null,method:null,action:null},Z=[],$=-1;function R(e){return{current:e}}function I(e){0>$||(e.current=Z[$],Z[$]=null,$--)}function M(e,t){$++,Z[$]=e.current,e.current=t}var re=R(null),ue=R(null),ge=R(null),ae=R(null);function ce(e,t){switch(M(ge,t),M(ue,e),M(re,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?vp(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=vp(t),e=jp(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}I(re),M(re,e)}function _e(){I(re),I(ue),I(ge)}function xe(e){e.memoizedState!==null&&M(ae,e);var t=re.current,s=jp(t,e.type);t!==s&&(M(ue,e),M(re,s))}function Ae(e){ue.current===e&&(I(re),I(ue)),ae.current===e&&(I(ae),ri._currentValue=z)}var Ke,Mt;function Vt(e){if(Ke===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);Ke=t&&t[1]||"",Mt=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ke+e+Mt}var qt=!1;function be(e,t){if(!e||qt)return"";qt=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(P){var V=P}Reflect.construct(e,[],ne)}else{try{ne.call()}catch(P){V=P}e.call(ne.prototype)}}else{try{throw Error()}catch(P){V=P}(ne=e())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(P){if(P&&V&&typeof P.stack=="string")return[P.stack,V.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),m=d[0],b=d[1];if(m&&b){var k=m.split(`
`),Y=b.split(`
`);for(r=l=0;l<k.length&&!k[l].includes("DetermineComponentFrameRoot");)l++;for(;r<Y.length&&!Y[r].includes("DetermineComponentFrameRoot");)r++;if(l===k.length||r===Y.length)for(l=k.length-1,r=Y.length-1;1<=l&&0<=r&&k[l]!==Y[r];)r--;for(;1<=l&&0<=r;l--,r--)if(k[l]!==Y[r]){if(l!==1||r!==1)do if(l--,r--,0>r||k[l]!==Y[r]){var ee=`
`+k[l].replace(" at new "," at ");return e.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",e.displayName)),ee}while(1<=l&&0<=r);break}}}finally{qt=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?Vt(s):""}function Te(e,t){switch(e.tag){case 26:case 27:case 5:return Vt(e.type);case 16:return Vt("Lazy");case 13:return e.child!==t&&t!==null?Vt("Suspense Fallback"):Vt("Suspense");case 19:return Vt("SuspenseList");case 0:case 15:return be(e.type,!1);case 11:return be(e.type.render,!1);case 1:return be(e.type,!0);case 31:return Vt("Activity");default:return""}}function ve(e){try{var t="",s=null;do t+=Te(e,s),s=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var ht=Object.prototype.hasOwnProperty,st=n.unstable_scheduleCallback,rt=n.unstable_cancelCallback,At=n.unstable_shouldYield,gt=n.unstable_requestPaint,dt=n.unstable_now,Na=n.unstable_getCurrentPriorityLevel,ut=n.unstable_ImmediatePriority,sa=n.unstable_UserBlockingPriority,wa=n.unstable_NormalPriority,de=n.unstable_LowPriority,pe=n.unstable_IdlePriority,ke=n.log,qe=n.unstable_setDisableYieldValue,Be=null,Fe=null;function Me(e){if(typeof ke=="function"&&qe(e),Fe&&typeof Fe.setStrictMode=="function")try{Fe.setStrictMode(Be,e)}catch{}}var $e=Math.clz32?Math.clz32:zt,bt=Math.log,ot=Math.LN2;function zt(e){return e>>>=0,e===0?32:31-(bt(e)/ot|0)|0}var Ga=256,Oa=262144,Qt=4194304;function ie(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function we(e,t,s){var l=e.pendingLanes;if(l===0)return 0;var r=0,d=e.suspendedLanes,m=e.pingedLanes;e=e.warmLanes;var b=l&134217727;return b!==0?(l=b&~d,l!==0?r=ie(l):(m&=b,m!==0?r=ie(m):s||(s=b&~e,s!==0&&(r=ie(s))))):(b=l&~d,b!==0?r=ie(b):m!==0?r=ie(m):s||(s=l&~e,s!==0&&(r=ie(s)))),r===0?0:t!==0&&t!==r&&(t&d)===0&&(d=r&-r,s=t&-t,d>=s||d===32&&(s&4194048)!==0)?t:r}function Oe(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Ze(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pe(){var e=Qt;return Qt<<=1,(Qt&62914560)===0&&(Qt=4194304),e}function Dt(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function Yt(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Sn(e,t,s,l,r,d){var m=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var b=e.entanglements,k=e.expirationTimes,Y=e.hiddenUpdates;for(s=m&~s;0<s;){var ee=31-$e(s),ne=1<<ee;b[ee]=0,k[ee]=-1;var V=Y[ee];if(V!==null)for(Y[ee]=null,ee=0;ee<V.length;ee++){var P=V[ee];P!==null&&(P.lane&=-536870913)}s&=~ne}l!==0&&Se(e,l,0),d!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=d&~(m&~t))}function Se(e,t,s){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-$e(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|s&261930}function Ge(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var l=31-$e(s),r=1<<l;r&t|e[l]&t&&(e[l]|=t),s&=~r}}function mt(e,t){var s=t&-t;return s=(s&42)!==0?1:Bt(s),(s&(e.suspendedLanes|t))!==0?0:s}function Bt(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Cn(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function nu(){var e=E.p;return e!==0?e:(e=window.event,e===void 0?32:Gp(e.type))}function lu(e,t){var s=E.p;try{return E.p=e,t()}finally{E.p=s}}var hs=Math.random().toString(36).slice(2),It="__reactFiber$"+hs,Kt="__reactProps$"+hs,kn="__reactContainer$"+hs,oo="__reactEvents$"+hs,lx="__reactListeners$"+hs,ix="__reactHandles$"+hs,iu="__reactResources$"+hs,_l="__reactMarker$"+hs;function co(e){delete e[It],delete e[Kt],delete e[oo],delete e[lx],delete e[ix]}function En(e){var t=e[It];if(t)return t;for(var s=e.parentNode;s;){if(t=s[kn]||s[It]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Ep(e);e!==null;){if(s=e[It])return s;e=Ep(e)}return t}e=s,s=e.parentNode}return null}function Tn(e){if(e=e[It]||e[kn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Nl(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(c(33))}function Mn(e){var t=e[iu];return t||(t=e[iu]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Rt(e){e[_l]=!0}var ru=new Set,ou={};function Qs(e,t){An(e,t),An(e+"Capture",t)}function An(e,t){for(ou[e]=t,e=0;e<t.length;e++)ru.add(t[e])}var rx=RegExp("^[:A-Z_a-z\À-\Ö\Ø-\ö\ø-\˿\Ͱ-\ͽ\Ϳ-\῿\‌-\‍\⁰-\↏\Ⰰ-\⿯\、-\퟿\豈-\﷏\ﷰ-\�][:A-Z_a-z\À-\Ö\Ø-\ö\ø-\˿\Ͱ-\ͽ\Ϳ-\῿\‌-\‍\⁰-\↏\Ⰰ-\⿯\、-\퟿\豈-\﷏\ﷰ-\�\\-.0-9\·\̀-\ͯ\‿-\⁀]*$"),cu={},du={};function ox(e){return ht.call(du,e)?!0:ht.call(cu,e)?!1:rx.test(e)?du[e]=!0:(cu[e]=!0,!1)}function Ei(e,t,s){if(ox(t))if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+s)}}function Ti(e,t,s){if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+s)}}function Ya(e,t,s,l){if(l===null)e.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(t,s,""+l)}}function ua(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function uu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function cx(e,t,s){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var r=l.get,d=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(m){s=""+m,d.call(this,m)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return s},setValue:function(m){s=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function uo(e){if(!e._valueTracker){var t=uu(e)?"checked":"value";e._valueTracker=cx(e,t,""+e[t])}}function mu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),l="";return e&&(l=uu(e)?e.checked?"true":"false":e.value),e=l,e!==s?(t.setValue(e),!0):!1}function Mi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var dx=/[\n"\\]/g;function ma(e){return e.replace(dx,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function mo(e,t,s,l,r,d,m,b){e.name="",m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.type=m:e.removeAttribute("type"),t!=null?m==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+ua(t)):e.value!==""+ua(t)&&(e.value=""+ua(t)):m!=="submit"&&m!=="reset"||e.removeAttribute("value"),t!=null?fo(e,m,ua(t)):s!=null?fo(e,m,ua(s)):l!=null&&e.removeAttribute("value"),r==null&&d!=null&&(e.defaultChecked=!!d),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.name=""+ua(b):e.removeAttribute("name")}function fu(e,t,s,l,r,d,m,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),t!=null||s!=null){if(!(d!=="submit"&&d!=="reset"||t!=null)){uo(e);return}s=s!=null?""+ua(s):"",t=t!=null?""+ua(t):s,b||t===e.value||(e.value=t),e.defaultValue=t}l=l??r,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=b?e.checked:!!l,e.defaultChecked=!!l,m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.name=m),uo(e)}function fo(e,t,s){t==="number"&&Mi(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function zn(e,t,s,l){if(e=e.options,t){t={};for(var r=0;r<s.length;r++)t["$"+s[r]]=!0;for(s=0;s<e.length;s++)r=t.hasOwnProperty("$"+e[s].value),e[s].selected!==r&&(e[s].selected=r),r&&l&&(e[s].defaultSelected=!0)}else{for(s=""+ua(s),t=null,r=0;r<e.length;r++){if(e[r].value===s){e[r].selected=!0,l&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function pu(e,t,s){if(t!=null&&(t=""+ua(t),t!==e.value&&(e.value=t),s==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=s!=null?""+ua(s):""}function hu(e,t,s,l){if(t==null){if(l!=null){if(s!=null)throw Error(c(92));if(le(l)){if(1<l.length)throw Error(c(93));l=l[0]}s=l}s==null&&(s=""),t=s}s=ua(t),e.defaultValue=s,l=e.textContent,l===s&&l!==""&&l!==null&&(e.value=l),uo(e)}function On(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var ux=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gu(e,t,s){var l=t.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,s):typeof s!="number"||s===0||ux.has(t)?t==="float"?e.cssFloat=s:e[t]=(""+s).trim():e[t]=s+"px"}function xu(e,t,s){if(t!=null&&typeof t!="object")throw Error(c(62));if(e=e.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var r in t)l=t[r],t.hasOwnProperty(r)&&s[r]!==l&&gu(e,r,l)}else for(var d in t)t.hasOwnProperty(d)&&gu(e,d,t[d])}function po(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mx=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fx=/^[ - ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ai(e){return fx.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Va(){}var ho=null;function go(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Dn=null,Rn=null;function bu(e){var t=Tn(e);if(t&&(e=t.stateNode)){var s=e[Kt]||null;e:switch(e=t.stateNode,t.type){case"input":if(mo(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+ma(""+t)+'"][type="radio"]'),t=0;t<s.length;t++){var l=s[t];if(l!==e&&l.form===e.form){var r=l[Kt]||null;if(!r)throw Error(c(90));mo(l,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<s.length;t++)l=s[t],l.form===e.form&&mu(l)}break e;case"textarea":pu(e,s.value,s.defaultValue);break e;case"select":t=s.value,t!=null&&zn(e,!!s.multiple,t,!1)}}}var xo=!1;function yu(e,t,s){if(xo)return e(t,s);xo=!0;try{var l=e(t);return l}finally{if(xo=!1,(Dn!==null||Rn!==null)&&(br(),Dn&&(t=Dn,e=Rn,Rn=Dn=null,bu(t),e)))for(t=0;t<e.length;t++)bu(e[t])}}function wl(e,t){var s=e.stateNode;if(s===null)return null;var l=s[Kt]||null;if(l===null)return null;s=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(c(231,t,typeof s));return s}var Qa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bo=!1;if(Qa)try{var Sl={};Object.defineProperty(Sl,"passive",{get:function(){bo=!0}}),window.addEventListener("test",Sl,Sl),window.removeEventListener("test",Sl,Sl)}catch{bo=!1}var gs=null,yo=null,zi=null;function vu(){if(zi)return zi;var e,t=yo,s=t.length,l,r="value"in gs?gs.value:gs.textContent,d=r.length;for(e=0;e<s&&t[e]===r[e];e++);var m=s-e;for(l=1;l<=m&&t[s-l]===r[d-l];l++);return zi=r.slice(e,1<l?1-l:void 0)}function Oi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Di(){return!0}function ju(){return!1}function Zt(e){function t(s,l,r,d,m){this._reactName=s,this._targetInst=r,this.type=l,this.nativeEvent=d,this.target=m,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(s=e[b],this[b]=s?s(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Di:ju,this.isPropagationStopped=ju,this}return N(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Di)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Di)},persist:function(){},isPersistent:Di}),t}var Xs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ri=Zt(Xs),Cl=N({},Xs,{view:0,detail:0}),px=Zt(Cl),vo,jo,kl,Ui=N({},Cl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:No,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==kl&&(kl&&e.type==="mousemove"?(vo=e.screenX-kl.screenX,jo=e.screenY-kl.screenY):jo=vo=0,kl=e),vo)},movementY:function(e){return"movementY"in e?e.movementY:jo}}),_u=Zt(Ui),hx=N({},Ui,{dataTransfer:0}),gx=Zt(hx),xx=N({},Cl,{relatedTarget:0}),_o=Zt(xx),bx=N({},Xs,{animationName:0,elapsedTime:0,pseudoElement:0}),yx=Zt(bx),vx=N({},Xs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),jx=Zt(vx),_x=N({},Xs,{data:0}),Nu=Zt(_x),Nx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Sx[e])?!!t[e]:!1}function No(){return Cx}var kx=N({},Cl,{key:function(e){if(e.key){var t=Nx[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Oi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?wx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:No,charCode:function(e){return e.type==="keypress"?Oi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Oi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ex=Zt(kx),Tx=N({},Ui,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wu=Zt(Tx),Mx=N({},Cl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:No}),Ax=Zt(Mx),zx=N({},Xs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ox=Zt(zx),Dx=N({},Ui,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rx=Zt(Dx),Ux=N({},Xs,{newState:0,oldState:0}),Lx=Zt(Ux),qx=[9,13,27,32],wo=Qa&&"CompositionEvent"in window,El=null;Qa&&"documentMode"in document&&(El=document.documentMode);var Bx=Qa&&"TextEvent"in window&&!El,Su=Qa&&(!wo||El&&8<El&&11>=El),Cu=" ",ku=!1;function Eu(e,t){switch(e){case"keyup":return qx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Un=!1;function Ix(e,t){switch(e){case"compositionend":return Tu(t);case"keypress":return t.which!==32?null:(ku=!0,Cu);case"textInput":return e=t.data,e===Cu&&ku?null:e;default:return null}}function Hx(e,t){if(Un)return e==="compositionend"||!wo&&Eu(e,t)?(e=vu(),zi=yo=gs=null,Un=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Su&&t.locale!=="ko"?null:t.data;default:return null}}var Fx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Fx[e.type]:t==="textarea"}function Au(e,t,s,l){Dn?Rn?Rn.push(l):Rn=[l]:Dn=l,t=Sr(t,"onChange"),0<t.length&&(s=new Ri("onChange","change",null,s,l),e.push({event:s,listeners:t}))}var Tl=null,Ml=null;function $x(e){pp(e,0)}function Li(e){var t=Nl(e);if(mu(t))return e}function zu(e,t){if(e==="change")return t}var Ou=!1;if(Qa){var So;if(Qa){var Co="oninput"in document;if(!Co){var Du=document.createElement("div");Du.setAttribute("oninput","return;"),Co=typeof Du.oninput=="function"}So=Co}else So=!1;Ou=So&&(!document.documentMode||9<document.documentMode)}function Ru(){Tl&&(Tl.detachEvent("onpropertychange",Uu),Ml=Tl=null)}function Uu(e){if(e.propertyName==="value"&&Li(Ml)){var t=[];Au(t,Ml,e,go(e)),yu($x,t)}}function Gx(e,t,s){e==="focusin"?(Ru(),Tl=t,Ml=s,Tl.attachEvent("onpropertychange",Uu)):e==="focusout"&&Ru()}function Yx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Li(Ml)}function Vx(e,t){if(e==="click")return Li(t)}function Qx(e,t){if(e==="input"||e==="change")return Li(t)}function Xx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var na=typeof Object.is=="function"?Object.is:Xx;function Al(e,t){if(na(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),l=Object.keys(t);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var r=s[l];if(!ht.call(t,r)||!na(e[r],t[r]))return!1}return!0}function Lu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function qu(e,t){var s=Lu(e);e=0;for(var l;s;){if(s.nodeType===3){if(l=e+s.textContent.length,e<=t&&l>=t)return{node:s,offset:t-e};e=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Lu(s)}}function Bu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Bu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Iu(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Mi(e.document);t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=Mi(e.document)}return t}function ko(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Kx=Qa&&"documentMode"in document&&11>=document.documentMode,Ln=null,Eo=null,zl=null,To=!1;function Hu(e,t,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;To||Ln==null||Ln!==Mi(l)||(l=Ln,"selectionStart"in l&&ko(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),zl&&Al(zl,l)||(zl=l,l=Sr(Eo,"onSelect"),0<l.length&&(t=new Ri("onSelect","select",null,t,s),e.push({event:t,listeners:l}),t.target=Ln)))}function Ks(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var qn={animationend:Ks("Animation","AnimationEnd"),animationiteration:Ks("Animation","AnimationIteration"),animationstart:Ks("Animation","AnimationStart"),transitionrun:Ks("Transition","TransitionRun"),transitionstart:Ks("Transition","TransitionStart"),transitioncancel:Ks("Transition","TransitionCancel"),transitionend:Ks("Transition","TransitionEnd")},Mo={},Fu={};Qa&&(Fu=document.createElement("div").style,"AnimationEvent"in window||(delete qn.animationend.animation,delete qn.animationiteration.animation,delete qn.animationstart.animation),"TransitionEvent"in window||delete qn.transitionend.transition);function Zs(e){if(Mo[e])return Mo[e];if(!qn[e])return e;var t=qn[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in Fu)return Mo[e]=t[s];return e}var $u=Zs("animationend"),Gu=Zs("animationiteration"),Yu=Zs("animationstart"),Zx=Zs("transitionrun"),Px=Zs("transitionstart"),Jx=Zs("transitioncancel"),Vu=Zs("transitionend"),Qu=new Map,Ao="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ao.push("scrollEnd");function Sa(e,t){Qu.set(e,t),Qs(t,[e])}var qi=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},fa=[],Bn=0,zo=0;function Bi(){for(var e=Bn,t=zo=Bn=0;t<e;){var s=fa[t];fa[t++]=null;var l=fa[t];fa[t++]=null;var r=fa[t];fa[t++]=null;var d=fa[t];if(fa[t++]=null,l!==null&&r!==null){var m=l.pending;m===null?r.next=r:(r.next=m.next,m.next=r),l.pending=r}d!==0&&Xu(s,r,d)}}function Ii(e,t,s,l){fa[Bn++]=e,fa[Bn++]=t,fa[Bn++]=s,fa[Bn++]=l,zo|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Oo(e,t,s,l){return Ii(e,t,s,l),Hi(e)}function Ps(e,t){return Ii(e,null,null,t),Hi(e)}function Xu(e,t,s){e.lanes|=s;var l=e.alternate;l!==null&&(l.lanes|=s);for(var r=!1,d=e.return;d!==null;)d.childLanes|=s,l=d.alternate,l!==null&&(l.childLanes|=s),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(r=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,r&&t!==null&&(r=31-$e(s),e=d.hiddenUpdates,l=e[r],l===null?e[r]=[t]:l.push(t),t.lane=s|536870912),d):null}function Hi(e){if(50<ei)throw ei=0,Fc=null,Error(c(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var In={};function Wx(e,t,s,l){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function la(e,t,s,l){return new Wx(e,t,s,l)}function Do(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Xa(e,t){var s=e.alternate;return s===null?(s=la(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function Ku(e,t){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,t=s.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Fi(e,t,s,l,r,d){var m=0;if(l=e,typeof e=="function")Do(e)&&(m=1);else if(typeof e=="string")m=nb(e,s,re.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case oe:return e=la(31,s,t,r),e.elementType=oe,e.lanes=d,e;case D:return Js(s.children,r,d,t);case C:m=8,r|=24;break;case L:return e=la(12,s,t,r|2),e.elementType=L,e.lanes=d,e;case F:return e=la(13,s,t,r),e.elementType=F,e.lanes=d,e;case te:return e=la(19,s,t,r),e.elementType=te,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case X:m=10;break e;case q:m=9;break e;case A:m=11;break e;case J:m=14;break e;case Q:m=16,l=null;break e}m=29,s=Error(c(130,e===null?"null":typeof e,"")),l=null}return t=la(m,s,t,r),t.elementType=e,t.type=l,t.lanes=d,t}function Js(e,t,s,l){return e=la(7,e,l,t),e.lanes=s,e}function Ro(e,t,s){return e=la(6,e,null,t),e.lanes=s,e}function Zu(e){var t=la(18,null,null,0);return t.stateNode=e,t}function Uo(e,t,s){return t=la(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Pu=new WeakMap;function pa(e,t){if(typeof e=="object"&&e!==null){var s=Pu.get(e);return s!==void 0?s:(t={value:e,source:t,stack:ve(t)},Pu.set(e,t),t)}return{value:e,source:t,stack:ve(t)}}var Hn=[],Fn=0,$i=null,Ol=0,ha=[],ga=0,xs=null,Da=1,Ra="";function Ka(e,t){Hn[Fn++]=Ol,Hn[Fn++]=$i,$i=e,Ol=t}function Ju(e,t,s){ha[ga++]=Da,ha[ga++]=Ra,ha[ga++]=xs,xs=e;var l=Da;e=Ra;var r=32-$e(l)-1;l&=~(1<<r),s+=1;var d=32-$e(t)+r;if(30<d){var m=r-r%5;d=(l&(1<<m)-1).toString(32),l>>=m,r-=m,Da=1<<32-$e(t)+r|s<<r|l,Ra=d+e}else Da=1<<d|s<<r|l,Ra=e}function Lo(e){e.return!==null&&(Ka(e,1),Ju(e,1,0))}function qo(e){for(;e===$i;)$i=Hn[--Fn],Hn[Fn]=null,Ol=Hn[--Fn],Hn[Fn]=null;for(;e===xs;)xs=ha[--ga],ha[ga]=null,Ra=ha[--ga],ha[ga]=null,Da=ha[--ga],ha[ga]=null}function Wu(e,t){ha[ga++]=Da,ha[ga++]=Ra,ha[ga++]=xs,Da=t.id,Ra=t.overflow,xs=e}var Ht=null,ft=null,Qe=!1,bs=null,xa=!1,Bo=Error(c(519));function ys(e){var t=Error(c(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Dl(pa(t,e)),Bo}function em(e){var t=e.stateNode,s=e.type,l=e.memoizedProps;switch(t[It]=e,t[Kt]=l,s){case"dialog":He("cancel",t),He("close",t);break;case"iframe":case"object":case"embed":He("load",t);break;case"video":case"audio":for(s=0;s<ai.length;s++)He(ai[s],t);break;case"source":He("error",t);break;case"img":case"image":case"link":He("error",t),He("load",t);break;case"details":He("toggle",t);break;case"input":He("invalid",t),fu(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":He("invalid",t);break;case"textarea":He("invalid",t),hu(t,l.value,l.defaultValue,l.children)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||t.textContent===""+s||l.suppressHydrationWarning===!0||bp(t.textContent,s)?(l.popover!=null&&(He("beforetoggle",t),He("toggle",t)),l.onScroll!=null&&He("scroll",t),l.onScrollEnd!=null&&He("scrollend",t),l.onClick!=null&&(t.onclick=Va),t=!0):t=!1,t||ys(e,!0)}function tm(e){for(Ht=e.return;Ht;)switch(Ht.tag){case 5:case 31:case 13:xa=!1;return;case 27:case 3:xa=!0;return;default:Ht=Ht.return}}function $n(e){if(e!==Ht)return!1;if(!Qe)return tm(e),Qe=!0,!1;var t=e.tag,s;if((s=t!==3&&t!==27)&&((s=t===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||sd(e.type,e.memoizedProps)),s=!s),s&&ft&&ys(e),tm(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));ft=kp(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));ft=kp(e)}else t===27?(t=ft,Os(e.type)?(e=od,od=null,ft=e):ft=t):ft=Ht?ya(e.stateNode.nextSibling):null;return!0}function Ws(){ft=Ht=null,Qe=!1}function Io(){var e=bs;return e!==null&&(ea===null?ea=e:ea.push.apply(ea,e),bs=null),e}function Dl(e){bs===null?bs=[e]:bs.push(e)}var Ho=R(null),en=null,Za=null;function vs(e,t,s){M(Ho,t._currentValue),t._currentValue=s}function Pa(e){e._currentValue=Ho.current,I(Ho)}function Fo(e,t,s){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===s)break;e=e.return}}function $o(e,t,s,l){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var d=r.dependencies;if(d!==null){var m=r.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=r;for(var k=0;k<t.length;k++)if(b.context===t[k]){d.lanes|=s,b=d.alternate,b!==null&&(b.lanes|=s),Fo(d.return,s,e),l||(m=null);break e}d=b.next}}else if(r.tag===18){if(m=r.return,m===null)throw Error(c(341));m.lanes|=s,d=m.alternate,d!==null&&(d.lanes|=s),Fo(m,s,e),m=null}else m=r.child;if(m!==null)m.return=r;else for(m=r;m!==null;){if(m===e){m=null;break}if(r=m.sibling,r!==null){r.return=m.return,m=r;break}m=m.return}r=m}}function Gn(e,t,s,l){e=null;for(var r=t,d=!1;r!==null;){if(!d){if((r.flags&524288)!==0)d=!0;else if((r.flags&262144)!==0)break}if(r.tag===10){var m=r.alternate;if(m===null)throw Error(c(387));if(m=m.memoizedProps,m!==null){var b=r.type;na(r.pendingProps.value,m.value)||(e!==null?e.push(b):e=[b])}}else if(r===ae.current){if(m=r.alternate,m===null)throw Error(c(387));m.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(ri):e=[ri])}r=r.return}e!==null&&$o(t,e,s,l),t.flags|=262144}function Gi(e){for(e=e.firstContext;e!==null;){if(!na(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function tn(e){en=e,Za=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ft(e){return am(en,e)}function Yi(e,t){return en===null&&tn(e),am(e,t)}function am(e,t){var s=t._currentValue;if(t={context:t,memoizedValue:s,next:null},Za===null){if(e===null)throw Error(c(308));Za=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Za=Za.next=t;return s}var e0=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(s,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(s){return s()})}},t0=n.unstable_scheduleCallback,a0=n.unstable_NormalPriority,wt={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Go(){return{controller:new e0,data:new Map,refCount:0}}function Rl(e){e.refCount--,e.refCount===0&&t0(a0,function(){e.controller.abort()})}var Ul=null,Yo=0,Yn=0,Vn=null;function s0(e,t){if(Ul===null){var s=Ul=[];Yo=0,Yn=Xc(),Vn={status:"pending",value:void 0,then:function(l){s.push(l)}}}return Yo++,t.then(sm,sm),t}function sm(){if(--Yo===0&&Ul!==null){Vn!==null&&(Vn.status="fulfilled");var e=Ul;Ul=null,Yn=0,Vn=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function n0(e,t){var s=[],l={status:"pending",value:null,reason:null,then:function(r){s.push(r)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var r=0;r<s.length;r++)(0,s[r])(t)},function(r){for(l.status="rejected",l.reason=r,r=0;r<s.length;r++)(0,s[r])(void 0)}),l}var nm=_.S;_.S=function(e,t){Ff=dt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&s0(e,t),nm!==null&&nm(e,t)};var an=R(null);function Vo(){var e=an.current;return e!==null?e:ct.pooledCache}function Vi(e,t){t===null?M(an,an.current):M(an,t.pool)}function lm(){var e=Vo();return e===null?null:{parent:wt._currentValue,pool:e}}var Qn=Error(c(460)),Qo=Error(c(474)),Qi=Error(c(542)),Xi={then:function(){}};function im(e){return e=e.status,e==="fulfilled"||e==="rejected"}function rm(e,t,s){switch(s=e[s],s===void 0?e.push(t):s!==t&&(t.then(Va,Va),t=s),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,cm(e),e;default:if(typeof t.status=="string")t.then(Va,Va);else{if(e=ct,e!==null&&100<e.shellSuspendCounter)throw Error(c(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=l}},function(l){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,cm(e),e}throw nn=t,Qn}}function sn(e){try{var t=e._init;return t(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(nn=s,Qn):s}}var nn=null;function om(){if(nn===null)throw Error(c(459));var e=nn;return nn=null,e}function cm(e){if(e===Qn||e===Qi)throw Error(c(483))}var Xn=null,Ll=0;function Ki(e){var t=Ll;return Ll+=1,Xn===null&&(Xn=[]),rm(Xn,e,t)}function ql(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Zi(e,t){throw t.$$typeof===j?Error(c(525)):(e=Object.prototype.toString.call(t),Error(c(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function dm(e){function t(U,O){if(e){var G=U.deletions;G===null?(U.deletions=[O],U.flags|=16):G.push(O)}}function s(U,O){if(!e)return null;for(;O!==null;)t(U,O),O=O.sibling;return null}function l(U){for(var O=new Map;U!==null;)U.key!==null?O.set(U.key,U):O.set(U.index,U),U=U.sibling;return O}function r(U,O){return U=Xa(U,O),U.index=0,U.sibling=null,U}function d(U,O,G){return U.index=G,e?(G=U.alternate,G!==null?(G=G.index,G<O?(U.flags|=67108866,O):G):(U.flags|=67108866,O)):(U.flags|=1048576,O)}function m(U){return e&&U.alternate===null&&(U.flags|=67108866),U}function b(U,O,G,se){return O===null||O.tag!==6?(O=Ro(G,U.mode,se),O.return=U,O):(O=r(O,G),O.return=U,O)}function k(U,O,G,se){var Ce=G.type;return Ce===D?ee(U,O,G.props.children,se,G.key):O!==null&&(O.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===Q&&sn(Ce)===O.type)?(O=r(O,G.props),ql(O,G),O.return=U,O):(O=Fi(G.type,G.key,G.props,null,U.mode,se),ql(O,G),O.return=U,O)}function Y(U,O,G,se){return O===null||O.tag!==4||O.stateNode.containerInfo!==G.containerInfo||O.stateNode.implementation!==G.implementation?(O=Uo(G,U.mode,se),O.return=U,O):(O=r(O,G.children||[]),O.return=U,O)}function ee(U,O,G,se,Ce){return O===null||O.tag!==7?(O=Js(G,U.mode,se,Ce),O.return=U,O):(O=r(O,G),O.return=U,O)}function ne(U,O,G){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=Ro(""+O,U.mode,G),O.return=U,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case S:return G=Fi(O.type,O.key,O.props,null,U.mode,G),ql(G,O),G.return=U,G;case w:return O=Uo(O,U.mode,G),O.return=U,O;case Q:return O=sn(O),ne(U,O,G)}if(le(O)||T(O))return O=Js(O,U.mode,G,null),O.return=U,O;if(typeof O.then=="function")return ne(U,Ki(O),G);if(O.$$typeof===X)return ne(U,Yi(U,O),G);Zi(U,O)}return null}function V(U,O,G,se){var Ce=O!==null?O.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Ce!==null?null:b(U,O,""+G,se);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case S:return G.key===Ce?k(U,O,G,se):null;case w:return G.key===Ce?Y(U,O,G,se):null;case Q:return G=sn(G),V(U,O,G,se)}if(le(G)||T(G))return Ce!==null?null:ee(U,O,G,se,null);if(typeof G.then=="function")return V(U,O,Ki(G),se);if(G.$$typeof===X)return V(U,O,Yi(U,G),se);Zi(U,G)}return null}function P(U,O,G,se,Ce){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return U=U.get(G)||null,b(O,U,""+se,Ce);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case S:return U=U.get(se.key===null?G:se.key)||null,k(O,U,se,Ce);case w:return U=U.get(se.key===null?G:se.key)||null,Y(O,U,se,Ce);case Q:return se=sn(se),P(U,O,G,se,Ce)}if(le(se)||T(se))return U=U.get(G)||null,ee(O,U,se,Ce,null);if(typeof se.then=="function")return P(U,O,G,Ki(se),Ce);if(se.$$typeof===X)return P(U,O,G,Yi(O,se),Ce);Zi(O,se)}return null}function je(U,O,G,se){for(var Ce=null,Je=null,Ne=O,De=O=0,Ve=null;Ne!==null&&De<G.length;De++){Ne.index>De?(Ve=Ne,Ne=null):Ve=Ne.sibling;var We=V(U,Ne,G[De],se);if(We===null){Ne===null&&(Ne=Ve);break}e&&Ne&&We.alternate===null&&t(U,Ne),O=d(We,O,De),Je===null?Ce=We:Je.sibling=We,Je=We,Ne=Ve}if(De===G.length)return s(U,Ne),Qe&&Ka(U,De),Ce;if(Ne===null){for(;De<G.length;De++)Ne=ne(U,G[De],se),Ne!==null&&(O=d(Ne,O,De),Je===null?Ce=Ne:Je.sibling=Ne,Je=Ne);return Qe&&Ka(U,De),Ce}for(Ne=l(Ne);De<G.length;De++)Ve=P(Ne,U,De,G[De],se),Ve!==null&&(e&&Ve.alternate!==null&&Ne.delete(Ve.key===null?De:Ve.key),O=d(Ve,O,De),Je===null?Ce=Ve:Je.sibling=Ve,Je=Ve);return e&&Ne.forEach(function(qs){return t(U,qs)}),Qe&&Ka(U,De),Ce}function Ee(U,O,G,se){if(G==null)throw Error(c(151));for(var Ce=null,Je=null,Ne=O,De=O=0,Ve=null,We=G.next();Ne!==null&&!We.done;De++,We=G.next()){Ne.index>De?(Ve=Ne,Ne=null):Ve=Ne.sibling;var qs=V(U,Ne,We.value,se);if(qs===null){Ne===null&&(Ne=Ve);break}e&&Ne&&qs.alternate===null&&t(U,Ne),O=d(qs,O,De),Je===null?Ce=qs:Je.sibling=qs,Je=qs,Ne=Ve}if(We.done)return s(U,Ne),Qe&&Ka(U,De),Ce;if(Ne===null){for(;!We.done;De++,We=G.next())We=ne(U,We.value,se),We!==null&&(O=d(We,O,De),Je===null?Ce=We:Je.sibling=We,Je=We);return Qe&&Ka(U,De),Ce}for(Ne=l(Ne);!We.done;De++,We=G.next())We=P(Ne,U,De,We.value,se),We!==null&&(e&&We.alternate!==null&&Ne.delete(We.key===null?De:We.key),O=d(We,O,De),Je===null?Ce=We:Je.sibling=We,Je=We);return e&&Ne.forEach(function(hb){return t(U,hb)}),Qe&&Ka(U,De),Ce}function it(U,O,G,se){if(typeof G=="object"&&G!==null&&G.type===D&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case S:e:{for(var Ce=G.key;O!==null;){if(O.key===Ce){if(Ce=G.type,Ce===D){if(O.tag===7){s(U,O.sibling),se=r(O,G.props.children),se.return=U,U=se;break e}}else if(O.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===Q&&sn(Ce)===O.type){s(U,O.sibling),se=r(O,G.props),ql(se,G),se.return=U,U=se;break e}s(U,O);break}else t(U,O);O=O.sibling}G.type===D?(se=Js(G.props.children,U.mode,se,G.key),se.return=U,U=se):(se=Fi(G.type,G.key,G.props,null,U.mode,se),ql(se,G),se.return=U,U=se)}return m(U);case w:e:{for(Ce=G.key;O!==null;){if(O.key===Ce)if(O.tag===4&&O.stateNode.containerInfo===G.containerInfo&&O.stateNode.implementation===G.implementation){s(U,O.sibling),se=r(O,G.children||[]),se.return=U,U=se;break e}else{s(U,O);break}else t(U,O);O=O.sibling}se=Uo(G,U.mode,se),se.return=U,U=se}return m(U);case Q:return G=sn(G),it(U,O,G,se)}if(le(G))return je(U,O,G,se);if(T(G)){if(Ce=T(G),typeof Ce!="function")throw Error(c(150));return G=Ce.call(G),Ee(U,O,G,se)}if(typeof G.then=="function")return it(U,O,Ki(G),se);if(G.$$typeof===X)return it(U,O,Yi(U,G),se);Zi(U,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,O!==null&&O.tag===6?(s(U,O.sibling),se=r(O,G),se.return=U,U=se):(s(U,O),se=Ro(G,U.mode,se),se.return=U,U=se),m(U)):s(U,O)}return function(U,O,G,se){try{Ll=0;var Ce=it(U,O,G,se);return Xn=null,Ce}catch(Ne){if(Ne===Qn||Ne===Qi)throw Ne;var Je=la(29,Ne,null,U.mode);return Je.lanes=se,Je.return=U,Je}finally{}}}var ln=dm(!0),um=dm(!1),js=!1;function Xo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ko(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function _s(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ns(e,t,s){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(et&2)!==0){var r=l.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),l.pending=t,t=Hi(e),Xu(e,null,s),t}return Ii(e,l,t,s),Hi(e)}function Bl(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,s|=l,t.lanes=s,Ge(e,s)}}function Zo(e,t){var s=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var r=null,d=null;if(s=s.firstBaseUpdate,s!==null){do{var m={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};d===null?r=d=m:d=d.next=m,s=s.next}while(s!==null);d===null?r=d=t:d=d.next=t}else r=d=t;s={baseState:l.baseState,firstBaseUpdate:r,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}var Po=!1;function Il(){if(Po){var e=Vn;if(e!==null)throw e}}function Hl(e,t,s,l){Po=!1;var r=e.updateQueue;js=!1;var d=r.firstBaseUpdate,m=r.lastBaseUpdate,b=r.shared.pending;if(b!==null){r.shared.pending=null;var k=b,Y=k.next;k.next=null,m===null?d=Y:m.next=Y,m=k;var ee=e.alternate;ee!==null&&(ee=ee.updateQueue,b=ee.lastBaseUpdate,b!==m&&(b===null?ee.firstBaseUpdate=Y:b.next=Y,ee.lastBaseUpdate=k))}if(d!==null){var ne=r.baseState;m=0,ee=Y=k=null,b=d;do{var V=b.lane&-536870913,P=V!==b.lane;if(P?(Ye&V)===V:(l&V)===V){V!==0&&V===Yn&&(Po=!0),ee!==null&&(ee=ee.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var je=e,Ee=b;V=t;var it=s;switch(Ee.tag){case 1:if(je=Ee.payload,typeof je=="function"){ne=je.call(it,ne,V);break e}ne=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=Ee.payload,V=typeof je=="function"?je.call(it,ne,V):je,V==null)break e;ne=N({},ne,V);break e;case 2:js=!0}}V=b.callback,V!==null&&(e.flags|=64,P&&(e.flags|=8192),P=r.callbacks,P===null?r.callbacks=[V]:P.push(V))}else P={lane:V,tag:b.tag,payload:b.payload,callback:b.callback,next:null},ee===null?(Y=ee=P,k=ne):ee=ee.next=P,m|=V;if(b=b.next,b===null){if(b=r.shared.pending,b===null)break;P=b,b=P.next,P.next=null,r.lastBaseUpdate=P,r.shared.pending=null}}while(!0);ee===null&&(k=ne),r.baseState=k,r.firstBaseUpdate=Y,r.lastBaseUpdate=ee,d===null&&(r.shared.lanes=0),Es|=m,e.lanes=m,e.memoizedState=ne}}function mm(e,t){if(typeof e!="function")throw Error(c(191,e));e.call(t)}function fm(e,t){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)mm(s[e],t)}var Kn=R(null),Pi=R(0);function pm(e,t){e=is,M(Pi,e),M(Kn,t),is=e|t.baseLanes}function Jo(){M(Pi,is),M(Kn,Kn.current)}function Wo(){is=Pi.current,I(Kn),I(Pi)}var ia=R(null),ba=null;function ws(e){var t=e.alternate;M(_t,_t.current&1),M(ia,e),ba===null&&(t===null||Kn.current!==null||t.memoizedState!==null)&&(ba=e)}function ec(e){M(_t,_t.current),M(ia,e),ba===null&&(ba=e)}function hm(e){e.tag===22?(M(_t,_t.current),M(ia,e),ba===null&&(ba=e)):Ss()}function Ss(){M(_t,_t.current),M(ia,ia.current)}function ra(e){I(ia),ba===e&&(ba=null),I(_t)}var _t=R(0);function Ji(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||id(s)||rd(s)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ja=0,ze=null,nt=null,St=null,Wi=!1,Zn=!1,rn=!1,er=0,Fl=0,Pn=null,l0=0;function vt(){throw Error(c(321))}function tc(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!na(e[s],t[s]))return!1;return!0}function ac(e,t,s,l,r,d){return Ja=d,ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_.H=e===null||e.memoizedState===null?Jm:xc,rn=!1,d=s(l,r),rn=!1,Zn&&(d=xm(t,s,l,r)),gm(e),d}function gm(e){_.H=Yl;var t=nt!==null&&nt.next!==null;if(Ja=0,St=nt=ze=null,Wi=!1,Fl=0,Pn=null,t)throw Error(c(300));e===null||Ct||(e=e.dependencies,e!==null&&Gi(e)&&(Ct=!0))}function xm(e,t,s,l){ze=e;var r=0;do{if(Zn&&(Pn=null),Fl=0,Zn=!1,25<=r)throw Error(c(301));if(r+=1,St=nt=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}_.H=Wm,d=t(s,l)}while(Zn);return d}function i0(){var e=_.H,t=e.useState()[0];return t=typeof t.then=="function"?$l(t):t,e=e.useState()[0],(nt!==null?nt.memoizedState:null)!==e&&(ze.flags|=1024),t}function sc(){var e=er!==0;return er=0,e}function nc(e,t,s){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s}function lc(e){if(Wi){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Wi=!1}Ja=0,St=nt=ze=null,Zn=!1,Fl=er=0,Pn=null}function Xt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?ze.memoizedState=St=e:St=St.next=e,St}function Nt(){if(nt===null){var e=ze.alternate;e=e!==null?e.memoizedState:null}else e=nt.next;var t=St===null?ze.memoizedState:St.next;if(t!==null)St=t,nt=e;else{if(e===null)throw ze.alternate===null?Error(c(467)):Error(c(310));nt=e,e={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},St===null?ze.memoizedState=St=e:St=St.next=e}return St}function tr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $l(e){var t=Fl;return Fl+=1,Pn===null&&(Pn=[]),e=rm(Pn,e,t),t=ze,(St===null?t.memoizedState:St.next)===null&&(t=t.alternate,_.H=t===null||t.memoizedState===null?Jm:xc),e}function ar(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return $l(e);if(e.$$typeof===X)return Ft(e)}throw Error(c(438,String(e)))}function ic(e){var t=null,s=ze.updateQueue;if(s!==null&&(t=s.memoCache),t==null){var l=ze.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),s===null&&(s=tr(),ze.updateQueue=s),s.memoCache=t,s=t.data[t.index],s===void 0)for(s=t.data[t.index]=Array(e),l=0;l<e;l++)s[l]=H;return t.index++,s}function Wa(e,t){return typeof t=="function"?t(e):t}function sr(e){var t=Nt();return rc(t,nt,e)}function rc(e,t,s){var l=e.queue;if(l===null)throw Error(c(311));l.lastRenderedReducer=s;var r=e.baseQueue,d=l.pending;if(d!==null){if(r!==null){var m=r.next;r.next=d.next,d.next=m}t.baseQueue=r=d,l.pending=null}if(d=e.baseState,r===null)e.memoizedState=d;else{t=r.next;var b=m=null,k=null,Y=t,ee=!1;do{var ne=Y.lane&-536870913;if(ne!==Y.lane?(Ye&ne)===ne:(Ja&ne)===ne){var V=Y.revertLane;if(V===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),ne===Yn&&(ee=!0);else if((Ja&V)===V){Y=Y.next,V===Yn&&(ee=!0);continue}else ne={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},k===null?(b=k=ne,m=d):k=k.next=ne,ze.lanes|=V,Es|=V;ne=Y.action,rn&&s(d,ne),d=Y.hasEagerState?Y.eagerState:s(d,ne)}else V={lane:ne,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},k===null?(b=k=V,m=d):k=k.next=V,ze.lanes|=ne,Es|=ne;Y=Y.next}while(Y!==null&&Y!==t);if(k===null?m=d:k.next=b,!na(d,e.memoizedState)&&(Ct=!0,ee&&(s=Vn,s!==null)))throw s;e.memoizedState=d,e.baseState=m,e.baseQueue=k,l.lastRenderedState=d}return r===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function oc(e){var t=Nt(),s=t.queue;if(s===null)throw Error(c(311));s.lastRenderedReducer=e;var l=s.dispatch,r=s.pending,d=t.memoizedState;if(r!==null){s.pending=null;var m=r=r.next;do d=e(d,m.action),m=m.next;while(m!==r);na(d,t.memoizedState)||(Ct=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),s.lastRenderedState=d}return[d,l]}function bm(e,t,s){var l=ze,r=Nt(),d=Qe;if(d){if(s===void 0)throw Error(c(407));s=s()}else s=t();var m=!na((nt||r).memoizedState,s);if(m&&(r.memoizedState=s,Ct=!0),r=r.queue,uc(jm.bind(null,l,r,e),[e]),r.getSnapshot!==t||m||St!==null&&St.memoizedState.tag&1){if(l.flags|=2048,Jn(9,{destroy:void 0},vm.bind(null,l,r,s,t),null),ct===null)throw Error(c(349));d||(Ja&127)!==0||ym(l,t,s)}return s}function ym(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=ze.updateQueue,t===null?(t=tr(),ze.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function vm(e,t,s,l){t.value=s,t.getSnapshot=l,_m(t)&&Nm(e)}function jm(e,t,s){return s(function(){_m(t)&&Nm(e)})}function _m(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!na(e,s)}catch{return!0}}function Nm(e){var t=Ps(e,2);t!==null&&ta(t,e,2)}function cc(e){var t=Xt();if(typeof e=="function"){var s=e;if(e=s(),rn){Me(!0);try{s()}finally{Me(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:e},t}function wm(e,t,s,l){return e.baseState=s,rc(e,nt,typeof l=="function"?l:Wa)}function r0(e,t,s,l,r){if(ir(e))throw Error(c(485));if(e=t.action,e!==null){var d={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(m){d.listeners.push(m)}};_.T!==null?s(!0):d.isTransition=!1,l(d),s=t.pending,s===null?(d.next=t.pending=d,Sm(t,d)):(d.next=s.next,t.pending=s.next=d)}}function Sm(e,t){var s=t.action,l=t.payload,r=e.state;if(t.isTransition){var d=_.T,m={};_.T=m;try{var b=s(r,l),k=_.S;k!==null&&k(m,b),Cm(e,t,b)}catch(Y){dc(e,t,Y)}finally{d!==null&&m.types!==null&&(d.types=m.types),_.T=d}}else try{d=s(r,l),Cm(e,t,d)}catch(Y){dc(e,t,Y)}}function Cm(e,t,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){km(e,t,l)},function(l){return dc(e,t,l)}):km(e,t,s)}function km(e,t,s){t.status="fulfilled",t.value=s,Em(t),e.state=s,t=e.pending,t!==null&&(s=t.next,s===t?e.pending=null:(s=s.next,t.next=s,Sm(e,s)))}function dc(e,t,s){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=s,Em(t),t=t.next;while(t!==l)}e.action=null}function Em(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Tm(e,t){return t}function Mm(e,t){if(Qe){var s=ct.formState;if(s!==null){e:{var l=ze;if(Qe){if(ft){t:{for(var r=ft,d=xa;r.nodeType!==8;){if(!d){r=null;break t}if(r=ya(r.nextSibling),r===null){r=null;break t}}d=r.data,r=d==="F!"||d==="F"?r:null}if(r){ft=ya(r.nextSibling),l=r.data==="F!";break e}}ys(l)}l=!1}l&&(t=s[0])}}return s=Xt(),s.memoizedState=s.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tm,lastRenderedState:t},s.queue=l,s=Km.bind(null,ze,l),l.dispatch=s,l=cc(!1),d=gc.bind(null,ze,!1,l.queue),l=Xt(),r={state:t,dispatch:null,action:e,pending:null},l.queue=r,s=r0.bind(null,ze,r,d,s),r.dispatch=s,l.memoizedState=e,[t,s,!1]}function Am(e){var t=Nt();return zm(t,nt,e)}function zm(e,t,s){if(t=rc(e,t,Tm)[0],e=sr(Wa)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=$l(t)}catch(m){throw m===Qn?Qi:m}else l=t;t=Nt();var r=t.queue,d=r.dispatch;return s!==t.memoizedState&&(ze.flags|=2048,Jn(9,{destroy:void 0},o0.bind(null,r,s),null)),[l,d,e]}function o0(e,t){e.action=t}function Om(e){var t=Nt(),s=nt;if(s!==null)return zm(t,s,e);Nt(),t=t.memoizedState,s=Nt();var l=s.queue.dispatch;return s.memoizedState=e,[t,l,!1]}function Jn(e,t,s,l){return e={tag:e,create:s,deps:l,inst:t,next:null},t=ze.updateQueue,t===null&&(t=tr(),ze.updateQueue=t),s=t.lastEffect,s===null?t.lastEffect=e.next=e:(l=s.next,s.next=e,e.next=l,t.lastEffect=e),e}function Dm(){return Nt().memoizedState}function nr(e,t,s,l){var r=Xt();ze.flags|=e,r.memoizedState=Jn(1|t,{destroy:void 0},s,l===void 0?null:l)}function lr(e,t,s,l){var r=Nt();l=l===void 0?null:l;var d=r.memoizedState.inst;nt!==null&&l!==null&&tc(l,nt.memoizedState.deps)?r.memoizedState=Jn(t,d,s,l):(ze.flags|=e,r.memoizedState=Jn(1|t,d,s,l))}function Rm(e,t){nr(8390656,8,e,t)}function uc(e,t){lr(2048,8,e,t)}function c0(e){ze.flags|=4;var t=ze.updateQueue;if(t===null)t=tr(),ze.updateQueue=t,t.events=[e];else{var s=t.events;s===null?t.events=[e]:s.push(e)}}function Um(e){var t=Nt().memoizedState;return c0({ref:t,nextImpl:e}),function(){if((et&2)!==0)throw Error(c(440));return t.impl.apply(void 0,arguments)}}function Lm(e,t){return lr(4,2,e,t)}function qm(e,t){return lr(4,4,e,t)}function Bm(e,t){if(typeof t=="function"){e=e();var s=t(e);return function(){typeof s=="function"?s():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Im(e,t,s){s=s!=null?s.concat([e]):null,lr(4,4,Bm.bind(null,t,e),s)}function mc(){}function Hm(e,t){var s=Nt();t=t===void 0?null:t;var l=s.memoizedState;return t!==null&&tc(t,l[1])?l[0]:(s.memoizedState=[e,t],e)}function Fm(e,t){var s=Nt();t=t===void 0?null:t;var l=s.memoizedState;if(t!==null&&tc(t,l[1]))return l[0];if(l=e(),rn){Me(!0);try{e()}finally{Me(!1)}}return s.memoizedState=[l,t],l}function fc(e,t,s){return s===void 0||(Ja&1073741824)!==0&&(Ye&261930)===0?e.memoizedState=t:(e.memoizedState=s,e=Gf(),ze.lanes|=e,Es|=e,s)}function $m(e,t,s,l){return na(s,t)?s:Kn.current!==null?(e=fc(e,s,l),na(e,t)||(Ct=!0),e):(Ja&42)===0||(Ja&1073741824)!==0&&(Ye&261930)===0?(Ct=!0,e.memoizedState=s):(e=Gf(),ze.lanes|=e,Es|=e,t)}function Gm(e,t,s,l,r){var d=E.p;E.p=d!==0&&8>d?d:8;var m=_.T,b={};_.T=b,gc(e,!1,t,s);try{var k=r(),Y=_.S;if(Y!==null&&Y(b,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var ee=n0(k,l);Gl(e,t,ee,da(e))}else Gl(e,t,l,da(e))}catch(ne){Gl(e,t,{then:function(){},status:"rejected",reason:ne},da())}finally{E.p=d,m!==null&&b.types!==null&&(m.types=b.types),_.T=m}}function d0(){}function pc(e,t,s,l){if(e.tag!==5)throw Error(c(476));var r=Ym(e).queue;Gm(e,r,t,z,s===null?d0:function(){return Vm(e),s(l)})}function Ym(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:z,baseState:z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:z},next:null};var s={};return t.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:s},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Vm(e){var t=Ym(e);t.next===null&&(t=e.alternate.memoizedState),Gl(e,t.next.queue,{},da())}function hc(){return Ft(ri)}function Qm(){return Nt().memoizedState}function Xm(){return Nt().memoizedState}function u0(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var s=da();e=_s(s);var l=Ns(t,e,s);l!==null&&(ta(l,t,s),Bl(l,t,s)),t={cache:Go()},e.payload=t;return}t=t.return}}function m0(e,t,s){var l=da();s={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},ir(e)?Zm(t,s):(s=Oo(e,t,s,l),s!==null&&(ta(s,e,l),Pm(s,t,l)))}function Km(e,t,s){var l=da();Gl(e,t,s,l)}function Gl(e,t,s,l){var r={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(ir(e))Zm(t,r);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var m=t.lastRenderedState,b=d(m,s);if(r.hasEagerState=!0,r.eagerState=b,na(b,m))return Ii(e,t,r,0),ct===null&&Bi(),!1}catch{}finally{}if(s=Oo(e,t,r,l),s!==null)return ta(s,e,l),Pm(s,t,l),!0}return!1}function gc(e,t,s,l){if(l={lane:2,revertLane:Xc(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ir(e)){if(t)throw Error(c(479))}else t=Oo(e,s,l,2),t!==null&&ta(t,e,2)}function ir(e){var t=e.alternate;return e===ze||t!==null&&t===ze}function Zm(e,t){Zn=Wi=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Pm(e,t,s){if((s&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,s|=l,t.lanes=s,Ge(e,s)}}var Yl={readContext:Ft,use:ar,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useLayoutEffect:vt,useInsertionEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useSyncExternalStore:vt,useId:vt,useHostTransitionStatus:vt,useFormState:vt,useActionState:vt,useOptimistic:vt,useMemoCache:vt,useCacheRefresh:vt};Yl.useEffectEvent=vt;var Jm={readContext:Ft,use:ar,useCallback:function(e,t){return Xt().memoizedState=[e,t===void 0?null:t],e},useContext:Ft,useEffect:Rm,useImperativeHandle:function(e,t,s){s=s!=null?s.concat([e]):null,nr(4194308,4,Bm.bind(null,t,e),s)},useLayoutEffect:function(e,t){return nr(4194308,4,e,t)},useInsertionEffect:function(e,t){nr(4,2,e,t)},useMemo:function(e,t){var s=Xt();t=t===void 0?null:t;var l=e();if(rn){Me(!0);try{e()}finally{Me(!1)}}return s.memoizedState=[l,t],l},useReducer:function(e,t,s){var l=Xt();if(s!==void 0){var r=s(t);if(rn){Me(!0);try{s(t)}finally{Me(!1)}}}else r=t;return l.memoizedState=l.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},l.queue=e,e=e.dispatch=m0.bind(null,ze,e),[l.memoizedState,e]},useRef:function(e){var t=Xt();return e={current:e},t.memoizedState=e},useState:function(e){e=cc(e);var t=e.queue,s=Km.bind(null,ze,t);return t.dispatch=s,[e.memoizedState,s]},useDebugValue:mc,useDeferredValue:function(e,t){var s=Xt();return fc(s,e,t)},useTransition:function(){var e=cc(!1);return e=Gm.bind(null,ze,e.queue,!0,!1),Xt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,s){var l=ze,r=Xt();if(Qe){if(s===void 0)throw Error(c(407));s=s()}else{if(s=t(),ct===null)throw Error(c(349));(Ye&127)!==0||ym(l,t,s)}r.memoizedState=s;var d={value:s,getSnapshot:t};return r.queue=d,Rm(jm.bind(null,l,d,e),[e]),l.flags|=2048,Jn(9,{destroy:void 0},vm.bind(null,l,d,s,t),null),s},useId:function(){var e=Xt(),t=ct.identifierPrefix;if(Qe){var s=Ra,l=Da;s=(l&~(1<<32-$e(l)-1)).toString(32)+s,t="_"+t+"R_"+s,s=er++,0<s&&(t+="H"+s.toString(32)),t+="_"}else s=l0++,t="_"+t+"r_"+s.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:hc,useFormState:Mm,useActionState:Mm,useOptimistic:function(e){var t=Xt();t.memoizedState=t.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=s,t=gc.bind(null,ze,!0,s),s.dispatch=t,[e,t]},useMemoCache:ic,useCacheRefresh:function(){return Xt().memoizedState=u0.bind(null,ze)},useEffectEvent:function(e){var t=Xt(),s={impl:e};return t.memoizedState=s,function(){if((et&2)!==0)throw Error(c(440));return s.impl.apply(void 0,arguments)}}},xc={readContext:Ft,use:ar,useCallback:Hm,useContext:Ft,useEffect:uc,useImperativeHandle:Im,useInsertionEffect:Lm,useLayoutEffect:qm,useMemo:Fm,useReducer:sr,useRef:Dm,useState:function(){return sr(Wa)},useDebugValue:mc,useDeferredValue:function(e,t){var s=Nt();return $m(s,nt.memoizedState,e,t)},useTransition:function(){var e=sr(Wa)[0],t=Nt().memoizedState;return[typeof e=="boolean"?e:$l(e),t]},useSyncExternalStore:bm,useId:Qm,useHostTransitionStatus:hc,useFormState:Am,useActionState:Am,useOptimistic:function(e,t){var s=Nt();return wm(s,nt,e,t)},useMemoCache:ic,useCacheRefresh:Xm};xc.useEffectEvent=Um;var Wm={readContext:Ft,use:ar,useCallback:Hm,useContext:Ft,useEffect:uc,useImperativeHandle:Im,useInsertionEffect:Lm,useLayoutEffect:qm,useMemo:Fm,useReducer:oc,useRef:Dm,useState:function(){return oc(Wa)},useDebugValue:mc,useDeferredValue:function(e,t){var s=Nt();return nt===null?fc(s,e,t):$m(s,nt.memoizedState,e,t)},useTransition:function(){var e=oc(Wa)[0],t=Nt().memoizedState;return[typeof e=="boolean"?e:$l(e),t]},useSyncExternalStore:bm,useId:Qm,useHostTransitionStatus:hc,useFormState:Om,useActionState:Om,useOptimistic:function(e,t){var s=Nt();return nt!==null?wm(s,nt,e,t):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:ic,useCacheRefresh:Xm};Wm.useEffectEvent=Um;function bc(e,t,s,l){t=e.memoizedState,s=s(l,t),s=s==null?t:N({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var yc={enqueueSetState:function(e,t,s){e=e._reactInternals;var l=da(),r=_s(l);r.payload=t,s!=null&&(r.callback=s),t=Ns(e,r,l),t!==null&&(ta(t,e,l),Bl(t,e,l))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var l=da(),r=_s(l);r.tag=1,r.payload=t,s!=null&&(r.callback=s),t=Ns(e,r,l),t!==null&&(ta(t,e,l),Bl(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=da(),l=_s(s);l.tag=2,t!=null&&(l.callback=t),t=Ns(e,l,s),t!==null&&(ta(t,e,s),Bl(t,e,s))}};function ef(e,t,s,l,r,d,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,m):t.prototype&&t.prototype.isPureReactComponent?!Al(s,l)||!Al(r,d):!0}function tf(e,t,s,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,l),t.state!==e&&yc.enqueueReplaceState(t,t.state,null)}function on(e,t){var s=t;if("ref"in t){s={};for(var l in t)l!=="ref"&&(s[l]=t[l])}if(e=e.defaultProps){s===t&&(s=N({},s));for(var r in e)s[r]===void 0&&(s[r]=e[r])}return s}function af(e){qi(e)}function sf(e){console.error(e)}function nf(e){qi(e)}function rr(e,t){try{var s=e.onUncaughtError;s(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function lf(e,t,s){try{var l=e.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function vc(e,t,s){return s=_s(s),s.tag=3,s.payload={element:null},s.callback=function(){rr(e,t)},s}function rf(e){return e=_s(e),e.tag=3,e}function of(e,t,s,l){var r=s.type.getDerivedStateFromError;if(typeof r=="function"){var d=l.value;e.payload=function(){return r(d)},e.callback=function(){lf(t,s,l)}}var m=s.stateNode;m!==null&&typeof m.componentDidCatch=="function"&&(e.callback=function(){lf(t,s,l),typeof r!="function"&&(Ts===null?Ts=new Set([this]):Ts.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function f0(e,t,s,l,r){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=s.alternate,t!==null&&Gn(t,s,r,!0),s=ia.current,s!==null){switch(s.tag){case 31:case 13:return ba===null?yr():s.alternate===null&&jt===0&&(jt=3),s.flags&=-257,s.flags|=65536,s.lanes=r,l===Xi?s.flags|=16384:(t=s.updateQueue,t===null?s.updateQueue=new Set([l]):t.add(l),Yc(e,l,r)),!1;case 22:return s.flags|=65536,l===Xi?s.flags|=16384:(t=s.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=t):(s=t.retryQueue,s===null?t.retryQueue=new Set([l]):s.add(l)),Yc(e,l,r)),!1}throw Error(c(435,s.tag))}return Yc(e,l,r),yr(),!1}if(Qe)return t=ia.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=r,l!==Bo&&(e=Error(c(422),{cause:l}),Dl(pa(e,s)))):(l!==Bo&&(t=Error(c(423),{cause:l}),Dl(pa(t,s))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,l=pa(l,s),r=vc(e.stateNode,l,r),Zo(e,r),jt!==4&&(jt=2)),!1;var d=Error(c(520),{cause:l});if(d=pa(d,s),Wl===null?Wl=[d]:Wl.push(d),jt!==4&&(jt=2),t===null)return!0;l=pa(l,s),s=t;do{switch(s.tag){case 3:return s.flags|=65536,e=r&-r,s.lanes|=e,e=vc(s.stateNode,l,e),Zo(s,e),!1;case 1:if(t=s.type,d=s.stateNode,(s.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Ts===null||!Ts.has(d))))return s.flags|=65536,r&=-r,s.lanes|=r,r=rf(r),of(r,e,s,l),Zo(s,r),!1}s=s.return}while(s!==null);return!1}var jc=Error(c(461)),Ct=!1;function $t(e,t,s,l){t.child=e===null?um(t,null,s,l):ln(t,e.child,s,l)}function cf(e,t,s,l,r){s=s.render;var d=t.ref;if("ref"in l){var m={};for(var b in l)b!=="ref"&&(m[b]=l[b])}else m=l;return tn(t),l=ac(e,t,s,m,d,r),b=sc(),e!==null&&!Ct?(nc(e,t,r),es(e,t,r)):(Qe&&b&&Lo(t),t.flags|=1,$t(e,t,l,r),t.child)}function df(e,t,s,l,r){if(e===null){var d=s.type;return typeof d=="function"&&!Do(d)&&d.defaultProps===void 0&&s.compare===null?(t.tag=15,t.type=d,uf(e,t,d,l,r)):(e=Fi(s.type,null,l,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!Tc(e,r)){var m=d.memoizedProps;if(s=s.compare,s=s!==null?s:Al,s(m,l)&&e.ref===t.ref)return es(e,t,r)}return t.flags|=1,e=Xa(d,l),e.ref=t.ref,e.return=t,t.child=e}function uf(e,t,s,l,r){if(e!==null){var d=e.memoizedProps;if(Al(d,l)&&e.ref===t.ref)if(Ct=!1,t.pendingProps=l=d,Tc(e,r))(e.flags&131072)!==0&&(Ct=!0);else return t.lanes=e.lanes,es(e,t,r)}return _c(e,t,s,l,r)}function mf(e,t,s,l){var r=l.children,d=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(d=d!==null?d.baseLanes|s:s,e!==null){for(l=t.child=e.child,r=0;l!==null;)r=r|l.lanes|l.childLanes,l=l.sibling;l=r&~d}else l=0,t.child=null;return ff(e,t,d,s,l)}if((s&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Vi(t,d!==null?d.cachePool:null),d!==null?pm(t,d):Jo(),hm(t);else return l=t.lanes=536870912,ff(e,t,d!==null?d.baseLanes|s:s,s,l)}else d!==null?(Vi(t,d.cachePool),pm(t,d),Ss(),t.memoizedState=null):(e!==null&&Vi(t,null),Jo(),Ss());return $t(e,t,r,s),t.child}function Vl(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function ff(e,t,s,l,r){var d=Vo();return d=d===null?null:{parent:wt._currentValue,pool:d},t.memoizedState={baseLanes:s,cachePool:d},e!==null&&Vi(t,null),Jo(),hm(t),e!==null&&Gn(e,t,l,!0),t.childLanes=r,null}function or(e,t){return t=dr({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function pf(e,t,s){return ln(t,e.child,null,s),e=or(t,t.pendingProps),e.flags|=2,ra(t),t.memoizedState=null,e}function p0(e,t,s){var l=t.pendingProps,r=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Qe){if(l.mode==="hidden")return e=or(t,l),t.lanes=536870912,Vl(null,e);if(ec(t),(e=ft)?(e=Cp(e,xa),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:xs!==null?{id:Da,overflow:Ra}:null,retryLane:536870912,hydrationErrors:null},s=Zu(e),s.return=t,t.child=s,Ht=t,ft=null)):e=null,e===null)throw ys(t);return t.lanes=536870912,null}return or(t,l)}var d=e.memoizedState;if(d!==null){var m=d.dehydrated;if(ec(t),r)if(t.flags&256)t.flags&=-257,t=pf(e,t,s);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(c(558));else if(Ct||Gn(e,t,s,!1),r=(s&e.childLanes)!==0,Ct||r){if(l=ct,l!==null&&(m=mt(l,s),m!==0&&m!==d.retryLane))throw d.retryLane=m,Ps(e,m),ta(l,e,m),jc;yr(),t=pf(e,t,s)}else e=d.treeContext,ft=ya(m.nextSibling),Ht=t,Qe=!0,bs=null,xa=!1,e!==null&&Wu(t,e),t=or(t,l),t.flags|=4096;return t}return e=Xa(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function cr(e,t){var s=t.ref;if(s===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(c(284));(e===null||e.ref!==s)&&(t.flags|=4194816)}}function _c(e,t,s,l,r){return tn(t),s=ac(e,t,s,l,void 0,r),l=sc(),e!==null&&!Ct?(nc(e,t,r),es(e,t,r)):(Qe&&l&&Lo(t),t.flags|=1,$t(e,t,s,r),t.child)}function hf(e,t,s,l,r,d){return tn(t),t.updateQueue=null,s=xm(t,l,s,r),gm(e),l=sc(),e!==null&&!Ct?(nc(e,t,d),es(e,t,d)):(Qe&&l&&Lo(t),t.flags|=1,$t(e,t,s,d),t.child)}function gf(e,t,s,l,r){if(tn(t),t.stateNode===null){var d=In,m=s.contextType;typeof m=="object"&&m!==null&&(d=Ft(m)),d=new s(l,d),t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=yc,t.stateNode=d,d._reactInternals=t,d=t.stateNode,d.props=l,d.state=t.memoizedState,d.refs={},Xo(t),m=s.contextType,d.context=typeof m=="object"&&m!==null?Ft(m):In,d.state=t.memoizedState,m=s.getDerivedStateFromProps,typeof m=="function"&&(bc(t,s,m,l),d.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(m=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),m!==d.state&&yc.enqueueReplaceState(d,d.state,null),Hl(t,l,d,r),Il(),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){d=t.stateNode;var b=t.memoizedProps,k=on(s,b);d.props=k;var Y=d.context,ee=s.contextType;m=In,typeof ee=="object"&&ee!==null&&(m=Ft(ee));var ne=s.getDerivedStateFromProps;ee=typeof ne=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=t.pendingProps!==b,ee||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||Y!==m)&&tf(t,d,l,m),js=!1;var V=t.memoizedState;d.state=V,Hl(t,l,d,r),Il(),Y=t.memoizedState,b||V!==Y||js?(typeof ne=="function"&&(bc(t,s,ne,l),Y=t.memoizedState),(k=js||ef(t,s,k,l,V,Y,m))?(ee||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=Y),d.props=l,d.state=Y,d.context=m,l=k):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{d=t.stateNode,Ko(e,t),m=t.memoizedProps,ee=on(s,m),d.props=ee,ne=t.pendingProps,V=d.context,Y=s.contextType,k=In,typeof Y=="object"&&Y!==null&&(k=Ft(Y)),b=s.getDerivedStateFromProps,(Y=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(m!==ne||V!==k)&&tf(t,d,l,k),js=!1,V=t.memoizedState,d.state=V,Hl(t,l,d,r),Il();var P=t.memoizedState;m!==ne||V!==P||js||e!==null&&e.dependencies!==null&&Gi(e.dependencies)?(typeof b=="function"&&(bc(t,s,b,l),P=t.memoizedState),(ee=js||ef(t,s,ee,l,V,P,k)||e!==null&&e.dependencies!==null&&Gi(e.dependencies))?(Y||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,P,k),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,P,k)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||m===e.memoizedProps&&V===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&V===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=P),d.props=l,d.state=P,d.context=k,l=ee):(typeof d.componentDidUpdate!="function"||m===e.memoizedProps&&V===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&V===e.memoizedState||(t.flags|=1024),l=!1)}return d=l,cr(e,t),l=(t.flags&128)!==0,d||l?(d=t.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:d.render(),t.flags|=1,e!==null&&l?(t.child=ln(t,e.child,null,r),t.child=ln(t,null,s,r)):$t(e,t,s,r),t.memoizedState=d.state,e=t.child):e=es(e,t,r),e}function xf(e,t,s,l){return Ws(),t.flags|=256,$t(e,t,s,l),t.child}var Nc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function wc(e){return{baseLanes:e,cachePool:lm()}}function Sc(e,t,s){return e=e!==null?e.childLanes&~s:0,t&&(e|=ca),e}function bf(e,t,s){var l=t.pendingProps,r=!1,d=(t.flags&128)!==0,m;if((m=d)||(m=e!==null&&e.memoizedState===null?!1:(_t.current&2)!==0),m&&(r=!0,t.flags&=-129),m=(t.flags&32)!==0,t.flags&=-33,e===null){if(Qe){if(r?ws(t):Ss(),(e=ft)?(e=Cp(e,xa),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:xs!==null?{id:Da,overflow:Ra}:null,retryLane:536870912,hydrationErrors:null},s=Zu(e),s.return=t,t.child=s,Ht=t,ft=null)):e=null,e===null)throw ys(t);return rd(e)?t.lanes=32:t.lanes=536870912,null}var b=l.children;return l=l.fallback,r?(Ss(),r=t.mode,b=dr({mode:"hidden",children:b},r),l=Js(l,r,s,null),b.return=t,l.return=t,b.sibling=l,t.child=b,l=t.child,l.memoizedState=wc(s),l.childLanes=Sc(e,m,s),t.memoizedState=Nc,Vl(null,l)):(ws(t),Cc(t,b))}var k=e.memoizedState;if(k!==null&&(b=k.dehydrated,b!==null)){if(d)t.flags&256?(ws(t),t.flags&=-257,t=kc(e,t,s)):t.memoizedState!==null?(Ss(),t.child=e.child,t.flags|=128,t=null):(Ss(),b=l.fallback,r=t.mode,l=dr({mode:"visible",children:l.children},r),b=Js(b,r,s,null),b.flags|=2,l.return=t,b.return=t,l.sibling=b,t.child=l,ln(t,e.child,null,s),l=t.child,l.memoizedState=wc(s),l.childLanes=Sc(e,m,s),t.memoizedState=Nc,t=Vl(null,l));else if(ws(t),rd(b)){if(m=b.nextSibling&&b.nextSibling.dataset,m)var Y=m.dgst;m=Y,l=Error(c(419)),l.stack="",l.digest=m,Dl({value:l,source:null,stack:null}),t=kc(e,t,s)}else if(Ct||Gn(e,t,s,!1),m=(s&e.childLanes)!==0,Ct||m){if(m=ct,m!==null&&(l=mt(m,s),l!==0&&l!==k.retryLane))throw k.retryLane=l,Ps(e,l),ta(m,e,l),jc;id(b)||yr(),t=kc(e,t,s)}else id(b)?(t.flags|=192,t.child=e.child,t=null):(e=k.treeContext,ft=ya(b.nextSibling),Ht=t,Qe=!0,bs=null,xa=!1,e!==null&&Wu(t,e),t=Cc(t,l.children),t.flags|=4096);return t}return r?(Ss(),b=l.fallback,r=t.mode,k=e.child,Y=k.sibling,l=Xa(k,{mode:"hidden",children:l.children}),l.subtreeFlags=k.subtreeFlags&65011712,Y!==null?b=Xa(Y,b):(b=Js(b,r,s,null),b.flags|=2),b.return=t,l.return=t,l.sibling=b,t.child=l,Vl(null,l),l=t.child,b=e.child.memoizedState,b===null?b=wc(s):(r=b.cachePool,r!==null?(k=wt._currentValue,r=r.parent!==k?{parent:k,pool:k}:r):r=lm(),b={baseLanes:b.baseLanes|s,cachePool:r}),l.memoizedState=b,l.childLanes=Sc(e,m,s),t.memoizedState=Nc,Vl(e.child,l)):(ws(t),s=e.child,e=s.sibling,s=Xa(s,{mode:"visible",children:l.children}),s.return=t,s.sibling=null,e!==null&&(m=t.deletions,m===null?(t.deletions=[e],t.flags|=16):m.push(e)),t.child=s,t.memoizedState=null,s)}function Cc(e,t){return t=dr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function dr(e,t){return e=la(22,e,null,t),e.lanes=0,e}function kc(e,t,s){return ln(t,e.child,null,s),e=Cc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function yf(e,t,s){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),Fo(e.return,t,s)}function Ec(e,t,s,l,r,d){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:r,treeForkCount:d}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=l,m.tail=s,m.tailMode=r,m.treeForkCount=d)}function vf(e,t,s){var l=t.pendingProps,r=l.revealOrder,d=l.tail;l=l.children;var m=_t.current,b=(m&2)!==0;if(b?(m=m&1|2,t.flags|=128):m&=1,M(_t,m),$t(e,t,l,s),l=Qe?Ol:0,!b&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&yf(e,s,t);else if(e.tag===19)yf(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(r){case"forwards":for(s=t.child,r=null;s!==null;)e=s.alternate,e!==null&&Ji(e)===null&&(r=s),s=s.sibling;s=r,s===null?(r=t.child,t.child=null):(r=s.sibling,s.sibling=null),Ec(t,!1,r,s,d,l);break;case"backwards":case"unstable_legacy-backwards":for(s=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&Ji(e)===null){t.child=r;break}e=r.sibling,r.sibling=s,s=r,r=e}Ec(t,!0,s,null,d,l);break;case"together":Ec(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function es(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Es|=t.lanes,(s&t.childLanes)===0)if(e!==null){if(Gn(e,t,s,!1),(s&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(c(153));if(t.child!==null){for(e=t.child,s=Xa(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=Xa(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function Tc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Gi(e)))}function h0(e,t,s){switch(t.tag){case 3:ce(t,t.stateNode.containerInfo),vs(t,wt,e.memoizedState.cache),Ws();break;case 27:case 5:xe(t);break;case 4:ce(t,t.stateNode.containerInfo);break;case 10:vs(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,ec(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(ws(t),t.flags|=128,null):(s&t.child.childLanes)!==0?bf(e,t,s):(ws(t),e=es(e,t,s),e!==null?e.sibling:null);ws(t);break;case 19:var r=(e.flags&128)!==0;if(l=(s&t.childLanes)!==0,l||(Gn(e,t,s,!1),l=(s&t.childLanes)!==0),r){if(l)return vf(e,t,s);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),M(_t,_t.current),l)break;return null;case 22:return t.lanes=0,mf(e,t,s,t.pendingProps);case 24:vs(t,wt,e.memoizedState.cache)}return es(e,t,s)}function jf(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps)Ct=!0;else{if(!Tc(e,s)&&(t.flags&128)===0)return Ct=!1,h0(e,t,s);Ct=(e.flags&131072)!==0}else Ct=!1,Qe&&(t.flags&1048576)!==0&&Ju(t,Ol,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=sn(t.elementType),t.type=e,typeof e=="function")Do(e)?(l=on(e,l),t.tag=1,t=gf(null,t,e,l,s)):(t.tag=0,t=_c(null,t,e,l,s));else{if(e!=null){var r=e.$$typeof;if(r===A){t.tag=11,t=cf(null,t,e,l,s);break e}else if(r===J){t.tag=14,t=df(null,t,e,l,s);break e}}throw t=B(e)||e,Error(c(306,t,""))}}return t;case 0:return _c(e,t,t.type,t.pendingProps,s);case 1:return l=t.type,r=on(l,t.pendingProps),gf(e,t,l,r,s);case 3:e:{if(ce(t,t.stateNode.containerInfo),e===null)throw Error(c(387));l=t.pendingProps;var d=t.memoizedState;r=d.element,Ko(e,t),Hl(t,l,null,s);var m=t.memoizedState;if(l=m.cache,vs(t,wt,l),l!==d.cache&&$o(t,[wt],s,!0),Il(),l=m.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:m.cache},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){t=xf(e,t,l,s);break e}else if(l!==r){r=pa(Error(c(424)),t),Dl(r),t=xf(e,t,l,s);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ft=ya(e.firstChild),Ht=t,Qe=!0,bs=null,xa=!0,s=um(t,null,l,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(Ws(),l===r){t=es(e,t,s);break e}$t(e,t,l,s)}t=t.child}return t;case 26:return cr(e,t),e===null?(s=zp(t.type,null,t.pendingProps,null))?t.memoizedState=s:Qe||(s=t.type,e=t.pendingProps,l=Cr(ge.current).createElement(s),l[It]=t,l[Kt]=e,Gt(l,s,e),Rt(l),t.stateNode=l):t.memoizedState=zp(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return xe(t),e===null&&Qe&&(l=t.stateNode=Tp(t.type,t.pendingProps,ge.current),Ht=t,xa=!0,r=ft,Os(t.type)?(od=r,ft=ya(l.firstChild)):ft=r),$t(e,t,t.pendingProps.children,s),cr(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Qe&&((r=l=ft)&&(l=Y0(l,t.type,t.pendingProps,xa),l!==null?(t.stateNode=l,Ht=t,ft=ya(l.firstChild),xa=!1,r=!0):r=!1),r||ys(t)),xe(t),r=t.type,d=t.pendingProps,m=e!==null?e.memoizedProps:null,l=d.children,sd(r,d)?l=null:m!==null&&sd(r,m)&&(t.flags|=32),t.memoizedState!==null&&(r=ac(e,t,i0,null,null,s),ri._currentValue=r),cr(e,t),$t(e,t,l,s),t.child;case 6:return e===null&&Qe&&((e=s=ft)&&(s=V0(s,t.pendingProps,xa),s!==null?(t.stateNode=s,Ht=t,ft=null,e=!0):e=!1),e||ys(t)),null;case 13:return bf(e,t,s);case 4:return ce(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=ln(t,null,l,s):$t(e,t,l,s),t.child;case 11:return cf(e,t,t.type,t.pendingProps,s);case 7:return $t(e,t,t.pendingProps,s),t.child;case 8:return $t(e,t,t.pendingProps.children,s),t.child;case 12:return $t(e,t,t.pendingProps.children,s),t.child;case 10:return l=t.pendingProps,vs(t,t.type,l.value),$t(e,t,l.children,s),t.child;case 9:return r=t.type._context,l=t.pendingProps.children,tn(t),r=Ft(r),l=l(r),t.flags|=1,$t(e,t,l,s),t.child;case 14:return df(e,t,t.type,t.pendingProps,s);case 15:return uf(e,t,t.type,t.pendingProps,s);case 19:return vf(e,t,s);case 31:return p0(e,t,s);case 22:return mf(e,t,s,t.pendingProps);case 24:return tn(t),l=Ft(wt),e===null?(r=Vo(),r===null&&(r=ct,d=Go(),r.pooledCache=d,d.refCount++,d!==null&&(r.pooledCacheLanes|=s),r=d),t.memoizedState={parent:l,cache:r},Xo(t),vs(t,wt,r)):((e.lanes&s)!==0&&(Ko(e,t),Hl(t,null,null,s),Il()),r=e.memoizedState,d=t.memoizedState,r.parent!==l?(r={parent:l,cache:l},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),vs(t,wt,l)):(l=d.cache,vs(t,wt,l),l!==r.cache&&$o(t,[wt],s,!0))),$t(e,t,t.pendingProps.children,s),t.child;case 29:throw t.pendingProps}throw Error(c(156,t.tag))}function ts(e){e.flags|=4}function Mc(e,t,s,l,r){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(r&335544128)===r)if(e.stateNode.complete)e.flags|=8192;else if(Xf())e.flags|=8192;else throw nn=Xi,Qo}else e.flags&=-16777217}function _f(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Lp(t))if(Xf())e.flags|=8192;else throw nn=Xi,Qo}function ur(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Pe():536870912,e.lanes|=t,al|=t)}function Ql(e,t){if(!Qe)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function pt(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,l=0;if(t)for(var r=e.child;r!==null;)s|=r.lanes|r.childLanes,l|=r.subtreeFlags&65011712,l|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)s|=r.lanes|r.childLanes,l|=r.subtreeFlags,l|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=l,e.childLanes=s,t}function g0(e,t,s){var l=t.pendingProps;switch(qo(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(t),null;case 1:return pt(t),null;case 3:return s=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),Pa(wt),_e(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&($n(t)?ts(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Io())),pt(t),null;case 26:var r=t.type,d=t.memoizedState;return e===null?(ts(t),d!==null?(pt(t),_f(t,d)):(pt(t),Mc(t,r,null,l,s))):d?d!==e.memoizedState?(ts(t),pt(t),_f(t,d)):(pt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&ts(t),pt(t),Mc(t,r,e,l,s)),null;case 27:if(Ae(t),s=ge.current,r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&ts(t);else{if(!l){if(t.stateNode===null)throw Error(c(166));return pt(t),null}e=re.current,$n(t)?em(t):(e=Tp(r,l,s),t.stateNode=e,ts(t))}return pt(t),null;case 5:if(Ae(t),r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&ts(t);else{if(!l){if(t.stateNode===null)throw Error(c(166));return pt(t),null}if(d=re.current,$n(t))em(t);else{var m=Cr(ge.current);switch(d){case 1:d=m.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:d=m.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":d=m.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":d=m.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":d=m.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?m.createElement("select",{is:l.is}):m.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?m.createElement(r,{is:l.is}):m.createElement(r)}}d[It]=t,d[Kt]=l;e:for(m=t.child;m!==null;){if(m.tag===5||m.tag===6)d.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}t.stateNode=d;e:switch(Gt(d,r,l),r){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&ts(t)}}return pt(t),Mc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,s),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&ts(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(c(166));if(e=ge.current,$n(t)){if(e=t.stateNode,s=t.memoizedProps,l=null,r=Ht,r!==null)switch(r.tag){case 27:case 5:l=r.memoizedProps}e[It]=t,e=!!(e.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||bp(e.nodeValue,s)),e||ys(t,!0)}else e=Cr(e).createTextNode(l),e[It]=t,t.stateNode=e}return pt(t),null;case 31:if(s=t.memoizedState,e===null||e.memoizedState!==null){if(l=$n(t),s!==null){if(e===null){if(!l)throw Error(c(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(557));e[It]=t}else Ws(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;pt(t),e=!1}else s=Io(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return t.flags&256?(ra(t),t):(ra(t),null);if((t.flags&128)!==0)throw Error(c(558))}return pt(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=$n(t),l!==null&&l.dehydrated!==null){if(e===null){if(!r)throw Error(c(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(c(317));r[It]=t}else Ws(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;pt(t),r=!1}else r=Io(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(ra(t),t):(ra(t),null)}return ra(t),(t.flags&128)!==0?(t.lanes=s,t):(s=l!==null,e=e!==null&&e.memoizedState!==null,s&&(l=t.child,r=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(r=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==r&&(l.flags|=2048)),s!==e&&s&&(t.child.flags|=8192),ur(t,t.updateQueue),pt(t),null);case 4:return _e(),e===null&&Jc(t.stateNode.containerInfo),pt(t),null;case 10:return Pa(t.type),pt(t),null;case 19:if(I(_t),l=t.memoizedState,l===null)return pt(t),null;if(r=(t.flags&128)!==0,d=l.rendering,d===null)if(r)Ql(l,!1);else{if(jt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(d=Ji(e),d!==null){for(t.flags|=128,Ql(l,!1),e=d.updateQueue,t.updateQueue=e,ur(t,e),t.subtreeFlags=0,e=s,s=t.child;s!==null;)Ku(s,e),s=s.sibling;return M(_t,_t.current&1|2),Qe&&Ka(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&dt()>gr&&(t.flags|=128,r=!0,Ql(l,!1),t.lanes=4194304)}else{if(!r)if(e=Ji(d),e!==null){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,ur(t,e),Ql(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Qe)return pt(t),null}else 2*dt()-l.renderingStartTime>gr&&s!==536870912&&(t.flags|=128,r=!0,Ql(l,!1),t.lanes=4194304);l.isBackwards?(d.sibling=t.child,t.child=d):(e=l.last,e!==null?e.sibling=d:t.child=d,l.last=d)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=dt(),e.sibling=null,s=_t.current,M(_t,r?s&1|2:s&1),Qe&&Ka(t,l.treeForkCount),e):(pt(t),null);case 22:case 23:return ra(t),Wo(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(s&536870912)!==0&&(t.flags&128)===0&&(pt(t),t.subtreeFlags&6&&(t.flags|=8192)):pt(t),s=t.updateQueue,s!==null&&ur(t,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==s&&(t.flags|=2048),e!==null&&I(an),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),Pa(wt),pt(t),null;case 25:return null;case 30:return null}throw Error(c(156,t.tag))}function x0(e,t){switch(qo(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Pa(wt),_e(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ae(t),null;case 31:if(t.memoizedState!==null){if(ra(t),t.alternate===null)throw Error(c(340));Ws()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(ra(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(c(340));Ws()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return I(_t),null;case 4:return _e(),null;case 10:return Pa(t.type),null;case 22:case 23:return ra(t),Wo(),e!==null&&I(an),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Pa(wt),null;case 25:return null;default:return null}}function Nf(e,t){switch(qo(t),t.tag){case 3:Pa(wt),_e();break;case 26:case 27:case 5:Ae(t);break;case 4:_e();break;case 31:t.memoizedState!==null&&ra(t);break;case 13:ra(t);break;case 19:I(_t);break;case 10:Pa(t.type);break;case 22:case 23:ra(t),Wo(),e!==null&&I(an);break;case 24:Pa(wt)}}function Xl(e,t){try{var s=t.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var r=l.next;s=r;do{if((s.tag&e)===e){l=void 0;var d=s.create,m=s.inst;l=d(),m.destroy=l}s=s.next}while(s!==r)}}catch(b){at(t,t.return,b)}}function Cs(e,t,s){try{var l=t.updateQueue,r=l!==null?l.lastEffect:null;if(r!==null){var d=r.next;l=d;do{if((l.tag&e)===e){var m=l.inst,b=m.destroy;if(b!==void 0){m.destroy=void 0,r=t;var k=s,Y=b;try{Y()}catch(ee){at(r,k,ee)}}}l=l.next}while(l!==d)}}catch(ee){at(t,t.return,ee)}}function wf(e){var t=e.updateQueue;if(t!==null){var s=e.stateNode;try{fm(t,s)}catch(l){at(e,e.return,l)}}}function Sf(e,t,s){s.props=on(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(l){at(e,t,l)}}function Kl(e,t){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof s=="function"?e.refCleanup=s(l):s.current=l}}catch(r){at(e,t,r)}}function Ua(e,t){var s=e.ref,l=e.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(r){at(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(r){at(e,t,r)}else s.current=null}function Cf(e){var t=e.type,s=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break e;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(r){at(e,e.return,r)}}function Ac(e,t,s){try{var l=e.stateNode;B0(l,e.type,s,t),l[Kt]=t}catch(r){at(e,e.return,r)}}function kf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Os(e.type)||e.tag===4}function zc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||kf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Os(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Oc(e,t,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,t):(t=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,t.appendChild(e),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=Va));else if(l!==4&&(l===27&&Os(e.type)&&(s=e.stateNode,t=null),e=e.child,e!==null))for(Oc(e,t,s),e=e.sibling;e!==null;)Oc(e,t,s),e=e.sibling}function mr(e,t,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(l!==4&&(l===27&&Os(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(mr(e,t,s),e=e.sibling;e!==null;)mr(e,t,s),e=e.sibling}function Ef(e){var t=e.stateNode,s=e.memoizedProps;try{for(var l=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Gt(t,l,s),t[It]=e,t[Kt]=s}catch(d){at(e,e.return,d)}}var as=!1,kt=!1,Dc=!1,Tf=typeof WeakSet=="function"?WeakSet:Set,Ut=null;function b0(e,t){if(e=e.containerInfo,td=Or,e=Iu(e),ko(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var r=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{s.nodeType,d.nodeType}catch{s=null;break e}var m=0,b=-1,k=-1,Y=0,ee=0,ne=e,V=null;t:for(;;){for(var P;ne!==s||r!==0&&ne.nodeType!==3||(b=m+r),ne!==d||l!==0&&ne.nodeType!==3||(k=m+l),ne.nodeType===3&&(m+=ne.nodeValue.length),(P=ne.firstChild)!==null;)V=ne,ne=P;for(;;){if(ne===e)break t;if(V===s&&++Y===r&&(b=m),V===d&&++ee===l&&(k=m),(P=ne.nextSibling)!==null)break;ne=V,V=ne.parentNode}ne=P}s=b===-1||k===-1?null:{start:b,end:k}}else s=null}s=s||{start:0,end:0}}else s=null;for(ad={focusedElem:e,selectionRange:s},Or=!1,Ut=t;Ut!==null;)if(t=Ut,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ut=e;else for(;Ut!==null;){switch(t=Ut,d=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)r=e[s],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,s=t,r=d.memoizedProps,d=d.memoizedState,l=s.stateNode;try{var je=on(s.type,r);e=l.getSnapshotBeforeUpdate(je,d),l.__reactInternalSnapshotBeforeUpdate=e}catch(Ee){at(s,s.return,Ee)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,s=e.nodeType,s===9)ld(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ld(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(c(163))}if(e=t.sibling,e!==null){e.return=t.return,Ut=e;break}Ut=t.return}}function Mf(e,t,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:ns(e,s),l&4&&Xl(5,s);break;case 1:if(ns(e,s),l&4)if(e=s.stateNode,t===null)try{e.componentDidMount()}catch(m){at(s,s.return,m)}else{var r=on(s.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(m){at(s,s.return,m)}}l&64&&wf(s),l&512&&Kl(s,s.return);break;case 3:if(ns(e,s),l&64&&(e=s.updateQueue,e!==null)){if(t=null,s.child!==null)switch(s.child.tag){case 27:case 5:t=s.child.stateNode;break;case 1:t=s.child.stateNode}try{fm(e,t)}catch(m){at(s,s.return,m)}}break;case 27:t===null&&l&4&&Ef(s);case 26:case 5:ns(e,s),t===null&&l&4&&Cf(s),l&512&&Kl(s,s.return);break;case 12:ns(e,s);break;case 31:ns(e,s),l&4&&Of(e,s);break;case 13:ns(e,s),l&4&&Df(e,s),l&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=k0.bind(null,s),Q0(e,s))));break;case 22:if(l=s.memoizedState!==null||as,!l){t=t!==null&&t.memoizedState!==null||kt,r=as;var d=kt;as=l,(kt=t)&&!d?ls(e,s,(s.subtreeFlags&8772)!==0):ns(e,s),as=r,kt=d}break;case 30:break;default:ns(e,s)}}function Af(e){var t=e.alternate;t!==null&&(e.alternate=null,Af(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&co(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var xt=null,Pt=!1;function ss(e,t,s){for(s=s.child;s!==null;)zf(e,t,s),s=s.sibling}function zf(e,t,s){if(Fe&&typeof Fe.onCommitFiberUnmount=="function")try{Fe.onCommitFiberUnmount(Be,s)}catch{}switch(s.tag){case 26:kt||Ua(s,t),ss(e,t,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:kt||Ua(s,t);var l=xt,r=Pt;Os(s.type)&&(xt=s.stateNode,Pt=!1),ss(e,t,s),ni(s.stateNode),xt=l,Pt=r;break;case 5:kt||Ua(s,t);case 6:if(l=xt,r=Pt,xt=null,ss(e,t,s),xt=l,Pt=r,xt!==null)if(Pt)try{(xt.nodeType===9?xt.body:xt.nodeName==="HTML"?xt.ownerDocument.body:xt).removeChild(s.stateNode)}catch(d){at(s,t,d)}else try{xt.removeChild(s.stateNode)}catch(d){at(s,t,d)}break;case 18:xt!==null&&(Pt?(e=xt,wp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),dl(e)):wp(xt,s.stateNode));break;case 4:l=xt,r=Pt,xt=s.stateNode.containerInfo,Pt=!0,ss(e,t,s),xt=l,Pt=r;break;case 0:case 11:case 14:case 15:Cs(2,s,t),kt||Cs(4,s,t),ss(e,t,s);break;case 1:kt||(Ua(s,t),l=s.stateNode,typeof l.componentWillUnmount=="function"&&Sf(s,t,l)),ss(e,t,s);break;case 21:ss(e,t,s);break;case 22:kt=(l=kt)||s.memoizedState!==null,ss(e,t,s),kt=l;break;default:ss(e,t,s)}}function Of(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{dl(e)}catch(s){at(t,t.return,s)}}}function Df(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{dl(e)}catch(s){at(t,t.return,s)}}function y0(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Tf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Tf),t;default:throw Error(c(435,e.tag))}}function fr(e,t){var s=y0(e);t.forEach(function(l){if(!s.has(l)){s.add(l);var r=E0.bind(null,e,l);l.then(r,r)}})}function Jt(e,t){var s=t.deletions;if(s!==null)for(var l=0;l<s.length;l++){var r=s[l],d=e,m=t,b=m;e:for(;b!==null;){switch(b.tag){case 27:if(Os(b.type)){xt=b.stateNode,Pt=!1;break e}break;case 5:xt=b.stateNode,Pt=!1;break e;case 3:case 4:xt=b.stateNode.containerInfo,Pt=!0;break e}b=b.return}if(xt===null)throw Error(c(160));zf(d,m,r),xt=null,Pt=!1,d=r.alternate,d!==null&&(d.return=null),r.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Rf(t,e),t=t.sibling}var Ca=null;function Rf(e,t){var s=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Jt(t,e),Wt(e),l&4&&(Cs(3,e,e.return),Xl(3,e),Cs(5,e,e.return));break;case 1:Jt(t,e),Wt(e),l&512&&(kt||s===null||Ua(s,s.return)),l&64&&as&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var r=Ca;if(Jt(t,e),Wt(e),l&512&&(kt||s===null||Ua(s,s.return)),l&4){var d=s!==null?s.memoizedState:null;if(l=e.memoizedState,s===null)if(l===null)if(e.stateNode===null){e:{l=e.type,s=e.memoizedProps,r=r.ownerDocument||r;t:switch(l){case"title":d=r.getElementsByTagName("title")[0],(!d||d[_l]||d[It]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=r.createElement(l),r.head.insertBefore(d,r.querySelector("head > title"))),Gt(d,l,s),d[It]=e,Rt(d),l=d;break e;case"link":var m=Rp("link","href",r).get(l+(s.href||""));if(m){for(var b=0;b<m.length;b++)if(d=m[b],d.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&d.getAttribute("rel")===(s.rel==null?null:s.rel)&&d.getAttribute("title")===(s.title==null?null:s.title)&&d.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){m.splice(b,1);break t}}d=r.createElement(l),Gt(d,l,s),r.head.appendChild(d);break;case"meta":if(m=Rp("meta","content",r).get(l+(s.content||""))){for(b=0;b<m.length;b++)if(d=m[b],d.getAttribute("content")===(s.content==null?null:""+s.content)&&d.getAttribute("name")===(s.name==null?null:s.name)&&d.getAttribute("property")===(s.property==null?null:s.property)&&d.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&d.getAttribute("charset")===(s.charSet==null?null:s.charSet)){m.splice(b,1);break t}}d=r.createElement(l),Gt(d,l,s),r.head.appendChild(d);break;default:throw Error(c(468,l))}d[It]=e,Rt(d),l=d}e.stateNode=l}else Up(r,e.type,e.stateNode);else e.stateNode=Dp(r,l,e.memoizedProps);else d!==l?(d===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):d.count--,l===null?Up(r,e.type,e.stateNode):Dp(r,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Ac(e,e.memoizedProps,s.memoizedProps)}break;case 27:Jt(t,e),Wt(e),l&512&&(kt||s===null||Ua(s,s.return)),s!==null&&l&4&&Ac(e,e.memoizedProps,s.memoizedProps);break;case 5:if(Jt(t,e),Wt(e),l&512&&(kt||s===null||Ua(s,s.return)),e.flags&32){r=e.stateNode;try{On(r,"")}catch(je){at(e,e.return,je)}}l&4&&e.stateNode!=null&&(r=e.memoizedProps,Ac(e,r,s!==null?s.memoizedProps:r)),l&1024&&(Dc=!0);break;case 6:if(Jt(t,e),Wt(e),l&4){if(e.stateNode===null)throw Error(c(162));l=e.memoizedProps,s=e.stateNode;try{s.nodeValue=l}catch(je){at(e,e.return,je)}}break;case 3:if(Tr=null,r=Ca,Ca=kr(t.containerInfo),Jt(t,e),Ca=r,Wt(e),l&4&&s!==null&&s.memoizedState.isDehydrated)try{dl(t.containerInfo)}catch(je){at(e,e.return,je)}Dc&&(Dc=!1,Uf(e));break;case 4:l=Ca,Ca=kr(e.stateNode.containerInfo),Jt(t,e),Wt(e),Ca=l;break;case 12:Jt(t,e),Wt(e);break;case 31:Jt(t,e),Wt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,fr(e,l)));break;case 13:Jt(t,e),Wt(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(hr=dt()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,fr(e,l)));break;case 22:r=e.memoizedState!==null;var k=s!==null&&s.memoizedState!==null,Y=as,ee=kt;if(as=Y||r,kt=ee||k,Jt(t,e),kt=ee,as=Y,Wt(e),l&8192)e:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(s===null||k||as||kt||cn(e)),s=null,t=e;;){if(t.tag===5||t.tag===26){if(s===null){k=s=t;try{if(d=k.stateNode,r)m=d.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none";else{b=k.stateNode;var ne=k.memoizedProps.style,V=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;b.style.display=V==null||typeof V=="boolean"?"":(""+V).trim()}}catch(je){at(k,k.return,je)}}}else if(t.tag===6){if(s===null){k=t;try{k.stateNode.nodeValue=r?"":k.memoizedProps}catch(je){at(k,k.return,je)}}}else if(t.tag===18){if(s===null){k=t;try{var P=k.stateNode;r?Sp(P,!0):Sp(k.stateNode,!1)}catch(je){at(k,k.return,je)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;s===t&&(s=null),t=t.return}s===t&&(s=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,fr(e,s))));break;case 19:Jt(t,e),Wt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,fr(e,l)));break;case 30:break;case 21:break;default:Jt(t,e),Wt(e)}}function Wt(e){var t=e.flags;if(t&2){try{for(var s,l=e.return;l!==null;){if(kf(l)){s=l;break}l=l.return}if(s==null)throw Error(c(160));switch(s.tag){case 27:var r=s.stateNode,d=zc(e);mr(e,d,r);break;case 5:var m=s.stateNode;s.flags&32&&(On(m,""),s.flags&=-33);var b=zc(e);mr(e,b,m);break;case 3:case 4:var k=s.stateNode.containerInfo,Y=zc(e);Oc(e,Y,k);break;default:throw Error(c(161))}}catch(ee){at(e,e.return,ee)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Uf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Uf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ns(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Mf(e,t.alternate,t),t=t.sibling}function cn(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Cs(4,t,t.return),cn(t);break;case 1:Ua(t,t.return);var s=t.stateNode;typeof s.componentWillUnmount=="function"&&Sf(t,t.return,s),cn(t);break;case 27:ni(t.stateNode);case 26:case 5:Ua(t,t.return),cn(t);break;case 22:t.memoizedState===null&&cn(t);break;case 30:cn(t);break;default:cn(t)}e=e.sibling}}function ls(e,t,s){for(s=s&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,r=e,d=t,m=d.flags;switch(d.tag){case 0:case 11:case 15:ls(r,d,s),Xl(4,d);break;case 1:if(ls(r,d,s),l=d,r=l.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(Y){at(l,l.return,Y)}if(l=d,r=l.updateQueue,r!==null){var b=l.stateNode;try{var k=r.shared.hiddenCallbacks;if(k!==null)for(r.shared.hiddenCallbacks=null,r=0;r<k.length;r++)mm(k[r],b)}catch(Y){at(l,l.return,Y)}}s&&m&64&&wf(d),Kl(d,d.return);break;case 27:Ef(d);case 26:case 5:ls(r,d,s),s&&l===null&&m&4&&Cf(d),Kl(d,d.return);break;case 12:ls(r,d,s);break;case 31:ls(r,d,s),s&&m&4&&Of(r,d);break;case 13:ls(r,d,s),s&&m&4&&Df(r,d);break;case 22:d.memoizedState===null&&ls(r,d,s),Kl(d,d.return);break;case 30:break;default:ls(r,d,s)}t=t.sibling}}function Rc(e,t){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&Rl(s))}function Uc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Rl(e))}function ka(e,t,s,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Lf(e,t,s,l),t=t.sibling}function Lf(e,t,s,l){var r=t.flags;switch(t.tag){case 0:case 11:case 15:ka(e,t,s,l),r&2048&&Xl(9,t);break;case 1:ka(e,t,s,l);break;case 3:ka(e,t,s,l),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Rl(e)));break;case 12:if(r&2048){ka(e,t,s,l),e=t.stateNode;try{var d=t.memoizedProps,m=d.id,b=d.onPostCommit;typeof b=="function"&&b(m,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(k){at(t,t.return,k)}}else ka(e,t,s,l);break;case 31:ka(e,t,s,l);break;case 13:ka(e,t,s,l);break;case 23:break;case 22:d=t.stateNode,m=t.alternate,t.memoizedState!==null?d._visibility&2?ka(e,t,s,l):Zl(e,t):d._visibility&2?ka(e,t,s,l):(d._visibility|=2,Wn(e,t,s,l,(t.subtreeFlags&10256)!==0||!1)),r&2048&&Rc(m,t);break;case 24:ka(e,t,s,l),r&2048&&Uc(t.alternate,t);break;default:ka(e,t,s,l)}}function Wn(e,t,s,l,r){for(r=r&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var d=e,m=t,b=s,k=l,Y=m.flags;switch(m.tag){case 0:case 11:case 15:Wn(d,m,b,k,r),Xl(8,m);break;case 23:break;case 22:var ee=m.stateNode;m.memoizedState!==null?ee._visibility&2?Wn(d,m,b,k,r):Zl(d,m):(ee._visibility|=2,Wn(d,m,b,k,r)),r&&Y&2048&&Rc(m.alternate,m);break;case 24:Wn(d,m,b,k,r),r&&Y&2048&&Uc(m.alternate,m);break;default:Wn(d,m,b,k,r)}t=t.sibling}}function Zl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var s=e,l=t,r=l.flags;switch(l.tag){case 22:Zl(s,l),r&2048&&Rc(l.alternate,l);break;case 24:Zl(s,l),r&2048&&Uc(l.alternate,l);break;default:Zl(s,l)}t=t.sibling}}var Pl=8192;function el(e,t,s){if(e.subtreeFlags&Pl)for(e=e.child;e!==null;)qf(e,t,s),e=e.sibling}function qf(e,t,s){switch(e.tag){case 26:el(e,t,s),e.flags&Pl&&e.memoizedState!==null&&lb(s,Ca,e.memoizedState,e.memoizedProps);break;case 5:el(e,t,s);break;case 3:case 4:var l=Ca;Ca=kr(e.stateNode.containerInfo),el(e,t,s),Ca=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Pl,Pl=16777216,el(e,t,s),Pl=l):el(e,t,s));break;default:el(e,t,s)}}function Bf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Jl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var l=t[s];Ut=l,Hf(l,e)}Bf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)If(e),e=e.sibling}function If(e){switch(e.tag){case 0:case 11:case 15:Jl(e),e.flags&2048&&Cs(9,e,e.return);break;case 3:Jl(e);break;case 12:Jl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,pr(e)):Jl(e);break;default:Jl(e)}}function pr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var l=t[s];Ut=l,Hf(l,e)}Bf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Cs(8,t,t.return),pr(t);break;case 22:s=t.stateNode,s._visibility&2&&(s._visibility&=-3,pr(t));break;default:pr(t)}e=e.sibling}}function Hf(e,t){for(;Ut!==null;){var s=Ut;switch(s.tag){case 0:case 11:case 15:Cs(8,s,t);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Rl(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,Ut=l;else e:for(s=e;Ut!==null;){l=Ut;var r=l.sibling,d=l.return;if(Af(l),l===s){Ut=null;break e}if(r!==null){r.return=d,Ut=r;break e}Ut=d}}}var v0={getCacheForType:function(e){var t=Ft(wt),s=t.data.get(e);return s===void 0&&(s=e(),t.data.set(e,s)),s},cacheSignal:function(){return Ft(wt).controller.signal}},j0=typeof WeakMap=="function"?WeakMap:Map,et=0,ct=null,Ie=null,Ye=0,tt=0,oa=null,ks=!1,tl=!1,Lc=!1,is=0,jt=0,Es=0,dn=0,qc=0,ca=0,al=0,Wl=null,ea=null,Bc=!1,hr=0,Ff=0,gr=1/0,xr=null,Ts=null,Ot=0,Ms=null,sl=null,rs=0,Ic=0,Hc=null,$f=null,ei=0,Fc=null;function da(){return(et&2)!==0&&Ye!==0?Ye&-Ye:_.T!==null?Xc():nu()}function Gf(){if(ca===0)if((Ye&536870912)===0||Qe){var e=Oa;Oa<<=1,(Oa&3932160)===0&&(Oa=262144),ca=e}else ca=536870912;return e=ia.current,e!==null&&(e.flags|=32),ca}function ta(e,t,s){(e===ct&&(tt===2||tt===9)||e.cancelPendingCommit!==null)&&(nl(e,0),As(e,Ye,ca,!1)),Yt(e,s),((et&2)===0||e!==ct)&&(e===ct&&((et&2)===0&&(dn|=s),jt===4&&As(e,Ye,ca,!1)),La(e))}function Yf(e,t,s){if((et&6)!==0)throw Error(c(327));var l=!s&&(t&127)===0&&(t&e.expiredLanes)===0||Oe(e,t),r=l?w0(e,t):Gc(e,t,!0),d=l;do{if(r===0){tl&&!l&&As(e,t,0,!1);break}else{if(s=e.current.alternate,d&&!_0(s)){r=Gc(e,t,!1),d=!1;continue}if(r===2){if(d=t,e.errorRecoveryDisabledLanes&d)var m=0;else m=e.pendingLanes&-536870913,m=m!==0?m:m&536870912?536870912:0;if(m!==0){t=m;e:{var b=e;r=Wl;var k=b.current.memoizedState.isDehydrated;if(k&&(nl(b,m).flags|=256),m=Gc(b,m,!1),m!==2){if(Lc&&!k){b.errorRecoveryDisabledLanes|=d,dn|=d,r=4;break e}d=ea,ea=r,d!==null&&(ea===null?ea=d:ea.push.apply(ea,d))}r=m}if(d=!1,r!==2)continue}}if(r===1){nl(e,0),As(e,t,0,!0);break}e:{switch(l=e,d=r,d){case 0:case 1:throw Error(c(345));case 4:if((t&4194048)!==t)break;case 6:As(l,t,ca,!ks);break e;case 2:ea=null;break;case 3:case 5:break;default:throw Error(c(329))}if((t&62914560)===t&&(r=hr+300-dt(),10<r)){if(As(l,t,ca,!ks),we(l,0,!0)!==0)break e;rs=t,l.timeoutHandle=_p(Vf.bind(null,l,s,ea,xr,Bc,t,ca,dn,al,ks,d,"Throttled",-0,0),r);break e}Vf(l,s,ea,xr,Bc,t,ca,dn,al,ks,d,null,-0,0)}}break}while(!0);La(e)}function Vf(e,t,s,l,r,d,m,b,k,Y,ee,ne,V,P){if(e.timeoutHandle=-1,ne=t.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Va},qf(t,d,ne);var je=(d&62914560)===d?hr-dt():(d&4194048)===d?Ff-dt():0;if(je=ib(ne,je),je!==null){rs=d,e.cancelPendingCommit=je(ep.bind(null,e,t,d,s,l,r,m,b,k,ee,ne,null,V,P)),As(e,d,m,!Y);return}}ep(e,t,d,s,l,r,m,b,k)}function _0(e){for(var t=e;;){var s=t.tag;if((s===0||s===11||s===15)&&t.flags&16384&&(s=t.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var r=s[l],d=r.getSnapshot;r=r.value;try{if(!na(d(),r))return!1}catch{return!1}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function As(e,t,s,l){t&=~qc,t&=~dn,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var r=t;0<r;){var d=31-$e(r),m=1<<d;l[d]=-1,r&=~m}s!==0&&Se(e,s,t)}function br(){return(et&6)===0?(ti(0),!1):!0}function $c(){if(Ie!==null){if(tt===0)var e=Ie.return;else e=Ie,Za=en=null,lc(e),Xn=null,Ll=0,e=Ie;for(;e!==null;)Nf(e.alternate,e),e=e.return;Ie=null}}function nl(e,t){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,F0(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),rs=0,$c(),ct=e,Ie=s=Xa(e.current,null),Ye=t,tt=0,oa=null,ks=!1,tl=Oe(e,t),Lc=!1,al=ca=qc=dn=Es=jt=0,ea=Wl=null,Bc=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var r=31-$e(l),d=1<<r;t|=e[r],l&=~d}return is=t,Bi(),s}function Qf(e,t){ze=null,_.H=Yl,t===Qn||t===Qi?(t=om(),tt=3):t===Qo?(t=om(),tt=4):tt=t===jc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,oa=t,Ie===null&&(jt=1,rr(e,pa(t,e.current)))}function Xf(){var e=ia.current;return e===null?!0:(Ye&4194048)===Ye?ba===null:(Ye&62914560)===Ye||(Ye&536870912)!==0?e===ba:!1}function Kf(){var e=_.H;return _.H=Yl,e===null?Yl:e}function Zf(){var e=_.A;return _.A=v0,e}function yr(){jt=4,ks||(Ye&4194048)!==Ye&&ia.current!==null||(tl=!0),(Es&134217727)===0&&(dn&134217727)===0||ct===null||As(ct,Ye,ca,!1)}function Gc(e,t,s){var l=et;et|=2;var r=Kf(),d=Zf();(ct!==e||Ye!==t)&&(xr=null,nl(e,t)),t=!1;var m=jt;e:do try{if(tt!==0&&Ie!==null){var b=Ie,k=oa;switch(tt){case 8:$c(),m=6;break e;case 3:case 2:case 9:case 6:ia.current===null&&(t=!0);var Y=tt;if(tt=0,oa=null,ll(e,b,k,Y),s&&tl){m=0;break e}break;default:Y=tt,tt=0,oa=null,ll(e,b,k,Y)}}N0(),m=jt;break}catch(ee){Qf(e,ee)}while(!0);return t&&e.shellSuspendCounter++,Za=en=null,et=l,_.H=r,_.A=d,Ie===null&&(ct=null,Ye=0,Bi()),m}function N0(){for(;Ie!==null;)Pf(Ie)}function w0(e,t){var s=et;et|=2;var l=Kf(),r=Zf();ct!==e||Ye!==t?(xr=null,gr=dt()+500,nl(e,t)):tl=Oe(e,t);e:do try{if(tt!==0&&Ie!==null){t=Ie;var d=oa;t:switch(tt){case 1:tt=0,oa=null,ll(e,t,d,1);break;case 2:case 9:if(im(d)){tt=0,oa=null,Jf(t);break}t=function(){tt!==2&&tt!==9||ct!==e||(tt=7),La(e)},d.then(t,t);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:im(d)?(tt=0,oa=null,Jf(t)):(tt=0,oa=null,ll(e,t,d,7));break;case 5:var m=null;switch(Ie.tag){case 26:m=Ie.memoizedState;case 5:case 27:var b=Ie;if(m?Lp(m):b.stateNode.complete){tt=0,oa=null;var k=b.sibling;if(k!==null)Ie=k;else{var Y=b.return;Y!==null?(Ie=Y,vr(Y)):Ie=null}break t}}tt=0,oa=null,ll(e,t,d,5);break;case 6:tt=0,oa=null,ll(e,t,d,6);break;case 8:$c(),jt=6;break e;default:throw Error(c(462))}}S0();break}catch(ee){Qf(e,ee)}while(!0);return Za=en=null,_.H=l,_.A=r,et=s,Ie!==null?0:(ct=null,Ye=0,Bi(),jt)}function S0(){for(;Ie!==null&&!At();)Pf(Ie)}function Pf(e){var t=jf(e.alternate,e,is);e.memoizedProps=e.pendingProps,t===null?vr(e):Ie=t}function Jf(e){var t=e,s=t.alternate;switch(t.tag){case 15:case 0:t=hf(s,t,t.pendingProps,t.type,void 0,Ye);break;case 11:t=hf(s,t,t.pendingProps,t.type.render,t.ref,Ye);break;case 5:lc(t);default:Nf(s,t),t=Ie=Ku(t,is),t=jf(s,t,is)}e.memoizedProps=e.pendingProps,t===null?vr(e):Ie=t}function ll(e,t,s,l){Za=en=null,lc(t),Xn=null,Ll=0;var r=t.return;try{if(f0(e,r,t,s,Ye)){jt=1,rr(e,pa(s,e.current)),Ie=null;return}}catch(d){if(r!==null)throw Ie=r,d;jt=1,rr(e,pa(s,e.current)),Ie=null;return}t.flags&32768?(Qe||l===1?e=!0:tl||(Ye&536870912)!==0?e=!1:(ks=e=!0,(l===2||l===9||l===3||l===6)&&(l=ia.current,l!==null&&l.tag===13&&(l.flags|=16384))),Wf(t,e)):vr(t)}function vr(e){var t=e;do{if((t.flags&32768)!==0){Wf(t,ks);return}e=t.return;var s=g0(t.alternate,t,is);if(s!==null){Ie=s;return}if(t=t.sibling,t!==null){Ie=t;return}Ie=t=e}while(t!==null);jt===0&&(jt=5)}function Wf(e,t){do{var s=x0(e.alternate,e);if(s!==null){s.flags&=32767,Ie=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!t&&(e=e.sibling,e!==null)){Ie=e;return}Ie=e=s}while(e!==null);jt=6,Ie=null}function ep(e,t,s,l,r,d,m,b,k){e.cancelPendingCommit=null;do jr();while(Ot!==0);if((et&6)!==0)throw Error(c(327));if(t!==null){if(t===e.current)throw Error(c(177));if(d=t.lanes|t.childLanes,d|=zo,Sn(e,s,d,m,b,k),e===ct&&(Ie=ct=null,Ye=0),sl=t,Ms=e,rs=s,Ic=d,Hc=r,$f=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,T0(wa,function(){return lp(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=_.T,_.T=null,r=E.p,E.p=2,m=et,et|=4;try{b0(e,t,s)}finally{et=m,E.p=r,_.T=l}}Ot=1,tp(),ap(),sp()}}function tp(){if(Ot===1){Ot=0;var e=Ms,t=sl,s=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||s){s=_.T,_.T=null;var l=E.p;E.p=2;var r=et;et|=4;try{Rf(t,e);var d=ad,m=Iu(e.containerInfo),b=d.focusedElem,k=d.selectionRange;if(m!==b&&b&&b.ownerDocument&&Bu(b.ownerDocument.documentElement,b)){if(k!==null&&ko(b)){var Y=k.start,ee=k.end;if(ee===void 0&&(ee=Y),"selectionStart"in b)b.selectionStart=Y,b.selectionEnd=Math.min(ee,b.value.length);else{var ne=b.ownerDocument||document,V=ne&&ne.defaultView||window;if(V.getSelection){var P=V.getSelection(),je=b.textContent.length,Ee=Math.min(k.start,je),it=k.end===void 0?Ee:Math.min(k.end,je);!P.extend&&Ee>it&&(m=it,it=Ee,Ee=m);var U=qu(b,Ee),O=qu(b,it);if(U&&O&&(P.rangeCount!==1||P.anchorNode!==U.node||P.anchorOffset!==U.offset||P.focusNode!==O.node||P.focusOffset!==O.offset)){var G=ne.createRange();G.setStart(U.node,U.offset),P.removeAllRanges(),Ee>it?(P.addRange(G),P.extend(O.node,O.offset)):(G.setEnd(O.node,O.offset),P.addRange(G))}}}}for(ne=[],P=b;P=P.parentNode;)P.nodeType===1&&ne.push({element:P,left:P.scrollLeft,top:P.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<ne.length;b++){var se=ne[b];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}Or=!!td,ad=td=null}finally{et=r,E.p=l,_.T=s}}e.current=t,Ot=2}}function ap(){if(Ot===2){Ot=0;var e=Ms,t=sl,s=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||s){s=_.T,_.T=null;var l=E.p;E.p=2;var r=et;et|=4;try{Mf(e,t.alternate,t)}finally{et=r,E.p=l,_.T=s}}Ot=3}}function sp(){if(Ot===4||Ot===3){Ot=0,gt();var e=Ms,t=sl,s=rs,l=$f;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Ot=5:(Ot=0,sl=Ms=null,np(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(Ts=null),Cn(s),t=t.stateNode,Fe&&typeof Fe.onCommitFiberRoot=="function")try{Fe.onCommitFiberRoot(Be,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=_.T,r=E.p,E.p=2,_.T=null;try{for(var d=e.onRecoverableError,m=0;m<l.length;m++){var b=l[m];d(b.value,{componentStack:b.stack})}}finally{_.T=t,E.p=r}}(rs&3)!==0&&jr(),La(e),r=e.pendingLanes,(s&261930)!==0&&(r&42)!==0?e===Fc?ei++:(ei=0,Fc=e):ei=0,ti(0)}}function np(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Rl(t)))}function jr(){return tp(),ap(),sp(),lp()}function lp(){if(Ot!==5)return!1;var e=Ms,t=Ic;Ic=0;var s=Cn(rs),l=_.T,r=E.p;try{E.p=32>s?32:s,_.T=null,s=Hc,Hc=null;var d=Ms,m=rs;if(Ot=0,sl=Ms=null,rs=0,(et&6)!==0)throw Error(c(331));var b=et;if(et|=4,If(d.current),Lf(d,d.current,m,s),et=b,ti(0,!1),Fe&&typeof Fe.onPostCommitFiberRoot=="function")try{Fe.onPostCommitFiberRoot(Be,d)}catch{}return!0}finally{E.p=r,_.T=l,np(e,t)}}function ip(e,t,s){t=pa(s,t),t=vc(e.stateNode,t,2),e=Ns(e,t,2),e!==null&&(Yt(e,2),La(e))}function at(e,t,s){if(e.tag===3)ip(e,e,s);else for(;t!==null;){if(t.tag===3){ip(t,e,s);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ts===null||!Ts.has(l))){e=pa(s,e),s=rf(2),l=Ns(t,s,2),l!==null&&(of(s,l,t,e),Yt(l,2),La(l));break}}t=t.return}}function Yc(e,t,s){var l=e.pingCache;if(l===null){l=e.pingCache=new j0;var r=new Set;l.set(t,r)}else r=l.get(t),r===void 0&&(r=new Set,l.set(t,r));r.has(s)||(Lc=!0,r.add(s),e=C0.bind(null,e,t,s),t.then(e,e))}function C0(e,t,s){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,ct===e&&(Ye&s)===s&&(jt===4||jt===3&&(Ye&62914560)===Ye&&300>dt()-hr?(et&2)===0&&nl(e,0):qc|=s,al===Ye&&(al=0)),La(e)}function rp(e,t){t===0&&(t=Pe()),e=Ps(e,t),e!==null&&(Yt(e,t),La(e))}function k0(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),rp(e,s)}function E0(e,t){var s=0;switch(e.tag){case 31:case 13:var l=e.stateNode,r=e.memoizedState;r!==null&&(s=r.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(c(314))}l!==null&&l.delete(t),rp(e,s)}function T0(e,t){return st(e,t)}var _r=null,il=null,Vc=!1,Nr=!1,Qc=!1,zs=0;function La(e){e!==il&&e.next===null&&(il===null?_r=il=e:il=il.next=e),Nr=!0,Vc||(Vc=!0,A0())}function ti(e,t){if(!Qc&&Nr){Qc=!0;do for(var s=!1,l=_r;l!==null;){if(e!==0){var r=l.pendingLanes;if(r===0)var d=0;else{var m=l.suspendedLanes,b=l.pingedLanes;d=(1<<31-$e(42|e)+1)-1,d&=r&~(m&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(s=!0,up(l,d))}else d=Ye,d=we(l,l===ct?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Oe(l,d)||(s=!0,up(l,d));l=l.next}while(s);Qc=!1}}function M0(){op()}function op(){Nr=Vc=!1;var e=0;zs!==0&&H0()&&(e=zs);for(var t=dt(),s=null,l=_r;l!==null;){var r=l.next,d=cp(l,t);d===0?(l.next=null,s===null?_r=r:s.next=r,r===null&&(il=s)):(s=l,(e!==0||(d&3)!==0)&&(Nr=!0)),l=r}Ot!==0&&Ot!==5||ti(e),zs!==0&&(zs=0)}function cp(e,t){for(var s=e.suspendedLanes,l=e.pingedLanes,r=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var m=31-$e(d),b=1<<m,k=r[m];k===-1?((b&s)===0||(b&l)!==0)&&(r[m]=Ze(b,t)):k<=t&&(e.expiredLanes|=b),d&=~b}if(t=ct,s=Ye,s=we(e,e===t?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,s===0||e===t&&(tt===2||tt===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&rt(l),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||Oe(e,s)){if(t=s&-s,t===e.callbackPriority)return t;switch(l!==null&&rt(l),Cn(s)){case 2:case 8:s=sa;break;case 32:s=wa;break;case 268435456:s=pe;break;default:s=wa}return l=dp.bind(null,e),s=st(s,l),e.callbackPriority=t,e.callbackNode=s,t}return l!==null&&l!==null&&rt(l),e.callbackPriority=2,e.callbackNode=null,2}function dp(e,t){if(Ot!==0&&Ot!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(jr()&&e.callbackNode!==s)return null;var l=Ye;return l=we(e,e===ct?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Yf(e,l,t),cp(e,dt()),e.callbackNode!=null&&e.callbackNode===s?dp.bind(null,e):null)}function up(e,t){if(jr())return null;Yf(e,t,!0)}function A0(){$0(function(){(et&6)!==0?st(ut,M0):op()})}function Xc(){if(zs===0){var e=Yn;e===0&&(e=Ga,Ga<<=1,(Ga&261888)===0&&(Ga=256)),zs=e}return zs}function mp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ai(""+e)}function fp(e,t){var s=t.ownerDocument.createElement("input");return s.name=t.name,s.value=t.value,e.id&&s.setAttribute("form",e.id),t.parentNode.insertBefore(s,t),e=new FormData(e),s.parentNode.removeChild(s),e}function z0(e,t,s,l,r){if(t==="submit"&&s&&s.stateNode===r){var d=mp((r[Kt]||null).action),m=l.submitter;m&&(t=(t=m[Kt]||null)?mp(t.formAction):m.getAttribute("formAction"),t!==null&&(d=t,m=null));var b=new Ri("action","action",null,l,r);e.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(zs!==0){var k=m?fp(r,m):new FormData(r);pc(s,{pending:!0,data:k,method:r.method,action:d},null,k)}}else typeof d=="function"&&(b.preventDefault(),k=m?fp(r,m):new FormData(r),pc(s,{pending:!0,data:k,method:r.method,action:d},d,k))},currentTarget:r}]})}}for(var Kc=0;Kc<Ao.length;Kc++){var Zc=Ao[Kc],O0=Zc.toLowerCase(),D0=Zc[0].toUpperCase()+Zc.slice(1);Sa(O0,"on"+D0)}Sa($u,"onAnimationEnd"),Sa(Gu,"onAnimationIteration"),Sa(Yu,"onAnimationStart"),Sa("dblclick","onDoubleClick"),Sa("focusin","onFocus"),Sa("focusout","onBlur"),Sa(Zx,"onTransitionRun"),Sa(Px,"onTransitionStart"),Sa(Jx,"onTransitionCancel"),Sa(Vu,"onTransitionEnd"),An("onMouseEnter",["mouseout","mouseover"]),An("onMouseLeave",["mouseout","mouseover"]),An("onPointerEnter",["pointerout","pointerover"]),An("onPointerLeave",["pointerout","pointerover"]),Qs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ai="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),R0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ai));function pp(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var l=e[s],r=l.event;l=l.listeners;e:{var d=void 0;if(t)for(var m=l.length-1;0<=m;m--){var b=l[m],k=b.instance,Y=b.currentTarget;if(b=b.listener,k!==d&&r.isPropagationStopped())break e;d=b,r.currentTarget=Y;try{d(r)}catch(ee){qi(ee)}r.currentTarget=null,d=k}else for(m=0;m<l.length;m++){if(b=l[m],k=b.instance,Y=b.currentTarget,b=b.listener,k!==d&&r.isPropagationStopped())break e;d=b,r.currentTarget=Y;try{d(r)}catch(ee){qi(ee)}r.currentTarget=null,d=k}}}}function He(e,t){var s=t[oo];s===void 0&&(s=t[oo]=new Set);var l=e+"__bubble";s.has(l)||(hp(t,e,2,!1),s.add(l))}function Pc(e,t,s){var l=0;t&&(l|=4),hp(s,e,l,t)}var wr="_reactListening"+Math.random().toString(36).slice(2);function Jc(e){if(!e[wr]){e[wr]=!0,ru.forEach(function(s){s!=="selectionchange"&&(R0.has(s)||Pc(s,!1,e),Pc(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[wr]||(t[wr]=!0,Pc("selectionchange",!1,t))}}function hp(e,t,s,l){switch(Gp(t)){case 2:var r=cb;break;case 8:r=db;break;default:r=fd}s=r.bind(null,t,s,e),r=void 0,!bo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),l?r!==void 0?e.addEventListener(t,s,{capture:!0,passive:r}):e.addEventListener(t,s,!0):r!==void 0?e.addEventListener(t,s,{passive:r}):e.addEventListener(t,s,!1)}function Wc(e,t,s,l,r){var d=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var m=l.tag;if(m===3||m===4){var b=l.stateNode.containerInfo;if(b===r)break;if(m===4)for(m=l.return;m!==null;){var k=m.tag;if((k===3||k===4)&&m.stateNode.containerInfo===r)return;m=m.return}for(;b!==null;){if(m=En(b),m===null)return;if(k=m.tag,k===5||k===6||k===26||k===27){l=d=m;continue e}b=b.parentNode}}l=l.return}yu(function(){var Y=d,ee=go(s),ne=[];e:{var V=Qu.get(e);if(V!==void 0){var P=Ri,je=e;switch(e){case"keypress":if(Oi(s)===0)break e;case"keydown":case"keyup":P=Ex;break;case"focusin":je="focus",P=_o;break;case"focusout":je="blur",P=_o;break;case"beforeblur":case"afterblur":P=_o;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=_u;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=gx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=Ax;break;case $u:case Gu:case Yu:P=yx;break;case Vu:P=Ox;break;case"scroll":case"scrollend":P=px;break;case"wheel":P=Rx;break;case"copy":case"cut":case"paste":P=jx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=wu;break;case"toggle":case"beforetoggle":P=Lx}var Ee=(t&4)!==0,it=!Ee&&(e==="scroll"||e==="scrollend"),U=Ee?V!==null?V+"Capture":null:V;Ee=[];for(var O=Y,G;O!==null;){var se=O;if(G=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||G===null||U===null||(se=wl(O,U),se!=null&&Ee.push(si(O,se,G))),it)break;O=O.return}0<Ee.length&&(V=new P(V,je,null,s,ee),ne.push({event:V,listeners:Ee}))}}if((t&7)===0){e:{if(V=e==="mouseover"||e==="pointerover",P=e==="mouseout"||e==="pointerout",V&&s!==ho&&(je=s.relatedTarget||s.fromElement)&&(En(je)||je[kn]))break e;if((P||V)&&(V=ee.window===ee?ee:(V=ee.ownerDocument)?V.defaultView||V.parentWindow:window,P?(je=s.relatedTarget||s.toElement,P=Y,je=je?En(je):null,je!==null&&(it=f(je),Ee=je.tag,je!==it||Ee!==5&&Ee!==27&&Ee!==6)&&(je=null)):(P=null,je=Y),P!==je)){if(Ee=_u,se="onMouseLeave",U="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(Ee=wu,se="onPointerLeave",U="onPointerEnter",O="pointer"),it=P==null?V:Nl(P),G=je==null?V:Nl(je),V=new Ee(se,O+"leave",P,s,ee),V.target=it,V.relatedTarget=G,se=null,En(ee)===Y&&(Ee=new Ee(U,O+"enter",je,s,ee),Ee.target=G,Ee.relatedTarget=it,se=Ee),it=se,P&&je)t:{for(Ee=U0,U=P,O=je,G=0,se=U;se;se=Ee(se))G++;se=0;for(var Ce=O;Ce;Ce=Ee(Ce))se++;for(;0<G-se;)U=Ee(U),G--;for(;0<se-G;)O=Ee(O),se--;for(;G--;){if(U===O||O!==null&&U===O.alternate){Ee=U;break t}U=Ee(U),O=Ee(O)}Ee=null}else Ee=null;P!==null&&gp(ne,V,P,Ee,!1),je!==null&&it!==null&&gp(ne,it,je,Ee,!0)}}e:{if(V=Y?Nl(Y):window,P=V.nodeName&&V.nodeName.toLowerCase(),P==="select"||P==="input"&&V.type==="file")var Je=zu;else if(Mu(V))if(Ou)Je=Qx;else{Je=Yx;var Ne=Gx}else P=V.nodeName,!P||P.toLowerCase()!=="input"||V.type!=="checkbox"&&V.type!=="radio"?Y&&po(Y.elementType)&&(Je=zu):Je=Vx;if(Je&&(Je=Je(e,Y))){Au(ne,Je,s,ee);break e}Ne&&Ne(e,V,Y),e==="focusout"&&Y&&V.type==="number"&&Y.memoizedProps.value!=null&&fo(V,"number",V.value)}switch(Ne=Y?Nl(Y):window,e){case"focusin":(Mu(Ne)||Ne.contentEditable==="true")&&(Ln=Ne,Eo=Y,zl=null);break;case"focusout":zl=Eo=Ln=null;break;case"mousedown":To=!0;break;case"contextmenu":case"mouseup":case"dragend":To=!1,Hu(ne,s,ee);break;case"selectionchange":if(Kx)break;case"keydown":case"keyup":Hu(ne,s,ee)}var De;if(wo)e:{switch(e){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else Un?Eu(e,s)&&(Ve="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Ve="onCompositionStart");Ve&&(Su&&s.locale!=="ko"&&(Un||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&Un&&(De=vu()):(gs=ee,yo="value"in gs?gs.value:gs.textContent,Un=!0)),Ne=Sr(Y,Ve),0<Ne.length&&(Ve=new Nu(Ve,e,null,s,ee),ne.push({event:Ve,listeners:Ne}),De?Ve.data=De:(De=Tu(s),De!==null&&(Ve.data=De)))),(De=Bx?Ix(e,s):Hx(e,s))&&(Ve=Sr(Y,"onBeforeInput"),0<Ve.length&&(Ne=new Nu("onBeforeInput","beforeinput",null,s,ee),ne.push({event:Ne,listeners:Ve}),Ne.data=De)),z0(ne,e,Y,s,ee)}pp(ne,t)})}function si(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Sr(e,t){for(var s=t+"Capture",l=[];e!==null;){var r=e,d=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||d===null||(r=wl(e,s),r!=null&&l.unshift(si(e,r,d)),r=wl(e,t),r!=null&&l.push(si(e,r,d))),e.tag===3)return l;e=e.return}return[]}function U0(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function gp(e,t,s,l,r){for(var d=t._reactName,m=[];s!==null&&s!==l;){var b=s,k=b.alternate,Y=b.stateNode;if(b=b.tag,k!==null&&k===l)break;b!==5&&b!==26&&b!==27||Y===null||(k=Y,r?(Y=wl(s,d),Y!=null&&m.unshift(si(s,Y,k))):r||(Y=wl(s,d),Y!=null&&m.push(si(s,Y,k)))),s=s.return}m.length!==0&&e.push({event:t,listeners:m})}var L0=/\r\n?/g,q0=/ |�/g;function xp(e){return(typeof e=="string"?e:""+e).replace(L0,`
`).replace(q0,"")}function bp(e,t){return t=xp(t),xp(e)===t}function lt(e,t,s,l,r,d){switch(s){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||On(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&On(e,""+l);break;case"className":Ti(e,"class",l);break;case"tabIndex":Ti(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Ti(e,s,l);break;case"style":xu(e,l,d);break;case"data":if(t!=="object"){Ti(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||s!=="href")){e.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(s);break}l=Ai(""+l),e.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(s==="formAction"?(t!=="input"&&lt(e,t,"name",r.name,r,null),lt(e,t,"formEncType",r.formEncType,r,null),lt(e,t,"formMethod",r.formMethod,r,null),lt(e,t,"formTarget",r.formTarget,r,null)):(lt(e,t,"encType",r.encType,r,null),lt(e,t,"method",r.method,r,null),lt(e,t,"target",r.target,r,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(s);break}l=Ai(""+l),e.setAttribute(s,l);break;case"onClick":l!=null&&(e.onclick=Va);break;case"onScroll":l!=null&&He("scroll",e);break;case"onScrollEnd":l!=null&&He("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(c(61));if(s=l.__html,s!=null){if(r.children!=null)throw Error(c(60));e.innerHTML=s}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}s=Ai(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,""+l):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":l===!0?e.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,l):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(s,l):e.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(s):e.setAttribute(s,l);break;case"popover":He("beforetoggle",e),He("toggle",e),Ei(e,"popover",l);break;case"xlinkActuate":Ya(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ya(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ya(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ya(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ya(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ya(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ya(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ya(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ya(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ei(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=mx.get(s)||s,Ei(e,s,l))}}function ed(e,t,s,l,r,d){switch(s){case"style":xu(e,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(c(61));if(s=l.__html,s!=null){if(r.children!=null)throw Error(c(60));e.innerHTML=s}}break;case"children":typeof l=="string"?On(e,l):(typeof l=="number"||typeof l=="bigint")&&On(e,""+l);break;case"onScroll":l!=null&&He("scroll",e);break;case"onScrollEnd":l!=null&&He("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Va);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ou.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(r=s.endsWith("Capture"),t=s.slice(2,r?s.length-7:void 0),d=e[Kt]||null,d=d!=null?d[s]:null,typeof d=="function"&&e.removeEventListener(t,d,r),typeof l=="function")){typeof d!="function"&&d!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(t,l,r);break e}s in e?e[s]=l:l===!0?e.setAttribute(s,""):Ei(e,s,l)}}}function Gt(e,t,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",e),He("load",e);var l=!1,r=!1,d;for(d in s)if(s.hasOwnProperty(d)){var m=s[d];if(m!=null)switch(d){case"src":l=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:lt(e,t,d,m,s,null)}}r&&lt(e,t,"srcSet",s.srcSet,s,null),l&&lt(e,t,"src",s.src,s,null);return;case"input":He("invalid",e);var b=d=m=r=null,k=null,Y=null;for(l in s)if(s.hasOwnProperty(l)){var ee=s[l];if(ee!=null)switch(l){case"name":r=ee;break;case"type":m=ee;break;case"checked":k=ee;break;case"defaultChecked":Y=ee;break;case"value":d=ee;break;case"defaultValue":b=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(c(137,t));break;default:lt(e,t,l,ee,s,null)}}fu(e,d,b,k,Y,m,r,!1);return;case"select":He("invalid",e),l=m=d=null;for(r in s)if(s.hasOwnProperty(r)&&(b=s[r],b!=null))switch(r){case"value":d=b;break;case"defaultValue":m=b;break;case"multiple":l=b;default:lt(e,t,r,b,s,null)}t=d,s=m,e.multiple=!!l,t!=null?zn(e,!!l,t,!1):s!=null&&zn(e,!!l,s,!0);return;case"textarea":He("invalid",e),d=r=l=null;for(m in s)if(s.hasOwnProperty(m)&&(b=s[m],b!=null))switch(m){case"value":l=b;break;case"defaultValue":r=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(c(91));break;default:lt(e,t,m,b,s,null)}hu(e,l,r,d);return;case"option":for(k in s)if(s.hasOwnProperty(k)&&(l=s[k],l!=null))switch(k){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:lt(e,t,k,l,s,null)}return;case"dialog":He("beforetoggle",e),He("toggle",e),He("cancel",e),He("close",e);break;case"iframe":case"object":He("load",e);break;case"video":case"audio":for(l=0;l<ai.length;l++)He(ai[l],e);break;case"image":He("error",e),He("load",e);break;case"details":He("toggle",e);break;case"embed":case"source":case"link":He("error",e),He("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in s)if(s.hasOwnProperty(Y)&&(l=s[Y],l!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:lt(e,t,Y,l,s,null)}return;default:if(po(t)){for(ee in s)s.hasOwnProperty(ee)&&(l=s[ee],l!==void 0&&ed(e,t,ee,l,s,void 0));return}}for(b in s)s.hasOwnProperty(b)&&(l=s[b],l!=null&&lt(e,t,b,l,s,null))}function B0(e,t,s,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,d=null,m=null,b=null,k=null,Y=null,ee=null;for(P in s){var ne=s[P];if(s.hasOwnProperty(P)&&ne!=null)switch(P){case"checked":break;case"value":break;case"defaultValue":k=ne;default:l.hasOwnProperty(P)||lt(e,t,P,null,l,ne)}}for(var V in l){var P=l[V];if(ne=s[V],l.hasOwnProperty(V)&&(P!=null||ne!=null))switch(V){case"type":d=P;break;case"name":r=P;break;case"checked":Y=P;break;case"defaultChecked":ee=P;break;case"value":m=P;break;case"defaultValue":b=P;break;case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(c(137,t));break;default:P!==ne&&lt(e,t,V,P,l,ne)}}mo(e,m,b,k,Y,ee,d,r);return;case"select":P=m=b=V=null;for(d in s)if(k=s[d],s.hasOwnProperty(d)&&k!=null)switch(d){case"value":break;case"multiple":P=k;default:l.hasOwnProperty(d)||lt(e,t,d,null,l,k)}for(r in l)if(d=l[r],k=s[r],l.hasOwnProperty(r)&&(d!=null||k!=null))switch(r){case"value":V=d;break;case"defaultValue":b=d;break;case"multiple":m=d;default:d!==k&&lt(e,t,r,d,l,k)}t=b,s=m,l=P,V!=null?zn(e,!!s,V,!1):!!l!=!!s&&(t!=null?zn(e,!!s,t,!0):zn(e,!!s,s?[]:"",!1));return;case"textarea":P=V=null;for(b in s)if(r=s[b],s.hasOwnProperty(b)&&r!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:lt(e,t,b,null,l,r)}for(m in l)if(r=l[m],d=s[m],l.hasOwnProperty(m)&&(r!=null||d!=null))switch(m){case"value":V=r;break;case"defaultValue":P=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(c(91));break;default:r!==d&&lt(e,t,m,r,l,d)}pu(e,V,P);return;case"option":for(var je in s)if(V=s[je],s.hasOwnProperty(je)&&V!=null&&!l.hasOwnProperty(je))switch(je){case"selected":e.selected=!1;break;default:lt(e,t,je,null,l,V)}for(k in l)if(V=l[k],P=s[k],l.hasOwnProperty(k)&&V!==P&&(V!=null||P!=null))switch(k){case"selected":e.selected=V&&typeof V!="function"&&typeof V!="symbol";break;default:lt(e,t,k,V,l,P)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in s)V=s[Ee],s.hasOwnProperty(Ee)&&V!=null&&!l.hasOwnProperty(Ee)&&lt(e,t,Ee,null,l,V);for(Y in l)if(V=l[Y],P=s[Y],l.hasOwnProperty(Y)&&V!==P&&(V!=null||P!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(c(137,t));break;default:lt(e,t,Y,V,l,P)}return;default:if(po(t)){for(var it in s)V=s[it],s.hasOwnProperty(it)&&V!==void 0&&!l.hasOwnProperty(it)&&ed(e,t,it,void 0,l,V);for(ee in l)V=l[ee],P=s[ee],!l.hasOwnProperty(ee)||V===P||V===void 0&&P===void 0||ed(e,t,ee,V,l,P);return}}for(var U in s)V=s[U],s.hasOwnProperty(U)&&V!=null&&!l.hasOwnProperty(U)&&lt(e,t,U,null,l,V);for(ne in l)V=l[ne],P=s[ne],!l.hasOwnProperty(ne)||V===P||V==null&&P==null||lt(e,t,ne,V,l,P)}function yp(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function I0(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,s=performance.getEntriesByType("resource"),l=0;l<s.length;l++){var r=s[l],d=r.transferSize,m=r.initiatorType,b=r.duration;if(d&&b&&yp(m)){for(m=0,b=r.responseEnd,l+=1;l<s.length;l++){var k=s[l],Y=k.startTime;if(Y>b)break;var ee=k.transferSize,ne=k.initiatorType;ee&&yp(ne)&&(k=k.responseEnd,m+=ee*(k<b?1:(b-Y)/(k-Y)))}if(--l,t+=8*(d+m)/(r.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var td=null,ad=null;function Cr(e){return e.nodeType===9?e:e.ownerDocument}function vp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jp(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function sd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var nd=null;function H0(){var e=window.event;return e&&e.type==="popstate"?e===nd?!1:(nd=e,!0):(nd=null,!1)}var _p=typeof setTimeout=="function"?setTimeout:void 0,F0=typeof clearTimeout=="function"?clearTimeout:void 0,Np=typeof Promise=="function"?Promise:void 0,$0=typeof queueMicrotask=="function"?queueMicrotask:typeof Np<"u"?function(e){return Np.resolve(null).then(e).catch(G0)}:_p;function G0(e){setTimeout(function(){throw e})}function Os(e){return e==="head"}function wp(e,t){var s=t,l=0;do{var r=s.nextSibling;if(e.removeChild(s),r&&r.nodeType===8)if(s=r.data,s==="/$"||s==="/&"){if(l===0){e.removeChild(r),dl(t);return}l--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")l++;else if(s==="html")ni(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,ni(s);for(var d=s.firstChild;d;){var m=d.nextSibling,b=d.nodeName;d[_l]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&d.rel.toLowerCase()==="stylesheet"||s.removeChild(d),d=m}}else s==="body"&&ni(e.ownerDocument.body);s=r}while(s);dl(t)}function Sp(e,t){var s=e;e=0;do{var l=s.nextSibling;if(s.nodeType===1?t?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(t?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),l&&l.nodeType===8)if(s=l.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=l}while(s)}function ld(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var s=t;switch(t=t.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":ld(s),co(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function Y0(e,t,s,l){for(;e.nodeType===1;){var r=s;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[_l])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var d=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=ya(e.nextSibling),e===null)break}return null}function V0(e,t,s){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=ya(e.nextSibling),e===null))return null;return e}function Cp(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=ya(e.nextSibling),e===null))return null;return e}function id(e){return e.data==="$?"||e.data==="$~"}function rd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Q0(e,t){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||s.readyState!=="loading")t();else{var l=function(){t(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function ya(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var od=null;function kp(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(t===0)return ya(e.nextSibling);t--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||t++}e=e.nextSibling}return null}function Ep(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(t===0)return e;t--}else s!=="/$"&&s!=="/&"||t++}e=e.previousSibling}return null}function Tp(e,t,s){switch(t=Cr(s),e){case"html":if(e=t.documentElement,!e)throw Error(c(452));return e;case"head":if(e=t.head,!e)throw Error(c(453));return e;case"body":if(e=t.body,!e)throw Error(c(454));return e;default:throw Error(c(451))}}function ni(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);co(e)}var va=new Map,Mp=new Set;function kr(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var os=E.d;E.d={f:X0,r:K0,D:Z0,C:P0,L:J0,m:W0,X:tb,S:eb,M:ab};function X0(){var e=os.f(),t=br();return e||t}function K0(e){var t=Tn(e);t!==null&&t.tag===5&&t.type==="form"?Vm(t):os.r(e)}var rl=typeof document>"u"?null:document;function Ap(e,t,s){var l=rl;if(l&&typeof t=="string"&&t){var r=ma(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof s=="string"&&(r+='[crossorigin="'+s+'"]'),Mp.has(r)||(Mp.add(r),e={rel:e,crossOrigin:s,href:t},l.querySelector(r)===null&&(t=l.createElement("link"),Gt(t,"link",e),Rt(t),l.head.appendChild(t)))}}function Z0(e){os.D(e),Ap("dns-prefetch",e,null)}function P0(e,t){os.C(e,t),Ap("preconnect",e,t)}function J0(e,t,s){os.L(e,t,s);var l=rl;if(l&&e&&t){var r='link[rel="preload"][as="'+ma(t)+'"]';t==="image"&&s&&s.imageSrcSet?(r+='[imagesrcset="'+ma(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(r+='[imagesizes="'+ma(s.imageSizes)+'"]')):r+='[href="'+ma(e)+'"]';var d=r;switch(t){case"style":d=ol(e);break;case"script":d=cl(e)}va.has(d)||(e=N({rel:"preload",href:t==="image"&&s&&s.imageSrcSet?void 0:e,as:t},s),va.set(d,e),l.querySelector(r)!==null||t==="style"&&l.querySelector(li(d))||t==="script"&&l.querySelector(ii(d))||(t=l.createElement("link"),Gt(t,"link",e),Rt(t),l.head.appendChild(t)))}}function W0(e,t){os.m(e,t);var s=rl;if(s&&e){var l=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+ma(l)+'"][href="'+ma(e)+'"]',d=r;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=cl(e)}if(!va.has(d)&&(e=N({rel:"modulepreload",href:e},t),va.set(d,e),s.querySelector(r)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(ii(d)))return}l=s.createElement("link"),Gt(l,"link",e),Rt(l),s.head.appendChild(l)}}}function eb(e,t,s){os.S(e,t,s);var l=rl;if(l&&e){var r=Mn(l).hoistableStyles,d=ol(e);t=t||"default";var m=r.get(d);if(!m){var b={loading:0,preload:null};if(m=l.querySelector(li(d)))b.loading=5;else{e=N({rel:"stylesheet",href:e,"data-precedence":t},s),(s=va.get(d))&&cd(e,s);var k=m=l.createElement("link");Rt(k),Gt(k,"link",e),k._p=new Promise(function(Y,ee){k.onload=Y,k.onerror=ee}),k.addEventListener("load",function(){b.loading|=1}),k.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Er(m,t,l)}m={type:"stylesheet",instance:m,count:1,state:b},r.set(d,m)}}}function tb(e,t){os.X(e,t);var s=rl;if(s&&e){var l=Mn(s).hoistableScripts,r=cl(e),d=l.get(r);d||(d=s.querySelector(ii(r)),d||(e=N({src:e,async:!0},t),(t=va.get(r))&&dd(e,t),d=s.createElement("script"),Rt(d),Gt(d,"link",e),s.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(r,d))}}function ab(e,t){os.M(e,t);var s=rl;if(s&&e){var l=Mn(s).hoistableScripts,r=cl(e),d=l.get(r);d||(d=s.querySelector(ii(r)),d||(e=N({src:e,async:!0,type:"module"},t),(t=va.get(r))&&dd(e,t),d=s.createElement("script"),Rt(d),Gt(d,"link",e),s.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(r,d))}}function zp(e,t,s,l){var r=(r=ge.current)?kr(r):null;if(!r)throw Error(c(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(t=ol(s.href),s=Mn(r).hoistableStyles,l=s.get(t),l||(l={type:"style",instance:null,count:0,state:null},s.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=ol(s.href);var d=Mn(r).hoistableStyles,m=d.get(e);if(m||(r=r.ownerDocument||r,m={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,m),(d=r.querySelector(li(e)))&&!d._p&&(m.instance=d,m.state.loading=5),va.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},va.set(e,s),d||sb(r,e,s,m.state))),t&&l===null)throw Error(c(528,""));return m}if(t&&l!==null)throw Error(c(529,""));return null;case"script":return t=s.async,s=s.src,typeof s=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=cl(s),s=Mn(r).hoistableScripts,l=s.get(t),l||(l={type:"script",instance:null,count:0,state:null},s.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(c(444,e))}}function ol(e){return'href="'+ma(e)+'"'}function li(e){return'link[rel="stylesheet"]['+e+"]"}function Op(e){return N({},e,{"data-precedence":e.precedence,precedence:null})}function sb(e,t,s,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),Gt(t,"link",s),Rt(t),e.head.appendChild(t))}function cl(e){return'[src="'+ma(e)+'"]'}function ii(e){return"script[async]"+e}function Dp(e,t,s){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+ma(s.href)+'"]');if(l)return t.instance=l,Rt(l),l;var r=N({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Rt(l),Gt(l,"style",r),Er(l,s.precedence,e),t.instance=l;case"stylesheet":r=ol(s.href);var d=e.querySelector(li(r));if(d)return t.state.loading|=4,t.instance=d,Rt(d),d;l=Op(s),(r=va.get(r))&&cd(l,r),d=(e.ownerDocument||e).createElement("link"),Rt(d);var m=d;return m._p=new Promise(function(b,k){m.onload=b,m.onerror=k}),Gt(d,"link",l),t.state.loading|=4,Er(d,s.precedence,e),t.instance=d;case"script":return d=cl(s.src),(r=e.querySelector(ii(d)))?(t.instance=r,Rt(r),r):(l=s,(r=va.get(d))&&(l=N({},s),dd(l,r)),e=e.ownerDocument||e,r=e.createElement("script"),Rt(r),Gt(r,"link",l),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(c(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,Er(l,s.precedence,e));return t.instance}function Er(e,t,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=l.length?l[l.length-1]:null,d=r,m=0;m<l.length;m++){var b=l[m];if(b.dataset.precedence===t)d=b;else if(d!==r)break}d?d.parentNode.insertBefore(e,d.nextSibling):(t=s.nodeType===9?s.head:s,t.insertBefore(e,t.firstChild))}function cd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function dd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Tr=null;function Rp(e,t,s){if(Tr===null){var l=new Map,r=Tr=new Map;r.set(s,l)}else r=Tr,l=r.get(s),l||(l=new Map,r.set(s,l));if(l.has(e))return l;for(l.set(e,null),s=s.getElementsByTagName(e),r=0;r<s.length;r++){var d=s[r];if(!(d[_l]||d[It]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var m=d.getAttribute(t)||"";m=e+m;var b=l.get(m);b?b.push(d):l.set(m,[d])}}return l}function Up(e,t,s){e=e.ownerDocument||e,e.head.insertBefore(s,t==="title"?e.querySelector("head > title"):null)}function nb(e,t,s){if(s===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Lp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function lb(e,t,s,l){if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var r=ol(l.href),d=t.querySelector(li(r));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Mr.bind(e),t.then(e,e)),s.state.loading|=4,s.instance=d,Rt(d);return}d=t.ownerDocument||t,l=Op(l),(r=va.get(r))&&cd(l,r),d=d.createElement("link"),Rt(d);var m=d;m._p=new Promise(function(b,k){m.onload=b,m.onerror=k}),Gt(d,"link",l),s.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,t),(t=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=Mr.bind(e),t.addEventListener("load",s),t.addEventListener("error",s))}}var ud=0;function ib(e,t){return e.stylesheets&&e.count===0&&zr(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var l=setTimeout(function(){if(e.stylesheets&&zr(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+t);0<e.imgBytes&&ud===0&&(ud=62500*I0());var r=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&zr(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>ud?50:800)+t);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(r)}}:null}function Mr(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)zr(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ar=null;function zr(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ar=new Map,t.forEach(rb,e),Ar=null,Mr.call(e))}function rb(e,t){if(!(t.state.loading&4)){var s=Ar.get(e);if(s)var l=s.get(null);else{s=new Map,Ar.set(e,s);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<r.length;d++){var m=r[d];(m.nodeName==="LINK"||m.getAttribute("media")!=="not all")&&(s.set(m.dataset.precedence,m),l=m)}l&&s.set(null,l)}r=t.instance,m=r.getAttribute("data-precedence"),d=s.get(m)||l,d===l&&s.set(null,r),s.set(m,r),this.count++,l=Mr.bind(this),r.addEventListener("load",l),r.addEventListener("error",l),d?d.parentNode.insertBefore(r,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var ri={$$typeof:X,Provider:null,Consumer:null,_currentValue:z,_currentValue2:z,_threadCount:0};function ob(e,t,s,l,r,d,m,b,k){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Dt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dt(0),this.hiddenUpdates=Dt(null),this.identifierPrefix=l,this.onUncaughtError=r,this.onCaughtError=d,this.onRecoverableError=m,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function qp(e,t,s,l,r,d,m,b,k,Y,ee,ne){return e=new ob(e,t,s,m,k,Y,ee,ne,b),t=1,d===!0&&(t|=24),d=la(3,null,null,t),e.current=d,d.stateNode=e,t=Go(),t.refCount++,e.pooledCache=t,t.refCount++,d.memoizedState={element:l,isDehydrated:s,cache:t},Xo(d),e}function Bp(e){return e?(e=In,e):In}function Ip(e,t,s,l,r,d){r=Bp(r),l.context===null?l.context=r:l.pendingContext=r,l=_s(t),l.payload={element:s},d=d===void 0?null:d,d!==null&&(l.callback=d),s=Ns(e,l,t),s!==null&&(ta(s,e,t),Bl(s,e,t))}function Hp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function md(e,t){Hp(e,t),(e=e.alternate)&&Hp(e,t)}function Fp(e){if(e.tag===13||e.tag===31){var t=Ps(e,67108864);t!==null&&ta(t,e,67108864),md(e,67108864)}}function $p(e){if(e.tag===13||e.tag===31){var t=da();t=Bt(t);var s=Ps(e,t);s!==null&&ta(s,e,t),md(e,t)}}var Or=!0;function cb(e,t,s,l){var r=_.T;_.T=null;var d=E.p;try{E.p=2,fd(e,t,s,l)}finally{E.p=d,_.T=r}}function db(e,t,s,l){var r=_.T;_.T=null;var d=E.p;try{E.p=8,fd(e,t,s,l)}finally{E.p=d,_.T=r}}function fd(e,t,s,l){if(Or){var r=pd(l);if(r===null)Wc(e,t,l,Dr,s),Yp(e,l);else if(mb(r,e,t,s,l))l.stopPropagation();else if(Yp(e,l),t&4&&-1<ub.indexOf(e)){for(;r!==null;){var d=Tn(r);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var m=ie(d.pendingLanes);if(m!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;m;){var k=1<<31-$e(m);b.entanglements[1]|=k,m&=~k}La(d),(et&6)===0&&(gr=dt()+500,ti(0))}}break;case 31:case 13:b=Ps(d,2),b!==null&&ta(b,d,2),br(),md(d,2)}if(d=pd(l),d===null&&Wc(e,t,l,Dr,s),d===r)break;r=d}r!==null&&l.stopPropagation()}else Wc(e,t,l,null,s)}}function pd(e){return e=go(e),hd(e)}var Dr=null;function hd(e){if(Dr=null,e=En(e),e!==null){var t=f(e);if(t===null)e=null;else{var s=t.tag;if(s===13){if(e=g(t),e!==null)return e;e=null}else if(s===31){if(e=x(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Dr=e,null}function Gp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Na()){case ut:return 2;case sa:return 8;case wa:case de:return 32;case pe:return 268435456;default:return 32}default:return 32}}var gd=!1,Ds=null,Rs=null,Us=null,oi=new Map,ci=new Map,Ls=[],ub="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Yp(e,t){switch(e){case"focusin":case"focusout":Ds=null;break;case"dragenter":case"dragleave":Rs=null;break;case"mouseover":case"mouseout":Us=null;break;case"pointerover":case"pointerout":oi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ci.delete(t.pointerId)}}function di(e,t,s,l,r,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:s,eventSystemFlags:l,nativeEvent:d,targetContainers:[r]},t!==null&&(t=Tn(t),t!==null&&Fp(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function mb(e,t,s,l,r){switch(t){case"focusin":return Ds=di(Ds,e,t,s,l,r),!0;case"dragenter":return Rs=di(Rs,e,t,s,l,r),!0;case"mouseover":return Us=di(Us,e,t,s,l,r),!0;case"pointerover":var d=r.pointerId;return oi.set(d,di(oi.get(d)||null,e,t,s,l,r)),!0;case"gotpointercapture":return d=r.pointerId,ci.set(d,di(ci.get(d)||null,e,t,s,l,r)),!0}return!1}function Vp(e){var t=En(e.target);if(t!==null){var s=f(t);if(s!==null){if(t=s.tag,t===13){if(t=g(s),t!==null){e.blockedOn=t,lu(e.priority,function(){$p(s)});return}}else if(t===31){if(t=x(s),t!==null){e.blockedOn=t,lu(e.priority,function(){$p(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Rr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=pd(e.nativeEvent);if(s===null){s=e.nativeEvent;var l=new s.constructor(s.type,s);ho=l,s.target.dispatchEvent(l),ho=null}else return t=Tn(s),t!==null&&Fp(t),e.blockedOn=s,!1;t.shift()}return!0}function Qp(e,t,s){Rr(e)&&s.delete(t)}function fb(){gd=!1,Ds!==null&&Rr(Ds)&&(Ds=null),Rs!==null&&Rr(Rs)&&(Rs=null),Us!==null&&Rr(Us)&&(Us=null),oi.forEach(Qp),ci.forEach(Qp)}function Ur(e,t){e.blockedOn===t&&(e.blockedOn=null,gd||(gd=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,fb)))}var Lr=null;function Xp(e){Lr!==e&&(Lr=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Lr===e&&(Lr=null);for(var t=0;t<e.length;t+=3){var s=e[t],l=e[t+1],r=e[t+2];if(typeof l!="function"){if(hd(l||s)===null)continue;break}var d=Tn(s);d!==null&&(e.splice(t,3),t-=3,pc(d,{pending:!0,data:r,method:s.method,action:l},l,r))}}))}function dl(e){function t(k){return Ur(k,e)}Ds!==null&&Ur(Ds,e),Rs!==null&&Ur(Rs,e),Us!==null&&Ur(Us,e),oi.forEach(t),ci.forEach(t);for(var s=0;s<Ls.length;s++){var l=Ls[s];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Ls.length&&(s=Ls[0],s.blockedOn===null);)Vp(s),s.blockedOn===null&&Ls.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var r=s[l],d=s[l+1],m=r[Kt]||null;if(typeof d=="function")m||Xp(s);else if(m){var b=null;if(d&&d.hasAttribute("formAction")){if(r=d,m=d[Kt]||null)b=m.formAction;else if(hd(r)!==null)continue}else b=m.action;typeof b=="function"?s[l+1]=b:(s.splice(l,3),l-=3),Xp(s)}}}function Kp(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(m){return r=m})},focusReset:"manual",scroll:"manual"})}function t(){r!==null&&(r(),r=null),l||setTimeout(s,20)}function s(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,r=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(s,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),r!==null&&(r(),r=null)}}}function xd(e){this._internalRoot=e}qr.prototype.render=xd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(c(409));var s=t.current,l=da();Ip(s,l,e,t,null,null)},qr.prototype.unmount=xd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ip(e.current,2,null,e,null,null),br(),t[kn]=null}};function qr(e){this._internalRoot=e}qr.prototype.unstable_scheduleHydration=function(e){if(e){var t=nu();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Ls.length&&t!==0&&t<Ls[s].priority;s++);Ls.splice(s,0,e),s===0&&Vp(e)}};var Zp=i.version;if(Zp!=="19.2.0")throw Error(c(527,Zp,"19.2.0"));E.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(c(188)):(e=Object.keys(e).join(","),Error(c(268,e)));return e=y(t),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var pb={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:_,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Br=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Br.isDisabled&&Br.supportsFiber)try{Be=Br.inject(pb),Fe=Br}catch{}}return mi.createRoot=function(e,t){if(!u(e))throw Error(c(299));var s=!1,l="",r=af,d=sf,m=nf;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(d=t.onCaughtError),t.onRecoverableError!==void 0&&(m=t.onRecoverableError)),t=qp(e,1,!1,null,null,s,l,null,r,d,m,Kp),e[kn]=t.current,Jc(e),new xd(t)},mi.hydrateRoot=function(e,t,s){if(!u(e))throw Error(c(299));var l=!1,r="",d=af,m=sf,b=nf,k=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(r=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError),s.formState!==void 0&&(k=s.formState)),t=qp(e,1,!0,t,s??null,l,r,k,d,m,b,Kp),t.context=Bp(null),s=t.current,l=da(),l=Bt(l),r=_s(l),r.callback=null,Ns(s,r,l),s=l,t.current.lanes=s,Yt(t,s),La(t),e[kn]=t.current,Jc(e),new qr(t)},mi.version="19.2.0",mi}var rh;function Lb(){if(rh)return yd.exports;rh=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(i){console.error(i)}}return n(),yd.exports=Ub(),yd.exports}var qb=Lb();const Bb=bb(qb),Ed="active-customer-order",Td="active-customer-order-id",Qh=1440*60*1e3,Ib=n=>{if(!n)return null;try{const i=JSON.parse(n);if(i&&typeof i.orderId=="string"&&i.orderId.trim().length>0)return i}catch(i){console.error("Failed to parse stored active order",i)}return null},ji=n=>{if(!(typeof window>"u"))try{if(!n){window.localStorage.removeItem(Ed),window.localStorage.removeItem(Td);return}window.localStorage.setItem(Ed,JSON.stringify(n)),window.localStorage.removeItem(Td)}catch(i){console.error("Failed to persist active order",i)}},so=()=>{if(typeof window>"u")return null;const n=Ib(window.localStorage.getItem(Ed));if(n)return n.expiresAt&&n.expiresAt<=Date.now()?(ji(null),null):n;const i=window.localStorage.getItem(Td);if(i&&i.trim().length>0){const o={orderId:i};return ji(o),o}return null},Xh=(n,i)=>{if(!n){ji(null);return}ji(i?{orderId:n,expiresAt:i}:{orderId:n})},Kh=()=>{ji(null)},Zh="Supabase client is not available in this offline build. Install @supabase/supabase-js in production.",Ph=()=>{const n=Promise.reject(new Error(Zh));return new Proxy({},{get(i,o){return o==="then"||o==="catch"||o==="finally"?n[o].bind(n):()=>Ph()}})},Hb=()=>{const n=Ph(),i=async()=>{throw new Error(Zh)};return{from(){return n},functions:{invoke:i},auth:{signInWithPassword:i,signOut:i,getSession:i}}},Fb=n=>{try{const i=new URL(n),o=i.pathname.replace(/\/+$/,"");if(o&&o!=="/"){const c=o===""?"/":o;throw new Error(`VITE_SUPABASE_URL must point to the project root (e.g. https://xxxx.supabase.co). Remove the path "${c}" to avoid cross-origin errors.`)}return i.origin}catch(i){const o=i instanceof Error?` ${i.message}`:"";throw new Error(`Invalid VITE_SUPABASE_URL provided.${o}`.trim())}},$b=()=>Hb();let Md;try{const n="https://epolcaohkaozcanyexau.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVwb2xjYW9oa2FvemNhbnlleGF1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg3NDk0NDUsImV4cCI6MjA3NDMyNTQ0NX0.xROZsagC9K1aP6XexNoqlYZfeuqGUOC9huGsrJ55x_0",o=Fb(n);Md=wb(o,i,{auth:{persistSession:!1}})}catch(n){const i=n instanceof Error?n.message:"Unknown error while creating the Supabase client.";console.warn("Supabase client disabled. Falling back to the offline stub. Operations depending on Supabase will fail until the environment is configured.",i),Md=$b()}const me=Md,Gb={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_CLOUDINARY_CLOUD_NAME:"dmed4shf3",VITE_CLOUDINARY_DEFAULT_PRODUCT_IMAGE:"https://res.cloudinary.com/dmed4shf3/image/upload/v1757751722/main-sample.png",VITE_CLOUDINARY_PRODUCTS_FOLDER:"products",VITE_CLOUDINARY_RECEIPTS_FOLDER:"receipts",VITE_CLOUDINARY_UPLOAD_PRESET:"ml_default",VITE_CLOUDINARY_UPLOAD_PRESET_PRODUCTS:"",VITE_CLOUDINARY_UPLOAD_PRESET_RECEIPTS:"",VITE_CLOUDINARY_URL:"cloudinary://638671212949945:Gex0K0jrKzsXpn-iLglyyxbEi40@dmed4shf3",VITE_FIREBASE_API_KEY:"AIzaSyBU5pHpTKoLp9YSrDYQAfU020MmABXuO2I",VITE_FIREBASE_APP_ID:"1:771027243035:web:b2adab7c31c4438814a8be",VITE_FIREBASE_AUTH_DOMAIN:"steady-service-469913-q4.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"771027243035",VITE_FIREBASE_PROJECT_ID:"steady-service-469913-q4",VITE_FIREBASE_STORAGE_BUCKET:"steady-service-469913-q4.firebasestorage.app",VITE_GEMINI_API_KEY:"AIzaSyAVEshpvhYt7TXSc5IoM9RnbeRQVXErEHg",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVwb2xjYW9oa2FvemNhbnlleGF1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg3NDk0NDUsImV4cCI6MjA3NDMyNTQ0NX0.xROZsagC9K1aP6XexNoqlYZfeuqGUOC9huGsrJ55x_0",VITE_SUPABASE_URL:"https://epolcaohkaozcanyexau.supabase.co"},Yb=Gb,Vb="https://api.cloudinary.com/v1_1",Qb="cloudinary.com",Xb=n=>n.normalize("NFD").replace(/[̀-ͯ]/g,"").normalize("NFC"),Hd=n=>Xb(n).toLowerCase().replace(/[^a-z0-9-]+/g,"-").replace(/^-+|-+$/g,""),Jh=()=>Math.random().toString(36).slice(2,10),xi=(n,i)=>n&&Hd(n)||i,za=n=>{const i=Yb[n];if(typeof i!="string")return;const o=i.trim();return o.length>0?o:void 0},oh=(n,i)=>{const o=za(n);if(!o)throw new Error(`Configuration Cloudinary manquante: définissez la variable d'environnement ${n} pour ${i}.`);return o},Fd=async(n,{folder:i,uploadPreset:o,publicId:c,tags:u})=>{var N;const f=oh("VITE_CLOUDINARY_CLOUD_NAME","les téléversements de médias"),g=o??oh("VITE_CLOUDINARY_UPLOAD_PRESET","les téléversements de médias"),x=g,p=new FormData;p.append("file",n),p.append("upload_preset",g),i&&p.append("folder",i),c&&p.append("public_id",c),u!=null&&u.length&&p.append("tags",u.join(","));const y=await fetch(`${Vb}/${f}/auto/upload`,{method:"POST",body:p}),v=await y.json();if(!y.ok||v.error){const j=(N=v.error)==null?void 0:N.message;throw j&&/upload preset/i.test(j)?new Error(`Le preset Cloudinary "${x}" est introuvable ou ne permet pas les téléversements non signés. Vérifiez sa configuration dans votre console Cloudinary (Settings → Upload → Upload presets).`):new Error(j??`Échec du téléversement Cloudinary (statut ${y.status}).`)}if(!v.secure_url&&!v.url)throw new Error("Cloudinary n'a pas renvoyé d'URL sécurisée pour le fichier téléversé.");return v.secure_url??v.url},ms=n=>{const i=n==null?void 0:n.trim();if(!i)return null;try{const o=new URL(i);return o.protocol!=="https:"||!o.hostname.endsWith(Qb)?null:i}catch{return null}},Kb=za("VITE_CLOUDINARY_DEFAULT_PRODUCT_IMAGE")??"",ch=Kb,Wh=n=>{const i=ms(n);return i||ch||""},Zb=async(n,i)=>{const o=za("VITE_CLOUDINARY_PRODUCTS_FOLDER")??"products",c=za("VITE_CLOUDINARY_UPLOAD_PRESET_PRODUCTS")??za("VITE_CLOUDINARY_UPLOAD_PRESET"),u=i?Hd(i):void 0,f=u?`${u}-${Jh()}`:void 0;return Fd(n,{folder:xi(o,"products"),uploadPreset:c,publicId:f,tags:["product"]})},Pb=()=>xi(za("VITE_CLOUDINARY_CUSTOM_FOLDER")??"Custom","Custom"),bl=async(n,i)=>{const o=Pb(),c=za("VITE_CLOUDINARY_UPLOAD_PRESET_CUSTOM")??za("VITE_CLOUDINARY_UPLOAD_PRESET"),u=(i==null?void 0:i.publicId)??(n instanceof File&&n.name?Hd(n.name.replace(/\.[^/.]+$/,"")):void 0),f=u?`${u}-${Jh()}`:void 0,g=Array.from(new Set(["customization","custom-folder",...(i==null?void 0:i.tags)??[]]));return Fd(n,{folder:o,uploadPreset:c,publicId:f,tags:g})},eg=async(n,i)=>{const o=za("VITE_CLOUDINARY_RECEIPTS_FOLDER")??"receipts",c=za("VITE_CLOUDINARY_UPLOAD_PRESET_RECEIPTS")??za("VITE_CLOUDINARY_UPLOAD_PRESET"),u=[xi(o,"receipts")];return i!=null&&i.orderId?u.push(`order-${xi(i.orderId,"commande")}`):i!=null&&i.customerReference&&u.push(`customer-${xi(i.customerReference,"client")}`),Fd(n,{folder:u.join("/"),uploadPreset:c,tags:["payment","receipt"]})},tg="ouiouipos:role-logins",ag=()=>{if(typeof window>"u"||!window.localStorage)throw new Error("Local storage is not available for role login tracking.");return window.localStorage},Jb=n=>{if(!n)return[];try{const i=JSON.parse(n);return Array.isArray(i)?i.map(o=>{if(!o||typeof o!="object")return null;const{roleId:c,roleName:u,loginAt:f}=o;if(typeof c!="string"||typeof u!="string"||typeof f!="string")return null;const g=Date.parse(f);return Number.isNaN(g)?null:{roleId:c,roleName:u,loginAt:new Date(g).toISOString()}}).filter(o=>!!o).sort((o,c)=>Date.parse(o.loginAt)-Date.parse(c.loginAt)):[]}catch(i){return console.warn("Unable to parse stored role logins, clearing history.",i),[]}},$d=()=>{const i=ag().getItem(tg);return Jb(i)},sg=n=>{ag().setItem(tg,JSON.stringify(n.slice(-500)))},dh=async(n,i,o)=>{const c=o??new Date().toISOString(),u={roleId:n,roleName:i,loginAt:c};try{const f=$d();f.push(u),sg(f)}catch(f){console.warn("Unable to persist role login locally.",f)}return u},uh=async n=>{const i=Date.parse(n);if(Number.isNaN(i))throw new Error("Invalid start date provided when fetching role logins.");return $d().filter(c=>Date.parse(c.loginAt)>=i)},mh=n=>{try{const i=Date.parse(n);if(Number.isNaN(i))return;const o=$d().filter(c=>Date.parse(c.loginAt)>=i);sg(o)}catch(i){console.warn("Unable to prune stored role logins.",i)}};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wb=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ey=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(i,o,c)=>c?c.toUpperCase():o.toLowerCase()),fh=n=>{const i=ey(n);return i.charAt(0).toUpperCase()+i.slice(1)},ng=(...n)=>n.filter((i,o,c)=>!!i&&i.trim()!==""&&c.indexOf(i)===o).join(" ").trim(),ty=n=>{for(const i in n)if(i.startsWith("aria-")||i==="role"||i==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ay={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=h.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:u="",children:f,iconNode:g,...x},p)=>h.createElement("svg",{ref:p,...ay,width:i,height:i,stroke:n,strokeWidth:c?Number(o)*24/Number(i):o,className:ng("lucide",u),...!f&&!ty(x)&&{"aria-hidden":"true"},...x},[...g.map(([y,v])=>h.createElement(y,v)),...Array.isArray(f)?f:[f]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=(n,i)=>{const o=h.forwardRef(({className:c,...u},f)=>h.createElement(sy,{ref:f,iconNode:i,className:ng(`lucide-${Wb(fh(n))}`,`lucide-${n}`,c),...u}));return o.displayName=fh(n),o};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=[["path",{d:"M19 9V6a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v3",key:"irtipd"}],["path",{d:"M3 16a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v1.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V11a2 2 0 0 0-4 0z",key:"1qyhux"}],["path",{d:"M5 18v2",key:"ppbyun"}],["path",{d:"M19 18v2",key:"gy7782"}]],Gd=he("armchair",ny);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ly=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],lg=he("arrow-left",ly);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],ry=he("bold",iy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oy=[["path",{d:"m11 10 3 3",key:"fzmg1i"}],["path",{d:"M6.5 21A3.5 3.5 0 1 0 3 17.5a2.62 2.62 0 0 1-.708 1.792A1 1 0 0 0 3 21z",key:"p4q2r7"}],["path",{d:"M9.969 17.031 21.378 5.624a1 1 0 0 0-3.002-3.002L6.967 14.031",key:"wy6l02"}]],cy=he("brush",oy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dy=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],uy=he("calendar-days",dy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const my=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],fy=he("calendar",my);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 11.207a.5.5 0 0 1 .146-.353l2-2a.5.5 0 0 1 .708 0l3.292 3.292a.5.5 0 0 0 .708 0l4.292-4.292a.5.5 0 0 1 .854.353V16a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1z",key:"q0gr47"}]],hy=he("chart-area",py);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gy=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],xy=he("chart-column",gy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const by=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],yy=he("check",by);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],jy=he("chef-hat",vy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ig=he("chevron-down",_y);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],wy=he("chevron-right",Ny);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sy=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],rg=he("chevron-up",Sy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cy=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],bn=he("circle-check-big",Cy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ey=he("circle-check",ky);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]],My=he("circle-minus",Ty);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Yd=he("circle-plus",Ay);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Oy=he("circle-question-mark",zy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Ry=he("circle-x",Dy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],fs=he("clock",Uy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],qy=he("copy",Ly);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],io=he("dollar-sign",By);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Hy=he("download",Iy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],og=he("ellipsis-vertical",Fy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Gy=he("external-link",$y);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Vy=he("eye-off",Yy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ad=he("eye",Qy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],cg=he("file-text",Xy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=[["path",{d:"M12.531 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14v6a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341l.427-.473",key:"ol2ft2"}],["path",{d:"m16.5 3.5 5 5",key:"15e6fa"}],["path",{d:"m21.5 3.5-5 5",key:"m0lwru"}]],Zy=he("funnel-x",Ky);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Py=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],zd=he("gift",Py);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Wy=he("grip-vertical",Jy);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=[["path",{d:"M12 3V2",key:"ar7q03"}],["path",{d:"m15.4 17.4 3.2-2.8a2 2 0 1 1 2.8 2.9l-3.6 3.3c-.7.8-1.7 1.2-2.8 1.2h-4c-1.1 0-2.1-.4-2.8-1.2l-1.302-1.464A1 1 0 0 0 6.151 19H5",key:"n2g93r"}],["path",{d:"M2 14h12a2 2 0 0 1 0 4h-2",key:"1o2jem"}],["path",{d:"M4 10h16",key:"img6z1"}],["path",{d:"M5 10a7 7 0 0 1 14 0",key:"1ega1o"}],["path",{d:"M5 14v6a1 1 0 0 1-1 1H2",key:"1hescx"}]],tv=he("hand-platter",ev);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],sv=he("info",av);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],lv=he("italic",nv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],ph=he("layers",iv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],ov=he("layout-dashboard",rv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],yl=he("loader-circle",cv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],uv=he("log-in",dv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],fv=he("log-out",mv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],jn=he("map-pin",pv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],dg=he("menu",hv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],ug=he("message-circle",gv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],mg=he("message-square",xv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=[["path",{d:"M5 12h14",key:"1ays0h"}]],fg=he("minus",bv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]],vv=he("package-check",yv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M19 13v6",key:"85cyf1"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]],_v=he("package-plus",jv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Ys=he("package",Nv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Sv=he("palette",wv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],kv=he("pen",Cv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Tv=he("pencil",Ev);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mv=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],vl=he("percent",Mv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],gl=he("phone",Av);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=[["path",{d:"M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z",key:"1piglc"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M2 8v1a2 2 0 0 0 2 2h1",key:"1env43"}]],Ov=he("piggy-bank",zv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ni=he("plus",Dv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],Pr=he("receipt",Rv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Lv=he("refresh-cw",Uv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qv=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Bv=he("save",qv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Vd=he("search",Iv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Fv=he("send",Hv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Gv=he("settings",$v);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Vv=he("shield",Yv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],Qd=he("shopping-bag",Qv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],pg=he("shopping-cart",Xv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=[["path",{d:"M12 21a9 9 0 0 0 9-9H3a9 9 0 0 0 9 9Z",key:"4rw317"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M19.5 12 22 6",key:"shfsr5"}],["path",{d:"M16.25 3c.27.1.8.53.75 1.36-.06.83-.93 1.2-1 2.02-.05.78.34 1.24.73 1.62",key:"rpc6vp"}],["path",{d:"M11.25 3c.27.1.8.53.74 1.36-.05.83-.93 1.2-.98 2.02-.06.78.33 1.24.72 1.62",key:"1lf63m"}],["path",{d:"M6.25 3c.27.1.8.53.75 1.36-.06.83-.93 1.2-1 2.02-.05.78.34 1.24.74 1.62",key:"97tijn"}]],hg=he("soup",Kv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],gg=he("square-pen",Zv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]],Jv=he("strikethrough",Pv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wv=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],_i=he("tag",Wv);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],wn=he("trash-2",e1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],xg=he("trending-up",t1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Aa=he("triangle-alert",a1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],bg=he("truck",s1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],jl=he("upload",n1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],i1=he("user-check",l1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],bi=he("user",r1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Od=he("users",o1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]],d1=he("utensils-crossed",c1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],m1=he("utensils",u1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],us=he("x",f1),ps="/site-customizer",aa=[{name:"Dashboard",href:"/dashboard",icon:ov,permissionKey:"/dashboard"},{name:"À Emporter",href:"/para-llevar",icon:Qd,permissionKey:"/para-llevar"},{name:"Plan de Salle",href:"/ventes",icon:Gd,permissionKey:"/ventes"},{name:"Cuisine",href:"/cocina",icon:hg,permissionKey:"/cocina"},{name:"Personnalisation",href:ps,icon:cy,permissionKey:ps},{name:"Produits",href:"/produits",icon:d1,permissionKey:"/produits"},{name:"Ingrédients",href:"/ingredients",icon:Ys,permissionKey:"/ingredients"},{name:"Promotions",href:"/promotions",icon:vl,permissionKey:"/promotions"},{name:"Résumé Ventes",href:"/resume-ventes",icon:hy,permissionKey:"/resume-ventes"}],yg={ADMIN:"admin"},_n="__home_page",p1=n=>{if(n.status!=="active")return!1;const i=new Date,o=n.conditions;if(o.start_date){const c=new Date(o.start_date);if(i<c)return!1}if(o.end_date){const c=new Date(o.end_date);if(i>c)return!1}return!(o.usage_limit&&n.usage_count>=o.usage_limit)},h1=n=>{const i=new Date,o=n.conditions;if(o.days_of_week&&o.days_of_week.length>0){const c=i.getDay();if(!o.days_of_week.includes(c))return!1}if(o.time_range){const c=i.getHours(),u=i.getMinutes(),f=c*60+u,[g,x]=o.time_range.start_time.split(":").map(Number),[p,y]=o.time_range.end_time.split(":").map(Number),v=g*60+x,N=p*60+y;if(f<v||f>N)return!1}return!0},wi=["review1","review2","review3","review4","review5","review6","review7"],g1=["name","handle","timeAgo","message","highlight","highlightCaption","location","badgeLabel","postImageAlt"],x1=["avatarUrl","highlightImageUrl","postImageUrl"],b1=["navigation.brand","navigation.brandLogo","navigation.staffLogo","navigation.links.home","navigation.links.about","navigation.links.menu","navigation.links.contact","navigation.links.loginCta","navigation.style.background","hero.title","hero.subtitle","hero.ctaLabel","hero.historyTitle","hero.reorderCtaLabel","hero.backgroundImage","about.title","about.description","about.image","about.style.background","menu.title","menu.ctaLabel","menu.loadingLabel","menu.image","menu.style.background","instagramReviews.title","instagramReviews.subtitle","instagramReviews.image","instagramReviews.style.background","findUs.title","findUs.addressLabel","findUs.address","findUs.cityLabel","findUs.city","findUs.hoursLabel","findUs.hours","findUs.mapLabel","findUs.style.background","footer.text","footer.style.background"],y1=[...g1,...x1],v1=wi.flatMap(n=>y1.map(i=>`instagramReviews.reviews.${n}.${i}`)),Si=[...b1,...v1],j1=Si.filter(n=>!n.endsWith(".style.background")&&!n.endsWith(".image")&&!n.endsWith(".avatarUrl")&&!n.endsWith(".highlightImageUrl")&&!n.endsWith(".postImageUrl")&&n!=="hero.backgroundImage"&&n!=="navigation.brandLogo"&&n!=="navigation.staffLogo"),_1=new Set(["STRONG","EM","S","STRIKE","SPAN","BR","DIV","P","B","I"]),N1=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,w1=/^rgba?\((\s*\d{1,3}\s*,){2}\s*\d{1,3}\s*(,\s*(0|1|0?\.\d+))?\s*\)$/,vg=typeof window<"u"&&typeof document<"u",S1=n=>{const i=n.trim().replace(/"|'/g,"");return N1.test(i)?i.toLowerCase():w1.test(i)?i.replace(/\s+/g,""):null},C1=n=>{const i=n.parentNode;if(!i){n.remove();return}for(;n.firstChild;)i.insertBefore(n.firstChild,n);i.removeChild(n)},k1=n=>{const o={B:"strong",I:"em",STRIKE:"s"}[n.tagName];if(!o)return n;const c=document.createElement(o);for(;n.firstChild;)c.appendChild(n.firstChild);return n.replaceWith(c),c},jg=n=>{if(!_1.has(n.tagName)){C1(n);return}const i=k1(n);if(Array.from(i.attributes).forEach(o=>{o.name!=="style"&&i.removeAttribute(o.name)}),i.hasAttribute("style")){const u=(i.getAttribute("style")??"").split(";").map(f=>f.trim()).filter(Boolean).find(f=>f.toLowerCase().startsWith("color"));if(u){const[,f]=u.split(":"),g=f?S1(f):null;g?i.setAttribute("style",`color: ${g}`):i.removeAttribute("style")}else i.removeAttribute("style")}Array.from(i.childNodes).forEach(o=>{var c;if(o.nodeType===Node.COMMENT_NODE){(c=o.parentNode)==null||c.removeChild(o);return}o.nodeType===Node.ELEMENT_NODE&&jg(o)})},E1=n=>n.replace(/<\/?(?!br\b)[^>]+>/gi,"").replace(/\r\n|\r|\n/g,"<br>").replace(/<script[^>]*>[\s\S]*?<\/script>/gi,""),T1=n=>{const i=n??"";if(i.trim().length===0)return"";if(!vg)return E1(i).trim();const o=document.createElement("template");return o.innerHTML=i,Array.from(o.content.childNodes).forEach(c=>{var u;if(c.nodeType===Node.COMMENT_NODE){(u=c.parentNode)==null||u.removeChild(c);return}c.nodeType===Node.ELEMENT_NODE&&jg(c)}),o.innerHTML.trim()},M1=n=>{if(!vg)return n.replace(/<[^>]+>/g,"");const i=document.createElement("template");return i.innerHTML=n,i.content.textContent??""},hh=n=>n.replace(/[​‌‍﻿]/g,"").replace(/\r\n/g,`
`),Xd=n=>{if(!n)return null;const i=T1(n.html??""),o=hh(n.plainText??""),c=hh(M1(i)),u=o.trim().length>0?o:c;return i.trim().length===0&&u.trim().length===0?null:{html:i,plainText:u}},A1={review1:{name:"Laura Méndez",handle:"@laurita.eats",timeAgo:"hace 2 días",message:"No puedo con la originalidad de estos tacos al pastor: cada mordisco tiene un giro gourmet brutal. La salsa cheddar queda cremosa sin empalagar y el toque crujiente lo es todo.",highlight:"Story « Taco Tuesday »",highlightCaption:"Guardado en Destacadas",location:"Bogotá · Servicio nocturno",badgeLabel:"Instagram",postImageAlt:"Assiette de tacos colorés garnis d'herbes fraîches.",avatarUrl:"https://images.unsplash.com/photo-1544723795-3fb6469f5b39?auto=format&fit=crop&w=320&q=80",highlightImageUrl:"https://images.unsplash.com/photo-1521305916504-4a1121188589?auto=format&fit=crop&w=320&q=80",postImageUrl:"https://images.unsplash.com/photo-1521305916504-4a1121188589?auto=format&fit=crop&w=640&q=80"},review2:{name:"Camila Torres",handle:"@camigoesout",timeAgo:"hace 5 días",message:"Estas arepas son lo más: combinan ingredientes súper frescos con un toque gourmet creativo. La mezcla dulce-salado y esa salsa cheddar para remojar me tuvieron feliz todo el brunch.",highlight:"Reel « Brunch entre amigas »",highlightCaption:"Comentarios llenos de antojos",location:"Medellín · Brunch de domingo",badgeLabel:"Instagram",postImageAlt:"Gros plan sur des arepas dorées et une sauce maison.",avatarUrl:"https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=320&q=80",highlightImageUrl:"https://images.unsplash.com/photo-1478145046317-39f10e56b5e9?auto=format&fit=crop&w=320&q=80",postImageUrl:"https://images.unsplash.com/photo-1478145046317-39f10e56b5e9?auto=format&fit=crop&w=640&q=80"},review3:{name:"Sebastián Ruiz",handle:"@ruizhungry",timeAgo:"hace 1 semana",message:"Armamos un afterwork aquí y fue un hit: combos originales, porciones generosas y un crunch brutal en cada bocado. La salsa cheddar se volvió tema de conversación.",highlight:"Post « Team Afterwork »",highlightCaption:"Reacciones de la oficina",location:"Barranquilla · Terraza privada",badgeLabel:"Instagram",postImageAlt:"Table conviviale avec plusieurs plats mexicains et des boissons fraîches.",avatarUrl:"https://images.unsplash.com/photo-1521572267360-ee0c2909d518?auto=format&fit=crop&w=320&q=80",highlightImageUrl:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?auto=format&fit=crop&w=320&q=80",postImageUrl:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?auto=format&fit=crop&w=640&q=80"},review4:{name:"Valentina Ríos",handle:"@valen.foodnotes",timeAgo:"hace 2 semanas",message:"El menú tiene un mood gourmet sin perder lo reconfortante: masa crocante, cheddar fundido y combinaciones de ingredientes que se sienten pensadas con cariño. Increíble experiencia.",highlight:"Carousel « Night Out »",highlightCaption:"Comentarios fijados",location:"Cali · Cena casual",badgeLabel:"Instagram",postImageAlt:"Pizza gourmande avec fromage coulant et herbes fraîches.",avatarUrl:"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?auto=format&fit=crop&w=320&q=80",highlightImageUrl:"https://images.unsplash.com/photo-1513104890138-7c749659a591?auto=format&fit=crop&w=320&q=80",postImageUrl:"https://images.unsplash.com/photo-1513104890138-7c749659a591?auto=format&fit=crop&w=640&q=80"},review5:{name:"Alejandro Pérez",handle:"@alexlovesfood",timeAgo:"hace 3 semanas",message:"Vine por curiosidad y me quedé por la originalidad del menú: el cheddar baña la burger justo como me gusta y el pan crujiente aguanta toda la salsa. Asociaciones de sabores top.",highlight:"Live « Burger Night »",highlightCaption:"Chat lleno de elogios",location:"Bogotá · Servicio takeout",badgeLabel:"Instagram",postImageAlt:"Burger gourmet avec sauce et frites croustillantes.",avatarUrl:"https://images.unsplash.com/photo-1529665253569-6d01c0eaf7b6?auto=format&fit=crop&w=320&q=80",highlightImageUrl:"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?auto=format&fit=crop&w=320&q=80",postImageUrl:"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?auto=format&fit=crop&w=640&q=80"},review6:{name:"Juliana Gómez",handle:"@julie.foodstories",timeAgo:"hace 1 mes",message:"Pedimos catering para un cumpleaños y fue éxito total: tacos mini, dips calientes y una mesa que se veía divina para fotos. Todo llegó puntual y con instrucciones claras.",highlight:"Story « Fiesta privada »",highlightCaption:"Reseñas con confeti",location:"Cartagena · Evento privado",badgeLabel:"Instagram",postImageAlt:"Buffet coloré avec tacos, dips et accompagnements.",avatarUrl:"https://images.unsplash.com/photo-1517841905240-472988babdf9?auto=format&fit=crop&w=320&q=80",highlightImageUrl:"https://images.unsplash.com/photo-1528715471579-d1bcf0ba5e83?auto=format&fit=crop&w=320&q=80",postImageUrl:"https://images.unsplash.com/photo-1466978913421-dad2ebd01d17?auto=format&fit=crop&w=640&q=80"},review7:{name:"Manuela Herrera",handle:"@manuelatryit",timeAgo:"hace 6 semanas",message:"Amo que tengan opciones veggies sin perder el toque cheddar: las quesadillas con hongos y maíz dulce son mi nueva obsesión. Además, la atención es rapidísima.",highlight:"Reel « Veggie Lovers »",highlightCaption:"Comentarios verdes y felices",location:"Bogotá · Servicio para llevar",badgeLabel:"Instagram",postImageAlt:"Quesadillas dorées servies avec salsa verde.",avatarUrl:"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?auto=format&fit=crop&w=320&q=80",highlightImageUrl:"https://images.unsplash.com/photo-1528712306091-ed0763094c98?auto=format&fit=crop&w=320&q=80",postImageUrl:"https://images.unsplash.com/photo-1528712306091-ed0763094c98?auto=format&fit=crop&w=640&q=80"}},Ue=n=>n.trim(),Kd=n=>typeof n=="string"&&n.trim().length>0,_g=(n,i)=>Kd(n)?n.trim():i,Ng=(n,i)=>Kd(n)?n.trim():i,yi=(n,i)=>Kd(n)?n.trim():i,Le=(n,i)=>{if(typeof n!="string")return i;const o=n.trim();return o.length>0?o:i},Ia=(n,i)=>n===void 0?i??null:n===null?null:ms(n)??i??null,Ha=n=>ms(n)??null,wg=/^([01]\d|2[0-3]):([0-5]\d)$/,gh=(n,i)=>{if(typeof n!="string")return i;const o=n.trim();return wg.test(o)?o:i},xh=(n,i)=>{if(typeof n!="string")return i;const o=n.trim();return wg.test(o)?o:i},z1=(n,i)=>{const o={};return wi.forEach(c=>{const u=i[c],f=(n==null?void 0:n[c])??{};o[c]={name:Le(f==null?void 0:f.name,u.name),handle:Le(f==null?void 0:f.handle,u.handle),timeAgo:Le(f==null?void 0:f.timeAgo,u.timeAgo),message:Le(f==null?void 0:f.message,u.message),highlight:Le(f==null?void 0:f.highlight,u.highlight),highlightCaption:Le(f==null?void 0:f.highlightCaption,u.highlightCaption),location:Le(f==null?void 0:f.location,u.location),badgeLabel:Le(f==null?void 0:f.badgeLabel,u.badgeLabel),postImageAlt:Le(f==null?void 0:f.postImageAlt,u.postImageAlt),avatarUrl:Ia(f==null?void 0:f.avatarUrl,u.avatarUrl),highlightImageUrl:Ia(f==null?void 0:f.highlightImageUrl,u.highlightImageUrl),postImageUrl:Ia(f==null?void 0:f.postImageUrl,u.postImageUrl)}}),o},O1=n=>{const i={};return wi.forEach(o=>{const c=(n==null?void 0:n[o])??{};i[o]={name:Ue((c==null?void 0:c.name)??""),handle:Ue((c==null?void 0:c.handle)??""),timeAgo:Ue((c==null?void 0:c.timeAgo)??""),message:Ue((c==null?void 0:c.message)??""),highlight:Ue((c==null?void 0:c.highlight)??""),highlightCaption:Ue((c==null?void 0:c.highlightCaption)??""),location:Ue((c==null?void 0:c.location)??""),badgeLabel:Ue((c==null?void 0:c.badgeLabel)??""),postImageAlt:Ue((c==null?void 0:c.postImageAlt)??""),avatarUrl:Ha(c==null?void 0:c.avatarUrl),highlightImageUrl:Ha(c==null?void 0:c.highlightImageUrl),postImageUrl:Ha(c==null?void 0:c.postImageUrl)}}),i},Ir=n=>{if(typeof n!="string")return;const i=n.trim();return i.length>0?i:void 0},Sg=n=>{if(!n)return null;const i=Ir(n.textColor??null),o=Ir(n.fontFamily??null),c=Ir(n.fontSize??null),u=Ir(n.backgroundColor??null),f={};return i&&(f.textColor=i),o&&(f.fontFamily=o),c&&(f.fontSize=c),u&&(f.backgroundColor=u),Object.keys(f).length>0?f:null},D1=(n,i)=>{const o=n??i,c={};return Si.forEach(u=>{const f=Sg(o[u]??null);f&&(c[u]=f)}),c},R1=(n,i)=>{const o=n??i,c={};return Si.forEach(u=>{const f=Sg(o[u]??null);f&&(c[u]=f)}),c},U1=(n,i)=>{const o=n??i,c={};return Si.forEach(u=>{const f=o[u],g=Xd(f??null);g&&(c[u]=g)}),c},L1=(n,i)=>{const o=n??i,c={};return Si.forEach(u=>{const f=o[u],g=Xd(f??null);g&&(c[u]=g)}),c},q1=["image","video","audio","font","raw"],B1=()=>`asset-${Date.now()}-${Math.random().toString(36).slice(2,10)}`,I1=n=>q1.includes(n)?n:"raw",H1=n=>{if(typeof n=="string"){const i=Date.parse(n);if(!Number.isNaN(i))return new Date(i).toISOString()}return new Date().toISOString()},F1=n=>{const i=typeof n=="number"?n:Number(n);return!Number.isFinite(i)||i<0?0:Math.round(i)},Cg=n=>{if(!n)return null;const i=ms(n.url??void 0);if(!i)return null;const o=typeof n.id=="string"&&n.id.trim().length>0?n.id.trim():B1(),c=typeof n.name=="string"&&n.name.trim().length>0?n.name.trim():o,u=typeof n.format=="string"&&n.format.trim().length>0?n.format.trim():"application/octet-stream",f=I1(n.type),g=F1(n.bytes),x=H1(n.createdAt);return{id:o,name:c,url:i,format:u,bytes:g,type:f,createdAt:x}},$1=(n,i)=>n?{library:Array.isArray(n.library)?n.library.map(c=>Cg(c)).filter(Boolean):i.library}:i,G1=(n,i)=>{const o=n??i;return{library:Array.isArray(o.library)?o.library.map(u=>Cg(u)).filter(Boolean):i.library}},kg={background:{type:"color",color:"#0f172a",image:null},fontFamily:"Inter",fontSize:"16px",textColor:"#f1f5f9"},Eg={background:{type:"image",color:"#0f172a",image:"https://picsum.photos/seed/tacosbg/1920/1080"},fontFamily:"Inter",fontSize:"18px",textColor:"#f8fafc"},Tg={background:{type:"color",color:"#ffffff",image:null},fontFamily:"Inter",fontSize:"16px",textColor:"#0f172a"},Mg={background:{type:"color",color:"#f8fafc",image:null},fontFamily:"Inter",fontSize:"16px",textColor:"#111827"},Ag={background:{type:"color",color:"#ffffff",image:null},fontFamily:"Inter",fontSize:"16px",textColor:"#111827"},zg={background:{type:"color",color:"linear-gradient(135deg, #F59E0B 0%, #F97316 100%)",image:null},fontFamily:"Inter",fontSize:"16px",textColor:"#FFFFFF"},Og={background:{type:"color",color:"#0f172a",image:null},fontFamily:"Inter",fontSize:"14px",textColor:"#e2e8f0"},Zd={library:[]},Dg={},Rg={},un=(n,i)=>{var f,g,x,p;const o=((f=n==null?void 0:n.background)==null?void 0:f.type)==="image"?"image":"color",c=yi((g=n==null?void 0:n.background)==null?void 0:g.color,i.background.color),u=o==="image"?Ia(((x=n==null?void 0:n.background)==null?void 0:x.image)??void 0,i.background.image):null;return{background:{type:o,color:o==="color"?c:yi((p=n==null?void 0:n.background)==null?void 0:p.color,i.background.color),image:o==="image"?u:null},fontFamily:_g((n==null?void 0:n.fontFamily)??null,i.fontFamily),fontSize:Ng((n==null?void 0:n.fontSize)??null,i.fontSize),textColor:yi((n==null?void 0:n.textColor)??null,i.textColor)}},mn=(n,i)=>{var f,g,x;const o=((f=n==null?void 0:n.background)==null?void 0:f.type)==="image"?"image":"color",c=yi(((g=n==null?void 0:n.background)==null?void 0:g.color)??null,i.background.color),u=o==="image"?Ha(((x=n==null?void 0:n.background)==null?void 0:x.image)??null):null;return{background:{type:o,color:c,image:o==="image"?u:null},fontFamily:_g((n==null?void 0:n.fontFamily)??null,i.fontFamily),fontSize:Ng((n==null?void 0:n.fontSize)??null,i.fontSize),textColor:yi((n==null?void 0:n.textColor)??null,i.textColor)}},Nn={navigation:{brand:"OUIOUITACOS",brandLogo:"/logo-brand.svg",staffLogo:"/logo-staff.svg",links:{home:"Accueil",about:"À propos",menu:"Menu",contact:"Contact",loginCta:"Staff Login"},style:kg},hero:{title:"Le Goût Authentique du Mexique",subtitle:"Des tacos préparés avec passion, des ingrédients frais et une touche de tradition pour un voyage gustatif inoubliable.",ctaLabel:"Commander en ligne",backgroundImage:"https://picsum.photos/seed/tacosbg/1920/1080",historyTitle:"Vos dernières commandes",reorderCtaLabel:"Commander à nouveau",style:Eg},about:{title:"Notre Histoire",description:"Fondé par des passionnés de la cuisine mexicaine, OUIOUITACOS est né d'un désir simple : partager le goût authentique des tacos faits maison. Chaque recette est un héritage familial, chaque ingrédient est choisi avec soin, et chaque plat est préparé avec le cœur. Venez découvrir une explosion de saveurs qui vous transportera directement dans les rues de Mexico.",image:null,style:Tg},menu:{title:"Nos Best-sellers",ctaLabel:"Voir le menu complet & Commander",loadingLabel:"Chargement du menu...",image:null,style:Mg},instagramReviews:{title:"Ils nous adorent sur Instagram",subtitle:"Des foodies de toute la Colombie partagent leur coup de cœur pour notre cuisine : ambiance solaire, service attentionné et assiettes qui brillent autant que leurs stories.",image:"https://picsum.photos/seed/instagramreviews/600/600",style:Ag,reviews:wi.reduce((n,i)=>(n[i]={...A1[i]},n),{})},findUs:{title:"Encuéntranos",addressLabel:"Dirección",address:`Cra. 53 #75-98
Barranquilla, Atlántico
Colombie`,cityLabel:"Contacto",city:"hola@ouiouipos.co",hoursLabel:"Horarios",hours:"Martes a Domingo · 11h30 - 23h00",mapLabel:"Ver en Google Maps",mapUrl:"https://www.google.com/maps?q=OUIOUITACOS%2C%20Cra%2053%20%2375-98%2C%20Barranquilla%2C%20Atl%C3%A1ntico%2C%20Colombie",style:zg},footer:{text:"Tous droits réservés.",style:Og},onlineOrdering:{schedule:{startTime:"11:00",endTime:"23:00"},closedTitle:"Commandes en ligne indisponibles",closedSubtitle:"Revenez durant nos horaires de service pour commander vos plats préférés."},elementStyles:Dg,elementRichText:Rg,assets:Zd},Dd=n=>{var o,c,u,f,g,x,p,y,v,N,j,S,w,D,C,L,q,X,A,F,te,J,Q,oe,H,W,T,K,B,le,_,E,z,Z,$,R,I,M,re,ue,ge,ae,ce,_e,xe,Ae,Ke;const i=Nn;return{navigation:{brand:Le((o=n==null?void 0:n.navigation)==null?void 0:o.brand,i.navigation.brand),brandLogo:Ia((c=n==null?void 0:n.navigation)==null?void 0:c.brandLogo,i.navigation.brandLogo),staffLogo:Ia((u=n==null?void 0:n.navigation)==null?void 0:u.staffLogo,i.navigation.staffLogo),links:{home:Le((g=(f=n==null?void 0:n.navigation)==null?void 0:f.links)==null?void 0:g.home,i.navigation.links.home),about:Le((p=(x=n==null?void 0:n.navigation)==null?void 0:x.links)==null?void 0:p.about,i.navigation.links.about),menu:Le((v=(y=n==null?void 0:n.navigation)==null?void 0:y.links)==null?void 0:v.menu,i.navigation.links.menu),contact:Le((j=(N=n==null?void 0:n.navigation)==null?void 0:N.links)==null?void 0:j.contact,i.navigation.links.contact),loginCta:Le((w=(S=n==null?void 0:n.navigation)==null?void 0:S.links)==null?void 0:w.loginCta,i.navigation.links.loginCta)},style:un((D=n==null?void 0:n.navigation)==null?void 0:D.style,i.navigation.style)},hero:{title:Le((C=n==null?void 0:n.hero)==null?void 0:C.title,i.hero.title),subtitle:Le((L=n==null?void 0:n.hero)==null?void 0:L.subtitle,i.hero.subtitle),ctaLabel:Le((q=n==null?void 0:n.hero)==null?void 0:q.ctaLabel,i.hero.ctaLabel),backgroundImage:Ia((X=n==null?void 0:n.hero)==null?void 0:X.backgroundImage,i.hero.backgroundImage),historyTitle:Le((A=n==null?void 0:n.hero)==null?void 0:A.historyTitle,i.hero.historyTitle),reorderCtaLabel:Le((F=n==null?void 0:n.hero)==null?void 0:F.reorderCtaLabel,i.hero.reorderCtaLabel),style:un((te=n==null?void 0:n.hero)==null?void 0:te.style,i.hero.style)},about:{title:Le((J=n==null?void 0:n.about)==null?void 0:J.title,i.about.title),description:Le((Q=n==null?void 0:n.about)==null?void 0:Q.description,i.about.description),image:Ia((oe=n==null?void 0:n.about)==null?void 0:oe.image,i.about.image),style:un((H=n==null?void 0:n.about)==null?void 0:H.style,i.about.style)},menu:{title:Le((W=n==null?void 0:n.menu)==null?void 0:W.title,i.menu.title),ctaLabel:Le((T=n==null?void 0:n.menu)==null?void 0:T.ctaLabel,i.menu.ctaLabel),loadingLabel:Le((K=n==null?void 0:n.menu)==null?void 0:K.loadingLabel,i.menu.loadingLabel),image:Ia((B=n==null?void 0:n.menu)==null?void 0:B.image,i.menu.image),style:un((le=n==null?void 0:n.menu)==null?void 0:le.style,i.menu.style)},instagramReviews:{title:Le((_=n==null?void 0:n.instagramReviews)==null?void 0:_.title,i.instagramReviews.title),subtitle:Le((E=n==null?void 0:n.instagramReviews)==null?void 0:E.subtitle,i.instagramReviews.subtitle),image:Ia((z=n==null?void 0:n.instagramReviews)==null?void 0:z.image,i.instagramReviews.image),style:un((Z=n==null?void 0:n.instagramReviews)==null?void 0:Z.style,i.instagramReviews.style),reviews:z1((($=n==null?void 0:n.instagramReviews)==null?void 0:$.reviews)??null,i.instagramReviews.reviews)},findUs:{title:Le((R=n==null?void 0:n.findUs)==null?void 0:R.title,i.findUs.title),addressLabel:Le((I=n==null?void 0:n.findUs)==null?void 0:I.addressLabel,i.findUs.addressLabel),address:Le((M=n==null?void 0:n.findUs)==null?void 0:M.address,i.findUs.address),cityLabel:Le((re=n==null?void 0:n.findUs)==null?void 0:re.cityLabel,i.findUs.cityLabel),city:Le((ue=n==null?void 0:n.findUs)==null?void 0:ue.city,i.findUs.city),hoursLabel:Le((ge=n==null?void 0:n.findUs)==null?void 0:ge.hoursLabel,i.findUs.hoursLabel),hours:Le((ae=n==null?void 0:n.findUs)==null?void 0:ae.hours,i.findUs.hours),mapLabel:Le((ce=n==null?void 0:n.findUs)==null?void 0:ce.mapLabel,i.findUs.mapLabel),mapUrl:Le((_e=n==null?void 0:n.findUs)==null?void 0:_e.mapUrl,i.findUs.mapUrl),style:un((xe=n==null?void 0:n.findUs)==null?void 0:xe.style,i.findUs.style)},footer:{text:Le((Ae=n==null?void 0:n.footer)==null?void 0:Ae.text,i.footer.text),style:un((Ke=n==null?void 0:n.footer)==null?void 0:Ke.style,i.footer.style)},onlineOrdering:Y1(n==null?void 0:n.onlineOrdering,i.onlineOrdering),elementStyles:D1((n==null?void 0:n.elementStyles)??null,i.elementStyles),elementRichText:U1((n==null?void 0:n.elementRichText)??null,i.elementRichText),assets:$1((n==null?void 0:n.assets)??null,Zd)}},Y1=(n,i)=>{var o,c;return{schedule:{startTime:gh(((o=n==null?void 0:n.schedule)==null?void 0:o.startTime)??null,i.schedule.startTime),endTime:gh(((c=n==null?void 0:n.schedule)==null?void 0:c.endTime)??null,i.schedule.endTime)},closedTitle:Le((n==null?void 0:n.closedTitle)??null,i.closedTitle),closedSubtitle:Le((n==null?void 0:n.closedSubtitle)??null,i.closedSubtitle)}},V1=n=>({navigation:{brand:Ue(n.navigation.brand),brandLogo:Ha(n.navigation.brandLogo)??null,staffLogo:Ha(n.navigation.staffLogo)??null,links:{home:Ue(n.navigation.links.home),about:Ue(n.navigation.links.about),menu:Ue(n.navigation.links.menu),contact:Ue(n.navigation.links.contact),loginCta:Ue(n.navigation.links.loginCta)},style:mn(n.navigation.style,kg)},hero:{title:Ue(n.hero.title),subtitle:Ue(n.hero.subtitle),ctaLabel:Ue(n.hero.ctaLabel),backgroundImage:Ha(n.hero.backgroundImage),historyTitle:Ue(n.hero.historyTitle),reorderCtaLabel:Ue(n.hero.reorderCtaLabel),style:mn(n.hero.style,Eg)},about:{title:Ue(n.about.title),description:Ue(n.about.description),image:Ha(n.about.image),style:mn(n.about.style,Tg)},menu:{title:Ue(n.menu.title),ctaLabel:Ue(n.menu.ctaLabel),loadingLabel:Ue(n.menu.loadingLabel),image:Ha(n.menu.image),style:mn(n.menu.style,Mg)},instagramReviews:{title:Ue(n.instagramReviews.title),subtitle:Ue(n.instagramReviews.subtitle),image:Ha(n.instagramReviews.image),style:mn(n.instagramReviews.style,Ag),reviews:O1(n.instagramReviews.reviews??null)},findUs:{title:Ue(n.findUs.title),addressLabel:Ue(n.findUs.addressLabel),address:Ue(n.findUs.address),cityLabel:Ue(n.findUs.cityLabel),city:Ue(n.findUs.city),hoursLabel:Ue(n.findUs.hoursLabel),hours:Ue(n.findUs.hours),mapLabel:Ue(n.findUs.mapLabel),mapUrl:Ue(n.findUs.mapUrl),style:mn(n.findUs.style,zg)},footer:{text:Ue(n.footer.text),style:mn(n.footer.style,Og)},onlineOrdering:{schedule:{startTime:xh(n.onlineOrdering.schedule.startTime,Nn.onlineOrdering.schedule.startTime),endTime:xh(n.onlineOrdering.schedule.endTime,Nn.onlineOrdering.schedule.endTime)},closedTitle:Ue(n.onlineOrdering.closedTitle),closedSubtitle:Ue(n.onlineOrdering.closedSubtitle)},elementStyles:R1(n.elementStyles,Dg),elementRichText:L1(n.elementRichText,Rg),assets:G1(n.assets,Zd)}),Gs={},Jr=n=>{Gs[n]&&Gs[n].forEach(i=>i())};let xl=null;const bh="site_content",Q1="default",X1=()=>{if(!(xl||typeof me.channel!="function"))try{xl=me.channel("orders-updates").on("postgres_changes",{event:"*",schema:"public",table:"orders"},()=>Jr("orders_updated")).on("postgres_changes",{event:"*",schema:"public",table:"order_items"},()=>Jr("orders_updated")).on("postgres_changes",{event:"*",schema:"public",table:"restaurant_tables"},()=>Jr("orders_updated")).subscribe(n=>{(n==="CHANNEL_ERROR"||n==="CLOSED"||n==="TIMED_OUT")&&(xl=null)})}catch(n){console.warn("Failed to subscribe to real-time order updates",n)}},Re=n=>{if(n.error)throw new Error(n.error.message);return n.data},yn=n=>{if(n.error&&n.status!==406)throw new Error(n.error.message);return n.data??null},ja=n=>{if(n)return new Date(n).getTime()},Ea=n=>{if(n==null)return;if(typeof n=="number")return n;const i=Number(n);return Number.isFinite(i)?i:void 0},pl=n=>{if(n!==void 0)return n===null?null:new Date(n).toISOString()},no=(n,i)=>n.reduce((o,c)=>{const u=i.get(c.ingredient_id);if(!u)return o;let f=u.prix_unitaire;return(u.unite==="kg"||u.unite==="L")&&(f=f/1e3),o+f*c.qte_utilisee},0),K1=n=>{if(!n)return{permissions:{},homePage:void 0};const{[_n]:i,...o}=n;return{permissions:o,homePage:typeof i=="string"?i:void 0}},yh=(n,i)=>{const o={...n};return i?o[_n]=i:delete o[_n],o},Z1=n=>{if(!n)return!1;const i=n.trim().toLowerCase();return i===yg.ADMIN||i==="administrateur"},P1=(n,i)=>{const o={...n};return ps in o||(o[ps]=Z1(i)?"editor":"none"),o},fi=(n,i)=>{const{permissions:o,homePage:c}=K1(n.permissions),u=P1(o,n.name),f={id:n.id,name:n.name,homePage:c,permissions:u};return i&&n.pin&&(f.pin=n.pin),f},vh=n=>n!=null&&n.content?Dd(n.content):null,Wr=n=>({id:n.id,nom:n.nom,unite:n.unite,stock_minimum:n.stock_minimum,stock_actuel:n.stock_actuel,prix_unitaire:n.prix_unitaire}),Rd=n=>({id:n.id,nom:n.nom}),J1=n=>({ingredient_id:n.ingredient_id,qte_utilisee:n.qte_utilisee}),Fs=(n,i)=>{const o=(n.product_recipes??[]).map(J1),c={id:n.id,nom_produit:n.nom_produit,description:n.description??void 0,prix_vente:n.prix_vente,categoria_id:n.categoria_id,estado:n.estado,image:Wh(n.image),recipe:o,is_best_seller:n.is_best_seller??!1,best_seller_rank:n.best_seller_rank??null};return i&&(c.cout_revient=no(o,i)),c},pn=n=>!!n&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(n),Ug=n=>({id:n.id,produitRef:n.produit_id,nom_produit:n.nom_produit,prix_unitaire:Ea(n.prix_unitaire)??0,quantite:n.quantite,excluded_ingredients:n.excluded_ingredients??[],commentaire:n.commentaire??"",estado:n.estado,date_envoi:ja(n.date_envoi)}),W1=(n,i)=>n.length!==i.length?!1:n.every((o,c)=>o===i[c]),e2=(n,i)=>{if(n.produitRef!==i.produitRef||n.nom_produit!==i.nom_produit||n.prix_unitaire!==i.prix_unitaire||n.quantite!==i.quantite||n.commentaire!==i.commentaire||n.estado!==i.estado)return!1;const o=[...n.excluded_ingredients].sort(),c=[...i.excluded_ingredients].sort();return W1(o,c)},t2=(n,i)=>{const o=[...i],c=[];return n.forEach(u=>{const f=o.findIndex(g=>e2(g,u));f!==-1&&c.push(o.splice(f,1)[0])}),[...c,...o]},cs=n=>{const i=(n.order_items??[]).map(Ug),o=Ea(n.total),c=Ea(n.profit),u={id:n.id,type:n.type,table_id:n.table_id??void 0,table_nom:n.table_nom??void 0,couverts:n.couverts??0,statut:n.statut,estado_cocina:n.estado_cocina,date_creation:ja(n.date_creation)??Date.now(),date_envoi_cuisine:ja(n.date_envoi_cuisine),date_listo_cuisine:ja(n.date_listo_cuisine),date_servido:ja(n.date_servido),payment_status:n.payment_status,items:i,total:o??0,profit:c,payment_method:n.payment_method??void 0,payment_receipt_url:n.payment_receipt_url??void 0,receipt_url:n.receipt_url??void 0};return(n.client_nom||n.client_telephone||n.client_adresse)&&(u.clientInfo={nom:n.client_nom??"",telephone:n.client_telephone??"",adresse:n.client_adresse??void 0}),u.subtotal=Ea(n.subtotal)??0,u.total_discount=Ea(n.total_discount)??0,u.promo_code=n.promo_code??void 0,u.applied_promotions=n.applied_promotions?typeof n.applied_promotions=="string"?JSON.parse(n.applied_promotions):n.applied_promotions:[],u},Ud=n=>{const i=n.items.map(w=>Math.max(0,w.prix_unitaire)*Math.max(0,w.quantite)),o=i.reduce((w,D)=>w+D,0),c=Math.max(n.subtotal??0,0),u=o>0?o:c,f=Math.max(n.total_discount??0,0),g=u>0?Math.min(f,u):0,x=i.map(w=>{if(u<=0||w<=0||g<=0)return 0;const D=w/u*g;return Math.min(w,D)}),p=x.reduce((w,D)=>w+D,0),y=g-p;if(Math.abs(y)>1e-6&&x.length>0){const w=x.length-1,D=i[w],C=Math.min(D,Math.max(0,x[w]+y));x[w]=C}const v=x.map((w,D)=>{const C=i[D]-w;return C>0?C:0}),N=v.reduce((w,D)=>w+D,0),j=typeof n.shipping_cost=="number"?n.shipping_cost:0,S=n.total??Math.max(N+j,0);return{grossPerItem:i,discountPerItem:x,netPerItem:v,subtotalBeforeDiscount:u,totalDiscount:g,netRevenueFromItems:N,totalRevenue:S}},a2=n=>({id:n.id,orderId:n.order_id,productId:n.product_id,productName:n.product_name,categoryId:n.category_id,categoryName:n.category_name,quantity:n.quantity,unitPrice:n.unit_price,totalPrice:n.total_price,unitCost:n.unit_cost,totalCost:n.total_cost,profit:n.profit,paymentMethod:n.payment_method??void 0,saleDate:ja(n.sale_date)??Date.now()}),s2=(n,i)=>{if(!n.commande_id)return"libre";const o=i==null?void 0:i.estado_cocina;return!o||o==="no_enviado"?"libre":o==="listo"?"para_entregar":o==="servido"||o==="entregada"?"para_pagar":n.statut==="para_entregar"||n.statut==="para_pagar"?n.statut:"en_cuisine"},Ld=(n,i)=>{const o=n.commande_id?i.get(n.commande_id):void 0,c={id:n.id,nom:n.nom,capacite:n.capacite,statut:s2(n,o),commandeId:n.commande_id??void 0,couverts:n.commande_id?n.couverts??void 0:void 0};return c.commandeId&&o&&(c.estado_cocina=o.estado_cocina,c.date_envoi_cuisine=o.date_envoi_cuisine),c},jh=async n=>{if(!n.commande_id)return Ld(n,new Map);const i=await me.from("orders").select("id, estado_cocina, date_envoi_cuisine").eq("id",n.commande_id).maybeSingle(),o=yn(i),c=o?new Map([[o.id,{estado_cocina:o.estado_cocina,date_envoi_cuisine:ja(o.date_envoi_cuisine)}]]):new Map;return Ld(n,c)},$s=()=>me.from("orders").select(`
        id,
        type,
        table_id,
        table_nom,
        couverts,
        statut,
        estado_cocina,
        date_creation,
        date_envoi_cuisine,
        date_listo_cuisine,
        date_servido,
        payment_status,
        total,
        profit,
        payment_method,
        payment_receipt_url,
        client_nom,
        client_telephone,
        client_adresse,
        receipt_url,
        order_items (
          id,
          order_id,
          produit_id,
          nom_produit,
          prix_unitaire,
          quantite,
          excluded_ingredients,
          commentaire,
          estado,
          date_envoi
        ),
        subtotal,
        total_discount,
        promo_code,
        applied_promotions
      `).order("date_creation",{ascending:!1}),n2=(n,i)=>`
        id,
        nom_produit,
        description,
        prix_vente,
        categoria_id,
        estado,
        image${n?`,
        is_best_seller,
        best_seller_rank`:""}${i?`,
        product_recipes (
          ingredient_id,
          qte_utilisee
        )`:""}
      `,_h=n=>{const i=(n==null?void 0:n.includeBestSellerColumns)!==!1,o=(n==null?void 0:n.includeRecipes)!==!1;let c=me.from("products").select(n2(i,o));return n!=null&&n.orderBy?c=c.order(n.orderBy.column,{ascending:n.orderBy.ascending??!0,nullsFirst:n.orderBy.nullsFirst}):c=c.order("nom_produit"),c},l2=n=>{if(!(n!=null&&n.message))return!1;const i=n.message.toLowerCase();return i.includes("does not exist")&&i.includes("column")&&(i.includes("is_best_seller")||i.includes("best_seller_rank"))},vn=async(n,i)=>{let c=await n(_h({...i,includeBestSellerColumns:!0}),!0);return l2(c.error)&&(c=await n(_h({...i,includeBestSellerColumns:!1}),!1)),c},i2=n=>n==="sur_place"||n==="a_emporter"||n==="pedir_en_linea"?n:"a_emporter",r2=n=>n==="en_cours"||n==="finalisee"||n==="pendiente_validacion"?n:"pendiente_validacion",o2=n=>n==="paid"||n==="unpaid"?n:"unpaid",c2=n=>{if(!n)return null;const i=n.trim().toLowerCase();return i==="tarjeta"||i==="card"||i==="credit_card"||i==="debit_card"||i==="carte"||i==="carte_bancaire"||i==="pago_online"||i==="online"?"tarjeta":i==="efectivo"||i==="cash"||i==="liquide"||i==="contado"?"efectivo":i==="transferencia"||i==="transfer"||i==="bank_transfer"||i==="transfert"?"transferencia":null},Et=async n=>{const i=await $s().eq("id",n).maybeSingle(),o=yn(i);return o?cs(o):null},hl=async()=>{const n=await me.from("ingredients").select("id, nom, unite, stock_minimum, stock_actuel, prix_unitaire").order("nom");return Re(n).map(Wr)},d2=n=>n?typeof n=="string"?n.toLowerCase().includes("permission"):n instanceof Error?n.message.toLowerCase().includes("permission"):typeof n=="object"&&"message"in n?String(n.message??"").toLowerCase().includes("permission"):!1:!1,_d=async n=>{try{return await hl()}catch(i){if(d2(i))return console.warn(`[api.${n}] Impossible de récupérer les ingrédients (permissions insuffisantes). Poursuite avec une liste vide.`,i),[];throw i}},eo=async()=>{const n=await me.from("categories").select("id, nom").order("nom");return Re(n).map(Rd)},Nh=async()=>{const n=await me.from("restaurant_tables").select("id, nom, capacite, statut, commande_id, couverts").order("nom"),i=Re(n),o=i.map(u=>u.commande_id).filter(u=>!!u);let c=new Map;if(o.length>0){const u=await me.from("orders").select("id, estado_cocina, date_envoi_cuisine").in("id",o),f=Re(u);c=new Map(f.map(g=>[g.id,{estado_cocina:g.estado_cocina,date_envoi_cuisine:ja(g.date_envoi_cuisine)}]))}return i.map(u=>Ld(u,c))},vi=(n=new Date)=>{const i=new Date(n);return i.setHours(5,0,0,0),n<i&&i.setDate(i.getDate()-1),i},u2={week:{days:7,label:"7 derniers jours"},month:{days:30,label:"30 derniers jours"}},m2=n=>{const i=u2[n],o=new Date(vi());o.setDate(o.getDate()+1);const c=new Date(o);return c.setDate(c.getDate()-i.days),{config:i,start:c,end:o}},wh=async n=>{if(!n.items.length)return await me.from("sales").delete().eq("order_id",n.id),await me.from("orders").update({profit:0}).eq("id",n.id),0;const i=Array.from(new Set(n.items.map(w=>w.produitRef))),o=i.length>0?vn(w=>w.in("id",i)):vn(w=>w.limit(0)),[c,u,f]=await Promise.all([eo(),hl(),o]),g=new Map(u.map(w=>[w.id,w])),x=new Map(c.map(w=>[w.id,w.nom]));let p=[];i.length>0&&(p=Re(f));const y=new Map(p.map(w=>{const D=Fs(w,g);return[D.id,D]})),v=pl(n.date_servido)??new Date().toISOString(),N=Ud(n),j=n.items.map((w,D)=>({item:w,index:D})).filter(({item:w})=>pn(w.produitRef)).map(({item:w,index:D})=>{const C=y.get(w.produitRef),L=C?no(C.recipe,g):0,q=(C==null?void 0:C.categoria_id)??"unknown",X=C?x.get(q)??"Sans catégorie":"Sans catégorie",A=N.netPerItem[D]??w.prix_unitaire*w.quantite,F=w.quantite>0?A/w.quantite:0,te=L*w.quantite,J=A-te;return{order_id:n.id,product_id:w.produitRef,product_name:w.nom_produit,category_id:q,category_name:X,quantity:w.quantite,unit_price:F,total_price:A,unit_cost:L,total_cost:te,profit:J,payment_method:n.payment_method??null,sale_date:v}}),S=j.reduce((w,D)=>w+D.profit,0);return await me.from("sales").delete().eq("order_id",n.id),await me.from("sales").insert(j),await me.from("orders").update({profit:S}).eq("id",n.id),S},Ba={subscribe:(n,i)=>(Gs[n]||(Gs[n]=[]),Gs[n].push(i),n==="orders_updated"&&X1(),()=>{var o;Gs[n]=(Gs[n]??[]).filter(c=>c!==i),n==="orders_updated"&&((o=Gs[n])==null?void 0:o.length)===0&&xl&&(typeof me.removeChannel=="function"&&me.removeChannel(xl),xl=null)}),publish:n=>{Jr(n)}},yt=n=>{(n==null?void 0:n.includeNotifications)!==!1&&Ba.publish("notifications_updated"),Ba.publish("orders_updated")},ye={notifications:Ba,getSiteContent:async()=>{const n=await me.from(bh).select("id, content, updated_at").order("updated_at",{ascending:!1}).limit(1).maybeSingle(),i=yn(n);return vh(i)},updateSiteContent:async n=>{const i=V1(n),o=await me.from(bh).upsert({id:Q1,content:i},{onConflict:"id"}).select("id, content, updated_at").single(),c=Re(o),u=vh(c);if(!u)throw new Error("Contenu du site introuvable après la mise à jour.");return u},getRoles:async()=>{const n=await me.from("roles").select("id, name, pin, permissions").order("name");return Re(n).map(o=>fi(o,!0))},getRoleById:async n=>{const i=await me.from("roles").select("id, name, permissions").eq("id",n).maybeSingle(),o=yn(i);return o?fi(o,!1):null},createRole:async n=>{const i=await me.from("roles").insert({name:n.name,pin:n.pin,permissions:yh(n.permissions,n.homePage)}).select("id, name, pin, permissions").single(),o=Re(i);return Ba.publish("notifications_updated"),fi(o,!0)},updateRole:async(n,i)=>{const o=await me.from("roles").update({name:i.name,pin:i.pin,permissions:yh(i.permissions,i.homePage)}).eq("id",n).select("id, name, pin, permissions").single(),c=Re(o);return Ba.publish("notifications_updated"),fi(c,!0)},deleteRole:async n=>{const i=await me.from("roles").delete().eq("id",n);Re(i),Ba.publish("notifications_updated")},loginWithPin:async n=>{const i=await me.from("roles").select("id, name, permissions").eq("pin",n).maybeSingle(),o=yn(i);if(!o)return null;const c=fi(o,!1);try{await dh(c.id,c.name)}catch(u){console.warn("Failed to enregistrer la connexion du rôle",u)}return c},getDashboardStats:async(n="week")=>{var qt;const{config:i,start:o,end:c}=m2(n),u=o.toISOString(),f=c.toISOString(),g=new Date(o);g.setDate(g.getDate()-i.days);const x=g.toISOString(),y=vi().toISOString(),[v,N,j,S,w,D]=await Promise.all([Nh(),hl(),eo(),vn(be=>be),$s().eq("statut","finalisee").gte("date_creation",y),$s().eq("statut","finalisee").gte("date_creation",x).lt("date_creation",f)]),L=Re(w).map(cs),X=Re(D).map(cs),A=X.filter(be=>be.date_creation>=o.getTime()),F=X.filter(be=>be.date_creation<o.getTime()),te=new Map(N.map(be=>[be.id,be])),J=Re(S),Q=new Map(J.map(be=>{const Te=Fs(be,te);return[Te.id,Te]})),oe=new Map(j.map(be=>[be.id,be.nom])),H=new Map,W=be=>{const Te=H.get(be.id);if(Te)return Te;const ve=Ud(be);return H.set(be.id,ve),ve},T=be=>be.reduce((Te,ve)=>{const ht=W(ve);return Te+ve.items.reduce((st,rt,At)=>{const gt=Q.get(rt.produitRef),dt=gt?no(gt.recipe,te):0,Na=ht.netPerItem[At]??rt.prix_unitaire*rt.quantite;return st+(Na-dt*rt.quantite)},0)},0),K=pl((qt=L[0])==null?void 0:qt.date_servido)??new Date().toISOString(),B=L.flatMap(be=>{const Te=W(be);return be.items.map((ve,ht)=>{const st=Q.get(ve.produitRef),rt=st?no(st.recipe,te):0,At=(st==null?void 0:st.categoria_id)??"unknown",gt=st?oe.get(At)??"Sans catégorie":"Sans catégorie",dt=Te.netPerItem[ht]??ve.prix_unitaire*ve.quantite,Na=ve.quantite>0?dt/ve.quantite:0,ut=rt*ve.quantite,sa=dt-ut;return{order_id:be.id,product_id:ve.produitRef,product_name:ve.nom_produit,category_id:At,category_name:gt,quantity:ve.quantite,unit_price:Na,total_price:dt,unit_cost:rt,total_cost:ut,profit:sa,payment_method:be.payment_method??null,sale_date:K}})}),le=L.reduce((be,Te)=>be+W(Te).totalRevenue,0);B.reduce((be,Te)=>be+Te.profit,0),L.reduce((be,Te)=>be+(Te.couverts??0),0),L.length>0&&le/L.length;const _=A.reduce((be,Te)=>be+W(Te).totalRevenue,0),E=F.reduce((be,Te)=>be+W(Te).totalRevenue,0),z=T(A),Z=T(F),$=A.reduce((be,Te)=>be+(Te.couverts??0),0),R=F.reduce((be,Te)=>be+(Te.couverts??0),0),I=A.length>0?_/A.length:0,M=A.length,re=F.length,ue=new Map;A.forEach(be=>{const Te=W(be);be.items.forEach((ve,ht)=>{const st=Q.get(ve.produitRef),rt=st?oe.get(st.categoria_id)??"Sans catégorie":"Sans catégorie",At=Te.netPerItem[ht]??ve.prix_unitaire*ve.quantite;ue.set(rt,(ue.get(rt)??0)+At)})});const ge=Array.from(ue.entries()).map(([be,Te])=>({name:be,value:Te})),ae=[...A].sort((be,Te)=>Te.date_creation-be.date_creation).slice(0,5),ce=Array.from(Q.values()).filter(be=>be.is_best_seller).sort((be,Te)=>{const ve=be.best_seller_rank??Number.POSITIVE_INFINITY,ht=Te.best_seller_rank??Number.POSITIVE_INFINITY;return ve===ht?be.nom_produit.localeCompare(Te.nom_produit):ve-ht}).slice(0,6),_e=v.filter(be=>be.statut!=="libre").length,xe=v.reduce((be,Te)=>be+(Te.couverts??0),0),Ae=L.filter(be=>be.estado_cocina==="recibido").length,Ke=N.filter(be=>be.stock_actuel<=be.stock_minimum),Mt=(be,Te,ve)=>{const ht=Te.getTime(),st=ve.getTime();return be.reduce((rt,At)=>At.date_creation>=ht&&At.date_creation<st?rt+W(At).totalRevenue:rt,0)},Vt=Array.from({length:i.days}).map((be,Te)=>{const ve=new Date(o);ve.setDate(ve.getDate()+Te);const ht=new Date(ve);ht.setDate(ht.getDate()+1);const st=new Date(g);st.setDate(st.getDate()+Te);const rt=new Date(st);return rt.setDate(rt.getDate()+1),{name:i.days===7?Te===i.days-1?"Auj":`J-${i.days-1-Te}`:ve.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit"}),ventes:Mt(A,ve,ht),ventesPeriodePrecedente:Mt(F,st,rt)}});return{period:n,periodLabel:i.label,periodStart:u,periodEnd:f,ventesPeriode:_,ventesPeriodePrecedente:E,beneficePeriode:z,beneficePeriodePrecedente:Z,clientsPeriode:$,clientsPeriodePrecedente:R,panierMoyen:I,commandesPeriode:M,commandesPeriodePrecedente:re,tablesOccupees:_e,clientsActuels:xe,commandesEnCuisine:Ae,ingredientsStockBas:Ke,ventesPeriodeSeries:Vt,ventesParCategorie:ge,recentOrders:ae,bestSellerProducts:ce}},getSalesByProduct:async n=>{const i=y=>{if(y)return typeof y=="string"?y:y.toISOString()},o=i(n==null?void 0:n.start)??vi().toISOString(),c=i(n==null?void 0:n.end);let u=me.from("sales").select("product_id, product_name, total_price").gte("sale_date",o);c&&(u=u.lt("sale_date",c));const f=await u,g=Re(f),x=new Map;g.forEach(y=>{const v=x.get(y.product_id)??{name:y.product_name,value:0};v.value+=y.total_price,x.set(y.product_id,v)});const p=Array.from(x.values()).sort((y,v)=>v.value-y.value);if(p.length>6){const y=p.slice(0,6),v=p.slice(6).reduce((N,j)=>N+j.value,0);return[...y,{name:"Autres",value:v}]}return p},getTables:async()=>Nh(),createTable:async n=>{const i=await me.from("restaurant_tables").insert({nom:n.nom,capacite:n.capacite,couverts:n.couverts??null}).select("id, nom, capacite, statut, commande_id, couverts").single(),o=Re(i);return yt(),jh(o)},updateTable:async(n,i)=>{const o={};i.nom!==void 0&&(o.nom=i.nom),i.capacite!==void 0&&(o.capacite=i.capacite),i.couverts!==void 0&&(o.couverts=i.couverts??null);const c=await me.from("restaurant_tables").update(o).eq("id",n).select("id, nom, capacite, statut, commande_id, couverts").single(),u=Re(c);return yt(),jh(u)},deleteTable:async n=>{const i=await me.from("restaurant_tables").delete().eq("id",n);Re(i),yt()},getIngredients:async()=>hl(),getProducts:async()=>{const[n,i]=await Promise.all([vn(u=>u.neq("estado","archive")),_d("getProducts")]),o=Re(n),c=i.length>0?new Map(i.map(u=>[u.id,u])):void 0;return o.map(u=>Fs(u,c))},getProductById:async n=>{const[i,o]=await Promise.all([vn(f=>f.eq("id",n).maybeSingle()),_d("getProductById")]),c=yn(i);if(!c)return null;const u=o.length>0?new Map(o.map(f=>[f.id,f])):void 0;return Fs(c,u)},getBestSellerProducts:async()=>{const[n,i]=await Promise.all([vn((u,f)=>f?u.eq("is_best_seller",!0).order("best_seller_rank",{ascending:!0,nullsFirst:!1}).limit(6):u.limit(0),{includeRecipes:!1}),_d("getBestSellerProducts")]),o=Re(n),c=i.length>0?new Map(i.map(u=>[u.id,u])):void 0;return o.filter(u=>u.estado!=="archive").sort((u,f)=>{const g=u.best_seller_rank??Number.POSITIVE_INFINITY,x=f.best_seller_rank??Number.POSITIVE_INFINITY;return g-x}).map(u=>Fs(u,c)).filter(u=>u.is_best_seller).slice(0,6)},getCategories:async()=>eo(),addProduct:async n=>{const i=ms(n.image),o=await me.from("products").insert({nom_produit:n.nom_produit,description:n.description??null,prix_vente:n.prix_vente,categoria_id:n.categoria_id,estado:n.estado,image:i,is_best_seller:n.is_best_seller??!1,best_seller_rank:n.is_best_seller?n.best_seller_rank:null}).select("id, nom_produit, description, prix_vente, categoria_id, estado, image, is_best_seller, best_seller_rank").single(),c=Re(o);return n.recipe.length>0&&await me.from("product_recipes").insert(n.recipe.map(u=>({product_id:c.id,ingredient_id:u.ingredient_id,qte_utilisee:u.qte_utilisee}))),yt(),Fs({...c,product_recipes:n.recipe.map(u=>({ingredient_id:u.ingredient_id,qte_utilisee:u.qte_utilisee}))})},createProduct:async(n,i)=>{let o;i&&(o=await me.storage.from("product-images").upload(`${n.nom_produit}-${Date.now()}`,i).then(f=>{var g;if(f.error)throw f.error;return(g=f.data)==null?void 0:g.path}));const c=await me.from("products").insert({nom_produit:n.nom_produit,description:n.description??null,prix_vente:n.prix_vente,categoria_id:n.categoria_id,estado:n.estado,image:o??null}).select("id, nom_produit, description, prix_vente, categoria_id, estado, image").single(),u=Re(c);return n.recipe.length>0&&await me.from("product_recipes").insert(n.recipe.map(f=>({product_id:u.id,ingredient_id:f.ingredient_id,qte_utilisee:f.qte_utilisee}))),yt(),Fs({...u,product_recipes:n.recipe.map(f=>({...f,product_id:u.id}))})},updateProduct:async(n,i,o)=>{let c;o?c=await me.storage.from("product-images").upload(`${i.nom_produit??n}-${Date.now()}`,o).then(g=>{var x;if(g.error)throw g.error;return(x=g.data)==null?void 0:x.path}):"image"in i&&i.image===null&&(c=null);const u={};i.nom_produit!==void 0&&(u.nom_produit=i.nom_produit),i.description!==void 0&&(u.description=i.description),i.prix_vente!==void 0&&(u.prix_vente=i.prix_vente),i.categoria_id!==void 0&&(u.categoria_id=i.categoria_id),i.estado!==void 0&&(u.estado=i.estado),c!==void 0&&(u.image=c),Object.keys(u).length>0&&await me.from("products").update(u).eq("id",n),i.recipe&&(await me.from("product_recipes").delete().eq("product_id",n),i.recipe.length>0&&await me.from("product_recipes").insert(i.recipe.map(g=>({product_id:n,ingredient_id:g.ingredient_id,qte_utilisee:g.qte_utilisee})))),yt();const f=await ye.getProductById(n);if(!f)throw new Error("Product not found after update");return f},deleteProduct:async n=>{const i=await ye.getProductById(n);if(i!=null&&i.image){const o=i.image.split("/").pop();o&&await me.storage.from("product-images").remove([o])}await me.from("product_recipes").delete().eq("product_id",n),await me.from("products").delete().eq("id",n),yt()},createCategory:async n=>{const i=await me.from("categories").insert(n).select("id, nom").single(),o=Re(i);return yt(),Rd(o)},updateCategory:async(n,i)=>{const o=await me.from("categories").update(i).eq("id",n).select("id, nom").single(),c=Re(o);return yt(),Rd(c)},deleteCategory:async n=>{await me.from("categories").delete().eq("id",n),yt()},createIngredient:async n=>{const i=await me.from("ingredients").insert({nom:n.nom,unite:n.unite,stock_minimum:n.stock_minimum,stock_actuel:0,prix_unitaire:0}).select("id, nom, unite, stock_minimum, stock_actuel, prix_unitaire").single(),o=Re(i);return Ba.publish("notifications_updated"),Wr(o)},updateIngredient:async(n,i)=>{const o=await me.from("ingredients").update(i).eq("id",n).select("id, nom, unite, stock_minimum, stock_actuel, prix_unitaire").single(),c=Re(o);return Ba.publish("notifications_updated"),Wr(c)},resupplyIngredient:async(n,i,o)=>{if(!Number.isFinite(i)||i<=0)throw new Error("Quantity must be a positive number");if(!Number.isFinite(o)||o<0)throw new Error("Unit price must be a non-negative number");const c=await me.from("ingredients").select("id, nom, unite, stock_minimum, stock_actuel, prix_unitaire").eq("id",n).single(),u=Re(c),f=Ea(u.stock_actuel)??0,g=Ea(u.prix_unitaire)??0,x=Number(i),p=f+x,y=f*g+x*o,v=p>0?y/p:0,N=await me.from("ingredients").update({stock_actuel:p,prix_unitaire:v}).eq("id",n).select("id, nom, unite, stock_minimum, stock_actuel, prix_unitaire").single(),j=Re(N),S=await me.from("purchases").insert({ingredient_id:n,quantite_achetee:x,prix_total:x*o,date_achat:new Date().toISOString()});if(S.error)throw new Error(S.error.message);return Ba.publish("notifications_updated"),Wr(j)},deleteIngredient:async n=>{const i=await me.from("product_recipes").select("ingredient_id, product_id, qte_utilisee").eq("ingredient_id",n).limit(1),{data:o}=i;return o&&o.length>0?{success:!1}:(await me.from("ingredients").delete().eq("id",n),Ba.publish("notifications_updated"),{success:!0})},getKitchenOrders:async()=>{const n=await $s().eq("estado_cocina","recibido"),o=Re(n).map(cs),c=[];return o.forEach(u=>{const f=u.items.filter(x=>x.estado==="enviado");if(f.length===0)return;f.reduce((x,p)=>{const y=p.date_envoi??u.date_envoi_cuisine??u.date_creation,v=x.get(y)??[];return v.push(p),x.set(y,v),x},new Map).forEach((x,p)=>{c.push({...u,items:x,date_envoi_cuisine:p,ticketKey:`${u.id}-${p}`})})}),c.sort((u,f)=>{const g=u.date_envoi_cuisine??u.date_creation,x=f.date_envoi_cuisine??f.date_creation;return g-x})},getTakeawayOrders:async()=>{const n=await $s().in("type",["a_emporter","pedir_en_linea"]),o=Re(n).map(cs);return{pending:o.filter(c=>c.statut==="pendiente_validacion"&&c.estado_cocina==="no_enviado"),ready:o.filter(c=>c.estado_cocina==="listo")}},getOrderById:async n=>await Et(n)??void 0,createOrGetOrderByTableId:async(n,i)=>{const o=await me.from("restaurant_tables").select("id, nom, capacite, statut, commande_id, couverts").eq("id",n).maybeSingle(),c=yn(o);if(!c)throw new Error("Table not found");if(c.commande_id){const y=await Et(c.commande_id);if(y)return y}const u=(i==null?void 0:i.couverts)??c.couverts??null;if(!Number.isInteger(u)||u<=0)throw new Error("Le nombre de couverts sélectionné est requis pour ouvrir la table.");const f=u,g=new Date().toISOString(),x=await me.from("orders").insert({type:"sur_place",table_id:c.id,table_nom:c.nom,couverts:f,statut:"en_cours",estado_cocina:"no_enviado",date_creation:g,payment_status:"unpaid",total:0}).select("*").single(),p=Re(x);return await me.from("restaurant_tables").update({statut:"en_cuisine",commande_id:p.id,couverts:f}).eq("id",n),yt(),cs(p)},cancelUnsentTableOrder:async n=>{const i=await Et(n);!i||i.estado_cocina!=="no_enviado"||i.items.some(c=>c.estado!=="en_attente")||(await me.from("order_items").delete().eq("order_id",n),await me.from("orders").delete().eq("id",n),i.table_id&&await me.from("restaurant_tables").update({statut:"libre",commande_id:null,couverts:null}).eq("id",i.table_id),yt())},addOrderItems:async(n,i)=>{const o=new Date().toISOString(),c=i.map(f=>({...f,order_id:n,estado:"en_attente",date_envoi:o}));await me.from("order_items").insert(c),yt();const u=await Et(n);if(!u)throw new Error("Order not found after adding items");return u},updateOrderItems:async(n,i)=>{const o=await Et(n);if(!o)throw new Error("Order not found");const c=new Set(o.items.map(v=>v.id)),u=new Set(i.map(v=>v.id)),f=i.filter(v=>!c.has(v.id)),g=i.filter(v=>c.has(v.id)),x=o.items.filter(v=>!u.has(v.id)),p=new Date().toISOString();f.length>0&&await me.from("order_items").insert(f.map(v=>({...v,order_id:n,estado:"en_attente",date_envoi:p}))),g.length>0&&await Promise.all(g.map(v=>me.from("order_items").update({produit_id:v.produitRef,nom_produit:v.nom_produit,prix_unitaire:v.prix_unitaire,quantite:v.quantite,excluded_ingredients:v.excluded_ingredients??[],commentaire:v.commentaire,estado:v.estado??"en_attente",date_envoi:v.date_envoi?new Date(v.date_envoi).toISOString():p}).eq("id",v.id))),x.length>0&&await me.from("order_items").delete().in("id",x.map(v=>v.id)),yt();const y=await Et(n);if(!y)throw new Error("Order not found after item update");return y},updateOrder:async(n,i,o)=>{const{items:c,clientInfo:u,removedItemIds:f=[],...g}=i;let x=[];if(c){const j=await Et(n);if(!j)throw new Error("Order not found");x=j.items;const S=new Set(x.map(C=>C.id)),w=c.filter(C=>!pn(C.id)||!S.has(C.id)),D=c.filter(C=>pn(C.id)&&S.has(C.id));w.length>0&&await me.from("order_items").insert(w.map(C=>({...pn(C.id)?{id:C.id}:{},order_id:n,produit_id:C.produitRef,nom_produit:C.nom_produit,prix_unitaire:C.prix_unitaire,quantite:C.quantite,excluded_ingredients:C.excluded_ingredients??[],commentaire:C.commentaire??null,estado:C.estado??"en_attente",date_envoi:C.date_envoi?new Date(C.date_envoi).toISOString():null}))),D.length>0&&await Promise.all(D.map(C=>me.from("order_items").update({produit_id:C.produitRef,nom_produit:C.nom_produit,prix_unitaire:C.prix_unitaire,quantite:C.quantite,excluded_ingredients:C.excluded_ingredients??[],commentaire:C.commentaire??null,estado:C.estado??"en_attente",date_envoi:C.date_envoi?new Date(C.date_envoi).toISOString():null}).eq("id",C.id)))}const p={};g.type&&(p.type=g.type),g.table_id!==void 0&&(p.table_id=g.table_id),g.table_nom!==void 0&&(p.table_nom=g.table_nom),g.couverts!==void 0&&(p.couverts=g.couverts),g.statut&&(p.statut=g.statut),g.estado_cocina&&(p.estado_cocina=g.estado_cocina),g.payment_status&&(p.payment_status=g.payment_status),g.payment_method!==void 0&&(p.payment_method=g.payment_method),g.payment_receipt_url!==void 0&&(p.payment_receipt_url=g.payment_receipt_url),g.receipt_url!==void 0&&(p.receipt_url=g.receipt_url),g.total!==void 0&&(p.total=g.total),g.profit!==void 0&&(p.profit=g.profit),g.date_creation!==void 0&&(p.date_creation=pl(g.date_creation)),g.date_envoi_cuisine!==void 0&&(p.date_envoi_cuisine=pl(g.date_envoi_cuisine)),g.date_listo_cuisine!==void 0&&(p.date_listo_cuisine=pl(g.date_listo_cuisine)),g.date_servido!==void 0&&(p.date_servido=pl(g.date_servido)),c&&(p.total=c.reduce((j,S)=>j+S.prix_unitaire*S.quantite,0));const y=new Set((c??[]).map(j=>j.id)),v=new Set;f.filter(j=>pn(j)).forEach(j=>v.add(j)),x.filter(j=>pn(j.id)&&!y.has(j.id)).forEach(j=>v.add(j.id)),v.size>0&&await me.from("order_items").delete().in("id",Array.from(v)),u&&(p.client_nom=(u==null?void 0:u.nom)??null,p.client_telephone=(u==null?void 0:u.telephone)??null,p.client_adresse=(u==null?void 0:u.adresse)??null),Object.keys(p).length>0&&await me.from("orders").update(p).eq("id",n),yt({includeNotifications:(o==null?void 0:o.includeNotifications)??!0});const N=await Et(n);if(!N)throw new Error("Order not found after update");return c?{...N,items:t2(c,N.items)}:N},sendOrderToKitchen:async(n,i)=>{const o=await Et(n);if(!o)throw new Error("Order not found");const c=o.items.filter(p=>p.estado==="en_attente"),u=(()=>{if(!i||i.length===0)return c;const p=new Set(i);return c.filter(y=>p.has(y.id))})();if(u.length===0)return o;const f=u.filter(p=>pn(p.id)).map(p=>p.id);if(f.length===0)return o;const g=new Date().toISOString();await me.from("order_items").update({estado:"enviado",date_envoi:g}).in("id",f),await me.from("orders").update({estado_cocina:"recibido",date_envoi_cuisine:g}).eq("id",n),o.table_id&&await me.from("restaurant_tables").update({statut:"en_cuisine"}).eq("id",o.table_id),yt();const x=await Et(n);if(!x)throw new Error("Order not found after sending to kitchen");return x},markOrderAsReady:async n=>{const i=new Date().toISOString();await me.from("orders").update({estado_cocina:"listo",date_listo_cuisine:i}).eq("id",n);const o=await Et(n);o!=null&&o.table_id&&await me.from("restaurant_tables").update({statut:"para_entregar"}).eq("id",o.table_id),yt();const c=await Et(n);if(!c)throw new Error("Order not found after ready update");return c},markOrderAsServed:async n=>{const i=await Et(n);if(!i)throw new Error("Order not found");const o=new Date().toISOString();await me.from("orders").update({estado_cocina:"servido",date_servido:o}).eq("id",n),i.table_id&&await me.from("restaurant_tables").update({statut:"para_pagar"}).eq("id",i.table_id),yt();const c=await Et(n);if(!c)throw new Error("Order not found after serve update");return c},finalizeOrder:async(n,i,o)=>{const c=await Et(n);if(!c)throw new Error("Order not found");const u=new Date().toISOString();await me.from("orders").update({statut:"finalisee",payment_status:"paid",payment_method:i,payment_receipt_url:o??null,date_servido:u,total:c.total,subtotal:c.subtotal,total_discount:c.total_discount,promo_code:c.promo_code,applied_promotions:c.applied_promotions?JSON.stringify(c.applied_promotions):null}).eq("id",n),c.table_id&&await me.from("restaurant_tables").update({statut:"libre",commande_id:null,couverts:null}).eq("id",c.table_id),yt();const f=await Et(n);if(!f)throw new Error("Order not found after finalization");const g=await wh(f);return{...f,profit:g}},submitCustomerOrder:async n=>{var g,x,p;const o=new Date().toISOString(),c=await me.from("orders").insert({type:"a_emporter",couverts:1,statut:"pendiente_validacion",estado_cocina:"no_enviado",date_creation:o,payment_status:"unpaid",total:n.total??n.items.reduce((y,v)=>y+v.prix_unitaire*v.quantite,0),client_nom:((g=n.clientInfo)==null?void 0:g.nom)??null,client_telephone:((x=n.clientInfo)==null?void 0:x.telephone)??null,client_adresse:((p=n.clientInfo)==null?void 0:p.adresse)??null,receipt_url:n.receipt_url??null,subtotal:n.subtotal??null,total_discount:n.total_discount??null,promo_code:n.promo_code??null,applied_promotions:n.applied_promotions?JSON.stringify(n.applied_promotions):null}).select("*").single(),u=Re(c);if(n.items.length>0){const y=n.items.map(N=>{const j=N.produitRef&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(N.produitRef);return{order_id:u.id,produit_id:j?N.produitRef:null,nom_produit:N.nom_produit,prix_unitaire:N.prix_unitaire,quantite:N.quantite,excluded_ingredients:N.excluded_ingredients??[],commentaire:N.commentaire,estado:N.estado??"en_attente",date_envoi:N.date_envoi?new Date(N.date_envoi).toISOString():null}}),v=await me.from("order_items").insert(y);if(v.error)throw console.error("Error inserting order items:",v.error),new Error(`Failed to insert order items: ${v.error.message}`)}yt();const f=await Et(u.id);if(!f)throw new Error("Order not found after creation");return f},getCustomerOrderStatus:async n=>Et(n),validateTakeawayOrder:async n=>{const i=new Date().toISOString(),o=await me.from("orders").update({statut:"en_cours",estado_cocina:"recibido",payment_status:"paid",payment_method:"tarjeta",date_envoi_cuisine:i}).eq("id",n);if(o.error)throw console.error("Failed to update takeaway order status",o.error),new Error(`Failed to update takeaway order status: ${o.error.message}`);const c=await me.from("order_items").update({estado:"enviado",date_envoi:i}).eq("order_id",n);if(c.error)throw console.error("Failed to mark takeaway order items as sent",c.error),new Error(`Failed to mark takeaway order items as sent: ${c.error.message}`);yt();const u=await Et(n);if(!u)throw new Error("Order not found after validation");return u},markTakeawayAsDelivered:async n=>{await me.from("orders").update({statut:"finalisee",estado_cocina:"entregada",payment_method:"transferencia"}).eq("id",n),yt();const i=await Et(n);if(!i)throw new Error("Order not found after delivery");const o=await wh(i);return{...i,profit:o}},getNotificationCounts:async()=>{const n=await $s(),o=Re(n).map(cs),c=u=>u.type==="a_emporter"||u.type==="pedir_en_linea";return{pendingTakeaway:o.filter(u=>c(u)&&u.statut==="pendiente_validacion"&&u.estado_cocina==="no_enviado").length,readyTakeaway:o.filter(u=>c(u)&&u.estado_cocina==="listo").length,kitchenOrders:o.filter(u=>u.estado_cocina==="recibido").length,lowStockIngredients:(await hl()).filter(u=>u.stock_actuel<=u.stock_minimum).length,readyForService:o.filter(u=>u.type==="sur_place"&&u.estado_cocina==="listo").length}},generateDailyReport:async()=>{const n=new Date,i=vi(n),o=i.toISOString();mh(o);const[c,u,f,g]=await Promise.all([$s().eq("statut","finalisee"),eo(),hl(),vn(T=>T)]);let x=[],p=!1;try{x=await uh(o)}catch(T){console.warn("Failed to fetch role logins for daily report",T),p=!0}const v=Re(c).map(cs),N=i.getTime(),j=n.getTime(),S=v.filter(T=>{const K=T.date_servido??T.date_listo_cuisine??T.date_creation;return K>=N&&K<=j}),w=new Map,D=T=>{const K=w.get(T.id);if(K)return K;const B=Ud(T);return w.set(T.id,B),B},C=S.reduce((T,K)=>T+(K.type==="sur_place"?Math.max(K.couverts??0,0):0),0),L=S.filter(T=>T.type==="pedir_en_linea").length,q=C+L;let X=0,A=0;const F=new Map(f.map(T=>[T.id,T])),te=Re(g),J=new Map(te.map(T=>{const K=Fs(T,F);return[K.id,K]})),Q=new Map(u.map(T=>[T.id,T.nom])),oe=new Map;S.forEach(T=>{const K=D(T);X+=K.totalRevenue,A+=K.totalDiscount,T.items.forEach((B,le)=>{const _=J.get(B.produitRef),E=_?Q.get(_.categoria_id)??"Sans catégorie":"Sans catégorie",z=_?_.categoria_id:"unknown",Z=oe.get(z)??{categoryName:E,products:[]},$=Z.products.find(I=>I.id===B.produitRef),R=K.netPerItem[le]??B.prix_unitaire*B.quantite;$?($.quantity+=B.quantite,$.totalSales+=R):Z.products.push({id:B.produitRef,name:B.nom_produit,quantity:B.quantite,totalSales:R}),oe.set(z,Z)})}),oe.forEach(T=>{T.products.sort((K,B)=>B.quantity-K.quantity)});const H=f.filter(T=>T.stock_actuel<=T.stock_minimum),W=S.length>0?X/S.length:0;return{generatedAt:n.toISOString(),startDate:i.toISOString(),clientsDuJour:q,clientsSurPlace:C,clientsEnLigne:L,panierMoyen:W,ventesDuJour:X,totalPromotionsApplied:A,soldProducts:Array.from(oe.values()),lowStockIngredients:H,roleLogins:x,roleLoginsUnavailable:p}},getSalesHistory:async()=>{const n=await me.from("sales").select("*").order("sale_date",{ascending:!1});return Re(n).map(a2)},getFinalizedOrders:async()=>{const n=await $s().eq("statut","finalisee");return Re(n).map(cs)},createOrder:async n=>{var v,N,j;const i=i2(n.order_type??n.type),o=r2(n.status??n.statut),c=o2(n.payment_status),u=c2(n.payment_method),f={type:i,statut:o,estado_cocina:"no_enviado",payment_status:c,date_creation:new Date().toISOString(),total:n.total??0,subtotal:n.subtotal??0,total_discount:n.total_discount??0,promo_code:n.promo_code||null,applied_promotions:n.applied_promotions?JSON.stringify(n.applied_promotions):null,payment_method:u,payment_receipt_url:n.receipt_url||null,receipt_url:n.receipt_url||null,client_nom:n.client_name||((v=n.clientInfo)==null?void 0:v.nom)||null,client_telephone:n.client_phone||((N=n.clientInfo)==null?void 0:N.telephone)||null,client_adresse:n.client_address||((j=n.clientInfo)==null?void 0:j.adresse)||null},g=await me.from("orders").insert(f).select(`
        id,
        type,
        table_id,
        table_nom,
        couverts,
        statut,
        estado_cocina,
        date_creation,
        date_envoi_cuisine,
        date_listo_cuisine,
        date_servido,
        payment_status,
        total,
        profit,
        payment_method,
        payment_receipt_url,
        client_nom,
        client_telephone,
        client_adresse,
        receipt_url,
        subtotal,
        total_discount,
        promo_code,
        applied_promotions
      `).single(),x=Re(g),p=[];if(n.items&&n.items.length>0){const S=n.items.map(C=>({order_id:x.id,produit_id:C.produitRef,nom_produit:C.nom_produit,prix_unitaire:C.prix_unitaire,quantite:C.quantite,excluded_ingredients:C.excluded_ingredients||[],commentaire:C.commentaire||null,estado:"en_attente"})),w=await me.from("order_items").insert(S).select("*"),D=Re(w);p.push(...D.map(Ug))}const y={id:x.id,type:x.type,table_id:x.table_id??void 0,table_nom:x.table_nom??void 0,couverts:x.couverts??0,statut:x.statut,estado_cocina:x.estado_cocina,date_creation:ja(x.date_creation)??Date.now(),date_envoi_cuisine:ja(x.date_envoi_cuisine),date_listo_cuisine:ja(x.date_listo_cuisine),date_servido:ja(x.date_servido),payment_status:x.payment_status,items:p,total:Ea(x.total)??0,profit:Ea(x.profit),payment_method:x.payment_method??void 0,payment_receipt_url:x.payment_receipt_url??void 0,receipt_url:x.receipt_url??void 0,subtotal:Ea(x.subtotal),total_discount:Ea(x.total_discount),promo_code:x.promo_code??void 0,applied_promotions:x.applied_promotions?typeof x.applied_promotions=="string"?JSON.parse(x.applied_promotions):x.applied_promotions:void 0};return(x.client_nom||x.client_telephone||x.client_adresse)&&(y.clientInfo={nom:x.client_nom??"",telephone:x.client_telephone??"",adresse:x.client_adresse??void 0}),yt({includeNotifications:!0}),y},logins:{fetchSince:uh,clearBefore:mh,log:dh},getOnlineOrderingSchedules:async()=>{const n=await me.from("online_ordering_schedules").select("day_of_week, start_time, end_time, closed").order("day_of_week"),i=Re(n);if(i.length===0)return null;const o={};for(const c of i)o[c.day_of_week]={startTime:c.start_time,endTime:c.end_time,closed:c.closed};return o},updateOnlineOrderingSchedules:async n=>{const o=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].map(g=>({day_of_week:g,start_time:n[g].startTime,end_time:n[g].endTime,closed:n[g].closed})),c=await me.from("online_ordering_schedules").upsert(o,{onConflict:"day_of_week"}).select("day_of_week, start_time, end_time, closed"),u=Re(c),f={};for(const g of u)f[g.day_of_week]={startTime:g.start_time,endTime:g.end_time,closed:g.closed};return f}};let Hr=null;const Ci=()=>{const[n,i]=h.useState(Hr),[o,c]=h.useState(!0),[u,f]=h.useState(null),g=h.useCallback(async()=>{c(!0);try{const p=await ye.getSiteContent(),y=Dd(p??void 0);Hr=y,i(y),f(null)}catch(p){console.error("Failed to fetch site content",p),Hr=Nn,i(Nn),f(p instanceof Error?p.message:"Impossible de charger le contenu du site.")}finally{c(!1)}},[]),x=h.useCallback(async p=>{const y=await ye.updateSiteContent(p),v=Dd(y);return i(v),Hr=v,v},[]);return h.useEffect(()=>{g()},[g]),{content:n,loading:o,error:u,refresh:g,updateContent:x}},Lg=h.createContext(void 0),f2=({children:n})=>{const[i,o]=h.useState(null),[c,u]=h.useState(!0);h.useEffect(()=>{(async()=>{try{const y=localStorage.getItem("oui-oui-tacos-role"),v=localStorage.getItem("oui-oui-tacos-session");if(!y||!v){localStorage.removeItem("oui-oui-tacos-role"),localStorage.removeItem("oui-oui-tacos-session");return}const N=JSON.parse(y),j=JSON.parse(v);if(!(N!=null&&N.id)||j.roleId!==N.id){localStorage.removeItem("oui-oui-tacos-role"),localStorage.removeItem("oui-oui-tacos-session"),o(null);return}const S=await ye.getRoleById(N.id);S?(o(S),localStorage.setItem("oui-oui-tacos-role",JSON.stringify(S)),localStorage.setItem("oui-oui-tacos-session",JSON.stringify({roleId:S.id,authenticatedAt:Date.now()}))):(localStorage.removeItem("oui-oui-tacos-role"),localStorage.removeItem("oui-oui-tacos-session"),o(null))}catch(y){console.error("Failed to restore role:",y),localStorage.removeItem("oui-oui-tacos-role"),localStorage.removeItem("oui-oui-tacos-session"),o(null)}finally{u(!1)}})()},[]);const f=h.useCallback(async p=>{u(!0);try{const y=await ye.loginWithPin(p);if(!y)throw new Error("PIN invalide");return o(y),localStorage.setItem("oui-oui-tacos-role",JSON.stringify(y)),localStorage.setItem("oui-oui-tacos-session",JSON.stringify({roleId:y.id,authenticatedAt:Date.now()})),y}finally{u(!1)}},[]),g=h.useCallback(()=>{o(null),localStorage.removeItem("oui-oui-tacos-role"),localStorage.removeItem("oui-oui-tacos-session")},[]),x=h.useCallback(async()=>{if(i!=null&&i.id)try{const p=await ye.getRoleById(i.id);p?(o(p),localStorage.setItem("oui-oui-tacos-role",JSON.stringify(p)),localStorage.setItem("oui-oui-tacos-session",JSON.stringify({roleId:p.id,authenticatedAt:Date.now()}))):g()}catch(p){console.error("Failed to refresh role:",p)}},[g,i==null?void 0:i.id]);return a.jsx(Lg.Provider,{value:{role:i,loading:c,login:f,logout:g,refreshRole:x},children:n})},$a=()=>{const n=h.useContext(Lg);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n},lo=n=>n==="editor"||n==="readonly",Pd=n=>{if(!n)return null;const{homePage:i,permissions:o}=n;if(i&&lo(o==null?void 0:o[i]))return i;const c=aa.find(u=>lo(o==null?void 0:o[u.permissionKey]));return c?c.href:null},p2=["a[href]","button:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(","),h2=({isOpen:n,onClose:i,notifications:o,onReportClick:c})=>{const{role:u,logout:f}=$a(),g=Vs(),x=h.useRef(null),p=h.useRef(null),y=()=>{f(),g("/")},v=u==null?void 0:u.permissions,N=h.useMemo(()=>aa.filter(D=>{const C=v==null?void 0:v[D.permissionKey];return lo(C)}),[v]),j=h.useMemo(()=>N.find(D=>D.permissionKey===ps),[N]),S=h.useMemo(()=>N.filter(D=>D.permissionKey!==ps),[N]);h.useEffect(()=>{var X;if(!n||typeof window<"u"&&window.matchMedia("(min-width: 768px)").matches)return;p.current=document.activeElement;const C=x.current,L=C==null?void 0:C.querySelectorAll(p2);(X=L==null?void 0:L[0])==null||X.focus();const q=A=>{if(A.key==="Escape"&&(A.preventDefault(),i()),A.key==="Tab"&&L&&L.length>0){const F=L[0],te=L[L.length-1];A.shiftKey?document.activeElement===F&&(A.preventDefault(),te.focus()):document.activeElement===te&&(A.preventDefault(),F.focus())}};return document.addEventListener("keydown",q),()=>{var A,F;document.removeEventListener("keydown",q),(F=(A=p.current)==null?void 0:A.focus)==null||F.call(A)}},[n,i]);const w=()=>{typeof window<"u"&&window.matchMedia("(min-width: 768px)").matches||i()};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:`fixed inset-0 z-40 bg-black/50 transition-opacity duration-300 md:hidden ${n?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,"aria-hidden":!n,onClick:i}),a.jsxs("aside",{ref:x,className:`app-sidebar fixed inset-y-0 left-0 z-50 flex w-72 flex-col transition-transform duration-300 ease-in-out md:static md:z-auto md:w-64 md:translate-x-0 ${n?"translate-x-0":"-translate-x-full md:translate-x-0"}`,"aria-label":"Navegación principal",children:[a.jsxs("div",{className:"app-sidebar__header",children:[a.jsx("span",{className:"app-sidebar__brand",children:"OUIOUI"}),a.jsx("button",{onClick:i,className:"app-sidebar__close md:hidden","aria-label":"Cerrar el menú",children:a.jsx(us,{size:20})})]}),a.jsxs("div",{className:"app-sidebar__content",children:[a.jsx("div",{className:"app-sidebar__scroll-region",children:a.jsx("nav",{className:"app-sidebar__nav",children:S.map(D=>{let C=null;return o&&(D.href==="/para-llevar"&&(o.pendingTakeaway>0||o.readyTakeaway>0)?C=a.jsxs("span",{className:"app-sidebar__badge-group",children:[o.pendingTakeaway>0&&a.jsx("span",{className:"app-sidebar__badge app-sidebar__badge--danger",title:`${o.pendingTakeaway} por validar`,children:o.pendingTakeaway}),o.readyTakeaway>0&&a.jsx("span",{className:"app-sidebar__badge app-sidebar__badge--success",title:`${o.readyTakeaway} listo(s)`,children:o.readyTakeaway})]}):D.href==="/ventes"&&o.readyForService>0?C=a.jsx("span",{className:"app-sidebar__badge-group",children:a.jsx("span",{className:"app-sidebar__badge app-sidebar__badge--danger",title:`${o.readyForService} pedido(s) listo(s)`,children:o.readyForService})}):D.href==="/cocina"&&o.kitchenOrders>0?C=a.jsx("span",{className:"app-sidebar__badge-group",children:a.jsx("span",{className:"app-sidebar__badge app-sidebar__badge--danger",children:o.kitchenOrders})}):D.href==="/ingredients"&&o.lowStockIngredients>0&&(C=a.jsx("span",{className:"app-sidebar__badge-group",children:a.jsx("span",{className:"app-sidebar__badge app-sidebar__badge--danger",children:o.lowStockIngredients})}))),a.jsxs(Pp,{to:D.href,onClick:w,className:({isActive:L})=>`app-sidebar__nav-link${L?" is-active":""}`,children:[a.jsx(D.icon,{size:22}),a.jsx("span",{children:D.name}),C]},D.name)})})}),a.jsxs("div",{className:"app-sidebar__section",children:[j&&a.jsxs(Pp,{to:j.href,onClick:w,className:({isActive:D})=>`app-sidebar__action${D?" is-active":""}`,children:[a.jsx(j.icon,{size:22}),a.jsx("span",{className:"font-semibold",children:j.name})]}),a.jsxs("button",{onClick:()=>{c(),w()},className:"app-sidebar__action",children:[a.jsx(cg,{size:22}),a.jsx("span",{className:"font-semibold",children:"Reporte"})]}),a.jsxs("button",{onClick:y,className:"app-sidebar__action app-sidebar__action--logout",children:[a.jsx(fv,{size:22}),a.jsx("span",{className:"font-semibold",children:"Cerrar sesión"})]})]})]})]})]})},Lt=16,Tt=({isOpen:n,onClose:i,title:o,children:c,size:u="md",anchor:f=null,boundary:g=null})=>{const x={xs:"max-w-xs",sm:"max-w-sm",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",half:""},p=h.useId(),y=h.useRef(null),[v,N]=h.useState(null);if(h.useLayoutEffect(()=>{if(!n){N(null);return}const J=()=>{if(!y.current)return;const H=y.current.getBoundingClientRect(),{innerWidth:W,innerHeight:T}=window,K=g?{top:Math.max(g.top+Lt,Lt),left:Math.max(g.left+Lt,Lt),right:Math.min(g.right-Lt,W-Lt),bottom:Math.min(g.bottom-Lt,T-Lt)}:{top:Lt,left:Lt,right:W-Lt,bottom:T-Lt},B=Math.max(K.right-K.left,0),le=Math.max(K.bottom-K.top,0),_=W/2,E=T/2;let z=_-H.width/2;H.width>B?z=K.left:z=Math.max(K.left,Math.min(z,K.right-H.width));let Z=E-H.height/2;H.height>le?Z=K.top:Z=Math.max(K.top,Math.min(Z,K.bottom-H.height)),N({top:Z,left:z})};let Q=window.requestAnimationFrame(J);const oe=()=>{window.cancelAnimationFrame(Q),Q=window.requestAnimationFrame(J)};return window.addEventListener("resize",oe),window.addEventListener("scroll",oe,!0),()=>{window.cancelAnimationFrame(Q),window.removeEventListener("resize",oe),window.removeEventListener("scroll",oe,!0)}},[f,g,n]),h.useEffect(()=>{if(!n)return;const J=Q=>{Q.key==="Escape"&&(Q.preventDefault(),i())};return window.addEventListener("keydown",J),()=>{window.removeEventListener("keydown",J)}},[n,i]),!n)return null;const j=typeof window<"u"?window.innerWidth:null,S=typeof window<"u"?window.innerHeight:null,w=j!==null?Math.max(j-Lt*2,200):null,D=S!==null?Math.max(S-Lt*2,200):null,C=g!==null?Math.max(g.width-Lt*2,200):null,L=g!==null?Math.max(g.height-Lt*2,200):null,q=C!==null&&w!==null?Math.min(C,w):C??w,X=L!==null&&D!==null?Math.min(L,D):L??D,A=g&&typeof q=="number"?Math.min(Math.max(g.width*.6,320),q):g?Math.max(g.width*.6,320):null,F={position:"fixed",maxHeight:typeof X=="number"?`${Math.max(X,200)}px`:`calc(100vh - ${Lt*2}px)`};u==="half"?(F.width="calc(100vw - 32px)",F.maxWidth="calc(100vw - 32px)",F.minWidth="320px"):A!==null?(F.width=`${A}px`,F.maxWidth=`${A}px`):F.maxWidth=typeof q=="number"?`${Math.max(q,260)}px`:`calc(100vw - ${Lt*2}px)`;const te=v?{top:v.top,left:v.left}:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"};return a.jsxs("div",{className:"fixed inset-0 z-50",children:[a.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:i}),a.jsxs("div",{ref:y,role:"dialog","aria-modal":"true","aria-labelledby":p,className:`fixed flex flex-col overflow-hidden rounded-2xl bg-white shadow-2xl ${f&&g?"w-full max-w-none":u==="half"?"w-full lg:!w-[50vw] lg:!max-w-[50vw]":x[u]} sm:max-h-[90vh] focus:outline-none`,style:{...F,...te},onClick:J=>J.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 bg-white/80 px-4 py-3 sm:px-6",children:[a.jsx("h3",{id:p,className:"text-[clamp(1.05rem,2.2vw,1.4rem)] font-semibold leading-snug text-slate-900 break-words text-balance whitespace-normal [hyphens:auto]",children:o}),a.jsx("button",{type:"button",onClick:i,className:"rounded-full p-1.5 text-slate-500 transition-colors hover:bg-slate-100 hover:text-slate-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-500","aria-label":"Fermer la fenêtre modale",children:a.jsx(us,{size:20})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-5 sm:px-6 sm:py-6",children:c})]})]})},g2=new Intl.NumberFormat("es-CO",{maximumFractionDigits:0}),x2=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0});function qg(n){return Number.isFinite(n)?Math.round(n):0}function hi(n){return g2.format(qg(n))}function fe(n){return x2.format(qg(n))}const Nd=({icon:n,label:i,value:o})=>a.jsxs("div",{className:"flex flex-col items-start gap-3 rounded-2xl border border-slate-200 bg-slate-50/80 p-4 shadow-sm sm:flex-row sm:items-center",children:[a.jsx("div",{className:"rounded-full bg-brand-primary/20 p-2 text-brand-primary sm:p-3",children:n}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500 sm:text-sm",children:i}),a.jsx("div",{className:"text-[clamp(1.1rem,2.5vw,1.6rem)] font-bold text-slate-800",children:o})]})]}),b2=({isOpen:n,onClose:i})=>{const[o,c]=h.useState(null),[u,f]=h.useState(!0),[g,x]=h.useState(null);h.useEffect(()=>{n&&(async()=>{f(!0),x(null);try{const S=await ye.generateDailyReport();c(S)}catch(S){console.error("Error al generar el informe diario",S),c(null),x("No fue posible generar el reporte diario. Intenta nuevamente más tarde.")}finally{f(!1)}})()},[n]);const p=j=>{const S=new Map;return j.forEach(w=>{const D=new Date(w.loginAt).toLocaleTimeString("es-CO",{hour:"2-digit",minute:"2-digit"}),C=S.get(w.roleName)??[];C.push(D),S.set(w.roleName,C)}),S},y=j=>{const S=[];S.push("*REPORTE OUIOUITACOS*"),S.push(`Generado el: ${new Date(j.generatedAt).toLocaleString("es-CO")}`),S.push(`Periodo: desde ${new Date(j.startDate).toLocaleString("es-CO")}`),S.push("---"),S.push("*Estadísticas del día*");const w=j.ventesDuJour+(j.totalPromotionsApplied??0);if(S.push(`- Ventas: *${fe(j.ventesDuJour)}*`),S.push(`- Total facturado: *${fe(w)}*`),S.push(`- Clientes: *${j.clientsDuJour}* (Sala: ${j.clientsSurPlace??0} | En línea: ${j.clientsEnLigne??0})`),S.push(`- Ticket promedio: *${fe(j.panierMoyen)}*`),S.push(`- Total promociones aplicadas: *${fe(j.totalPromotionsApplied??0)}*`),S.push("---"),S.push("*Productos vendidos*"),j.soldProducts.length===0?S.push("Ningún producto vendido."):j.soldProducts.forEach(D=>{S.push(`
_${D.categoryName}_`),D.products.forEach(C=>{S.push(`  - ${C.quantity}x ${C.name} (${fe(C.totalSales)})`)})}),S.push("---"),S.push("*Inicios de sesión desde las 05:00*"),j.roleLoginsUnavailable)S.push("Inicios de sesión no disponibles en este dispositivo.");else{const D=p(j.roleLogins);D.size===0?S.push("No hay inicios de sesión registrados."):D.forEach((C,L)=>{S.push(`- ${L}: ${C.join(", ")}`)})}return S.push("---"),S.push("*Inventario bajo*"),j.lowStockIngredients.length===0?S.push("No hay ingredientes con inventario bajo."):j.lowStockIngredients.forEach(D=>{S.push(`- ${D.nom} (${D.stock_actuel} / ${D.stock_minimum} ${D.unite})`)}),encodeURIComponent(S.join(`
`))},v=()=>{if(!o)return;const S=`https://wa.me/?text=${y(o)}`;window.open(S,"_blank"),i()},N=o?o.ventesDuJour+(o.totalPromotionsApplied??0):0;return a.jsx(Tt,{isOpen:n,onClose:i,title:"Reporte diario",size:"half",children:a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"max-h-[60vh] overflow-y-auto",children:[u&&a.jsx("p",{children:"Generando el reporte..."}),!u&&g&&a.jsx("div",{className:"mb-4 rounded-md border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:g}),!u&&!o&&!g&&a.jsx("p",{className:"text-red-500",children:"No fue posible generar el reporte."}),!u&&o&&a.jsxs("div",{className:"space-y-6",children:[o.roleLoginsUnavailable&&a.jsxs("div",{className:"rounded-md border border-yellow-200 bg-yellow-50 p-3 text-sm text-yellow-800 flex items-start gap-2",children:[a.jsx(Aa,{className:"mt-0.5 h-4 w-4"}),a.jsx("span",{children:"Los inicios de sesión de los roles no están disponibles en este dispositivo (almacenamiento local inaccesible)."})]}),a.jsxs("div",{className:"text-center border-b pb-4",children:[a.jsx("h2",{className:"font-bold text-brand-secondary text-[clamp(1.5rem,3.5vw,2rem)]",children:"Reporte OUIOUITACOS"}),a.jsxs("p",{className:"text-gray-500 text-sm",children:["Generado el ",new Date(o.generatedAt).toLocaleString("es-CO")]}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Datos desde ",new Date(o.startDate).toLocaleString("es-CO")]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[a.jsx(Nd,{icon:a.jsx(io,{}),label:"Ventas del día",value:fe(o.ventesDuJour)}),a.jsx(Nd,{icon:a.jsx(Od,{}),label:"Clientes del día",value:a.jsxs(a.Fragment,{children:[o.clientsDuJour,a.jsxs("span",{className:"mt-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:["Salle : ",o.clientsSurPlace??0," • En ligne : ",o.clientsEnLigne??0]})]})}),a.jsx(Nd,{icon:a.jsx(pg,{}),label:"Ticket promedio",value:fe(o.panierMoyen)})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2 text-gray-800",children:[a.jsx(Ys,{size:20})," Productos vendidos"]}),a.jsxs("div",{className:"space-y-4",children:[o.soldProducts.map(j=>a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-brand-primary text-sm",children:j.categoryName}),a.jsx("ul",{className:"list-disc list-inside pl-2 text-gray-700 text-sm",children:j.products.map(S=>a.jsxs("li",{children:[S.quantity,"x ",S.name," - ",a.jsx("span",{className:"font-semibold",children:fe(S.totalSales)})]},S.id))})]},j.categoryName)),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white px-3 py-2 text-slate-700 shadow-sm",children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide",children:"Total facturado"}),a.jsx("p",{className:"mt-1 text-xl font-bold",children:fe(N)})]}),a.jsxs("div",{className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-emerald-700 shadow-sm",children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide",children:"Promotions appliquées"}),a.jsx("p",{className:"mt-1 text-xl font-bold",children:fe(o.totalPromotionsApplied??0)})]})]})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2 text-gray-800",children:[a.jsx(uv,{size:20})," Inicios de sesión desde las 05:00"]}),o.roleLoginsUnavailable?a.jsx("p",{className:"text-gray-500 text-sm",children:"Inicios de sesión no disponibles: no es posible acceder al almacenamiento local."}):(()=>{const j=p(o.roleLogins);return j.size===0?a.jsx("p",{className:"text-gray-500 text-sm",children:"No hay inicios de sesión registrados desde las 05:00."}):a.jsx("ul",{className:"space-y-2",children:Array.from(j.entries()).map(([S,w])=>a.jsxs("li",{className:"flex justify-between items-center bg-slate-100 p-2 rounded-md text-sm",children:[a.jsx("span",{className:"font-semibold text-gray-800",children:S}),a.jsx("span",{className:"text-xs text-gray-600",children:w.join(", ")})]},S))})})()]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2 text-gray-800",children:[a.jsx(Aa,{className:"text-orange-500",size:20})," Ingredientes con inventario bajo"]}),o.lowStockIngredients.length>0?a.jsx("ul",{className:"space-y-1",children:o.lowStockIngredients.map(j=>a.jsxs("li",{className:"flex justify-between items-center bg-orange-50 p-2 rounded-md text-orange-800 text-sm",children:[a.jsx("span",{children:j.nom}),a.jsxs("span",{className:"font-bold",children:[j.stock_actuel," / ",j.stock_minimum," ",j.unite]})]},j.id))}):a.jsx("p",{className:"text-gray-500 text-sm",children:"No hay ingredientes con inventario bajo."})]})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t mt-4",children:[a.jsx("button",{onClick:i,className:"w-full sm:w-auto bg-gray-200 text-gray-800 font-bold py-2.5 px-4 rounded-lg hover:bg-gray-300 transition text-sm",children:"Cerrar"}),a.jsxs("button",{onClick:v,disabled:u||!o,className:"w-full sm:w-auto bg-green-500 text-white font-bold py-2.5 px-4 rounded-lg hover:bg-green-600 transition flex items-center justify-center gap-2 disabled:bg-gray-400 disabled:cursor-not-allowed text-sm",children:[a.jsx(mg,{size:18})," Enviar por WhatsApp"]})]})]})})},y2=()=>{const[n,i]=h.useState(!1),{role:o}=$a(),[c,u]=h.useState(null),[f,g]=h.useState(!1),x=()=>i(!0),p=()=>i(!1);return h.useEffect(()=>{const y=async()=>{try{const N=await ye.getNotificationCounts();u(N)}catch(N){console.error("Failed to fetch notifications",N)}};y();const v=ye.notifications.subscribe("notifications_updated",y);return()=>{v()}},[]),h.useEffect(()=>{if(typeof window>"u")return;const y=()=>{window.innerWidth>=768&&i(!1)};return window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[]),a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"app-shell",children:[a.jsx(h2,{isOpen:n,onClose:p,notifications:c,onReportClick:()=>g(!0)}),a.jsxs("div",{className:"app-main",children:[a.jsxs("header",{className:"app-header",children:[a.jsx("button",{type:"button",onClick:x,className:"app-header__menu-button md:hidden","aria-label":"Abrir el menú",children:a.jsx(dg,{size:24})}),a.jsxs("h1",{className:"app-header__title",children:["Bienvenido, ",o==null?void 0:o.name]}),a.jsx("div",{className:"app-header__spacer md:hidden","aria-hidden":"true"})]}),a.jsx("main",{className:"app-content",children:a.jsx(yb,{})})]})]}),a.jsx(b2,{isOpen:f,onClose:()=>g(!1)})]})},v2=n=>{try{const i=localStorage.getItem("customer-order-history"),o=i?JSON.parse(i):[],c=o.findIndex(f=>f.id===n.id);c!==-1&&o.splice(c,1),o.unshift(n);const u=o.slice(0,10);localStorage.setItem("customer-order-history",JSON.stringify(u))}catch(i){console.error("Failed to save order to history:",i)}},j2=({orderId:n,onNewOrderClick:i,variant:o="page"})=>{var z,Z,$,R,I;const[c,u]=h.useState(null),[f,g]=h.useState(!0),[x,p]=h.useState(!1),y=[{name:"Enviado",icon:cg,description:"Commande transmise et en attente de validation."},{name:"Validado",icon:bn,description:"La commande est validée par l’équipe."},{name:"En preparacion",icon:jy,description:"La cuisine prépare activement votre commande."},{name:"Listo",icon:vv,description:"La commande est prête pour la remise ou la livraison."}];h.useMemo(()=>[{gradient:"from-brand-primary to-brand-primary-dark",border:"border-brand-primary/40",glow:"shadow-[0_10px_25px_rgba(249,168,38,0.35)]"},{gradient:"from-emerald-500 to-emerald-600",border:"border-emerald-200/70",glow:"shadow-[0_10px_25px_rgba(16,185,129,0.35)]"},{gradient:"from-sky-500 to-indigo-600",border:"border-sky-200/70",glow:"shadow-[0_10px_25px_rgba(56,189,248,0.35)]"},{gradient:"from-rose-500 to-red-600",border:"border-rose-200/70",glow:"shadow-[0_10px_25px_rgba(244,114,182,0.35)]"},{gradient:"from-amber-500 to-orange-600",border:"border-amber-200/70",glow:"shadow-[0_10px_25px_rgba(251,191,36,0.35)]"}],[]);const v=h.useCallback(M=>M?M.statut==="finalisee"||M.estado_cocina==="servido"||M.estado_cocina==="entregada"||M.estado_cocina==="listo"?3:M.estado_cocina==="recibido"||M.statut==="en_cours"?2:M.statut==="pendiente_validacion"||M.estado_cocina==="no_enviado"?1:0:-1,[]),N=h.useMemo(()=>v(c),[c,v]),j=h.useRef(null),S=Math.max(y.length-1,1),w=!!(c&&(c.statut==="finalisee"||c.estado_cocina==="servido"||c.estado_cocina==="entregada"||c.estado_cocina==="listo")),D=Math.max(0,N),C=S>0?Math.min(100,(w?S:D)/S*100):100,L=Math.max(0,Math.min(100,C)),q=`${L}-${w?"complete":"active"}`,X=h.useMemo(()=>({"--tracker-progress-target":`${L}%`}),[L]);h.useEffect(()=>{if(o!=="hero")return;const M=j.current;M&&M.style.setProperty("--tracker-progress-target",`${L}%`)},[o,L]),h.useEffect(()=>{let M=!0,re=null,ue,ge=!1;const ae=async()=>{if(!ge){ge=!0;try{const ce=await ye.getCustomerOrderStatus(n);if(M){if(u(ce),(ce==null?void 0:ce.statut)==="finalisee"||(ce==null?void 0:ce.estado_cocina)==="servido"||(ce==null?void 0:ce.estado_cocina)==="entregada"){re&&(clearInterval(re),re=null),v2(ce);const _e=ce.date_servido??Date.now();Xh(ce.id,_e+Qh)}if(!ce){const _e=so();(_e==null?void 0:_e.orderId)===n&&Kh()}}}catch(ce){console.error("Failed to fetch order status",ce)}finally{M&&g(ce=>ce&&!1),ge=!1}}};return g(!0),u(null),ae(),re=setInterval(ae,5e3),ue=ye.notifications.subscribe("orders_updated",ae),()=>{M=!1,re&&clearInterval(re),ue&&ue()}},[n]);const A=o==="page"?"container mx-auto p-4 lg:p-8":"w-full px-4 pt-0 pb-4 sm:pt-1 sm:pb-5 flex justify-center",F=o==="page"?"bg-white/95 p-6 rounded-xl shadow-2xl max-w-2xl mx-auto":"max-w-4xl mx-auto",te="border-t pt-6 mt-6 space-y-4 relative md:w-1/2 md:mx-auto";if(f)return a.jsx("div",{className:A,children:"Chargement du suivi de commande..."});if(!c)return o==="hero"?null:a.jsx("div",{className:A,children:a.jsxs("div",{className:F,children:[a.jsx("h2",{className:"text-2xl font-bold mb-4 text-red-600",children:"Commande non trouvée"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Nous n'avons pas pu retrouver votre commande."}),a.jsx("button",{onClick:i,className:"bg-brand-primary text-brand-secondary font-bold py-3 px-6 rounded-lg hover:bg-yellow-400 transition",children:"Passer une nouvelle commande"})]})});c.subtotal??c.total;const J=c.total_discount??0,Q=(((z=c.applied_promotions)==null?void 0:z.length)??0)>0,oe=c.type==="a_emporter",H=((Z=c.clientInfo)==null?void 0:Z.nom)??c.client_name??"",W=(($=c.clientInfo)==null?void 0:$.telephone)??c.client_phone??"",T=((R=c.clientInfo)==null?void 0:R.adresse)??c.client_address??"",K=!!(H||W||T),B=M=>M.type==="free_shipping"?a.jsx(bg,{size:16}):M.type==="percentage"?a.jsx(vl,{size:16}):M.type==="buy_x_get_y"?a.jsx(zd,{size:16}):a.jsx(_i,{size:16}),le=Q?c.applied_promotions.map((M,re)=>{const ue=typeof M.config=="object"&&M.config!==null?M.config:void 0;ue==null||ue.promo_code;const ge=M.visuals||null,ae=(ge==null?void 0:ge.badge_bg_color)||"#4CAF50",ce=M.discount_amount||0;return a.jsxs("div",{className:"flex items-center rounded-xl shadow-lg transition-transform hover:scale-[1.01] overflow-hidden h-11",style:{backgroundColor:ae},"aria-label":`Promotion ${M.name}`,children:[a.jsx("div",{className:"flex items-center justify-center w-11 flex-shrink-0",style:{color:(ge==null?void 0:ge.badge_color)||"#FFFFFF"},children:B(M)}),a.jsxs("div",{className:"flex-1 px-2.5 flex items-center justify-between min-w-0 gap-2",children:[a.jsx("p",{className:"font-bold text-white text-sm sm:text-base truncate",children:M.name}),a.jsxs("span",{className:"text-sm sm:text-base font-bold text-white whitespace-nowrap shrink-0",children:["-",fe(ce)]})]})]},`${M.promotion_id}-${M.name}`)}):null,_=le?a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:`text-sm font-semibold ${o==="hero"?"text-green-300":"text-green-700"}`,children:"Promotions appliquées"}),a.jsx("div",{className:"space-y-3",children:le})]}):null,E=((I=c.items)==null?void 0:I.length)??0;return o==="hero"?a.jsxs("div",{className:A,children:[a.jsxs("div",{className:"relative w-full max-w-4xl overflow-hidden rounded-3xl border border-white/15 bg-gradient-to-br from-slate-900/90 via-slate-900/75 to-slate-900/60 p-6 text-white shadow-2xl backdrop-blur-xl sm:p-8",children:[a.jsxs("div",{className:"pointer-events-none absolute inset-0 opacity-70",children:[a.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.18),_transparent_65%)]"}),a.jsx("div",{className:"absolute -bottom-32 right-0 h-64 w-64 rounded-full bg-gradient-to-br from-amber-400/30 via-orange-500/20 to-red-500/30 blur-3xl"})]}),a.jsxs("div",{className:"relative flex flex-col gap-6",children:[w&&a.jsx("div",{className:"pointer-events-none absolute -top-6 right-4 sm:right-8",children:a.jsx("div",{className:"relative",style:{transform:"rotate(10deg)"},children:a.jsx("div",{className:"stamp-container scale-75 sm:scale-90",children:a.jsx("div",{className:"stamp-border",children:a.jsxs("div",{className:"stamp-inner",children:[a.jsx("span",{className:"stamp-text",children:"PEDIDO"}),a.jsx("span",{className:"stamp-text stamp-text-large",children:"LISTO"})]})})})})}),a.jsx("div",{className:"flex flex-col items-center gap-2 text-center",children:a.jsxs("h2",{className:"text-3xl font-bold text-center text-white sm:text-4xl",children:["Commande #",c.id.slice(-6)]})}),a.jsx("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-4",children:y.map((M,re)=>{const ue=re===N,ge=re===y.length-1,ae=re<N||ge&&w,ce=`tracker-step-card rounded-2xl border p-3 sm:p-4 transition-all ${ae?"bg-gradient-to-br from-emerald-400/80 to-emerald-600/80 border-white/35 text-white shadow-lg shadow-emerald-500/25":ue?"bg-gradient-to-br from-amber-400/95 via-orange-500/90 to-red-500/95 border-white/30 text-white shadow-xl shadow-orange-500/25 tracker-step-active":"bg-white/10 border-white/10 text-white/70 backdrop-blur-sm hover:bg-white/15 hover:border-white/20"} ${ue?"scale-[1.02]":""}`,_e=`tracker-step-icon-wrapper relative flex h-16 w-16 sm:h-20 sm:w-20 items-center justify-center rounded-2xl bg-black/25 ${ae||ue?"text-white":"text-white/70"}`;return a.jsx("div",{className:ce,"aria-current":ue?"step":void 0,children:a.jsxs("div",{className:"flex flex-col items-center text-center gap-2 sm:gap-3",children:[a.jsx("p",{className:`text-xs sm:text-sm font-semibold tracking-wide ${ae||ue?"text-white":"text-white/70"}`,children:M.name}),a.jsxs("div",{className:_e,children:[a.jsx(M.icon,{className:"tracker-step-icon h-10 w-10 sm:h-12 sm:w-12"}),ae&&a.jsx(bn,{className:"absolute -top-2 -right-2 h-5 w-5 sm:h-6 sm:w-6 text-white drop-shadow"})]}),a.jsx("p",{className:`text-[11px] sm:text-xs leading-snug ${ae||ue?"text-white/80":"text-white/60"}`,children:M.description})]})},M.name)})}),a.jsx("style",{children:`
                            .tracker-step-card {
                                position: relative;
                                overflow: hidden;
                                border-radius: 1.25rem;
                            }

                            .tracker-step-card::after {
                                content: '';
                                position: absolute;
                                inset: 0;
                                border-radius: inherit;
                                border: 1px solid rgba(255, 255, 255, 0.18);
                                opacity: 0.35;
                                pointer-events: none;
                            }

                            .tracker-step-active {
                                animation: tracker-step-blink 1.6s ease-in-out infinite;
                            }

                            .tracker-step-active::after {
                                border-color: rgba(255, 255, 255, 0.45);
                                opacity: 0.75;
                            }

                            .tracker-step-icon {
                                transition: transform 0.4s ease;
                            }

                            .tracker-step-active .tracker-step-icon {
                                animation: tracker-step-icon-pulse 1.6s ease-in-out infinite;
                            }

                            @keyframes tracker-step-blink {
                                0%,
                                100% {
                                    transform: translateY(0);
                                    box-shadow: 0 18px 36px rgba(234, 179, 8, 0.35);
                                }
                                50% {
                                    transform: translateY(-2px);
                                    box-shadow: 0 22px 40px rgba(251, 191, 36, 0.45);
                                }
                            }

                            @keyframes tracker-step-icon-pulse {
                                0%,
                                100% {
                                    transform: scale(1);
                                }
                                50% {
                                    transform: scale(1.15);
                                }
                            }

                            .tracker-progress-container {
                                position: relative;
                                height: 10px;
                                border-radius: 9999px;
                                overflow: hidden;
                                background: linear-gradient(90deg, rgba(255, 255, 255, 0.25), rgba(148, 163, 184, 0.18));
                                box-shadow: inset 0 1px 3px rgba(15, 23, 42, 0.35);
                                margin-top: 0.25rem;
                            }

                            .tracker-progress-fill {
                                position: absolute;
                                inset: 0;
                                width: 0;
                                display: flex;
                                align-items: center;
                                justify-content: flex-end;
                                border-radius: inherit;
                                background: linear-gradient(90deg, rgba(249, 168, 38, 0.8), rgba(239, 68, 68, 0.95));
                                animation: tracker-progress-advance 1.2s ease forwards;
                                animation-delay: 0.05s;
                            }

                            .tracker-progress-fill-complete {
                                background: linear-gradient(90deg, rgba(34, 197, 94, 0.85), rgba(56, 189, 248, 0.9));
                            }

                            .tracker-progress-fill-hero {
                                animation: tracker-progress-loop 3s ease-in-out infinite;
                                animation-delay: 0s;
                            }

                            .tracker-progress-fill-hero.tracker-progress-fill-complete {
                                animation: tracker-progress-loop 3s ease-in-out infinite;
                            }

                            .tracker-progress-fill::after {
                                content: '';
                                position: absolute;
                                inset: 0;
                                background: linear-gradient(90deg, rgba(255, 255, 255, 0.25), transparent 55%);
                                mix-blend-mode: screen;
                            }

                            .tracker-progress-glow {
                                position: absolute;
                                right: -14px;
                                top: 50%;
                                width: 28px;
                                height: 28px;
                                transform: translateY(-50%);
                                background: radial-gradient(circle at center, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0));
                                pointer-events: none;
                            }

                            @keyframes tracker-progress-advance {
                                0% {
                                    width: 0;
                                }
                                100% {
                                    width: var(--tracker-progress-target);
                                }
                            }

                            @keyframes tracker-progress-loop {
                                0% {
                                    width: 0;
                                }
                                60% {
                                    width: var(--tracker-progress-target);
                                }
                                75% {
                                    width: var(--tracker-progress-target);
                                }
                                100% {
                                    width: 0;
                                }
                            }
                        `}),a.jsx("div",{className:"tracker-progress-container tracker-progress-hero",children:a.jsx("div",{className:`tracker-progress-fill tracker-progress-fill-hero ${w?"tracker-progress-fill-complete":""}`,ref:j,style:X,children:a.jsx("span",{className:"tracker-progress-glow"})},`hero-progress-${q}`)}),a.jsxs("div",{className:"rounded-2xl bg-black/25 p-4 sm:p-5",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-white/60",children:"Informations"}),c.receipt_url&&a.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-white/70",children:"Comprobante de pago"})]}),a.jsxs("div",{className:"mt-3 flex flex-col gap-4 text-sm sm:flex-row sm:items-start sm:justify-between",children:[a.jsx("div",{className:"space-y-2",children:K?a.jsxs(a.Fragment,{children:[H&&a.jsxs("div",{className:"flex items-center gap-2 text-white/80",children:[a.jsx(bi,{size:16}),a.jsx("span",{className:"truncate",title:H,children:H})]}),W&&a.jsxs("div",{className:"flex items-center gap-2 text-white/80",children:[a.jsx(gl,{size:16}),a.jsx("span",{className:"truncate",title:W,children:W})]}),T&&a.jsxs("div",{className:"flex items-center gap-2 text-white/80",children:[a.jsx(jn,{size:16}),a.jsx("span",{className:"truncate",title:T,children:T})]})]}):a.jsx("p",{className:"text-white/70",children:"Aucune information client requise."})}),a.jsx("div",{className:"flex flex-col items-start gap-3 text-sm sm:min-w-[12rem] sm:items-end sm:text-right",children:c.receipt_url&&a.jsx("div",{className:"flex flex-col items-start gap-2 sm:items-end",children:a.jsx("button",{type:"button",onClick:()=>p(!0),className:"group relative inline-flex focus:outline-none","aria-label":"Ouvrir le justificatif de paiement",children:a.jsxs("div",{className:"relative overflow-hidden rounded-xl border border-white/20 bg-black/40 shadow-lg",children:[a.jsx("img",{src:c.receipt_url,alt:"Aperçu du justificatif",className:"h-20 w-28 object-cover transition duration-500 ease-out group-hover:scale-105 sm:h-24 sm:w-32"}),a.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center bg-black/40 opacity-0 transition duration-300 group-hover:opacity-100",children:a.jsx(Pr,{size:20,className:"text-white"})})]})})})})]})]}),a.jsxs("div",{className:"rounded-2xl bg-black/20 p-4 sm:p-5",children:[a.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between text-xs font-semibold uppercase tracking-wide text-white/60",children:[a.jsx("span",{children:"Résumé"}),a.jsxs("span",{children:["Articles : ",E]})]}),a.jsx("div",{className:"mt-4 space-y-3 pr-1 text-sm",children:c.items&&c.items.length>0?c.items.map(M=>{const ue=M.nom_produit==="Domicilio"&&M.prix_unitaire===0,ge=(()=>{const ae=M.description;return typeof ae=="string"&&ae.trim().length>0?ae.trim():null})();return a.jsx("div",{className:"rounded-xl border border-gray-200 bg-white px-4 py-1 sm:px-5 sm:py-2",children:a.jsx("div",{className:"flex flex-col gap-4 items-center",children:a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-4",children:["                                                            ",a.jsx("span",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-xl bg-gray-200 text-base font-semibold text-black shadow-inner shadow-gray-400 sm:h-10 sm:w-10 sm:text-lg",children:M.quantite}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-base font-semibold text-black sm:text-lg",children:M.nom_produit}),ge&&a.jsx("p",{className:"text-xs text-gray-600",children:ge}),M.commentaire&&a.jsxs("p",{className:"text-xs italic text-amber-200/80",children:["“",M.commentaire,"”"]})]})]}),a.jsx("div",{className:"flex items-center rounded-full bg-gray-100 px-3 py-1 text-sm font-bold text-gray-800 shadow-sm",children:ue?a.jsx("span",{className:"text-emerald-600",children:"GRATUIT"}):fe(M.prix_unitaire*M.quantite)})]})})},M.id)}):a.jsx("p",{className:"text-white/70",children:"Aucun article enregistré pour cette commande."})}),le?a.jsxs("div",{className:"mt-6 space-y-3",children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-white/60",children:"Promotions appliquées"}),a.jsx("div",{className:"space-y-3",children:le})]}):null,J>0&&a.jsxs("div",{className:"mt-5 flex items-center justify-between rounded-xl bg-black/30 px-3 py-2 text-sm font-semibold text-emerald-300 border border-emerald-500/20 shadow-lg",children:[a.jsx("span",{children:"Réductions totales"}),a.jsxs("span",{children:["- ",fe(J)]})]}),a.jsxs("div",{className:"mt-4 flex items-center justify-between border-t border-white/20 pt-4 text-xl font-extrabold text-white",children:[a.jsx("span",{children:"Total de la commande"}),a.jsx("span",{children:fe(c.total)})]})]}),a.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[w?a.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-emerald-500/20 px-4 py-2 text-sm font-semibold text-emerald-200",children:[a.jsx(bn,{size:16})," Commande prête"]}):a.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-white/60",children:"Nous préparons votre commande"}),a.jsx("button",{onClick:w?i:void 0,disabled:!w,className:`inline-flex items-center gap-2 rounded-full px-5 py-2 text-sm font-semibold transition ${w?"bg-white text-amber-600 shadow-lg hover:bg-white/90":"cursor-not-allowed bg-white/10 text-white/50"}`,children:"Revenir au menu"})]})]})]}),a.jsx(Tt,{isOpen:x,onClose:()=>p(!1),title:"Justificatif de Paiement",children:c.receipt_url?a.jsx("img",{src:c.receipt_url,alt:"Justificatif",className:"h-auto w-full rounded-md"}):a.jsx("p",{children:"Aucun justificatif fourni."})})]}):a.jsxs("div",{className:A,children:[a.jsxs("div",{className:F,children:[a.jsx("h2",{className:`text-3xl font-bold text-center mb-2 ${o==="hero"?"text-white":"text-gray-800"}`,children:"Suivi de votre commande"}),a.jsxs("p",{className:`text-center font-semibold mb-8 ${o==="hero"?"text-gray-300":"text-gray-500"}`,children:["Commande #",c.id.slice(-6)]}),a.jsxs("div",{className:"mb-8",children:[a.jsx("div",{className:"mb-6 tracker-progress-container tracker-progress-default",children:a.jsx("div",{className:`tracker-progress-fill ${w?"tracker-progress-fill-complete":""}`,style:X,children:a.jsx("span",{className:"tracker-progress-glow"})},`page-progress-${q}`)}),a.jsx("div",{className:`flex items-start sm:items-center justify-between gap-3 sm:gap-4 px-2 ${y.length>3?"flex-wrap sm:flex-nowrap":""}`,children:y.map((M,re)=>{const ue=re===N,ge=re===y.length-1,ae=re<N||ge&&w;return a.jsxs("div",{className:"flex flex-1 items-center gap-2 sm:gap-4",children:[a.jsxs("div",{className:"flex flex-col items-center text-center gap-2 sm:gap-3",children:[a.jsx("p",{className:`text-xs sm:text-sm font-semibold ${ae||ue?"text-gray-900":"text-gray-400"}`,children:M.name}),a.jsxs("div",{className:`relative flex h-14 w-14 sm:h-16 sm:w-16 items-center justify-center rounded-full border-4 transition-all duration-500 ${ae?"bg-green-500 border-green-300":ue?"bg-blue-600 border-blue-400 animate-pulse":"bg-gray-400 border-gray-300"}`,children:[a.jsx(M.icon,{className:"h-8 w-8 text-white sm:h-9 sm:w-9"}),ae&&a.jsx(bn,{className:"absolute -top-2 -right-2 h-5 w-5 text-emerald-100 drop-shadow"})]}),a.jsx("p",{className:`text-[11px] sm:text-xs leading-snug ${ae||ue?"text-gray-600":"text-gray-400"}`,children:M.description})]}),re<y.length-1&&a.jsx("div",{className:"flex flex-1 items-center","aria-hidden":!0,children:a.jsxs("div",{className:`tracker-gauge-wrapper ${o==="hero"?"tracker-gauge-hero":"tracker-gauge-default"} ${ae?"tracker-gauge-wrapper-complete":""}`,children:[a.jsx("span",{className:`tracker-gauge-fill ${ae?"tracker-gauge-fill-complete":ue?"tracker-gauge-fill-active":"tracker-gauge-fill-idle"}`}),(ue||ae)&&a.jsx("span",{className:"tracker-gauge-glow"})]})})]},M.name)})})]}),a.jsx("style",{children:`
                    .tracker-progress-container {
                        position: relative;
                        height: 12px;
                        border-radius: 9999px;
                        overflow: hidden;
                        box-shadow: inset 0 1px 2px rgba(15, 23, 42, 0.12);
                    }

                    .tracker-progress-default {
                        background: linear-gradient(90deg, rgba(229, 231, 235, 0.55), rgba(209, 213, 219, 0.35));
                    }

                    .tracker-progress-hero {
                        background: linear-gradient(90deg, rgba(255, 255, 255, 0.25), rgba(148, 163, 184, 0.15));
                        box-shadow: inset 0 1px 2px rgba(15, 23, 42, 0.25);
                    }

                    .tracker-progress-fill {
                        position: absolute;
                        inset: 0;
                        width: 0;
                        display: flex;
                        align-items: center;
                        justify-content: flex-end;
                        background: linear-gradient(90deg, rgba(249, 168, 38, 0.65), rgba(239, 68, 68, 0.95));
                        border-radius: inherit;
                        animation: tracker-progress-advance 1.2s ease forwards;
                    }

                    .tracker-progress-fill-complete {
                        background: linear-gradient(90deg, rgba(34, 197, 94, 0.75), rgba(56, 189, 248, 0.9));
                    }

                    .tracker-progress-fill::after {
                        content: '';
                        position: absolute;
                        inset: 0;
                        background: linear-gradient(90deg, rgba(255, 255, 255, 0.15), transparent 55%);
                        mix-blend-mode: screen;
                    }

                    .tracker-progress-glow {
                        position: absolute;
                        right: -14px;
                        top: 50%;
                        width: 28px;
                        height: 28px;
                        transform: translateY(-50%);
                        background: radial-gradient(circle at center, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0));
                        pointer-events: none;
                    }

                    @keyframes tracker-progress-advance {
                        0% {
                            width: 0;
                        }
                        100% {
                            width: var(--tracker-progress-target);
                        }
                    }

                    .tracker-gauge-wrapper {
                        position: relative;
                        height: 10px;
                        border-radius: 9999px;
                        overflow: hidden;
                        box-shadow: inset 0 1px 3px rgba(15, 23, 42, 0.12);
                        transition: box-shadow 0.3s ease;
                    }

                    .tracker-gauge-wrapper-complete {
                        box-shadow: inset 0 1px 3px rgba(21, 128, 61, 0.35);
                    }

                    .tracker-gauge-default {
                        background: linear-gradient(90deg, rgba(229, 231, 235, 0.45), rgba(209, 213, 219, 0.25));
                    }

                    .tracker-gauge-hero {
                        background: linear-gradient(90deg, rgba(255, 255, 255, 0.22), rgba(148, 163, 184, 0.12));
                        box-shadow: inset 0 1px 3px rgba(15, 23, 42, 0.4);
                    }

                    .tracker-gauge-fill {
                        position: absolute;
                        inset: 0;
                        transform-origin: left;
                        background-size: 250% 100%;
                        border-radius: inherit;
                    }

                    .tracker-gauge-fill-idle {
                        transform: scaleX(0);
                        background: linear-gradient(90deg, rgba(148, 163, 184, 0.25), rgba(148, 163, 184, 0.15));
                    }

                    .tracker-gauge-fill-active {
                        animation: tracker-gauge-fill-grow 1.2s ease forwards, tracker-gauge-cycle 3.2s linear infinite;
                        background: linear-gradient(90deg, #f97316, #ef4444, #facc15, #f97316);
                    }

                    .tracker-gauge-fill-complete {
                        transform: scaleX(1);
                        animation: tracker-gauge-cycle 4.2s linear infinite;
                        background: linear-gradient(90deg, #22c55e, #0ea5e9, #f97316, #22c55e);
                    }

                    .tracker-gauge-glow {
                        position: absolute;
                        inset: -6px;
                        background: radial-gradient(circle at center, rgba(255, 255, 255, 0.4), rgba(255, 255, 255, 0));
                        animation: tracker-gauge-glow 1.6s ease-in-out infinite;
                        pointer-events: none;
                    }

                    @keyframes tracker-gauge-fill-grow {
                        0% { transform: scaleX(0); }
                        100% { transform: scaleX(1); }
                    }

                    @keyframes tracker-gauge-cycle {
                        0% { background-position: 0% 50%; }
                        100% { background-position: 200% 50%; }
                    }

                    @keyframes tracker-gauge-glow {
                        0%, 100% { opacity: 0.45; }
                        50% { opacity: 0.85; }
                    }

                    .promo-banner {
                        position: relative;
                        isolation: isolate;
                        animation: promo-banner-blink 2.2s ease-in-out infinite;
                    }

                    .promo-banner::before {
                        content: '';
                        position: absolute;
                        inset: 0;
                        background: linear-gradient(120deg, rgba(255, 255, 255, 0.22), rgba(255, 255, 255, 0));
                        opacity: 0.45;
                        pointer-events: none;
                    }

                    .promo-banner > * {
                        position: relative;
                        z-index: 1;
                    }

                    @keyframes promo-banner-blink {
                        0%, 100% {
                            transform: translateY(0) scale(1);
                            filter: brightness(1);
                            opacity: 0.85;
                        }
                        45% {
                            transform: translateY(-2px) scale(1.02);
                            filter: brightness(1.18);
                            opacity: 1;
                        }
                        60% {
                            transform: translateY(0) scale(0.99);
                            filter: brightness(0.92);
                            opacity: 0.55;
                        }
                    }

                    .stamp-container {
                        position: relative;
                        width: 180px;
                        height: 180px;
                        animation: stamp-appear 0.5s ease-out;
                    }
                    
                    @keyframes stamp-appear {
                        0% {
                            transform: scale(0) rotate(-45deg);
                            opacity: 0;
                        }
                        60% {
                            transform: scale(1.1) rotate(0deg);
                        }
                        100% {
                            transform: scale(1) rotate(0deg);
                            opacity: 1;
                        }
                    }
                    
                    .stamp-border {
                        width: 100%;
                        height: 100%;
                        border: 4px solid #dc2626;
                        border-radius: 50%;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        background: rgba(220, 38, 38, 0.05);
                        position: relative;
                        box-shadow: 0 0 0 2px #dc2626;
                    }
                    
                    .stamp-border::before {
                        content: '';
                        position: absolute;
                        top: 0;
                        left: 0;
                        right: 0;
                        bottom: 0;
                        border-radius: 50%;
                        background: repeating-linear-gradient(
                            45deg,
                            transparent,
                            transparent 2px,
                            rgba(220, 38, 38, 0.03) 2px,
                            rgba(220, 38, 38, 0.03) 4px
                        );
                    }
                    
                    .stamp-inner {
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                        text-align: center;
                        z-index: 1;
                    }
                    
                    .stamp-text {
                        font-family: 'Arial Black', 'Arial Bold', sans-serif;
                        font-weight: 900;
                        color: #dc2626;
                        text-transform: uppercase;
                        letter-spacing: 2px;
                        line-height: 1;
                        text-shadow: 
                            1px 1px 0 rgba(220, 38, 38, 0.3),
                            -1px -1px 0 rgba(220, 38, 38, 0.3);
                    }
                    
                    .stamp-text:first-child {
                        font-size: 20px;
                        margin-bottom: 6px;
                    }
                    
                    .stamp-text-large {
                        font-size: 42px;
                        font-weight: 900;
                    }
                    
                    /* Effet de texture grunge */
                    .stamp-border::after {
                        content: '';
                        position: absolute;
                        top: 0;
                        left: 0;
                        right: 0;
                        bottom: 0;
                        border-radius: 50%;
                        background-image: 
                            radial-gradient(circle at 20% 30%, transparent 0%, transparent 2%, rgba(220, 38, 38, 0.1) 2%, transparent 3%),
                            radial-gradient(circle at 80% 70%, transparent 0%, transparent 2%, rgba(220, 38, 38, 0.1) 2%, transparent 3%),
                            radial-gradient(circle at 40% 80%, transparent 0%, transparent 1%, rgba(220, 38, 38, 0.1) 1%, transparent 2%),
                            radial-gradient(circle at 60% 20%, transparent 0%, transparent 1%, rgba(220, 38, 38, 0.1) 1%, transparent 2%);
                        opacity: 0.8;
                    }
                `}),a.jsxs("div",{className:te,children:[w&&a.jsx("div",{className:"absolute top-4 right-4 z-10 pointer-events-none",children:a.jsx("div",{className:"relative",style:{transform:"rotate(15deg)"},children:a.jsx("div",{className:"stamp-container",children:a.jsx("div",{className:"stamp-border",children:a.jsxs("div",{className:"stamp-inner",children:[a.jsx("span",{className:"stamp-text",children:"PEDIDO"}),a.jsx("span",{className:"stamp-text stamp-text-large",children:"LISTO"})]})})})})}),a.jsx("h3",{className:`mt-10 text-xl font-bold ${o==="hero"?"text-white":"text-gray-800"}`,children:"Résumé de la commande"}),oe&&K&&a.jsxs("div",{className:`mt-6 rounded-xl border p-4 ${o==="hero"?"border-white/30 bg-white/10 backdrop-blur text-white":"border-gray-200 bg-gray-50 text-gray-700"}`,children:[a.jsx("p",{className:`mb-3 text-sm font-semibold uppercase tracking-wide ${o==="hero"?"text-gray-100":"text-gray-600"}`,children:"Informations Client"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[H&&a.jsxs("div",{className:"flex items-center",children:[a.jsx(bi,{size:16,className:`mr-2 ${o==="hero"?"text-white/80":"text-gray-500"}`}),a.jsx("span",{className:"font-medium whitespace-nowrap truncate",title:H,children:H})]}),W&&a.jsxs("div",{className:"flex items-center",children:[a.jsx(gl,{size:16,className:`mr-2 ${o==="hero"?"text-white/80":"text-gray-500"}`}),a.jsx("span",{className:"whitespace-nowrap",title:W,children:W})]}),T&&a.jsxs("div",{className:"flex items-center",children:[a.jsx(jn,{size:16,className:`mr-2 ${o==="hero"?"text-white/80":"text-gray-500"}`}),a.jsx("span",{className:"truncate",title:T,children:T})]})]}),c.receipt_url&&a.jsxs("button",{onClick:()=>p(!0),className:`mt-4 inline-flex items-center gap-2 text-sm font-semibold underline-offset-2 hover:underline ${o==="hero"?"text-white":"text-blue-500"}`,children:[a.jsx(Pr,{size:16})," Voir le justificatif"]})]}),a.jsx("div",{className:"space-y-2",children:c.items&&c.items.length>0?c.items.map(M=>{const ue=M.nom_produit==="Domicilio"&&M.prix_unitaire===0,ge=M.description,ae=typeof ge=="string"&&ge.trim().length>0?ge.trim():null,ce=typeof M.commentaire=="string"&&M.commentaire.trim().length>0?M.commentaire.trim():null;return a.jsx("div",{className:`flex flex-col gap-2 rounded-lg border-b border-dashed border-gray-200/70 pb-3 pt-2 last:border-b-0 last:pb-0 ${o==="hero"?"text-gray-200":"text-gray-600"}`,children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"text-[clamp(0.95rem,1.8vw,1.1rem)] font-semibold leading-snug text-balance",children:[M.quantite,"x ",M.nom_produit]}),a.jsx("p",{className:`mt-1 text-sm ${o==="hero"?"text-gray-400":"text-gray-500"}`,children:ue?"Livraison offerte":`${fe(M.prix_unitaire)} /u`}),ae&&a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:ae}),ce&&a.jsxs("p",{className:"mt-1 text-sm italic text-amber-600",children:["“",ce,"”"]})]}),a.jsx("div",{className:"whitespace-nowrap text-right text-sm font-semibold",children:ue?a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[a.jsx("span",{className:"text-xs text-gray-400 line-through",children:fe(8e3)}),a.jsx("span",{className:"text-sm font-bold text-green-600",children:"GRATIS"})]}):a.jsx("span",{children:fe(M.prix_unitaire*M.quantite)})})]})},M.id)}):a.jsx("p",{className:`${o==="hero"?"text-gray-300":"text-gray-600"}`,children:"Aucun article enregistré pour cette commande."})}),_,J>0&&a.jsxs("div",{className:`mt-4 flex items-center justify-between rounded-lg border px-3 py-2 text-sm font-semibold ${o==="hero"?"border-emerald-300/30 bg-emerald-500/15 text-emerald-100":"border-emerald-200 bg-emerald-50 text-emerald-700"}`,children:[a.jsx("span",{children:"Réductions totales"}),a.jsxs("span",{children:["-",fe(J)]})]}),a.jsxs("div",{className:`flex justify-between font-bold text-lg border-t pt-2 ${o==="hero"?"text-white border-gray-500":"text-gray-800"}`,children:[a.jsx("span",{children:"Total"}),a.jsx("span",{children:fe(c.total)})]}),!oe&&K&&a.jsxs("div",{className:`border-t pt-4 space-y-2 ${o==="hero"?"border-gray-500":""}`,children:[a.jsx("h3",{className:`text-xl font-bold ${o==="hero"?"text-white":"text-gray-800"} mb-2`,children:"Informations Client"}),H&&a.jsxs("div",{className:`flex items-center ${o==="hero"?"text-gray-200":"text-gray-700"}`,children:[a.jsx(bi,{size:16,className:"mr-2"}),a.jsx("span",{className:"whitespace-nowrap truncate",title:H,children:H})]}),W&&a.jsxs("div",{className:`flex items-center ${o==="hero"?"text-gray-200":"text-gray-700"}`,children:[a.jsx(gl,{size:16,className:"mr-2"}),a.jsx("span",{className:"whitespace-nowrap",title:W,children:W})]}),T&&a.jsxs("div",{className:`flex items-center ${o==="hero"?"text-gray-200":"text-gray-700"}`,children:[a.jsx(jn,{size:16,className:"mr-2"}),a.jsx("span",{className:"truncate",title:T,children:T})]}),c.receipt_url&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-medium",children:"Comprobante de pago:"}),a.jsxs("button",{onClick:()=>p(!0),className:"flex items-center text-blue-400 hover:underline",children:[a.jsx(Pr,{size:16,className:"mr-2"}),"Voir"]})]})]})]}),a.jsxs("div",{className:"mt-8 text-center space-y-4",children:[w&&a.jsx("div",{className:"flex justify-center",children:a.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-green-100 px-4 py-2 text-sm font-semibold text-green-700",children:[a.jsx(bn,{size:16})," Pedido listo"]})}),a.jsxs("div",{className:"flex flex-col space-y-4",children:[a.jsx("p",{className:`text-sm ${o==="hero"?"text-gray-300":"text-gray-600"}`,children:"Le statut de votre commande est mis à jour automatiquement."}),a.jsx("button",{onClick:w?i:void 0,disabled:!w,className:`font-bold py-3 px-6 rounded-lg transition ${w?`${o==="hero"?"bg-gray-200 text-gray-800 hover:bg-gray-300":"bg-brand-primary text-brand-secondary hover:bg-brand-primary-dark"} cursor-pointer`:"bg-gray-300 text-gray-500 cursor-not-allowed opacity-50"}`,children:"Volver"})]})]})]}),a.jsx(Tt,{isOpen:x,onClose:()=>p(!1),title:"Justificatif de Paiement",children:c.receipt_url?a.jsx("img",{src:c.receipt_url,alt:"Justificatif",className:"w-full h-auto rounded-md"}):a.jsx("p",{children:"Aucun justificatif fourni."})})]})},_2={"font/woff2":"woff2","application/font-woff2":"woff2","application/x-font-woff2":"woff2","font/woff":"woff","application/font-woff":"woff","application/x-font-woff":"woff","application/x-font-ttf":"truetype","font/ttf":"truetype","application/x-font-otf":"opentype","font/otf":"opentype","application/vnd.ms-fontobject":"embedded-opentype","application/x-font-eot":"embedded-opentype","image/svg+xml":"svg"},N2={woff2:"woff2",woff:"woff",ttf:"truetype",otf:"opentype",eot:"embedded-opentype",svg:"svg"},Jd=n=>{const i=n.trim();return(i.length>0?i:"Custom Font").replace(/"|'/g,"")},w2=n=>{if(!n)return null;const i=n.toLowerCase();for(const[o,c]of Object.entries(_2))if(i.includes(o))return c;return null},S2=n=>{const o=n.toLowerCase().match(/\.([a-z0-9]+)(?:\?|#|$)/);if(!o)return null;const c=o[1];return N2[c]??null},C2=n=>{const i=w2(n.format);return i||S2(n.url)},k2=n=>{const i=Jd(n.name),o=C2(n),c=o?` format("${o}")`:"",u=`url("${n.url}")${c}`;return`@font-face {
  font-family: "${i}";
  src: ${u};
  font-style: normal;
  font-weight: 400;
  font-display: swap;
}`},E2="data-custom-font-faces",Bg=n=>{h.useEffect(()=>{if(typeof document>"u")return;const i=n.filter(f=>f.type==="font");if(i.length===0)return;const o=[],c=new Set;if(i.forEach(f=>{const g=k2(f),x=g.match(/font-family: "([^"]+)";/),p=x?x[1]:f.name;c.has(p)||(c.add(p),o.push(g))}),o.length===0)return;const u=document.createElement("style");return u.setAttribute(E2,"true"),u.textContent=o.join(`
`),document.head.appendChild(u),()=>{u.remove()}},[n])},Ig=n=>{if(!n)return n??void 0;const i=n.trim();return i.length===0||i.includes(",")?i.length===0?void 0:i:/^(['"]).*\1$/.test(i)||!/[^a-zA-Z0-9-]/.test(i)?i:`'${i.replace(/'/g,"\\'")}'`},Ta=n=>n.background.type==="image"&&n.background.image?{backgroundImage:`url('${n.background.image}')`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundColor:n.background.color}:{backgroundColor:n.background.color},Wd=(n,i)=>{const o=Ta(n);if(n.background.type==="image"){const c=n.background.image??i;return c?{...o,backgroundImage:`url('${c}')`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:o}return i?{...o,backgroundImage:`url('${i}')`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:o},Ma=n=>({color:n.textColor,fontFamily:Ig(n.fontFamily)}),ds=n=>({...Ma(n),fontSize:n.fontSize}),eu=(n,i)=>{const o={color:(i==null?void 0:i.textColor)??n.textColor,fontFamily:Ig((i==null?void 0:i.fontFamily)??n.fontFamily)};return i!=null&&i.backgroundColor&&i.backgroundColor.trim().length>0&&(o.backgroundColor=i.backgroundColor),o},Hg=(n,i)=>({...eu(n,i),fontSize:(i==null?void 0:i.fontSize)??n.fontSize}),Fg=(n,i)=>i!=null&&i.backgroundColor?{backgroundColor:i.backgroundColor}:{},$g=(n,i,o)=>{if(!n)return n;try{const c=new URL(n);return c.searchParams.set(i,o),c.toString()}catch{const u=n.includes("?")?"&":"?",f=encodeURIComponent(i),g=encodeURIComponent(o);return`${n}${u}${f}=${g}`}},Sh="/logo-brand.svg",Fa=n=>{if(n.startsWith("navigation."))return"navigation";if(n.startsWith("hero."))return"hero";if(n.startsWith("about."))return"about";if(n.startsWith("menu."))return"menu";if(n.startsWith("instagramReviews."))return"instagramReviews";if(n.startsWith("findUs."))return"findUs";if(n.startsWith("footer."))return"footer";throw new Error(`Zone introuvable pour l'élément modifiable "${n}"`)},Gg=_a.createContext(!0),Xe=({id:n,onEdit:i,children:o,label:c,className:u,buttonClassName:f,as:g="div"})=>{const x=["group relative",u].filter(Boolean).join(" "),p=_a.useContext(Gg),[y,v]=h.useState(!1);if(!p)return a.jsx(g,{className:x,children:o});const N=["customization-edit-button absolute z-30 flex h-8 w-8 items-center justify-center rounded-full bg-blue-500 text-white shadow-lg transition-all duration-200","opacity-0 group-hover:opacity-100 group-focus-within:opacity-100 focus-visible:opacity-100","focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500","hover:scale-110 hover:bg-blue-600 active:scale-95",f??"right-2 top-2"].filter(Boolean).join(" "),j=S=>{S.preventDefault(),S.stopPropagation();const w=Fa(n),D=S.currentTarget.getBoundingClientRect(),C=S.currentTarget.closest(`[data-zone="${w}"]`)??S.currentTarget.parentElement,L=(C==null?void 0:C.getBoundingClientRect())??null,q=S.currentTarget.closest('[data-preview-boundary="true"]'),X=(q==null?void 0:q.getBoundingClientRect())??null;i(n,{zone:w,anchor:D??L,boundary:X})};return a.jsxs(g,{className:x,onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1),children:[a.jsx("button",{type:"button",onClick:j,className:N,"aria-label":c,"data-element-id":n,title:c,children:a.jsx(kv,{className:"h-4 w-4","aria-hidden":"true"})}),y&&a.jsx("div",{className:"absolute inset-0 pointer-events-none border-2 border-blue-500 border-dashed rounded-lg opacity-50 animate-pulse"}),y&&a.jsxs("div",{className:"absolute z-40 bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded shadow-lg whitespace-nowrap",children:[c,a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]}),o]})},ml=({children:n,className:i,zone:o,activeZone:c})=>{const f=["customization-section-card relative overflow-hidden rounded-3xl border bg-white shadow-sm transition-all",c===o?"active border-brand-primary/70 shadow-brand-primary/20 ring-2 ring-brand-primary/10":"border-gray-200",i].filter(Boolean).join(" ");return a.jsx("div",{className:f,"data-zone":o,children:n})},Ch=({content:n,bestSellerProducts:i,onEdit:o,activeZone:c,showEditButtons:u=!0})=>{const f=Ta(n.navigation.style),g=Ma(n.navigation.style);ds(n.navigation.style);const x=n.navigation.brandLogo??Sh,p=n.navigation.staffLogo??n.navigation.brandLogo??Sh,y=Wd(n.hero.style,n.hero.backgroundImage),v=Ma(n.hero.style),N=ds(n.hero.style),j=Ta(n.about.style),S=Ma(n.about.style);ds(n.about.style);const w=Ta(n.menu.style),D=Ma(n.menu.style),C=ds(n.menu.style),L=Ta(n.findUs.style),q=Ma(n.findUs.style),X=Ta(n.footer.style),A=ds(n.footer.style);Bg(n.assets.library);const F=n.elementStyles??{},te=n.elementRichText??{},J=M=>{var ge;const re=te[M],ue=(ge=re==null?void 0:re.html)==null?void 0:ge.trim();return ue&&ue.length>0?ue:null},Q=(M,re,ue,ge)=>{const ae=J(M);return ae?_a.createElement(re,{...ue,dangerouslySetInnerHTML:{__html:ae}}):_a.createElement(re,ue,ge)},oe={navigation:n.navigation.style,hero:n.hero.style,about:n.about.style,menu:n.menu.style,instagramReviews:n.instagramReviews.style,findUs:n.findUs.style,footer:n.footer.style},H=M=>F[M],W=M=>{const re=Fa(M);return eu(oe[re],H(M))},T=M=>{const re=Fa(M);return Hg(oe[re],H(M))},K=M=>{const re=Fa(M);return Fg(oe[re],H(M))},B=n.findUs.address.trim(),le=n.findUs.mapUrl,_=typeof le=="string"?le.trim():"",E=_.length>0,z=!E&&B.length>0?encodeURIComponent(B):"",Z=E?_:z?`https://www.google.com/maps?q=${z}`:"https://www.google.com/maps",$=E?$g(_,"output","embed"):z?`https://www.google.com/maps?q=${z}&output=embed`:"about:blank",R=E||z.length>0,I=B.length>0?B:n.findUs.title;return a.jsx(Gg.Provider,{value:u,children:a.jsxs("div",{className:"space-y-6 rounded-[2.5rem] border border-gray-200 bg-slate-50 p-6 shadow-inner","data-preview-boundary":"true",children:[a.jsx(ml,{zone:"navigation",activeZone:c,children:a.jsx(Xe,{id:"navigation.style.background",label:"Modifier le fond de la navigation",onEdit:o,className:"block",buttonClassName:"right-4 top-4",children:a.jsx("header",{className:"login-header",style:f,children:a.jsxs("div",{className:"layout-container login-header__inner",style:g,children:[a.jsxs("div",{className:"login-brand",style:g,children:[a.jsx(Xe,{id:"navigation.brandLogo",label:"Modifier le logo principal",onEdit:o,as:"span",className:"inline-flex items-center",children:a.jsx("img",{src:x,alt:`Logo ${n.navigation.brand}`,className:"login-brand__logo"})}),a.jsx(Xe,{id:"navigation.brand",label:"Modifier le nom de la marque",onEdit:o,as:"span",className:"ml-3 inline-flex items-center",buttonClassName:"-right-3 -top-3",children:Q("navigation.brand","span",{className:"login-brand__name",style:W("navigation.brand")},n.navigation.brand)})]}),a.jsxs("nav",{className:"login-nav","aria-label":"Navigation principale",children:[a.jsx(Xe,{id:"navigation.links.home",label:"Modifier le lien Accueil",onEdit:o,as:"span",className:"inline-flex",buttonClassName:"-right-2 -top-2",children:Q("navigation.links.home","span",{className:"login-nav__link",style:T("navigation.links.home")},n.navigation.links.home)}),a.jsx(Xe,{id:"navigation.links.about",label:"Modifier le lien À propos",onEdit:o,as:"span",className:"inline-flex",buttonClassName:"-right-2 -top-2",children:Q("navigation.links.about","span",{className:"login-nav__link",style:T("navigation.links.about")},n.navigation.links.about)}),a.jsx(Xe,{id:"navigation.links.menu",label:"Modifier le lien Menu",onEdit:o,as:"span",className:"inline-flex",buttonClassName:"-right-2 -top-2",children:Q("navigation.links.menu","span",{className:"login-nav__link",style:T("navigation.links.menu")},n.navigation.links.menu)}),a.jsx(Xe,{id:"navigation.links.loginCta",label:"Modifier le bouton personnel",onEdit:o,as:"span",className:"inline-flex",buttonClassName:"-right-2 -top-2",children:a.jsx("div",{className:"login-nav__staff-btn","aria-label":n.navigation.links.loginCta,role:"img",children:a.jsx(Xe,{id:"navigation.staffLogo",label:"Modifier le logo d'accès staff",onEdit:o,as:"span",className:"inline-flex",buttonClassName:"-right-2 -top-2",children:a.jsx("img",{src:p,alt:"",className:"login-brand__logo","aria-hidden":"true"})})})})]})]})})})}),a.jsx(ml,{zone:"hero",activeZone:c,children:a.jsx(Xe,{id:"hero.backgroundImage",label:"Modifier le visuel de fond du hero",onEdit:o,className:"block",buttonClassName:"right-4 top-4",children:a.jsx("section",{className:"section section-hero",style:{...y,...v},children:a.jsx("div",{className:"section-hero__inner",children:a.jsxs("div",{className:"hero-content",style:v,children:[a.jsx(Xe,{id:"hero.title",label:"Modifier le titre du hero",onEdit:o,className:"block",buttonClassName:"right-0 -top-3",children:Q("hero.title","h2",{className:"hero-title",style:W("hero.title")},n.hero.title)}),a.jsx(Xe,{id:"hero.subtitle",label:"Modifier le sous-titre du hero",onEdit:o,className:"mt-4 block",buttonClassName:"right-0 -top-3",children:Q("hero.subtitle","p",{className:"hero-subtitle",style:T("hero.subtitle")},n.hero.subtitle)}),a.jsx(Xe,{id:"hero.ctaLabel",label:"Modifier le texte du bouton principal",onEdit:o,className:"mt-6 inline-flex",buttonClassName:"-right-3 -top-3",children:a.jsx("button",{type:"button",className:"ui-btn ui-btn-accent hero-cta",style:{...T("hero.ctaLabel"),...K("hero.ctaLabel")},disabled:!0,children:Q("hero.ctaLabel","span",{className:"inline-flex items-center justify-center",style:T("hero.ctaLabel")},n.hero.ctaLabel)})}),a.jsxs("div",{className:"hero-history mt-6",children:[a.jsx(Xe,{id:"hero.historyTitle",label:"Modifier le titre de l'historique",onEdit:o,className:"block",buttonClassName:"right-0 -top-3",children:Q("hero.historyTitle","p",{className:"hero-history__title",style:T("hero.historyTitle")},n.hero.historyTitle)}),a.jsx(Xe,{id:"hero.reorderCtaLabel",label:"Modifier le bouton de réassort",onEdit:o,className:"hero-history__list",buttonClassName:"right-2 top-2",children:a.jsx(a.Fragment,{children:[0,1,2].map(M=>a.jsxs("div",{className:"hero-history__item",children:[a.jsxs("div",{className:"hero-history__meta",children:[a.jsx("p",{className:"hero-history__date",style:N,children:"Pedido del 12/03/2024"}),a.jsxs("p",{className:"hero-history__details",style:N,children:["2 article(s) • ",fe(32e3)]})]}),a.jsx("button",{type:"button",className:"hero-history__cta",style:{...T("hero.reorderCtaLabel"),...K("hero.reorderCtaLabel")},disabled:!0,children:Q("hero.reorderCtaLabel","span",{className:"inline-flex items-center justify-center",style:T("hero.reorderCtaLabel")},n.hero.reorderCtaLabel)})]},M))})})]})]})})})})}),a.jsx(ml,{zone:"about",activeZone:c,children:a.jsx(Xe,{id:"about.style.background",label:"Modifier le fond de la section À propos",onEdit:o,className:"block",buttonClassName:"right-4 top-4",children:a.jsx("section",{className:"section section-surface",style:{...j,...S},children:a.jsxs("div",{className:"section-inner section-inner--center",style:S,children:[a.jsx(Xe,{id:"about.title",label:"Modifier le titre À propos",onEdit:o,className:"block",buttonClassName:"right-0 -top-3",children:Q("about.title","h2",{className:"section-title",style:W("about.title")},n.about.title)}),a.jsx(Xe,{id:"about.description",label:"Modifier la description À propos",onEdit:o,className:"mt-4 block",buttonClassName:"right-0 -top-3",children:Q("about.description","p",{className:"section-text section-text--muted",style:T("about.description")},n.about.description)}),n.about.image&&a.jsx(Xe,{id:"about.image",label:"Modifier l'image À propos",onEdit:o,className:"mt-6 block",buttonClassName:"right-4 top-4",children:a.jsx("img",{src:n.about.image,alt:n.about.title,className:"h-64 w-full rounded-xl object-cover shadow-lg"})})]})})})}),a.jsx(ml,{zone:"menu",activeZone:c,children:a.jsx(Xe,{id:"menu.style.background",label:"Modifier le fond de la section Menu",onEdit:o,className:"block",buttonClassName:"right-4 top-4",children:a.jsx("section",{className:"section section-muted",style:{...w,...D},children:a.jsxs("div",{className:"section-inner section-inner--wide section-inner--center",style:D,children:[a.jsx(Xe,{id:"menu.title",label:"Modifier le titre du menu",onEdit:o,className:"block",buttonClassName:"right-0 -top-3",children:Q("menu.title","h2",{className:"section-title",style:W("menu.title")},n.menu.title)}),n.menu.image&&a.jsx(Xe,{id:"menu.image",label:"Modifier l'image du menu",onEdit:o,className:"mb-8 block",buttonClassName:"right-4 top-4",children:a.jsx("img",{src:n.menu.image,alt:n.menu.title,className:"h-64 w-full rounded-xl object-cover shadow-lg"})}),a.jsx("div",{className:"menu-grid",children:i.length>0?i.map(M=>{const re=!!M.image;return a.jsxs("article",{className:"ui-card menu-card",children:[re?a.jsx("img",{src:M.image,alt:M.nom_produit,className:"h-40 w-full rounded-t-xl object-cover"}):a.jsx("div",{className:"h-40 w-full rounded-t-xl bg-gradient-to-br from-orange-200 via-amber-100 to-orange-50"}),a.jsxs("div",{className:"menu-card__body",children:[a.jsx("h3",{className:"menu-card__title",style:D,children:M.nom_produit}),M.description&&a.jsx("p",{className:"menu-card__description",style:C,children:M.description}),a.jsx("p",{className:"menu-card__price",style:C,children:fe(M.prix_vente)})]})]},M.id)}):a.jsx("div",{className:"col-span-full rounded-2xl border border-dashed border-slate-300 bg-white/70 p-6 text-center",children:a.jsx("p",{className:"text-sm text-slate-500",style:C,children:"Aucun best seller sélectionné pour le moment."})})}),a.jsx(Xe,{id:"menu.ctaLabel",label:"Modifier le bouton de commande",onEdit:o,className:"section-actions mt-8",buttonClassName:"right-2 top-2",children:a.jsxs("div",{className:"section-actions",children:[a.jsx("button",{type:"button",className:"ui-btn ui-btn-primary hero-cta",style:{...T("menu.ctaLabel"),...K("menu.ctaLabel")},disabled:!0,children:Q("menu.ctaLabel","span",{className:"inline-flex items-center justify-center",style:T("menu.ctaLabel")},n.menu.ctaLabel)}),a.jsx(Xe,{id:"menu.loadingLabel",label:"Modifier le texte de chargement",onEdit:o,className:"ml-4 inline-flex",buttonClassName:"-right-3 -top-3",as:"span",children:Q("menu.loadingLabel","p",{className:"section-text section-text--muted",style:T("menu.loadingLabel")},n.menu.loadingLabel)})]})})]})})})}),a.jsx(ml,{zone:"findUs",activeZone:c,children:a.jsx(Xe,{id:"findUs.style.background",label:"Modifier le fond de la section Encuéntranos",onEdit:o,className:"block",buttonClassName:"right-4 top-4",children:a.jsx("section",{className:"section section-surface",style:{...L,...q},children:a.jsxs("div",{className:"find-us-grid",style:q,children:[a.jsxs("div",{className:"find-us-panel",style:q,children:[a.jsx(Xe,{id:"findUs.title",label:"Modifier le titre Encuéntranos",onEdit:o,className:"block",buttonClassName:"right-0 -top-3",children:Q("findUs.title","h2",{className:"section-title",style:W("findUs.title")},n.findUs.title)}),a.jsxs("div",{className:"find-us-details",children:[a.jsxs("div",{className:"find-us-detail",style:q,children:[a.jsx(jn,{className:"find-us-detail__icon","aria-hidden":"true"}),a.jsxs("div",{children:[a.jsx(Xe,{id:"findUs.addressLabel",label:"Modifier le libellé de l'adresse",onEdit:o,className:"block",buttonClassName:"right-0 -top-3",children:Q("findUs.addressLabel","h3",{className:"find-us-detail__title",style:W("findUs.addressLabel")},n.findUs.addressLabel)}),a.jsx(Xe,{id:"findUs.address",label:"Modifier l'adresse",onEdit:o,className:"mt-1 block",buttonClassName:"right-0 -top-3",children:Q("findUs.address","p",{className:"find-us-detail__text",style:T("findUs.address")},n.findUs.address)})]})]}),a.jsxs("div",{className:"find-us-detail",style:q,children:[a.jsx(fs,{className:"find-us-detail__icon","aria-hidden":"true"}),a.jsxs("div",{children:[a.jsx(Xe,{id:"findUs.hoursLabel",label:"Modifier le libellé des horaires",onEdit:o,className:"block",buttonClassName:"right-0 -top-3",children:Q("findUs.hoursLabel","h3",{className:"find-us-detail__title",style:W("findUs.hoursLabel")},n.findUs.hoursLabel)}),a.jsx(Xe,{id:"findUs.hours",label:"Modifier les horaires",onEdit:o,className:"mt-1 block",buttonClassName:"right-0 -top-3",children:Q("findUs.hours","p",{className:"find-us-detail__text",style:T("findUs.hours")},n.findUs.hours)})]})]}),a.jsxs("div",{className:"find-us-detail find-us-detail--centered",style:q,children:[a.jsx(ug,{className:"find-us-detail__icon","aria-hidden":"true"}),a.jsxs("div",{children:[a.jsx(Xe,{id:"findUs.cityLabel",label:"Modifier le libellé de l'email",onEdit:o,className:"block",buttonClassName:"right-0 -top-3",children:Q("findUs.cityLabel","h3",{className:"find-us-detail__title",style:W("findUs.cityLabel")},n.findUs.cityLabel)}),a.jsx(Xe,{id:"findUs.city",label:"Modifier l'email",onEdit:o,className:"mt-1 block",buttonClassName:"right-0 -top-3",children:Q("findUs.city","p",{className:"find-us-detail__text",style:T("findUs.city")},n.findUs.city)})]})]})]})]}),a.jsx("div",{className:"find-us-map",style:q,children:R?a.jsxs("div",{className:"find-us-map__frame",children:[a.jsx("iframe",{title:`Carte Google Maps pour ${I}`,src:$,loading:"lazy",allowFullScreen:!0,referrerPolicy:"no-referrer-when-downgrade"}),a.jsx("a",{className:"find-us-map__link",href:Z,target:"_blank",rel:"noopener noreferrer",children:a.jsx(Xe,{id:"findUs.mapLabel",label:"Modifier le libellé du lien Google Maps",onEdit:o,className:"inline-flex",buttonClassName:"-right-3 -top-3",as:"span",children:Q("findUs.mapLabel","span",{className:"find-us-map__label",style:T("findUs.mapLabel")},n.findUs.mapLabel)})})]}):a.jsx("div",{className:"find-us-map__placeholder",children:a.jsx(Xe,{id:"findUs.mapLabel",label:"Modifier le libellé du lien Google Maps",onEdit:o,className:"inline-flex",buttonClassName:"-right-3 -top-3",as:"span",children:Q("findUs.mapLabel","span",{className:"find-us-map__label",style:T("findUs.mapLabel")},n.findUs.mapLabel)})})})]})})})}),a.jsx(ml,{zone:"footer",activeZone:c,children:a.jsx(Xe,{id:"footer.style.background",label:"Modifier le fond du pied de page",onEdit:o,className:"block",buttonClassName:"right-4 top-4",children:a.jsx("footer",{className:"site-footer",style:{...X,...A},children:a.jsx("div",{className:"layout-container site-footer__inner",style:A,children:a.jsx(Xe,{id:"footer.text",label:"Modifier le texte du pied de page",onEdit:o,className:"block",buttonClassName:"right-0 -top-3",children:a.jsxs("p",{style:T("footer.text"),children:["© ",new Date().getFullYear()," ",n.navigation.brand,"."," ",Q("footer.text","span",{style:T("footer.text")},n.footer.text)]})})})})})})]})})},kh=n=>{const[i,o]=n.split(":");if(i===void 0||o===void 0)return null;const c=Number.parseInt(i,10),u=Number.parseInt(o,10);return Number.isNaN(c)||Number.isNaN(u)||c<0||c>23||u<0||u>59?null:c*60+u},tu=(n,i=new Date)=>{if(!n)return!0;const c=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][i.getDay()],u=n[c];if(!u||u.closed)return!1;const f=kh(u.startTime),g=kh(u.endTime);if(f===null||g===null||f===g)return!0;const x=i.getHours()*60+i.getMinutes();return f<g?x>=f&&x<=g:x>=f||x<=g},Yg=(n,i="fr-FR")=>{if(!n)return[];const o=[{key:"monday",labelFr:"Lundi",labelEs:"Lunes"},{key:"tuesday",labelFr:"Mardi",labelEs:"Martes"},{key:"wednesday",labelFr:"Mercredi",labelEs:"Miércoles"},{key:"thursday",labelFr:"Jeudi",labelEs:"Jueves"},{key:"friday",labelFr:"Vendredi",labelEs:"Viernes"},{key:"saturday",labelFr:"Samedi",labelEs:"Sábado"},{key:"sunday",labelFr:"Dimanche",labelEs:"Domingo"}],c=i.startsWith("es")?"Cerrado":"Fermé";return o.map(({key:u,labelFr:f,labelEs:g})=>{const x=n[u],p=i.startsWith("es")?g:f;return!x||x.closed?{day:u,label:p,schedule:c}:{day:u,label:p,schedule:`${x.startTime} - ${x.endTime}`}})},wd={monday:{startTime:"11:00",endTime:"23:00",closed:!1},tuesday:{startTime:"11:00",endTime:"23:00",closed:!1},wednesday:{startTime:"11:00",endTime:"23:00",closed:!1},thursday:{startTime:"11:00",endTime:"23:00",closed:!1},friday:{startTime:"11:00",endTime:"23:00",closed:!1},saturday:{startTime:"11:00",endTime:"23:00",closed:!1},sunday:{startTime:"11:00",endTime:"23:00",closed:!1}};let Fr=null;const au=()=>{const[n,i]=h.useState(Fr),[o,c]=h.useState(!0),[u,f]=h.useState(null),g=h.useCallback(async()=>{c(!0);try{const y=await ye.getOnlineOrderingSchedules()??wd;Fr=y,i(y),f(null)}catch(p){console.error("Failed to fetch online ordering schedules",p),Fr=wd,i(wd),f(p instanceof Error?p.message:"Impossible de charger les horaires.")}finally{c(!1)}},[]),x=h.useCallback(async p=>{const y=await ye.updateOnlineOrderingSchedules(p);return i(y),Fr=y,y},[]);return h.useEffect(()=>{g()},[g]),{schedule:n,loading:o,error:u,refresh:g,updateSchedule:x}},Eh="/logo-brand.svg",T2=Nn,Vg=_a.forwardRef(({pin:n,onPinChange:i,pinLength:o,describedBy:c,disabled:u},f)=>{const g=N=>{n.length<o&&!u&&i(n+N)},x=()=>{n.length>0&&!u&&i(n.slice(0,-1))},p=N=>{if(u)return;const j=N.target.value.replace(/\D/g,"").slice(0,o);i(j)},y=N=>{if(/^\d$/.test(N.key)){N.preventDefault(),g(N.key);return}if(N.key==="Backspace"){N.preventDefault(),x();return}N.key==="Escape"&&(N.preventDefault(),i(""))},v=n.length===0?`Aucun chiffre saisi. Vous pouvez entrer ${o} chiffres.`:`${n.length} ${n.length>1?"chiffres saisis":"chiffre saisi"} sur ${o}.`;return a.jsxs("div",{className:"pin-input","aria-label":"Clavier numérique sécurisé",children:[a.jsx("input",{ref:f,id:"staff-pin-field",type:"password",inputMode:"numeric",autoComplete:"one-time-code",className:"pin-input__field",value:n,onChange:p,onKeyDown:y,"aria-describedby":c,"aria-label":`Code PIN à ${o} chiffres`,disabled:u,"aria-disabled":u,"aria-busy":u}),a.jsx("div",{className:"pin-indicator",role:"presentation",children:Array.from({length:o}).map((N,j)=>a.jsx("div",{className:"pin-indicator__slot","aria-hidden":"true",children:n[j]?"•":""},j))}),a.jsx("div",{className:"pin-input__live","aria-live":"polite",children:v}),a.jsxs("div",{className:"pin-pad",children:[[...Array(9)].map((N,j)=>a.jsx("button",{type:"button",onClick:()=>g(String(j+1)),className:"pin-pad__button",disabled:u,children:j+1},j+1)),a.jsx("div",{"aria-hidden":"true"}),a.jsx("button",{type:"button",onClick:()=>g("0"),className:"pin-pad__button",disabled:u,children:"0"}),a.jsx("button",{type:"button",onClick:x,className:"pin-pad__button pin-pad__button--muted",disabled:u,children:"DEL"})]})]})});Vg.displayName="PinInput";const M2=n=>n===1?"menu-grid menu-grid--single":n===2?"menu-grid menu-grid--double":n===3?"menu-grid menu-grid--triple":n>=6?"menu-grid menu-grid--six":n>0?"menu-grid menu-grid--multi":"menu-grid",A2=n=>{const i="ui-card menu-card";return n===1?`${i} menu-card--single`:n===2?`${i} menu-card--double`:n===3?`${i} menu-card--triple`:n>=6?`${i} menu-card--compact`:i},z2=()=>{const[n,i]=h.useState(!1),[o,c]=h.useState(""),[u,f]=h.useState(""),[g,x]=h.useState(!1),p=h.useRef(null),{login:y}=$a(),v=Vs(),{content:N}=Ci(),{schedule:j}=au(),[S,w]=h.useState(()=>N);h.useEffect(()=>{N&&w(N)},[N]);const D=S??T2;Bg(D.assets.library);const{navigation:C,hero:L,about:q,menu:X,findUs:A,footer:F,onlineOrdering:te}=D,J=h.useCallback(Se=>Se?Se.replace(/[,\s]*Colombia\b/gi,"").trim():"",[]),Q=h.useMemo(()=>J(A.address),[A.address,J]),oe=C.brandLogo??Eh,H=C.brandLogo??Eh,W=Ta(C.style),T=Ma(C.style),K=Wd(L.style,L.backgroundImage),B=Ma(L.style),le=ds(L.style),_=Ta(q.style),E=Ma(q.style),z=Ta(X.style),Z=Ma(X.style),$=ds(X.style),R=Ta(A.style),I=Ma(A.style),M=ds(A.style),re=Ta(F.style),ue=ds(F.style),ge=D.elementStyles??{},ae={navigation:C.style,hero:L.style,about:q.style,menu:X.style,instagramReviews:D.instagramReviews.style,findUs:A.style,footer:F.style},ce=Se=>ge[Se],_e=Se=>{const Ge=Fa(Se);return eu(ae[Ge],ce(Se))},xe=Se=>{const Ge=Fa(Se);return Hg(ae[Ge],ce(Se))},Ae=Se=>{const Ge=Fa(Se);return Fg(ae[Ge],ce(Se))},Ke=D.elementRichText??{},[Mt,Vt]=h.useState(()=>new Date);h.useEffect(()=>{if(typeof window>"u")return;const Se=()=>Vt(new Date);Se();const Ge=window.setInterval(Se,6e4);return()=>window.clearInterval(Ge)},[]);const qt=tu(j,Mt),be=h.useMemo(()=>Yg(j,"fr-FR"),[j]),Te=Se=>{var Bt;const Ge=Ke[Se],mt=(Bt=Ge==null?void 0:Ge.html)==null?void 0:Bt.trim();return mt&&mt.length>0?mt:null},ve=(Se,Ge,mt,Bt)=>{const Cn=Te(Se);return Cn?_a.createElement(Ge,{...mt,dangerouslySetInnerHTML:{__html:Cn}}):_a.createElement(Ge,mt,Bt)},[ht,st]=h.useState([]),[rt,At]=h.useState([]),[gt,dt]=h.useState(!0),[Na,ut]=h.useState(!1),[sa,wa]=h.useState(()=>so()),de=h.useCallback(async Se=>{x(!0),f("");try{const Ge=await y(Se),mt=Pd(Ge)??"/dashboard";i(!1),c(""),v(mt)}catch(Ge){console.error("Failed to authenticate with PIN",Ge);const mt=Ge instanceof Error&&Ge.message?Ge.message:"PIN invalide";f(mt),c(""),requestAnimationFrame(()=>{var Bt;(Bt=p.current)==null||Bt.focus()})}finally{x(!1)}},[y,v]);h.useEffect(()=>{if(!n)return;const Se=window.setTimeout(()=>{var Ge;(Ge=p.current)==null||Ge.focus()},0);return()=>window.clearTimeout(Se)},[n]),h.useEffect(()=>{o.length===6&&!g&&de(o)},[o,g,de]),h.useEffect(()=>{if(!(typeof window>"u"))try{const Se=window.localStorage.getItem("customer-order-history");if(!Se)return;const Ge=JSON.parse(Se);Array.isArray(Ge)&&At(Ge)}catch(Se){console.error("Could not load order history",Se)}},[]),h.useEffect(()=>{let Se=!0;return(async()=>{try{const mt=await ye.getBestSellerProducts();Se&&st(mt)}catch(mt){console.error("Could not load best seller products",mt)}finally{Se&&dt(!1)}})(),()=>{Se=!1}},[]);const pe=A.address.trim(),ke=A.mapUrl,qe=typeof ke=="string"?ke.trim():"",Be=qe.length>0,Fe=!Be&&pe.length>0?encodeURIComponent(pe):"",Me=Be?qe:Fe?`https://www.google.com/maps?q=${Fe}`:"https://www.google.com/maps",$e=Be?$g(qe,"output","embed"):Fe?`https://www.google.com/maps?q=${Fe}&output=embed`:"about:blank",bt=Be||Fe.length>0,ot=pe.length>0?pe:A.title,zt="0681161642",Oa=`https://wa.me/${`33${zt.replace(/^0/,"")}`}`,Qt=(sa==null?void 0:sa.orderId)??null,ie=ht.slice(0,6),we=ie.length,Oe=M2(we),Ze=A2(we),Pe=Se=>{Se.preventDefault(),o.length===6&&!g&&de(o)},Dt=()=>{Kh(),wa(null)},Yt=Se=>{localStorage.setItem("customer-order-reorder-id",Se),v("/commande-client")},Sn=()=>{qt&&v("/commande-client")};return a.jsxs("div",{className:"login-page",children:[a.jsx("header",{className:"login-header",style:W,children:a.jsxs("div",{className:"layout-container login-header__inner",style:T,children:[a.jsxs("div",{className:"login-brand",style:T,children:[a.jsx("img",{src:oe,alt:`Logo ${C.brand}`,className:"login-brand__logo"}),ve("navigation.brand","span",{className:"login-brand__name",style:_e("navigation.brand")},C.brand)]}),a.jsxs("nav",{className:"login-nav","aria-label":"Navigation principale",children:[ve("navigation.links.home","a",{href:"#accueil",className:"login-nav__link",style:xe("navigation.links.home")},C.links.home),ve("navigation.links.about","a",{href:"#apropos",className:"login-nav__link",style:xe("navigation.links.about")},C.links.about),ve("navigation.links.menu","a",{href:"#menu",className:"login-nav__link",style:xe("navigation.links.menu")},C.links.menu),a.jsx("button",{type:"button",onClick:()=>i(!0),className:"login-nav__staff-btn","aria-label":C.links.loginCta,children:a.jsx("img",{src:H,alt:"",className:"login-brand__logo","aria-hidden":"true"})})]}),a.jsx("button",{type:"button",onClick:()=>ut(!0),className:"login-header__menu","aria-label":"Ouvrir le menu",children:a.jsx(dg,{size:24})})]})}),Na&&a.jsxs("div",{className:"login-menu-overlay",role:"dialog","aria-modal":"true",style:W,children:[a.jsx("button",{type:"button",onClick:()=>ut(!1),className:"login-menu-overlay__close","aria-label":"Fermer le menu",children:a.jsx(us,{size:28})}),a.jsxs("nav",{className:"login-menu-overlay__nav","aria-label":"Navigation mobile",style:T,children:[ve("navigation.links.home","a",{href:"#accueil",onClick:()=>ut(!1),className:"login-menu-overlay__link",style:xe("navigation.links.home")},C.links.home),ve("navigation.links.about","a",{href:"#apropos",onClick:()=>ut(!1),className:"login-menu-overlay__link",style:xe("navigation.links.about")},C.links.about),ve("navigation.links.menu","a",{href:"#menu",onClick:()=>ut(!1),className:"login-menu-overlay__link",style:xe("navigation.links.menu")},C.links.menu),a.jsx("button",{type:"button",onClick:()=>{i(!0),ut(!1)},className:"login-nav__staff-btn login-menu-overlay__staff-btn","aria-label":C.links.loginCta,children:a.jsx("img",{src:H,alt:"",className:"login-brand__logo","aria-hidden":"true"})})]})]}),a.jsxs("main",{children:[a.jsx("section",{id:"accueil",className:"section section-hero",style:{...K,...B},children:Qt?a.jsx(j2,{orderId:Qt,onNewOrderClick:Dt,variant:"hero"}):a.jsxs("div",{className:"hero-content",style:B,children:[ve("hero.title","h2",{className:"hero-title",style:_e("hero.title")},L.title),ve("hero.subtitle","p",{className:"hero-subtitle",style:xe("hero.subtitle")},L.subtitle),a.jsx("button",{onClick:Sn,className:`ui-btn hero-cta ${qt?"ui-btn-accent":"hero-cta--disabled"}`.trim(),style:{...xe("hero.ctaLabel"),...Ae("hero.ctaLabel")},disabled:!qt,"aria-disabled":!qt,children:ve("hero.ctaLabel","span",{className:"inline-flex items-center justify-center",style:xe("hero.ctaLabel")},L.ctaLabel)}),!qt&&a.jsxs("div",{className:"hero-availability",children:[a.jsx("div",{className:"hero-availability__icon",children:a.jsx(fs,{size:28})}),a.jsxs("div",{className:"hero-availability__content",children:[a.jsx("p",{className:"hero-availability__title",children:te.closedTitle}),a.jsx("p",{className:"hero-availability__subtitle",children:te.closedSubtitle||"Veuillez consulter nos horaires ci-dessous."}),a.jsxs("div",{className:"mt-4 space-y-2",children:[a.jsx("p",{className:"text-sm font-semibold uppercase tracking-wide text-white/90",children:"Horaires d'ouverture :"}),a.jsx("div",{className:"space-y-1",children:be.map(({day:Se,label:Ge,schedule:mt})=>a.jsxs("div",{className:"flex items-center text-sm",children:[a.jsx("span",{className:"font-medium text-white/80 w-24",children:Ge}),a.jsx("span",{className:"font-semibold text-white",children:mt})]},Se))})]})]})]}),rt.length>0&&a.jsxs("div",{className:"hero-history",children:[ve("hero.historyTitle","p",{className:"hero-history__title",style:xe("hero.historyTitle")},L.historyTitle),a.jsx("div",{className:"hero-history__list",children:rt.slice(0,3).map(Se=>a.jsxs("div",{className:"hero-history__item",children:[a.jsxs("div",{className:"hero-history__meta",children:[a.jsxs("p",{className:"hero-history__date",style:le,children:["Pedido del ",new Date(Se.date_creation).toLocaleDateString()]}),a.jsxs("p",{className:"hero-history__details",style:le,children:[Se.items.length," article(s) • ",fe(Se.total)]})]}),a.jsx("button",{type:"button",onClick:()=>Yt(Se.id),className:"hero-history__cta",style:{...xe("hero.reorderCtaLabel"),...Ae("hero.reorderCtaLabel")},children:ve("hero.reorderCtaLabel","span",{className:"inline-flex items-center justify-center",style:xe("hero.reorderCtaLabel")},L.reorderCtaLabel)})]},Se.id))})]})]})}),a.jsx("section",{id:"apropos",className:"section section-surface",style:{..._,...E},children:a.jsxs("div",{className:"section-inner section-inner--center",style:E,children:[ve("about.title","h2",{className:"section-title",style:_e("about.title")},q.title),ve("about.description","p",{className:"section-text section-text--muted",style:xe("about.description")},q.description),q.image&&a.jsx("img",{src:q.image,alt:q.title,className:"mt-6 h-64 w-full rounded-xl object-cover shadow-lg"})]})}),a.jsx("section",{id:"menu",className:"section section-muted",style:{...z,...Z},children:a.jsxs("div",{className:"section-inner section-inner--wide section-inner--center",style:Z,children:[ve("menu.title","h2",{className:"section-title",style:_e("menu.title")},X.title),X.image&&a.jsx("img",{src:X.image,alt:X.title,className:"mb-8 h-64 w-full rounded-xl object-cover shadow-lg"}),gt?ve("menu.loadingLabel","p",{className:"section-text section-text--muted",style:xe("menu.loadingLabel")},X.loadingLabel):ie.length>0?a.jsx("div",{className:Oe,children:ie.map(Se=>a.jsxs("article",{className:Ze,children:[a.jsx("img",{src:Se.image,alt:Se.nom_produit,className:"menu-card__media"}),a.jsxs("div",{className:"menu-card__body",children:[a.jsx("h3",{className:"menu-card__title",style:Z,children:Se.nom_produit}),a.jsx("p",{className:"menu-card__description",style:$,children:Se.description}),a.jsx("p",{className:"menu-card__price",style:$,children:fe(Se.prix_vente)})]})]},Se.id))}):a.jsx("p",{className:"section-text section-text--muted",style:$,children:"Aucun produit best seller n'est disponible pour le moment."}),a.jsx("div",{className:"section-actions",children:a.jsx("button",{onClick:()=>v("/commande-client"),className:"ui-btn ui-btn-primary hero-cta",style:{...xe("menu.ctaLabel"),...Ae("menu.ctaLabel")},children:ve("menu.ctaLabel","span",{className:"inline-flex items-center justify-center",style:xe("menu.ctaLabel")},X.ctaLabel)})})]})}),a.jsx("section",{id:"find-us",className:"section section-surface py-14 sm:py-16",style:{...R,...I},children:a.jsxs("div",{className:"section-inner section-inner--wide section-inner--center",children:[ve("findUs.title","h2",{className:"section-title text-center",style:_e("findUs.title")},A.title),a.jsxs("div",{className:"mx-auto mt-10 grid w-full max-w-6xl gap-8 md:grid-cols-2 lg:grid-cols-[minmax(0,1fr)_minmax(0,1.15fr)]",children:[a.jsxs("div",{className:"grid gap-6",children:[a.jsx("article",{className:"h-full rounded-2xl border border-gray-200 bg-white p-4 shadow-sm",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-xl bg-blue-500 text-white",children:a.jsx(jn,{className:"h-5 w-5"})}),a.jsxs("div",{className:"flex-1 space-y-2",children:[ve("findUs.addressLabel","h3",{className:"text-xl font-semibold text-gray-900",style:_e("findUs.addressLabel")},A.addressLabel),ve("findUs.address","p",{className:"whitespace-pre-line text-base font-medium text-gray-700",style:xe("findUs.address")},Q)]})]})}),a.jsx("article",{className:"h-full rounded-2xl border border-gray-200 bg-white p-4 shadow-sm",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-xl bg-blue-500 text-white",children:a.jsx(fs,{className:"h-5 w-5"})}),a.jsxs("div",{className:"flex-1 space-y-2",children:[ve("findUs.hoursLabel","h3",{className:"text-xl font-semibold text-gray-900",style:_e("findUs.hoursLabel")},A.hoursLabel),ve("findUs.hours","p",{className:"whitespace-pre-line text-base font-medium text-gray-700",style:xe("findUs.hours")},A.hours)]})]})}),a.jsx("article",{className:"h-full rounded-2xl border border-gray-200 bg-white p-4 shadow-sm",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-xl bg-blue-500 text-white",children:a.jsx(gl,{className:"h-5 w-5"})}),a.jsxs("div",{className:"flex-1 space-y-3",children:[ve("findUs.cityLabel","h3",{className:"text-xl font-semibold text-gray-900",style:_e("findUs.cityLabel")},A.cityLabel),a.jsx("div",{className:"flex flex-col gap-3 text-base font-medium text-gray-700",style:M,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("a",{href:`tel:${zt}`,className:"inline-flex items-center gap-2 text-base font-semibold text-gray-900 transition hover:text-blue-600",children:[a.jsx(gl,{className:"h-5 w-5 text-blue-500"}),zt]}),a.jsx("a",{href:Oa,target:"_blank",rel:"noopener noreferrer",className:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-green-500 text-white transition hover:bg-green-600","aria-label":"Nous écrire sur WhatsApp",children:a.jsx(ug,{className:"h-4 w-4"})})]})})]})]})})]}),a.jsxs("div",{className:"flex h-full w-full flex-col justify-between rounded-2xl border border-gray-200 bg-white p-6 shadow-sm",children:[a.jsx("div",{className:"relative aspect-[13/8] w-full overflow-hidden rounded-3xl bg-white",children:bt?a.jsx("iframe",{title:`Carte Google Maps pour ${ot}`,src:$e,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",className:"h-full w-full border-0",allowFullScreen:!0}):a.jsx("div",{className:"flex h-full w-full items-center justify-center bg-gray-100 px-8 text-center",children:a.jsx("p",{className:"text-lg text-gray-500",style:M,children:"La localisation de notre restaurant sera bientôt disponible."})})}),a.jsx("div",{className:"mt-6 flex justify-center",children:bt?a.jsxs("a",{href:Me,target:"_blank",rel:"noopener noreferrer",className:"inline-flex w-full items-center justify-center gap-3 rounded-full bg-blue-500 px-6 py-3 text-base font-semibold text-white shadow-lg transition hover:bg-blue-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500",style:xe("findUs.mapLabel"),children:[a.jsx(jn,{className:"h-6 w-6 text-white"}),ve("findUs.mapLabel","span",{className:"text-base font-semibold"},A.mapLabel)]}):null})]})]})]})})]}),a.jsx("footer",{className:"site-footer",style:{...re,...ue},children:a.jsx("div",{className:"layout-container site-footer__inner",style:ue,children:a.jsxs("p",{style:xe("footer.text"),children:["© ",new Date().getFullYear()," ",C.brand,"."," ",ve("footer.text","span",{style:xe("footer.text")},F.text)]})})}),a.jsx(Tt,{isOpen:n,onClose:()=>{i(!1),c(""),f("")},title:"Connexion du personnel",size:"lg",children:a.jsx("div",{className:"login-modal",children:a.jsx("form",{onSubmit:Pe,className:"login-modal__form","aria-describedby":u?"staff-pin-error":void 0,children:a.jsxs("div",{className:"login-modal__panel",children:[a.jsx(Vg,{ref:p,pin:o,onPinChange:c,pinLength:6,describedBy:u?"staff-pin-error":void 0,disabled:g}),u&&a.jsx("p",{id:"staff-pin-error",className:"login-modal__error",role:"alert","aria-live":"assertive",children:u})]})})})})]})},Th=[{value:"editor",label:"Éditeur",headerDescription:"Gestion complète",helper:"Créer, modifier et valider le contenu.",tooltip:"Autorise toutes les actions, y compris la modification et la validation des données."},{value:"readonly",label:"Lecture seule",headerDescription:"Consultation",helper:"Visualiser les informations sans modifier.",tooltip:"Permet uniquement de consulter les informations sans pouvoir les modifier."},{value:"none",label:"Aucun",headerDescription:"Accès bloqué",helper:"Masquer totalement la section.",tooltip:"Bloque complètement l’accès à la section ou à la fonctionnalité."}],O2=({permissionKeys:n,permissions:i,onChange:o,getPermissionLabel:c,customPermissions:u,onRemoveCustomPermission:f})=>{const g=h.useMemo(()=>{if(n.length===0)return[];const p=aa.map(S=>S.permissionKey),y=new Set(p),v=p.filter(S=>n.includes(S)),N=n.filter(S=>!y.has(S)).sort((S,w)=>c(S).localeCompare(c(w),"fr")),j=[];return v.length>0&&j.push({id:"navigation",title:"Navigation principale",keys:v}),N.length>0&&j.push({id:"custom",title:"Permissions personnalisées",keys:N}),j},[c,n]),x=p=>{n.forEach(y=>{(i[y]??"none")!==p&&o(y,p)})};return n.length===0?a.jsx("div",{className:"rounded-xl border border-dashed border-gray-300 bg-gray-50 px-4 py-6 text-center text-sm font-medium text-gray-900",children:"Aucune permission disponible pour ce rôle pour le moment."}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{type:"button",className:"permission-action-button",onClick:()=>x("editor"),title:"Autoriser toutes les sections en mode édition.",children:"Tout autoriser"}),a.jsx("button",{type:"button",className:"permission-action-button",onClick:()=>x("readonly"),title:"Basculer toutes les sections en lecture seule.",children:"Lecture seule partout"}),a.jsx("button",{type:"button",className:"permission-action-button is-danger",onClick:()=>x("none"),title:"Révoquer toutes les permissions.",children:"Tout bloquer"})]}),a.jsx("div",{className:"overflow-hidden rounded-xl border border-gray-200 bg-white shadow-sm",children:a.jsx("div",{className:"max-h-96 overflow-auto",children:a.jsx("div",{className:"min-w-full",children:a.jsxs("div",{className:"grid grid-cols-[minmax(220px,2fr)_repeat(3,minmax(140px,1fr))]",children:[a.jsx("div",{className:"border-b border-gray-200 bg-gray-50 px-4 py-3 text-sm font-semibold text-gray-900",children:"Section / permission"}),Th.map(p=>a.jsxs("div",{className:"border-b border-l border-gray-200 bg-gray-50 px-4 py-3 text-sm font-semibold text-gray-900",children:[a.jsx("div",{children:p.label}),a.jsx("p",{className:"mt-1 text-xs font-medium text-gray-900",children:p.headerDescription})]},p.value)),g.map(p=>a.jsxs(_a.Fragment,{children:[a.jsx("div",{className:"col-span-4 border-t border-gray-200 bg-gray-100 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-gray-900",children:p.title}),p.keys.map(y=>{const v=i[y]??"none",N=`permission-${y.replace(/[^a-zA-Z0-9_-]/g,"_")}`,j=y in u;return a.jsxs(_a.Fragment,{children:[a.jsx("div",{className:"border-t border-gray-100 px-4 py-3",children:a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-900",children:c(y)}),j&&f&&a.jsx("button",{type:"button",onClick:()=>f(y),className:"text-gray-700 transition-colors hover:text-red-600",title:"Supprimer cette permission personnalisée",children:a.jsx(wn,{className:"h-4 w-4"})})]})}),Th.map(S=>{const w=v===S.value;return a.jsx("div",{className:"border-t border-l border-gray-100 px-4 py-3",children:a.jsxs("label",{className:`permission-choice${w?" is-active":""}`,title:S.tooltip,children:[a.jsx("input",{type:"radio",className:"sr-only",name:N,value:S.value,checked:w,onChange:()=>o(y,S.value)}),a.jsx("span",{className:"permission-choice__label",children:S.label}),a.jsx("span",{className:"permission-choice__helper",children:S.helper})]})},S.value)})]},y)})]},p.id))]})})})})]})},D2=({mode:n,formState:i,onSubmit:o,onInputChange:c,onHomePageChange:u,onPermissionChange:f,onAddCustomPermission:g,onRemoveCustomPermission:x,onCancel:p,isSubmitting:y,hasAccessibleHomePage:v,permissionKeys:N,getPermissionLabel:j,isPermissionGranted:S})=>{const[w,D]=h.useState(!1),[C,L]=h.useState(""),[q,X]=h.useState(""),[A,F]=h.useState(null),te=()=>{D(!1),L(""),X(""),F(null)},J=()=>{const Q=C.trim(),oe=q.trim();if(!Q||!oe){F("La clé technique et le nom affiché sont obligatoires.");return}if(N.includes(Q)){F("Cette clé de permission existe déjà.");return}g(Q,oe),te()};return a.jsxs("div",{children:[a.jsx("h4",{className:"mb-4 text-lg font-semibold text-gray-900",children:n==="edit"?"Modifier le rôle sélectionné":"Créer un nouveau rôle"}),a.jsxs("form",{onSubmit:o,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"role-name",className:"mb-1 block text-sm font-medium text-gray-900",children:"Nom du rôle"}),a.jsx("input",{id:"role-name",name:"name",value:i.name,onChange:c,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-brand-primary focus:outline-none focus:ring-1 focus:ring-brand-primary",placeholder:"Ex. Manager"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"role-pin",className:"mb-1 block text-sm font-medium text-gray-900",children:"Code PIN d'accès"}),a.jsx("input",{id:"role-pin",name:"pin",value:i.pin,onChange:c,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-brand-primary focus:outline-none focus:ring-1 focus:ring-brand-primary",placeholder:"Ex. 1234"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"role-home-page",className:"mb-1 block text-sm font-medium text-gray-900",children:"Page d'accueil par défaut"}),a.jsx("select",{id:"role-home-page",name:"homePage",value:i.homePage,onChange:Q=>u(Q.target.value),disabled:!v,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-brand-primary focus:outline-none focus:ring-1 focus:ring-brand-primary disabled:cursor-not-allowed disabled:bg-gray-100",children:aa.map(Q=>{const oe=S(i.permissions[Q.permissionKey]);return a.jsxs("option",{value:Q.permissionKey,disabled:!oe,children:[j(Q.permissionKey),oe?"":" (accès requis)"]},Q.permissionKey)})}),v?a.jsx("p",{className:"mt-1 text-xs text-gray-900",children:"Les pages sans permission sont désactivées."}):a.jsx("p",{className:"mt-1 text-xs font-medium text-red-700",children:"Accordez au moins une permission pour choisir une page d'accueil."})]}),a.jsxs("div",{children:[a.jsx("p",{className:"mb-2 text-sm font-semibold text-gray-900",children:"Permissions par page"}),a.jsx(O2,{permissionKeys:N,permissions:i.permissions,onChange:f,getPermissionLabel:j,customPermissions:i.customPermissions,onRemoveCustomPermission:x}),a.jsx("div",{className:"mt-4 space-y-3",children:w?a.jsxs("div",{className:"rounded-md border border-dashed border-brand-primary/50 bg-brand-primary/5 p-4",children:[a.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-900",children:"Clé technique"}),a.jsx("input",{type:"text",value:C,onChange:Q=>{L(Q.target.value),F(null)},className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-brand-primary focus:outline-none focus:ring-1 focus:ring-brand-primary",placeholder:"ex. /rapports"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-900",children:"Nom affiché"}),a.jsx("input",{type:"text",value:q,onChange:Q=>{X(Q.target.value),F(null)},className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-brand-primary focus:outline-none focus:ring-1 focus:ring-brand-primary",placeholder:"ex. Rapports"})]})]}),A&&a.jsx("p",{className:"mt-2 text-xs font-medium text-red-700",children:A}),a.jsxs("div",{className:"mt-3 flex justify-end space-x-2",children:[a.jsx("button",{type:"button",onClick:te,className:"rounded-md border border-gray-300 px-3 py-1.5 text-xs font-semibold text-gray-900 hover:bg-gray-100",children:"Annuler"}),a.jsx("button",{type:"button",onClick:J,className:"rounded-md bg-brand-primary px-3 py-1.5 text-xs font-semibold text-white hover:bg-brand-primary/90",children:"Ajouter"})]})]}):a.jsx("button",{type:"button",onClick:()=>{D(!0),F(null)},className:"text-sm font-semibold text-brand-primary hover:underline",children:"Ajouter une permission"})})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[n==="edit"&&a.jsx("button",{type:"button",onClick:p,className:"rounded-md border border-gray-300 px-3 py-2 text-sm font-semibold text-gray-900 hover:bg-gray-100",children:"Annuler"}),a.jsxs("button",{type:"submit",disabled:y,className:"inline-flex items-center rounded-md bg-brand-primary px-4 py-2 text-sm font-semibold text-white shadow hover:bg-brand-primary/90 disabled:cursor-not-allowed disabled:opacity-60",children:[a.jsx(Bv,{className:"mr-2 h-4 w-4"}),y?"Enregistrement...":n==="edit"?"Mettre à jour":"Créer"]})]})]})]})},R2=({roles:n,isFetching:i,onCreateRole:o,onSelectRole:c,onDeleteRole:u,selectedRoleId:f,isEditing:g,deletingRoleId:x,getPermissionLabel:p})=>{const y=!i&&n.length===0;return a.jsxs("div",{className:"flex h-full flex-col",children:[a.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Rôles existants"}),a.jsxs("button",{type:"button",onClick:o,className:"inline-flex items-center rounded-md border border-brand-primary px-2 py-1 text-sm font-medium text-brand-primary transition-colors hover:bg-brand-primary/10",children:[a.jsx(Ni,{className:"mr-1.5 h-4 w-4"}),"Nouveau rôle"]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto rounded-md border border-gray-200 p-3",children:i?a.jsx("p",{className:"text-sm text-gray-900",children:"Chargement des rôles..."}):y?a.jsx("p",{className:"text-sm text-gray-900",children:"Aucun rôle configuré pour le moment."}):a.jsx("div",{className:"space-y-3",children:n.map(v=>{const N=g&&f===v.id;return a.jsxs("div",{className:`flex items-center justify-between rounded-md border px-3 py-2 transition-colors ${N?"border-brand-primary bg-brand-primary/10":"border-gray-200"}`,children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"font-semibold text-gray-900",children:v.name}),a.jsxs("p",{className:"text-xs font-medium text-gray-900",children:["PIN : ",v.pin??"—"]}),v.homePage&&a.jsxs("p",{className:"text-xs font-medium text-gray-900",children:["Accueil : ",p(v.homePage)]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:()=>c(v),className:"rounded-md border border-gray-300 px-2 py-1 text-xs font-semibold text-gray-900 transition-colors hover:bg-gray-100",children:"Modifier"}),a.jsxs("button",{type:"button",onClick:()=>u(v.id),disabled:x===v.id,className:"inline-flex items-center rounded-md border border-red-300 px-2 py-1 text-xs font-semibold text-red-600 transition-colors hover:bg-red-50 disabled:cursor-not-allowed disabled:opacity-60",children:[a.jsx(wn,{className:"mr-1 h-3 w-3"}),"Supprimer"]})]})]},v.id)})})})]})};var Vh;const U2=((Vh=aa[0])==null?void 0:Vh.permissionKey)??"/dashboard",L2=n=>{if(!n)return!1;const i=n.trim().toLowerCase();return i===yg.ADMIN||i==="administrateur"},hn=(n,i,o={})=>{const c={...n||{}};return delete c[_n],aa.forEach(u=>{u.permissionKey in c||(u.permissionKey===ps&&L2(i)?c[u.permissionKey]="editor":c[u.permissionKey]="none")}),Object.keys(o).forEach(u=>{u in c||(c[u]="none")}),c},gn=n=>{const i=aa.find(o=>xn(n[o.permissionKey]));return(i==null?void 0:i.permissionKey)??U2},Mh=n=>{const i=hn(void 0,void 0,n);return{name:"",pin:"",permissions:i,homePage:gn(i),customPermissions:{...n}}},xn=n=>n==="editor"||n==="readonly",q2=({isOpen:n,onClose:i})=>{const{refreshRole:o,role:c}=$a(),[u,f]=h.useState([]),[g,x]=h.useState({}),[p,y]=h.useState(()=>Mh({})),[v,N]=h.useState("create"),[j,S]=h.useState(!1),[w,D]=h.useState(!1),[C,L]=h.useState(null),[q,X]=h.useState(null),[A,F]=h.useState(null),te=h.useMemo(()=>{const $=aa.map(I=>I.permissionKey),R=new Set;return Object.keys(g).forEach(I=>{$.includes(I)||R.add(I)}),u.forEach(I=>{Object.keys(I.permissions).forEach(M=>{M!==_n&&($.includes(M)||R.add(M))})}),[...$,...Array.from(R)]},[u,g]),J=h.useMemo(()=>aa.some($=>xn(p.permissions[$.permissionKey])),[p.permissions]),Q=h.useCallback(async()=>{S(!0);try{const $=await ye.getRoles();f($),x(R=>{const I={...R};let M=!1;const re=new Set(aa.map(ue=>ue.permissionKey));return $.forEach(ue=>{Object.keys(ue.permissions).forEach(ge=>{ge===_n||re.has(ge)||ge in I||(I[ge]=ge,M=!0)})}),M?I:R}),F(null)}catch($){console.error("Failed to load roles:",$),F("Impossible de charger les rôles.")}finally{S(!1)}},[]),oe=h.useCallback(()=>{N("create"),y(Mh(g))},[g]);h.useEffect(()=>{n&&(X(null),F(null),oe(),Q())},[n,Q,oe]),h.useEffect(()=>{y($=>{const R=$.homePage;if(xn($.permissions[R]))return $;const I=gn($.permissions);return I===R?$:{...$,homePage:I}})},[p.permissions]),h.useEffect(()=>{y($=>{const R=$.customPermissions,I=g,M=Object.keys(R),re=Object.keys(I);if(M.length===re.length&&M.every(ae=>I[ae]===R[ae]))return $;const ue=hn($.permissions,$.name,I),ge=xn(ue[$.homePage])?$.homePage:gn(ue);return{...$,customPermissions:{...I},permissions:ue,homePage:ge}})},[g]);const H=h.useCallback($=>{const R=aa.find(I=>I.permissionKey===$);return R?R.name:g[$]??$},[g]);return{roles:u,formState:p,mode:v,isFetching:j,isSubmitting:w,deletingRoleId:C,statusMessage:q,errorMessage:A,permissionKeys:te,hasAccessibleHomePage:J,handleInputChange:$=>{const{name:R,value:I}=$.target;y(M=>({...M,[R]:I}))},handlePermissionChange:($,R)=>{y(I=>({...I,permissions:{...I.permissions,[$]:R}}))},handleHomePageChange:$=>{y(R=>({...R,homePage:$}))},handleSelectRole:$=>{const R=new Set(aa.map(ue=>ue.permissionKey)),I={...g};let M=!1;Object.keys($.permissions).forEach(ue=>{ue===_n||R.has(ue)||ue in I||(I[ue]=ue,M=!0)}),M&&x(I);const re=hn($.permissions,$.name,M?I:g);N("edit"),y({id:$.id,name:$.name,pin:$.pin??"",permissions:re,homePage:$.homePage??gn(re),customPermissions:{...M?I:g}}),X(null),F(null)},handleDeleteRole:async $=>{if(confirm("Supprimer ce rôle ? Cette action est irréversible.")){L($),X(null),F(null);try{await ye.deleteRole($),X("Rôle supprimé avec succès."),v==="edit"&&p.id===$&&oe(),await Q(),(c==null?void 0:c.id)===$&&await o()}catch(R){console.error("Failed to delete role:",R),F("Impossible de supprimer le rôle.")}finally{L(null)}}},handleSubmit:async $=>{if($.preventDefault(),F(null),X(null),!p.name.trim()||!p.pin.trim()){F("Le nom et le code PIN sont obligatoires.");return}D(!0);try{const R=hn(p.permissions,p.name,g),I=xn(R[p.homePage])?p.homePage:gn(R);if(v==="create")await ye.createRole({name:p.name.trim(),pin:p.pin.trim(),permissions:R,homePage:I}),X("Rôle créé avec succès."),await Q(),await o(),oe();else if(p.id){const M=await ye.updateRole(p.id,{name:p.name.trim(),pin:p.pin.trim(),permissions:R,homePage:I});X("Rôle mis à jour avec succès.");const re=hn(M.permissions,M.name,g);y({id:M.id,name:M.name,pin:M.pin??"",permissions:re,homePage:M.homePage??gn(re),customPermissions:{...g}}),await Q(),(c==null?void 0:c.id)===M.id&&await o()}}catch(R){console.error("Failed to save role:",R),F("Impossible d'enregistrer le rôle.")}finally{D(!1)}},handleClose:()=>{oe(),X(null),F(null),i()},resetForm:oe,getPermissionLabel:H,isPermissionGranted:xn,handleAddCustomPermission:($,R)=>{aa.some(I=>I.permissionKey===$)||x(I=>{if(I[$]===R)return I;const M={...I,[$]:R};return y(re=>{const ue=hn(re.permissions,re.name,M);return $ in ue||(ue[$]="none"),{...re,customPermissions:{...M},permissions:ue}}),M})},handleRemoveCustomPermission:$=>{aa.some(R=>R.permissionKey===$)||x(R=>{if(!($ in R))return R;const I={...R};return delete I[$],y(M=>{const{[$]:re,...ue}=M.customPermissions,ge={...M.permissions};delete ge[$];const ae=hn(ge,M.name,I),ce=xn(ae[M.homePage])?M.homePage:gn(ae);return{...M,customPermissions:{...ue},permissions:ae,homePage:ce}}),I})}}},B2=({isOpen:n,onClose:i})=>{const{roles:o,formState:c,mode:u,isFetching:f,isSubmitting:g,deletingRoleId:x,statusMessage:p,errorMessage:y,permissionKeys:v,hasAccessibleHomePage:N,handleInputChange:j,handlePermissionChange:S,handleHomePageChange:w,handleSelectRole:D,handleDeleteRole:C,handleSubmit:L,handleClose:q,resetForm:X,getPermissionLabel:A,isPermissionGranted:F,handleAddCustomPermission:te,handleRemoveCustomPermission:J}=q2({isOpen:n,onClose:i});return a.jsx(Tt,{isOpen:n,onClose:q,title:"Gestion des rôles",size:"xl",children:a.jsxs("div",{className:"flex flex-col gap-6",children:[p&&a.jsx("div",{className:"rounded-md bg-green-100 px-4 py-2 text-sm font-medium text-green-900",children:p}),y&&a.jsx("div",{className:"rounded-md bg-red-100 px-4 py-2 text-sm font-medium text-red-900",children:y}),a.jsxs("div",{className:"flex flex-col gap-6 md:flex-row md:items-start md:gap-8",children:[a.jsx("div",{className:"md:w-[38%] md:flex-shrink-0 lg:w-[35%]",children:a.jsx(R2,{roles:o,isFetching:f,onCreateRole:X,onSelectRole:D,onDeleteRole:C,selectedRoleId:c.id,isEditing:u==="edit",deletingRoleId:x,getPermissionLabel:A})}),a.jsx("div",{className:"flex-1",children:a.jsx(D2,{mode:u,formState:c,onSubmit:L,onInputChange:j,onHomePageChange:w,onPermissionChange:S,onAddCustomPermission:te,onRemoveCustomPermission:J,onCancel:X,isSubmitting:g,hasAccessibleHomePage:N,permissionKeys:v,getPermissionLabel:A,isPermissionGranted:F})})]})]})})},I2=new Intl.NumberFormat("fr-FR",{maximumFractionDigits:1,minimumFractionDigits:0}),gi=n=>I2.format(Number.isFinite(n)?n:0),Bs=(n,i)=>i==null?null:i===0?n===0?0:100:(n-i)/Math.abs(i)*100,Is=({title:n,value:i,icon:o,helper:c,comparison:u,previousValue:f})=>{const g=typeof u=="number"?u:null,x=g!==null,p=x&&g!==0?g>0?"+":"−":"",y=x?gi(Math.abs(g)):null,v=x?g<0?"text-red-600":"text-emerald-600":"text-gray-500",N=f!=null;return a.jsxs("div",{className:"ui-card flex min-w-0 flex-col gap-4 p-5",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"rounded-xl bg-brand-primary/10 p-3 text-brand-primary",children:o}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:n}),a.jsx("p",{className:"mt-2 text-2xl font-bold text-gray-900 sm:text-3xl",children:i}),N?a.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Période précédente : ",a.jsx("span",{className:"font-semibold text-gray-800",children:f}),y?a.jsxs("span",{className:`ml-2 font-semibold ${v}`,children:[p,y,"%"]}):null]}):a.jsxs("p",{className:`mt-1 text-sm font-semibold ${v}`,children:[y?`${p}${y}%`:"N/A",a.jsx("span",{className:"ml-1 text-xs font-medium text-gray-500 sm:text-sm",children:"vs période précédente"})]})]})]}),!N&&c?a.jsx("p",{className:"text-sm text-gray-500",children:c}):null]})},$r=({title:n,value:i,icon:o,onClick:c})=>a.jsxs("div",{className:`ui-card p-4 flex items-center space-x-3 min-w-0 ${c?"cursor-pointer hover:bg-gray-50":""}`,onClick:c,children:[a.jsx("div",{className:"p-3 bg-gray-100 text-gray-600 rounded-lg",children:o}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500",children:n}),a.jsx("p",{className:"text-lg sm:text-xl xl:text-2xl font-bold text-gray-800 break-words leading-tight",children:i})]})]}),qd={week:{label:"Últimos 7 días",days:7},month:{label:"Últimos 30 días",days:30}},H2=n=>{const{days:i}=qd[n],o=new Date(vi());o.setDate(o.getDate()+1);const c=new Date(o);return c.setDate(c.getDate()-i),{start:c,end:o}},F2=()=>{const[n,i]=h.useState(null),[o,c]=h.useState([]),[u,f]=h.useState(!0),[g,x]=h.useState("category"),[p,y]=h.useState(!1),[v,N]=h.useState(!1),[j,S]=h.useState("week"),w=h.useCallback(async()=>{const{start:I,end:M}=H2(j),re=I.toISOString(),ue=M.toISOString();f(!0);try{const[ge,ae]=await Promise.all([ye.getDashboardStats(j),ye.getSalesByProduct({start:re,end:ue})]);i(ge),c(ae)}catch(ge){console.error("Failed to fetch dashboard stats",ge)}finally{f(!1)}},[j]);if(h.useEffect(()=>{w()},[w]),h.useEffect(()=>{const I=ye.notifications.subscribe("orders_updated",()=>{w()});return()=>{I()}},[w]),u)return a.jsx("div",{className:"text-gray-800",children:"Cargando datos del panel..."});if(!n)return a.jsx("div",{className:"text-red-500",children:"No fue posible cargar los datos."});const D=["#0088FE","#00C49F","#FFBB28","#FF8042","#AF19FF","#FF4560","#775DD0"],C=g==="category"?n.ventesParCategorie:o,L=C.length>0,q=qd[j],X=n.ventesPeriodePrecedente,A=Bs(n.ventesPeriode,n.ventesPeriodePrecedente),F=n.ventesPeriode>0?n.beneficePeriode/n.ventesPeriode*100:null,te=n.ventesPeriodePrecedente>0?n.beneficePeriodePrecedente/n.ventesPeriodePrecedente*100:null,J=n.commandesPeriode,Q=q.days>0?n.ventesPeriode/q.days:0,oe=n.clientsPeriode>0?n.ventesPeriode/n.clientsPeriode:0,H=q.days>0?J/q.days:0,W=q.days>0?n.clientsPeriode/q.days:0,T=n.commandesPeriodePrecedente>0?n.ventesPeriodePrecedente/n.commandesPeriodePrecedente:0,K=n.clientsPeriodePrecedente>0?n.ventesPeriodePrecedente/n.clientsPeriodePrecedente:0,B=q.days>0?n.ventesPeriodePrecedente/q.days:0,le=Bs(n.beneficePeriode,n.beneficePeriodePrecedente),_=F!==null?Bs(F,te??null):null,E=Bs(J,n.commandesPeriodePrecedente),z=Bs(n.panierMoyen,T),Z=Bs(oe,K),$=Bs(n.clientsPeriode,n.clientsPeriodePrecedente),R=Bs(Q,B);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[a.jsx("div",{className:"inline-flex rounded-lg bg-gray-100 p-1 text-sm font-semibold text-gray-600",children:Object.entries(qd).map(([I,M])=>{const re=I,ue=j===re;return a.jsx("button",{onClick:()=>S(re),className:`px-3 py-1.5 rounded-md transition-colors ${ue?"bg-white text-gray-900 shadow":"hover:text-gray-900"}`,children:M.label},re)})}),a.jsxs("button",{onClick:()=>N(!0),className:"ui-btn-primary",children:[a.jsx(Vv,{className:"mr-2 h-4 w-4"}),"Gestión de roles"]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 xl:grid-cols-4",children:[a.jsx(Is,{title:`Chiffre d'affaires (${n.periodLabel})`,value:fe(n.ventesPeriode),icon:a.jsx(io,{size:24}),comparison:A,previousValue:fe(X)}),a.jsx(Is,{title:"Bénéfice net",value:fe(n.beneficePeriode),icon:a.jsx(xg,{size:24}),comparison:le,previousValue:fe(n.beneficePeriodePrecedente)}),a.jsx(Is,{title:"Marge bénéficiaire",value:F!==null?`${gi(F)}%`:"0%",icon:a.jsx(vl,{size:24}),comparison:te!==null?_:null,previousValue:te!==null?`${gi(te)}%`:"N/A"}),a.jsx(Is,{title:"Commandes traitées",value:hi(J),icon:a.jsx(Qd,{size:24}),comparison:E,helper:`≈ ${gi(H)} commandes / jour`})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 xl:grid-cols-4",children:[a.jsx(Is,{title:"Ticket moyen",value:fe(n.panierMoyen),icon:a.jsx(Pr,{size:24}),comparison:z,helper:J>0?`Basé sur ${hi(J)} commandes`:"Aucune commande sur la période"}),a.jsx(Is,{title:"Revenu par client",value:fe(oe),icon:a.jsx(i1,{size:24}),comparison:Z,helper:n.clientsPeriode>0?`${hi(n.clientsPeriode)} clients servis`:"Aucun client sur la période"}),a.jsx(Is,{title:`Clients (${n.periodLabel})`,value:hi(n.clientsPeriode),icon:a.jsx(Od,{size:24}),comparison:$,helper:`≈ ${gi(W)} clients / jour`}),a.jsx(Is,{title:"Revenu moyen quotidien",value:fe(Q),icon:a.jsx(uy,{size:24}),comparison:R,helper:`Total période : ${fe(n.ventesPeriode)}`})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[a.jsx($r,{title:"Mesas ocupadas",value:n.tablesOccupees,icon:a.jsx(Gd,{size:24})}),a.jsx($r,{title:"Clientes actuales",value:n.clientsActuels,icon:a.jsx(Od,{size:24})}),a.jsx($r,{title:"En cocina",value:n.commandesEnCuisine,icon:a.jsx(hg,{size:24})}),a.jsx($r,{title:"Ingredientes bajos",value:n.ingredientsStockBas.length,icon:a.jsx(Aa,{size:24,className:n.ingredientsStockBas.length>0?"text-red-500":"text-gray-600"}),onClick:()=>y(!0)})]}),a.jsxs("div",{className:"ui-card p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 text-gray-900",children:["Ventas durante ",n.periodLabel]}),a.jsx(Jp,{width:"100%",height:300,children:a.jsxs(Sb,{data:n.ventesPeriodeSeries,children:[a.jsx(Cb,{strokeDasharray:"3 3"}),a.jsx(kb,{dataKey:"name"}),a.jsx(Eb,{}),a.jsx(Wp,{}),a.jsx(eh,{}),a.jsx(th,{dataKey:"ventes",fill:"#8884d8",name:`${n.periodLabel}`}),a.jsx(th,{dataKey:"ventesPeriodePrecedente",fill:"#d8d6f5",name:"Periodo anterior"})]})})]}),a.jsxs("div",{className:"ui-card p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Distribución de ventas (",n.periodLabel,")"]}),a.jsxs("div",{className:"flex p-1 bg-gray-200 rounded-lg",children:[a.jsx("button",{onClick:()=>x("category"),className:`px-3 py-1 text-sm font-semibold rounded-md ${g==="category"?"bg-white shadow":""}`,children:"Por categoría"}),a.jsx("button",{onClick:()=>x("product"),className:`px-3 py-1 text-sm font-semibold rounded-md ${g==="product"?"bg-white shadow":""}`,children:"Por producto"})]})]}),L?a.jsx(Jp,{width:"100%",height:300,children:a.jsxs(Tb,{children:[a.jsx(Mb,{data:C,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:100,fill:"#8884d8",label:!0,children:C.map((I,M)=>a.jsx(Ab,{fill:D[M%D.length]},`cell-${M}`))}),a.jsx(Wp,{formatter:I=>fe(I)}),a.jsx(eh,{})]})}):a.jsx("div",{style:{height:300},className:"flex items-center justify-center text-gray-500",children:"No hay datos para el periodo seleccionado."})]}),a.jsx(Tt,{isOpen:p,onClose:()=>y(!1),title:"Ingredientes con inventario bajo",children:n.ingredientsStockBas.length>0?a.jsx("ul",{className:"space-y-2",children:n.ingredientsStockBas.map(I=>a.jsxs("li",{className:"flex justify-between items-center bg-red-50 p-3 rounded-lg",children:[a.jsx("span",{className:"font-semibold text-red-800",children:I.nom}),a.jsxs("span",{className:"font-bold text-red-600",children:[I.stock_actuel," / ",I.stock_minimum," ",I.unite]})]},I.id))}):a.jsx("p",{className:"text-gray-600 text-center",children:"No hay ingredientes con inventario bajo por el momento."})}),a.jsx(B2,{isOpen:v,onClose:()=>N(!1)})]})},$2=n=>{const i=Number.isFinite(n)?Math.max(0,n):0,o=Math.floor(i/1e3),c=Math.floor(o/60),u=o%60;return`${c.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}`},su=({startTime:n,className:i="",variant:o="default",accentClassName:c,label:u})=>{const[f,g]=h.useState(Date.now()-n);h.useEffect(()=>{const j=setInterval(()=>{g(Date.now()-n)},1e3);return()=>clearInterval(j)},[n]);const x=Math.floor(f/6e4),p=$2(f),y=u?`${u.trim()} ${p}`:`Tiempo transcurrido ${p}`,N=[o==="chip"?`inline-flex items-center gap-3 rounded-full px-4 py-1.5 text-xs font-semibold uppercase tracking-[0.25em] text-white shadow-lg shadow-slate-900/10 ring-1 ring-inset ring-white/30 ${c??"bg-brand-primary"}`:`flex items-center gap-2 px-3 py-1.5 rounded-full text-lg font-bold border-2 border-white ${x>=20?"bg-red-500 text-white shadow-lg":x>=10?"bg-yellow-400 text-black shadow-md":"bg-brand-primary text-brand-secondary shadow-md ring-1 ring-black/5"}`,i].filter(Boolean).join(" ");return a.jsxs("div",{className:N,role:"timer","aria-live":"polite","aria-label":y,title:y,children:[o==="default"&&a.jsx(fs,{size:20,className:"shrink-0"}),o==="chip"&&u?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-white/70",children:u}),a.jsx("span",{className:"text-lg font-semibold tracking-normal text-white",children:p})]}):a.jsx("span",{className:"text-lg font-semibold tracking-normal text-white",children:p})]})},Ah={nom:"",capacite:"",couverts:""},G2=({isOpen:n,onClose:i,mode:o,initialValues:c,onSubmit:u,showCouvertsField:f=!1})=>{const[g,x]=h.useState(Ah),[p,y]=h.useState({}),[v,N]=h.useState(null),[j,S]=h.useState(!1),w=h.useMemo(()=>o==="create"?"Ajouter une table":"Modifier la table",[o]);h.useEffect(()=>{if(!n){x(Ah),y({}),N(null),S(!1);return}const q={nom:(c==null?void 0:c.nom)??"",capacite:c!=null&&c.capacite?String(c.capacite):"",couverts:f&&(c==null?void 0:c.couverts)!==void 0?String(c.couverts):""};x(q),y({}),N(null)},[c==null?void 0:c.capacite,c==null?void 0:c.couverts,c==null?void 0:c.nom,n,f]);const D=q=>{const{name:X,value:A}=q.target;x(F=>({...F,[X]:A}))},C=()=>{const q={},X=g.nom.trim(),A=g.capacite.trim();X||(q.nom="Le nom est requis.");let F=null;if(!A)q.capacite="La capacité est requise.";else{const te=Number(A);!Number.isInteger(te)||te<=0?q.capacite="La capacité doit être un entier positif.":F=te}if(f){const te=g.couverts.trim();if(!te)q.couverts="Le nombre de couverts est requis.";else{const J=Number(te);!Number.isInteger(J)||J<=0?q.couverts="Les couverts doivent être un entier positif.":F!==null&&J>F&&(q.couverts="Les couverts ne peuvent pas dépasser la capacité.")}}return q},L=async q=>{q.preventDefault(),y({}),N(null);const X=C();if(Object.keys(X).length>0){y(X);return}const A={nom:g.nom.trim(),capacite:Number(g.capacite.trim())};if(f){const F=g.couverts.trim();F&&(A.couverts=Number(F))}S(!0);try{await u(A)}catch(F){const te=F instanceof Error&&F.message?F.message:"Une erreur est survenue. Veuillez réessayer.";N(te)}finally{S(!1)}};return a.jsx(Tt,{isOpen:n,onClose:i,title:w,size:"md",children:a.jsxs("form",{onSubmit:L,className:"space-y-5",children:[v&&a.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:v}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"table-name",className:"block text-sm font-medium text-gray-700",children:"Nom de la table"}),a.jsx("input",{id:"table-name",name:"nom",type:"text",className:"ui-input mt-1",value:g.nom,onChange:D,disabled:j,placeholder:"Ex. Terrasse 1",autoFocus:!0}),p.nom&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.nom})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"table-capacity",className:"block text-sm font-medium text-gray-700",children:"Capacité (nombre de places)"}),a.jsx("input",{id:"table-capacity",name:"capacite",type:"number",min:1,className:"ui-input mt-1",value:g.capacite,onChange:D,disabled:j,placeholder:"Ex. 4"}),p.capacite&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.capacite})]}),f&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"table-couverts",className:"block text-sm font-medium text-gray-700",children:"Couverts (actuels)"}),a.jsx("input",{id:"table-couverts",name:"couverts",type:"number",min:1,className:"ui-input mt-1",value:g.couverts,onChange:D,disabled:j,placeholder:"Ex. 2"}),p.couverts&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.couverts})]}),a.jsxs("div",{className:"flex flex-col gap-3 pt-2 sm:flex-row",children:[a.jsx("button",{type:"button",onClick:i,className:"w-full ui-btn-secondary py-3",disabled:j,children:"Annuler"}),a.jsx("button",{type:"submit",className:"w-full ui-btn-primary py-3 disabled:opacity-60",disabled:j,children:j?"Enregistrement...":"Enregistrer"})]})]})})},Hs={libre:{text:"Libre",statusClass:"status--free",Icon:Gd},en_cuisine:{text:"En cuisine",statusClass:"status--preparing",Icon:m1},para_entregar:{text:"Para entregar",statusClass:"status--ready",Icon:tv},para_pagar:{text:"Para pagar",statusClass:"status--payment",Icon:io}},Y2=n=>{const i=n.trim();if(!i)return n;const o=i.split(/\s+/);if(o.length<2)return i;const[c,...u]=o;let f=0;for(;f<u.length&&u[f].toLowerCase()===c.toLowerCase();)f+=1;return[c,...u.slice(f)].join(" ")},V2=n=>{switch(n.statut){case"libre":return Hs.libre;case"en_cuisine":return Hs.en_cuisine;case"para_entregar":return Hs.para_entregar;case"para_pagar":return Hs.para_pagar;default:return n.estado_cocina==="servido"||n.estado_cocina==="entregada"?Hs.para_pagar:n.estado_cocina==="listo"?Hs.para_entregar:n.commandeId?Hs.en_cuisine:Hs.libre}},Q2=({table:n,onServe:i,canEdit:o,onEdit:c,onDelete:u,isDeleting:f,onSeatGuests:g})=>{const x=Vs(),{text:p,statusClass:y,Icon:v}=V2(n),[N,j]=h.useState(!1),S=h.useRef(null),w=()=>{if(n.statut==="libre"&&g){g(n);return}n.commandeId?x(`/commande/${n.id}`):o&&c&&c(n)},D=F=>{(F.key==="Enter"||F.key===" ")&&(F.preventDefault(),w())},C=F=>{F.stopPropagation(),n.commandeId&&i(n.commandeId)},L=F=>{F.stopPropagation(),j(te=>!te)};h.useEffect(()=>{if(!N)return;const F=te=>{S.current&&!S.current.contains(te.target)&&j(!1)};return document.addEventListener("mousedown",F),()=>{document.removeEventListener("mousedown",F)}},[N]);const q=F=>{F.stopPropagation(),j(!1),c==null||c(n)},X=async F=>{if(F.stopPropagation(),j(!1),!!u)try{await u(n)}catch(te){console.error("Failed to delete table from card:",te)}},A=Y2(n.nom);return a.jsxs("div",{onClick:w,onKeyDown:D,className:`ui-card status-card ${y} relative h-full`,role:"button",tabIndex:0,children:[n.statut==="para_entregar"&&n.readyOrdersCount&&n.readyOrdersCount>0&&a.jsx("div",{className:"absolute left-3 top-3 z-10",children:a.jsx("span",{className:"table-notification-badge",children:n.readyOrdersCount})}),o&&a.jsxs("div",{className:"absolute right-3 top-3",ref:S,children:[a.jsx("button",{type:"button",onClick:L,className:"flex h-9 w-9 items-center justify-center rounded-full text-gray-500 transition hover:bg-gray-100 hover:text-gray-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 disabled:cursor-not-allowed disabled:opacity-60","aria-haspopup":"menu","aria-expanded":N,"aria-label":"Options de la table",disabled:f,children:a.jsx(og,{size:18})}),N&&a.jsxs("div",{className:"absolute right-0 mt-2 w-44 rounded-md border border-gray-200 bg-white py-1 text-sm shadow-lg",children:[a.jsxs("button",{type:"button",onClick:q,className:"flex w-full items-center gap-2 px-3 py-2 text-left text-gray-700 transition hover:bg-gray-100",children:[a.jsx(Tv,{size:16}),"Modifier"]}),a.jsxs("button",{type:"button",onClick:X,className:"flex w-full items-center gap-2 px-3 py-2 text-left text-red-600 transition hover:bg-red-50 disabled:cursor-not-allowed disabled:opacity-60",disabled:f,children:[a.jsx(wn,{size:16}),f?"Suppression…":"Supprimer"]})]})]}),a.jsxs("div",{className:"status-card__header",children:[a.jsx("h3",{className:"status-card__title",children:A}),n.date_envoi_cuisine&&n.statut!=="libre"&&a.jsx("div",{className:"status-card__timer",children:a.jsx(su,{startTime:n.date_envoi_cuisine,className:"w-full justify-center"})})]}),a.jsxs("div",{className:"status-card__body",children:[a.jsx(v,{size:56,className:"status-card__icon"}),a.jsx("p",{className:"status-card__state",children:p})]}),(n.estado_cocina==="listo"||n.statut==="para_entregar")&&a.jsx("div",{className:"status-card__footer",children:a.jsx("button",{type:"button",onClick:C,className:"ui-btn ui-btn-accent status-card__cta",children:"ENTREGADA"})})]})},X2=()=>{var _e;const{role:n}=$a(),i=((_e=n==null?void 0:n.permissions)==null?void 0:_e["/ventes"])==="editor",o=Vs(),[c,u]=h.useState([]),[f,g]=h.useState(!0),[x,p]=h.useState(null),[y,v]=h.useState(null),[N,j]=h.useState(null),[S,w]=h.useState(!1),[D,C]=h.useState("create"),[L,q]=h.useState(null),[X,A]=h.useState(null),[F,te]=h.useState(!1),[J,Q]=h.useState(null),[oe,H]=h.useState(null),[W,T]=h.useState(null),[K,B]=h.useState(!1),le=h.useRef(0),_=h.useCallback(async()=>{const xe=++le.current;try{const Ae=await ye.getTables();xe===le.current&&(u(Ae),p(null))}catch(Ae){console.error("Failed to fetch tables",Ae),xe===le.current&&p("Impossible de charger le plan de salle. Veuillez réessayer.")}finally{xe===le.current&&g(!1)}},[]);h.useEffect(()=>{g(!0),_();const xe=setInterval(_,1e4),Ae=ye.notifications.subscribe("orders_updated",_);return()=>{clearInterval(xe),Ae()}},[_]);const E=h.useCallback(()=>{w(!1),q(null)},[]),z=h.useCallback(()=>{C("create"),q(null),v(null),j(null),w(!0)},[]),Z=h.useCallback(xe=>{C("edit"),q(xe),v(null),j(null),w(!0)},[]),$=h.useCallback(xe=>{Q(xe);const Ae=xe.couverts??null;H(typeof Ae=="number"&&Ae>=1&&Ae<=10?Ae:null),T(null),v(null),j(null),te(!0)},[v,j]),R=h.useCallback(()=>{K||(te(!1),Q(null),H(null),T(null))},[K]),I=h.useCallback(async xe=>{if(J){if(!Number.isInteger(xe)||xe<=0){T("Veuillez sélectionner un nombre de couverts valide.");return}B(!0),T(null),v(null);try{await ye.createOrGetOrderByTableId(J.id,{couverts:xe}),te(!1),Q(null),H(null),await _(),o(`/commande/${J.id}`)}catch(Ae){console.error("Failed to open table with couverts:",Ae),v("Impossible d'ouvrir la table. Veuillez réessayer.")}finally{B(!1)}}},[_,o,J]),M=h.useCallback(xe=>{K||(H(xe),T(null),I(xe))},[I,K]),re=h.useCallback(async xe=>{v(null),j(null);try{let Ae="";if(D==="create")await ye.createTable(xe),Ae="Table créée avec succès.";else{if(!L){const Ke="Aucune table sélectionnée pour la mise à jour.";throw v(Ke),new Error(Ke)}await ye.updateTable(L.id,xe),Ae="Table mise à jour avec succès."}await _(),E(),j(Ae)}catch(Ae){console.error("Failed to save table:",Ae);const Ke=D==="create"?"Impossible de créer la table. Veuillez réessayer.":"Impossible de mettre à jour la table. Veuillez réessayer.";throw v(Ke),new Error(Ke)}},[_,E,D,L]),ue=h.useCallback(async xe=>{if(confirm("Supprimer cette table ? Cette action est irréversible.")){v(null),j(null),A(xe.id);try{await ye.deleteTable(xe.id),await _(),j("Table supprimée avec succès.")}catch(Ae){console.error("Failed to delete table:",Ae),v("Impossible de supprimer la table. Veuillez réessayer.")}finally{A(null)}}},[_]),ge=h.useCallback(async xe=>{v(null),j(null);const Ae=c.find(Ke=>Ke.commandeId===xe);if(Ae){u(Ke=>Ke.map(Mt=>Mt.id===Ae.id?{...Mt,statut:"para_pagar",estado_cocina:"servido"}:Mt));try{await ye.markOrderAsServed(xe),await _()}catch(Ke){console.error("Failed to mark order as served:",Ke),v("Impossible de marquer la commande comme servie. Veuillez réessayer."),await _()}}},[_,c]);if(f)return a.jsx("p",{className:"section-text section-text--muted",children:"Chargement du plan de salle..."});const ae=D==="edit"&&L?{nom:L.nom,capacite:L.capacite,couverts:L.couverts}:void 0,ce=D==="edit"&&!!(L!=null&&L.commandeId);return a.jsxs("div",{children:[a.jsxs("div",{className:"flex flex-col gap-4",children:[i&&a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{type:"button",onClick:z,className:"ui-btn ui-btn-primary flex items-center gap-2",children:[a.jsx(Ni,{size:18}),"Ajouter une table"]})}),x&&a.jsx("div",{className:"rounded-md border border-amber-200 bg-amber-50 p-4 text-sm text-amber-700",children:x}),y&&a.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 p-4 text-sm text-red-700",children:y}),N&&a.jsx("div",{className:"rounded-md border border-emerald-200 bg-emerald-50 p-4 text-sm text-emerald-700",children:N})]}),a.jsx("div",{className:"mt-6 status-grid",children:c.map(xe=>a.jsx(Q2,{table:xe,onServe:ge,canEdit:!!i,onEdit:Z,onDelete:ue,isDeleting:X===xe.id,onSeatGuests:$},xe.id))}),a.jsx(Tt,{isOpen:F,onClose:R,title:"CUBIERTOS",size:"sm",children:a.jsxs("div",{className:"space-y-5 text-left",children:[a.jsx("div",{className:"grid grid-cols-5 gap-3",children:Array.from({length:10},(xe,Ae)=>{const Ke=Ae+1,Mt=oe===Ke;return a.jsx("button",{type:"button",onClick:()=>M(Ke),disabled:K,className:`flex h-12 w-12 items-center justify-center rounded-md border text-lg font-semibold transition-colors focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary-500 ${Mt?"border-primary-500 bg-primary-50 text-primary-600":"border-gray-300 bg-white text-gray-900 hover:border-primary-400 hover:text-primary-600"} ${K?"cursor-not-allowed opacity-50":""}`,"aria-pressed":Mt,children:Ke},Ke)})}),W&&a.jsx("p",{className:"text-sm text-red-600",children:W}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"button",onClick:R,className:"ui-btn ui-btn-secondary",disabled:K,children:"Annuler"})})]})}),a.jsx(G2,{isOpen:S,onClose:E,mode:D,initialValues:ae,onSubmit:re,showCouvertsField:ce})]})},K2=({isOpen:n,onClose:i,order:o,onFinalize:c})=>{const[u,f]=h.useState("efectivo"),[g,x]=h.useState(null),[p,y]=h.useState(!1),v=async N=>{N.preventDefault(),u&&(y(!0),await c(u,g),y(!1),i())};return a.jsx(Tt,{isOpen:n,onClose:i,title:`Finalizar el pedido #${o.id.slice(-4)}`,children:a.jsxs("form",{onSubmit:v,className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-gray-600",children:"Total a pagar"}),a.jsx("p",{className:"text-4xl font-extrabold text-gray-900",children:fe(o.total)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Método de pago"}),a.jsxs("select",{value:u,onChange:N=>f(N.target.value),className:"mt-1 ui-select",children:[a.jsx("option",{value:"efectivo",children:"Efectivo"}),a.jsx("option",{value:"transferencia",children:"Transferencia"}),a.jsx("option",{value:"tarjeta",children:"Tarjeta"})]})]}),u==="transferencia"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Comprobante (opcional)"}),a.jsxs("label",{htmlFor:"payment-receipt",className:"mt-1 flex w-full cursor-pointer items-center gap-2 rounded-lg border border-gray-300 bg-white p-2 text-gray-500 shadow-sm hover:bg-gray-50",children:[a.jsx(jl,{size:18}),a.jsx("span",{children:g?g.name:"Selecciona un archivo..."})]}),a.jsx("input",{id:"payment-receipt",type:"file",accept:"image/*,.pdf",onChange:N=>x(N.target.files?N.target.files[0]:null),className:"hidden"})]}),a.jsxs("div",{className:"pt-4 flex flex-col sm:flex-row gap-3",children:[a.jsx("button",{type:"button",onClick:i,className:"w-full ui-btn-secondary py-3",children:"Cancelar"}),a.jsx("button",{type:"submit",disabled:p,className:"w-full ui-btn-success py-3 disabled:opacity-60",children:p?"Finalizando...":"Confirmar pago"})]})]})})},Z2=n=>n??"",P2=n=>!n||n.length===0?[]:n.slice().sort(),to=(n=[])=>{const i=new Map;for(const o of n)i.set(o.id,{quantite:o.quantite,commentaire:Z2(o.commentaire),excludedIngredients:P2(o.excluded_ingredients)});return{size:n.length,itemsById:i}},zh=(n,i)=>{if(n===i)return!0;if(n.size!==i.size)return!1;for(const[o,c]of n.itemsById){const u=i.itemsById.get(o);if(!u||c.quantite!==u.quantite||c.commentaire!==u.commentaire||c.excludedIngredients.length!==u.excludedIngredients.length)return!1;for(let f=0;f<c.excludedIngredients.length;f+=1)if(c.excludedIngredients[f]!==u.excludedIngredients[f])return!1}return!0},J2=({filteredProducts:n,quantities:i,onAdd:o,activeCategoryId:c,categories:u,onSelectCategory:f,isProductAvailable:g,handleProductPointerDown:x,handleProductKeyDown:p})=>a.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[a.jsx("div",{className:"border-b border-gray-200/30 p-2",children:a.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",children:[a.jsx("button",{onClick:()=>f("all"),className:`shrink-0 rounded-full px-3 py-1.5 text-sm font-semibold whitespace-nowrap transition ${c==="all"?"bg-brand-primary text-brand-secondary shadow":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Tous"}),u.map(y=>a.jsx("button",{onClick:()=>f(y.id),className:`shrink-0 rounded-full px-3 py-1.5 text-sm font-semibold whitespace-nowrap transition ${c===y.id?"bg-brand-primary text-brand-secondary shadow":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:y.nom},y.id))]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:a.jsx("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2 lg:grid-cols-3",children:n.map(y=>{const v=!g(y),N=i[y.id]||0,j=N>0,S=()=>o(y),w=x(y),D=p(y);return a.jsxs("button",{type:"button",onClick:S,onPointerDown:w,onKeyDown:D,className:`relative flex flex-col items-center rounded-xl p-2 text-center transition-all focus:outline-none focus:ring-2 focus:ring-brand-primary focus:ring-offset-2 focus:ring-offset-gray-900 ${j?"bg-gradient-to-br from-amber-500 via-orange-500 to-red-500 text-white shadow-xl shadow-orange-500/30":"border border-gray-200 bg-white text-black hover:shadow-lg"} ${v&&!j?"border-2 border-yellow-500":""}`,children:[N>0&&a.jsx("div",{className:"absolute left-1 top-1 flex h-5 w-5 items-center justify-center rounded-full bg-brand-accent text-xs font-bold text-white",children:N}),v&&a.jsx("div",{className:`absolute right-1 top-1 rounded-full p-1 ${j?"bg-black/30 text-white":"bg-yellow-500 text-white"}`,title:"Stock bas",children:a.jsx(Aa,{size:16})}),a.jsx("img",{src:y.image,alt:y.nom_produit,className:"mb-1.5 aspect-square w-full rounded-md object-cover"}),a.jsx("p",{className:`text-[clamp(0.85rem,1.6vw,0.95rem)] font-semibold leading-tight ${j?"text-white":"text-black"} text-balance text-center break-words whitespace-normal [hyphens:auto]`,style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:y.nom_produit}),a.jsx("p",{className:`mt-0.5 w-full text-[0.7rem] ${j?"text-white/90":"text-black/70"} text-center leading-tight`,style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:y.description}),a.jsx("p",{className:`mt-1.5 font-bold text-sm ${j?"text-white":"text-black"}`,children:fe(y.prix_vente)})]},y.id)})})})]}),W2=h.memo(J2),ej=({categorizedItems:n,order:i,total:o,onQuantityChange:c,onCommentChange:u,onPersistComment:f,onStartEditingComment:g,onSendToKitchen:x,onServeOrder:p,onOpenPayment:y,isSending:v,hasPending:N,orderStatus:j,editingCommentId:S,className:w})=>{var C;const D=n.pending.length+n.sent.length;return a.jsxs("div",{className:`ui-card flex flex-col ${w??""}`,children:[a.jsx("div",{className:"p-4 border-b",children:a.jsx("h2",{className:"text-2xl font-semibold text-brand-secondary",children:"Commande"})}),a.jsx("div",{className:"flex-1 space-y-3 overflow-y-auto p-4",children:D===0?a.jsx("p",{className:"text-gray-500",children:"La commande est vide."}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-brand-secondary",children:"Articles à envoyer"}),a.jsx("span",{className:"text-sm text-gray-500",children:n.pending.length})]}),n.pending.length===0?a.jsx("p",{className:"text-sm text-gray-500",children:"Aucun article en attente."}):n.pending.map(({item:L,index:q})=>a.jsxs("div",{className:"p-3 rounded-lg bg-yellow-100",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex flex-1 items-center gap-3",children:[a.jsx("span",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-full bg-yellow-500 text-base font-bold text-white shadow-md",children:L.quantite}),a.jsx("p",{className:"font-bold text-gray-900 text-[clamp(0.95rem,1.9vw,1.2rem)] leading-snug break-words text-balance whitespace-normal [hyphens:auto]",children:L.nom_produit})]}),a.jsx("p",{className:"font-bold text-gray-900 whitespace-nowrap",children:fe(L.quantite*L.prix_unitaire)})]}),a.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("p",{className:"text-sm text-gray-700",children:[fe(L.prix_unitaire)," /u"]}),a.jsxs("div",{className:"flex items-center gap-2 text-gray-800",children:[a.jsx("button",{onClick:()=>c(q,-1),className:"rounded-full p-1 transition hover:bg-yellow-200",children:a.jsx(My,{size:20})}),a.jsx("span",{className:"font-bold w-6 text-center",children:L.quantite}),a.jsx("button",{onClick:()=>c(q,1),className:"rounded-full p-1 transition hover:bg-yellow-200",children:a.jsx(Yd,{size:20})})]})]}),S===L.id||L.commentaire?a.jsx("input",{type:"text",placeholder:"Ajouter un commentaire...",value:L.commentaire??"",onChange:X=>u(q,X.target.value),onBlur:()=>f(q),autoFocus:S===L.id,className:"mt-2 ui-input text-sm"}):a.jsxs("button",{onClick:()=>g(L.id),className:"mt-2 text-xs text-blue-600 hover:underline flex items-center gap-1",children:[a.jsx(mg,{size:12})," Ajouter un commentaire"]})]},L.id))]}),n.sent.length>0&&a.jsxs("div",{className:"space-y-3 border-t border-gray-700 pt-6",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-brand-secondary",children:"Envoyés en cuisine"}),a.jsx("span",{className:"text-sm text-gray-500",children:n.sent.length})]}),n.sent.map(({item:L})=>a.jsxs("div",{className:"p-3 rounded-lg bg-green-100",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex flex-1 items-center gap-3",children:[a.jsx("span",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-full bg-green-600 text-base font-bold text-white shadow-md",children:L.quantite}),a.jsx("p",{className:"font-bold text-gray-900 text-[clamp(0.95rem,1.9vw,1.2rem)] leading-snug break-words text-balance whitespace-normal [hyphens:auto]",children:L.nom_produit})]}),a.jsx("p",{className:"font-bold text-gray-900 whitespace-nowrap",children:fe(L.quantite*L.prix_unitaire)})]}),a.jsxs("p",{className:"text-sm text-gray-700 mt-2",children:[fe(L.prix_unitaire)," /u"]}),L.commentaire&&a.jsxs("p",{className:"mt-2 text-sm italic text-gray-600 pl-2",children:['"',L.commentaire,'"']})]},L.id))]})]})}),a.jsxs("div",{className:"space-y-4 border-t p-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-gray-700",children:[a.jsx("span",{children:"Sous-total"}),a.jsx("span",{children:fe(i.subtotal??0)})]}),i.total_discount&&i.total_discount>0&&a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-green-600",children:[a.jsx("span",{children:"Réduction totale"}),a.jsxs("span",{children:["- ",fe(i.total_discount)]})]}),i.shipping_cost!==void 0&&i.shipping_cost>0&&a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-gray-700",children:[a.jsx("span",{children:"Frais de livraison"}),a.jsx("span",{children:fe(i.shipping_cost)})]}),i.shipping_cost===0&&((C=i.applied_promotions)==null?void 0:C.some(L=>L.type==="FREE_SHIPPING"))&&a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-green-600",children:[a.jsx("span",{children:"Livraison gratuite"}),a.jsx("span",{children:fe(0)})]}),a.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-between gap-2 border-t pt-2 text-2xl font-semibold text-brand-secondary",children:[a.jsx("span",{children:"Total"}),a.jsx("span",{children:fe(o)})]})]}),j==="listo"&&a.jsxs("button",{onClick:p,className:"w-full ui-btn-info justify-center py-3",children:[a.jsx(yy,{size:20}),a.jsx("span",{children:"Entregada"})]}),a.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("button",{onClick:x,disabled:v||!N,className:"ui-btn-accent flex-1 justify-center py-3 disabled:opacity-60",children:[a.jsx(Fv,{size:20}),a.jsx("span",{children:v?"Synchronisation…":"Envoyer en Cuisine"})]}),a.jsxs("button",{onClick:y,disabled:j!=="servido",className:"ui-btn-success flex-1 justify-center py-3 disabled:opacity-60",children:[a.jsx(io,{size:20}),a.jsx("span",{children:"Payer"})]})]})]})]})},tj=({isOpen:n,product:i,onClose:o,onSave:c})=>{const[u,f]=h.useState(1),[g,x]=h.useState("");if(h.useEffect(()=>{n&&(f(1),x(""))},[n,i==null?void 0:i.id]),!i)return null;const p=()=>{f(N=>Math.max(1,N-1))},y=()=>{f(N=>N+1)},v=()=>{c({quantity:u,comment:g})};return a.jsx(Tt,{isOpen:n,onClose:o,title:i.nom_produit,children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("img",{src:i.image,alt:i.nom_produit,className:"w-full h-48 object-cover rounded-lg"}),i.description&&a.jsx("p",{className:"text-gray-200 text-sm",children:i.description}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-200",children:"Commentaire"}),a.jsx("textarea",{value:g,onChange:N=>x(N.target.value),rows:2,className:"mt-1 block w-full rounded-md border border-gray-600 bg-gray-900/60 py-2 px-3 text-sm text-gray-100 focus:border-brand-primary focus:outline-none focus:ring-2 focus:ring-brand-primary",placeholder:"Allergies, instructions spécifiques…"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"button",onClick:p,className:"p-2 rounded-full bg-gray-800 text-gray-100 hover:bg-gray-700","aria-label":"Diminuer la quantité",children:a.jsx(fg,{size:18})}),a.jsx("span",{className:"w-8 text-center text-lg font-bold text-gray-100",children:u}),a.jsx("button",{type:"button",onClick:y,className:"p-2 rounded-full bg-gray-800 text-gray-100 hover:bg-gray-700","aria-label":"Augmenter la quantité",children:a.jsx(Ni,{size:18})})]}),a.jsxs("button",{type:"button",onClick:v,className:"rounded-lg bg-gradient-to-r from-orange-500 via-orange-600 to-red-600 py-2 px-6 font-semibold text-white shadow-md transition-all duration-300 hover:from-orange-600 hover:via-orange-700 hover:to-red-700 focus:outline-none focus:ring-2 focus:ring-orange-400/70 focus:ring-offset-2",children:["Ajouter (",fe(i.prix_vente*u),")"]})]})]})})},Sd=n=>!!n&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(n),qa=n=>JSON.parse(JSON.stringify(n)),Oh=(()=>{let n=0;return()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?`tmp-${crypto.randomUUID()}`:(n+=1,`tmp-${Date.now()}-${n}`)})(),Dh=n=>(n??"").trim(),aj=(n=[],i=[])=>{if(n.length!==i.length)return!1;const o=[...n].sort(),c=[...i].sort();return o.every((u,f)=>u===c[f])},sj=(n,i,o,c,u=[])=>{const f=Dh(o.comment),g=f.length===0,x=Number.isFinite(o.quantity)?Math.max(1,Math.floor(o.quantity)):1,p=g?n.findIndex(v=>v.produitRef===i.id&&v.estado==="en_attente"&&Dh(v.commentaire)===""&&aj(v.excluded_ingredients??[],u)):-1;if(p>-1)return n.map((v,N)=>N===p?{...v,quantite:v.quantite+x}:v);const y={id:c(),produitRef:i.id,nom_produit:i.nom_produit,prix_unitaire:i.prix_vente,quantite:x,excluded_ingredients:[...u],commentaire:f,estado:"en_attente"};return[...n,y]},Rh=to([]),nj=()=>{const{tableId:n}=vb(),i=Vs(),[o,c]=h.useState(null),[u,f]=h.useState(null),[g,x]=h.useState([]),[p,y]=h.useState([]),[v,N]=h.useState([]),[j,S]=h.useState("all"),[w,D]=h.useState(!0),[C,L]=h.useState(!1),[q,X]=h.useState(!1),[A,F]=h.useState(null),[te,J]=h.useState(!1),[Q,oe]=h.useState(null),H=h.useRef(o),W=h.useRef(u),T=h.useRef(null),K=h.useRef(null),B=h.useRef(null),le=h.useRef(Promise.resolve()),_=h.useRef(null),E=h.useRef(null),z=h.useRef(new Map),Z=h.useCallback((de,pe,ke)=>{if(!pe||pe.length===0)return de.current=null,Rh;const qe=ke??to(pe);return de.current={source:pe,snapshot:qe},qe},[]),$=h.useCallback((de,pe)=>{if(!de||de.length===0)return pe.current=null,Rh;const ke=pe.current;return ke&&ke.source===de?ke.snapshot:Z(pe,de)},[Z]);h.useEffect(()=>{H.current=o},[o]),h.useEffect(()=>{W.current=u},[u]);const R=h.useCallback(de=>{const pe=H.current;if(!pe)return!0;const ke=de??W.current;if(!ke)return!0;const qe=$(pe.items,_),Be=de?to(ke.items):$(ke.items,E);return zh(Be,qe)},[$]),I=h.useCallback(()=>{const de=K.current;if(!de)return;const pe=to(de.items);T.current=qa(de);const ke=H.current;if(ke){const Be=$(ke.items,_);if(zh(Be,pe)){K.current=null;return}}K.current=null,H.current=de,c(de),Z(_,de.items,pe);const qe=qa(de);W.current=qe,f(qe),Z(E,qe.items)},[$,Z]),M=h.useCallback(async(de=!1)=>{if(n)try{if(de||D(!0),de){const Me=await ye.createOrGetOrderByTableId(n),$e=qa(Me);if(T.current=$e,R()){K.current=null,c(Me),H.current=Me,Z(_,Me.items);const ot=qa(Me);W.current=ot,f(ot),Z(E,ot.items)}else{const ot=W.current;ot&&JSON.stringify(ot)===JSON.stringify(Me)?K.current=null:K.current=$e}return}const[pe,ke,qe,Be]=await Promise.all([ye.createOrGetOrderByTableId(n),ye.getProducts(),ye.getCategories(),ye.getIngredients()]);T.current=qa(pe),c(pe),H.current=pe,Z(_,pe.items);const Fe=qa(pe);f(Fe),W.current=Fe,Z(E,Fe.items),x(ke),y(qe),N(Be),K.current=null}catch(pe){console.error("Failed to load order data",pe),i("/ventes")}finally{de||D(!1)}},[R,i,n,Z]);h.useEffect(()=>{M()},[M]),h.useEffect(()=>{R()&&I()},[I,R,o,u]),h.useEffect(()=>{const de=ye.notifications.subscribe("orders_updated",()=>M(!0));return()=>de()},[M]);const re=h.useMemo(()=>!R(),[R,o,u]),ue=h.useMemo(()=>o?o.items.reduce((de,pe)=>(pe.estado!=="en_attente"||(de[pe.produitRef]=(de[pe.produitRef]||0)+pe.quantite),de),{}):{},[o]),ge=h.useMemo(()=>j==="all"?g:g.filter(de=>de.categoria_id===j),[j,g]),ae=h.useCallback(de=>{if(!de.recipe||de.recipe.length===0)return!0;for(const pe of de.recipe){const ke=v.find(qe=>qe.id===pe.ingredient_id);if(!ke||ke.stock_actuel<=ke.stock_minimum)return!1}return!0},[v]);h.useEffect(()=>()=>{B.current!==null&&(window.clearTimeout(B.current),B.current=null)},[]);const ce=h.useCallback(async(de,pe)=>{const ke=H.current;if(!ke)return;const qe=ot=>typeof de=="function"?de(ot):de,Fe=(pe!=null&&pe.isLocalUpdate?ke.items:(pe==null?void 0:pe.removalSourceItems)??ke.items).map(ot=>({...ot})),Me=qe(Fe),$e={...ke,items:Me,total:Me.reduce((ot,zt)=>ot+zt.quantite*zt.prix_unitaire,0)};if(c($e),H.current=$e,Z(_,$e.items),pe!=null&&pe.isLocalUpdate)return;const bt=async()=>{try{let ot=K.current??T.current??null;if(!ot){const we=await ye.getOrderById(ke.id);we?(ot=we,T.current=qa(we)):ot=ke}if(!ot)return;const zt=H.current.items.map(we=>({...we})),Oa=((pe==null?void 0:pe.removalSourceItems)??ke.items).filter(we=>Sd(we.id)&&!zt.some(Oe=>Oe.id===we.id)).map(we=>we.id),Qt=await ye.updateOrder(ke.id,{items:zt,removedItemIds:Oa},{includeNotifications:!1});c(Qt),H.current=Qt,Z(_,Qt.items);const ie=qa(Qt);f(ie),W.current=ie,Z(E,ie.items),T.current=qa(Qt),ye.getIngredients().then(N).catch(we=>{console.error("Failed to refresh ingredients",we)}),I()}catch(ot){console.error("Failed to update order:",ot),alert("Une erreur est survenue lors de la mise à jour de la commande."),M(!0)}};le.current=le.current.then(bt,bt),await le.current},[I,M,Z]),_e=h.useCallback((de=300)=>{B.current!==null&&window.clearTimeout(B.current);const pe=de>0?de:1;B.current=window.setTimeout(async()=>{if(B.current=null,!H.current)return;const ke=H.current.items.map(Be=>({...Be})),qe=T.current?T.current.items.map(Be=>({...Be})):ke.map(Be=>({...Be}));await ce(ke,{removalSourceItems:qe})},pe)},[ce]),xe=h.useCallback(de=>{H.current&&(ce(de,{isLocalUpdate:!0}),_e())},[_e,ce]),Ae=h.useCallback(de=>{oe(de)},[]),Ke=h.useCallback(()=>{oe(null)},[]),Mt=h.useCallback(de=>{Q&&(xe(pe=>sj(pe,Q,de,Oh)),oe(null))},[xe,Q]),Vt=h.useCallback((de,pe)=>{const ke=H.current;if(!ke||!ke.items[de])return;const qe=ke.items[de].id,Be=z.current.get(qe);Be&&clearTimeout(Be),xe(Me=>{const $e=Me.findIndex(zt=>zt.id===qe);if($e===-1)return Me;const bt=Me[$e].quantite,ot=Math.max(0,bt+pe);return Me.map(zt=>zt.id===qe?{...zt,quantite:ot}:zt)});const Fe=setTimeout(()=>{xe(Me=>{const $e=Me.find(bt=>bt.id===qe);return $e&&$e.quantite<=0?Me.filter(bt=>bt.id!==qe):Me}),z.current.delete(qe)},300);z.current.set(qe,Fe)},[xe]),qt=h.useCallback((de,pe)=>{const ke=H.current;if(!ke||!ke.items[de])return;const qe=ke.items[de].id;ce(Be=>{const Fe=Be.findIndex(bt=>bt.id===qe);if(Fe===-1)return Be;const Me=Be.map(bt=>({...bt})),$e=Me[Fe];if($e.quantite>1&&!$e.commentaire&&pe){$e.quantite-=1;const bt={...$e,id:Oh(),quantite:1,commentaire:pe};Me.push(bt),F(bt.id)}else $e.commentaire=pe;return Me},{isLocalUpdate:!0})},[ce]),be=h.useCallback(de=>{H.current&&(ce(H.current.items.map(pe=>({...pe}))),F(null))},[ce]),Te=h.useCallback(async()=>{if(H.current){J(!0);try{let de=H.current;for(;de&&de.items.some(Me=>Me.estado==="en_attente"&&!Sd(Me.id));)await ce(de.items.map(Me=>({...Me}))),de=H.current;if(de=H.current,!de)return;const pe=de.items.filter(Me=>Me.estado==="en_attente");if(pe.length===0)return;if(pe.filter(Me=>!Sd(Me.id)).length>0){console.warn("Des articles non persistés subsistent après synchronisation, envoi annulé.");return}const qe=pe.map(Me=>Me.id),Be=await ye.sendOrderToKitchen(de.id,qe);c(Be),H.current=Be,Z(_,Be.items);const Fe=qa(Be);f(Fe),W.current=Fe,Z(E,Fe.items),i("/ventes")}catch(de){console.error("Failed to send order to kitchen",de),alert("Erreur lors de l'envoi en cuisine.")}finally{J(!1)}}},[i,ce,Z]),ve=h.useCallback(async()=>{if(o)try{const de=await ye.markOrderAsServed(o.id);c(de),H.current=de,Z(_,de.items)}catch(de){console.error("Failed to mark order as served",de)}},[o,Z]),ht=async(de,pe)=>{if(o)try{let ke=o.payment_receipt_url??void 0;if(pe&&pe instanceof File)try{ke=await eg(pe,{orderId:o.id})}catch(qe){console.error("Failed to upload receipt",qe)}await ye.finalizeOrder(o.id,de,ke),i("/ventes")}catch(ke){console.error("Failed to finalize order",ke),alert("Erreur lors de la finalisation de la commande. Veuillez réessayer.")}},st=()=>{if(o&&o.estado_cocina==="no_enviado"&&o.items.length>0){X(!0);return}re?X(!0):i("/ventes")},rt=async()=>{try{o&&o.estado_cocina==="no_enviado"?await ye.cancelUnsentTableOrder(o.id):u&&!R(u)&&await ce(u.items)}catch(de){console.error("Failed to cancel unsent order before exiting",de)}finally{X(!1),i("/ventes")}},At=(o==null?void 0:o.items)??[],gt=h.useMemo(()=>At.reduce((de,pe,ke)=>(pe.estado==="en_attente"?de.pending.push({item:pe,index:ke}):de.sent.push({item:pe,index:ke}),de),{pending:[],sent:[]}),[At]),dt=h.useCallback(de=>pe=>{pe.preventDefault(),pe.currentTarget.focus()},[]),Na=h.useCallback(de=>pe=>{(pe.key==="Enter"||pe.key===" ")&&(pe.preventDefault(),Ae(de))},[Ae]),ut=h.useCallback(()=>{L(!0)},[]),sa=h.useCallback(de=>{F(de)},[]),wa=h.useMemo(()=>gt.pending.length>0,[gt]);return w?a.jsx("div",{className:"text-center p-10 text-gray-800",children:"Chargement de la commande..."}):o?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 gap-2 lg:grid-cols-[minmax(0,2.4fr)_minmax(0,1fr)] lg:items-start min-h-screen",children:[a.jsxs("div",{className:"flex h-full flex-col overflow-hidden",children:[a.jsx("div",{className:"p-2",children:a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a.jsxs("button",{onClick:st,className:"ui-btn-dark text-sm px-3 py-1.5",title:"Retour au plan de salle",children:[a.jsx(lg,{size:18}),a.jsx("span",{children:"Retour plan de salle"})]}),a.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Table ",o.table_nom]})]})}),a.jsx(W2,{filteredProducts:ge,quantities:ue,onAdd:Ae,activeCategoryId:j,categories:p,onSelectCategory:S,isProductAvailable:ae,handleProductPointerDown:dt,handleProductKeyDown:Na})]}),a.jsx("div",{className:"flex flex-col h-full",children:a.jsx("div",{className:"lg:sticky lg:top-2",children:a.jsx(ej,{className:"lg:h-full w-full",categorizedItems:gt,order:o,total:o.total,onQuantityChange:Vt,onCommentChange:qt,onPersistComment:be,onStartEditingComment:sa,onSendToKitchen:Te,onServeOrder:ve,onOpenPayment:ut,isSending:te,hasPending:wa,orderStatus:o.estado_cocina,editingCommentId:A})})})]}),a.jsx(tj,{isOpen:Q!==null,product:Q,onClose:Ke,onSave:Mt}),a.jsx(K2,{isOpen:C,onClose:()=>L(!1),order:o,onFinalize:ht}),a.jsxs(Tt,{isOpen:q,onClose:()=>X(!1),title:"Quitter sans envoyer ?",children:[a.jsx("p",{className:"text-gray-700",children:"Vous avez des articles non envoyés en cuisine. Si vous quittez, ils seront annulés. Voulez-vous continuer ?"}),a.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[a.jsx("button",{onClick:()=>X(!1),className:"ui-btn-secondary",children:"Non, rester"}),a.jsx("button",{onClick:rt,className:"ui-btn-danger",children:"Oui, quitter"})]})]})]}):a.jsx("div",{className:"text-center p-10 text-red-500",children:"Commande non trouvée."})},lj={critical:{border:"border-4 border-solid border-red-500",accent:"bg-red-500 urgency-accent-critical",badge:"bg-red-100 text-red-700 ring-1 ring-inset ring-red-300 urgency-badge-critical",icon:"text-red-500 urgency-icon-critical",background:"bg-red-100"},warning:{border:"border-[3px] border-solid border-yellow-400",accent:"bg-yellow-400 urgency-accent-warning",badge:"bg-yellow-100 text-yellow-800 ring-1 ring-inset ring-yellow-300 urgency-badge-warning",icon:"text-yellow-500 urgency-icon-warning",background:"bg-yellow-100"},normal:{border:"border-2 border-solid border-brand-accent",accent:"bg-brand-accent urgency-accent-normal",badge:"bg-blue-100 text-blue-700 ring-1 ring-inset ring-blue-200 urgency-badge-normal",icon:"text-brand-accent urgency-icon-normal",background:"bg-blue-100"}},ij=n=>{if(!n)return"normal";const i=(Date.now()-n)/6e4;return i>=20?"critical":i>=10?"warning":"normal"},Qg=n=>{const i=ij(n),o=lj[i];return{level:i,border:o.border,accent:o.accent,badge:o.badge,icon:o.icon,background:o.background}},rj=n=>{const i=n.trim().length;return i<=10?"text-[clamp(1.755rem,3.9vw,2.275rem)]":i<=16?"text-[clamp(1.625rem,3.77vw,2.08rem)]":i<=24?"text-[clamp(1.495rem,3.51vw,1.885rem)]":"text-[clamp(1.365rem,3.25vw,1.69rem)]"},oj=({order:n,onReady:i,canMarkReady:o})=>{const c=Qg(n.date_envoi_cuisine||Date.now()),u=h.useMemo(()=>{const p=[],y=new Map;return n.items.forEach(v=>{var D;const N=(D=v.commentaire)==null?void 0:D.trim(),j=N||"no_comment",S=`${v.produitRef}::${j}`;if(N){p.push({key:`${S}::${v.id}`,nom_produit:v.nom_produit,quantite:v.quantite,commentaire:N});return}const w=y.get(S);if(w!==void 0){p[w].quantite+=v.quantite;return}y.set(S,p.length),p.push({key:S,nom_produit:v.nom_produit,quantite:v.quantite})}),p},[n.items]);h.useMemo(()=>n.items.reduce((p,y)=>p+y.quantite,0),[n.items]);const g=new Date(n.date_envoi_cuisine||Date.now()).toLocaleTimeString("es-CO",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),x=n.table_nom||`Para llevar #${n.id.slice(-4)}`;return rj(x),a.jsxs("div",{className:`relative flex h-full flex-col overflow-hidden rounded-xl border text-gray-900 shadow-md transition-shadow duration-300 hover:shadow-lg ${c.border} ${c.background}`,children:[a.jsx("span",{"aria-hidden":!0,className:`absolute inset-y-0 left-0 w-1 ${c.accent}`}),a.jsx("header",{className:"border-b border-gray-200 px-5 pt-3 pb-2",children:a.jsxs("div",{className:"grid gap-2 sm:grid-cols-[minmax(0,1fr)_auto] sm:items-start",children:[a.jsxs("div",{className:"min-w-0 space-y-0.5",children:[a.jsx("h4",{className:"truncate text-base font-semibold leading-tight text-gray-900 sm:text-lg md:text-xl",children:x}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Pedido a las ",g]})]}),a.jsx("div",{className:"flex flex-col items-start gap-1 sm:items-end",children:a.jsx("div",{className:"flex w-full justify-start sm:justify-end",children:a.jsx(su,{startTime:n.date_envoi_cuisine||Date.now(),className:" text-sm sm:text-base"})})})]})}),a.jsx("div",{className:"flex-1 overflow-hidden px-5 pt-2 pb-4",children:a.jsx("div",{className:"flex h-full flex-col gap-1",children:a.jsxs("section",{className:"flex flex-col overflow-hidden gap-1",children:[a.jsx("h5",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-gray-500",children:"Artículos"}),a.jsx("div",{className:"flex-1 overflow-y-auto pr-1",children:u.length>0?a.jsx("ul",{className:"space-y-0.5",children:u.map(p=>{var v;const y=(v=p.commentaire)==null?void 0:v.trim();return a.jsxs("li",{className:"flex items-stretch rounded-lg border border-gray-200 bg-gray-50 text-sm text-gray-900 shadow-sm overflow-hidden min-h-[3.5rem]",children:[a.jsx("div",{className:"flex flex-1 items-center justify-between gap-3 pr-3",children:a.jsxs("div",{className:"flex flex-1 items-center",children:[a.jsx("span",{className:`flex self-stretch w-12 shrink-0 items-center justify-center text-xl font-bold text-white shadow-md ${c.accent} rounded-l-lg`,children:p.quantite}),a.jsx("span",{className:"font-semibold text-gray-900 text-[clamp(1.1rem,2.1vw,1.3rem)] leading-snug break-words text-balance whitespace-normal [hyphens:auto] px-3 py-3",children:p.nom_produit})]})}),y&&a.jsx("p",{className:"mt-2 rounded-md border border-dashed border-blue-200 bg-blue-50 px-3 py-2 text-xs font-medium italic text-blue-800 ml-14 mr-3",children:y})]},p.key)})}):a.jsx("p",{className:"rounded-lg border border-gray-200 bg-gray-50 px-4 py-3 text-xs text-gray-500 shadow-sm",children:"Este pedido aún no tiene artículos registrados."})})]})})}),o&&a.jsx("footer",{className:"border-t border-gray-200 px-5 pb-5 pt-4",children:a.jsx("button",{onClick:()=>i(n.id,n.date_envoi_cuisine),className:"w-full ui-btn ui-btn-success uppercase",type:"button",children:"Listo"})})]})},cj=()=>{const[n,i]=h.useState([]),[o,c]=h.useState(!0),{role:u}=$a(),f=(u==null?void 0:u.permissions["/cocina"])==="editor",g=h.useCallback(async()=>{try{const p=await ye.getKitchenOrders();i(p)}catch(p){console.error("Failed to fetch kitchen orders",p)}finally{c(!1)}},[]);h.useEffect(()=>{g();const p=setInterval(g,5e3),y=ye.notifications.subscribe("orders_updated",g);return()=>{clearInterval(p),y()}},[g]);const x=async(p,y)=>{try{await ye.markOrderAsReady(p,y),g()}catch(v){console.error("Failed to mark order as ready",v)}};return o?a.jsx("div",{className:"text-gray-700",children:"Cargando pedidos de cocina..."}):a.jsx("div",{className:"flex h-full flex-col",children:n.length===0?a.jsx("div",{className:"mt-6 flex flex-1 items-center justify-center text-2xl text-gray-500",children:"No hay pedidos en preparación."}):a.jsx("div",{className:"mt-6 grid flex-1 grid-cols-1 justify-center gap-4 sm:[grid-template-columns:repeat(auto-fit,minmax(24rem,max-content))] sm:justify-start",children:n.map(p=>a.jsx(oj,{order:p,onReady:x,canMarkReady:f},p.ticketKey))})})},Uh=({order:n,onValidate:i,onDeliver:o,isProcessing:c})=>{var N;const[u,f]=h.useState(!1),g=n.table_nom||`Pedido #${n.id.slice(-6)}`,x=n.date_envoi_cuisine||n.date_creation,p=Qg(x),y=(((N=n.applied_promotions)==null?void 0:N.length)??0)>0,v=y;return a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:`relative flex h-full flex-col overflow-hidden rounded-xl border text-gray-900 shadow-md transition-shadow duration-300 hover:shadow-lg ${p.border} ${p.background}`,children:[a.jsx("span",{"aria-hidden":!0,className:`absolute inset-y-0 left-0 w-1 ${p.accent}`}),a.jsx("header",{className:"border-b border-gray-200 px-5 pt-3 pb-2",children:a.jsxs("div",{className:"grid gap-2 sm:grid-cols-[minmax(0,1fr)_auto] sm:items-start",children:[a.jsxs("div",{className:"min-w-0 space-y-0.5",children:[a.jsx("h4",{className:"truncate text-base font-semibold leading-tight text-gray-900 sm:text-lg md:text-xl",children:g}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Pedido enviado ",new Date(x).toLocaleTimeString("es-CO",{hour:"2-digit",minute:"2-digit"})]})]}),a.jsx("div",{className:"flex flex-col items-start gap-1 sm:items-end",children:a.jsx("div",{className:"flex w-full justify-start sm:justify-end",children:a.jsx(su,{startTime:x,className:" text-sm sm:text-base"})})})]})}),a.jsx("div",{className:"flex-1 overflow-hidden px-5 pt-2 pb-4",children:a.jsxs("div",{className:"flex h-full flex-col gap-1",children:[n.clientInfo&&a.jsxs("section",{className:"space-y-2 rounded-lg border border-gray-200 bg-gray-50 p-3 text-sm text-gray-900 shadow-sm",children:[n.clientInfo.nom&&a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-2 text-gray-900",children:[a.jsx(bi,{size:16,className:p.icon}),a.jsx("span",{className:"font-medium",children:n.clientInfo.nom})]}),n.clientInfo.telephone&&a.jsxs("div",{className:"ml-6 flex items-center gap-2 text-xs text-gray-600",children:[a.jsx(gl,{size:14,className:"text-gray-500"}),a.jsx("span",{children:n.clientInfo.telephone})]})]}),n.clientInfo.adresse&&a.jsxs("div",{className:"flex items-start gap-2 text-gray-700",children:[a.jsx(jn,{size:16,className:`mt-0.5 text-gray-500 ${p.icon}`}),a.jsx("span",{className:"text-sm text-gray-700",children:n.clientInfo.adresse})]})]}),a.jsxs("section",{className:"flex flex-col overflow-hidden gap-1",children:[a.jsx("h5",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-gray-500",children:"Artículos"}),a.jsx("div",{className:"flex-1 overflow-y-auto pr-1",children:n.items.length>0?a.jsx("ul",{className:"space-y-0.5",children:n.items.map(j=>{var w;const S=(w=j.commentaire)==null?void 0:w.trim();return a.jsxs("li",{className:"flex items-stretch rounded-lg border border-gray-200 bg-gray-50 text-sm text-gray-900 shadow-sm overflow-hidden min-h-[3.5rem]",children:[a.jsxs("div",{className:"flex flex-1 items-center justify-between gap-3 pr-3",children:[a.jsxs("div",{className:"flex flex-1 items-center",children:[a.jsx("span",{className:`flex self-stretch w-12 shrink-0 items-center justify-center text-xl font-bold text-white shadow-md ${p.accent} rounded-l-lg`,children:j.quantite}),a.jsx("span",{className:"font-semibold text-gray-900 text-[clamp(1.1rem,2.1vw,1.3rem)] leading-snug break-words text-balance whitespace-normal [hyphens:auto] px-3 py-3",children:j.nom_produit})]}),a.jsx("span",{className:"whitespace-nowrap text-sm font-semibold text-gray-900 sm:text-base",children:fe(j.prix_unitaire*j.quantite)})]}),S&&a.jsx("p",{className:"mt-2 rounded-md border border-dashed border-blue-200 bg-blue-50 px-3 py-2 text-xs font-medium italic text-blue-800 ml-14 mr-3",children:S})]},j.id)})}):a.jsx("p",{className:"rounded-lg border border-gray-200 bg-gray-50 px-4 py-3 text-xs text-gray-500 shadow-sm",children:"Este pedido aún no tiene artículos registrados."})})]}),v&&a.jsx("section",{className:"space-y-2 rounded-lg border border-emerald-200 bg-emerald-50 bg-emerald-50 px-3 py-2 text-sm text-emerald-900 shadow-sm",children:y&&a.jsx("ul",{className:"space-y-0.5","aria-label":"Promotions",children:n.applied_promotions.map(j=>{const S=typeof j.config=="object"&&j.config!==null?j.config.promo_code:void 0;return a.jsx("li",{className:"rounded-md border border-emerald-200 bg-white/70 px-3 py-2 text-emerald-900 shadow-sm",children:a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("p",{className:"font-medium leading-tight",children:[j.name,S?` (Code: ${S})`:""]}),a.jsxs("p",{className:"text-sm font-semibold text-emerald-700 whitespace-nowrap",children:["-",fe(j.discount_amount||0)]})]})},`${j.promotion_id}-${j.name}`)})})}),a.jsxs("div",{className:"mt-auto flex items-center justify-between rounded-lg border border-gray-200 bg-gray-50 px-3 py-2 font-semibold text-gray-900 shadow-sm",children:[a.jsx("span",{children:"Total"}),a.jsx("span",{className:"text-lg sm:text-xl text-gray-900",children:fe(n.total)})]})]})}),a.jsx("footer",{className:"border-t border-gray-200 px-5 pb-5 pt-4",children:(i||o)&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("button",{onClick:()=>f(!0),className:"w-full ui-btn ui-btn-secondary",type:"button",children:[a.jsx(Ad,{size:16,className:p.icon})," ",n.receipt_url?"Ver comprobante":"Comprobante no disponible"]}),i&&n.statut==="pendiente_validacion"&&a.jsx("button",{onClick:()=>i(n.id),disabled:c,className:"w-full ui-btn ui-btn-info uppercase",type:"button",children:c?"Validando...":"Validar"}),o&&n.estado_cocina==="listo"&&a.jsx("button",{onClick:()=>o(n.id),disabled:c,className:"w-full ui-btn ui-btn-success uppercase",type:"button",children:c?"Procesando...":"Entregar"})]})})]}),u&&a.jsxs("div",{className:"absolute inset-0 z-50 flex items-start justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>f(!1)}),a.jsxs("div",{className:"relative w-full h-full bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-4 py-3 bg-gray-50",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Comprobante de pago"}),a.jsx("button",{onClick:()=>f(!1),className:"text-gray-500 hover:text-gray-700 transition",type:"button",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"flex-1 overflow-auto p-4",children:n.receipt_url?a.jsx("img",{src:n.receipt_url,alt:"Comprobante",className:"w-full h-auto rounded-md"}):a.jsx("p",{className:"text-center text-gray-500",children:"No se proporcionó comprobante."})})]})]})]})},dj=()=>{const[n,i]=h.useState([]),[o,c]=h.useState([]),[u,f]=h.useState(!0),[g,x]=h.useState(null),{loading:p}=Ci(),{schedule:y,updateSchedule:v}=au(),[N,j]=h.useState(!1),[S,w]=h.useState(null),[D,C]=h.useState(()=>new Date),[L,q]=h.useState(!1);h.useEffect(()=>{if(typeof window>"u")return;const T=()=>C(new Date);T();const K=window.setInterval(T,6e4);return()=>window.clearInterval(K)},[]);const X=[{key:"monday",label:"Lundi"},{key:"tuesday",label:"Mardi"},{key:"wednesday",label:"Mercredi"},{key:"thursday",label:"Jeudi"},{key:"friday",label:"Vendredi"},{key:"saturday",label:"Samedi"},{key:"sunday",label:"Dimanche"}],[A,F]=h.useState(null);h.useEffect(()=>{y&&!A&&F(y)},[y,A]);const te=h.useMemo(()=>tu(y,D),[y,D]),J=h.useMemo(()=>{if(!y)return null;const K=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][D.getDay()];return y[K]},[D,y]),Q=h.useCallback(async()=>{if(A){j(!0),w(null);try{await v(A),w({message:"Horaires mis à jour avec succès.",tone:"success"}),q(!1)}catch(T){console.error("Failed to update online ordering schedule",T);const K=T instanceof Error?T.message:"Impossible de mettre à jour les horaires.";w({message:K,tone:"error"})}finally{j(!1)}}},[A,v]),oe=h.useCallback(async()=>{try{const{pending:T,ready:K}=await ye.getTakeawayOrders();i(T.sort((B,le)=>B.date_creation-le.date_creation)),c(K.sort((B,le)=>(B.date_listo_cuisine||0)-(le.date_listo_cuisine||0)))}catch(T){console.error("Failed to fetch takeaway orders",T)}finally{f(!1)}},[]);h.useEffect(()=>{f(!0),oe();const T=setInterval(oe,1e4),K=ye.notifications.subscribe("orders_updated",oe);return()=>{clearInterval(T),K()}},[oe]);const H=async T=>{if(!g){x(T);try{await ye.validateTakeawayOrder(T),await oe()}catch(K){console.error("Failed to validate order:",K),alert(`No se pudo validar el pedido: ${K.message}`)}finally{x(null)}}},W=async T=>{if(!g){x(T);try{await ye.markTakeawayAsDelivered(T),await oe()}catch(K){console.error("Failed to mark order as delivered:",K),alert("Ocurrió un error al finalizar el pedido.")}finally{x(null)}}};return u?a.jsx("div",{className:"text-gray-700",children:"Cargando pedidos para llevar..."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"rounded-2xl border border-gray-200 bg-white shadow-sm p-6",children:[a.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-blue-100 text-blue-600",children:a.jsx(fs,{size:22})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-base font-semibold text-gray-900",children:"Disponibilité de la commande en ligne"}),a.jsx("p",{className:"text-sm text-gray-500",children:p?"Chargement des horaires...":J.closed?"Aujourd'hui: Fermé":`Aujourd'hui: ${J.startTime} - ${J.endTime}`})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold uppercase tracking-[0.2em] ${te?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700"}`,children:[a.jsx("span",{className:`h-2 w-2 rounded-full ${te?"bg-emerald-500":"bg-amber-500"}`}),te?"Ouvert":"Fermé"]}),a.jsx("button",{onClick:()=>q(!0),className:"inline-flex items-center justify-center rounded-lg bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow transition hover:bg-blue-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",type:"button",children:"Configurer"})]})]}),S&&a.jsx("p",{className:`mt-4 text-sm font-medium ${S.tone==="success"?"text-emerald-600":"text-red-600"}`,children:S.message})]}),a.jsx(Tt,{isOpen:L,onClose:()=>q(!1),title:"Configuration des horaires",size:"xs",children:a.jsxs("div",{className:"space-y-1.5",children:[X.map(({key:T,label:K})=>{var B;return a.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 p-1.5",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[a.jsx("h3",{className:"text-xs font-semibold text-gray-900",children:K}),a.jsxs("label",{className:"flex items-center gap-1",children:[a.jsx("input",{type:"checkbox",checked:((B=A==null?void 0:A[T])==null?void 0:B.closed)??!1,onChange:le=>A&&F({...A,[T]:{...A[T],closed:le.target.checked}}),className:"h-3 w-3 rounded border-gray-300 text-blue-600 focus:ring-1 focus:ring-blue-500"}),a.jsx("span",{className:"text-[10px] text-gray-700",children:"Fermé"})]})]}),A&&!A[T].closed&&a.jsxs("div",{className:"flex gap-1.5",children:[a.jsxs("label",{className:"flex flex-col gap-0.5 flex-1",children:[a.jsx("span",{className:"text-[9px] font-medium text-gray-600",children:"Ouverture"}),a.jsx("input",{type:"time",value:A[T].startTime,onChange:le=>F({...A,[T]:{...A[T],startTime:le.target.value}}),className:"w-full rounded border border-gray-300 bg-white px-1.5 py-0.5 text-[11px] text-gray-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500/30"})]}),a.jsxs("label",{className:"flex flex-col gap-0.5 flex-1",children:[a.jsx("span",{className:"text-[9px] font-medium text-gray-600",children:"Fermeture"}),a.jsx("input",{type:"time",value:A[T].endTime,onChange:le=>F({...A,[T]:{...A[T],endTime:le.target.value}}),className:"w-full rounded border border-gray-300 bg-white px-1.5 py-0.5 text-[11px] text-gray-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500/30"})]})]})]},T)}),a.jsxs("div",{className:"flex justify-end gap-1.5 pt-2 border-t border-gray-200",children:[a.jsx("button",{onClick:()=>q(!1),className:"rounded border border-gray-300 bg-white px-2.5 py-1 text-[11px] font-semibold text-gray-700 shadow-sm transition hover:bg-gray-50",type:"button",children:"Annuler"}),a.jsx("button",{onClick:Q,disabled:N,className:"rounded bg-blue-600 px-2.5 py-1 text-[11px] font-semibold text-white shadow transition hover:bg-blue-700 disabled:cursor-not-allowed disabled:bg-blue-300",type:"button",children:N?"Enregistrement...":"Enregistrer"})]})]})}),a.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-8 md:grid-cols-2",children:[a.jsxs("div",{className:"bg-gray-100 p-4 rounded-xl",children:[a.jsxs("h2",{className:"text-lg sm:text-xl font-bold mb-4 text-center text-blue-700",children:["Pendientes de validación (",n.length,")"]}),a.jsx("div",{className:"space-y-4",children:n.length>0?n.map(T=>a.jsx(Uh,{order:T,onValidate:H,isProcessing:g===T.id},T.id)):a.jsx("p",{className:"text-center text-gray-500 py-8",children:"No hay pedidos para validar."})})]}),a.jsxs("div",{className:"bg-gray-100 p-4 rounded-xl",children:[a.jsxs("h2",{className:"text-lg sm:text-xl font-bold mb-4 text-center text-green-700",children:["Pedidos listos (",o.length,")"]}),a.jsx("div",{className:"space-y-4",children:o.length>0?o.map(T=>a.jsx(Uh,{order:T,onDeliver:W,isProcessing:g===T.id},T.id)):a.jsx("p",{className:"text-center text-gray-500 py-8",children:"No hay pedidos listos."})})]})]})]})},uj=()=>{const{role:n}=$a(),[i,o]=h.useState([]),[c,u]=h.useState(!0),[f,g]=h.useState(null),[x,p]=h.useState(""),[y,v]=h.useState(!1),[N,j]=h.useState(!1),[S,w]=h.useState(!1),[D,C]=h.useState(null),[L,q]=h.useState("add"),X=(n==null?void 0:n.permissions["/ingredients"])==="editor",A=h.useCallback(async()=>{try{const J=await ye.getIngredients();o(J),g(null)}catch(J){g("Impossible de charger les ingrédients."),console.error(J)}finally{u(!1)}},[]);h.useEffect(()=>{u(!0),A()},[A]);const F=h.useMemo(()=>i.filter(J=>J.nom.toLowerCase().includes(x.toLowerCase())),[i,x]),te=(J,Q=null)=>{C(Q),J==="add"||J==="edit"?(q(J),v(!0)):J==="resupply"?j(!0):J==="delete"&&w(!0)};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"mt-6 flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[a.jsxs("div",{className:"relative w-full md:w-80",children:[a.jsx(Vd,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),a.jsx("input",{type:"text",placeholder:"Rechercher un ingrédient...",value:x,onChange:J=>p(J.target.value),className:"ui-input pl-10 sm:w-64"})]}),X&&a.jsxs("button",{onClick:()=>te("add"),className:"w-full md:w-auto ui-btn-primary",children:[a.jsx(Yd,{size:20}),"Ajouter un ingrédient"]})]}),c?a.jsx("p",{className:"text-gray-800",children:"Chargement..."}):f?a.jsx("p",{className:"text-red-500",children:f}):a.jsx("div",{className:"ui-card p-4 overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"border-b",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-3 text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Nom"}),a.jsx("th",{className:"p-3 text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Stock Actuel"}),a.jsx("th",{className:"p-3 text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Stock Minimum"}),a.jsx("th",{className:"p-3 text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Prix unitaire moyen"}),X&&a.jsx("th",{className:"p-3 text-right text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{children:F.map(J=>{const Q=J.stock_actuel<=J.stock_minimum;return a.jsxs("tr",{className:`border-b hover:bg-gray-50 ${Q?"bg-red-50":""}`,children:[a.jsx("td",{className:`p-3 font-semibold ${Q?"text-red-900":"text-gray-900"}`,children:J.nom}),a.jsxs("td",{className:`p-3 font-bold ${Q?"text-red-700":"text-gray-800"}`,children:[J.stock_actuel," ",J.unite]}),a.jsxs("td",{className:`p-3 ${Q?"text-red-800":"text-gray-700"}`,children:[J.stock_minimum," ",J.unite]}),a.jsx("td",{className:`p-3 ${Q?"text-red-800":"text-gray-700"}`,children:fe(J.prix_unitaire)}),X&&a.jsx("td",{className:"p-3 text-right",children:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>te("resupply",J),title:"Réapprovisionner",className:"p-2 text-green-600 hover:bg-green-100 rounded-full",children:a.jsx(_v,{size:20})}),a.jsx("button",{onClick:()=>te("edit",J),title:"Modifier",className:"p-2 text-blue-600 hover:bg-blue-100 rounded-full",children:a.jsx(gg,{size:20})}),a.jsx("button",{onClick:()=>te("delete",J),title:"Supprimer",className:"p-2 text-red-600 hover:bg-red-100 rounded-full",children:a.jsx(wn,{size:20})})]})})]},J.id)})})]})}),y&&X&&a.jsx(mj,{isOpen:y,onClose:()=>v(!1),onSuccess:A,ingredient:D,mode:L}),N&&X&&D&&a.jsx(fj,{isOpen:N,onClose:()=>j(!1),onSuccess:A,ingredient:D}),S&&X&&D&&a.jsx(pj,{isOpen:S,onClose:()=>w(!1),onSuccess:A,ingredient:D})]})},mj=({isOpen:n,onClose:i,onSuccess:o,ingredient:c,mode:u})=>{const[f,g]=h.useState({nom:(c==null?void 0:c.nom)||"",unite:(c==null?void 0:c.unite)||"g",stock_minimum:(c==null?void 0:c.stock_minimum)||0}),[x,p]=h.useState(!1),y=async v=>{v.preventDefault(),p(!0);try{u==="edit"&&c?await ye.updateIngredient(c.id,f):await ye.createIngredient(f),o(),i()}catch(N){console.error("Failed to save ingredient",N)}finally{p(!1)}};return a.jsx(Tt,{isOpen:n,onClose:i,title:u==="add"?"Ajouter un Ingrédient":"Modifier l'Ingrédient",children:a.jsxs("form",{onSubmit:y,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"nom",className:"block text-sm font-medium text-gray-700",children:"Nom"}),a.jsx("input",{type:"text",id:"nom",value:f.nom,onChange:v=>g({...f,nom:v.target.value}),required:!0,className:"mt-1 ui-input"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"unite",className:"block text-sm font-medium text-gray-700",children:"Unité"}),a.jsxs("select",{id:"unite",value:f.unite,onChange:v=>g({...f,unite:v.target.value}),required:!0,className:"mt-1 ui-select",children:[a.jsx("option",{value:"g",children:"Grammes (g)"}),a.jsx("option",{value:"kg",children:"Kilogrammes (kg)"}),a.jsx("option",{value:"ml",children:"Millilitres (ml)"}),a.jsx("option",{value:"L",children:"Litres (L)"}),a.jsx("option",{value:"unite",children:"Unité"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"stock_minimum",className:"block text-sm font-medium text-gray-700",children:"Stock Minimum"}),a.jsx("input",{type:"number",id:"stock_minimum",min:"0",value:f.stock_minimum,onChange:v=>g({...f,stock_minimum:parseFloat(v.target.value)}),required:!0,className:"mt-1 ui-input"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:i,className:"w-full ui-btn-secondary py-3",children:"Annuler"}),a.jsx("button",{type:"submit",disabled:x,className:"w-full ui-btn-primary py-3 disabled:opacity-60",children:x?"Sauvegarde...":"Sauvegarder"})]})]})})},fj=({isOpen:n,onClose:i,onSuccess:o,ingredient:c})=>{const[u,f]=h.useState(0),[g,x]=h.useState(0),[p,y]=h.useState(!1),v=async N=>{if(N.preventDefault(),!(u<=0||g<0)){y(!0);try{await ye.resupplyIngredient(c.id,u,g),o(),i()}catch(j){console.error("Failed to resupply ingredient",j)}finally{y(!1)}}};return a.jsx(Tt,{isOpen:n,onClose:i,title:`Réapprovisionner: ${c.nom}`,children:a.jsxs("form",{onSubmit:v,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"quantity",className:"block text-sm font-medium text-gray-700",children:["Quantité Achetée (",c.unite,")"]}),a.jsx("input",{type:"number",id:"quantity",min:"0.01",step:"0.01",value:u,onChange:N=>f(parseFloat(N.target.value)),required:!0,className:"mt-1 ui-input"})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"unitPrice",className:"block text-sm font-medium text-gray-700",children:["Prix par unité (",c.unite,")"]}),a.jsx("input",{type:"number",id:"unitPrice",min:"0",step:"0.01",value:g,onChange:N=>x(parseFloat(N.target.value)),required:!0,className:"mt-1 ui-input"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:i,className:"w-full ui-btn-secondary py-3",children:"Annuler"}),a.jsx("button",{type:"submit",disabled:p,className:"w-full ui-btn-success py-3 disabled:opacity-60",children:p?"Ajout...":"Ajouter au Stock"})]})]})})},pj=({isOpen:n,onClose:i,onSuccess:o,ingredient:c})=>{const[u,f]=h.useState(!1),[g,x]=h.useState(null),p=async()=>{f(!0),x(null);try{await ye.deleteIngredient(c.id),o(),i()}catch(y){console.error("Failed to delete ingredient",y),x("Impossible de supprimer cet ingrédient car il est utilisé dans au moins une recette.")}finally{f(!1)}};return a.jsxs(Tt,{isOpen:n,onClose:i,title:"Confirmer la Suppression",children:[a.jsxs("p",{className:"text-gray-700",children:["Êtes-vous sûr de vouloir supprimer l'ingrédient ",a.jsx("strong",{className:"text-gray-900",children:c.nom})," ? Cette action est irréversible."]}),g&&a.jsx("p",{className:"mt-4 text-sm text-red-600",children:g}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-6",children:[a.jsx("button",{type:"button",onClick:i,className:"w-full ui-btn-secondary py-3",children:"Annuler"}),a.jsx("button",{onClick:p,disabled:u,className:"w-full ui-btn-danger py-3 disabled:opacity-60",children:u?"Suppression...":"Supprimer"})]})]})},Lh=[1,2,3,4,5,6],qh=n=>{switch(n){case"disponible":return{text:"Disponible",color:"bg-green-100 text-green-800",Icon:bn};case"agotado_temporal":return{text:"Rupture (Temp.)",color:"bg-yellow-100 text-yellow-800",Icon:fs};case"agotado_indefinido":return{text:"Indisponible",color:"bg-red-100 text-red-800",Icon:Ry};default:return{text:"Inconnu",color:"bg-gray-100 text-gray-800",Icon:Oy}}},hj=()=>{const{role:n}=$a(),[i,o]=h.useState([]),[c,u]=h.useState([]),[f,g]=h.useState([]),[x,p]=h.useState(!0),[y,v]=h.useState(null),[N,j]=h.useState(""),[S,w]=h.useState("all"),[D,C]=h.useState(!1),[L,q]=h.useState(!1),[X,A]=h.useState(!1),[F,te]=h.useState(null),[J,Q]=h.useState("add"),oe=(n==null?void 0:n.permissions["/produits"])==="editor",H=h.useCallback(async()=>{try{p(!0);const[le,_,E]=await Promise.all([ye.getProducts(),ye.getCategories(),ye.getIngredients()]);o(le),u(_),g(E),v(null)}catch(le){v("Impossible de charger les données des produits."),console.error(le)}finally{p(!1)}},[]);h.useEffect(()=>{H()},[H]);const W=h.useMemo(()=>i.filter(le=>le.nom_produit.toLowerCase().includes(N.toLowerCase())&&(S==="all"||le.categoria_id===S)),[i,N,S]),T=h.useMemo(()=>{const le=new Map;return i.forEach(_=>{_.is_best_seller&&_.best_seller_rank!=null&&le.set(_.best_seller_rank,_)}),le},[i]),K=(le,_="add",E=null)=>{le==="product"?(Q(_),te(E),C(!0)):le==="category"?q(!0):le==="delete"&&E&&(te(E),A(!0))},B=async(le,_)=>{try{await ye.updateProduct(le.id,{estado:_}),H()}catch(E){console.error("Failed to update status",E);const z=E instanceof Error?E.message:"Une erreur inconnue s'est produite.";alert(`Échec de la mise à jour du statut du produit : ${z}`)}};return x?a.jsx("p",{className:"text-gray-800",children:"Chargement des produits..."}):y?a.jsx("p",{className:"text-red-500",children:y}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"mt-6 ui-card p-4 flex flex-col lg:flex-row justify-between items-center gap-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row gap-4 w-full",children:[a.jsxs("div",{className:"relative flex-grow md:max-w-md",children:[a.jsx(Vd,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),a.jsx("input",{type:"text",placeholder:"Rechercher un produit...",value:N,onChange:le=>j(le.target.value),className:"ui-input pl-10"})]}),a.jsxs("select",{value:S,onChange:le=>w(le.target.value),className:"ui-select md:w-56",children:[a.jsx("option",{value:"all",children:"Toutes les catégories"}),c.map(le=>a.jsx("option",{value:le.id,children:le.nom},le.id))]})]}),oe&&a.jsxs("div",{className:"flex gap-2 w-full lg:w-auto",children:[a.jsx("button",{onClick:()=>q(!0),className:"flex-1 lg:flex-initial ui-btn-secondary",children:a.jsx(Gv,{size:20})}),a.jsxs("button",{onClick:()=>K("product","add"),className:"flex-1 lg:flex-initial ui-btn-primary",children:[a.jsx(Yd,{size:20}),"Ajouter Produit"]})]})]}),a.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:W.map(le=>a.jsx(gj,{product:le,category:c.find(_=>_.id===le.categoria_id),onEdit:()=>K("product","edit",le),onDelete:()=>K("delete","edit",le),onStatusChange:B,canEdit:oe},le.id))}),D&&oe&&a.jsx(xj,{isOpen:D,onClose:()=>C(!1),onSuccess:H,product:F,mode:J,categories:c,ingredients:f,occupiedPositions:T}),L&&oe&&a.jsx(bj,{isOpen:L,onClose:()=>q(!1),onSuccess:H,categories:c}),X&&oe&&F&&a.jsx(yj,{isOpen:X,onClose:()=>A(!1),onSuccess:H,product:F})]})},gj=({product:n,category:i,onEdit:o,onDelete:c,onStatusChange:u,canEdit:f})=>{const{text:g,color:x,Icon:p}=qh(n.estado),[y,v]=h.useState(!1),N=n.prix_vente-(n.cout_revient||0);return n.prix_vente>0&&N/n.prix_vente*100,a.jsxs("div",{className:"ui-card flex flex-col overflow-hidden",children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:n.image,alt:n.nom_produit,className:"w-full h-40 object-cover"}),n.is_best_seller&&a.jsxs("span",{className:"absolute top-2 left-2 rounded-full bg-brand-primary/90 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-white shadow-md",children:["Best seller",n.best_seller_rank?` #${n.best_seller_rank}`:""]})]}),a.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-black",children:(i==null?void 0:i.nom)||"Sans catégorie"}),a.jsx("h3",{className:"font-bold text-[clamp(1.05rem,2.2vw,1.35rem)] leading-snug text-black break-words text-balance whitespace-normal [hyphens:auto]",children:n.nom_produit})]}),a.jsx("p",{className:"text-xl font-extrabold text-black",children:fe(n.prix_vente)})]}),a.jsx("p",{className:"text-xs text-black mt-1 flex-grow",children:n.description}),a.jsxs("div",{className:"flex justify-between items-center mt-4",children:[a.jsxs("span",{className:`px-2 py-1 text-xs font-bold rounded-full flex items-center gap-1 ${x}`,children:[a.jsx(p,{size:14})," ",g]}),f&&a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:()=>v(!y),className:"p-1 text-gray-500 hover:text-gray-800",children:a.jsx(og,{size:20})}),y&&a.jsxs("div",{className:"absolute right-0 bottom-full mb-2 w-48 bg-white rounded-md shadow-lg z-10 border",children:[a.jsx("button",{onClick:()=>{o(),v(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Modifier"}),a.jsx("button",{onClick:()=>{c(),v(!1)},className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100",children:"Supprimer"}),a.jsx("div",{className:"border-t my-1"}),a.jsx("p",{className:"px-4 pt-2 pb-1 text-xs text-gray-500",children:"Changer statut :"}),["disponible","agotado_temporal","agotado_indefinido"].map(j=>a.jsx("button",{onClick:()=>{u(n,j),v(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:qh(j).text},j))]})]})]})]})]})},xj=({isOpen:n,onClose:i,onSuccess:o,product:c,mode:u,categories:f,ingredients:g,occupiedPositions:x})=>{var oe;const[p,y]=h.useState({nom_produit:(c==null?void 0:c.nom_produit)||"",prix_vente:(c==null?void 0:c.prix_vente)||0,categoria_id:(c==null?void 0:c.categoria_id)||(((oe=f[0])==null?void 0:oe.id)??""),estado:(c==null?void 0:c.estado)||"disponible",image:(c==null?void 0:c.image)??"",description:(c==null?void 0:c.description)||"",recipe:(c==null?void 0:c.recipe)||[],is_best_seller:(c==null?void 0:c.is_best_seller)??!1,best_seller_rank:(c==null?void 0:c.best_seller_rank)??null}),[v,N]=h.useState(null),[j,S]=h.useState(!1);h.useEffect(()=>{var H;n&&(y({nom_produit:(c==null?void 0:c.nom_produit)||"",prix_vente:(c==null?void 0:c.prix_vente)||0,categoria_id:(c==null?void 0:c.categoria_id)||(((H=f[0])==null?void 0:H.id)??""),estado:(c==null?void 0:c.estado)||"disponible",image:(c==null?void 0:c.image)??"",description:(c==null?void 0:c.description)||"",recipe:(c==null?void 0:c.recipe)||[],is_best_seller:(c==null?void 0:c.is_best_seller)??!1,best_seller_rank:(c==null?void 0:c.best_seller_rank)??null}),N(null))},[n,c,f]);const w=h.useCallback(()=>{for(const H of Lh){const W=x.get(H);if(!W||W.id===(c==null?void 0:c.id))return H}return null},[x,c==null?void 0:c.id]),D=h.useCallback(H=>{y(W=>{if(H){const T=W.best_seller_rank??w();return{...W,is_best_seller:!0,best_seller_rank:T??null}}return{...W,is_best_seller:!1,best_seller_rank:null}})},[w]),C=h.useCallback(H=>{const W=H.target.value;y(T=>({...T,best_seller_rank:W?Number(W):null}))},[]),L=h.useMemo(()=>new Map(g.map(H=>[H.id,H])),[g]),q=h.useMemo(()=>p.recipe.reduce((H,W)=>{const T=L.get(W.ingredient_id);if(!T)return H;let K=T.prix_unitaire;return(T.unite==="kg"||T.unite==="L")&&(K=K/1e3),H+K*W.qte_utilisee},0),[p.recipe,L]),X=p.prix_vente-q,A=p.prix_vente>0?X/p.prix_vente*100:0,F=(H,W,T)=>{const K=[...p.recipe];if(W==="qte_utilisee"){const{valueAsNumber:B,value:le}=T.currentTarget,_=Number.isNaN(B)?Number(le.replace(",",".")):B;K[H]={...K[H],[W]:Number.isNaN(_)?K[H].qte_utilisee:_}}else K[H]={...K[H],[W]:T.currentTarget.value};y(B=>({...B,recipe:K}))},te=()=>{g.length!==0&&y({...p,recipe:[...p.recipe,{ingredient_id:g[0].id,qte_utilisee:0}]})},J=H=>{const W=p.recipe.filter((T,K)=>K!==H);y({...p,recipe:W})},Q=async H=>{var W;if(H.preventDefault(),p.recipe.length===0){alert("Veuillez ajouter au moins un ingrédient à la recette.");return}if(p.is_best_seller){if(p.best_seller_rank==null){alert("Veuillez sélectionner une position de best seller disponible.");return}const T=x.get(p.best_seller_rank);if(T&&T.id!==(c==null?void 0:c.id)){alert(`La position ${p.best_seller_rank} est déjà occupée par ${T.nom_produit}.`);return}}S(!0);try{let T=((W=p.image)==null?void 0:W.trim())??"";v&&(T=await Zb(v,p.nom_produit));const K={...p,image:T,is_best_seller:p.is_best_seller,best_seller_rank:p.is_best_seller?p.best_seller_rank:null};u==="edit"&&c?await ye.updateProduct(c.id,K):await ye.addProduct(K),o(),N(null),i()}catch(T){console.error("Failed to save product",T);const K=T instanceof Error?T.message:"Une erreur inconnue s'est produite.";alert(`Échec du téléversement de l'image du produit : ${K}`)}finally{S(!1)}};return a.jsx(Tt,{isOpen:n,onClose:i,title:u==="add"?"Ajouter un Produit":"Modifier le Produit",size:"lg",children:a.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[a.jsxs("div",{className:"max-h-[65vh] overflow-y-auto pr-2 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nom"}),a.jsx("input",{type:"text",value:p.nom_produit,onChange:H=>y({...p,nom_produit:H.target.value}),required:!0,className:"mt-1 ui-input"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Prix de vente"}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:p.prix_vente,onChange:H=>{const{valueAsNumber:W,value:T}=H.currentTarget,K=Number.isNaN(W)?Number(T.replace(",",".")):W;y(B=>({...B,prix_vente:Number.isNaN(K)?B.prix_vente:K}))},required:!0,className:"mt-1 ui-input"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Catégorie"}),a.jsx("select",{value:p.categoria_id,onChange:H=>y({...p,categoria_id:H.target.value}),required:!0,className:"mt-1 ui-select",children:f.map(H=>a.jsx("option",{value:H.id,children:H.nom},H.id))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Statut"}),a.jsxs("select",{value:p.estado,onChange:H=>y({...p,estado:H.target.value}),required:!0,className:"mt-1 ui-select",children:[a.jsx("option",{value:"disponible",children:"Disponible"}),a.jsx("option",{value:"agotado_temporal",children:"Rupture (Temp.)"}),a.jsx("option",{value:"agotado_indefinido",children:"Indisponible"})]})]}),a.jsxs("div",{className:"sm:col-span-2 flex items-center gap-2 pt-2",children:[a.jsx("input",{id:"best-seller-toggle",type:"checkbox",checked:p.is_best_seller,onChange:H=>D(H.target.checked),className:"h-4 w-4 rounded border-gray-300 text-brand-primary focus:ring-brand-primary"}),a.jsx("label",{htmlFor:"best-seller-toggle",className:"text-sm font-medium text-gray-700",children:"Best seller"})]}),a.jsxs("div",{className:"sm:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",htmlFor:"best-seller-rank",children:"Position dans le classement"}),a.jsxs("select",{id:"best-seller-rank",value:p.best_seller_rank??"",onChange:C,disabled:!p.is_best_seller,className:"mt-1 ui-select",children:[a.jsx("option",{value:"",children:"Sélectionner une position"}),Lh.map(H=>{const W=x.get(H),T=(W==null?void 0:W.id)===(c==null?void 0:c.id),K=!!(W&&!T),B=W?T?`${H} – Position actuelle`:`${H} – Occupé par ${W.nom_produit}`:`${H}`;return a.jsx("option",{value:H,disabled:K,children:B},H)})]}),p.is_best_seller&&p.best_seller_rank===null&&a.jsx("p",{className:"mt-1 text-xs text-red-600",children:"Sélectionnez une position disponible pour ce best seller."})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 bg-gray-50 border border-gray-200 rounded-lg p-4 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500",children:"Coût de revient"}),a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:fe(q)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500",children:"Marge"}),a.jsx("p",{className:`text-lg font-semibold ${X>=0?"text-emerald-600":"text-red-600"}`,children:fe(X)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500",children:"Marge %"}),a.jsxs("p",{className:`text-lg font-semibold ${A>=0?"text-emerald-600":"text-red-600"}`,children:[Number.isFinite(A)?hi(A):"0","%"]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),a.jsx("textarea",{rows:3,value:p.description,onChange:H=>y({...p,description:H.target.value}),className:"mt-1 ui-textarea",placeholder:"Courte description du produit..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Image du produit"}),a.jsxs("div",{className:"mt-1 flex items-center gap-4",children:[a.jsx("img",{src:v?URL.createObjectURL(v):Wh(p.image),alt:"Aperçu",className:"w-20 h-20 object-cover rounded-md bg-gray-100"}),a.jsxs("label",{htmlFor:"product-image-upload",className:"cursor-pointer bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-primary",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(jl,{size:16}),a.jsx("span",{children:"Changer l'image"})]}),a.jsx("input",{id:"product-image-upload",type:"file",className:"sr-only",onChange:H=>N(H.target.files?H.target.files[0]:null)})]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-md font-semibold text-gray-800 border-b pb-2 mb-2",children:"Recette"}),p.recipe.length===0&&a.jsx("div",{className:"text-center p-2 my-2 bg-red-50 border border-red-200 rounded-md",children:a.jsx("p",{className:"text-sm text-red-600",children:"Un produit doit contenir au moins un ingrédient."})}),a.jsx("div",{className:"space-y-2",children:p.recipe.map((H,W)=>{var T,K;return a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Wy,{className:"text-gray-400 cursor-move",size:16}),a.jsx("select",{value:H.ingredient_id,onChange:B=>F(W,"ingredient_id",B),className:"ui-select flex-grow",children:g.map(B=>a.jsx("option",{value:B.id,children:B.nom},B.id))}),a.jsx("input",{type:"number",placeholder:"Qté",value:H.qte_utilisee,onChange:B=>F(W,"qte_utilisee",B),className:"ui-input w-24"}),a.jsx("span",{className:"text-gray-500 text-sm w-12",children:((T=g.find(B=>B.id===H.ingredient_id))==null?void 0:T.unite)==="kg"?"g":(K=g.find(B=>B.id===H.ingredient_id))==null?void 0:K.unite}),a.jsx("button",{type:"button",onClick:()=>J(W),className:"p-1 text-red-500 hover:bg-red-100 rounded-full",children:a.jsx(wn,{size:16})})]},W)})}),a.jsx("button",{type:"button",onClick:te,className:"mt-2 text-sm text-blue-600 hover:underline",children:"Ajouter un ingrédient"})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t",children:[a.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto ui-btn-secondary py-3",children:"Annuler"}),a.jsx("button",{type:"submit",disabled:j||p.recipe.length===0,className:"w-full sm:w-auto ui-btn-primary py-3 disabled:opacity-60",children:j?"Sauvegarde...":"Sauvegarder"})]})]})})},bj=({isOpen:n,onClose:i,onSuccess:o,categories:c})=>{const[u,f]=h.useState(""),[g,x]=h.useState(""),p=async()=>{if(u.trim())try{await ye.addCategory(u),f(""),o()}catch(v){console.error(v)}},y=async v=>{x("");try{await ye.deleteCategory(v),o()}catch(N){x(N.message),console.error(N)}};return a.jsx(Tt,{isOpen:n,onClose:i,title:"Gérer les Catégories",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:u,onChange:v=>f(v.target.value),placeholder:"Nom de la nouvelle catégorie",className:"ui-input flex-grow"}),a.jsx("button",{onClick:p,className:"ui-btn-primary px-4",children:"Ajouter"})]}),g&&a.jsx("p",{className:"text-red-500 text-sm",children:g}),a.jsx("ul",{className:"space-y-2 max-h-60 overflow-y-auto",children:c.map(v=>a.jsxs("li",{className:"flex justify-between items-center bg-gray-50 p-2 rounded",children:[a.jsx("span",{className:"text-gray-800",children:v.nom}),a.jsx("button",{onClick:()=>y(v.id),className:"p-1 text-red-500 hover:bg-red-100 rounded-full",children:a.jsx(wn,{size:16})})]},v.id))}),a.jsx("div",{className:"pt-4 flex",children:a.jsx("button",{type:"button",onClick:i,className:"w-full ui-btn-secondary py-3",children:"Fermer"})})]})})},yj=({isOpen:n,onClose:i,onSuccess:o,product:c})=>{const[u,f]=h.useState(!1),g=async()=>{f(!0);try{await ye.deleteProduct(c.id),o(),i()}catch(x){console.error("Failed to delete product",x)}finally{f(!1)}};return a.jsxs(Tt,{isOpen:n,onClose:i,title:"Confirmer la Suppression",children:[a.jsxs("p",{className:"text-gray-700",children:["Êtes-vous sûr de vouloir supprimer le produit ",a.jsx("strong",{className:"text-gray-900",children:c.nom_produit})," ? Cette action est irréversible."]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-6",children:[a.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto ui-btn-secondary py-3",children:"Annuler"}),a.jsx("button",{onClick:g,disabled:u,className:"w-full sm:w-auto ui-btn-danger py-3",children:u?"Suppression...":"Supprimer"})]})]})},Gr=n=>n.visuals?{...n.visuals,banner_image:n.visuals.banner_image??n.visuals.banner_url}:null,vj=n=>{if(n.status!=="active")return!1;const i=new Date;return!(n.conditions.start_date&&new Date(n.conditions.start_date)>i||n.conditions.end_date&&new Date(n.conditions.end_date)<i||n.conditions.usage_limit&&n.usage_count>=n.conditions.usage_limit)},jj=n=>{const i=new Date;if(n.days_of_week&&!n.days_of_week.includes(i.getDay()))return!1;if(n.time_range){const[o,c]=n.time_range.start_time.split(":").map(Number),[u,f]=n.time_range.end_time.split(":").map(Number),g=i.getHours()*60+i.getMinutes(),x=o*60+c,p=u*60+f;if(g<x||g>p)return!1}return!0},_j=(n,i)=>{const o=n.subtotal||n.total;if(i.min_order_amount&&o<i.min_order_amount||i.max_order_amount&&o>i.max_order_amount)return!1;const c=n.items.reduce((u,f)=>u+f.quantite,0);return i.min_items_count&&c<i.min_items_count||i.max_items_count&&c>i.max_items_count||i.order_types&&!i.order_types.includes(n.type)?!1:(i.first_order_only,!0)},Yr=(n,i)=>{if(!vj(n)||!jj(n.conditions)||!_j(i,n.conditions))return!1;if(n.type==="buy_x_get_y"){const o=n.discount.buy_x_get_y_config;return!o||!o.product_ids?!1:i.items.filter(u=>o.product_ids.includes(u.produitRef)).reduce((u,f)=>u+f.quantite,0)>=2}return!0},Vr=(n,i)=>{let o=0;n.subtotal||n.total,i.applies_to==="total"?o=n.total:i.applies_to==="products"&&i.product_ids&&i.product_ids.length>0?o=n.items.filter(u=>{var f;return(f=i.product_ids)==null?void 0:f.includes(u.produitRef)}).reduce((u,f)=>u+f.prix_unitaire*f.quantite,0):i.applies_to==="categories"&&i.category_ids&&i.category_ids.length>0;let c=o*i.discount_value/100;return i.max_discount_amount&&(c=Math.min(c,i.max_discount_amount)),c},Qr=(n,i)=>i.discount_value,Nj=(n,i)=>{const o=i.buy_x_get_y_config;if(!o)return 0;let c=0;const u=n.items.reduce((f,g)=>(f[g.produitRef]||(f[g.produitRef]=[]),f[g.produitRef].push(g),f),{});for(const f in u){const g=u[f],x=g.reduce((p,y)=>p+y.quantite,0);if(o.product_ids&&o.product_ids.includes(f)&&x>=2){const p=Math.floor(x/2),y=[...g].sort((v,N)=>v.prix_unitaire-N.prix_unitaire);y.length>0&&(c+=y[0].prix_unitaire*p)}}return c},wj=n=>n.shipping_cost||0,Xr=(n,i)=>{switch(n.type){case"percentage":return Vr(i,n.discount);case"fixed_amount":return Qr(i,n.discount);case"promo_code":return n.discount.discount_type==="percentage"?Vr(i,n.discount):n.discount.discount_type==="fixed_amount"?Qr(i,n.discount):0;case"buy_x_get_y":return Nj(i,n.discount);case"free_shipping":return wj(i);case"threshold":return n.discount.discount_type==="percentage"?Vr(i,n.discount):n.discount.discount_type==="fixed_amount"?Qr(i,n.discount):0;case"happy_hour":return n.discount.discount_type==="percentage"?Vr(i,n.discount):n.discount.discount_type==="fixed_amount"?Qr(i,n.discount):0;default:return 0}},Sj=async n=>{const i={...n,applied_promotions:[],total_discount:0,subtotal:n.subtotal||n.total},{data:o,error:c}=await me.from("promotions").select("*").eq("status","active");if(c||!o)return console.error("Error fetching active promotions:",c),n;let u=i.subtotal;const f=o.filter(p=>p.type==="buy_x_get_y"&&Yr(p,i)).sort((p,y)=>y.priority-p.priority);for(const p of f){const y=Xr(p,i);if(y>0){const v=Math.min(y,u);u-=v,i.total_discount+=v,i.applied_promotions.push({promotion_id:p.id,name:p.name,discount_amount:v,config:p.discount.buy_x_get_y_config,visuals:Gr(p)}),i.total=u}}if(n.promo_code){const p=await Zg(n.promo_code);if(p&&Yr(p,i)){const y=Xr(p,i);if(y>0){const v=Math.min(y,u);u-=v,i.total_discount+=v,i.applied_promotions.push({promotion_id:p.id,name:p.name,discount_amount:v,config:{promo_code:p.discount.promo_code},visuals:Gr(p)}),i.total=u}}}const g=o.filter(p=>(p.type==="percentage"||p.type==="fixed_amount"||p.type==="threshold"||p.type==="happy_hour")&&Yr(p,i)).sort((p,y)=>y.priority-p.priority);for(const p of g){const y=Xr(p,i);if(y>0){const v=Math.min(y,u);u-=v,i.total_discount+=v,i.applied_promotions.push({promotion_id:p.id,name:p.name,discount_amount:v,visuals:Gr(p)}),i.total=u}}const x=o.find(p=>p.type==="free_shipping"&&Yr(p,i));if(x){const p=Xr(x,i);p>0&&i.applied_promotions.push({promotion_id:x.id,name:x.name,discount_amount:p,type:"FREE_SHIPPING",visuals:Gr(x)})}return i.total=u,i},Cj=async()=>{const{data:n,error:i}=await me.from("promotions").select("*").order("priority",{ascending:!1});if(i)throw console.error("Error fetching promotions:",i),new Error("Impossible de récupérer les promotions");return n||[]},Xg=async()=>{const{data:n,error:i}=await me.from("promotions").select("*").eq("status","active").order("priority",{ascending:!1});if(i)throw console.error("Error fetching active promotions:",i),new Error("Impossible de récupérer les promotions actives");return n||[]},kj=async n=>{const{data:i,error:o}=await me.from("promotions").insert([{...n,usage_count:0}]).select().single();if(o)throw console.error("Error creating promotion:",o),new Error("Impossible de créer la promotion");return i},Kg=async(n,i)=>{const{data:o,error:c}=await me.from("promotions").update(i).eq("id",n).select().single();if(c)throw console.error("Error updating promotion:",c),new Error("Impossible de mettre à jour la promotion");return o},Ej=async(n,i)=>Kg(n,{status:i}),Tj=async n=>{const{error:i}=await me.from("promotions").delete().eq("id",n);if(i)throw console.error("Error deleting promotion:",i),new Error("Impossible de supprimer la promotion")},Zg=async n=>{const{data:i,error:o}=await me.from("promotions").select("*").eq("type","promo_code").eq("status","active");return o?(console.error("Error fetching promotion by code:",o),null):(i==null?void 0:i.find(u=>{var f;return((f=u.discount)==null?void 0:f.promo_code)===n}))||null},Mj=async n=>{const{data:i,error:o}=await me.from("promotion_usages").select("*").eq("promotion_id",n).order("applied_at",{ascending:!1});return o?(console.error("Error fetching promotion usages:",o),[]):i||[]},Aj=[{value:"percentage",label:"Pourcentage"},{value:"fixed_amount",label:"Montant fixe"},{value:"promo_code",label:"Code promo"},{value:"buy_x_get_y",label:"2x1 / Achetez X, obtenez Y"},{value:"free_product",label:"Produit gratuit"},{value:"free_shipping",label:"Livraison gratuite"},{value:"combo",label:"Combo"},{value:"threshold",label:"Palier"},{value:"happy_hour",label:"Happy hour"}],zj=[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"scheduled",label:"Programmée"},{value:"expired",label:"Expirée"}],Bh=({isOpen:n,onClose:i,onSave:o,promotion:c})=>{var T,K;const[u,f]=h.useState(""),[g,x]=h.useState("percentage"),[p,y]=h.useState("active"),[v,N]=h.useState(0),[j,S]=h.useState({}),[w,D]=h.useState({type:"percentage",value:0,applies_to:"total"}),[C,L]=h.useState({}),[q,X]=h.useState(!1),[A,F]=h.useState(null),[te,J]=h.useState("general"),[Q,oe]=h.useState(!1);h.useEffect(()=>{c&&(f(c.name),x(c.type),y(c.status),N(c.priority),S(c.conditions),D(c.discount),L(c.visuals||{}))},[c]);const H=async B=>{if(B.preventDefault(),X(!0),F(null),g!=="free_shipping"&&(!w.value||w.value<=0)){F("La valeur de la réduction doit être supérieure à 0"),X(!1),J("discount");return}if(!u||u.trim()===""){F("Le nom de la promotion est obligatoire"),X(!1),J("general");return}try{c?await Kg(c.id,{name:u,type:g,status:p,priority:v,conditions:j,discount:w,visuals:C}):await kj({name:u,type:g,status:p,priority:v,conditions:j,discount:w,visuals:C}),o()}catch(le){F(le instanceof Error?le.message:"Une erreur est survenue")}finally{X(!1)}},W=async B=>{var _;const le=(_=B.target.files)==null?void 0:_[0];if(le){oe(!0);try{const E=await bl(le);L({...C,banner_image:ms(E)})}catch{F("Erreur lors du téléchargement de l'image")}finally{oe(!1)}}};return n?a.jsx("div",{className:"promotion-modal fixed inset-0 z-50 flex items-center justify-center bg-slate-950/80 px-4 py-6 text-black backdrop-blur-sm",children:a.jsxs("div",{className:"promotion-modal__content flex w-full max-w-5xl flex-col overflow-hidden rounded-2xl border border-slate-200 bg-white text-black shadow-2xl",children:[a.jsxs("div",{className:"flex flex-col gap-3 border-b border-slate-200 bg-white px-6 py-5 text-black sm:flex-row sm:items-center sm:justify-between",children:[a.jsx("h2",{className:"text-xl font-semibold leading-snug sm:text-2xl",children:c?"Modifier la promotion":"Nouvelle promotion"}),a.jsx("button",{onClick:i,className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-transparent text-black transition hover:bg-slate-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-brand-primary","aria-label":"Fermer la fenêtre de promotion",children:a.jsx(us,{size:22})})]}),A&&a.jsx("div",{className:"mx-6 mt-4 rounded-xl border border-red-200 bg-red-50/90 px-4 py-3 text-sm font-medium text-black shadow-sm",children:A}),a.jsxs("div",{className:"flex flex-wrap gap-2 border-b border-slate-200 bg-slate-50/80 px-4 py-3 sm:px-6",children:[a.jsx("button",{className:`rounded-full px-4 py-2 text-sm font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary ${te==="general"?"border border-brand-primary bg-brand-primary/10 text-black shadow":"border border-transparent text-black hover:bg-slate-100"}`,onClick:()=>J("general"),children:"Général"}),a.jsx("button",{className:`rounded-full px-4 py-2 text-sm font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary ${te==="conditions"?"border border-brand-primary bg-brand-primary/10 text-black shadow":"border border-transparent text-black hover:bg-slate-100"}`,onClick:()=>J("conditions"),children:"Conditions"}),a.jsx("button",{className:`rounded-full px-4 py-2 text-sm font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary ${te==="discount"?"border border-brand-primary bg-brand-primary/10 text-black shadow":"border border-transparent text-black hover:bg-slate-100"}`,onClick:()=>J("discount"),children:"Réduction"}),a.jsx("button",{className:`rounded-full px-4 py-2 text-sm font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary ${te==="visuals"?"border border-brand-primary bg-brand-primary/10 text-black shadow":"border border-transparent text-black hover:bg-slate-100"}`,onClick:()=>J("visuals"),children:"Affichage"})]}),a.jsxs("form",{onSubmit:H,className:"flex-1 overflow-y-auto bg-white px-4 py-6 text-black sm:px-6",children:[te==="general"&&a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"space-y-4 rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"name",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Nom de la promotion"}),a.jsx("input",{type:"text",id:"name",value:u,onChange:B=>f(B.target.value),className:"ui-input mt-2",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"type",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Type de promotion"}),a.jsx("select",{id:"type",value:g,onChange:B=>x(B.target.value),className:"ui-input mt-2",required:!0,children:Aj.map(B=>a.jsx("option",{value:B.value,children:B.label},B.value))})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"status",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Statut"}),a.jsx("select",{id:"status",value:p,onChange:B=>y(B.target.value),className:"ui-input mt-2",required:!0,children:zj.map(B=>a.jsx("option",{value:B.value,children:B.label},B.value))})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"priority",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Priorité"}),a.jsx("input",{type:"number",id:"priority",value:v,onChange:B=>N(parseInt(B.target.value)||0),className:"ui-input mt-2",min:"0",max:"100"}),a.jsx("p",{className:"mt-2 text-xs text-black",children:"Plus la valeur est élevée, plus la promotion est prioritaire."})]})]})}),te==="conditions"&&a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"space-y-6 rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[g==="promo_code"&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"promo_code",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Code promo"}),a.jsx("input",{type:"text",id:"promo_code",value:j.promo_code||"",onChange:B=>S({...j,promo_code:B.target.value}),className:"ui-input mt-2",required:g==="promo_code"})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"min_order_amount",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Montant minimum de commande"}),a.jsx("input",{type:"number",id:"min_order_amount",value:j.min_order_amount||"",onChange:B=>S({...j,min_order_amount:parseFloat(B.target.value)||void 0}),className:"ui-input mt-2",min:"0",step:"0.01"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"max_order_amount",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Montant maximum de commande"}),a.jsx("input",{type:"number",id:"max_order_amount",value:j.max_order_amount||"",onChange:B=>S({...j,max_order_amount:parseFloat(B.target.value)||void 0}),className:"ui-input mt-2",min:"0",step:"0.01"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"start_date",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Date de début"}),a.jsx("input",{type:"datetime-local",id:"start_date",value:j.start_date?new Date(j.start_date).toISOString().slice(0,16):"",onChange:B=>S({...j,start_date:B.target.value?new Date(B.target.value).toISOString():void 0}),className:"ui-input mt-2"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"end_date",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Date de fin"}),a.jsx("input",{type:"datetime-local",id:"end_date",value:j.end_date?new Date(j.end_date).toISOString().slice(0,16):"",onChange:B=>S({...j,end_date:B.target.value?new Date(B.target.value).toISOString():void 0}),className:"ui-input mt-2"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Jours de la semaine"}),a.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"].map((B,le)=>{var _;return a.jsxs("label",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white/80 px-3 py-1 text-sm text-black shadow-sm",children:[a.jsx("input",{type:"checkbox",checked:((_=j.days_of_week)==null?void 0:_.includes(le))||!1,onChange:E=>{const z=j.days_of_week||[];E.target.checked?S({...j,days_of_week:[...z,le]}):S({...j,days_of_week:z.filter(Z=>Z!==le)})},className:"h-4 w-4 rounded border-slate-300 text-black focus:ring-black"}),a.jsx("span",{children:B})]},le)})})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"hours_start",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Heure de début"}),a.jsx("input",{type:"time",id:"hours_start",value:((T=j.hours_of_day)==null?void 0:T.start)||"",onChange:B=>S({...j,hours_of_day:{...j.hours_of_day||{},start:B.target.value}}),className:"ui-input mt-2"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"hours_end",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Heure de fin"}),a.jsx("input",{type:"time",id:"hours_end",value:((K=j.hours_of_day)==null?void 0:K.end)||"",onChange:B=>S({...j,hours_of_day:{...j.hours_of_day||{},end:B.target.value}}),className:"ui-input mt-2"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"max_uses",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Nombre maximum d'utilisations"}),a.jsx("input",{type:"number",id:"max_uses",value:j.max_uses_total||"",onChange:B=>S({...j,max_uses_total:parseInt(B.target.value)||void 0}),className:"ui-input mt-2",min:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"max_uses_per_customer",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Maximum par client"}),a.jsx("input",{type:"number",id:"max_uses_per_customer",value:j.max_uses_per_customer||"",onChange:B=>S({...j,max_uses_per_customer:parseInt(B.target.value)||void 0}),className:"ui-input mt-2",min:"0"})]})]}),g==="buy_x_get_y"&&a.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"buy_quantity",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Quantité à acheter"}),a.jsx("input",{type:"number",id:"buy_quantity",value:j.buy_quantity||"",onChange:B=>S({...j,buy_quantity:parseInt(B.target.value)||void 0}),className:"ui-input mt-2",min:"1",required:g==="buy_x_get_y"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"get_quantity",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Quantité offerte"}),a.jsx("input",{type:"number",id:"get_quantity",value:j.get_quantity||"",onChange:B=>S({...j,get_quantity:parseInt(B.target.value)||void 0}),className:"ui-input mt-2",min:"1",required:g==="buy_x_get_y"})]})]}),a.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-slate-200 bg-white/80 px-4 py-3 shadow-sm",children:[a.jsx("input",{type:"checkbox",id:"first_order_only",checked:j.first_order_only||!1,onChange:B=>S({...j,first_order_only:B.target.checked}),className:"h-4 w-4 rounded border-slate-300 text-black focus:ring-black"}),a.jsx("label",{htmlFor:"first_order_only",className:"text-sm font-medium text-black",children:"Uniquement pour la première commande"})]})]})}),te==="discount"&&a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"space-y-6 rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[a.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"discount_type",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Type de réduction"}),a.jsxs("select",{id:"discount_type",value:w.type,onChange:B=>D({...w,type:B.target.value}),className:"ui-input mt-2",required:!0,children:[a.jsx("option",{value:"percentage",children:"Pourcentage"}),a.jsx("option",{value:"fixed_amount",children:"Montant fixe"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"discount_value",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Valeur de la réduction"}),a.jsxs("div",{className:"relative mt-2",children:[a.jsx("input",{type:"number",id:"discount_value",value:w.value,onChange:B=>D({...w,value:parseFloat(B.target.value)||0}),className:"ui-input pr-10",min:"0",step:(w.type==="percentage","0.01"),required:!0}),a.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-3 flex items-center text-sm font-semibold text-black",children:w.type==="percentage"?"%":"€"})]})]})]}),w.type==="percentage"&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"max_discount_amount",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Montant maximum de la réduction"}),a.jsxs("div",{className:"relative mt-2",children:[a.jsx("input",{type:"number",id:"max_discount_amount",value:w.max_discount_amount||"",onChange:B=>D({...w,max_discount_amount:parseFloat(B.target.value)||void 0}),className:"ui-input pr-10",min:"0",step:"0.01"}),a.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-3 flex items-center text-sm font-semibold text-black",children:"€"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"applies_to",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Application de la réduction"}),a.jsxs("select",{id:"applies_to",value:w.applies_to,onChange:B=>D({...w,applies_to:B.target.value}),className:"ui-input mt-2",required:!0,children:[a.jsx("option",{value:"total",children:"Total de la commande"}),a.jsx("option",{value:"products",children:"Produits spécifiques"}),a.jsx("option",{value:"shipping",children:"Frais de livraison"})]})]})]})}),te==="visuals"&&a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"space-y-6 rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[a.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"badge_text",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Texte du badge"}),a.jsx("input",{type:"text",id:"badge_text",value:C.badge_text||"",onChange:B=>L({...C,badge_text:B.target.value}),className:"ui-input mt-2",placeholder:"Ex: 2x1, -20%, etc."})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"badge_color",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Couleur du texte du badge"}),a.jsx("input",{type:"color",id:"badge_color",value:C.badge_color||"#FFFFFF",onChange:B=>L({...C,badge_color:B.target.value}),className:"mt-2 h-12 w-full rounded-lg border border-slate-200 bg-white"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"badge_bg_color",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Couleur de fond du badge"}),a.jsx("input",{type:"color",id:"badge_bg_color",value:C.badge_bg_color||"#F9A826",onChange:B=>L({...C,badge_bg_color:B.target.value}),className:"mt-2 h-12 w-full rounded-lg border border-slate-200 bg-white"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"badge_bg_image",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Image de fond du badge (optionnel)"}),a.jsx("p",{className:"mt-1 text-xs text-black",children:"Si vous uploadez une image, elle remplacera la couleur de fond du badge"}),a.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-4",children:[a.jsxs("label",{className:"inline-flex items-center justify-center gap-2 rounded-full border border-slate-200 bg-white px-5 py-2 text-sm font-semibold text-black shadow-sm transition hover:bg-slate-100",children:[a.jsx("input",{type:"file",id:"badge_bg_image",onChange:async B=>{var _;const le=(_=B.target.files)==null?void 0:_[0];if(le){oe(!0);try{const E=await bl(le,{tags:["badge-background"]});L({...C,badge_bg_image:ms(E)})}catch{F("Erreur lors du téléchargement de l'image du badge")}finally{oe(!1)}}},className:"sr-only",accept:"image/*"}),a.jsx("span",{children:Q?"Téléchargement...":"Choisir une image"})]}),C.badge_bg_image&&a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:C.badge_bg_image,alt:"Aperçu de l'image de fond du badge",className:"h-16 w-auto rounded-lg object-cover shadow-sm"}),a.jsx("button",{type:"button",onClick:()=>L({...C,badge_bg_image:void 0}),className:"absolute -top-2 -right-2 inline-flex h-7 w-7 items-center justify-center rounded-full border border-red-500 bg-white text-black shadow hover:bg-red-100",children:a.jsx(us,{size:12})})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"banner_text",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Texte de la bannière"}),a.jsx("input",{type:"text",id:"banner_text",value:C.banner_text||"",onChange:B=>L({...C,banner_text:B.target.value}),className:"ui-input mt-2",placeholder:"Ex: Offre spéciale : 20% de réduction sur tous les tacos !"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"banner_image",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Image de la bannière"}),a.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-4",children:[a.jsxs("label",{className:"inline-flex items-center justify-center gap-2 rounded-full border border-slate-200 bg-white px-5 py-2 text-sm font-semibold text-black shadow-sm transition hover:bg-slate-100",children:[a.jsx("input",{type:"file",id:"banner_image",onChange:W,className:"sr-only",accept:"image/*"}),a.jsx("span",{children:Q?"Téléchargement...":"Choisir une image"})]}),C.banner_image&&a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:C.banner_image,alt:"Aperçu de la bannière",className:"h-20 w-auto rounded-lg object-cover shadow-sm"}),a.jsx("button",{type:"button",onClick:()=>L({...C,banner_image:void 0}),className:"absolute -top-2 -right-2 inline-flex h-7 w-7 items-center justify-center rounded-full border border-red-500 bg-white text-black shadow hover:bg-red-100",children:a.jsx(us,{size:12})})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"banner_cta",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Texte du bouton d'appel à l'action"}),a.jsx("input",{type:"text",id:"banner_cta",value:C.banner_cta||"",onChange:B=>L({...C,banner_cta:B.target.value}),className:"ui-input mt-2",placeholder:"Ex: En profiter maintenant"})]})]})})]}),a.jsxs("div",{className:"flex flex-col gap-3 border-t border-slate-200 bg-slate-50/80 p-6 sm:flex-row sm:items-center sm:justify-end",children:[a.jsx("button",{type:"button",onClick:i,className:"inline-flex items-center justify-center rounded-full border border-slate-300 px-5 py-2.5 text-sm font-semibold text-black transition hover:bg-slate-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary",disabled:q,children:"Annuler"}),a.jsx("button",{type:"submit",onClick:H,className:"inline-flex items-center justify-center gap-2 rounded-full border border-brand-primary bg-white px-5 py-2.5 text-sm font-semibold text-black shadow transition hover:bg-brand-primary/10 focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary",disabled:q,children:q?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-black border-t-transparent"}),a.jsx("span",{children:"Enregistrement..."})]}):a.jsx("span",{children:"Enregistrer"})})]})]})}):null},Bd=(n,i,o)=>Math.min(Math.max(n,i),o),Oj=n=>{const i=n.replace("#","").trim();if(i.length===3){const o=parseInt(i[0]+i[0],16),c=parseInt(i[1]+i[1],16),u=parseInt(i[2]+i[2],16);return[o,c,u]}if(i.length===4){const o=parseInt(i[0]+i[0],16),c=parseInt(i[1]+i[1],16),u=parseInt(i[2]+i[2],16);return[o,c,u]}if(i.length===6||i.length===8){const o=parseInt(i.slice(0,2),16),c=parseInt(i.slice(2,4),16),u=parseInt(i.slice(4,6),16);return[o,c,u]}return null},Dj=n=>{const i=n.match(/rgba?\(([^)]+)\)/i);if(!i)return null;const[o,c,u]=i[1].split(",").slice(0,3).map(f=>Bd(parseFloat(f.trim()),0,255));return[o,c,u].some(f=>Number.isNaN(f))?null:[o,c,u]},Rj=(n,i,o)=>{const c=(n%360+360)%360,u=Bd(i,0,1),f=Bd(o,0,1);if(u===0){const S=Math.round(f*255);return[S,S,S]}const g=(1-Math.abs(2*f-1))*u,x=g*(1-Math.abs(c/60%2-1)),p=f-g/2;let y=0,v=0,N=0;c<60?(y=g,v=x):c<120?(y=x,v=g):c<180?(v=g,N=x):c<240?(v=x,N=g):c<300?(y=x,N=g):(y=g,N=x);const j=S=>Math.round((S+p)*255);return[j(y),j(v),j(N)]},Uj=n=>{const i=n.match(/hsla?\(([^)]+)\)/i);if(!i)return null;const[o,c,u]=i[1].split(",").slice(0,3).map(p=>p.trim()),f=parseFloat(o),g=parseFloat(c.replace("%",""))/100,x=parseFloat(u.replace("%",""))/100;return[f,g,x].some(p=>Number.isNaN(p))?null:Rj(f,g,x)},Lj=n=>{if(!n)return null;const i=n.trim();return i?i.startsWith("#")?Oj(i):i.toLowerCase().startsWith("rgb")?Dj(i):i.toLowerCase().startsWith("hsl")?Uj(i):null:null},qj=n=>{const i=Lj(n);if(!i)return null;const[o,c,u]=i.map(g=>g/255),f=[o,c,u].map(g=>g<=.03928?g/12.92:Math.pow((g+.055)/1.055,2.4));return .2126*f[0]+.7152*f[1]+.0722*f[2]},Bj=(n,i=.55)=>{const o=qj(n);return o===null?!1:o<i},Pg=(n,{lightColor:i="#FFFFFF",darkColor:o="#000000",threshold:c=.55}={})=>Bj(n,c)?i:o,Ij={percentage:"Pourcentage",fixed_amount:"Montant fixe",promo_code:"Code promo",buy_x_get_y:"2x1 / Achetez X, obtenez Y",free_product:"Produit gratuit",free_shipping:"Livraison gratuite",combo:"Combo",threshold:"Palier",happy_hour:"Happy hour"},Hj={active:"Active",inactive:"Inactive",scheduled:"Programmée",expired:"Expirée"},Fj={active:"bg-green-100 text-black",inactive:"bg-gray-100 text-black",scheduled:"bg-blue-100 text-black",expired:"bg-red-100 text-black"},$j=({isOpen:n,onClose:i,promotion:o})=>{var D;const[c,u]=h.useState([]),[f,g]=h.useState(!1),[x,p]=h.useState(null),[y,v]=h.useState("details");h.useEffect(()=>{n&&o&&N()},[n,o]);const N=async()=>{g(!0),p(null);try{const C=await Mj(o.id);u(C)}catch(C){p("Erreur lors du chargement des utilisations"),console.error(C)}finally{g(!1)}},j=C=>{const L=new Date(C);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(L)},S=((D=o.visuals)==null?void 0:D.badge_bg_color)||"#F9A826",w=Pg(S);return n?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-950/80 px-4 py-6 backdrop-blur-sm",children:a.jsxs("div",{className:"flex w-full max-w-5xl flex-col overflow-hidden rounded-2xl border border-slate-200 bg-white text-black shadow-2xl",children:[a.jsxs("div",{className:"flex flex-col gap-3 border-b border-slate-200 bg-white px-6 py-5 text-black sm:flex-row sm:items-center sm:justify-between",children:[a.jsx("h2",{className:"text-xl font-semibold leading-snug sm:text-2xl",children:"Détails de la promotion"}),a.jsx("button",{onClick:i,className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-transparent text-black transition hover:bg-slate-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-brand-primary","aria-label":"Fermer les détails de la promotion",children:a.jsx(us,{size:22})})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 border-b border-slate-200 bg-slate-50/80 px-4 py-3 sm:px-6",children:[a.jsx("button",{className:`rounded-full px-4 py-2 text-sm font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary ${y==="details"?"border border-brand-primary bg-brand-primary/10 text-black shadow":"border border-transparent text-black hover:bg-slate-100"}`,onClick:()=>v("details"),children:"Détails"}),a.jsxs("button",{className:`rounded-full px-4 py-2 text-sm font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary ${y==="usages"?"border border-brand-primary bg-brand-primary/10 text-black shadow":"border border-transparent text-black hover:bg-slate-100"}`,onClick:()=>v("usages"),children:["Utilisations (",o.usage_count,")"]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto bg-white px-4 py-6 sm:px-6",children:[y==="details"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:a.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-black",children:o.name}),a.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold ${Fj[o.status]}`,children:Hj[o.status]}),a.jsx("span",{className:"text-sm font-medium text-black",children:Ij[o.type]})]})]}),a.jsxs("div",{className:"rounded-full border border-slate-200 bg-white/80 px-4 py-1.5 text-sm font-semibold text-black shadow-sm",children:["Priorité : ",o.priority]})]})}),a.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[a.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[a.jsxs("h4",{className:"mb-3 flex items-center gap-2 text-sm font-semibold uppercase tracking-wide text-black",children:[a.jsx(sv,{size:16}),"Informations générales"]}),a.jsxs("dl",{className:"space-y-2 text-sm text-black",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"ID"}),a.jsx("dd",{className:"rounded bg-white/80 px-2 py-0.5 font-mono text-black shadow-sm",children:o.id})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Créée le"}),a.jsx("dd",{children:j(o.created_at)})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Mise à jour"}),a.jsx("dd",{children:j(o.updated_at)})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Utilisations"}),a.jsx("dd",{children:o.usage_count})]})]})]}),a.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[a.jsxs("h4",{className:"mb-3 flex items-center gap-2 text-sm font-semibold uppercase tracking-wide text-black",children:[a.jsx(vl,{size:16}),"Réduction"]}),a.jsxs("dl",{className:"space-y-2 text-sm text-black",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Type"}),a.jsx("dd",{children:o.discount.type==="percentage"?"Pourcentage":"Montant fixe"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Valeur"}),a.jsxs("dd",{className:"font-semibold text-black",children:[o.discount.value,o.discount.type==="percentage"?"%":"€"]})]}),o.discount.max_discount_amount&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Maximum"}),a.jsxs("dd",{children:[o.discount.max_discount_amount,"€"]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Application"}),a.jsxs("dd",{children:[o.discount.applies_to==="total"&&"Total de la commande",o.discount.applies_to==="products"&&"Produits spécifiques",o.discount.applies_to==="shipping"&&"Frais de livraison"]})]})]})]})]}),a.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[a.jsxs("h4",{className:"mb-3 flex items-center gap-2 text-sm font-semibold uppercase tracking-wide text-black",children:[a.jsx(fy,{size:16}),"Conditions"]}),a.jsxs("dl",{className:"grid grid-cols-1 gap-3 text-sm text-black md:grid-cols-2",children:[o.conditions.promo_code&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Code promo"}),a.jsx("dd",{className:"rounded bg-white/80 px-2 py-0.5 font-mono text-black shadow-sm",children:o.conditions.promo_code})]}),o.conditions.min_order_amount&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Montant minimum"}),a.jsxs("dd",{children:[o.conditions.min_order_amount,"€"]})]}),o.conditions.max_order_amount&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Montant maximum"}),a.jsxs("dd",{children:[o.conditions.max_order_amount,"€"]})]}),o.conditions.start_date&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Date de début"}),a.jsx("dd",{children:j(o.conditions.start_date)})]}),o.conditions.end_date&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Date de fin"}),a.jsx("dd",{children:j(o.conditions.end_date)})]}),o.conditions.days_of_week&&o.conditions.days_of_week.length>0&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Jours"}),a.jsx("dd",{children:o.conditions.days_of_week.map(C=>["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"][C]).join(", ")})]}),o.conditions.hours_of_day&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Heures"}),a.jsxs("dd",{children:[o.conditions.hours_of_day.start," - ",o.conditions.hours_of_day.end]})]}),o.conditions.max_uses_total&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Utilisations max."}),a.jsx("dd",{children:o.conditions.max_uses_total})]}),o.conditions.max_uses_per_customer&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Max par client"}),a.jsx("dd",{children:o.conditions.max_uses_per_customer})]}),o.conditions.first_order_only&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Première commande"}),a.jsx("dd",{children:"Oui"})]}),o.type==="buy_x_get_y"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Achetez"}),a.jsx("dd",{children:o.conditions.buy_quantity})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("dt",{className:"font-medium",children:"Obtenez"}),a.jsx("dd",{children:o.conditions.get_quantity})]})]})]})]}),o.visuals&&Object.keys(o.visuals).length>0&&a.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[a.jsxs("h4",{className:"mb-3 flex items-center gap-2 text-sm font-semibold uppercase tracking-wide text-black",children:[a.jsx(_i,{size:16}),"Éléments visuels"]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 text-sm text-black md:grid-cols-2",children:[o.visuals.badge_text&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-medium",children:"Badge"}),a.jsx("span",{className:"rounded-full px-3 py-1 text-xs font-semibold",style:{backgroundColor:S,color:w},children:o.visuals.badge_text})]}),o.visuals.banner_text&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-medium",children:"Texte bannière"}),a.jsx("span",{className:"text-right text-black",children:o.visuals.banner_text})]}),o.visuals.banner_cta&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-medium",children:"Bouton"}),a.jsx("span",{className:"text-right text-black",children:o.visuals.banner_cta})]})]}),o.visuals.banner_image&&a.jsxs("div",{className:"mt-4",children:[a.jsx("span",{className:"mb-2 block text-xs font-semibold uppercase tracking-wide text-black",children:"Image de bannière"}),a.jsx("img",{src:o.visuals.banner_image,alt:"Bannière promotionnelle",className:"w-full max-h-40 rounded-xl object-cover shadow-sm"})]})]})]}),y==="usages"&&a.jsxs("div",{className:"space-y-4",children:[x&&a.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50/90 px-4 py-3 text-sm font-medium text-black shadow-sm",children:x}),f?a.jsxs("div",{className:"flex items-center justify-center gap-3 rounded-2xl border border-slate-200 bg-slate-50/80 py-10 text-black shadow-sm",children:[a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-b-2 border-brand-primary"}),a.jsx("span",{children:"Chargement…"})]}):c.length===0?a.jsx("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/80 py-10 text-center text-sm font-medium text-black shadow-sm",children:"Aucune utilisation enregistrée pour cette promotion"}):a.jsx("div",{className:"overflow-hidden rounded-2xl border border-slate-200 shadow-sm",children:a.jsxs("table",{className:"w-full divide-y divide-slate-200 text-sm text-black",children:[a.jsx("thead",{className:"bg-slate-50/90 text-xs font-semibold uppercase tracking-wide text-black",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left",children:"Date"}),a.jsx("th",{className:"px-4 py-3 text-left",children:"Commande"}),a.jsx("th",{className:"px-4 py-3 text-left",children:"Client"}),a.jsx("th",{className:"px-4 py-3 text-right",children:"Montant"})]})}),a.jsx("tbody",{className:"divide-y divide-slate-100",children:c.map(C=>a.jsxs("tr",{className:"bg-white/80 transition hover:bg-brand-accent-soft",children:[a.jsx("td",{className:"px-4 py-3 font-medium text-black",children:j(C.applied_at)}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs("a",{href:"#",className:"inline-flex items-center gap-2 text-black transition hover:underline",onClick:L=>{L.preventDefault()},children:[C.order_id.substring(0,8),"...",a.jsx(Gy,{size:14})]})}),a.jsx("td",{className:"px-4 py-3",children:C.customer_phone||"—"}),a.jsxs("td",{className:"px-4 py-3 text-right font-semibold text-black",children:[C.discount_amount.toFixed(2),"€"]})]},C.id))})]})})]})]}),a.jsx("div",{className:"flex justify-end border-t border-slate-200 bg-slate-50/80 p-6",children:a.jsx("button",{type:"button",onClick:i,className:"inline-flex items-center justify-center rounded-full border border-slate-300 px-5 py-2.5 text-sm font-semibold text-black transition hover:bg-slate-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary",children:"Fermer"})})]})}):null},Gj=({isOpen:n,onClose:i,onConfirm:o,title:c,message:u,confirmLabel:f="Confirmer",cancelLabel:g="Annuler",confirmButtonClass:x="bg-brand-primary hover:bg-brand-primary-dark"})=>n?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md overflow-hidden",children:[a.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[a.jsx("h2",{className:"text-xl font-semibold",children:c}),a.jsx("button",{onClick:i,className:"text-gray-500 hover:text-gray-700",children:a.jsx(us,{size:24})})]}),a.jsx("div",{className:"p-6",children:a.jsx("p",{className:"text-gray-700",children:u})}),a.jsxs("div",{className:"flex justify-end items-center gap-3 p-6 border-t",children:[a.jsx("button",{type:"button",onClick:i,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:g}),a.jsx("button",{type:"button",onClick:o,className:`px-4 py-2 text-white rounded-md ${x}`,children:f})]})]})}):null,Yj={active:"Active",inactive:"Inactive",scheduled:"Programmée",expired:"Expirée"},Vj={active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",scheduled:"bg-blue-100 text-blue-800",expired:"bg-red-100 text-red-800"},Qj={percentage:"Pourcentage",fixed_amount:"Montant fixe",promo_code:"Code promo",buy_x_get_y:"2x1 / Achetez X, obtenez Y",free_product:"Produit gratuit",free_shipping:"Livraison gratuite",combo:"Combo",threshold:"Palier",happy_hour:"Happy hour"},Xj={percentage:a.jsx(vl,{size:16}),fixed_amount:a.jsx(_i,{size:16}),promo_code:a.jsx(_i,{size:16}),buy_x_get_y:a.jsx(Ys,{size:16}),free_product:a.jsx(Ys,{size:16}),free_shipping:a.jsx(Ys,{size:16}),combo:a.jsx(Ys,{size:16}),threshold:a.jsx(rg,{size:16}),happy_hour:a.jsx(fs,{size:16})},Kj=()=>{const[n,i]=h.useState([]),[o,c]=h.useState(!0),[u,f]=h.useState(null),[g,x]=h.useState(!1),[p,y]=h.useState(!1),[v,N]=h.useState(!1),[j,S]=h.useState(!1),[w,D]=h.useState(null),[C,L]=h.useState(""),[q,X]=h.useState("all"),[A,F]=h.useState("all"),[te,J]=h.useState("priority"),[Q,oe]=h.useState("desc"),H=async()=>{c(!0),f(null);try{const R=await Cj();i(R)}catch(R){f("Erreur lors du chargement des promotions"),console.error(R)}finally{c(!1)}};h.useEffect(()=>{H()},[]);const W=()=>{D(null),x(!0)},T=R=>{D(R),y(!0)},K=R=>{D(R),N(!0)},B=R=>{D(R),S(!0)},le=async R=>{try{const I=R.active?"inactive":"active",M=await Ej(R.id,I);i(n.map(re=>re.id===R.id?M:re))}catch(I){f("Erreur lors de la mise à jour du statut"),console.error(I)}},_=async()=>{if(w)try{await Tj(w.id),i(n.filter(R=>R.id!==w.id)),S(!1)}catch(R){f("Erreur lors de la suppression de la promotion"),console.error(R)}},E=R=>{te===R?oe(Q==="asc"?"desc":"asc"):(J(R),oe("desc"))},z=n.filter(R=>{const I=R.name.toLowerCase().includes(C.toLowerCase()),M=q==="all"||R.status===q,re=A==="all"||R.type===A;return I&&M&&re}).sort((R,I)=>{let M=0;switch(te){case"name":M=R.name.localeCompare(I.name);break;case"priority":M=R.priority-I.priority;break;case"created_at":M=new Date(R.created_at).getTime()-new Date(I.created_at).getTime();break;case"usage_count":M=R.usage_count-I.usage_count;break}return Q==="asc"?M:-M}),Z=R=>te!==R?null:Q==="asc"?a.jsx(rg,{size:16}):a.jsx(ig,{size:16}),$=R=>{const I=new Date(R);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(I)};return a.jsxs("div",{className:"promotions-page p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Gestion des promotions"}),a.jsxs("button",{onClick:W,className:"bg-brand-primary hover:bg-brand-primary-dark text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[a.jsx(Ni,{size:20}),"Nouvelle promotion"]})]}),u&&a.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:u}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",placeholder:"Rechercher une promotion...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg",value:C,onChange:R=>L(R.target.value)}),a.jsx(Vd,{className:"absolute left-3 top-2.5 text-gray-400",size:20})]})}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("select",{className:"border border-gray-300 rounded-lg px-3 py-2",value:q,onChange:R=>X(R.target.value),children:[a.jsx("option",{value:"all",children:"Tous les statuts"}),a.jsx("option",{value:"active",children:"Actives"}),a.jsx("option",{value:"inactive",children:"Inactives"}),a.jsx("option",{value:"scheduled",children:"Programmées"}),a.jsx("option",{value:"expired",children:"Expirées"})]}),a.jsxs("select",{className:"border border-gray-300 rounded-lg px-3 py-2",value:A,onChange:R=>F(R.target.value),children:[a.jsx("option",{value:"all",children:"Tous les types"}),a.jsx("option",{value:"percentage",children:"Pourcentage"}),a.jsx("option",{value:"fixed_amount",children:"Montant fixe"}),a.jsx("option",{value:"promo_code",children:"Code promo"}),a.jsx("option",{value:"buy_x_get_y",children:"2x1 / Achetez X, obtenez Y"}),a.jsx("option",{value:"free_product",children:"Produit gratuit"}),a.jsx("option",{value:"free_shipping",children:"Livraison gratuite"}),a.jsx("option",{value:"combo",children:"Combo"}),a.jsx("option",{value:"threshold",children:"Palier"}),a.jsx("option",{value:"happy_hour",children:"Happy hour"})]}),a.jsxs("button",{onClick:H,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-2 rounded-lg flex items-center gap-2",children:[a.jsx(Lv,{size:18}),a.jsx("span",{className:"hidden md:inline",children:"Actualiser"})]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-50 border-b",children:[a.jsx("th",{className:"px-4 py-3 text-left",children:a.jsxs("button",{className:"flex items-center gap-1 font-semibold text-gray-700",onClick:()=>E("name"),children:["Nom ",Z("name")]})}),a.jsx("th",{className:"px-4 py-3 text-left",children:"Type"}),a.jsx("th",{className:"px-4 py-3 text-left",children:"Statut"}),a.jsx("th",{className:"px-4 py-3 text-left",children:a.jsxs("button",{className:"flex items-center gap-1 font-semibold text-gray-700",onClick:()=>E("priority"),children:["Priorité ",Z("priority")]})}),a.jsx("th",{className:"px-4 py-3 text-left",children:a.jsxs("button",{className:"flex items-center gap-1 font-semibold text-gray-700",onClick:()=>E("created_at"),children:["Créée le ",Z("created_at")]})}),a.jsx("th",{className:"px-4 py-3 text-left",children:a.jsxs("button",{className:"flex items-center gap-1 font-semibold text-gray-700",onClick:()=>E("usage_count"),children:["Utilisations ",Z("usage_count")]})}),a.jsx("th",{className:"px-4 py-3 text-right",children:"Actions"})]})}),a.jsx("tbody",{children:o?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"px-4 py-8 text-center",children:a.jsxs("div",{className:"flex justify-center items-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-primary"}),a.jsx("span",{className:"ml-2",children:"Chargement..."})]})})}):z.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-gray-500",children:"Aucune promotion trouvée"})}):z.map(R=>a.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[a.jsxs("td",{className:"px-4 py-4",children:[a.jsx("div",{className:"font-medium",children:R.name}),R.type==="promo_code"&&R.conditions.promo_code&&a.jsxs("div",{className:"text-sm text-gray-500",children:["Code: ",a.jsx("span",{className:"font-mono bg-gray-100 px-1 rounded",children:R.conditions.promo_code})]})]}),a.jsx("td",{className:"px-4 py-4",children:a.jsxs("div",{className:"flex items-center gap-1.5",children:[Xj[R.type],a.jsx("span",{children:Qj[R.type]})]})}),a.jsx("td",{className:"px-4 py-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Vj[R.status]}`,children:Yj[R.status]})}),a.jsx("td",{className:"px-4 py-4",children:R.priority}),a.jsx("td",{className:"px-4 py-4",children:$(R.created_at)}),a.jsx("td",{className:"px-4 py-4",children:R.usage_count}),a.jsx("td",{className:"px-4 py-4 text-right",children:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>le(R),className:"p-1.5 rounded-md hover:bg-gray-100",title:R.status==="active"?"Désactiver":"Activer",children:R.status==="active"?a.jsx(Vy,{size:18}):a.jsx(Ad,{size:18})}),a.jsx("button",{onClick:()=>K(R),className:"p-1.5 rounded-md hover:bg-gray-100",title:"Voir les détails",children:a.jsx(Ad,{size:18})}),a.jsx("button",{onClick:()=>T(R),className:"p-1.5 rounded-md hover:bg-gray-100",title:"Modifier",children:a.jsx(gg,{size:18})}),a.jsx("button",{onClick:()=>B(R),className:"p-1.5 rounded-md hover:bg-gray-100 text-red-500",title:"Supprimer",children:a.jsx(wn,{size:18})})]})})]},R.id))})]})})]}),g&&a.jsx(Bh,{isOpen:g,onClose:()=>x(!1),onSave:()=>{x(!1),H()}}),p&&w&&a.jsx(Bh,{isOpen:p,onClose:()=>y(!1),onSave:()=>{y(!1),H()},promotion:w}),v&&w&&a.jsx($j,{isOpen:v,onClose:()=>N(!1),promotion:w}),j&&w&&a.jsx(Gj,{isOpen:j,onClose:()=>S(!1),onConfirm:_,title:"Supprimer la promotion",message:`Êtes-vous sûr de vouloir supprimer la promotion "${w.name}" ? Cette action est irréversible.`,confirmLabel:"Supprimer",cancelLabel:"Annuler",confirmButtonClass:"bg-red-600 hover:bg-red-700"})]})},Zj=({promotion:n,className:i=""})=>{const o=n.config,c=o.visuals||{};let u=c.badge_text||"",f=c.description||n.description||"";u||(o.discount_type==="percentage"?(u=`-${o.discount_value}%`,f=f||`${o.discount_value}% de descuento`):o.discount_type==="fixed_amount"?(u=`-$${o.discount_value.toLocaleString()}`,f=f||`$${o.discount_value.toLocaleString()} de descuento`):o.buy_quantity&&o.get_quantity?(u=`${o.buy_quantity}x${o.get_quantity}`,f=f||`Compra ${o.buy_quantity}, lleva ${o.get_quantity}`):o.applies_to==="shipping"?(u="ENVÍO GRATIS",f=f||"Envío gratis en este producto"):(u=n.name||"PROMO",f=f||n.name));const g=c.badge_bg_color||"#E63946",x=c.badge_bg_image,p=x?"#000000":Pg(g);return a.jsx("div",{className:`px-2 py-0.5 rounded-full font-bold text-xs shadow-sm border border-white/50 ${i}`,style:{backgroundColor:x?"transparent":g,backgroundImage:x?`url(${x})`:"none",backgroundSize:"cover",backgroundPosition:"center",color:p,textShadow:x?"0 1px 3px rgba(0,0,0,0.8)":"none"},title:f,children:u})},Pj=n=>{const[i,o]=h.useState([]),[c,u]=h.useState(!0),[f,g]=h.useState(null);h.useEffect(()=>{if(!n){o([]),u(!1);return}(async()=>{try{u(!0);const N=(await Xg().catch(j=>(console.error("[useProductPromotions] Error fetching active promotions from API:",j),[]))).filter(j=>{if(!p1(j)||!h1(j))return!1;const S=j.config||{},w=Array.isArray(j.conditions)?j.conditions:[];return!S.product_ids&&!S.category_ids&&w.length===0?!1:S.product_ids&&Array.isArray(S.product_ids)&&S.product_ids.length>0&&S.product_ids.includes(n.id)||S.category_ids&&Array.isArray(S.category_ids)&&S.category_ids.length>0&&S.category_ids.includes(n.categoria_id)?!0:w.length>0?w.some(C=>C.type==="specific_product"&&Array.isArray(C.value)?C.value.includes(n.id):C.type==="specific_category"&&Array.isArray(C.value)?C.value.includes(n.categoria_id):!1):!1}).sort((j,S)=>(S.priority||0)-(j.priority||0));o(N)}catch(y){console.error("[useProductPromotions] Error during promotion processing:",y),g(y instanceof Error?y:new Error("Une erreur est survenue")),o([])}finally{u(!1)}})()},[n]);const x=i.length>0?i[0]:null;return{promotions:i,bestPromotion:x,loading:c,error:f}},Jj=({product:n,onClick:i})=>{const{promotions:o,loading:c}=Pj(n);return a.jsxs("div",{onClick:()=>n.estado==="disponible"&&i(),className:`relative border rounded-2xl p-6 flex flex-col items-center text-center transition-shadow bg-white/90 shadow-md ${n.estado==="disponible"?"cursor-pointer hover:shadow-xl":"opacity-50"}`,children:[!c&&o.length>0&&n.estado==="disponible"&&a.jsx("div",{className:"absolute top-2 right-2 flex flex-wrap gap-1 max-w-[calc(100%-1rem)] justify-end z-10",children:o.map((u,f)=>a.jsx(Zj,{promotion:u},u.id||f))}),a.jsx("img",{src:n.image,alt:n.nom_produit,className:"w-full h-36 object-cover rounded-xl mb-4 aspect-4/3"}),a.jsx("p",{className:"font-extrabold flex-grow text-black leading-snug text-[clamp(1rem,2.2vw,1.2rem)] break-words text-balance whitespace-normal [hyphens:auto] tracking-tight",children:n.nom_produit}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 px-1 max-h-10 overflow-hidden line-clamp-2",children:n.description}),a.jsx("p",{className:"font-bold text-lg text-gray-800 mt-2",children:fe(n.prix_vente)}),n.estado!=="disponible"&&a.jsx("span",{className:"text-xs text-red-500 font-bold mt-1",children:"Agotado"}),n.estado==="disponible"&&a.jsx("button",{onClick:u=>{u.stopPropagation(),i()},className:"mt-4 w-full rounded-lg bg-gradient-to-r from-orange-500 via-orange-600 to-red-600 py-2 font-bold text-white shadow-lg transition-all duration-300 hover:scale-[1.02] hover:from-orange-600 hover:via-orange-700 hover:to-red-700",children:"Agregar"})]})},Wj=()=>{const[n,i]=h.useState([]),[o,c]=h.useState(!0);h.useEffect(()=>{(async()=>{try{const p=await Xg();i(p)}catch(p){console.error("Error loading promotions:",p)}finally{c(!1)}})()},[]);const u=n.filter(x=>x.type!=="promo_code");if(o||u.length===0)return null;const f=x=>{var p;return x.type==="free_shipping"?a.jsx(bg,{size:16}):x.type==="percentage"?a.jsx(vl,{size:16}):(p=x.conditions)!=null&&p.time_range?a.jsx(fs,{size:16}):x.type==="buy_x_get_y"?a.jsx(zd,{size:16}):a.jsx(_i,{size:16})},g=x=>{const p=x.discount,y=x.conditions;let v=x.description||x.name;return y!=null&&y.min_order_amount&&(v+=` (Mínimo: ${y.min_order_amount.toLocaleString()})`),y!=null&&y.time_range&&(v+=` (${y.time_range.start_time} - ${y.time_range.end_time})`),x.type==="promo_code"&&(p!=null&&p.promo_code)&&(v+=` (Código: ${p.promo_code})`),v};return a.jsxs("div",{className:"mb-4 space-y-2",children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center drop-shadow-md",children:[a.jsx(zd,{className:"mr-2",size:22}),"Promociones Activas"]}),a.jsx("div",{className:"space-y-2",children:u.map(x=>{var N,j,S,w;const p=((N=x.visuals)==null?void 0:N.badge_bg_color)||"#4CAF50",y=(j=x.visuals)==null?void 0:j.banner_image,v=(S=x.visuals)==null?void 0:S.banner_text;return y?a.jsxs("div",{className:"relative overflow-hidden rounded-lg shadow-md transition-transform hover:scale-[1.02]",children:[a.jsx("img",{src:y,alt:x.name,className:"w-full h-32 object-cover"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent flex items-end p-3",children:a.jsxs("div",{className:"text-white",children:[a.jsx("p",{className:"font-bold text-lg drop-shadow-md",children:x.name}),v&&a.jsx("p",{className:"text-sm drop-shadow-md",children:v})]})})]},x.id):a.jsxs("div",{className:"flex items-center rounded-lg shadow-sm transition-transform hover:scale-[1.01] overflow-hidden",style:{borderLeftColor:p,background:`linear-gradient(to right, ${p}15, white)`},children:[a.jsx("div",{className:"flex items-center justify-center w-10 h-10 flex-shrink-0",style:{backgroundColor:p,color:((w=x.visuals)==null?void 0:w.badge_color)||"#FFFFFF"},children:f(x)}),"              ",a.jsxs("div",{className:"flex-1 px-2 py-1 flex items-center justify-between",children:[a.jsx("p",{className:"font-bold text-gray-900 text-sm",children:x.name}),a.jsx("p",{className:"text-xs text-gray-600 truncate ml-2",children:g(x)})]})]})})})]})},e_=({isOpen:n,order:i,whatsappNumber:o="573238090562"})=>{var g;const c=Vs();if(!n||!i)return null;const u=()=>{var F,te,J,Q,oe,H;const x=i.items.filter(W=>{var T;return!((T=W.nom_produit)!=null&&T.toLowerCase().includes("domicilio"))}),p=x.map(W=>`- ${W.quantite}x ${W.nom_produit} (${fe(W.prix_unitaire)})`).join(`
`),y=x.reduce((W,T)=>W+(T.quantite??0),0),v=i.subtotal??x.reduce((W,T)=>W+(T.quantite??0)*T.prix_unitaire,0),N=typeof i.date_creation=="number"?new Date(i.date_creation):void 0,j=N?new Intl.DateTimeFormat("es-CO",{day:"2-digit",month:"2-digit",year:"numeric"}).format(N):"No disponible",S=N?new Intl.DateTimeFormat("es-CO",{hour:"2-digit",minute:"2-digit"}).format(N):"No disponible",w=((F=i.clientInfo)==null?void 0:F.nom)??i.client_name??"No especificado",D=((te=i.clientInfo)==null?void 0:te.telephone)??i.client_phone??"No especificado",C=((J=i.clientInfo)==null?void 0:J.adresse)??i.client_address,L=i.total_discount??0,q=(((Q=i.applied_promotions)==null?void 0:Q.length)??0)>0,X=i.payment_method==="transferencia"?"Transferencia":i.payment_method==="tarjeta"?"Tarjeta":"Efectivo",A=[];return A.push("¡Hola! Aquí están los detalles de mi pedido:"),A.push(`Pedido #${i.id.slice(-6)}`),A.push(`Fecha: ${j}`),A.push(`Hora: ${S}`),A.push(""),A.push(`Cliente: ${w}`),A.push(`Teléfono: ${D}`),C&&A.push(`Dirección: ${C}`),A.push(""),A.push(`Número de productos: ${y}`),p&&(A.push("Productos:"),A.push(p)),A.push(""),A.push(`Total antes de promociones: ${fe(v)}`),i.shipping_cost!==void 0&&(i.shipping_cost>0?A.push(`Costo de envío: ${fe(i.shipping_cost)}`):(oe=i.applied_promotions)!=null&&oe.some(W=>W.type==="FREE_SHIPPING")&&A.push("Costo de envío: Gratis")),L>0&&A.push(`Descuento total: -${fe(L)}`),q?(A.push("Promociones aplicadas:"),(H=i.applied_promotions)==null||H.forEach(W=>{A.push(`- ${W.name}: -${fe(W.discount_amount)}`)})):A.push("Promociones aplicadas: Ninguna"),A.push(`Total a pagar: ${fe(i.total)}`),A.push(`Método de pago: ${X}`),i.receipt_url&&A.push(`Comprobante: ${i.receipt_url}`),encodeURIComponent(A.join(`
`))},f=()=>{const x=u(),p=`https://wa.me/${o}?text=${x}`;window.open(p,"_blank"),c("/",{replace:!0}),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)};return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-md overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 p-6 text-white",children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx(bn,{size:64,className:"mb-3"}),a.jsx("h2",{className:"text-2xl font-bold text-center",children:"¡Pedido Confirmado!"}),a.jsxs("p",{className:"text-green-100 mt-2",children:["Pedido #",i.id.slice(-6)]})]})}),a.jsxs("div",{className:"p-6 text-center",children:[a.jsxs("div",{className:"p-6 text-left",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Détails de la commande:"}),a.jsxs("div",{className:"space-y-2",children:[i.items.filter(x=>{var p;return!((p=x.nom_produit)!=null&&p.toLowerCase().includes("domicilio"))}).map((x,p)=>a.jsxs("div",{className:"flex justify-between items-center text-gray-700",children:[a.jsxs("span",{children:[x.quantite,"x ",x.nom_produit]}),a.jsx("span",{children:fe(x.quantite*x.prix_unitaire)})]},p)),i.subtotal!==void 0&&a.jsxs("div",{className:"flex justify-between items-center text-gray-700 border-t pt-2 mt-2",children:[a.jsx("span",{children:"Sous-total:"}),a.jsx("span",{children:fe(i.subtotal)})]}),i.total_discount&&i.total_discount>0&&a.jsxs("div",{className:"flex justify-between items-center text-green-600",children:[a.jsx("span",{children:"Réduction totale:"}),a.jsxs("span",{children:["- ",fe(i.total_discount)]})]}),i.applied_promotions&&i.applied_promotions.length>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("p",{className:"text-sm font-semibold text-green-700",children:"Promotions appliquées:"}),i.applied_promotions.map((x,p)=>a.jsxs("div",{className:"flex justify-between items-center text-xs text-green-600 ml-2",children:[a.jsxs("span",{children:["- ",x.name]}),a.jsxs("span",{children:["- ",fe(x.discount_amount)]})]},p))]}),i.shipping_cost!==void 0&&i.shipping_cost>0&&a.jsxs("div",{className:"flex justify-between items-center text-gray-700",children:[a.jsx("span",{children:"Frais de livraison:"}),a.jsx("span",{children:fe(i.shipping_cost)})]}),i.shipping_cost===0&&((g=i.applied_promotions)==null?void 0:g.some(x=>x.type==="FREE_SHIPPING"))&&a.jsxs("div",{className:"flex justify-between items-center text-green-600",children:[a.jsx("span",{children:"Livraison gratuite:"}),a.jsx("span",{children:fe(0)})]}),a.jsxs("div",{className:"flex justify-between items-center text-gray-900 font-bold text-xl border-t pt-2 mt-2",children:[a.jsx("span",{children:"Total:"}),a.jsx("span",{children:fe(i.total)})]})]})]}),a.jsxs("button",{onClick:f,className:"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-4 px-6 rounded-lg flex items-center justify-center gap-3 transition-all transform hover:scale-105 shadow-lg",children:[a.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"Enviar por WhatsApp"]}),a.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"Haz clic para enviar tu pedido por WhatsApp y ver el seguimiento"})]})]})})},pi=8e3,Jg="Domicilio",Ih=n=>n.nom_produit===Jg,Hh=n=>(n??"").trim(),t_=(n,i)=>{const o=[...n??[]].sort(),c=[...i??[]].sort();return o.length!==c.length?!1:o.every((u,f)=>u===c[f])},a_=({isOpen:n,onClose:i,selectedProduct:o,onAddToCart:c})=>{var S;const[u,f]=h.useState(1),[g,x]=h.useState(""),[p,y]=h.useState([]);if(h.useEffect(()=>{n&&(f((o==null?void 0:o.quantite)||1),x((o==null?void 0:o.commentaire)||""),y((o==null?void 0:o.excluded_ingredients)||[]))},[n,o]),!n||!o)return null;const v=()=>{const w=o.product;c({id:`oi${Date.now()}`,produitRef:w.id,nom_produit:w.nom_produit,prix_unitaire:w.prix_vente,quantite:u,commentaire:g.trim()||void 0,excluded_ingredients:p.length>0?p:void 0})},N=w=>{p.includes(w)?y(p.filter(D=>D!==w)):y([...p,w])},j=((S=o.product.ingredients)==null?void 0:S.split(",").map(w=>w.trim()).filter(Boolean))||[];return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("h2",{className:"text-[clamp(1.1rem,2.3vw,1.5rem)] font-bold leading-snug text-gray-800 break-words text-balance whitespace-normal [hyphens:auto]",children:o.product.nom_produit}),a.jsx("button",{onClick:i,className:"text-gray-500 hover:text-gray-700",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("img",{src:o.product.image,alt:o.product.nom_produit,className:"w-full h-48 object-cover rounded-lg mb-4"}),a.jsx("p",{className:"text-gray-600 mb-4",children:o.product.description}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("p",{className:"font-bold text-gray-800 mb-2",children:["Precio: ",fe(o.product.prix_vente)]}),a.jsxs("div",{className:"flex items-center mt-2",children:[a.jsx("button",{onClick:()=>f(Math.max(1,u-1)),className:"bg-gray-200 text-gray-700 rounded-l-lg px-3 py-1",children:"-"}),a.jsx("span",{className:"bg-gray-100 px-4 py-1",children:u}),a.jsx("button",{onClick:()=>f(u+1),className:"bg-gray-200 text-gray-700 rounded-r-lg px-3 py-1",children:"+"})]})]}),j.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsx("p",{className:"font-bold text-gray-800 mb-2",children:"Ingredientes:"}),a.jsx("div",{className:"space-y-2",children:j.map((w,D)=>a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:`ingredient-${D}`,checked:!p.includes(w),onChange:()=>N(w),className:"mr-2"}),a.jsx("label",{htmlFor:`ingredient-${D}`,className:"text-gray-700",children:w})]},D))})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"comment",className:"block font-bold text-gray-800 mb-2",children:"Comentarios adicionales:"}),a.jsx("textarea",{id:"comment",value:g,onChange:w=>x(w.target.value),className:"w-full border border-gray-300 rounded-lg p-2 text-gray-700",rows:3,placeholder:"Instrucciones especiales, alergias, etc."})]}),a.jsxs("button",{onClick:v,className:"w-full rounded-lg bg-gradient-to-r from-orange-500 via-orange-600 to-red-600 py-3 px-4 font-bold text-white shadow-lg transition-all duration-300 hover:scale-[1.02] hover:from-orange-600 hover:via-orange-700 hover:to-red-700 focus:outline-none focus:ring-2 focus:ring-orange-400/70 focus:ring-offset-2",children:["Agregar al carrito - ",fe(o.product.prix_vente*u)]})]})})})},s_=({onOrderSubmitted:n})=>{const i=Vs(),{content:o}=Ci(),{schedule:c}=au(),u=o??Nn,f=h.useMemo(()=>Wd(u.hero.style,u.hero.backgroundImage),[u.hero.backgroundImage,u.hero.style]),[g,x]=h.useState([]),[p,y]=h.useState([]),[v,N]=h.useState(!0),[j,S]=h.useState(null),[w,D]=h.useState("all"),[C,L]=h.useState([]),[q,X]=h.useState(!1),[A,F]=h.useState(null),[te,J]=h.useState(""),[Q,oe]=h.useState(""),[H,W]=h.useState(""),[T,K]=h.useState("transferencia"),[B,le]=h.useState(null),[_,E]=h.useState(!1),[z,Z]=h.useState(!1),[$,R]=h.useState(null),[I,M]=h.useState([]),[re,ue]=h.useState(""),[ge,ae]=h.useState(""),[ce,_e]=h.useState(""),[xe,Ae]=h.useState(0),[Ke,Mt]=h.useState(!1),[Vt,qt]=h.useState(!1),[be,Te]=h.useState(()=>new Date),ve=h.useRef(new Map);h.useEffect(()=>{if(typeof window>"u")return;const ie=()=>Te(new Date);ie();const we=window.setInterval(ie,6e4);return()=>window.clearInterval(we)},[]);const ht=tu(c,be),st=h.useMemo(()=>Yg(c,"es-ES"),[c]),[rt,At]=h.useState(8e4),[gt,dt]=h.useState("pedir_en_linea");h.useEffect(()=>{T==="efectivo"&&K("transferencia")},[T]),h.useEffect(()=>{(async()=>{try{const[we,Oe]=await Promise.all([ye.getProducts(),ye.getCategories()]);x(we),y(Oe);try{const Ze=localStorage.getItem("customer-order-history");if(Ze){const Pe=JSON.parse(Ze);M(Pe.slice(0,3))}}catch(Ze){console.error("Error fetching order history:",Ze)}}catch(we){console.error("Error fetching data:",we),S("Error al cargar los datos. Por favor, intenta de nuevo más tarde.")}finally{N(!1)}})()},[]);const Na=h.useMemo(()=>w==="all"?g:g.filter(ie=>ie.categoria_id===w),[g,w]),[ut,sa]=h.useState({subtotal:0,total:0,automaticPromotionsDiscount:0,promoCodeDiscount:0,deliveryFee:0,appliedPromotions:[]}),wa=h.useCallback(async()=>{var Ge;const ie=C.reduce((mt,Bt)=>mt+Bt.quantite*Bt.prix_unitaire,0);if(C.length===0){sa({subtotal:0,total:0,automaticPromotionsDiscount:0,promoCodeDiscount:0,deliveryFee:0,appliedPromotions:[]}),qt(!1);return}const Oe=await Sj({id:"temp",items:C,subtotal:ie,total:ie,total_discount:0,applied_promotions:[],promo_code:ge||void 0,client_name:te,client_phone:Q,client_address:H,shipping_cost:pi}),Ze=Oe.total_discount||0,Pe=((Ge=Oe.applied_promotions.find(mt=>{var Bt;return((Bt=mt.config)==null?void 0:Bt.promo_code)===ge}))==null?void 0:Ge.discount_amount)||0,Dt=Ze-Pe;let Yt=gt==="pedir_en_linea"?pi:0;const Sn=Oe.applied_promotions.some(mt=>mt.type==="FREE_SHIPPING");Sn&&(Yt=0),qt(Sn);const Se=Oe.total+Yt;sa({subtotal:ie,total:Se,automaticPromotionsDiscount:Dt,promoCodeDiscount:Pe,deliveryFee:Yt,appliedPromotions:Oe.applied_promotions})},[C,ge,gt,te,Q,H,T,pi]);h.useEffect(()=>{wa()},[wa]);const{total:de,subtotal:pe,promoCodeDiscount:ke,deliveryFee:qe}=ut,Be=ie=>{const we=C.find(Oe=>Oe.produitRef===ie.id);F({product:ie,quantite:1,commentaire:we==null?void 0:we.commentaire,excluded_ingredients:we==null?void 0:we.excluded_ingredients}),X(!0)},Fe=h.useCallback(ie=>{L(we=>{const Oe=we.findIndex(Ze=>Ze.produitRef===ie.produitRef&&Hh(Ze.commentaire)===Hh(ie.commentaire)&&t_(Ze.excluded_ingredients,ie.excluded_ingredients));if(Oe>-1){const Ze=[...we],Pe=Ze[Oe];return Ze[Oe]={...Pe,quantite:Pe.quantite+ie.quantite,commentaire:ie.commentaire??Pe.commentaire,excluded_ingredients:ie.excluded_ingredients??Pe.excluded_ingredients},Ze}return[...we,ie]}),X(!1)},[L,X]);h.useCallback(ie=>{L(we=>we.filter(Oe=>Oe.id!==ie))},[L]);const Me=h.useCallback((ie,we)=>{const Oe=ve.current.get(ie);Oe&&clearTimeout(Oe),L(Pe=>Pe.map(Dt=>{if(Dt.id===ie){const Yt=Math.max(0,Dt.quantite+we);return{...Dt,quantite:Yt}}return Dt}));const Ze=setTimeout(()=>{L(Pe=>Pe.filter(Dt=>Dt.quantite>0)),ve.current.delete(ie)},300);ve.current.set(ie,Ze)},[L]),$e=ie=>{const we=ie.items.filter(Oe=>!Ih(Oe));L(we)},bt=async()=>{const ie=re.trim().toUpperCase();if(ie){if(ge&&ge===ie){_e("Este código ya está aplicado.");return}ue(ie),_e(""),Mt(!0);try{if(!await Zg(ie)){_e("Código promocional inválido o expirado.");return}ae(ie)}catch(we){console.error("Error validating promo code:",we),_e("No se pudo validar el código. Intenta nuevamente.")}finally{Mt(!1)}}},ot=()=>{ae(""),ue(""),_e("")},zt=async ie=>{ie.preventDefault(),E(!0);let we="";if(T==="transferencia"&&B)try{we=await eg(B)}catch(Ze){console.error("Error uploading receipt:",Ze),S("Error al subir el comprobante de pago."),E(!1);return}const Oe={id:`ord_${Date.now()}`,items:C,clientInfo:{nom:te,telephone:Q,adresse:H},shipping_cost:qe,order_type:gt,payment_method:T,receipt_url:we,subtotal:ut.subtotal,total:ut.total,total_discount:ut.automaticPromotionsDiscount+ut.promoCodeDiscount,promo_code:ge||void 0,applied_promotions:ut.appliedPromotions,status:"pending",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};console.log("finalOrder.total avant createOrder:",Oe.total),console.log("orderTotals:",ut);try{const Ze=await ye.createOrder(Oe);console.log("submitted.total après createOrder:",Ze.total),R(Ze),Z(!0),Xh(Ze.id,Date.now()+Qh),n==null||n(Ze);try{const Pe=localStorage.getItem("customer-order-history"),Dt=Pe?JSON.parse(Pe):[],Yt=[Ze,...Dt].slice(0,10);localStorage.setItem("customer-order-history",JSON.stringify(Yt)),M(Yt.slice(0,3))}catch(Pe){console.error("Error updating order history:",Pe)}}catch(Ze){console.error("Error submitting order:",Ze),S("Error al enviar el pedido. Por favor, intenta de nuevo.")}finally{E(!1)}},Ga=te.trim()===""||Q.trim()===""||gt==="pedir_en_linea"&&H.trim()===""||T==="transferencia"&&!B,Oa=_||C.length===0||Ga,Qt=!_&&C.length>0&&Ga;return ht?a.jsxs("div",{className:"min-h-screen flex flex-col lg:flex-row",style:f,children:[a.jsxs("div",{class:"flex-1 p-4 lg:p-8 bg-white",children:[a.jsxs("div",{class:"flex items-center justify-between mb-6 bg-white p-3 rounded-lg shadow-md",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 drop-shadow-md",children:"Realizar Pedido"}),a.jsxs("button",{type:"button",onClick:()=>i("/"),className:"inline-flex items-center text-sm font-semibold text-brand-primary hover:text-brand-primary/80 transition-colors",children:[a.jsx(lg,{size:14,className:"mr-1"}),"Volver"]})]}),a.jsx("div",{class:"bg-white p-4 rounded-lg shadow-md",children:a.jsx(Wj,{})}),a.jsxs("div",{className:"flex space-x-3 mb-6 overflow-x-auto pb-2 p-4 rounded-lg shadow-md bg-white",children:[a.jsx("button",{onClick:()=>D("all"),className:`px-5 py-2 rounded-full text-sm font-bold transition-all ${w==="all"?"bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg scale-105 border-2 border-orange-600":"bg-white text-gray-800 shadow-md hover:bg-gray-100 border-2 border-gray-300"}`,children:"Todos"}),p.map(ie=>a.jsx("button",{onClick:()=>D(ie.id),className:`px-5 py-2 rounded-full text-sm font-bold transition-all ${w===ie.id?"bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg scale-105 border-2 border-orange-600":"bg-white text-gray-800 shadow-md hover:bg-gray-100 border-2 border-gray-300"}`,children:ie.nom},ie.id))]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:Na.map(ie=>ie&&a.jsx(Jj,{product:ie,onClick:()=>Be(ie)},ie.id))})]}),a.jsxs("div",{className:"lg:w-96 flex flex-col",children:[a.jsxs("div",{className:"bg-white p-4 lg:p-6 shadow-lg flex flex-col",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900 drop-shadow-md mb-4",children:"Mon panier"}),I.length>0&&a.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[a.jsx("h3",{className:"text-sm font-bold text-gray-700 mb-2",children:"Tus últimos pedidos"}),a.jsx("div",{className:"space-y-2",children:I.map(ie=>{let we="Fecha no disponible";const Oe=ie.created_at||ie.date_commande||ie.date_servido||ie.timestamp;if(Oe)try{const Pe=new Date(Oe);isNaN(Pe.getTime())||(we=Pe.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"}))}catch(Pe){console.error("Error parsing date:",Pe)}we==="Fecha no disponible"&&(we=new Date().toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"}));const Ze=ie.items?ie.items.filter(Pe=>!Ih(Pe)).reduce((Pe,Dt)=>Pe+Dt.quantite,0):0;return a.jsxs("div",{className:"flex justify-between items-center bg-white p-2 rounded border border-gray-200 hover:border-yellow-500 transition-all",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("p",{className:"text-xs font-bold text-gray-800 truncate",children:["Pedido del ",we]}),a.jsxs("p",{className:"text-xs text-gray-600",children:[Ze," article",Ze>1?"s":""," • ",fe(ie.total)]})]}),a.jsx("button",{onClick:()=>$e(ie),className:"ml-2 bg-yellow-400 hover:bg-yellow-500 text-gray-900 font-bold px-3 py-1 rounded text-xs whitespace-nowrap transition-all",children:"Pedir de nuevo"})]},ie.id)})})]}),C.length===0?a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-500",children:[a.jsx(pg,{size:48,className:"mb-3"}),a.jsx("p",{children:"Tu carrito está vacío."})]}):a.jsx("div",{className:"flex-1 overflow-y-auto pr-2 -mr-2",children:C.map(ie=>a.jsx("div",{className:"group relative mb-3 rounded-lg bg-gradient-to-r from-orange-400 to-red-400 border-2 border-orange-500 px-4 py-4 text-white shadow-md transition-shadow hover:shadow-lg",children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex-1 space-y-2",children:["                                        ",a.jsxs("p",{className:"text-[clamp(1rem,2vw,1.3rem)] leading-snug text-white break-words text-balance whitespace-normal [hyphens:auto]",children:["                                          ",(ie==null?void 0:ie.nom_produit)||"Article inconnu"]}),ie.commentaire&&a.jsxs("p",{className:"text-sm text-gray-600 italic bg-gray-50 border-l-2 border-brand-primary/50 p-2 rounded",children:["💬 ",ie.commentaire]}),ie.excluded_ingredients&&ie.excluded_ingredients.length>0&&a.jsxs("p",{className:"text-sm text-gray-700 font-semibold bg-gray-50 border-l-2 border-red-500/50 p-2 rounded",children:["🚫 Sin: ",ie.excluded_ingredients.join(", ")]})]}),a.jsx("div",{className:"flex flex-col items-center gap-2",children:a.jsxs("div",{className:"flex items-center gap-2 rounded-full bg-white px-2 py-1 text-sm font-semibold border border-gray-300 text-gray-800",children:[a.jsx("button",{onClick:()=>Me(ie.id,-1),className:"rounded-full p-1 transition hover:bg-gray-200","aria-label":"Disminuir cantidad",children:a.jsx(fg,{size:14})}),a.jsx("span",{className:"min-w-[1.5rem] text-center text-base font-bold text-gray-800",children:ie.quantite}),a.jsx("button",{onClick:()=>Me(ie.id,1),className:"rounded-full p-1 transition hover:bg-gray-200","aria-label":"Aumentar cantidad",children:a.jsx(Ni,{size:14})})]})})]})},ie.id))}),C.length>0&&gt==="pedir_en_linea"&&a.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-200 last:border-b-0",children:[a.jsx("p",{className:"font-medium text-gray-800",children:Jg}),Vt?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("p",{className:"text-sm text-gray-400 line-through",children:fe(pi)}),a.jsx("p",{className:"text-sm font-bold text-green-600",children:"GRATIS"})]}):a.jsx("p",{className:"text-sm text-gray-600",children:fe(pi)})]}),a.jsxs("div",{className:"mt-auto pt-4 border-t border-gray-200",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"promoCode",className:"block text-sm font-medium text-gray-700 mb-2",children:"Código de Promoción:"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("input",{type:"text",id:"promoCode",value:re,onChange:ie=>ue(ie.target.value.toUpperCase()),placeholder:"Ingresa tu código",className:"flex-1 border border-gray-300 rounded-md shadow-sm p-2 uppercase"}),a.jsx("button",{type:"button",onClick:bt,disabled:Ke||!re.trim()||ge===re,"aria-busy":Ke,className:"rounded-md bg-gradient-to-r from-orange-500 via-orange-600 to-red-600 px-4 py-2 font-bold text-white shadow-sm transition-all duration-300 hover:from-orange-600 hover:via-orange-700 hover:to-red-700 focus:outline-none focus:ring-2 focus:ring-orange-400 disabled:cursor-not-allowed disabled:opacity-50",children:Ke?"Validando…":"Confirmar"})]}),ce&&a.jsx("p",{className:"mt-2 text-sm text-red-600",children:ce}),ge&&a.jsxs("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded-md flex items-center justify-between",children:[a.jsxs("span",{className:"text-sm text-green-700 font-medium",children:['✓ Código "',ge,'" aplicado']}),a.jsx("button",{type:"button",onClick:ot,className:"text-red-500 hover:text-red-700 text-sm font-medium",children:"Eliminar"})]})]}),ut.appliedPromotions&&ut.appliedPromotions.length>0&&a.jsxs("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:[a.jsx("p",{className:"text-sm font-bold text-green-800 mb-2",children:"🎉 Promociones aplicadas:"}),ut.appliedPromotions.map((ie,we)=>{const Oe=`- ${fe(ie.discount_amount)}`;return gt==="a_emporter"?a.jsxs("div",{className:"mb-2 text-sm text-green-700",children:[a.jsx("p",{className:"font-semibold",children:ie.name}),a.jsx("p",{className:"font-semibold",children:Oe})]},we):a.jsxs("div",{className:"flex justify-between items-center mb-1 text-sm",children:[a.jsx("span",{className:"text-green-700",children:ie.name}),a.jsx("span",{className:"font-semibold text-green-700",children:Oe})]},we)})]}),xe>0&&a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("p",{className:"text-sm text-green-600",children:"Descuento por código promocional:"}),a.jsxs("p",{className:"text-sm font-bold text-green-600",children:["- ",fe(xe)]})]}),a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("p",{className:"text-lg font-bold text-gray-800",children:"Total:"}),a.jsx("p",{className:"text-3xl font-bold text-brand-primary",children:fe(de)})]}),a.jsxs("form",{onSubmit:zt,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de pedido:"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:`flex items-center p-3 border-2 rounded-lg cursor-pointer transition ${gt==="pedir_en_linea"?"border-brand-primary bg-brand-primary/5":"border-gray-300 hover:border-brand-primary/50"}`,children:[a.jsx("input",{type:"radio",name:"orderType",value:"pedir_en_linea",checked:gt==="pedir_en_linea",onChange:()=>dt("pedir_en_linea"),className:"form-radio text-brand-primary"}),a.jsx("span",{className:"ml-3 font-medium",children:"🚚 Domicilio (con entrega)"})]}),a.jsxs("label",{className:`flex items-center p-3 border-2 rounded-lg cursor-pointer transition ${gt==="a_emporter"?"border-brand-primary bg-brand-primary/5":"border-gray-300 hover:border-brand-primary/50"}`,children:[a.jsx("input",{type:"radio",name:"orderType",value:"a_emporter",checked:gt==="a_emporter",onChange:()=>dt("a_emporter"),className:"form-radio text-brand-primary"}),a.jsx("span",{className:"ml-3 font-medium",children:"🏪 Para llevar (recoger en tienda)"})]})]})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"clientName",className:"block text-sm font-medium text-gray-700",children:["Nombre: ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",id:"clientName",value:te,onChange:ie=>J(ie.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"clientPhone",className:"block text-sm font-medium text-gray-700",children:["Teléfono: ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"tel",id:"clientPhone",value:Q,onChange:ie=>oe(ie.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",required:!0})]}),gt==="pedir_en_linea"&&a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"clientAddress",className:"block text-sm font-medium text-gray-700",children:["Dirección: ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("textarea",{id:"clientAddress",value:H,onChange:ie=>W(ie.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",rows:3,required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Método de pago:"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:`flex items-center p-3 border-2 rounded-lg cursor-pointer transition ${T==="transferencia"?"border-brand-primary bg-brand-primary/5":"border-gray-300 hover:border-brand-primary/50"}`,children:[a.jsx("input",{type:"radio",name:"paymentMethod",value:"transferencia",checked:T==="transferencia",onChange:()=>K("transferencia"),className:"form-radio text-brand-primary"}),a.jsx("span",{className:"ml-3 font-medium",children:"💰 Transferencia Bancaria"})]}),a.jsxs("label",{className:"flex items-center rounded-lg border-2 border-gray-200 bg-gray-100 p-3 opacity-70 cursor-not-allowed","aria-disabled":"true",children:[a.jsx("input",{type:"radio",name:"paymentMethod",value:"efectivo",checked:T==="efectivo",onChange:()=>{},disabled:!0,className:"form-radio text-gray-400"}),a.jsxs("span",{className:"ml-3 font-medium text-gray-500",children:[a.jsx("span",{children:"💵 Efectivo"}),a.jsx("span",{className:"block text-xs font-normal uppercase tracking-wide text-gray-500/80",children:"No disponible por el momento"})]})]})]})]}),T==="transferencia"&&a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"paymentProof",className:"block text-sm font-medium text-gray-700",children:["Comprobante de pago: ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"file",id:"paymentProof",onChange:ie=>le(ie.target.files?ie.target.files[0]:null),className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",accept:"image/*,application/pdf",required:!0})]}),a.jsx("button",{type:"submit",disabled:Oa,className:"w-full bg-gradient-to-r from-blue-500 to-indigo-600 text-white font-bold py-3 px-4 rounded-lg hover:from-blue-600 hover:to-indigo-700 transition-all shadow-lg transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:_?"Enviando pedido...":"Confirmar Pedido"}),Qt&&a.jsxs("p",{className:"mt-2 text-sm text-red-600",children:["Faltan datos obligatorios. Completa los campos marcados con ",a.jsx("span",{className:"font-semibold",children:"*"}),"."]})]})]})]}),A&&a.jsx(a_,{isOpen:q,onClose:()=>X(!1),selectedProduct:A,onAddToCart:Fe}),$&&a.jsx(e_,{isOpen:z,order:$,onClose:()=>{Z(!1),L([]),J(""),oe(""),W(""),K("transferencia"),le(null),ae(""),Ae(0)}})]})]}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-600 via-red-600 to-rose-600",children:a.jsx("div",{className:"mx-auto flex min-h-screen max-w-3xl flex-col items-center justify-center px-6 py-16 text-center text-white",children:a.jsxs("div",{className:"w-full rounded-3xl border border-white/20 bg-black/30 p-10 shadow-2xl backdrop-blur-xl",children:[a.jsx("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-white/15 text-white",children:a.jsx(fs,{size:32})}),a.jsx("h1",{className:"mt-6 text-3xl font-bold sm:text-4xl",children:u.onlineOrdering.closedTitle}),a.jsx("p",{className:"mt-3 text-lg text-white/85",children:u.onlineOrdering.closedSubtitle||"Por favor consulte nuestros horarios a continuación."}),a.jsxs("div",{className:"mt-6 space-y-3 rounded-2xl bg-black/20 p-6 backdrop-blur-sm",children:[a.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.3em] text-white/90",children:"Horarios de atención:"}),a.jsx("div",{className:"space-y-2",children:st.map(({day:ie,label:we,schedule:Oe})=>a.jsxs("div",{className:"flex items-center text-base",children:[a.jsx("span",{className:"font-medium text-white/80 w-24",children:we}),a.jsx("span",{className:"font-semibold text-white",children:Oe})]},ie))})]}),a.jsx("div",{className:"mt-8 flex flex-col gap-3 sm:flex-row sm:justify-center",children:a.jsx("button",{type:"button",onClick:()=>i("/"),className:"inline-flex items-center justify-center rounded-full border border-white/30 bg-white/10 px-6 py-3 text-sm font-semibold uppercase tracking-[0.25em] text-white transition hover:bg-white/20 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/70 focus-visible:ring-offset-2 focus-visible:ring-offset-red-600",children:"Retour à l'accueil"})})]})})})},n_=()=>a.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-100 text-center",children:[a.jsx("h1",{className:"text-9xl font-extrabold text-brand-primary tracking-widest",children:"404"}),a.jsx("div",{className:"bg-brand-accent px-2 text-sm rounded rotate-12 absolute",children:"Page Non Trouvée"}),a.jsx("p",{className:"text-2xl md:text-3xl font-light text-gray-700 mt-4",children:"Désolé, la page que vous recherchez n'existe pas."}),a.jsx(jb,{to:"/",className:"mt-8 px-8 py-3 bg-brand-primary text-brand-secondary font-semibold rounded-lg hover:bg-yellow-400 transition",children:"Retour à l'accueil"})]}),l_=new Intl.NumberFormat("es-CO",{maximumFractionDigits:2}),i_=new Intl.NumberFormat("es-CO",{maximumFractionDigits:0}),Fh=n=>l_.format(Number.isFinite(n)?n:0),fn=n=>i_.format(Number.isFinite(n)?Math.round(n):0),fl={all:"Toutes",efectivo:"Efectivo",transferencia:"Transferencia",tarjeta:"Tarjeta",unknown:"Non spécifié"},$h={sur_place:"En el local",a_emporter:"Para llevar",pedir_en_linea:"Pedido en línea"},r_=()=>{const[n,i]=h.useState([]),[o,c]=h.useState([]),[u,f]=h.useState([]),[g,x]=h.useState([]),[p,y]=h.useState(!0),[v,N]=h.useState(null),[j,S]=h.useState(null),[w,D]=h.useState({startDate:"",endDate:"",paymentMethod:"all",orderType:"all",categoryId:"",productId:""}),C=h.useCallback(async()=>{y(!0);try{const[_,E,z,Z]=await Promise.all([ye.getFinalizedOrders(),ye.getSalesHistory(),ye.getProducts(),ye.getCategories()]);i([..._].sort(($,R)=>R.date_creation-$.date_creation)),c(E),f(z),x(Z),N(null)}catch(_){console.error("Failed to fetch sales summary",_),N("Impossible de charger les données de ventes. Veuillez réessayer.")}finally{y(!1)}},[]);h.useEffect(()=>{C()},[C]),h.useEffect(()=>{const _=ye.notifications.subscribe("orders_updated",()=>{C()});return()=>{_()}},[C]);const L=h.useMemo(()=>new Map(n.map(_=>[_.id,_])),[n]),q=h.useMemo(()=>{if(!w.startDate)return null;const _=new Date(w.startDate);return _.setHours(0,0,0,0),_.getTime()},[w.startDate]),X=h.useMemo(()=>{if(!w.endDate)return null;const _=new Date(w.endDate);return _.setHours(23,59,59,999),_.getTime()},[w.endDate]),A=h.useMemo(()=>o.filter(_=>{if(q!==null&&_.saleDate<q||X!==null&&_.saleDate>X||w.paymentMethod!=="all"&&_.paymentMethod!==w.paymentMethod||w.categoryId&&_.categoryId!==w.categoryId||w.productId&&_.productId!==w.productId)return!1;const E=L.get(_.orderId);return!(!E||w.orderType!=="all"&&E.type!==w.orderType||w.paymentMethod!=="all"&&E.payment_method&&E.payment_method!==w.paymentMethod)}),[o,q,X,w.paymentMethod,w.categoryId,w.productId,w.orderType,L]),F=h.useMemo(()=>{const _=new Map;return A.forEach(E=>{const z=_.get(E.orderId),Z=E.totalPrice??0,$=E.profit??0,R=E.quantity??0;if(!z){_.set(E.orderId,{revenue:Z,profit:$,quantity:R,paymentMethod:E.paymentMethod,items:[{productId:E.productId,productName:E.productName,categoryName:E.categoryName,quantity:E.quantity,revenue:Z,profit:$}]});return}z.revenue+=Z,z.profit+=$,z.quantity+=R,!z.paymentMethod&&E.paymentMethod&&(z.paymentMethod=E.paymentMethod);const I=z.items.findIndex(M=>M.productId===E.productId);I>-1?z.items[I]={...z.items[I],quantity:z.items[I].quantity+E.quantity,revenue:z.items[I].revenue+Z,profit:z.items[I].profit+$}:z.items.push({productId:E.productId,productName:E.productName,categoryName:E.categoryName,quantity:E.quantity,revenue:Z,profit:$})}),_.forEach(E=>{E.items.sort((z,Z)=>Z.revenue-z.revenue)}),_},[A]),te=h.useMemo(()=>n.filter(_=>F.has(_.id)).sort((_,E)=>E.date_creation-_.date_creation),[n,F]),J=h.useMemo(()=>{const _=A.reduce((R,I)=>R+(I.totalPrice??0),0),E=A.reduce((R,I)=>R+(I.totalCost??0),0),z=A.reduce((R,I)=>R+(I.profit??0),0),Z=A.reduce((R,I)=>R+(I.quantity??0),0),$=te.length;return{totalRevenue:_,totalCost:E,totalProfit:z,totalQuantity:Z,orderCount:$,averageOrderValue:$>0?_/$:0,averageItemsPerOrder:$>0?Z/$:0,profitMargin:_>0?z/_*100:0}},[A,te]),Q=h.useMemo(()=>{const _=new Map;return A.forEach(E=>{const z=E.productId,Z=_.get(z);if(!Z){_.set(z,{productId:E.productId,productName:E.productName,categoryName:E.categoryName,quantity:E.quantity,revenue:E.totalPrice??0,profit:E.profit??0});return}Z.quantity+=E.quantity,Z.revenue+=E.totalPrice??0,Z.profit+=E.profit??0}),Array.from(_.values()).sort((E,z)=>z.revenue-E.revenue)},[A]),oe=h.useMemo(()=>{const _=new Map;return A.forEach(E=>{const z=E.categoryId||"unknown",Z=_.get(z);if(!Z){_.set(z,{categoryName:E.categoryName||"Sin categoría",quantity:E.quantity,revenue:E.totalPrice??0,profit:E.profit??0});return}Z.quantity+=E.quantity,Z.revenue+=E.totalPrice??0,Z.profit+=E.profit??0}),Array.from(_.values()).sort((E,z)=>z.revenue-E.revenue)},[A]),H=h.useMemo(()=>{const _=new Map;return A.forEach(E=>{const z=E.paymentMethod??"unknown",Z=_.get(z);if(!Z){_.set(z,{revenue:E.totalPrice??0,profit:E.profit??0,orders:new Set([E.orderId])});return}Z.revenue+=E.totalPrice??0,Z.profit+=E.profit??0,Z.orders.add(E.orderId)}),Array.from(_.entries()).map(([E,z])=>({method:E,label:fl[E]??fl.unknown,revenue:z.revenue,profit:z.profit,orders:z.orders.size})).sort((E,z)=>z.revenue-E.revenue)},[A]),W=h.useMemo(()=>[...g].sort((_,E)=>_.nom.localeCompare(E.nom,"es")),[g]),T=h.useMemo(()=>{const{categoryId:_}=w;return[..._?u.filter(z=>z.categoria_id===_):u].sort((z,Z)=>z.nom_produit.localeCompare(Z.nom_produit,"es"))},[u,w.categoryId]),K=_=>{const{name:E,value:z}=_.target;D(Z=>{if(E==="categoryId"){const $={...Z,categoryId:z,productId:Z.productId};if(z&&Z.productId){const R=u.find(I=>I.id===Z.productId);(!R||R.categoria_id!==z)&&($.productId="")}return $}if(E==="productId"){if(!z)return{...Z,productId:""};const $=u.find(R=>R.id===z);return{...Z,productId:z,categoryId:$?$.categoria_id:Z.categoryId}}return E==="paymentMethod"&&(z==="all"||z==="efectivo"||z==="transferencia"||z==="tarjeta")?{...Z,paymentMethod:z}:E==="orderType"&&(z==="all"||z==="sur_place"||z==="a_emporter"||z==="pedir_en_linea")?{...Z,orderType:z}:{...Z,[E]:z}}),S(null)},B=()=>{D({startDate:"",endDate:"",paymentMethod:"all",orderType:"all",categoryId:"",productId:""}),S(null)},le=()=>{if(A.length===0)return;const _=["Fecha","Pedido","Tipo","Mesa/Cliente","Producto","Categoría","Cantidad","Precio unitario","Ingresos","Costo","Beneficio","Método de pago"],E=A.map(I=>{const M=L.get(I.orderId),re=M?$h[M.type]:"N/A",ue=M?M.type==="sur_place"?M.table_nom||"N/A":M.client_name||M.client_address||"N/A":"N/A";return[new Date(I.saleDate).toLocaleString("es-CO"),I.orderId,re,`"${ue}"`,`"${I.productName}"`,I.categoryName||"N/A",I.quantity,fe(I.unitPrice??0),fe(I.totalPrice??0),fe(I.totalCost??0),fe(I.profit??0),fl[I.paymentMethod??"unknown"]??fl.unknown].join(",")}),z=[_.join(","),...E].join(`
`),Z=new Blob([`﻿${z}`],{type:"text/csv;charset=utf-8;"}),$=URL.createObjectURL(Z),R=document.createElement("a");R.href=$,R.download=`resume_ventes_${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(R),R.click(),document.body.removeChild(R),URL.revokeObjectURL($)};return p?a.jsx("div",{className:"text-gray-800",children:"Chargement du résumé des ventes..."}):a.jsxs("div",{className:"space-y-6",children:[v&&a.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4 text-sm text-red-700",children:v}),a.jsxs("section",{className:"rounded-xl bg-white p-4 shadow-md",children:[a.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Filtres d'analyse"}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsxs("button",{type:"button",onClick:B,className:"inline-flex items-center gap-2 rounded-lg border border-gray-300 px-3 py-2 text-sm font-medium text-gray-700 transition hover:bg-gray-100",children:[a.jsx(Zy,{size:16}),"Réinitialiser"]}),a.jsxs("button",{type:"button",onClick:le,className:"inline-flex items-center gap-2 rounded-lg bg-green-600 px-3 py-2 text-sm font-semibold text-white transition hover:bg-green-700",children:[a.jsx(Hy,{size:16}),"Export CSV"]})]})]}),a.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-3",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Date de début"}),a.jsx("input",{type:"date",name:"startDate",value:w.startDate,onChange:K,className:"mt-1 rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-brand-primary focus:outline-none focus:ring-brand-primary"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Date de fin"}),a.jsx("input",{type:"date",name:"endDate",value:w.endDate,onChange:K,className:"mt-1 rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-brand-primary focus:outline-none focus:ring-brand-primary"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Type de commande"}),a.jsxs("select",{name:"orderType",value:w.orderType,onChange:K,className:"mt-1 rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-brand-primary focus:outline-none focus:ring-brand-primary",children:[a.jsx("option",{value:"all",children:"Tous les types"}),a.jsx("option",{value:"sur_place",children:"En el local"}),a.jsx("option",{value:"a_emporter",children:"Para llevar"}),a.jsx("option",{value:"pedir_en_linea",children:"Pedido en línea"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Méthode de paiement"}),a.jsxs("select",{name:"paymentMethod",value:w.paymentMethod,onChange:K,className:"mt-1 rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-brand-primary focus:outline-none focus:ring-brand-primary",children:[a.jsx("option",{value:"all",children:"Toutes"}),a.jsx("option",{value:"efectivo",children:"Efectivo"}),a.jsx("option",{value:"transferencia",children:"Transferencia"}),a.jsx("option",{value:"tarjeta",children:"Tarjeta"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Catégorie"}),a.jsxs("select",{name:"categoryId",value:w.categoryId,onChange:K,className:"mt-1 rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-brand-primary focus:outline-none focus:ring-brand-primary",children:[a.jsx("option",{value:"",children:"Toutes"}),W.map(_=>a.jsx("option",{value:_.id,children:_.nom},_.id))]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Produit"}),a.jsxs("select",{name:"productId",value:w.productId,onChange:K,className:"mt-1 rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-brand-primary focus:outline-none focus:ring-brand-primary",children:[a.jsx("option",{value:"",children:"Tous les produits"}),T.map(_=>a.jsx("option",{value:_.id,children:_.nom_produit},_.id))]})]})]})]}),a.jsx("section",{children:a.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-4",children:[a.jsxs("div",{className:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Chiffre d'affaires"}),a.jsx("p",{className:"mt-1 text-2xl font-bold text-gray-900",children:fe(J.totalRevenue)})]}),a.jsx("div",{className:"rounded-full bg-brand-primary/10 p-3 text-brand-primary",children:a.jsx(xg,{size:20})})]}),a.jsx("p",{className:"mt-3 text-xs text-gray-500",children:"Basé sur les articles correspondant aux filtres appliqués."})]}),a.jsxs("div",{className:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Bénéfice"}),a.jsx("p",{className:"mt-1 text-2xl font-bold text-gray-900",children:fe(J.totalProfit)})]}),a.jsx("div",{className:"rounded-full bg-emerald-500/10 p-3 text-emerald-600",children:a.jsx(Ov,{size:20})})]}),a.jsxs("p",{className:"mt-3 text-xs text-gray-500",children:["Marge moyenne : ",Fh(J.profitMargin),"%"]})]}),a.jsxs("div",{className:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Commandes"}),a.jsx("p",{className:"mt-1 text-2xl font-bold text-gray-900",children:fn(J.orderCount)})]}),a.jsx("div",{className:"rounded-full bg-indigo-500/10 p-3 text-indigo-600",children:a.jsx(Ys,{size:20})})]}),a.jsxs("p",{className:"mt-3 text-xs text-gray-500",children:["Panier moyen : ",fe(J.averageOrderValue)]})]}),a.jsxs("div",{className:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Articles vendus"}),a.jsx("p",{className:"mt-1 text-2xl font-bold text-gray-900",children:fn(J.totalQuantity)})]}),a.jsx("div",{className:"rounded-full bg-amber-500/10 p-3 text-amber-600",children:a.jsx(ph,{size:20})})]}),a.jsxs("p",{className:"mt-3 text-xs text-gray-500",children:["Moyenne par commande : ",Fh(J.averageItemsPerOrder)]})]})]})}),a.jsxs("section",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[a.jsxs("div",{className:"rounded-xl bg-white p-4 shadow-md",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Répartition par méthode de paiement"}),a.jsx(xy,{size:18,className:"text-brand-primary"})]}),a.jsx("div",{className:"mt-4 overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"border-b text-xs uppercase text-gray-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-2",children:"Méthode"}),a.jsx("th",{className:"p-2 text-right",children:"Ventes"}),a.jsx("th",{className:"p-2 text-right",children:"Bénéfice"}),a.jsx("th",{className:"p-2 text-right",children:"Commandes"})]})}),a.jsx("tbody",{children:H.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"p-4 text-center text-sm text-gray-500",children:"Aucune donnée pour les filtres sélectionnés."})}):H.map(_=>a.jsxs("tr",{className:"border-b last:border-b-0",children:[a.jsx("td",{className:"p-2 text-sm font-medium text-gray-800",children:_.label}),a.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:fe(_.revenue)}),a.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:fe(_.profit)}),a.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:fn(_.orders)})]},_.method))})]})})]}),a.jsxs("div",{className:"rounded-xl bg-white p-4 shadow-md",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Répartition par catégorie"}),a.jsx(ph,{size:18,className:"text-brand-primary"})]}),a.jsx("div",{className:"mt-4 overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"border-b text-xs uppercase text-gray-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-2",children:"Catégorie"}),a.jsx("th",{className:"p-2 text-right",children:"Quantité"}),a.jsx("th",{className:"p-2 text-right",children:"Ventes"}),a.jsx("th",{className:"p-2 text-right",children:"Bénéfice"})]})}),a.jsx("tbody",{children:oe.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"p-4 text-center text-sm text-gray-500",children:"Aucune donnée pour les filtres sélectionnés."})}):oe.map(_=>a.jsxs("tr",{className:"border-b last:border-b-0",children:[a.jsx("td",{className:"p-2 text-sm font-medium text-gray-800",children:_.categoryName}),a.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:fn(_.quantity)}),a.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:fe(_.revenue)}),a.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:fe(_.profit)})]},_.categoryName))})]})})]})]}),a.jsxs("section",{className:"rounded-xl bg-white p-4 shadow-md",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Produits les plus performants"}),a.jsx(Ys,{size:18,className:"text-brand-primary"})]}),a.jsx("div",{className:"mt-4 overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"border-b text-xs uppercase text-gray-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-2",children:"Produit"}),a.jsx("th",{className:"p-2",children:"Catégorie"}),a.jsx("th",{className:"p-2 text-right",children:"Quantité"}),a.jsx("th",{className:"p-2 text-right",children:"Ventes"}),a.jsx("th",{className:"p-2 text-right",children:"Bénéfice"})]})}),a.jsx("tbody",{children:Q.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"p-4 text-center text-sm text-gray-500",children:"Aucun produit trouvé pour les filtres sélectionnés."})}):Q.map(_=>a.jsxs("tr",{className:"border-b last:border-b-0",children:[a.jsx("td",{className:"p-2 text-sm font-medium text-gray-800",children:_.productName}),a.jsx("td",{className:"p-2 text-sm text-gray-700",children:_.categoryName||"Sin categoría"}),a.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:fn(_.quantity)}),a.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:fe(_.revenue)}),a.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:fe(_.profit)})]},_.productId))})]})})]}),a.jsxs("section",{className:"rounded-xl bg-white p-4 shadow-md",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Détails des commandes"}),a.jsx("div",{className:"mt-4 overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"border-b text-xs uppercase text-gray-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"w-12 p-3"}),a.jsx("th",{className:"p-3",children:"Date"}),a.jsx("th",{className:"p-3",children:"Type"}),a.jsx("th",{className:"p-3",children:"Table/Client"}),a.jsx("th",{className:"p-3 text-right",children:"Articles"}),a.jsx("th",{className:"p-3 text-right",children:"Ventes"}),a.jsx("th",{className:"p-3 text-right",children:"Bénéfice"}),a.jsx("th",{className:"p-3",children:"Paiement"})]})}),a.jsx("tbody",{children:te.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:8,className:"p-6 text-center text-sm text-gray-500",children:"Aucune commande ne correspond aux filtres sélectionnés."})}):te.map(_=>{const E=F.get(_.id);if(!E)return null;const z=j===_.id,Z=_.type==="sur_place"?a.jsxs("span",{className:"inline-flex items-center gap-1.5 rounded-full bg-blue-100 px-2 py-1 text-xs font-medium text-blue-800",children:[a.jsx(bi,{size:12}),"En el local"]}):a.jsxs("span",{className:"inline-flex items-center gap-1.5 rounded-full bg-purple-100 px-2 py-1 text-xs font-medium text-purple-800",children:[a.jsx(Qd,{size:12}),$h[_.type]]}),$=_.type==="sur_place"?_.table_nom||"N/A":_.client_name||_.client_address||"N/A",R=fl[E.paymentMethod??_.payment_method??"unknown"]??fl.unknown;return a.jsxs(_a.Fragment,{children:[a.jsxs("tr",{onClick:()=>S(z?null:_.id),className:"cursor-pointer border-b transition hover:bg-gray-50",children:[a.jsx("td",{className:"p-3 align-top",children:z?a.jsx(ig,{size:16}):a.jsx(wy,{size:16})}),a.jsx("td",{className:"p-3 text-sm text-gray-700",children:new Date(_.date_creation).toLocaleString("es-CO")}),a.jsx("td",{className:"p-3",children:Z}),a.jsx("td",{className:"p-3 text-sm font-semibold text-gray-900",children:$}),a.jsx("td",{className:"p-3 text-right text-sm text-gray-700",children:fn(E.quantity)}),a.jsx("td",{className:"p-3 text-right text-sm font-semibold text-gray-900",children:fe(E.revenue)}),a.jsx("td",{className:"p-3 text-right text-sm font-semibold text-emerald-600",children:fe(E.profit)}),a.jsx("td",{className:"p-3 text-sm text-gray-700",children:R})]}),z&&a.jsx("tr",{className:"bg-gray-50",children:a.jsx("td",{colSpan:8,className:"p-4",children:a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[a.jsxs("h4",{className:"text-sm font-semibold text-gray-800",children:["Articles inclus (",E.items.length,")"]}),a.jsx("div",{className:"mt-3 overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"border-b text-xs uppercase text-gray-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-2",children:"Produit"}),a.jsx("th",{className:"p-2",children:"Catégorie"}),a.jsx("th",{className:"p-2 text-right",children:"Quantité"}),a.jsx("th",{className:"p-2 text-right",children:"Ventes"}),a.jsx("th",{className:"p-2 text-right",children:"Bénéfice"})]})}),a.jsx("tbody",{children:E.items.map(I=>a.jsxs("tr",{className:"border-b last:border-b-0",children:[a.jsx("td",{className:"p-2 text-sm font-medium text-gray-800",children:I.productName}),a.jsx("td",{className:"p-2 text-sm text-gray-700",children:I.categoryName||"Sin categoría"}),a.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:fn(I.quantity)}),a.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:fe(I.revenue)}),a.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:fe(I.profit)})]},I.productId))})]})})]})})})]},_.id)})})]})})]})]})},Kr="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-200 bg-white text-slate-600 transition hover:border-brand-primary/50 hover:text-brand-primary focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-brand-primary disabled:opacity-50",o_=({id:n,value:i,fallback:o,onChange:c,className:u,placeholder:f})=>{const g=h.useRef(null),[x,p]=h.useState(()=>((i==null?void 0:i.plainText)??o).trim().length===0),y=()=>{const q=g.current;if(!q){p(!0);return}const X=q.textContent??"";p(X.trim().length===0)};h.useEffect(()=>{const q=g.current;if(q){if(i&&typeof i.html=="string"){q.innerHTML!==i.html&&(q.innerHTML=i.html),y();return}q.textContent!==o&&(q.textContent=o,y())}},[i,o]);const v=()=>{const q=g.current;if(!q){c(null),p(!0);return}const X=q.innerHTML,A=q.innerText,F=Xd({html:X,plainText:A});c(F),y()},N=q=>{var X;document.execCommand("styleWithCSS",!1,"false"),document.execCommand(q),(X=g.current)==null||X.focus(),v()},j=q=>{var A;const X=q.target.value;document.execCommand("styleWithCSS",!1,"true"),document.execCommand("foreColor",!1,X),(A=g.current)==null||A.focus(),v()},S=()=>{var q;document.execCommand("removeFormat"),document.execCommand("unlink"),(q=g.current)==null||q.focus(),v()},w=()=>{v()},D=()=>{v()},C=q=>{q.preventDefault();const X=q.clipboardData.getData("text/plain");document.execCommand("insertText",!1,X),v()},L=q=>{if((q.metaKey||q.ctrlKey)&&q.key.toLowerCase()==="b"){q.preventDefault(),N("bold");return}if((q.metaKey||q.ctrlKey)&&q.key.toLowerCase()==="i"){q.preventDefault(),N("italic");return}(q.metaKey||q.ctrlKey)&&q.key.toLowerCase()==="x"&&q.shiftKey&&(q.preventDefault(),N("strikeThrough"))};return a.jsxs("div",{className:`space-y-2 ${u??""}`,children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("button",{type:"button",className:Kr,onClick:()=>N("bold"),"aria-label":"Mettre en gras",children:a.jsx(ry,{className:"h-4 w-4","aria-hidden":"true"})}),a.jsx("button",{type:"button",className:Kr,onClick:()=>N("italic"),"aria-label":"Mettre en italique",children:a.jsx(lv,{className:"h-4 w-4","aria-hidden":"true"})}),a.jsx("button",{type:"button",className:Kr,onClick:()=>N("strikeThrough"),"aria-label":"Barrer",children:a.jsx(Jv,{className:"h-4 w-4","aria-hidden":"true"})}),a.jsxs("label",{className:"flex items-center gap-2 text-xs font-medium text-slate-500",children:[a.jsx(Sv,{className:"h-4 w-4","aria-hidden":"true"}),a.jsx("span",{className:"sr-only",children:"Choisir une couleur"}),a.jsx("input",{type:"color",className:"h-8 w-8 cursor-pointer rounded-full border border-slate-200",onChange:j,"aria-label":"Sélectionner une couleur de texte"})]}),a.jsx("button",{type:"button",className:Kr,onClick:S,"aria-label":"Supprimer la mise en forme",children:a.jsx(us,{className:"h-4 w-4","aria-hidden":"true"})})]}),a.jsxs("div",{className:"relative",children:[f&&x&&a.jsx("div",{className:"pointer-events-none absolute left-4 top-3 text-sm text-slate-400",children:f}),a.jsx("div",{id:n,ref:g,className:"ui-textarea w-full min-h-[120px] whitespace-pre-wrap break-words px-4 py-3",contentEditable:!0,role:"textbox","aria-multiline":"true",suppressContentEditableWarning:!0,onInput:w,onBlur:D,onKeyDown:L,onPaste:C})]})]})},c_=["Inter","Poppins","Roboto","Montserrat","Playfair Display","Lora","Open Sans","Georgia, serif","Arial, sans-serif"],d_=["14px","16px","18px","20px","24px","clamp(1rem, 2vw, 1.5rem)"],Id=["#0f172a","#111827","#f8fafc","#ffffff","#e2e8f0","#f97316","transparent","currentColor"],u_="#ffffff",m_=n=>/^#(?:[0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(n.trim());new Set(j1);const f_={"navigation.brand":"Nom de la marque","navigation.brandLogo":"Logo principal","navigation.staffLogo":"Logo d'accès équipe","navigation.links.home":"Lien Accueil","navigation.links.about":"Lien À propos","navigation.links.menu":"Lien Menu","navigation.links.contact":"Lien Contact","navigation.links.loginCta":"Bouton d'accès staff","navigation.style.background":"Fond de la navigation","hero.title":"Titre du hero","hero.subtitle":"Sous-titre du hero","hero.ctaLabel":"Bouton principal du hero","hero.historyTitle":"Titre de l'historique","hero.reorderCtaLabel":"Bouton de réassort","hero.backgroundImage":"Image du hero","hero.style.background":"Fond du hero","about.title":"Titre À propos","about.description":"Texte À propos","about.image":"Image À propos","about.style.background":"Fond À propos","menu.title":"Titre du menu","menu.ctaLabel":"Bouton du menu","menu.loadingLabel":"Texte de chargement du menu","menu.image":"Image du menu","menu.style.background":"Fond du menu","instagramReviews.title":"Titre Avis Instagram","instagramReviews.subtitle":"Sous-titre Avis Instagram","instagramReviews.image":"Image centrale Avis Instagram","instagramReviews.style.background":"Fond Avis Instagram","findUs.title":"Titre Encuéntranos","findUs.addressLabel":"Libellé de l'adresse (Encuéntranos)","findUs.address":"Adresse (Encuéntranos)","findUs.cityLabel":"Libellé de contact","findUs.city":"Email (Encuéntranos)","findUs.hoursLabel":"Libellé des horaires","findUs.hours":"Horaires","findUs.mapLabel":"Libellé du lien carte","findUs.style.background":"Fond Encuéntranos","footer.text":"Texte du pied de page","footer.style.background":"Fond du pied de page"},p_={...f_},h_=[{id:"preview",label:"Aperçu"},{id:"custom",label:"Personnalisation"}],g_=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`asset-${Date.now()}-${Math.random().toString(36).slice(2,10)}`,ki=n=>{var u;const{type:i,name:o}=n;if(i.startsWith("image/"))return"image";if(i.startsWith("video/"))return"video";if(i.startsWith("audio/"))return"audio";if(i.includes("font"))return"font";const c=(u=o.split(".").pop())==null?void 0:u.toLowerCase();return c&&["ttf","otf","woff","woff2"].includes(c)?"font":"raw"},Zr=n=>typeof globalThis.structuredClone=="function"?globalThis.structuredClone(n):JSON.parse(JSON.stringify(n)),Wg=(n,i,o)=>{const c=i.split("."),u=c.pop();if(!u)return;let f=n;c.forEach(g=>{if(f&&typeof f=="object"){const x=f[g];x&&typeof x=="object"?f[g]=Array.isArray(x)?[...x]:{...x}:f[g]={},f=f[g]}}),f&&typeof f=="object"&&(f[u]=o)},Gh=(n,i,o)=>{const c={};o.fontFamily&&o.fontFamily.trim().length>0&&(c.fontFamily=o.fontFamily.trim()),o.fontSize&&o.fontSize.trim().length>0&&(c.fontSize=o.fontSize.trim()),o.textColor&&o.textColor.trim().length>0&&(c.textColor=o.textColor.trim()),o.backgroundColor&&o.backgroundColor.trim().length>0&&(c.backgroundColor=o.backgroundColor.trim());const u={...n.elementStyles};Object.keys(c).length===0?delete u[i]:u[i]=c,n.elementStyles=u},Yh=(n,i,o)=>{const c={...n.elementRichText};o&&o.html.trim().length>0?c[i]=o:delete c[i],n.elementRichText=c},x_=(n,i,o)=>{const c=Fa(i),u={...n[c]},f={...u.style,background:{...o}};u.style=f,n[c]=u},b_=(n,i)=>{var f;const o=((f=n.assets)==null?void 0:f.library)??[],c=o.findIndex(g=>g.url===i.url||g.id===i.id),u=c>=0?o.map((g,x)=>x===c?i:g):[...o,i];n.assets={...n.assets,library:u}},ex=(n,i)=>{const o=i.split(".");let c=n;for(const u of o){if(!c||typeof c!="object")return"";c=c[u]}return typeof c=="string"?c:""},y_=(n,i)=>{const o=ex(n,i);return o.trim().length>0?o:null},v_=(n,i)=>n.elementStyles[i]??{},j_=(n,i)=>n.elementRichText[i]??null,__=(n,i)=>{const o=Fa(i);return n[o].style.background},ro=(n,i)=>{const o=n.name.replace(/\.[^/.]+$/,"").trim()||"media",c=ki(n),u=c==="font"?Jd(o):o;return{id:g_(),name:u,url:i,format:n.type||"application/octet-stream",bytes:n.size,type:c,createdAt:new Date().toISOString()}},N_=n=>{if(n===0)return"0 o";const i=["o","Ko","Mo","Go"],o=Math.min(Math.floor(Math.log(n)/Math.log(1024)),i.length-1),c=n/Math.pow(1024,o);return`${c.toFixed(c>=10||o===0?0:1)} ${i[o]}`},w_=[{id:"navigation",title:"Navigation",description:"Logos, liens principaux et fond du menu supérieur.",groups:[{id:"navigation-main",title:"Contenu principal",fields:[{id:"navigation-brand",type:"text",element:"navigation.brand",label:"Nom de la marque"},{id:"navigation-home",type:"text",element:"navigation.links.home",label:"Libellé du lien Accueil"},{id:"navigation-about",type:"text",element:"navigation.links.about",label:"Libellé du lien À propos"},{id:"navigation-menu",type:"text",element:"navigation.links.menu",label:"Libellé du lien Menu"},{id:"navigation-contact",type:"text",element:"navigation.links.contact",label:"Libellé du lien Contact"},{id:"navigation-login",type:"text",element:"navigation.links.loginCta",label:"Texte du bouton d'accès staff"}]},{id:"navigation-branding",title:"Identité visuelle",fields:[{id:"navigation-brand-logo",type:"image",element:"navigation.brandLogo",label:"Logo principal",description:"PNG ou SVG recommandé pour un rendu net sur tous les écrans."},{id:"navigation-staff-logo",type:"image",element:"navigation.staffLogo",label:"Logo d'accès équipe",description:"S'affiche pour le bouton d'accès staff si disponible."}]},{id:"navigation-background",title:"Fond et mise en forme",fields:[{id:"navigation-style-background",type:"background",element:"navigation.style.background",label:"Fond du bandeau"}]}]},{id:"hero",title:"Section Hero",description:"Grand bandeau d’ouverture avec accroche et image de fond.",groups:[{id:"hero-content",title:"Contenu",fields:[{id:"hero-title",type:"text",element:"hero.title",label:"Titre principal",allowRichText:!0,showStyleOptions:!0,multiline:!0},{id:"hero-subtitle",type:"text",element:"hero.subtitle",label:"Sous-titre",allowRichText:!0,showStyleOptions:!0,multiline:!0},{id:"hero-cta",type:"text",element:"hero.ctaLabel",label:"Bouton principal"},{id:"hero-history",type:"text",element:"hero.historyTitle",label:"Titre du bloc historique",multiline:!0},{id:"hero-reorder",type:"text",element:"hero.reorderCtaLabel",label:"Bouton de réassort"}]},{id:"hero-visuals",title:"Visuels et ambiance",fields:[{id:"hero-background-image",type:"image",element:"hero.backgroundImage",label:"Image de fond",description:"Utilisez des images haute résolution. Optimisation Cloudinary recommandée."},{id:"hero-background-style",type:"background",element:"hero.style.background",label:"Couleurs et ambiance"}]}]},{id:"about",title:"Section À propos",description:"Présentation de votre histoire et visuels associés.",groups:[{id:"about-content",title:"Contenu",fields:[{id:"about-title",type:"text",element:"about.title",label:"Titre",showStyleOptions:!0},{id:"about-description",type:"text",element:"about.description",label:"Texte descriptif",allowRichText:!0,multiline:!0,showStyleOptions:!0}]},{id:"about-visuals",title:"Visuels",fields:[{id:"about-image",type:"image",element:"about.image",label:"Image principale",description:"Photo illustrative de votre établissement ou de vos produits."},{id:"about-background",type:"background",element:"about.style.background",label:"Fond de section"}]}]},{id:"menu",title:"Section Menu",description:"Mettre en avant vos plats signatures et CTA vers la commande.",groups:[{id:"menu-content",title:"Contenu",fields:[{id:"menu-title",type:"text",element:"menu.title",label:"Titre du menu",showStyleOptions:!0},{id:"menu-cta",type:"text",element:"menu.ctaLabel",label:"Texte du bouton",showStyleOptions:!0},{id:"menu-loading",type:"text",element:"menu.loadingLabel",label:"Message de chargement",multiline:!0}]},{id:"menu-visuals",title:"Visuels",fields:[{id:"menu-image",type:"image",element:"menu.image",label:"Image d’illustration"},{id:"menu-background",type:"background",element:"menu.style.background",label:"Fond de section"}]}]},{id:"instagram",title:"Section Avis Instagram",description:"Personnalisez le carrousel social, ses textes et ses visuels.",groups:[{id:"instagram-header",title:"En-tête de section",fields:[{id:"instagram-title",type:"text",element:"instagramReviews.title",label:"Titre de la section",showStyleOptions:!0},{id:"instagram-subtitle",type:"text",element:"instagramReviews.subtitle",label:"Sous-titre",allowRichText:!0,multiline:!0},{id:"instagram-image",type:"image",element:"instagramReviews.image",label:"Image centrale",description:"Illustration affichée à droite du carrousel."},{id:"instagram-background",type:"background",element:"instagramReviews.style.background",label:"Fond de section"}]},...wi.map((n,i)=>({id:`instagram-review-${n}`,title:`Carte témoignage ${i+1}`,description:"Personnalisez le contenu de la carte et les médias associés (avatar, visuel de post, mise en avant).",fields:[{id:`instagram-review-${n}-name`,type:"text",element:`instagramReviews.reviews.${n}.name`,label:"Nom"},{id:`instagram-review-${n}-handle`,type:"text",element:`instagramReviews.reviews.${n}.handle`,label:"Handle Instagram"},{id:`instagram-review-${n}-timeAgo`,type:"text",element:`instagramReviews.reviews.${n}.timeAgo`,label:"Durée depuis la publication"},{id:`instagram-review-${n}-message`,type:"text",element:`instagramReviews.reviews.${n}.message`,label:"Message principal",multiline:!0,allowRichText:!0},{id:`instagram-review-${n}-highlight`,type:"text",element:`instagramReviews.reviews.${n}.highlight`,label:"Message mis en avant",multiline:!0},{id:`instagram-review-${n}-highlight-caption`,type:"text",element:`instagramReviews.reviews.${n}.highlightCaption`,label:"Description du highlight",multiline:!0},{id:`instagram-review-${n}-badge`,type:"text",element:`instagramReviews.reviews.${n}.badgeLabel`,label:"Badge"},{id:`instagram-review-${n}-location`,type:"text",element:`instagramReviews.reviews.${n}.location`,label:"Localisation"},{id:`instagram-review-${n}-avatar`,type:"image",element:`instagramReviews.reviews.${n}.avatarUrl`,label:"Avatar"},{id:`instagram-review-${n}-highlight-image`,type:"image",element:`instagramReviews.reviews.${n}.highlightImageUrl`,label:"Image highlight"},{id:`instagram-review-${n}-post-image`,type:"image",element:`instagramReviews.reviews.${n}.postImageUrl`,label:"Image du post"},{id:`instagram-review-${n}-post-alt`,type:"text",element:`instagramReviews.reviews.${n}.postImageAlt`,label:"Texte alternatif de l'image du post"}]}))]},{id:"find-us",title:"Section Encuéntranos",description:"Coordonnées, horaires et informations de contact.",groups:[{id:"find-us-content",title:"Contenu",fields:[{id:"find-us-title",type:"text",element:"findUs.title",label:"Titre",showStyleOptions:!0},{id:"find-us-address-label",type:"text",element:"findUs.addressLabel",label:"Libellé de l'adresse"},{id:"find-us-address",type:"text",element:"findUs.address",label:"Adresse complète",multiline:!0},{id:"find-us-city-label",type:"text",element:"findUs.cityLabel",label:"Libellé de contact"},{id:"find-us-city",type:"text",element:"findUs.city",label:"Contact (mail ou téléphone)"},{id:"find-us-hours-label",type:"text",element:"findUs.hoursLabel",label:"Libellé des horaires"},{id:"find-us-hours",type:"text",element:"findUs.hours",label:"Horaires détaillés",multiline:!0},{id:"find-us-map-label",type:"text",element:"findUs.mapLabel",label:"Libellé du lien carte"}]},{id:"find-us-background",title:"Fond",fields:[{id:"find-us-style-background",type:"background",element:"findUs.style.background",label:"Personnalisation du fond"}]}]},{id:"footer",title:"Pied de page",description:"Dernière section visible de la page d’accueil.",groups:[{id:"footer-content",title:"Contenu",fields:[{id:"footer-text",type:"text",element:"footer.text",label:"Texte du pied de page",multiline:!0,allowRichText:!0,showStyleOptions:!0}]},{id:"footer-background",title:"Fond",fields:[{id:"footer-style-background",type:"background",element:"footer.style.background",label:"Couleur ou image de fond"}]}]}],Cd=({element:n,label:i,description:o,isActive:c,register:u,onFocus:f,children:g})=>{const x=h.useCallback(p=>{u(n,p)},[n,u]);return a.jsxs("div",{ref:x,className:`group relative rounded-3xl border p-6 transition shadow-sm focus-within:ring-2 focus-within:ring-brand-primary/60 ${c?"border-brand-primary/80 ring-1 ring-brand-primary/40":"border-slate-200 hover:border-slate-300"}`,tabIndex:-1,onFocusCapture:()=>f(n),onMouseEnter:()=>f(n),children:[a.jsxs("div",{className:"mb-4 flex items-start justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-base font-semibold text-slate-900",children:i}),o&&a.jsx("p",{className:"mt-1 text-sm text-slate-500",children:o})]}),c&&a.jsx("span",{className:"rounded-full bg-brand-primary/10 px-3 py-1 text-xs font-medium text-brand-primary",children:"Sélectionné"})]}),a.jsx("div",{className:"space-y-4",children:g})]})},S_=({element:n,draft:i,onApply:o,fontOptions:c,onAssetAdded:u,multiline:f=!1,allowRichText:g=!0,showStyleOptions:x=!1,placeholder:p})=>{const y=ex(i,n),v=j_(i,n),N=v_(i,n),[j,S]=h.useState(y),[w,D]=h.useState(v),[C,L]=h.useState(!!v),[q,X]=h.useState(N.fontFamily??""),[A,F]=h.useState(N.fontSize??""),[te,J]=h.useState(N.textColor??""),[Q,oe]=h.useState(N.backgroundColor??""),[H,W]=h.useState(null),[T,K]=h.useState(!1);h.useEffect(()=>{S(y),D(v),L(!!v),X(N.fontFamily??""),F(N.fontSize??""),J(N.textColor??""),oe(N.backgroundColor??"")},[y,v,N.fontFamily,N.fontSize,N.textColor,N.backgroundColor]);const B=h.useCallback(()=>{const z=j;o(Z=>(Wg(Z,n,z),Yh(Z,n,C?w:null),x&&Gh(Z,n,{fontFamily:q,fontSize:A,textColor:te,backgroundColor:Q}),Z))},[Q,n,q,A,C,o,j,w,x,te]),le=h.useCallback(()=>{X(""),F(""),J(""),oe(""),o(z=>(Gh(z,n,{}),z))},[n,o]),_=()=>{C?(L(!1),D(null),o(z=>(Yh(z,n,null),z))):L(!0)},E=async z=>{var $;const Z=($=z.target.files)==null?void 0:$[0];if(Z){W(null),K(!0);try{const R=await bl(Z,{tags:[ki(Z)]}),I=ro(Z,R);u(I),X(I.name)}catch(R){W(R instanceof Error?R.message:"Impossible de téléverser la police. Réessayez plus tard.")}finally{K(!1),z.target.value=""}}};return a.jsxs("div",{className:"space-y-5",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-slate-700",htmlFor:`${n}-input`,children:"Contenu"}),f?a.jsx("textarea",{id:`${n}-input`,className:"ui-textarea w-full",rows:4,value:j,placeholder:p,onChange:z=>S(z.target.value)}):a.jsx("input",{id:`${n}-input`,className:"ui-input w-full",value:j,placeholder:p,onChange:z=>S(z.target.value)})]}),g&&a.jsxs("div",{className:"space-y-3 rounded-2xl border border-slate-200 bg-slate-50/70 p-4",children:[a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Mise en forme avancée"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Activez l’éditeur riche pour ajouter du gras, de l’italique et des liens."})]}),a.jsx("button",{type:"button",className:"ui-btn-secondary whitespace-nowrap",onClick:_,children:C?"Désactiver":"Activer"})]}),C&&a.jsx(o_,{id:`${n}-rich`,value:w,fallback:j,onChange:z=>{D(z),z&&S(z.plainText)},className:"rounded-xl border border-slate-200 bg-white",placeholder:"Saisissez votre texte..."})]}),x&&a.jsxs("div",{className:"space-y-4 rounded-2xl border border-slate-200 p-4",children:[a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"Style du texte"}),a.jsx("button",{type:"button",className:"text-sm font-medium text-brand-primary",onClick:le,children:"Réinitialiser"})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Police"}),a.jsx("input",{className:"ui-input w-full",value:q,onChange:z=>X(z.target.value),list:`${n}-font-options`,placeholder:"Ex: Poppins"}),a.jsx("datalist",{id:`${n}-font-options`,children:c.map(z=>a.jsx("option",{value:z},z))}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-slate-500",children:[a.jsxs("label",{className:"ui-btn-secondary relative cursor-pointer text-xs",children:[a.jsx("input",{type:"file",accept:".woff,.woff2,.ttf,.otf",className:"absolute inset-0 cursor-pointer opacity-0",onChange:E,disabled:T}),a.jsx(jl,{className:"mr-2 h-3.5 w-3.5","aria-hidden":"true"}),"Importer une police"]}),T&&a.jsx(yl,{className:"h-4 w-4 animate-spin text-brand-primary","aria-hidden":"true"}),H&&a.jsx("span",{className:"text-xs text-amber-600",children:H})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Taille du texte"}),a.jsx("input",{className:"ui-input w-full",value:A,onChange:z=>F(z.target.value),list:`${n}-size-options`,placeholder:"Ex: 18px"}),a.jsx("datalist",{id:`${n}-size-options`,children:d_.map(z=>a.jsx("option",{value:z},z))})]})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Couleur du texte"}),a.jsx("input",{className:"ui-input w-full",value:te,onChange:z=>J(z.target.value),placeholder:"Ex: #0f172a"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Id.map(z=>a.jsx("button",{type:"button",className:"h-8 w-8 rounded-full border border-slate-200",style:{backgroundColor:z},onClick:()=>J(z),children:a.jsx("span",{className:"sr-only",children:z})},z))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Fond du texte"}),a.jsx("input",{className:"ui-input w-full",value:Q,onChange:z=>oe(z.target.value),placeholder:"Ex: transparent"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Id.map(z=>a.jsx("button",{type:"button",className:"h-8 w-8 rounded-full border border-slate-200",style:{backgroundColor:z},onClick:()=>oe(z),children:a.jsx("span",{className:"sr-only",children:z})},z))})]})]})]}),a.jsxs("div",{className:"flex flex-wrap justify-end gap-3",children:[a.jsx("button",{type:"button",className:"ui-btn-secondary",onClick:()=>{S(y),D(v),L(!!v),X(N.fontFamily??""),F(N.fontSize??""),J(N.textColor??""),oe(N.backgroundColor??"")},children:"Réinitialiser les modifications"}),a.jsx("button",{type:"button",className:"ui-btn-primary",onClick:B,children:"Appliquer"})]})]})},C_=({element:n,draft:i,onApply:o,onAssetAdded:c,placeholder:u})=>{const f=y_(i,n)??"",[g,x]=h.useState(f),[p,y]=h.useState(null),[v,N]=h.useState(!1);h.useEffect(()=>{x(f)},[f]);const j=()=>{const D=g.trim(),C=ms(D)??(D.length>0?D:null);o(L=>(Wg(L,n,C),L))},S=async D=>{var L;const C=(L=D.target.files)==null?void 0:L[0];if(C){y(null),N(!0);try{const q=await bl(C,{tags:[ki(C)]}),X=ro(C,q);c(X),x(q)}catch(q){y(q instanceof Error?q.message:"Téléversement impossible. Vérifiez votre connexion.")}finally{N(!1),D.target.value=""}}},w=g.trim();return a.jsxs("div",{className:"space-y-5",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-slate-700",htmlFor:`${n}-image`,children:"URL de l'image ou du média"}),a.jsx("input",{id:`${n}-image`,className:"ui-input w-full",value:g,placeholder:u??"https://",onChange:D=>x(D.target.value)}),a.jsx("p",{className:"text-xs text-slate-500",children:"Collez une URL Cloudinary ou téléversez un fichier pour l’ajouter automatiquement."})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsxs("label",{className:"ui-btn-secondary relative cursor-pointer",children:[a.jsx("input",{type:"file",accept:"image/*,video/*,audio/*,.ttf,.otf,.woff,.woff2",className:"absolute inset-0 cursor-pointer opacity-0",onChange:S,disabled:v}),a.jsx(jl,{className:"mr-2 h-4 w-4","aria-hidden":"true"}),"Importer un média"]}),v&&a.jsx(yl,{className:"h-4 w-4 animate-spin text-brand-primary","aria-hidden":"true"}),a.jsx("button",{type:"button",className:"text-sm font-medium text-brand-primary hover:text-brand-primary/80",onClick:()=>x(""),children:"Supprimer le média"})]}),p&&a.jsxs("div",{className:"flex items-start gap-2 rounded-2xl border border-amber-200 bg-amber-50 p-3 text-sm text-amber-700",children:[a.jsx(Aa,{className:"mt-0.5 h-4 w-4","aria-hidden":"true"}),a.jsx("p",{children:p})]}),w&&a.jsx("div",{className:"overflow-hidden rounded-2xl border border-slate-200",children:a.jsx("img",{src:w,alt:"Aperçu",className:"h-48 w-full object-cover"})}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"button",className:"ui-btn-primary",onClick:j,children:"Appliquer"})})]})},k_=({element:n,draft:i,onApply:o,onAssetAdded:c})=>{const u=__(i,n),[f,g]=h.useState(u.type),[x,p]=h.useState(u.color),[y,v]=h.useState(u.image??""),[N,j]=h.useState(null),[S,w]=h.useState(!1),D=m_(x)?x:u_,C=A=>{const F=A.target.value;p(F),g("color")},L=A=>{const F=A.target.value;p(F),F.trim().length>0&&g("color")};h.useEffect(()=>{g(u.type),p(u.color),v(u.image??"")},[u.type,u.color,u.image]);const q=()=>{const A=x.trim()||"transparent",F=y.trim(),te=ms(F)??(F.length>0?F:null),J=f==="image"&&te?te:null;o(Q=>(x_(Q,n,{type:J?"image":"color",color:A,image:J}),Q)),J||g("color")},X=async A=>{var te;const F=(te=A.target.files)==null?void 0:te[0];if(F){j(null),w(!0);try{const J=await bl(F,{tags:[ki(F)]}),Q=ro(F,J);c(Q),v(J),g("image")}catch(J){j(J instanceof Error?J.message:"Téléversement impossible.")}finally{w(!1),A.target.value=""}}};return a.jsxs("div",{className:"space-y-5",children:[a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{type:"button",className:`ui-btn-secondary flex-1 ${f==="color"?"ring-2 ring-brand-primary":""}`,onClick:()=>g("color"),children:"Couleur"}),a.jsx("button",{type:"button",className:`ui-btn-secondary flex-1 ${f==="image"?"ring-2 ring-brand-primary":""}`,onClick:()=>g("image"),children:"Image"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-sm font-medium text-slate-700",htmlFor:`${n}-background-color`,children:"Couleur"}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsx("input",{type:"color",className:"h-10 w-16 cursor-pointer rounded-md border border-slate-200 bg-white",value:D,onChange:C,"aria-label":"Sélectionner une couleur"}),a.jsx("input",{id:`${n}-background-color`,className:"ui-input flex-1 min-w-[12rem]",value:x,onChange:L,placeholder:"#ffffff ou transparent"})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Id.map(A=>a.jsx("button",{type:"button",className:"h-8 w-8 rounded-full border border-slate-200",style:{backgroundColor:A},onClick:()=>{p(A),g("color")},children:a.jsx("span",{className:"sr-only",children:A})},A))})]}),f==="image"&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-sm font-medium text-slate-700",htmlFor:`${n}-background-image`,children:"Image de fond"}),a.jsx("input",{id:`${n}-background-image`,className:"ui-input w-full",value:y,onChange:A=>v(A.target.value),placeholder:"https://"}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsxs("label",{className:"ui-btn-secondary relative cursor-pointer",children:[a.jsx("input",{type:"file",accept:"image/*,video/*",className:"absolute inset-0 cursor-pointer opacity-0",onChange:X,disabled:S}),a.jsx(jl,{className:"mr-2 h-4 w-4","aria-hidden":"true"}),"Importer une image"]}),S&&a.jsx(yl,{className:"h-4 w-4 animate-spin text-brand-primary","aria-hidden":"true"}),a.jsx("button",{type:"button",className:"text-sm font-medium text-brand-primary hover:text-brand-primary/80",onClick:()=>{v(""),g("color")},children:"Supprimer l'image"})]}),N&&a.jsxs("div",{className:"flex items-start gap-2 rounded-2xl border border-amber-200 bg-amber-50 p-3 text-sm text-amber-700",children:[a.jsx(Aa,{className:"mt-0.5 h-4 w-4","aria-hidden":"true"}),a.jsx("p",{children:N})]}),y.trim()&&a.jsx("div",{className:"overflow-hidden rounded-2xl border border-slate-200",children:a.jsx("img",{src:y,alt:"Aperçu du fond",className:"h-40 w-full object-cover"})})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"button",className:"ui-btn-primary",onClick:q,children:"Appliquer"})})]})},E_=({assets:n,onUpload:i})=>{const[o,c]=h.useState(null),[u,f]=h.useState(!1),[g,x]=h.useState(null),p=async S=>{try{await navigator.clipboard.writeText(S.url),c(S.id),setTimeout(()=>c(null),2e3)}catch(w){console.error(w)}},y=async S=>{var D;const w=(D=S.target.files)==null?void 0:D[0];if(w){x(null),f(!0);try{await i(w)}catch(C){x(C instanceof Error?C.message:"Téléversement impossible.")}finally{f(!1),S.target.value=""}}},v=n.filter(S=>S.type==="font"),N=n.filter(S=>S.type==="image"),j=n.filter(S=>S.type!=="image"&&S.type!=="font");return a.jsxs("section",{className:"space-y-6 rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[a.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Bibliothèque de médias"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Centralisez toutes vos ressources pour la personnalisation (polices, images, vidéos, audio)."})]}),a.jsxs("label",{className:"ui-btn-primary relative cursor-pointer",children:[a.jsx("input",{type:"file",accept:"image/*,video/*,audio/*,.ttf,.otf,.woff,.woff2",className:"absolute inset-0 cursor-pointer opacity-0",onChange:y,disabled:u}),a.jsx(jl,{className:"mr-2 h-4 w-4","aria-hidden":"true"}),"Ajouter un média"]})]}),g&&a.jsxs("div",{className:"flex items-start gap-3 rounded-2xl border border-amber-200 bg-amber-50 p-4 text-sm text-amber-700",children:[a.jsx(Aa,{className:"h-5 w-5","aria-hidden":"true"}),a.jsx("div",{children:a.jsx("p",{children:g})})]}),u&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[a.jsx(yl,{className:"h-4 w-4 animate-spin","aria-hidden":"true"})," Téléversement en cours…"]}),a.jsxs("div",{className:"space-y-6",children:[a.jsx(kd,{title:"Polices",assets:v,onCopy:p,copySuccessId:o}),a.jsx(kd,{title:"Images",assets:N,onCopy:p,copySuccessId:o}),a.jsx(kd,{title:"Autres médias",assets:j,onCopy:p,copySuccessId:o})]})]})},kd=({title:n,assets:i,onCopy:o,copySuccessId:c})=>i.length===0?a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-slate-700",children:n}),a.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Aucun média pour le moment."})]}):a.jsxs("div",{className:"space-y-3",children:[a.jsx("h3",{className:"text-sm font-semibold text-slate-700",children:n}),a.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:i.map(u=>a.jsxs("article",{className:"rounded-2xl border border-slate-200 p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-slate-900",children:u.name}),a.jsxs("p",{className:"text-xs text-slate-500",children:[u.format.split("/").pop()??u.format," • ",N_(u.bytes)]})]}),a.jsxs("button",{type:"button",className:`ui-btn-secondary flex items-center gap-2 text-xs ${c===u.id?"border-emerald-200 bg-emerald-50 text-emerald-700":""}`,onClick:()=>o(u),children:[a.jsx(qy,{className:"h-4 w-4","aria-hidden":"true"}),c===u.id?"Copié !":"Copier l’URL"]})]}),a.jsx("p",{className:"mt-3 break-all text-xs text-slate-500",children:u.url})]},u.id))})]}),T_=()=>{var ge;const{content:n,loading:i,error:o,updateContent:c}=Ci(),[u,f]=h.useState(()=>n?Zr(n):null),[g,x]=h.useState(null),[p,y]=h.useState(null),[v,N]=h.useState("custom"),[j,S]=h.useState(!1),[w,D]=h.useState(null),[C,L]=h.useState(null),[q,X]=h.useState([]),[A,F]=h.useState(!1),[te,J]=h.useState(null),[Q,oe]=h.useState(null),[H,W]=h.useState(!1);h.useEffect(()=>{n&&f(Zr(n))},[n]),h.useEffect(()=>{let ae=!0;return(async()=>{F(!0),J(null);try{const _e=await ye.getBestSellerProducts();ae&&X(_e)}catch(_e){ae&&J(_e instanceof Error?_e.message:"Impossible de charger les produits mis en avant.")}finally{ae&&F(!1)}})(),()=>{ae=!1}},[]),h.useEffect(()=>{if(!C)return;const ae=setTimeout(()=>L(null),4e3);return()=>clearTimeout(ae)},[C]);const T=h.useCallback(ae=>{f(ce=>{if(!ce)return ce;const _e=Zr(ce);return ae(_e)})},[]),K=h.useCallback(ae=>{f(ce=>{if(!ce)return ce;const _e=Zr(ce);return b_(_e,ae),_e})},[]),B=h.useMemo(()=>{const ae=new Map;return w_.forEach(ce=>{ce.groups.forEach(_e=>{_e.fields.forEach(xe=>{ae.set(xe.element,{section:ce,group:_e,field:xe})})})}),ae},[]),le=h.useCallback(()=>{},[]),_=h.useCallback(ae=>{x(ae);try{const ce=Fa(ae);y(ce)}catch(ce){console.error(ce)}},[]),E=h.useCallback((ae,ce)=>{if(_(ae),y(ce.zone),!B.has(ae)){console.warn(`Aucun formulaire de personnalisation trouvé pour l'élément "${ae}".`);return}oe(ae)},[B,_,y]),z=async()=>{S(!0),D(null),L(null);try{if(!u)throw new Error("Le brouillon est indisponible.");const ae=await c(u);f(ae),L("Modifications enregistrées avec succès.")}catch(ae){D(ae instanceof Error?ae.message:"Une erreur est survenue lors de la sauvegarde.")}finally{S(!1)}},Z=h.useMemo(()=>{const ae=Array.from(c_);if(!u)return ae;const ce=u.assets.library.filter(_e=>_e.type==="font").map(_e=>Jd(_e.name));return Array.from(new Set([...ae,...ce]))},[u]),$=h.useMemo(()=>Q?B.get(Q)??null:null,[Q,B]),R=h.useMemo(()=>{var ce;if(!Q)return"";const ae=((ce=B.get(Q))==null?void 0:ce.field.label)??Q;return p_[Q]??ae},[Q,B]),I=h.useCallback(()=>{oe(null),x(null),y(null)},[x,y,oe]);h.useEffect(()=>{v!=="custom"&&I()},[v,I]),h.useEffect(()=>{if(!Q)return;if(!$){I();return}if(typeof window>"u")return;const ae=window.setTimeout(()=>{const ce=document.querySelector('[data-element-editor-modal="true"]'),_e=ce==null?void 0:ce.querySelector('input, textarea, [contenteditable="true"], select');_e==null||_e.focus({preventScroll:!0})},80);return()=>{window.clearTimeout(ae)}},[$,I,Q]);const M=h.useCallback(ae=>{if(!u)return null;const ce={key:ae.id,element:ae.element,label:ae.label,description:ae.description,isActive:g===ae.element,register:le,onFocus:_};return ae.type==="text"?a.jsx(Cd,{...ce,children:a.jsx(S_,{element:ae.element,draft:u,onApply:T,fontOptions:Z,onAssetAdded:K,multiline:ae.multiline,allowRichText:ae.allowRichText,showStyleOptions:ae.showStyleOptions,placeholder:ae.placeholder})}):ae.type==="image"?a.jsx(Cd,{...ce,children:a.jsx(C_,{element:ae.element,draft:u,onApply:T,onAssetAdded:K,placeholder:ae.placeholder})}):a.jsx(Cd,{...ce,children:a.jsx(k_,{element:ae.element,draft:u,onApply:T,onAssetAdded:K})})},[g,K,T,u,_,Z,le]),re=h.useCallback(async ae=>{const ce=await bl(ae,{tags:[ki(ae)]}),_e=ro(ae,ce);K(_e)},[K]);if(i)return a.jsxs("div",{className:"flex h-full min-h-[60vh] flex-col items-center justify-center gap-3",children:[a.jsx(yl,{className:"h-10 w-10 animate-spin text-brand-primary","aria-hidden":"true"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Chargement du contenu du site…"})]});if(!n||!u)return a.jsxs("div",{className:"flex h-full min-h-[60vh] flex-col items-center justify-center gap-3",children:[a.jsx(Aa,{className:"h-6 w-6 text-amber-500","aria-hidden":"true"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Le contenu du site est en cours d'initialisation…"})]});const ue=((ge=u.assets)==null?void 0:ge.library)??[];return a.jsxs("div",{className:"space-y-8 px-4 sm:px-6 lg:px-0",children:[a.jsxs("header",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Site public"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Ajustez le contenu, les couleurs et les médias de votre page d’accueil en temps réel."})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[C&&a.jsxs("div",{className:"flex items-center gap-2 rounded-full bg-emerald-50 px-4 py-2 text-sm text-emerald-700",children:[a.jsx(Ey,{className:"h-4 w-4","aria-hidden":"true"}),C]}),w&&a.jsxs("div",{className:"flex items-center gap-2 rounded-full bg-amber-50 px-4 py-2 text-sm text-amber-700",children:[a.jsx(Aa,{className:"h-4 w-4","aria-hidden":"true"}),w]}),a.jsx("button",{type:"button",onClick:()=>W(!0),className:"ui-btn-secondary",children:"Bibliothèque de médias"}),a.jsx("button",{type:"button",onClick:z,className:"ui-btn-primary",disabled:j,children:j?"Enregistrement…":"Enregistrer les modifications"})]})]}),o&&a.jsxs("div",{className:"flex items-start gap-3 rounded-3xl border border-amber-200 bg-amber-50 p-4 text-sm text-amber-700",children:[a.jsx(Aa,{className:"h-5 w-5","aria-hidden":"true"}),a.jsxs("div",{children:[a.jsx("p",{children:o}),a.jsx("p",{className:"mt-1",children:"Les valeurs affichées correspondent à la configuration par défaut."})]})]}),a.jsx("nav",{className:"flex w-full items-center gap-2 overflow-x-auto rounded-full bg-slate-100 p-1",children:h_.map(ae=>a.jsx("button",{type:"button",onClick:()=>N(ae.id),className:`flex-1 rounded-full px-4 py-2 text-sm font-medium transition ${v===ae.id?"bg-white text-slate-900 shadow":"text-slate-500 hover:text-slate-700"}`,children:ae.label},ae.id))}),a.jsx("div",{children:v==="preview"?a.jsx("div",{className:"mx-auto w-full max-w-6xl",children:a.jsx("div",{className:"rounded-[2.5rem] border border-slate-200 bg-slate-50 p-6",children:a.jsx(Ch,{content:u,bestSellerProducts:q,onEdit:()=>{},activeZone:null,showEditButtons:!1})})}):a.jsxs("div",{className:"space-y-6",children:[te&&a.jsxs("div",{className:"flex items-start gap-3 rounded-2xl border border-amber-200 bg-amber-50 p-4 text-sm text-amber-700",children:[a.jsx(Aa,{className:"h-5 w-5","aria-hidden":"true"}),a.jsx("p",{children:te})]}),a.jsx("div",{className:"mx-auto w-full max-w-7xl",children:a.jsx("div",{className:"rounded-[2.75rem] border border-slate-200 bg-slate-50 p-4 shadow-inner sm:p-6 lg:p-8",children:a.jsx(Ch,{content:u,bestSellerProducts:q,onEdit:(ae,ce)=>E(ae,ce),activeZone:p})})}),A&&a.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-slate-500",children:[a.jsx(yl,{className:"h-4 w-4 animate-spin","aria-hidden":"true"}),"Chargement des produits populaires…"]})]})}),a.jsx(Tt,{isOpen:!!(Q&&$),onClose:I,title:R?`Personnaliser ${R}`:"Personnalisation",size:"lg",children:$?a.jsxs("div",{className:"space-y-5","data-element-editor-modal":"true",children:[a.jsxs("div",{className:"rounded-2xl bg-slate-100/70 p-4 text-sm text-slate-600",children:[a.jsx("p",{className:"text-sm font-semibold text-slate-900",children:$.section.title}),a.jsx("p",{className:"text-xs text-slate-500",children:$.group.title}),$.group.description&&a.jsx("p",{className:"mt-2 text-xs text-slate-500",children:$.group.description})]}),M($.field)]}):a.jsx("p",{className:"text-sm text-slate-500",children:"Sélectionnez un élément à personnaliser."})}),a.jsx(Tt,{isOpen:H,onClose:()=>W(!1),title:"Bibliothèque de médias",size:"xl",children:a.jsx(E_,{assets:ue,onUpload:re})})]})},tx=({onLogout:n})=>{const i=Vs(),o=_a.useCallback(()=>{n&&n(),i("/login",{replace:!0})},[i,n]);return a.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-6 px-4 text-center",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h1",{className:"text-3xl font-semibold text-gray-900",children:"Accès non autorisé"}),a.jsx("p",{className:"text-base text-gray-600",children:"Votre rôle ne dispose actuellement d'aucune page accessible. Veuillez contacter un administrateur ou revenir à l'écran de connexion."})]}),a.jsx("button",{type:"button",onClick:o,className:"rounded-md bg-brand-primary px-6 py-3 text-white transition hover:bg-brand-primary/90 focus:outline-none focus:ring-2 focus:ring-brand-primary focus:ring-offset-2",children:"Retour à la connexion"})]})},M_=[{path:"/dashboard",permissionKey:"/dashboard",Component:F2},{path:"/para-llevar",permissionKey:"/para-llevar",Component:dj},{path:"/ventes",permissionKey:"/ventes",Component:X2},{path:"/commande/:tableId",permissionKey:"/ventes",Component:nj},{path:"/cocina",permissionKey:"/cocina",Component:cj},{path:"/resume-ventes",permissionKey:"/resume-ventes",Component:r_},{path:"/ingredients",permissionKey:"/ingredients",Component:uj},{path:"/produits",permissionKey:"/produits",Component:hj},{path:"/promotions",permissionKey:"/promotions",Component:Kj},{path:ps,permissionKey:ps,Component:T_}],ax=()=>a.jsx("div",{className:"flex items-center justify-center h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-brand-primary"})}),sx=({children:n,permissionKey:i})=>{var x;const{role:o,loading:c,logout:u}=$a();if(c)return a.jsx(ax,{});if(!o)return a.jsx(ao,{to:"/",replace:!0});const f=i?(x=o.permissions)==null?void 0:x[i]:void 0;if(!(i?lo(f):!0)){const p=Pd(o);return p?a.jsx(ao,{to:p,replace:!0}):a.jsx(tx,{onLogout:u})}return n},A_=()=>{const{role:n,loading:i,logout:o}=$a(),[,c]=h.useState(()=>{const f=so();return f?f.orderId:null});if(Ci(),h.useEffect(()=>{const f=()=>{const g=so();c(g?g.orderId:null)};return window.addEventListener("storage",f),()=>window.removeEventListener("storage",f)},[]),i)return a.jsx(ax,{});if(!n)return a.jsx(z2,{});const u=Pd(n);return u?a.jsx(ao,{to:u,replace:!0}):a.jsx(tx,{onLogout:o})},z_=()=>a.jsx(sx,{children:a.jsx(y2,{})}),O_=()=>a.jsxs(Nb,{children:[a.jsx(ul,{path:"/",element:a.jsx(A_,{})}),a.jsx(ul,{path:"/login",element:a.jsx(ao,{to:"/",replace:!0})}),a.jsx(ul,{path:"/commande-client",element:a.jsx(s_,{})}),a.jsx(ul,{element:a.jsx(z_,{}),children:M_.map(({path:n,permissionKey:i,Component:o})=>a.jsx(ul,{path:n,element:a.jsx(sx,{permissionKey:i,children:a.jsx(o,{})})},n))}),a.jsx(ul,{path:"*",element:a.jsx(n_,{})})]}),D_=()=>a.jsx(f2,{children:a.jsx(_b,{children:a.jsx(O_,{})})}),nx=document.getElementById("root");if(!nx)throw new Error("Could not find root element to mount to");const R_=Bb.createRoot(nx);R_.render(a.jsx(_a.StrictMode,{children:a.jsx(D_,{})}));
